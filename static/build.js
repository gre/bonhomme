!function e(t,r,n){function i(s,a){if(!r[s]){if(!t[s]){var h="function"==typeof require&&require;if(!a&&h)return h(s,!0);if(o)return o(s,!0);var c=new Error("Cannot find module '"+s+"'");throw c.code="MODULE_NOT_FOUND",c}var u=r[s]={exports:{}};t[s][0].call(u.exports,function(e){var r=t[s][1][e];return i(r?r:e)},u,u.exports,e,t,r,n)}return r[s].exports}for(var o="function"==typeof require&&require,s=0;s<n.length;s++)i(n[s]);return i}({1:[function(e,t){function r(e,t){var r=t?t[~~(t.length*e())]:o(e);i.Sprite.call(this,r)}var n=e("./utils/spriteCollides"),i=e("pixi.js"),o=e("./generateCar"),s=e("./behavior/velUpdate");r.prototype=Object.create(i.Sprite.prototype),r.prototype.constructor=r,r.prototype.destroy=function(){this.parent&&this.parent.removeChild(this)},r.prototype.update=function(e,t){s.call(this,e,t),this.width=this.vel[0]<0?-84:84,this.height=48},r.prototype.hitBox=function(){var e=Math.abs(this.width);return{x:Math.min(this.x,this.x+this.width)-this.pivot.x+.2*e,y:Math.min(this.y,this.y+this.height)-this.pivot.y,width:.6*e,height:Math.abs(this.height)}},r.prototype.collides=n,t.exports=r},{"./behavior/velUpdate":31,"./generateCar":34,"./utils/spriteCollides":44,"pixi.js":219}],2:[function(e,t){function r(e,t,r,i){n.DisplayObjectContainer.call(this);var h=new n.Sprite(a);h.pivot.set(12,24);var c=new n.Text(e.player,{align:"center",font:"normal "+(i||10)+"px "+o.name,fill:r?"#F40":"#C40"});c.position.set(-c.width/2,0),this.position.set(e.x,s.scoreToY(e.score)),this.addChild(h),this.addChild(c),this.alpha=e.opacity,this.animated=t,this.start=Date.now()}var n=e("pixi.js"),i=e("smoothstep"),o=e("./font"),s=e("./Player"),a=n.Texture.fromImage("./img/dead_carrot.png");r.prototype=Object.create(n.DisplayObjectContainer.prototype),r.prototype.constructor=r,r.prototype.update=function(){if(this.animated){var e=1+i(4e3,0,Date.now()-this.start);this.scale.set(e,e)}},t.exports=r},{"./Player":19,"./font":33,"pixi.js":219,smoothstep:226}],3:[function(e,t){function r(e){n.Sprite.call(this,a),this.targetScale=e,this.growSpeed=.005,this.scale.set(0,0),this.pivot.set(16,16)}var n=e("pixi.js"),i=e("./utils/spriteCollides"),o=e("./behavior/destroyOutOfMap"),s=e("./behavior/velUpdate"),a=n.Texture.fromImage("./img/fireball.png");r.prototype=Object.create(n.Sprite.prototype),r.prototype.constructor=r,r.prototype.update=function(e,t){if(s.call(this,e,t),this.startT||(this.startT=e),this.scale.x<this.targetScale){var r=Math.min((e-this.startT)*this.growSpeed,this.targetScale);this.scale.set(r,r)}o.call(this,e,t)},r.prototype.hitBox=function(){return{x:this.x-this.pivot.x*this.scale.x+.2*this.width,y:this.y-this.pivot.y*this.scale.y+.2*this.height,width:.6*this.width,height:.6*this.height}},r.prototype.playerLifeValue=function(){return-30*this.scale.x},r.prototype.explodeInWorld=function(e){e.fireballExplode(this)},r.prototype.hitPlayer=function(e){e.onFireball(this)},r.prototype.collides=i,t.exports=r},{"./behavior/destroyOutOfMap":28,"./behavior/velUpdate":31,"./utils/spriteCollides":44,"pixi.js":219}],4:[function(e,t){function r(e){n.Sprite.call(this,s[~~(Math.random()*s.length)]),this.rotation=2*Math.random()*Math.PI,this.pivot.set(12,12),this.height=this.width=e}var n=e("pixi.js"),i=e("./utils/tilePIXI"),o=n.Texture.fromImage("./img/foots.png"),s=[0,1,2,3,4,5,6,7,8,9].map(function(e){return i.tile24(o,0,e)});r.prototype=Object.create(n.Sprite.prototype),r.prototype.constructor=r,t.exports=r},{"./utils/tilePIXI":48,"pixi.js":219}],5:[function(e,t){function r(){n.DisplayObjectContainer.call(this),this.containers=new i(this.alloc.bind(this),this.free.bind(this),100,1,2,0)}var n=e("pixi.js"),i=e("sliding-window"),o=e("./conf"),s=e("./Foot");r.prototype=Object.create(n.DisplayObjectContainer.prototype),r.prototype.constructor=r,r.prototype.alloc=function(){var e=new n.DisplayObjectContainer;return this.addChild(e),e},r.prototype.free=function(e,t){this.removeChild(t)},r.prototype.watchWindow=function(e){this.containers.sync(e)},r.prototype.walk=function(e,t){var r=new s(t);r.position.x=e.x,r.position.y=e.y;var n=this.containers.getChunkForX(o.HEIGHT-e.y);n&&n.addChild(r)},t.exports=r},{"./Foot":4,"./conf":32,"pixi.js":219,"sliding-window":225}],6:[function(e,t){function r(e,t,r){n.Stage.call(this),n.EventTarget.mixin(this);var i=new p,o=new p,s=new n.DisplayObjectContainer,d=new f(e,i,o,s,g),m=new n.DisplayObjectContainer,v=new n.DisplayObjectContainer,y=new l(r,v);y.controls=t;var w=new n.DisplayObjectContainer,_=new n.DisplayObjectContainer,x=new n.DisplayObjectContainer,S=new n.Text("",{font:"bold 20px "+c.name,fill:"#88B"});S.position.x=10,S.position.y=10;var T=new n.Text("",{font:"bold 20px "+c.name,fill:"#B88"});T.position.x=10,T.position.y=40;var A=new n.Text("",{font:"normal 20px "+c.name});A.position.x=h.WIDTH-60,A.position.y=10;var E=new u(o);E.addChild(d),E.addChild(m),E.addChild(v),E.addChild(s),E.addChild(w),E.addChild(_),E.addChild(y),E.addChild(i),E.addChild(o),x.addChild(S),x.addChild(T),x.addChild(A),this.addChild(E),this.addChild(x),this.world=E,this.map=d,this.cars=i,this.particles=o,this.spawners=s,this.deadCarrots=m,this.footprints=v,this.player=y,this.players=w,this.names=_,this.players.update=b,this.ui=x,this.rank=T,this.score=S,this.life=A,this.controls=t,this.audio1=a.loop("/audio/1.ogg"),a.play("start")}var n=e("pixi.js"),i=e("smoothstep"),o=e("lodash"),s=e("./utils/dist"),a=e("./audio"),h=e("./conf"),c=e("./font"),u=e("./World"),f=e("./Map"),d=e("./DeadCarrot"),l=e("./Player"),p=e("./SpawnerCollection"),b=e("./behavior/updateChildren"),g="v2";r.prototype=Object.create(n.Stage.prototype),r.prototype.constructor=r,r.prototype.destroy=function(){this.audio1.stop();for(var e in this)this[e]=null},r.prototype.update=function(e,t){var r=this.world,n=this.player,o=this.cars,h=this.particles,c=this.controls,u=this.map,f=c.x()||c.y(),d=0,p=[];o.children.forEach(function(e){e.children.forEach(function(e){var t=h.collides(e);t&&(t.explodeInWorld(r),t.parent.removeChild(t));var o=s(e,n);d+=Math.pow(i(300,50,o),2),!e.neverSaw&&300>o&&(e.neverSaw=1,p.push(e))})}),p.forEach(function(e){a.play("car",e)});var b=0;if(!n.dead){var g=h.collides(n);g&&(g.explodeInWorld(r),g.hitPlayer(n),g.parent.removeChild(g),b++);var m=o.collides(n);m&&(n.onCarHit(m),r.carHitPlayerExplode(m,n))}b=Math.max(0,b-.001*t),this.audio1.setVolume(n.dead?0:f?.2+Math.min(.8,b+d/4):0);var v=l.getPlayerScore(n);if(v>0){for(var y=0,w=this.scores.length;w>y&&v<this.scores[y].score;++y);++y,this.rank.setText("#"+y),this.score.setText(""+v),n.life>0?(this.life.setText(""+~~n.life+"%"),this.life.style.fill=n.life<20?"#F00":n.life<50?"#F90":n.life<100?"#999":"#6C6"):this.life.setText("")}!n.dead&&n.life<=0&&(n.dead=1,r.playerDied(n),r.removeChild(n),this.emit("GameOver")),r.focusOn(n),a.micOn(n);var _=r.getWindow();this.footprints.children.forEach(function(e){e.watchWindow(_)}),u.watchWindow(_),r.update(e,t),a.update(e,t)},r.prototype.positionObfuscation=function(e){var t=this.player.width;return.9*i(40+t,t/2,s(this.player.position,e))},r.prototype.createDeadCarrot=function(e){if(e.opacity>0){var t=new d(e,!1,e.player===this.player.name);this.deadCarrots.addChild(t)}},r.prototype.setScores=function(e){e=[].concat(e),e.sort(function(e,t){return t.score-e.score}),this.map.setScores(e),e.forEach(this.createDeadCarrot,this),this.scores=e;var t=this.player.name,r=o.findIndex(e,function(e){return e.player===t}),n=e[r];n?(this.score.setText(""+n.score),this.rank.setText("#"+(r+1))):(this.score.setText("no score"),this.rank.setText("no rank"))},t.exports=r},{"./DeadCarrot":2,"./Map":10,"./Player":19,"./SpawnerCollection":23,"./World":25,"./audio":27,"./behavior/updateChildren":30,"./conf":32,"./font":33,"./utils/dist":42,lodash:217,"pixi.js":219,smoothstep:226}],7:[function(e,t){function r(e,t){if(n.DisplayObjectContainer.call(this),o[t]){var r=new n.Sprite(o[t]);r.position.set(0,0),this.addChild(r)}var s=new n.Text(e.player,{align:"center",font:"normal 10px "+i.name,fill:"#C40"});s.position.set(30,10),this.addChild(s);var a=new n.Text(e.score,{align:"center",font:"bold 12px "+i.name,fill:"#C40"});a.position.set(100,10),this.addChild(a)}var n=e("pixi.js"),i=e("./font"),o=[n.Texture.fromImage("./img/scoreIcon1.png"),n.Texture.fromImage("./img/scoreIcon2.png"),n.Texture.fromImage("./img/scoreIcon3.png")];r.prototype=Object.create(n.DisplayObjectContainer.prototype),r.prototype.constructor=r,t.exports=r},{"./font":33,"pixi.js":219}],8:[function(e,t){function r(){n.Sprite.call(this,o)}var n=e("pixi.js"),i=e("./HighScore"),o=n.Texture.fromImage("./img/homebg.png");r.prototype=Object.create(n.Sprite.prototype),r.prototype.constructor=r,r.prototype.setScores=function(e){for(var t=0;t<e.length&&5>t;++t){var r=e[t],n=new i(r,t);n.position.set(40,240+30*t),this.addChild(n)}},t.exports=r},{"./HighScore":7,"pixi.js":219}],9:[function(e,t){function r(){this._keys={},document.body.addEventListener("keydown",this._onDown.bind(this),!1),document.body.addEventListener("keyup",this._onUp.bind(this),!1),window.addEventListener("focus",this._onFocus.bind(this),!1),window.addEventListener("blur",this._onBlur.bind(this),!1)}r.prototype={_onFocus:function(){this._paused=0},_onBlur:function(){this._paused=1},_onDown:function(e){[37,38,39,40].indexOf(e.which)>=0&&e.preventDefault(),this._keys[e.which]=1},_onUp:function(e){this._keys[e.which]=0},paused:function(){return this._paused},x:function(){if(this._paused)return 0;var e=!!(this._keys[37]||this._keys[81]||this._keys[65]),t=!(!this._keys[39]&&!this._keys[68]);return-e+t},y:function(){if(this._paused)return 0;var e=!!(this._keys[38]||this._keys[90]||this._keys[87]),t=!(!this._keys[40]&&!this._keys[83]);return+e-t}},t.exports=r},{}],10:[function(e,t){function r(e,t,r,s,u){if(i.DisplayObjectContainer.call(this),this.random=n(e),this.cars=t,this.particles=r,this.spawners=s,this.generator=p[u],!this.generator)throw new Error("no such generator "+u);var f=480,d=this.homeTile=new h,l=new i.DisplayObjectContainer;this.addChild(l),this.generateMapTileWindow=new o(function(e){var t,r=-e*f;return t=0===e?d:new c(e),t.position.y=r,l.addChild(t),t},function(e,t){l.removeChild(t)},f,1,1,0),this.generateLevels=new o(a.profile("allocChunk",this.allocChunk.bind(this)),a.profile("freeChunk",this.freeChunk.bind(this)),this.generator.chunkSize,1,1,1),this.carsTexture=b(50,n("cars"+e))}var n=e("seedrandom"),i=e("pixi.js"),o=e("sliding-window"),s=e("./conf"),a=e("./utils/debug"),h=e("./HomeTile"),c=e("./MapTile"),u=e("./Spawner"),f=e("./Car"),d=e("./Fireball"),l=e("./Snowball"),p=e("./generators"),b=e("./generateCars"),g=i.Texture.fromImage("/img/road.png"),m=i.Texture.fromImage("/img/roadin.png"),v=i.Texture.fromImage("/img/roadout.png"),y=i.Texture.fromImage("/img/roadseparator.png"),w=i.Texture.fromImage("/img/firespawner.png"),_=i.Texture.fromImage("/img/snowspawner.png");r.prototype=Object.create(i.DisplayObjectContainer.prototype),r.prototype.constructor=r,r.prototype.setScores=function(e){this.homeTile.setScores(e)},r.prototype.watchWindow=function(e){this._win=e},r.prototype.update=function(e){var t=this._win;t&&(this.generateMapTileWindow.sync(t,e),this.generateLevels.sync(t,e))},r.prototype.freeChunk=function(e,t){t.destroy()},r.prototype.allocChunk=function(e,t){function r(e){return a.push(e),e}var n=this.carsTexture,o=this.generator.generate(e,t,this.random),a=[],h=-e*this.generator.chunkSize,c=r(new i.DisplayObjectContainer),p=r(new i.DisplayObjectContainer);if(this.addChild(c),this.addChild(p),(o.roads||[]).forEach(function(e){var o=[e.leftToRight?-100:s.WIDTH+100,h+e.y],a=e.leftToRight?0:Math.PI,d=function(e,t){return new f(t,n)},l=new u({seed:h+e.y,pos:o,spawn:d,ang:a,speed:e.speed,vel:e.vel,seq:e.seq,livingBound:{x:-100,y:h+e.y,height:100,width:s.WIDTH+200}});l.init(t),this.cars.addChild(r(l));var b=new i.Sprite(g);if(b.position.set(0,h+e.y),c.addChild(b),e.last&&(b=new i.Sprite(v),b.position.set(0,h+e.y-20),c.addChild(b)),e.first&&(b=new i.Sprite(m),b.position.set(0,h+e.y+10),c.addChild(b)),!e.last){var w=new i.Sprite(y);w.position.set(-~~(100*Math.random()),h+e.y-8),p.addChild(w)}},this),(o.snowballs||[]).forEach(function(e){var r=[e.pos[0],e.pos[1]+h],n=e.scale;e.seed=""+r,e.pos=r,e.spawn=function(e,t){return new l(n(e,t))},e.front=10,delete e.scale;var o=new u(e);o.init(t);var s=new i.Sprite(_);s.pivot.set(40,40),s.scale.set(.5,.5),s.position.set.apply(s.position,r),this.spawners.addChild(s),this.particles.addChild(o)},this),(o.fireballs||[]).forEach(function(e){var r=[e.pos[0],e.pos[1]+h],n=e.scale;e.seed=""+r,e.pos=r,e.spawn=function(e,t){return new d(n(e,t))},e.front=10,delete e.scale;var o=new u(e);o.init(t);var s=new i.Sprite(w);s.pivot.set(40,40),s.scale.set(.5,.5),s.position.set.apply(s.position,r),this.spawners.addChild(s),this.particles.addChild(o)},this),this.debug){var b=r(new i.DisplayObjectContainer),x=this.generator.chunkSize;b.position.set(0,h),this.debug.addChild(b);var S=new i.Graphics;S.beginFill(16711680),S.drawRect(0,x-2,s.WIDTH,2),S.endFill();var T=new i.Text("chunk "+e,{fill:"#F00",font:"bold 32px monospace"});T.scale.set(.5,.5),T.position.set(s.WIDTH-T.width-4,x-4-T.height);var A=x-4;(o.logs||[]).forEach(function(e){var t=new i.Text(e,{fill:"#F00",font:"normal 16px monospace"});t.scale.set(.5,.5),A-=t.height,t.position.set(4,A),t.alpha=.7,b.addChild(t)}),b.addChild(S),b.addChild(T)}return{destroy:function(){a.forEach(function(e){e.parent.removeChild(e)}),a=null}}},t.exports=r},{"./Car":1,"./Fireball":3,"./HomeTile":8,"./MapTile":11,"./Snowball":21,"./Spawner":22,"./conf":32,"./generateCars":35,"./generators":36,"./utils/debug":41,"pixi.js":219,seedrandom:224,"sliding-window":225}],11:[function(e,t){function r(e){n.Sprite.call(this,i[e%i.length])}var n=e("pixi.js"),i=[n.Texture.fromImage("./img/map1.png")];r.prototype=Object.create(n.Sprite.prototype),r.prototype.constructor=r,t.exports=r},{"pixi.js":219}],12:[function(e,t){function r(){this._x=0,this._y=0}r.prototype={setState:function(e){this._x=e.x,this._y=e.y},x:function(){return this._x},y:function(){return this._y}},t.exports=r},{}],13:[function(e,t){function r(e){this.socket=e,this.score=new s(e),this.playersByIds={},this.playersData={},this.players=new n.DisplayObjectContainer,this.names=new n.DisplayObjectContainer,this.players.update=i,e.on("playerevent",this.onPlayerEvent.bind(this)),e.on("playerenter",this.onPlayerEnter.bind(this)),e.on("playerleave",this.onPlayerLeave.bind(this)),e.on("players",this.onPlayers.bind(this))}var n=e("pixi.js"),i=e("./behavior/updateChildren"),o=e("./OtherPlayer"),s=e("./NetworkGameScore"),a=e("./NetworkPlayer"),h=e("./NetworkPlayerPlayback");r.prototype={setGame:function(e){this.score.setGame(e),this.game=e,e.players.addChild(this.players),e.names.addChild(this.names),this.player&&this.player.destroy(),this.player=new a(e.player,this.socket)},onPlayers:function(e){for(var t in e)this.onNewPlayerData(e[t],t);console.log("players =",e)},onPlayerEvent:function(e,t,r,n){if(r in this.playersData){var i=this.playersByIds[r];if(i&&"newgame"===e&&(i.destroy(),delete this.playersByIds[r],i=null),!i){var s=this,a=this.playersData[r],c=new o(a.name,this.names,.6,{computeAlpha:function(e){return 1-s.game.positionObfuscation(e)}});c.position.x=-1e3,i=new h(c),this.playersByIds[r]=i,this.players.addChild(c)}i.onMessage(e,t,n)}},onPlayerEnter:function(e,t){this.onNewPlayerData(e,t),console.log("new player =",e)},onPlayerLeave:function(e){var t=this.playersByIds[e];t&&t.destroy(),delete this.playersByIds[e],delete this.playersData[e]},onNewPlayerData:function(e,t){this.playersData[t]=e},update:function(e,t){if(this.game){this.player.update(e,t);for(var r in this.playersByIds)this.playersByIds[r].update(e,t)}}},t.exports=r},{"./NetworkGameScore":14,"./NetworkPlayer":15,"./NetworkPlayerPlayback":16,"./OtherPlayer":17,"./behavior/updateChildren":30,"pixi.js":219}],14:[function(e,t){function r(){return o("/scores").then(o.filterSuccess).then(o.toJSON)}function n(e){var t=e.getScore();return console.log("submitScore",t),o("/scores",{method:"PUT",data:t}).then(o.filterSuccess)}function i(e){this.socket=e}var o=e("qajax");i.prototype={setGame:function(e){r().then(e.setScores.bind(e)).done(),e.on("GameOver",function(){n(e.player).delay(6e3).done()})}},t.exports=i},{qajax:222}],15:[function(e,t){function r(e,t,r){this.player=e,this.socket=t,this.rate=r||n.networkSendRate,this._lastSubmit=0,this.socket.emit("ready",{name:e.name}),this.socket.emit("player","newgame")}var n=e("./conf");r.prototype={destroy:function(){this.player=null,this.socket=null},update:function(e){if(!(e-this._lastSubmit<this.rate)){this._lastSubmit=e;var t=this.player.getState();t.controls={x:this.player.controls.x(),y:this.player.controls.y()},this.socket.emit("player","move",t)}}},t.exports=r},{"./conf":32}],16:[function(e,t){function r(e,t){var r=new n;e.controls=r,this.player=e,this.controls=r,this.delay=t||i.networkPlaybackDelay,this.evts=[]}var n=e("./NetworkControls"),i=e("./conf");r.prototype={destroy:function(){this.player.destroy(),this.player=null,this.evts=null},handle_move:function(e,t){this.evts.push([t,e])},handle_ready:function(e){this.player.name=e},onMessage:function(e,t,r){var n=this["handle_"+e];n&&n.call(this,t,r)},update:function(e){for(var t=0;t<this.evts.length;++t){var r=this.evts[t];if(r[0]<e-this.delay){var n=r[1];this.player.life=n.life,this.player.position.set(n.pos.x,n.pos.y),this.controls.setState(n.controls),this.evts.splice(t--,1)}}}},t.exports=r},{"./NetworkControls":12,"./conf":32}],17:[function(e,t){function r(e,t,r,s){this.nameSprite=new n.Text("",{font:"normal 12px "+i.name,fill:"#C40"}),o.call(this,e),t.addChild(this.nameSprite),this.maxAlpha=r||1,this.nameSprite.alpha=this.alpha=this.maxAlpha,this.env=s||{}}var n=e("pixi.js"),i=e("./font"),o=e("./Player");r.prototype=Object.create(o.prototype),r.prototype.constructor=r,r.prototype.update=function(e,t){o.prototype.update.call(this,e,t),this.env.computeAlpha&&(this.nameSprite.alpha=this.alpha=this.maxAlpha*this.env.computeAlpha(this.position)),this.nameSprite.position.set(this.position.x-this.nameSprite.width/2,this.position.y+.4*this.height)},r.prototype.destroy=function(){this.nameSprite.parent.removeChild(this.nameSprite),this.parent.removeChild(this)},Object.defineProperty(r.prototype,"name",{set:function(e){this._name=e,this.nameSprite.setText(e?e:"")},get:function(){return this._name}}),t.exports=r},{"./Player":19,"./font":33,"pixi.js":219}],18:[function(e,t){function r(e,t,r){n.DisplayObjectContainer.call(this),this.position.x=e.position.x,this.position.y=e.position.y,this.speed=r||100,this.width=e.width,this.height=e.width,this.rotation=2*Math.random()*Math.PI,this.pivot.set(32,32),this.nb=t.length,this.sprites=t.map(function(e){return new n.Sprite(e)})}var n=e("pixi.js");r.prototype=Object.create(n.DisplayObjectContainer.prototype),r.prototype.constructor=r,r.prototype.update=function(e){this.current||(this.start=e);var t=~~((e-this.start)/this.speed);if(t<this.nb){var r=this.sprites[t];r!==this.current&&(this.current&&this.removeChild(this.current),this.addChild(r),this.current=r)}else this.parent.removeChild(this)},t.exports=r},{"pixi.js":219}],19:[function(e,t){function r(e,t){this.name=e,n.Sprite.call(this,f),this.life=100,this.maxLife=999,this.meltingSpeed=.0025,this.moveSpeed=.25,this.maxMoveBack=120,this.dead=!1,this.controls=null,this.vel=[0,0],this.position.x=c.WIDTH/2,this.position.y=c.HEIGHT-50,this.maxProgress=c.HEIGHT-this.maxMoveBack-25,this._m=0,this.pivot.set(80,80),t&&t.addChild(this.footprints=new u)}var n=e("pixi.js"),i=e("smoothstep"),o=e("./utils/mix"),s=e("./utils/spriteCollides"),a=e("./behavior/velUpdate"),h=e("./audio"),c=e("./conf"),u=e("./Footprints"),f=n.Texture.fromImage("./img/player.png"),d=[n.Texture.fromImage("./img/player1.png"),f,n.Texture.fromImage("./img/player2.png")];r.prototype=Object.create(n.Sprite.prototype),r.prototype.constructor=r,r.prototype.getState=function(){return{life:this.life,pos:this.position}},r.prototype.update=function(e,t){if(!this.dead){this.controls.update&&this.controls.update(e,t);var r=this.controls.x(),n=this.controls.y(),s=this.position.x,h=this.position.y,u=this._m;if(r||n){u||(this._m=u=e);var l=this.moveSpeed*o(.5,1,i(0,200,e-u));r&&n&&(l/=1.414),this.vel[0]=r*l,this.vel[1]=-n*l}else this._m=0,this.setTexture(f),this.vel[0]=0,this.vel[1]=0;a.call(this,e,t);var p=this.position.x,b=this.position.y;this.maxProgress=Math.min(this.maxProgress,b),this.maxProgress<0&&(this.life-=t*this.meltingSpeed),b=Math.min(b,this.maxProgress+this.maxMoveBack);var g=.6+this.life/150;this.width=40*g,this.height=40*g,0>n?this.rotation=Math.PI:n>0?this.rotation=0:r>0?this.rotation=Math.PI/2:0>r&&(this.rotation=-Math.PI/2);var m=this.width/2;p=Math.max(m,Math.min(p,c.WIDTH-m)),!r&&!n||p===s&&b===h||(this.setTexture(d[~~(e/150)%d.length]),this.footprints&&(!this._lastFoot||e-this._lastFoot>30)&&Math.random()<.7&&this.footprints.walk(this.position,this.width/2)),this.position.x=p,this.position.y=b}},r.prototype.hitBox=function(){return{x:this.x-this.pivot.x*this.scale.x+.25*this.width,y:this.y-this.pivot.y*this.scale.y+.2*this.height,width:.5*this.width,height:.6*this.height}},r.prototype.onProjectile=function(e){var t=100*e.width/this.width;this.position.x+=t*e.vel[0],this.position.y+=t*e.vel[1]},r.prototype.onSnowball=function(e){this.life=Math.min(this.life+e.playerLifeValue(),this.maxLife),this.onProjectile(e)},r.prototype.onFireball=function(e){this.life+=e.playerLifeValue(),this.onProjectile(e)},r.prototype.onCarHit=function(){this.life-=100,h.play("carHit",null,1)},r.prototype.collides=s,r.prototype.getScore=function(){return{player:this.name,x:~~this.position.x,score:r.getPlayerScore(this)}},r.getPlayerScore=function(e){return~~Math.max(0,-e.position.y)},r.scoreToY=function(e){return-e},t.exports=r},{"./Footprints":5,"./audio":27,"./behavior/velUpdate":31,"./conf":32,"./utils/mix":43,"./utils/spriteCollides":44,"pixi.js":219,smoothstep:226}],20:[function(e,t){var r=e("./KeyboardControls"),n=e("./TouchControls"),i=window.navigator.userAgent.match(/Android|webOS|iPhone|iPad|iPod|BlackBerry|Windows Phone/i);t.exports=i?n:r},{"./KeyboardControls":9,"./TouchControls":24}],21:[function(e,t){function r(e){n.Sprite.call(this,a),this.scale.set(e,e),this.pivot.set(16,16)}var n=e("pixi.js"),i=e("./utils/spriteCollides"),o=e("./behavior/destroyOutOfMap"),s=e("./behavior/velUpdate"),a=n.Texture.fromImage("./img/snowball.png");r.prototype=Object.create(n.Sprite.prototype),r.prototype.constructor=r,r.prototype.update=function(e,t){o.call(this,e,t),s.call(this,e,t)},r.prototype.hitBox=function(){return{x:this.x-this.pivot.x*this.scale.x,y:this.y-this.pivot.y*this.scale.y,width:this.width,height:this.height}},r.prototype.playerLifeValue=function(){return 10*this.scale.x},r.prototype.explodeInWorld=function(e){e.snowballExplode(this)},r.prototype.hitPlayer=function(e){e.onSnowball(this)},r.prototype.collides=i,t.exports=r},{"./behavior/destroyOutOfMap":28,"./behavior/velUpdate":31,"./utils/spriteCollides":44,"pixi.js":219}],22:[function(e,t){function r(e){if(n.DisplayObjectContainer.call(this),i.extend(this,e),this.maxCatchup=500,"function"!=typeof this.spawn)throw new Error("spawn function must be implemented and return a PIXI object.")}var n=e("pixi.js"),i=e("lodash"),o=e("seedrandom"),s=e("./behavior/updateChildren"),a=e("./behavior/findChildrenCollide"),h={initialTime:0,speed:1e3,rotate:0,pos:[0,0],ang:0,vel:.1,front:0,seq:null,spawn:null,life:1e4,livingBound:null,randLife:0,randPos:0,randAngle:0,randVel:0,seed:""};r.prototype=Object.create(n.DisplayObjectContainer.prototype),r.prototype.constructor=r,i.extend(r.prototype,h),Object.defineProperty(r.prototype,"seq",{set:function(e){if(this._seq=e,e){for(var t=e.reduce(function(e,t){return e+Math.abs(t)},0),r=new Uint8Array(t),n=0,i=0;i<e.length;++i)for(var o=e[i],s=Math.abs(o),a=0;s>a;++a)r[n++]=o>0?1:0;this.pattern=r}},get:function(){return this._seq}}),r.prototype.init=function(e){var t=e-this.initialTime,r=Math.floor(t/this.speed),n=t-r*this.speed;if(this.pattern){var i=r%this.pattern.length;this._ip=i}this.lastPop=t+n-this.speed,this.lastti=r},r.prototype.update=function(e){s.apply(this,arguments),this.children.forEach(function(t){(e>t._dieAfter||this.livingBound&&!t.collides(this.livingBound))&&(this.removeChild(t),t.destroy&&t.destroy())},this);var t=Math.floor((e-this.initialTime)/this.speed);for(t-this.lastti>this.maxCatchup&&(console.log(t-this.lastti+" particles to catchup. maximized to "+this.maxCatchup+" and lost some."),this.lastti=t-100);this.lastti<t;){var r=++this.lastti,n=r*this.speed,i=e-n;if(this.pattern){var a=0===this.pattern[this._ip];if(this._ip=this._ip>=this.pattern.length-1?0:this._ip+1,a)continue}var h=o(this.seed+""+r),c=this.spawn(r,h),u=this.ang+this.randAngle*(h()-.5)+this.rotate*r%(2*Math.PI),f=this.vel+this.randVel*(h()-.5),d=Math.cos(u),l=-Math.sin(u);c.vel=[f*d,f*l],c.position.x=this.pos[0]+this.randPos*(h()-.5)+c.vel[0]*i+this.front*d,c.position.y=this.pos[1]+this.randPos*(h()-.5)+c.vel[1]*i+this.front*l,c._dieAfter=n+this.life+this.randLife*(h()-.5),this.addChild(c)}},r.prototype.collides=a,t.exports=r},{"./behavior/findChildrenCollide":29,"./behavior/updateChildren":30,lodash:217,"pixi.js":219,seedrandom:224}],23:[function(e,t){function r(){n.DisplayObjectContainer.call(this)}var n=e("pixi.js"),i=e("./behavior/updateChildren"),o=e("./behavior/findChildrenCollide");r.prototype=Object.create(n.DisplayObjectContainer.prototype),r.prototype.constructor=r,r.prototype.update=i,r.prototype.collides=o,t.exports=r},{"./behavior/findChildrenCollide":29,"./behavior/updateChildren":30,"pixi.js":219}],24:[function(e,t){function r(){window.addEventListener("touchstart",this._onStart.bind(this),!1),window.addEventListener("touchend",this._onEnd.bind(this),!1),window.addEventListener("touchmove",this._onMove.bind(this),!1),window.addEventListener("touchcancel",this._onCancel.bind(this),!1),this._paused=!1,this.touchEventId=null}function n(e,t){if(null===t)return null;for(var r=e.length,n=0;r>n;++n)if(t===e[n].identifier)return e[n];return null}function i(e){return[e.screenX,e.screenY]}r.prototype={_onStart:function(e){if(e.preventDefault(),!this.startPos){var t=e.changedTouches[0];this.touchEventId=t.identifier,this.startPos=i(t),this.movePos=this.startPos}},_onMove:function(e){e.preventDefault();var t=n(e.changedTouches,this.touchEventId);t&&(this.movePos=i(t))},_onEnd:function(e){e.preventDefault();var t=n(e.changedTouches,this.touchEventId);t&&(this.startPos=null,this.movePos=null)},_onCancel:function(e){e.preventDefault(),this.startPos=null,this.movePos=null},update:function(e,t){if(this.startPos){var r=this.movePos[0]-this.startPos[0],n=this.movePos[1]-this.startPos[1];this.startPos[0]=this.startPos[0]+.001*r*t,this.startPos[1]=this.startPos[1]+.001*n*t}},paused:function(){return this._paused},x:function(){if(this._paused)return 0;if(!this.startPos||!this.movePos)return 0;var e=this.movePos[0]-this.startPos[0];return Math.abs(e)<50?0:0>e?-1:1},y:function(){if(this._paused)return 0;if(!this.startPos||!this.movePos)return 0;var e=this.movePos[1]-this.startPos[1]-20;return Math.abs(e)<10?0:0>e?1:-1}},t.exports=r},{}],25:[function(e,t){function r(e,t,r,n,i,s,a){return a||(a=0),console.log("ring",t),o.map(o.range(0,2*Math.PI,2*Math.PI/t),function(t){var o=new s(r),h=t+a;return o.position.set(e[0]+i*Math.cos(h),e[1]+i*Math.sin(h)),o.vel=[n*Math.cos(h),n*Math.sin(h)],o})}function n(e){i.DisplayObjectContainer.call(this),this._focusY=0,this.shaking=0,this.particles=e}var i=e("pixi.js"),o=e("lodash"),s=e("./audio"),a=e("./conf"),h=e("./vibrate"),c=e("./DeadCarrot"),u=e("./Snowball"),f=e("./ParticleExplosion"),d=e("./behavior/updateChildren"),l=e("./utils/spriteIntersect"),p=e("./utils/tilePIXI"),b=p.tile64,g=i.Texture.fromImage("./img/fireexplosion.png"),m=[b(g,0,0),b(g,1,0),b(g,2,0)],v=i.Texture.fromImage("./img/snowexplosion.png"),y=[b(v,0,0),b(v,1,0),b(v,2,0)],w=i.Texture.fromImage("./img/playerexplosion.png"),_=[b(w,0,0),b(w,1,0),b(w,2,0)];n.prototype=Object.create(i.DisplayObjectContainer.prototype),n.prototype.constructor=n,n.prototype.update=function(e,t){if(d.call(this,e,t),this.position.set(0,this._focusY),this.shaking){var r=this.shaking*(Math.random()-.5),n=this.shaking*(Math.random()-.5);this.position.x+=r,this.position.y+=n,this.shaking=Math.max(0,this.shaking+this.shakingVel*t)}},n.prototype.playerDied=function(e){var t=e.getScore();t.opacity=1;var r=this;setTimeout(function(){s.play("lose"),r.addChild(new c(t,!0,!0))},800),this.addChild(new f(e,_,250))},n.prototype.snowballExplode=function(e){s.play("snowballHit",e,.6),this.addChild(new f(e,y))},n.prototype.carHitPlayerExplode=function(e,t){var n=l(e,t),i=n.from.x+(n.to.x-n.from.x)/2,o=n.from.y+(n.to.y-n.from.y)/2;if(this.shaking+=10+(t.life<=0?10:0),this.shakingVel=-0.03,h(t.life<=0?400:200),this.particles){var s=.4+t.life/500,a=~~(10/s);r([i,o],a,s,.1,4+t.width/2,u,Math.random()).forEach(this.particles.addChild,this.particles)}},n.prototype.fireballExplode=function(e){s.play("burn",e,.3),this.addChild(new f(e,m))},n.prototype.getWindow=function(){return[this._focusY,this._focusY+a.HEIGHT]},n.prototype.focusOn=function(e){var t=a.HEIGHT-Math.max(e.y,e.maxProgress+e.maxMoveBack+e.height/2);t=Math.floor(Math.max(0,t)),this._focusY=this._focusY+.07*(t-this._focusY)},n.prototype.focusOnY=function(e){this._focusY=e},t.exports=n},{"./DeadCarrot":2,"./ParticleExplosion":18,"./Snowball":21,"./audio":27,"./behavior/updateChildren":30,"./conf":32,"./utils/spriteIntersect":45,"./utils/tilePIXI":48,"./vibrate":49,lodash:217,"pixi.js":219}],26:[function(e,t){function r(){var e=n.defer();return e.resolve(),e.promise}var n=e("q");t.exports=r},{q:220}],27:[function(e,t){function r(e){return h([3,,.2597,.3427,.3548,.04+.03*e,,.1573,,,,,,,,,.3027,-.0823,1,,,,,.5])}function n(e){var t=.1+.2*e,r=.08;return h([3,.4,1,,.81,t,,,,.04,.45,,,,,,.58,,r,,.05,.05,,.8])}function i(e){var t=new u({src:[e],volume:0,loop:!0,autoplay:!0});return{setVolume:function(e){t.volume(e)},stop:function(){t.stop()}}}function o(e,t,r){f.usingWebAudio&&(e.pos(r.x,r.y,0,t),r.vel&&e.velocity(r.vel[0],r.vel[1],0,t))}function s(e,t,r){if(!(e in l))throw new Error(e+" is unknown");if(f.usingWebAudio){r=r||1;var n=l[e],i=1===n.length?n[0]:n[~~(Math.random()*n.length)],s=i.play();if(i.volume(r,s),t){var a=[i,s,t];o.apply(null,a),w.push(a),i.once("end",function(){var e=w.indexOf(a);-1!==e&&w.splice(e,1)},s)}}}function a(){for(var e=0,t=w.length;t>e;++e)o.apply(null,w[e])}var h=e("jsfxr"),c=e("howler"),u=c.Howl,f=c.Howler,d={burn:[r(0),r(.2),r(.4),r(.6),r(.8),r(1)],snowballHit:[h([3,.03,.1,.14,.28,.92,,-.02,,,,.0155,.8768,,,,,,.35,,,,,.5])],carHit:[h([3,,.0661,,.36,.3901,,-.5478,,,,-.0799,.29,,,,,-.2199,.22,-.26,,,.02,.5])],car:[n(0),n(.5),n(1)],start:[h([2,.44,.24,,.55,.2,,.02,.02,.12,.34,,.43,.66,-.14,,-.54,.56,.17,,,.28,,.6])],lose:[h([2,.08,.63,.11,.84,.24,,,-.06,.23,.77,,.43,.66,-.14,,-.6,.56,.32,-.06,,,,.6])]},l={};for(var p in d){for(var b=[],g=d[p],m=g.length,v=0;m>v;++v){var y=new u({src:[g[v]],refDistance:10,rolloffFactor:1});b.push(y)}l[p]=b}var w=[];t.exports={micOn:function(e){f.pos(e.x,e.y,0),e.vel&&f.velocity(e.vel[0],e.vel[1],0)},play:s,loop:i,update:a}},{howler:215,jsfxr:216}],28:[function(e,t){var r=e("../conf");t.exports=function(){(this.position.y>0||this.position.x<-this.width||this.position.x>r.WIDTH+this.width)&&this.parent.removeChild(this)}},{"../conf":32}],29:[function(e,t){t.exports=function(e){for(var t=0;t<this.children.length;++t){var r=this.children[t].collides(e);if(r)return r}return null}},{}],30:[function(e,t){t.exports=function(e,t){this.children.forEach(function(r){r.update&&r.update(e,t)})}},{}],31:[function(e,t){t.exports=function(e,t){this.vel&&(this.position.x+=this.vel[0]*t,this.position.y+=this.vel[1]*t)}},{}],32:[function(e,t){t.exports={WIDTH:320,HEIGHT:480,networkPlaybackDelay:100,networkSendRate:50}},{}],33:[function(e,t){window.WebFontConfig={google:{families:["Monda:400,700:latin"]}},function(){var e=document.createElement("script");
e.src=("https:"===document.location.protocol?"https":"http")+"://ajax.googleapis.com/ajax/libs/webfont/1/webfont.js",e.type="text/javascript",e.async="true";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)}(),t.exports={name:"Monda"}},{}],34:[function(e,t){function r(e){var t=e(),r=e(),n=(3-2*t)*t*t,i=.8-.7*r*n,o=.9-.3*(e()+e());return e()<n&&e()<.5&&(o=e()<.5?o*e():Math.min(o+e(),1)),"hsl("+[~~(255*n),~~(100*i)+"%",~~(100*o)+"%"]+")"}function n(e){var t=r(e),n=e()<.3?i.shapes[~~(e()*i.shapes.length)]:null;return o(i(t,n))}var i=e("./svg/car"),o=e("./utils/svgTexture");t.exports=n},{"./svg/car":40,"./utils/svgTexture":47}],35:[function(e,t){function r(e,t){for(var r=[],i=0;e>i;++i)r.push(n(t));return r}var n=e("./generateCar");t.exports=r},{"./generateCar":34}],36:[function(e,t){t.exports={v1:e("./v1"),v2:e("./v2")}},{"./v1":37,"./v2":38}],37:[function(e,t){function r(e,t,r,n,i,o){for(var s=10,a=[],h=0;s>h;++h){var c=(h%2?-1:1)*~~(1+((h%2?i:n)-1)*Math.random());a.push(c)}return{y:e,leftToRight:t,vel:r,speed:80*(1+(o||0))/r,seq:a}}function n(e,t,r,n,i){return{scale:function(e,t){return.3+.3*t()+.3*t()*t()},pos:e,vel:r,rotate:t,speed:n,seq:i,life:6e3,angle:2*Math.random()*Math.PI}}function i(e,t,r,i){return n(e,r+2*Math.PI/t,.25,i/t)}function o(e,t,n){var o,h,u,d,l,p,b,g,m,v,y=0,w={roads:[],snowballs:[],fireballs:[]};if(e>0)for(h=~~Math.min(6,2*n()*n()+n()*(e/8)+1),d=0;h>d;++d){p=.05+.05*n()+.004*(e+10*n()+50*n()*n()),g=3+e/20*n()+6*n()*n(),m=8-5*a(s(0,20,e*n()),n(),.5)+n()/(e/5),v=.2+.3*n();var _=r(y-100-d*f,d%2===0,p,g,m,v);_.first=0===d,_.last=d===h-1,w.roads.push(_)}if(e>1&&n()<.9)for(h=3*n()*n()+2*n()*(10-e%10)/10+1,d=0;h>d;++d)o=[n()<.5?0:c,y-200*n()-280],u=1+~~(n()*(3*n()+e/8)),b=n()*(.3*n()+.1*(e%24)/24),l=1e3*(1-e%50/50)*(1-n()*n()),w.snowballs.push(i(o,u,b,l));if(e>4&&n()<.9)for(h=2*n()*n()+n()*(e/8)+e/30+.5,d=0;h>d;++d)o=[n()<.5?0:c,y-200*n()-280],u=1+~~(n()*(n()+e/10)),b=n()*(.3*n()+.1*((e+10)%24)/24),l=1e3*(1-e%50/50)*(1-n()*n()),w.fireballs.push(i(o,u,b,l));return w}var s=e("smoothstep"),a=e("../utils/mix"),h=e("../conf"),c=h.WIDTH,u=480,f=60;t.exports={chunkSize:u,generate:o}},{"../conf":32,"../utils/mix":43,smoothstep:226}],38:[function(e,t){function r(e){return function(t,r){return e.logs.push(t+": "+JSON.stringify(r)),r}}function n(e,t,r){var n,i=[];for(n=0;t>n;++n)i.push(1);var o=r-t;for(n=0;o>n;++n)i[~~(t*e())]++;return i}function i(e,t){for(var r=[],n=0,i=0,o=0;e>o;++o){var s=!v.contains(t,o);s&&i&&(r.push(i),i=0),!s&&n&&(r.push(n),n=0),s?n++:i--}return n&&r.push(n),i&&r.push(i),r}function o(e){return v.map(e,Math.floor.bind(Math))}function s(e,t){return v.map(e,function(e){return t*e})}function a(e,t){for(var r=[],n=0;n<t.length;++n){var i=t[n];if(0>i)r.push(i*e.length);else for(var o=0;i>o;++o)for(var s=0;s<e.length;++s)r.push(e[s])}return r}function h(e,t,r,n,i,o){return{scale:e,pos:t,vel:n,rotate:r,speed:i,seq:o,life:6e3,angle:0}}function c(e,t,r,n,i,o){return h(e,t,(n+2*Math.PI)/r,.25,i/r,o)}function u(e,t,r,n,i,o,s){for(var a=10,h=[],c=0;a>c;++c){var u=(c%2?-1:1)*~~(1+((c%2?o:i)-1)*e());h.push(u)}return{y:t,leftToRight:r,vel:n,speed:80*(1+(s||0))/n,seq:h}}function f(e,t){return v.map(v.range(0,e),function(r){var n=t(r*T,r);return n.first=r===e-1,n.last=0===r,n})}function d(e,t,r,n){var i=~~Math.min(.8+e()+5*r*e(),n);if(0>=i)return[];var o=1-1/i;return f(i,function(n,i){var s=.08+.5*w(e(),1-o,.8)*w(e(),r,.5),a=3+o*e()+6*e()*e(),h=8-5*w(y(0,20,r*o),e(),.5)+e(),c=.2+.2*e();return u(e,t+n,i%2===0,s,a,h,c)})}function l(e,t){function h(e,t){return.3+.8*t()}var u,f={roads:[],snowballs:[],fireballs:[],logs:[]},d=r(f),l=~~(1.8+4*t*e()),p=l*(1+2*e()*e()+4*t*e()),b=n(e,l,p);for(d("distribCols",b),u=0;l>u;++u){var g=b[u],m=[o([10+60*e(),-20*e()]),o(s([e(),-e(),e(),-e()],1+20*e())),[10,-2,10,-2,10,Math.floor(-40*(1-t))],[57,-78],s([10,-10],g)],y=[u%2?80:x-80,80+100*~~(u/2)],w=(e()<.5?1:-1)*(.01+.01*t)*e()*e(),_=60-40*e()-10*t,S=v.range(Math.min(g*(.2*(1-t)+.4*e()*e()),g-1)),T=m[~~(e()*m.length)];d("repeatPattern",T);var A=a(i(g,S),T),E=c(h,y,g,w,_,A);f.fireballs.push(E)}return f}function p(e,t){function o(e,t){return.4+.4*t()}var s,a={roads:[],snowballs:[],fireballs:[],logs:[]},h=r(a),u=w(t,e(),.5);h("more-cols",u);var f=~~(1.8+4*t*t*w(t,e(),.5)),d=20+40*u,l=n(e,f,d);for(s=0;f>s;++s){var p=[s%2?20:x-20,100+60*~~(s/2)],b=(e()<.5?1:-1)*(.1*e()+.3*e()*t),g=300-280*e()*t*u,m=l[s],y=v.range(Math.min(m*(.2*(1-t)+.4*e()*e()),m-1)),_=i(m,y);a.snowballs.push(c(o,p,m,b,g,_))}return a}function b(e,t){var r=e()<.5?[t/2,t]:[t,t/2],n=d(e,0,r[0],5),i=160-80*e()-60*t*e(),o=n.length*T,s=n.length*T+i,a=~~((S-s)/T),h=d(e,s,r[1],a),c=[];return e()>w(e(),t,.8)&&c.push({scale:function(){return.5},pos:[5,o+.5*i],vel:.1+.1*e(),angle:0,randAngle:.8*e(),speed:500+1e3*e(),life:6e3}),{roads:n.concat(h),snowballs:c,fireballs:[],logs:[]}}function g(e,t,n){function i(e,t){return.4+.4*t()}function o(e,t){return.5+.6*t()*t()}var s,a,h,u,f,l,p={roads:[],snowballs:[],fireballs:[],logs:[]},b=r(p),g=6;n>0&&(p.roads=d(e,0,t,g));var m=p.roads.length,y=T*m,_=v.max(v.pluck(p.roads,"vel")),A=m?Math.max(0,Math.min(Math.pow(m/g,2)+2*(_-.05),1)):0;b("road-difficulty",A);var E=6,C=5,k=y,R=S-y,M=v.range(1,E).map(function(e){return Math.floor(e*x/E)}),B=v.range(1,C).map(function(e){return Math.floor(k+e*R/C)}),I=[];if(M.forEach(function(e){B.forEach(function(t){I.push([e,t])})}),n>1&&e()<.9)for(a=2*e()*e(),f=0;a>f;++f)s=I.splice(~~(e()*I.length),1)[0],h=1+~~(e()*e()+5*e()*e()*e()),u=e()*(.3*e()+.1*(n%24)/24),l=(1.1-e()*e())*w(600,200,A),p.snowballs.push(c(o,s,h,u,l));if(n>4&&e()<.9)for(a=3*(1-A)*e()*e(),f=0;a>f;++f)s=I.splice(~~(e()*I.length),1)[0],h=1+~~(e()*e()+5*e()*e()*e()),u=e()*e()*.3,l=(1.1-e()*e())*w(100,600,A),p.fireballs.push(c(i,s,h,u,l));return p}function m(e,t,r){var n=.2*(e/16%1)+.5*(e/32%1)+.3*(e/64)+.8*r()*r()*r(),i="standard";e>12&&r()<.2&&(i="hell"),e>6&&r()<.1&&(i="blizzard"),e>4&&r()<.2&&(i="double");var o=A[i](r,n,e);return o.logs=["gen: "+i+", diff: "+n.toPrecision(3),""].concat(o.logs),o}var v=e("lodash"),y=e("smoothstep"),w=e("../utils/mix"),_=e("../conf"),x=_.WIDTH,S=500,T=60,A={hell:l,blizzard:p,standard:g,double:b};t.exports={chunkSize:S,generate:m}},{"../conf":32,"../utils/mix":43,lodash:217,smoothstep:226}],39:[function(e){function t(){function e(){var e=Math.max(0,~~((window.innerHeight-f.HEIGHT)/2));e!==r&&(r=e,_.view.style.marginTop=e+"px")}w=new o.Stage(0),_=o.autoDetectRenderer(f.WIDTH,f.HEIGHT,{resolution:window.devicePixelRatio}),_.view.style.width=f.WIDTH+"px",_.view.style.height=f.HEIGHT+"px",document.body.style.background="#000",document.body.style.padding="0",document.body.style.margin="0";var t=document.createElement("div");t.style.margin="0 auto",t.style.width=f.WIDTH+"px",document.body.appendChild(t),t.appendChild(_.view);var r;return window.addEventListener("resize",e,!1),e(),w}function r(){var e=c.offset();return isNaN(e)||(A=e),Date.now()-A}function n(e,t){var i="grewebisawesome"+~~(r()/864e5);console.log("seed = "+i);var o=new l(i,e,t);o.on("GameOver",function(){s.delay(6e3).fin(function(){w.removeChild(o),o.destroy(),n(e,t),o=null}).done()}),w.addChild(o),S.setGame(o),x=o}function i(e){function t(e){a(t);var n=Math.max(r(),s);s=n,o||(o=e);var i=Math.min(100,e-o);o=e,h(n,i),S.update(n,i),_.render(w)}var i=new b;n(i,e);var o,s=0,h=u.profile("game.update",function(e,t){x.update(e,t)},100);a(t)}var o=e("pixi.js"),s=e("q"),a=e("raf"),h=e("socket.io-client");e("socket-ntp/client/ntp");var c=window.ntp,u=e("./utils/debug"),f=e("./conf"),d=e("./atlas"),l=e("./Game"),p=e("./NetworkGame"),b=e("./ResponsiveControls"),g=h(),m=s.defer(),v=m.promise,y=s.delay(100).then(function e(){var t=window.localStorage.player||window.prompt("What's your name? (3 to 10 alphanum characters)");return t?/^[a-zA-Z0-9]{3,10}$/.exec(t)?window.localStorage.player=t:e():null});g.on("connect",m.resolve),c.init(g);var w,_,x,S,T=v.delay(1e3),A=0,E=d();S=new p(g),t(),s.all([y,E,T]).spread(i).done()},{"./Game":6,"./NetworkGame":13,"./ResponsiveControls":20,"./atlas":26,"./conf":32,"./utils/debug":41,"pixi.js":219,q:220,raf:223,"socket-ntp/client/ntp":227,"socket.io-client":228}],40:[function(e,t){function r(e,t){var r=o.cloneNode(!0),n=r.getElementById("chassis");if(n.style.fill=e,t){var i=r.getElementById(t);i&&(i.style.opacity=1)}return r}var n=e("lodash"),i=e("../utils/svg"),o=i('<?xml version="1.0" encoding="UTF-8" standalone="no"?>\n<!-- Created with Inkscape (http://www.inkscape.org/) -->\n\n<svg\n   xmlns:dc="http://purl.org/dc/elements/1.1/"\n   xmlns:cc="http://creativecommons.org/ns#"\n   xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"\n   xmlns:svg="http://www.w3.org/2000/svg"\n   xmlns="http://www.w3.org/2000/svg"\n   xmlns:xlink="http://www.w3.org/1999/xlink"\n   xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd"\n   xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape"\n   width="84"\n   height="48"\n   id="svg2991"\n   version="1.1"\n   inkscape:version="0.48.5 r10040"\n   sodipodi:docname="car.svg">\n  <defs\n     id="defs15" />\n  <sodipodi:namedview\n     id="base"\n     pagecolor="#ffffff"\n     bordercolor="#666666"\n     borderopacity="1.0"\n     inkscape:pageopacity="0.0"\n     inkscape:pageshadow="2"\n     inkscape:zoom="8.4761905"\n     inkscape:cx="41.930584"\n     inkscape:cy="9.1961376"\n     inkscape:document-units="px"\n     inkscape:current-layer="car"\n     showgrid="false"\n     inkscape:window-width="839"\n     inkscape:window-height="855"\n     inkscape:window-x="0"\n     inkscape:window-y="0"\n     inkscape:window-maximized="0"\n     showguides="true"\n     inkscape:guide-bbox="true" />\n  <metadata\n     id="metadata3898">\n    <rdf:RDF>\n      <cc:Work\n         rdf:about="">\n        <dc:format>image/svg+xml</dc:format>\n        <dc:type\n           rdf:resource="http://purl.org/dc/dcmitype/StillImage" />\n        <dc:title />\n      </cc:Work>\n    </rdf:RDF>\n  </metadata>\n  <g\n     inkscape:label="car"\n     inkscape:groupmode="layer"\n     id="car"\n     transform="translate(0,-1004.3622)"\n     style="display:inline">\n    <path\n       id="chassis"\n       style="fill:#ff2b00;fill-opacity:1;stroke:#2f2f2f;stroke-width:1;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-opacity:1;stroke-dasharray:none"\n       d="m 80.129217,1027.4431 c 0.103459,7.1615 -0.650157,18.4091 -10.354064,21.2507 -4.620338,0.9841 -11.477248,-0.076 -16.04209,-0.8072 -9.297525,-1.4888 -15.863072,-0.3101 -23.515641,-0.5884 -7.652569,-0.2781 -9.484407,1.3888 -16.510883,1.3558 -8.2686718,-0.2247 -9.6596475,-10.7018 -9.8438391,-21.0733 l 0,-0.2643 c 0.1841916,-9.4905 1.5751673,-19.0776 9.8438391,-19.2832 7.026476,-0.03 8.858314,1.4951 16.510883,1.2406 7.652569,-0.2546 14.218116,0.8239 23.515641,-0.5384 4.564842,-0.6687 11.421752,-1.6391 16.04209,-0.7386 9.703907,2.6002 10.457523,12.8924 10.354064,19.4455"\n       inkscape:connector-curvature="0"\n       sodipodi:nodetypes="cccccccccccc" />\n    <g\n       id="shapes">\n      <rect\n         ry="1.8005095"\n         y="1023.5969"\n         x="4.4600573"\n         height="9.5306273"\n         width="75.123825"\n         id="racingstripe1"\n         style="opacity:0;fill:#ffffff;fill-opacity:1;stroke:none" />\n      <g\n         transform="translate(-0.08016082,2.6179985)"\n         id="racingstripe2"\n         style="opacity:0">\n        <rect\n           ry="0"\n           y="1026.6307"\n           x="4.4600573"\n           height="3.462883"\n           width="75.123825"\n           id="racingstripe2_1"\n           style="fill:#ffffff;fill-opacity:1;stroke:none" />\n        <use\n           x="0"\n           y="0"\n           xlink:href="#racingstripe2_1"\n           id="use2999"\n           transform="translate(0,-5)"\n           width="84"\n           height="48" />\n      </g>\n      <g\n         style="opacity:0"\n         id="racingstripe3"\n         transform="translate(1.4311512,1.31495)">\n        <path\n           sodipodi:nodetypes="ccscc"\n           inkscape:connector-curvature="0"\n           id="rect3775"\n           d="m 4.5548654,1029.3327 66.4962976,-0.2844 c 0,0 -0.534443,2.6953 -2.085778,4.8849 -0.63678,0.8988 -64.1035842,0.4631 -64.1035842,0.4631 -0.2612936,-1.4197 -0.359405,-3.6617 -0.3069354,-5.0636 z"\n           style="fill:#ffffff;fill-opacity:1;stroke:none" />\n        <use\n           height="48"\n           width="84"\n           transform="matrix(1,0,0,-1,0,2054.0945)"\n           id="use3777"\n           xlink:href="#rect3775"\n           y="0"\n           x="0" />\n      </g>\n    </g>\n    <path\n       style="fill:#333333;fill-opacity:1;stroke:none"\n       d="m 47.846574,1015.8357 c 0,0 11.728123,-4.0902 13.608076,-4.0205 4.175205,0.1546 5.721578,32.9377 0.773187,33.0924 -3.738352,0.1163 -14.381263,-3.7114 -14.381263,-3.7114 z"\n       id="frontwindow"\n       inkscape:connector-curvature="0"\n       sodipodi:nodetypes="csscc" />\n    <path\n       sodipodi:nodetypes="csscc"\n       inkscape:connector-curvature="0"\n       id="backwindow"\n       d="m 18.892435,1016.7202 c 0,0 -3.754724,-2.5721 -5.388837,-2.5116 -3.6292168,0.1345 -4.9733721,28.6305 -0.672078,28.765 3.24949,0.1011 6.313453,-2.2644 6.313453,-2.2644 z"\n       style="fill:#333333;fill-opacity:1;stroke:none" />\n    <path\n       style="fill:#333333;fill-opacity:1;stroke:none"\n       d="m 46.278671,1011.4644 c 0,0 -18.392858,-0.5358 -20.178572,-0.1786 -1.785714,0.3571 -2.321428,1.6071 -2.321428,1.6071 0,0 18.928571,0 22.5,-1.4285 z"\n       id="leftwindow"\n       inkscape:connector-curvature="0" />\n    <use\n       x="0"\n       y="0"\n       xlink:href="#leftwindow"\n       id="rightwindow"\n       transform="matrix(1,0,0,-1,0,2056.3773)"\n       width="84"\n       height="48" />\n    <path\n       style="fill:#333333;fill-opacity:1;stroke:none"\n       d="m 76.001562,1012.792 c -2.064945,0.263 -1.59154,3.758 -0.612242,5.7935 0.979283,2.0353 3.615106,2.9401 3.921281,2.7072 0.508852,-0.387 -1.995468,-8.668 -3.309039,-8.5007 z"\n       id="leftlight"\n       inkscape:connector-curvature="0"\n       sodipodi:nodetypes="ssss" />\n    <path\n       sodipodi:nodetypes="ssss"\n       inkscape:connector-curvature="0"\n       id="rightlight"\n       d="m 76.080424,1043.2415 c -2.069433,-0.225 -1.660391,-3.7281 -0.718698,-5.7813 0.941682,-2.053 3.560418,-3.0061 3.870824,-2.7789 0.515884,0.3776 -1.8357,8.7033 -3.152126,8.5602 z"\n       style="fill:#333333;fill-opacity:1;stroke:none" />\n    <rect\n       style="opacity:0.2;fill:#ffffff;fill-opacity:1;stroke:none"\n       id="roof"\n       width="26.250002"\n       height="25.089283"\n       x="20.475101"\n       y="1016.0179"\n       ry="2.0099225"\n       rx="2.0099225" />\n  </g>\n</svg>\n');r.shapes=n.pluck(o.getElementById("shapes").children,"id"),t.exports=r},{"../utils/svg":46,lodash:217}],41:[function(e,t){var r=e("performance-now");t.exports={profile:function(e,t,n){n=n||1;var i=0,o=0;return function(){var s=r(),a=t.apply(this,arguments),h=r();return i+=h-s,o++,o>n&&(console.log((i/o).toPrecision(2)+"ms",e),i=0,o=0),a}}}},{"performance-now":218}],42:[function(e,t){t.exports=function(e,t){var r=e.x-t.x,n=e.y-t.y;return Math.sqrt(r*r+n*n)}},{}],43:[function(e,t){t.exports=function(e,t,r){return r*t+(1-r)*e}},{}],44:[function(e,t){function r(e,t){return!(t.x>e.x+e.width||t.x+t.width<e.x||t.y>e.y+e.height||t.y+t.height<e.y)}t.exports=function(e){return r(this.hitBox(),e.hitBox?e.hitBox():e)?this:null}},{}],45:[function(e,t){function r(e,t){var r=e.x,i=e.x+e.width,o=e.y,s=e.y+e.height,a=t.x,h=t.x+t.width,c=t.y,u=t.y+t.height,f=Math.max(r,a),d=Math.max(o,c),l=Math.min(i,h),p=Math.min(s,u);return{from:new n.Point(f,d),to:new n.Point(l,p),width:l-f,height:p-d}}var n=e("pixi.js");t.exports=function(e,t){return r(e.hitBox(),t.hitBox())}},{"pixi.js":219}],46:[function(e,t){t.exports=function(e){var t=new window.DOMParser,r=t.parseFromString(e,"text/xml").documentElement,n=r;return document.importNode(n,!0),n}},{}],47:[function(e,t){var r=e("pixi.js"),n=window.URL||window.webkitURL||window;t.exports=function(e){var t=(new window.XMLSerializer).serializeToString(e),i=new window.Blob([t],{type:"image/svg+xml;charset=utf-8"}),o=n.createObjectURL(i);return r.Texture.fromImage(o)}},{"pixi.js":219}],48:[function(e,t){function r(e){return function(t,r,i){return new n.Texture(t,{x:r*e,y:i*e,width:e,height:e})}}var n=e("pixi.js"),i=r(64),o=r(24);r.tile64=i,r.tile24=o,t.exports=r},{"pixi.js":219}],49:[function(e,t){t.exports="vibrate"in window.navigator?function(e){return window.navigator.vibrate(e)}:function(){return!1}},{}],50:[function(e,t){function r(e,t){return d.isUndefined(t)?""+t:!d.isNumber(t)||!isNaN(t)&&isFinite(t)?d.isFunction(t)||d.isRegExp(t)?t.toString():t:t.toString()}function n(e,t){return d.isString(e)?e.length<t?e:e.slice(0,t):e}function i(e){return n(JSON.stringify(e.actual,r),128)+" "+e.operator+" "+n(JSON.stringify(e.expected,r),128)}function o(e,t,r,n,i){throw new b.AssertionError({message:r,actual:e,expected:t,operator:n,stackStartFunction:i})}function s(e,t){e||o(e,!0,t,"==",b.ok)}function a(e,t){if(e===t)return!0;if(d.isBuffer(e)&&d.isBuffer(t)){if(e.length!=t.length)return!1;for(var r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}return d.isDate(e)&&d.isDate(t)?e.getTime()===t.getTime():d.isRegExp(e)&&d.isRegExp(t)?e.source===t.source&&e.global===t.global&&e.multiline===t.multiline&&e.lastIndex===t.lastIndex&&e.ignoreCase===t.ignoreCase:d.isObject(e)||d.isObject(t)?c(e,t):e==t}function h(e){return"[object Arguments]"==Object.prototype.toString.call(e)}function c(e,t){if(d.isNullOrUndefined(e)||d.isNullOrUndefined(t))return!1;if(e.prototype!==t.prototype)return!1;if(h(e))return h(t)?(e=l.call(e),t=l.call(t),a(e,t)):!1;try{var r,n,i=g(e),o=g(t)}catch(e){return!1}if(i.length!=o.length)return!1;for(i.sort(),o.sort(),n=i.length-1;n>=0;n--)if(i[n]!=o[n])return!1;for(n=i.length-1;n>=0;n--)if(r=i[n],!a(e[r],t[r]))return!1;return!0}function u(e,t){return e&&t?"[object RegExp]"==Object.prototype.toString.call(t)?t.test(e):e instanceof t?!0:t.call({},e)===!0?!0:!1:!1}function f(e,t,r,n){var i;d.isString(r)&&(n=r,r=null);try{t()}catch(e){i=e}if(n=(r&&r.name?" ("+r.name+").":".")+(n?" "+n:"."),e&&!i&&o(i,r,"Missing expected exception"+n),!e&&u(i,r)&&o(i,r,"Got unwanted exception"+n),e&&i&&r&&!u(i,r)||!e&&i)throw i}var d=e("util/"),l=Array.prototype.slice,p=Object.prototype.hasOwnProperty,b=t.exports=s;b.AssertionError=function(e){this.name="AssertionError",this.actual=e.actual,this.expected=e.expected,this.operator=e.operator,e.message?(this.message=e.message,this.generatedMessage=!1):(this.message=i(this),this.generatedMessage=!0);var t=e.stackStartFunction||o;if(Error.captureStackTrace)Error.captureStackTrace(this,t);else{var r=new Error;if(r.stack){var n=r.stack,s=t.name,a=n.indexOf("\n"+s);if(a>=0){var h=n.indexOf("\n",a+1);n=n.substring(h+1)}this.stack=n}}},d.inherits(b.AssertionError,Error),b.fail=o,b.ok=s,b.equal=function(e,t,r){e!=t&&o(e,t,r,"==",b.equal)},b.notEqual=function(e,t,r){e==t&&o(e,t,r,"!=",b.notEqual)},b.deepEqual=function(e,t,r){a(e,t)||o(e,t,r,"deepEqual",b.deepEqual)},b.notDeepEqual=function(e,t,r){a(e,t)&&o(e,t,r,"notDeepEqual",b.notDeepEqual)},b.strictEqual=function(e,t,r){e!==t&&o(e,t,r,"===",b.strictEqual)},b.notStrictEqual=function(e,t,r){e===t&&o(e,t,r,"!==",b.notStrictEqual)},b.throws=function(){f.apply(this,[!0].concat(l.call(arguments)))},b.doesNotThrow=function(){f.apply(this,[!1].concat(l.call(arguments)))},b.ifError=function(e){if(e)throw e};var g=Object.keys||function(e){var t=[];for(var r in e)p.call(e,r)&&t.push(r);return t}},{"util/":212}],51:[function(){},{}],52:[function(e,t,r){function n(e,t,r){if(!(this instanceof n))return new n(e,t,r);var i,o=typeof e;if("number"===o)i=e>0?e>>>0:0;else if("string"===o)i=n.byteLength(e,t);else{if("object"!==o||null===e)throw new TypeError("must start with number, buffer, array or string");"Buffer"===e.type&&O(e.data)&&(e=e.data),i=+e.length>0?Math.floor(+e.length):0}if(i>D)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+D.toString(16)+" bytes");var s;n.TYPED_ARRAY_SUPPORT?s=n._augment(new Uint8Array(i)):(s=this,s.length=i,s._isBuffer=!0);var a;if(n.TYPED_ARRAY_SUPPORT&&"number"==typeof e.byteLength)s._set(e);else if(E(e))if(n.isBuffer(e))for(a=0;i>a;a++)s[a]=e.readUInt8(a);else for(a=0;i>a;a++)s[a]=(e[a]%256+256)%256;else if("string"===o)s.write(e,0,t);else if("number"===o&&!n.TYPED_ARRAY_SUPPORT&&!r)for(a=0;i>a;a++)s[a]=0;return i>0&&i<=n.poolSize&&(s.parent=F),s}function i(e,t,r){if(!(this instanceof i))return new i(e,t,r);var o=new n(e,t,r);return delete o.parent,o}function o(e,t,r,n){r=Number(r)||0;var i=e.length-r;n?(n=Number(n),n>i&&(n=i)):n=i;var o=t.length;if(o%2!==0)throw new Error("Invalid hex string");n>o/2&&(n=o/2);for(var s=0;n>s;s++){var a=parseInt(t.substr(2*s,2),16);if(isNaN(a))throw new Error("Invalid hex string");e[r+s]=a}return s}function s(e,t,r,n){var i=I(k(t,e.length-r),e,r,n);return i}function a(e,t,r,n){var i=I(R(t),e,r,n);return i}function h(e,t,r,n){return a(e,t,r,n)}function c(e,t,r,n){var i=I(B(t),e,r,n);return i}function u(e,t,r,n){var i=I(M(t,e.length-r),e,r,n,2);return i}function f(e,t,r){return P.fromByteArray(0===t&&r===e.length?e:e.slice(t,r))}function d(e,t,r){var n="",i="";r=Math.min(e.length,r);for(var o=t;r>o;o++)e[o]<=127?(n+=j(i)+String.fromCharCode(e[o]),i=""):i+="%"+e[o].toString(16);return n+j(i)}function l(e,t,r){var n="";r=Math.min(e.length,r);for(var i=t;r>i;i++)n+=String.fromCharCode(127&e[i]);return n}function p(e,t,r){var n="";r=Math.min(e.length,r);for(var i=t;r>i;i++)n+=String.fromCharCode(e[i]);return n}function b(e,t,r){var n=e.length;(!t||0>t)&&(t=0),(!r||0>r||r>n)&&(r=n);for(var i="",o=t;r>o;o++)i+=C(e[o]);return i}function g(e,t,r){for(var n=e.slice(t,r),i="",o=0;o<n.length;o+=2)i+=String.fromCharCode(n[o]+256*n[o+1]);return i}function m(e,t,r){if(e%1!==0||0>e)throw new RangeError("offset is not uint");if(e+t>r)throw new RangeError("Trying to access beyond buffer length")}function v(e,t,r,i,o,s){if(!n.isBuffer(e))throw new TypeError("buffer must be a Buffer instance");if(t>o||s>t)throw new RangeError("value is out of bounds");if(r+i>e.length)throw new RangeError("index out of range")}function y(e,t,r,n){0>t&&(t=65535+t+1);for(var i=0,o=Math.min(e.length-r,2);o>i;i++)e[r+i]=(t&255<<8*(n?i:1-i))>>>8*(n?i:1-i)}function w(e,t,r,n){0>t&&(t=4294967295+t+1);for(var i=0,o=Math.min(e.length-r,4);o>i;i++)e[r+i]=t>>>8*(n?i:3-i)&255}function _(e,t,r,n,i,o){if(t>i||o>t)throw new RangeError("value is out of bounds");if(r+n>e.length)throw new RangeError("index out of range");if(0>r)throw new RangeError("index out of range")}function x(e,t,r,n,i){return i||_(e,t,r,4,3.4028234663852886e38,-3.4028234663852886e38),L.write(e,t,r,n,23,4),r+4}function S(e,t,r,n,i){return i||_(e,t,r,8,1.7976931348623157e308,-1.7976931348623157e308),L.write(e,t,r,n,52,8),r+8}function T(e){if(e=A(e).replace(N,""),e=e.replace(/-/g,"+").replace(/_/g,"/"),e.length<2)return"";for(;e.length%4!==0;)e+="=";return e}function A(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}function E(e){return O(e)||n.isBuffer(e)||e&&"object"==typeof e&&"number"==typeof e.length}function C(e){return 16>e?"0"+e.toString(16):e.toString(16)}function k(e,t){var r,n=e.length,i=null;t=t||1/0;for(var o=[],s=0;n>s;s++){if(r=e.charCodeAt(s),r>55295&&57344>r){if(!i){if(r>56319){(t-=3)>-1&&o.push(239,191,189);continue}if(s+1===n){(t-=3)>-1&&o.push(239,191,189);continue}i=r;continue}if(56320>r){(t-=3)>-1&&o.push(239,191,189),i=r;continue}r=i-55296<<10|r-56320|65536,i=null}else i&&((t-=3)>-1&&o.push(239,191,189),i=null);if(128>r){if((t-=1)<0)break;o.push(r)}else if(2048>r){if((t-=2)<0)break;o.push(r>>6|192,63&r|128)}else if(65536>r){if((t-=3)<0)break;o.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(2097152>r))throw new Error("Invalid code point");if((t-=4)<0)break;o.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return o}function R(e){for(var t=[],r=0;r<e.length;r++)t.push(255&e.charCodeAt(r));return t}function M(e,t){for(var r,n,i,o=[],s=0;s<e.length&&!((t-=2)<0);s++)r=e.charCodeAt(s),n=r>>8,i=r%256,o.push(i),o.push(n);return o}function B(e){return P.toByteArray(T(e))}function I(e,t,r,n,i){i&&(n-=n%i);for(var o=0;n>o&&!(o+r>=t.length||o>=e.length);o++)t[o+r]=e[o];return o}function j(e){try{return decodeURIComponent(e)}catch(e){return String.fromCharCode(65533)}}var P=e("base64-js"),L=e("ieee754"),O=e("is-array");r.Buffer=n,r.SlowBuffer=i,r.INSPECT_MAX_BYTES=50,n.poolSize=8192;var D=1073741823,F={};n.TYPED_ARRAY_SUPPORT=function(){try{var e=new ArrayBuffer(0),t=new Uint8Array(e);return t.foo=function(){return 42},42===t.foo()&&"function"==typeof t.subarray&&0===new Uint8Array(1).subarray(1,1).byteLength}catch(e){return!1}}(),n.isBuffer=function(e){return!(null==e||!e._isBuffer)},n.compare=function(e,t){if(!n.isBuffer(e)||!n.isBuffer(t))throw new TypeError("Arguments must be Buffers");for(var r=e.length,i=t.length,o=0,s=Math.min(r,i);s>o&&e[o]===t[o];o++);return o!==s&&(r=e[o],i=t[o]),i>r?-1:r>i?1:0},n.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"raw":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},n.concat=function(e,t){if(!O(e))throw new TypeError("Usage: Buffer.concat(list[, length])");if(0===e.length)return new n(0);if(1===e.length)return e[0];var r;if(void 0===t)for(t=0,r=0;r<e.length;r++)t+=e[r].length;var i=new n(t),o=0;for(r=0;r<e.length;r++){var s=e[r];s.copy(i,o),o+=s.length}return i},n.byteLength=function(e,t){var r;switch(e+="",t||"utf8"){case"ascii":case"binary":case"raw":r=e.length;break;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":r=2*e.length;break;case"hex":r=e.length>>>1;break;case"utf8":case"utf-8":r=k(e).length;break;case"base64":r=B(e).length;break;default:r=e.length}return r},n.prototype.length=void 0,n.prototype.parent=void 0,n.prototype.toString=function(e,t,r){var n=!1;if(t>>>=0,r=void 0===r||1/0===r?this.length:r>>>0,e||(e="utf8"),0>t&&(t=0),r>this.length&&(r=this.length),t>=r)return"";for(;;)switch(e){case"hex":return b(this,t,r);case"utf8":case"utf-8":return d(this,t,r);case"ascii":return l(this,t,r);case"binary":return p(this,t,r);case"base64":return f(this,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return g(this,t,r);default:if(n)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),n=!0}},n.prototype.equals=function(e){if(!n.isBuffer(e))throw new TypeError("Argument must be a Buffer");return 0===n.compare(this,e)},n.prototype.inspect=function(){var e="",t=r.INSPECT_MAX_BYTES;return this.length>0&&(e=this.toString("hex",0,t).match(/.{2}/g).join(" "),this.length>t&&(e+=" ... ")),"<Buffer "+e+">"},n.prototype.compare=function(e){if(!n.isBuffer(e))throw new TypeError("Argument must be a Buffer");return n.compare(this,e)},n.prototype.get=function(e){return console.log(".get() is deprecated. Access using array indexes instead."),this.readUInt8(e)},n.prototype.set=function(e,t){return console.log(".set() is deprecated. Access using array indexes instead."),this.writeUInt8(e,t)},n.prototype.write=function(e,t,r,n){if(isFinite(t))isFinite(r)||(n=r,r=void 0);else{var i=n;n=t,t=r,r=i}if(t=Number(t)||0,0>r||0>t||t>this.length)throw new RangeError("attempt to write outside buffer bounds");var f=this.length-t;r?(r=Number(r),r>f&&(r=f)):r=f,n=String(n||"utf8").toLowerCase();var d;switch(n){case"hex":d=o(this,e,t,r);break;case"utf8":case"utf-8":d=s(this,e,t,r);break;case"ascii":d=a(this,e,t,r);break;case"binary":d=h(this,e,t,r);break;case"base64":d=c(this,e,t,r);break;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":d=u(this,e,t,r);break;default:throw new TypeError("Unknown encoding: "+n)}return d},n.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},n.prototype.slice=function(e,t){var r=this.length;e=~~e,t=void 0===t?r:~~t,0>e?(e+=r,0>e&&(e=0)):e>r&&(e=r),0>t?(t+=r,0>t&&(t=0)):t>r&&(t=r),e>t&&(t=e);var i;if(n.TYPED_ARRAY_SUPPORT)i=n._augment(this.subarray(e,t));else{var o=t-e;i=new n(o,void 0,!0);for(var s=0;o>s;s++)i[s]=this[s+e]}return i.length&&(i.parent=this.parent||this),i},n.prototype.readUIntLE=function(e,t,r){e>>>=0,t>>>=0,r||m(e,t,this.length);for(var n=this[e],i=1,o=0;++o<t&&(i*=256);)n+=this[e+o]*i;return n},n.prototype.readUIntBE=function(e,t,r){e>>>=0,t>>>=0,r||m(e,t,this.length);for(var n=this[e+--t],i=1;t>0&&(i*=256);)n+=this[e+--t]*i;return n},n.prototype.readUInt8=function(e,t){return t||m(e,1,this.length),this[e]},n.prototype.readUInt16LE=function(e,t){return t||m(e,2,this.length),this[e]|this[e+1]<<8},n.prototype.readUInt16BE=function(e,t){return t||m(e,2,this.length),this[e]<<8|this[e+1]},n.prototype.readUInt32LE=function(e,t){return t||m(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},n.prototype.readUInt32BE=function(e,t){return t||m(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},n.prototype.readIntLE=function(e,t,r){e>>>=0,t>>>=0,r||m(e,t,this.length);for(var n=this[e],i=1,o=0;++o<t&&(i*=256);)n+=this[e+o]*i;return i*=128,n>=i&&(n-=Math.pow(2,8*t)),n},n.prototype.readIntBE=function(e,t,r){e>>>=0,t>>>=0,r||m(e,t,this.length);for(var n=t,i=1,o=this[e+--n];n>0&&(i*=256);)o+=this[e+--n]*i;return i*=128,o>=i&&(o-=Math.pow(2,8*t)),o},n.prototype.readInt8=function(e,t){return t||m(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},n.prototype.readInt16LE=function(e,t){t||m(e,2,this.length);var r=this[e]|this[e+1]<<8;return 32768&r?4294901760|r:r},n.prototype.readInt16BE=function(e,t){t||m(e,2,this.length);var r=this[e+1]|this[e]<<8;return 32768&r?4294901760|r:r},n.prototype.readInt32LE=function(e,t){return t||m(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},n.prototype.readInt32BE=function(e,t){return t||m(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},n.prototype.readFloatLE=function(e,t){return t||m(e,4,this.length),L.read(this,e,!0,23,4)},n.prototype.readFloatBE=function(e,t){return t||m(e,4,this.length),L.read(this,e,!1,23,4)},n.prototype.readDoubleLE=function(e,t){return t||m(e,8,this.length),L.read(this,e,!0,52,8)},n.prototype.readDoubleBE=function(e,t){return t||m(e,8,this.length),L.read(this,e,!1,52,8)},n.prototype.writeUIntLE=function(e,t,r,n){e=+e,t>>>=0,r>>>=0,n||v(this,e,t,r,Math.pow(2,8*r),0);var i=1,o=0;for(this[t]=255&e;++o<r&&(i*=256);)this[t+o]=e/i>>>0&255;return t+r},n.prototype.writeUIntBE=function(e,t,r,n){e=+e,t>>>=0,r>>>=0,n||v(this,e,t,r,Math.pow(2,8*r),0);var i=r-1,o=1;for(this[t+i]=255&e;--i>=0&&(o*=256);)this[t+i]=e/o>>>0&255;return t+r},n.prototype.writeUInt8=function(e,t,r){return e=+e,t>>>=0,r||v(this,e,t,1,255,0),n.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=e,t+1},n.prototype.writeUInt16LE=function(e,t,r){return e=+e,t>>>=0,r||v(this,e,t,2,65535,0),n.TYPED_ARRAY_SUPPORT?(this[t]=e,this[t+1]=e>>>8):y(this,e,t,!0),t+2},n.prototype.writeUInt16BE=function(e,t,r){return e=+e,t>>>=0,r||v(this,e,t,2,65535,0),n.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=e):y(this,e,t,!1),t+2},n.prototype.writeUInt32LE=function(e,t,r){return e=+e,t>>>=0,r||v(this,e,t,4,4294967295,0),n.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=e):w(this,e,t,!0),t+4},n.prototype.writeUInt32BE=function(e,t,r){return e=+e,t>>>=0,r||v(this,e,t,4,4294967295,0),n.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=e):w(this,e,t,!1),t+4},n.prototype.writeIntLE=function(e,t,r,n){e=+e,t>>>=0,n||v(this,e,t,r,Math.pow(2,8*r-1)-1,-Math.pow(2,8*r-1));var i=0,o=1,s=0>e?1:0;for(this[t]=255&e;++i<r&&(o*=256);)this[t+i]=(e/o>>0)-s&255;return t+r},n.prototype.writeIntBE=function(e,t,r,n){e=+e,t>>>=0,n||v(this,e,t,r,Math.pow(2,8*r-1)-1,-Math.pow(2,8*r-1));var i=r-1,o=1,s=0>e?1:0;for(this[t+i]=255&e;--i>=0&&(o*=256);)this[t+i]=(e/o>>0)-s&255;return t+r},n.prototype.writeInt8=function(e,t,r){return e=+e,t>>>=0,r||v(this,e,t,1,127,-128),n.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),0>e&&(e=255+e+1),this[t]=e,t+1
},n.prototype.writeInt16LE=function(e,t,r){return e=+e,t>>>=0,r||v(this,e,t,2,32767,-32768),n.TYPED_ARRAY_SUPPORT?(this[t]=e,this[t+1]=e>>>8):y(this,e,t,!0),t+2},n.prototype.writeInt16BE=function(e,t,r){return e=+e,t>>>=0,r||v(this,e,t,2,32767,-32768),n.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=e):y(this,e,t,!1),t+2},n.prototype.writeInt32LE=function(e,t,r){return e=+e,t>>>=0,r||v(this,e,t,4,2147483647,-2147483648),n.TYPED_ARRAY_SUPPORT?(this[t]=e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):w(this,e,t,!0),t+4},n.prototype.writeInt32BE=function(e,t,r){return e=+e,t>>>=0,r||v(this,e,t,4,2147483647,-2147483648),0>e&&(e=4294967295+e+1),n.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=e):w(this,e,t,!1),t+4},n.prototype.writeFloatLE=function(e,t,r){return x(this,e,t,!0,r)},n.prototype.writeFloatBE=function(e,t,r){return x(this,e,t,!1,r)},n.prototype.writeDoubleLE=function(e,t,r){return S(this,e,t,!0,r)},n.prototype.writeDoubleBE=function(e,t,r){return S(this,e,t,!1,r)},n.prototype.copy=function(e,t,r,i){var o=this;if(r||(r=0),i||0===i||(i=this.length),t>=e.length&&(t=e.length),t||(t=0),i>0&&r>i&&(i=r),i===r)return 0;if(0===e.length||0===o.length)return 0;if(0>t)throw new RangeError("targetStart out of bounds");if(0>r||r>=o.length)throw new RangeError("sourceStart out of bounds");if(0>i)throw new RangeError("sourceEnd out of bounds");i>this.length&&(i=this.length),e.length-t<i-r&&(i=e.length-t+r);var s=i-r;if(1e3>s||!n.TYPED_ARRAY_SUPPORT)for(var a=0;s>a;a++)e[a+t]=this[a+r];else e._set(this.subarray(r,r+s),t);return s},n.prototype.fill=function(e,t,r){if(e||(e=0),t||(t=0),r||(r=this.length),t>r)throw new RangeError("end < start");if(r!==t&&0!==this.length){if(0>t||t>=this.length)throw new RangeError("start out of bounds");if(0>r||r>this.length)throw new RangeError("end out of bounds");var n;if("number"==typeof e)for(n=t;r>n;n++)this[n]=e;else{var i=k(e.toString()),o=i.length;for(n=t;r>n;n++)this[n]=i[n%o]}return this}},n.prototype.toArrayBuffer=function(){if("undefined"!=typeof Uint8Array){if(n.TYPED_ARRAY_SUPPORT)return new n(this).buffer;for(var e=new Uint8Array(this.length),t=0,r=e.length;r>t;t+=1)e[t]=this[t];return e.buffer}throw new TypeError("Buffer.toArrayBuffer not supported in this browser")};var U=n.prototype;n._augment=function(e){return e.constructor=n,e._isBuffer=!0,e._get=e.get,e._set=e.set,e.get=U.get,e.set=U.set,e.write=U.write,e.toString=U.toString,e.toLocaleString=U.toString,e.toJSON=U.toJSON,e.equals=U.equals,e.compare=U.compare,e.copy=U.copy,e.slice=U.slice,e.readUIntLE=U.readUIntLE,e.readUIntBE=U.readUIntBE,e.readUInt8=U.readUInt8,e.readUInt16LE=U.readUInt16LE,e.readUInt16BE=U.readUInt16BE,e.readUInt32LE=U.readUInt32LE,e.readUInt32BE=U.readUInt32BE,e.readIntLE=U.readIntLE,e.readIntBE=U.readIntBE,e.readInt8=U.readInt8,e.readInt16LE=U.readInt16LE,e.readInt16BE=U.readInt16BE,e.readInt32LE=U.readInt32LE,e.readInt32BE=U.readInt32BE,e.readFloatLE=U.readFloatLE,e.readFloatBE=U.readFloatBE,e.readDoubleLE=U.readDoubleLE,e.readDoubleBE=U.readDoubleBE,e.writeUInt8=U.writeUInt8,e.writeUIntLE=U.writeUIntLE,e.writeUIntBE=U.writeUIntBE,e.writeUInt16LE=U.writeUInt16LE,e.writeUInt16BE=U.writeUInt16BE,e.writeUInt32LE=U.writeUInt32LE,e.writeUInt32BE=U.writeUInt32BE,e.writeIntLE=U.writeIntLE,e.writeIntBE=U.writeIntBE,e.writeInt8=U.writeInt8,e.writeInt16LE=U.writeInt16LE,e.writeInt16BE=U.writeInt16BE,e.writeInt32LE=U.writeInt32LE,e.writeInt32BE=U.writeInt32BE,e.writeFloatLE=U.writeFloatLE,e.writeFloatBE=U.writeFloatBE,e.writeDoubleLE=U.writeDoubleLE,e.writeDoubleBE=U.writeDoubleBE,e.fill=U.fill,e.inspect=U.inspect,e.toArrayBuffer=U.toArrayBuffer,e};var N=/[^+\/0-9A-z\-]/g},{"base64-js":53,ieee754:54,"is-array":55}],53:[function(e,t,r){var n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";!function(e){"use strict";function t(e){var t=e.charCodeAt(0);return t===s?62:t===a?63:h>t?-1:h+10>t?t-h+26+26:u+26>t?t-u:c+26>t?t-c+26:void 0}function r(e){function r(e){c[f++]=e}var n,i,s,a,h,c;if(e.length%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var u=e.length;h="="===e.charAt(u-2)?2:"="===e.charAt(u-1)?1:0,c=new o(3*e.length/4-h),s=h>0?e.length-4:e.length;var f=0;for(n=0,i=0;s>n;n+=4,i+=3)a=t(e.charAt(n))<<18|t(e.charAt(n+1))<<12|t(e.charAt(n+2))<<6|t(e.charAt(n+3)),r((16711680&a)>>16),r((65280&a)>>8),r(255&a);return 2===h?(a=t(e.charAt(n))<<2|t(e.charAt(n+1))>>4,r(255&a)):1===h&&(a=t(e.charAt(n))<<10|t(e.charAt(n+1))<<4|t(e.charAt(n+2))>>2,r(a>>8&255),r(255&a)),c}function i(e){function t(e){return n.charAt(e)}function r(e){return t(e>>18&63)+t(e>>12&63)+t(e>>6&63)+t(63&e)}var i,o,s,a=e.length%3,h="";for(i=0,s=e.length-a;s>i;i+=3)o=(e[i]<<16)+(e[i+1]<<8)+e[i+2],h+=r(o);switch(a){case 1:o=e[e.length-1],h+=t(o>>2),h+=t(o<<4&63),h+="==";break;case 2:o=(e[e.length-2]<<8)+e[e.length-1],h+=t(o>>10),h+=t(o>>4&63),h+=t(o<<2&63),h+="="}return h}var o="undefined"!=typeof Uint8Array?Uint8Array:Array,s="+".charCodeAt(0),a="/".charCodeAt(0),h="0".charCodeAt(0),c="a".charCodeAt(0),u="A".charCodeAt(0);e.toByteArray=r,e.fromByteArray=i}("undefined"==typeof r?this.base64js={}:r)},{}],54:[function(e,t,r){r.read=function(e,t,r,n,i){var o,s,a=8*i-n-1,h=(1<<a)-1,c=h>>1,u=-7,f=r?i-1:0,d=r?-1:1,l=e[t+f];for(f+=d,o=l&(1<<-u)-1,l>>=-u,u+=a;u>0;o=256*o+e[t+f],f+=d,u-=8);for(s=o&(1<<-u)-1,o>>=-u,u+=n;u>0;s=256*s+e[t+f],f+=d,u-=8);if(0===o)o=1-c;else{if(o===h)return s?0/0:1/0*(l?-1:1);s+=Math.pow(2,n),o-=c}return(l?-1:1)*s*Math.pow(2,o-n)},r.write=function(e,t,r,n,i,o){var s,a,h,c=8*o-i-1,u=(1<<c)-1,f=u>>1,d=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,l=n?0:o-1,p=n?1:-1,b=0>t||0===t&&0>1/t?1:0;for(t=Math.abs(t),isNaN(t)||1/0===t?(a=isNaN(t)?1:0,s=u):(s=Math.floor(Math.log(t)/Math.LN2),t*(h=Math.pow(2,-s))<1&&(s--,h*=2),t+=s+f>=1?d/h:d*Math.pow(2,1-f),t*h>=2&&(s++,h/=2),s+f>=u?(a=0,s=u):s+f>=1?(a=(t*h-1)*Math.pow(2,i),s+=f):(a=t*Math.pow(2,f-1)*Math.pow(2,i),s=0));i>=8;e[r+l]=255&a,l+=p,a/=256,i-=8);for(s=s<<i|a,c+=i;c>0;e[r+l]=255&s,l+=p,s/=256,c-=8);e[r+l-p]|=128*b}},{}],55:[function(e,t){var r=Array.isArray,n=Object.prototype.toString;t.exports=r||function(e){return!!e&&"[object Array]"==n.call(e)}},{}],56:[function(e,t){(function(r){"use strict";function n(e){h.call(this),this._hash=e,this.buffers=[]}function i(e){h.call(this),this._hash=e}var o=e("sha.js"),s=e("./md5"),a=e("ripemd160"),h=e("stream").Transform,c=e("util").inherits;t.exports=function(e){return"md5"===e?new n(s):"rmd160"===e?new n(a):new i(o(e))},c(n,h),n.prototype._transform=function(e,t,r){this.buffers.push(e),r()},n.prototype._flush=function(e){var t=r.concat(this.buffers),n=this._hash(t);this.buffers=null,this.push(n),e()},n.prototype.update=function(e,t){return this.write(e,t),this},n.prototype.digest=function(e){this.end();for(var t,n=new r("");t=this.read();)n=r.concat([n,t]);return e&&(n=n.toString(e)),n},c(i,h),i.prototype._transform=function(e,t,r){this._hash.update(e),r()},i.prototype._flush=function(e){this.push(this._hash.digest()),this._hash=null,e()},i.prototype.update=function(e,t){return this.write(e,t),this},i.prototype.digest=function(e){this.end();for(var t,n=new r("");t=this.read();)n=r.concat([n,t]);return e&&(n=n.toString(e)),n}}).call(this,e("buffer").Buffer)},{"./md5":60,buffer:52,ripemd160:183,"sha.js":185,stream:209,util:212}],57:[function(e,t){(function(r){"use strict";function n(e,t){if(!(this instanceof n))return new n(e,t);o.call(this),this._opad=c,this._alg=e;var s="sha512"===e||"sha384"===e?128:64;t=this._key=r.isBuffer(t)?t:new r(t),t.length>s?t=i(e).update(t).digest():t.length<s&&(t=r.concat([t,a],s));for(var h=this._ipad=new r(s),c=this._opad=new r(s),u=0;s>u;u++)h[u]=54^t[u],c[u]=92^t[u];this._hash=i(e).update(h)}var i=e("./create-hash"),o=e("stream").Transform,s=e("util").inherits,a=new r(128);a.fill(0),t.exports=n,s(n,o),n.prototype.update=function(e,t){return this.write(e,t),this},n.prototype._transform=function(e,t,r){this._hash.update(e),r()},n.prototype._flush=function(e){var t=this._hash.digest();this.push(i(this._alg).update(this._opad).update(t).digest()),e()},n.prototype.digest=function(e){this.end();for(var t,n=new r("");t=this.read();)n=r.concat([n,t]);return e&&(n=n.toString(e)),n}}).call(this,e("buffer").Buffer)},{"./create-hash":56,buffer:52,stream:209,util:212}],58:[function(e,t){(function(e){"use strict";function r(t,r){if(t.length%o!==0){var n=t.length+(o-t.length%o);t=e.concat([t,s],n)}for(var i=[],a=r?t.readInt32BE:t.readInt32LE,h=0;h<t.length;h+=o)i.push(a.call(t,h));return i}function n(t,r,n){for(var i=new e(r),o=n?i.writeInt32BE:i.writeInt32LE,s=0;s<t.length;s++)o.call(i,t[s],4*s,!0);return i}function i(t,i,o,s){e.isBuffer(t)||(t=new e(t));var h=i(r(t,s),t.length*a);return n(h,o,s)}var o=4,s=new e(o);s.fill(0);var a=8;t.exports={hash:i}}).call(this,e("buffer").Buffer)},{buffer:52}],59:[function(e,t,r){"use strict";function n(){var e=[].slice.call(arguments).join(" ");throw new Error([e,"we accept pull requests","http://github.com/dominictarr/crypto-browserify"].join("\n"))}function i(e,t){for(var r in e)t(e[r],r)}var o=r.rng=e("./rng"),s=r.prng=e("./prng");r.createHash=e("./create-hash"),r.createHmac=e("./create-hmac"),r.randomBytes=function(e,t){if(!t||!t.call)return o(e);try{t.call(this,void 0,o(e))}catch(e){t(e)}},r.pseudoRandomBytes=function(e,t){if(!t||!t.call)return s(e);try{t.call(this,void 0,s(e))}catch(e){t(e)}};var a=["sha1","sha224","sha256","sha384","sha512","md5","rmd160"].concat(Object.keys(e("browserify-sign/algos")));r.getHashes=function(){return a};var h=e("./pbkdf2")(r);r.pbkdf2=h.pbkdf2,r.pbkdf2Sync=h.pbkdf2Sync,e("browserify-aes/inject")(r,t.exports),e("browserify-sign/inject")(t.exports,r),e("diffie-hellman/inject")(r,t.exports),e("create-ecdh/inject")(t.exports,r),e("public-encrypt/inject")(t.exports,r),i(["createCredentials"],function(e){r[e]=function(){n("sorry,",e,"is not implemented yet")}})},{"./create-hash":56,"./create-hmac":57,"./pbkdf2":191,"./prng":192,"./rng":193,"browserify-aes/inject":68,"browserify-sign/algos":79,"browserify-sign/inject":80,"create-ecdh/inject":126,"diffie-hellman/inject":150,"public-encrypt/inject":156}],60:[function(e,t){"use strict";function r(e,t){e[t>>5]|=128<<t%32,e[(t+64>>>9<<4)+14]=t;for(var r=1732584193,n=-271733879,c=-1732584194,u=271733878,f=0;f<e.length;f+=16){var d=r,l=n,p=c,b=u;r=i(r,n,c,u,e[f+0],7,-680876936),u=i(u,r,n,c,e[f+1],12,-389564586),c=i(c,u,r,n,e[f+2],17,606105819),n=i(n,c,u,r,e[f+3],22,-1044525330),r=i(r,n,c,u,e[f+4],7,-176418897),u=i(u,r,n,c,e[f+5],12,1200080426),c=i(c,u,r,n,e[f+6],17,-1473231341),n=i(n,c,u,r,e[f+7],22,-45705983),r=i(r,n,c,u,e[f+8],7,1770035416),u=i(u,r,n,c,e[f+9],12,-1958414417),c=i(c,u,r,n,e[f+10],17,-42063),n=i(n,c,u,r,e[f+11],22,-1990404162),r=i(r,n,c,u,e[f+12],7,1804603682),u=i(u,r,n,c,e[f+13],12,-40341101),c=i(c,u,r,n,e[f+14],17,-1502002290),n=i(n,c,u,r,e[f+15],22,1236535329),r=o(r,n,c,u,e[f+1],5,-165796510),u=o(u,r,n,c,e[f+6],9,-1069501632),c=o(c,u,r,n,e[f+11],14,643717713),n=o(n,c,u,r,e[f+0],20,-373897302),r=o(r,n,c,u,e[f+5],5,-701558691),u=o(u,r,n,c,e[f+10],9,38016083),c=o(c,u,r,n,e[f+15],14,-660478335),n=o(n,c,u,r,e[f+4],20,-405537848),r=o(r,n,c,u,e[f+9],5,568446438),u=o(u,r,n,c,e[f+14],9,-1019803690),c=o(c,u,r,n,e[f+3],14,-187363961),n=o(n,c,u,r,e[f+8],20,1163531501),r=o(r,n,c,u,e[f+13],5,-1444681467),u=o(u,r,n,c,e[f+2],9,-51403784),c=o(c,u,r,n,e[f+7],14,1735328473),n=o(n,c,u,r,e[f+12],20,-1926607734),r=s(r,n,c,u,e[f+5],4,-378558),u=s(u,r,n,c,e[f+8],11,-2022574463),c=s(c,u,r,n,e[f+11],16,1839030562),n=s(n,c,u,r,e[f+14],23,-35309556),r=s(r,n,c,u,e[f+1],4,-1530992060),u=s(u,r,n,c,e[f+4],11,1272893353),c=s(c,u,r,n,e[f+7],16,-155497632),n=s(n,c,u,r,e[f+10],23,-1094730640),r=s(r,n,c,u,e[f+13],4,681279174),u=s(u,r,n,c,e[f+0],11,-358537222),c=s(c,u,r,n,e[f+3],16,-722521979),n=s(n,c,u,r,e[f+6],23,76029189),r=s(r,n,c,u,e[f+9],4,-640364487),u=s(u,r,n,c,e[f+12],11,-421815835),c=s(c,u,r,n,e[f+15],16,530742520),n=s(n,c,u,r,e[f+2],23,-995338651),r=a(r,n,c,u,e[f+0],6,-198630844),u=a(u,r,n,c,e[f+7],10,1126891415),c=a(c,u,r,n,e[f+14],15,-1416354905),n=a(n,c,u,r,e[f+5],21,-57434055),r=a(r,n,c,u,e[f+12],6,1700485571),u=a(u,r,n,c,e[f+3],10,-1894986606),c=a(c,u,r,n,e[f+10],15,-1051523),n=a(n,c,u,r,e[f+1],21,-2054922799),r=a(r,n,c,u,e[f+8],6,1873313359),u=a(u,r,n,c,e[f+15],10,-30611744),c=a(c,u,r,n,e[f+6],15,-1560198380),n=a(n,c,u,r,e[f+13],21,1309151649),r=a(r,n,c,u,e[f+4],6,-145523070),u=a(u,r,n,c,e[f+11],10,-1120210379),c=a(c,u,r,n,e[f+2],15,718787259),n=a(n,c,u,r,e[f+9],21,-343485551),r=h(r,d),n=h(n,l),c=h(c,p),u=h(u,b)}return Array(r,n,c,u)}function n(e,t,r,n,i,o){return h(c(h(h(t,e),h(n,o)),i),r)}function i(e,t,r,i,o,s,a){return n(t&r|~t&i,e,t,o,s,a)}function o(e,t,r,i,o,s,a){return n(t&i|r&~i,e,t,o,s,a)}function s(e,t,r,i,o,s,a){return n(t^r^i,e,t,o,s,a)}function a(e,t,r,i,o,s,a){return n(r^(t|~i),e,t,o,s,a)}function h(e,t){var r=(65535&e)+(65535&t),n=(e>>16)+(t>>16)+(r>>16);return n<<16|65535&r}function c(e,t){return e<<t|e>>>32-t}var u=e("./helpers");t.exports=function(e){return u.hash(e,r,16)}},{"./helpers":58}],61:[function(e,t){(function(e){t.exports=function(t,r,n,i){n/=8,i=i||0;for(var o,s,a,h=0,c=0,u=new e(n),f=new e(i),d=0;;){if(o=t.createHash("md5"),d++>0&&o.update(s),o.update(r),s=o.digest(),a=0,n>0)for(;;){if(0===n)break;if(a===s.length)break;u[h++]=s[a],n--,a++}if(i>0&&a!==s.length)for(;;){if(0===i)break;if(a===s.length)break;f[c++]=s[a],i--,a++}if(0===n&&0===i)break}for(a=0;a<s.length;a++)s[a]=0;return{key:u,iv:f}}}).call(this,e("buffer").Buffer)},{buffer:52}],62:[function(e,t,r){(function(e){function t(e){var t,r;return t=e>a||0>e?(r=Math.abs(e)%a,0>e?a-r:r):e}function n(e){var t,r,n;for(t=r=0,n=e.length;n>=0?n>r:r>n;t=n>=0?++r:--r)e[t]=0;return!1}function i(){var e;this.SBOX=[],this.INV_SBOX=[],this.SUB_MIX=function(){var t,r;for(r=[],e=t=0;4>t;e=++t)r.push([]);return r}(),this.INV_SUB_MIX=function(){var t,r;for(r=[],e=t=0;4>t;e=++t)r.push([]);return r}(),this.init(),this.RCON=[0,1,2,4,8,16,32,64,128,27,54]}function o(e){for(var t=e.length/4,r=new Array(t),n=-1;++n<t;)r[n]=e.readUInt32BE(4*n);return r}function s(e){this._key=o(e),this._doReset()}var a=Math.pow(2,32);i.prototype.init=function(){var e,t,r,n,i,o,s,a,h,c;for(e=function(){var e,r;for(r=[],t=e=0;256>e;t=++e)r.push(128>t?t<<1:t<<1^283);return r}(),i=0,h=0,t=c=0;256>c;t=++c)r=h^h<<1^h<<2^h<<3^h<<4,r=r>>>8^255&r^99,this.SBOX[i]=r,this.INV_SBOX[r]=i,o=e[i],s=e[o],a=e[s],n=257*e[r]^16843008*r,this.SUB_MIX[0][i]=n<<24|n>>>8,this.SUB_MIX[1][i]=n<<16|n>>>16,this.SUB_MIX[2][i]=n<<8|n>>>24,this.SUB_MIX[3][i]=n,n=16843009*a^65537*s^257*o^16843008*i,this.INV_SUB_MIX[0][r]=n<<24|n>>>8,this.INV_SUB_MIX[1][r]=n<<16|n>>>16,this.INV_SUB_MIX[2][r]=n<<8|n>>>24,this.INV_SUB_MIX[3][r]=n,0===i?i=h=1:(i=o^e[e[e[a^o]]],h^=e[e[h]]);return!0};var h=new i;s.blockSize=16,s.prototype.blockSize=s.blockSize,s.keySize=32,s.prototype.keySize=s.keySize,s.prototype._doReset=function(){var e,t,r,n,i,o,s,a;for(r=this._key,t=r.length,this._nRounds=t+6,i=4*(this._nRounds+1),this._keySchedule=[],n=s=0;i>=0?i>s:s>i;n=i>=0?++s:--s)this._keySchedule[n]=t>n?r[n]:(o=this._keySchedule[n-1],n%t===0?(o=o<<8|o>>>24,o=h.SBOX[o>>>24]<<24|h.SBOX[o>>>16&255]<<16|h.SBOX[o>>>8&255]<<8|h.SBOX[255&o],o^=h.RCON[n/t|0]<<24):t>6&&n%t===4?o=h.SBOX[o>>>24]<<24|h.SBOX[o>>>16&255]<<16|h.SBOX[o>>>8&255]<<8|h.SBOX[255&o]:void 0,this._keySchedule[n-t]^o);for(this._invKeySchedule=[],e=a=0;i>=0?i>a:a>i;e=i>=0?++a:--a)n=i-e,o=this._keySchedule[n-(e%4?0:4)],this._invKeySchedule[e]=4>e||4>=n?o:h.INV_SUB_MIX[0][h.SBOX[o>>>24]]^h.INV_SUB_MIX[1][h.SBOX[o>>>16&255]]^h.INV_SUB_MIX[2][h.SBOX[o>>>8&255]]^h.INV_SUB_MIX[3][h.SBOX[255&o]];return!0},s.prototype.encryptBlock=function(t){t=o(new e(t));var r=this._doCryptBlock(t,this._keySchedule,h.SUB_MIX,h.SBOX),n=new e(16);return n.writeUInt32BE(r[0],0),n.writeUInt32BE(r[1],4),n.writeUInt32BE(r[2],8),n.writeUInt32BE(r[3],12),n},s.prototype.decryptBlock=function(t){t=o(new e(t));var r=[t[3],t[1]];t[1]=r[0],t[3]=r[1];var n=this._doCryptBlock(t,this._invKeySchedule,h.INV_SUB_MIX,h.INV_SBOX),i=new e(16);return i.writeUInt32BE(n[0],0),i.writeUInt32BE(n[3],4),i.writeUInt32BE(n[2],8),i.writeUInt32BE(n[1],12),i},s.prototype.scrub=function(){n(this._keySchedule),n(this._invKeySchedule),n(this._key)},s.prototype._doCryptBlock=function(e,r,n,i){var o,s,a,h,c,u,f,d,l,p,b,g;for(a=e[0]^r[0],h=e[1]^r[1],c=e[2]^r[2],u=e[3]^r[3],o=4,s=b=1,g=this._nRounds;g>=1?g>b:b>g;s=g>=1?++b:--b)f=n[0][a>>>24]^n[1][h>>>16&255]^n[2][c>>>8&255]^n[3][255&u]^r[o++],d=n[0][h>>>24]^n[1][c>>>16&255]^n[2][u>>>8&255]^n[3][255&a]^r[o++],l=n[0][c>>>24]^n[1][u>>>16&255]^n[2][a>>>8&255]^n[3][255&h]^r[o++],p=n[0][u>>>24]^n[1][a>>>16&255]^n[2][h>>>8&255]^n[3][255&c]^r[o++],a=f,h=d,c=l,u=p;return f=(i[a>>>24]<<24|i[h>>>16&255]<<16|i[c>>>8&255]<<8|i[255&u])^r[o++],d=(i[h>>>24]<<24|i[c>>>16&255]<<16|i[u>>>8&255]<<8|i[255&a])^r[o++],l=(i[c>>>24]<<24|i[u>>>16&255]<<16|i[a>>>8&255]<<8|i[255&h])^r[o++],p=(i[u>>>24]<<24|i[a>>>16&255]<<16|i[h>>>8&255]<<8|i[255&c])^r[o++],[t(f),t(d),t(l),t(p)]},r.AES=s}).call(this,e("buffer").Buffer)},{buffer:52}],63:[function(e,t){(function(r){function n(e,t,i,a){if(!(this instanceof n))return new n(e,t,i);s.call(this),this._finID=r.concat([i,new r([0,0,0,1])]),i=r.concat([i,new r([0,0,0,2])]),this._cipher=new o.AES(t),this._prev=new r(i.length),this._cache=new r(""),this._secCache=new r(""),this._decrypt=a,this._alen=0,this._len=0,i.copy(this._prev),this._mode=e;var c=new r(4);c.fill(0),this._ghash=new h(this._cipher.encryptBlock(c)),this._authTag=null,this._called=!1}function i(e,t){var r=0;e.length!==t.length&&r++;for(var n=Math.min(e.length,t.length),i=-1;++i<n;)r+=e[i]^t[i];return r}var o=e("./aes"),s=e("./cipherBase"),a=e("inherits"),h=e("./ghash"),c=e("./xor");a(n,s),t.exports=n,n.prototype._transform=function(e,t,n){if(!this._called&&this._alen){var i=16-this._alen%16;16>i&&(i=new r(i),i.fill(0),this._ghash.update(i))}this._called=!0;var o=this._mode.encrypt(this,e);this._ghash.update(this._decrypt?e:o),this._len+=e.length,n(null,o)},n.prototype._flush=function(e){if(this._decrypt&&!this._authTag)throw new Error("Unsupported state or unable to authenticate data");var t=c(this._ghash.final(8*this._alen,8*this._len),this._cipher.encryptBlock(this._finID));if(this._decrypt){if(i(t,this._authTag))throw new Error("Unsupported state or unable to authenticate data")}else this._authTag=t;this._cipher.scrub(),e()},n.prototype.getAuthTag=function(){if(!this._decrypt&&r.isBuffer(this._authTag))return this._authTag;throw new Error("Attempting to get auth tag in unsupported state")},n.prototype.setAuthTag=function(e){if(!this._decrypt)throw new Error("Attempting to set auth tag in unsupported state");this._authTag=e},n.prototype.setAAD=function(e){if(this._called)throw new Error("Attempting to set AAD in unsupported state");this._ghash.update(e),this._alen+=e.length}}).call(this,e("buffer").Buffer)},{"./aes":62,"./cipherBase":64,"./ghash":67,"./xor":78,buffer:52,inherits:195}],64:[function(e,t){(function(r){function n(){i.call(this)}var i=e("stream").Transform,o=e("inherits");t.exports=n,o(n,i),n.prototype.update=function(e,t,n){this.write(e,t);for(var i,o=new r("");i=this.read();)o=r.concat([o,i]);return n&&(o=o.toString(n)),o},n.prototype.final=function(e){this.end();for(var t,n=new r("");t=this.read();)n=r.concat([n,t]);return e&&(n=n.toString(e)),n}}).call(this,e("buffer").Buffer)},{buffer:52,inherits:195,stream:209}],65:[function(e,t){(function(r){function n(e,t,o){return this instanceof n?(a.call(this),this._cache=new i,this._last=void 0,this._cipher=new s.AES(t),this._prev=new r(o.length),o.copy(this._prev),void(this._mode=e)):new n(e,t,o)}function i(){return this instanceof i?void(this.cache=new r("")):new i}function o(e){for(var t=e[15],r=-1;++r<t;)if(e[r+(16-t)]!==t)throw new Error("unable to decrypt data");return 16!==t?e.slice(0,16-t):void 0}var s=e("./aes"),a=e("./cipherBase"),h=e("inherits"),c=e("./modes"),u=e("./streamCipher"),f=e("./authCipher"),d=e("./EVP_BytesToKey");h(n,a),n.prototype._transform=function(e,t,r){this._cache.add(e);for(var n,i;n=this._cache.get();)i=this._mode.decrypt(this,n),this.push(i);r()},n.prototype._flush=function(e){var t=this._cache.flush();return t?(this.push(o(this._mode.decrypt(this,t))),void e()):e},i.prototype.add=function(e){this.cache=r.concat([this.cache,e])},i.prototype.get=function(){if(this.cache.length>16){var e=this.cache.slice(0,16);return this.cache=this.cache.slice(16),e}return null},i.prototype.flush=function(){return this.cache.length?this.cache:void 0};var l={ECB:e("./modes/ecb"),CBC:e("./modes/cbc"),CFB:e("./modes/cfb"),CFB8:e("./modes/cfb8"),CFB1:e("./modes/cfb1"),OFB:e("./modes/ofb"),CTR:e("./modes/ctr"),GCM:e("./modes/ctr")};t.exports=function(e){function t(e,t,i){var o=c[e];if(!o)throw new TypeError("invalid suite type");if("string"==typeof i&&(i=new r(i)),"string"==typeof t&&(t=new r(t)),t.length!==o.key/8)throw new TypeError("invalid key length "+t.length);if(i.length!==o.iv)throw new TypeError("invalid iv length "+i.length);return"stream"===o.type?new u(l[o.mode],t,i,!0):"auth"===o.type?new f(l[o.mode],t,i,!0):new n(l[o.mode],t,i)}function i(r,n){var i=c[r];if(!i)throw new TypeError("invalid suite type");var o=d(e,n,i.key,i.iv);return t(r,o.key,o.iv)}return{createDecipher:i,createDecipheriv:t}}}).call(this,e("buffer").Buffer)},{"./EVP_BytesToKey":61,"./aes":62,"./authCipher":63,"./cipherBase":64,"./modes":69,"./modes/cbc":70,"./modes/cfb":71,"./modes/cfb1":72,"./modes/cfb8":73,"./modes/ctr":74,"./modes/ecb":75,"./modes/ofb":76,"./streamCipher":77,buffer:52,inherits:195}],66:[function(e,t){(function(r){function n(e,t,a){return this instanceof n?(s.call(this),this._cache=new i,this._cipher=new o.AES(t),this._prev=new r(a.length),a.copy(this._prev),void(this._mode=e)):new n(e,t,a)}function i(){return this instanceof i?void(this.cache=new r("")):new i}var o=e("./aes"),s=e("./cipherBase"),a=e("inherits"),h=e("./modes"),c=e("./EVP_BytesToKey"),u=e("./streamCipher"),f=e("./authCipher");a(n,s),n.prototype._transform=function(e,t,r){this._cache.add(e);for(var n,i;n=this._cache.get();)i=this._mode.encrypt(this,n),this.push(i);r()},n.prototype._flush=function(e){var t=this._cache.flush();this.push(this._mode.encrypt(this,t)),this._cipher.scrub(),e()},i.prototype.add=function(e){this.cache=r.concat([this.cache,e])},i.prototype.get=function(){if(this.cache.length>15){var e=this.cache.slice(0,16);return this.cache=this.cache.slice(16),e}return null},i.prototype.flush=function(){for(var e=16-this.cache.length,t=new r(e),n=-1;++n<e;)t.writeUInt8(e,n);var i=r.concat([this.cache,t]);return i};var d={ECB:e("./modes/ecb"),CBC:e("./modes/cbc"),CFB:e("./modes/cfb"),CFB8:e("./modes/cfb8"),CFB1:e("./modes/cfb1"),OFB:e("./modes/ofb"),CTR:e("./modes/ctr"),GCM:e("./modes/ctr")};t.exports=function(e){function t(e,t,i){var o=h[e];if(!o)throw new TypeError("invalid suite type");if("string"==typeof i&&(i=new r(i)),"string"==typeof t&&(t=new r(t)),t.length!==o.key/8)throw new TypeError("invalid key length "+t.length);if(i.length!==o.iv)throw new TypeError("invalid iv length "+i.length);return"stream"===o.type?new u(d[o.mode],t,i):"auth"===o.type?new f(d[o.mode],t,i):new n(d[o.mode],t,i)}function i(r,n){var i=h[r];if(!i)throw new TypeError("invalid suite type");var o=c(e,n,i.key,i.iv);return t(r,o.key,o.iv)}return{createCipher:i,createCipheriv:t}}}).call(this,e("buffer").Buffer)},{"./EVP_BytesToKey":61,"./aes":62,"./authCipher":63,"./cipherBase":64,"./modes":69,"./modes/cbc":70,"./modes/cfb":71,"./modes/cfb1":72,"./modes/cfb8":73,"./modes/ctr":74,"./modes/ecb":75,"./modes/ofb":76,"./streamCipher":77,buffer:52,inherits:195}],67:[function(e,t){(function(e){function r(t){this.h=t,this.state=new e(16),this.state.fill(0),this.cache=new e("")}function n(e){return[e.readUInt32BE(0),e.readUInt32BE(4),e.readUInt32BE(8),e.readUInt32BE(12)]}function i(t){t=t.map(o);var r=new e(16);return r.writeUInt32BE(t[0],0),r.writeUInt32BE(t[1],4),r.writeUInt32BE(t[2],8),r.writeUInt32BE(t[3],12),r}function o(e){var t,r;return t=e>h||0>e?(r=Math.abs(e)%h,0>e?h-r:r):e}function s(e,t){return[e[0]^t[0],e[1]^t[1],e[2]^t[2],e[3]^t[3]]}var a=new e(16);a.fill(0),t.exports=r,r.prototype.ghash=function(e){for(var t=-1;++t<e.length;)this.state[t]^=e[t];this._multiply()},r.prototype._multiply=function(){for(var e,t,r,o=n(this.h),a=[0,0,0,0],h=-1;++h<128;){for(t=0!==(this.state[~~(h/8)]&1<<7-h%8),t&&(a=s(a,o)),r=0!==(1&o[3]),e=3;e>0;e--)o[e]=o[e]>>>1|(1&o[e-1])<<31;o[0]=o[0]>>>1,r&&(o[0]=o[0]^225<<24)}this.state=i(a)},r.prototype.update=function(t){this.cache=e.concat([this.cache,t]);for(var r;this.cache.length>=16;)r=this.cache.slice(0,16),this.cache=this.cache.slice(16),this.ghash(r)},r.prototype.final=function(t,r){return this.cache.length&&this.ghash(e.concat([this.cache,a],16)),this.ghash(i([0,t,0,r])),this.state};var h=Math.pow(2,32)}).call(this,e("buffer").Buffer)},{buffer:52}],68:[function(e,t){t.exports=function(t,r){function n(){return Object.keys(s)}r=r||{};var i=e("./encrypter")(t);r.createCipher=i.createCipher,r.createCipheriv=i.createCipheriv;var o=e("./decrypter")(t);r.createDecipher=o.createDecipher,r.createDecipheriv=o.createDecipheriv;var s=e("./modes");r.listCiphers=n}},{"./decrypter":65,"./encrypter":66,"./modes":69}],69:[function(e,t,r){r["aes-128-ecb"]={cipher:"AES",key:128,iv:0,mode:"ECB",type:"block"},r["aes-192-ecb"]={cipher:"AES",key:192,iv:0,mode:"ECB",type:"block"},r["aes-256-ecb"]={cipher:"AES",key:256,iv:0,mode:"ECB",type:"block"},r["aes-128-cbc"]={cipher:"AES",key:128,iv:16,mode:"CBC",type:"block"},r["aes-192-cbc"]={cipher:"AES",key:192,iv:16,mode:"CBC",type:"block"},r["aes-256-cbc"]={cipher:"AES",key:256,iv:16,mode:"CBC",type:"block"},r.aes128=r["aes-128-cbc"],r.aes192=r["aes-192-cbc"],r.aes256=r["aes-256-cbc"],r["aes-128-cfb"]={cipher:"AES",key:128,iv:16,mode:"CFB",type:"stream"},r["aes-192-cfb"]={cipher:"AES",key:192,iv:16,mode:"CFB",type:"stream"},r["aes-256-cfb"]={cipher:"AES",key:256,iv:16,mode:"CFB",type:"stream"},r["aes-128-cfb8"]={cipher:"AES",key:128,iv:16,mode:"CFB8",type:"stream"},r["aes-192-cfb8"]={cipher:"AES",key:192,iv:16,mode:"CFB8",type:"stream"},r["aes-256-cfb8"]={cipher:"AES",key:256,iv:16,mode:"CFB8",type:"stream"},r["aes-128-cfb1"]={cipher:"AES",key:128,iv:16,mode:"CFB1",type:"stream"},r["aes-192-cfb1"]={cipher:"AES",key:192,iv:16,mode:"CFB1",type:"stream"},r["aes-256-cfb1"]={cipher:"AES",key:256,iv:16,mode:"CFB1",type:"stream"},r["aes-128-ofb"]={cipher:"AES",key:128,iv:16,mode:"OFB",type:"stream"},r["aes-192-ofb"]={cipher:"AES",key:192,iv:16,mode:"OFB",type:"stream"},r["aes-256-ofb"]={cipher:"AES",key:256,iv:16,mode:"OFB",type:"stream"},r["aes-128-ctr"]={cipher:"AES",key:128,iv:16,mode:"CTR",type:"stream"},r["aes-192-ctr"]={cipher:"AES",key:192,iv:16,mode:"CTR",type:"stream"},r["aes-256-ctr"]={cipher:"AES",key:256,iv:16,mode:"CTR",type:"stream"},r["aes-128-gcm"]={cipher:"AES",key:128,iv:12,mode:"GCM",type:"auth"},r["aes-192-gcm"]={cipher:"AES",key:192,iv:12,mode:"GCM",type:"auth"},r["aes-256-gcm"]={cipher:"AES",key:256,iv:12,mode:"GCM",type:"auth"}},{}],70:[function(e,t,r){var n=e("../xor");r.encrypt=function(e,t){var r=n(t,e._prev);return e._prev=e._cipher.encryptBlock(r),e._prev},r.decrypt=function(e,t){var r=e._prev;e._prev=t;var i=e._cipher.decryptBlock(t);return n(i,r)}},{"../xor":78}],71:[function(e,t,r){(function(t){function n(e,r,n){var o=r.length,s=i(r,e._cache);return e._cache=e._cache.slice(o),e._prev=t.concat([e._prev,n?r:s]),s}var i=e("../xor");r.encrypt=function(e,r,i){for(var o,s=new t("");r.length;){if(0===e._cache.length&&(e._cache=e._cipher.encryptBlock(e._prev),e._prev=new t("")),!(e._cache.length<=r.length)){s=t.concat([s,n(e,r,i)]);break}o=e._cache.length,s=t.concat([s,n(e,r.slice(0,o),i)]),r=r.slice(o)}return s}}).call(this,e("buffer").Buffer)},{"../xor":78,buffer:52}],72:[function(e,t,r){(function(e){function t(e,t,r){for(var i,o,s,a=-1,h=8,c=0;++a<h;)i=e._cipher.encryptBlock(e._prev),o=t&1<<7-a?128:0,s=i[0]^o,c+=(128&s)>>a%8,e._prev=n(e._prev,r?o:s);return c}function n(t,r){var n=t.length,i=-1,o=new e(t.length);for(t=e.concat([t,new e([r])]);++i<n;)o[i]=t[i]<<1|t[i+1]>>7;return o}r.encrypt=function(r,n,i){for(var o=n.length,s=new e(o),a=-1;++a<o;)s[a]=t(r,n[a],i);return s}}).call(this,e("buffer").Buffer)},{buffer:52}],73:[function(e,t,r){(function(e){function t(t,r,n){var i=t._cipher.encryptBlock(t._prev),o=i[0]^r;return t._prev=e.concat([t._prev.slice(1),new e([n?r:o])]),o}r.encrypt=function(r,n,i){for(var o=n.length,s=new e(o),a=-1;++a<o;)s[a]=t(r,n[a],i);return s}}).call(this,e("buffer").Buffer)},{buffer:52}],74:[function(e,t,r){(function(t){function n(e){var t=e._cipher.encryptBlock(e._prev);return i(e._prev),t}function i(e){for(var t,r=e.length;r--;){if(t=e.readUInt8(r),255!==t){t++,e.writeUInt8(t,r);break}e.writeUInt8(0,r)}}var o=e("../xor");r.encrypt=function(e,r){for(;e._cache.length<r.length;)e._cache=t.concat([e._cache,n(e)]);var i=e._cache.slice(0,r.length);return e._cache=e._cache.slice(r.length),o(r,i)}}).call(this,e("buffer").Buffer)},{"../xor":78,buffer:52}],75:[function(e,t,r){r.encrypt=function(e,t){return e._cipher.encryptBlock(t)},r.decrypt=function(e,t){return e._cipher.decryptBlock(t)}},{}],76:[function(e,t,r){(function(t){function n(e){return e._prev=e._cipher.encryptBlock(e._prev),e._prev}var i=e("../xor");r.encrypt=function(e,r){for(;e._cache.length<r.length;)e._cache=t.concat([e._cache,n(e)]);var o=e._cache.slice(0,r.length);return e._cache=e._cache.slice(r.length),i(r,o)}}).call(this,e("buffer").Buffer)},{"../xor":78,buffer:52}],77:[function(e,t){(function(r){function n(e,t,s,a){return this instanceof n?(o.call(this),this._cipher=new i.AES(t),this._prev=new r(s.length),this._cache=new r(""),this._secCache=new r(""),this._decrypt=a,s.copy(this._prev),void(this._mode=e)):new n(e,t,s)}var i=e("./aes"),o=e("./cipherBase"),s=e("inherits");s(n,o),t.exports=n,n.prototype._transform=function(e,t,r){r(null,this._mode.encrypt(this,e,this._decrypt))},n.prototype._flush=function(e){this._cipher.scrub(),e()}}).call(this,e("buffer").Buffer)},{"./aes":62,"./cipherBase":64,buffer:52,inherits:195}],78:[function(e,t){(function(e){function r(t,r){for(var n=Math.min(t.length,r.length),i=new e(n),o=-1;++o<n;)i.writeUInt8(t[o]^r[o],o);return i}t.exports=r}).call(this,e("buffer").Buffer)},{buffer:52}],79:[function(e,t,r){(function(e){r["RSA-SHA224"]=r.sha224WithRSAEncryption={sign:"rsa",hash:"sha224",id:new e("302d300d06096086480165030402040500041c","hex")},r["RSA-SHA256"]=r.sha256WithRSAEncryption={sign:"rsa",hash:"sha256",id:new e("3031300d060960864801650304020105000420","hex")},r["RSA-SHA384"]=r.sha384WithRSAEncryption={sign:"rsa",hash:"sha384",id:new e("3041300d060960864801650304020205000430","hex")},r["RSA-SHA512"]=r.sha512WithRSAEncryption={sign:"rsa",hash:"sha512",id:new e("3051300d060960864801650304020305000440","hex")},r["RSA-SHA1"]={sign:"rsa",hash:"sha1",id:new e("3021300906052b0e03021a05000414","hex")},r["ecdsa-with-SHA1"]={sign:"ecdsa",hash:"sha1",id:new e("","hex")},r.DSA=r["DSA-SHA1"]=r["DSA-SHA"]={sign:"dsa",hash:"sha1",id:new e("","hex")},r["RSA-RIPEMD160"]=r.ripemd160WithRSA={sign:"rsa",hash:"rmd160",id:new e("3021300906052b2403020105000414","hex")},r["RSA-MD5"]=r.md5WithRSAEncryption={sign:"rsa",hash:"md5",id:new e("3020300c06082a864886f70d020505000410","hex")}}).call(this,e("buffer").Buffer)},{buffer:52}],80:[function(e,t){(function(r){function n(e,t){a.Writable.call(this);var r=c[e];if(!r)throw new Error("Unknown message digest");this._hash=t.createHash(r.hash),this._tag=r.id,this._crypto=t}function i(e,t){a.Writable.call(this);var r=c[e];if(!r)throw new Error("Unknown message digest");this._hash=t.createHash(r.hash),this._tag=r.id}var o=e("./sign"),s=e("./verify"),a=e("stream"),h=e("inherits"),c=e("./algos");t.exports=function(e,t){function r(e){return new n(e,t)}function o(e){return new i(e,t)}e.createSign=r,e.createVerify=o},h(n,a.Writable),n.prototype._write=function(e,t,r){this._hash.update(e),r()},n.prototype.update=function(e){return this.write(e),this},n.prototype.sign=function(e,t){this.end();
var n=this._hash.digest(),i=o(r.concat([this._tag,n]),e,this._crypto);return t&&(i=i.toString(t)),i},h(i,a.Writable),i.prototype._write=function(e,t,r){this._hash.update(e),r()},i.prototype.update=function(e){return this.write(e),this},i.prototype.verify=function(e,t,n){this.end();var i=this._hash.digest();return r.isBuffer(t)||(t=new r(t,n)),s(t,r.concat([this._tag,i]),e)}}).call(this,e("buffer").Buffer)},{"./algos":79,"./sign":123,"./verify":124,buffer:52,inherits:195,stream:209}],81:[function(e,t){function r(e,t){if(!e)throw new Error(t||"Assertion failed")}function n(e,t){e.super_=t;var r=function(){};r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e}function i(e,t){return null!==e&&"object"==typeof e&&Array.isArray(e.words)?e:(this.sign=!1,this.words=null,this.length=0,this.red=null,void(null!==e&&this._init(e||0,t||10)))}function o(e,t){this.name=e,this.p=new i(t,16),this.n=this.p.bitLength(),this.k=new i(1).ishln(this.n).isub(this.p),this.tmp=this._tmp()}function s(){o.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function a(){o.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function h(){o.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function c(){o.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function u(e){if("string"==typeof e){var t=i._prime(e);this.m=t.p,this.prime=t}else this.m=e,this.prime=null}function f(e){u.call(this,e),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new i(1).ishln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r.invm(this.m),this.minv=this.rinv.mul(this.r).sub(new i(1)).div(this.m).neg().mod(this.r)}"object"==typeof t&&(t.exports=i),i.BN=i,i.wordSize=26,i.prototype._init=function(e,t){if("number"==typeof e)return 0>e&&(this.sign=!0,e=-e),void(67108864>e?(this.words=[67108863&e],this.length=1):(this.words=[67108863&e,e/67108864&67108863],this.length=2));if("object"==typeof e){r("number"==typeof e.length),this.length=Math.ceil(e.length/3),this.words=new Array(this.length);for(var n=0;n<this.length;n++)this.words[n]=0;for(var i=0,n=e.length-1,o=0;n>=0;n-=3){var s=e[n]|e[n-1]<<8|e[n-2]<<16;this.words[o]|=s<<i&67108863,this.words[o+1]=s>>>26-i&67108863,i+=24,i>=26&&(i-=26,o++)}return this.strip()}"hex"===t&&(t=16),r(t===(0|t)&&t>=2&&36>=t),e=e.toString().replace(/\s+/g,"");var a=0;"-"===e[0]&&a++,16===t?this._parseHex(e,a):this._parseBase(e,t,a),"-"===e[0]&&(this.sign=!0),this.strip()},i.prototype._parseHex=function(e,t){this.length=Math.ceil((e.length-t)/6),this.words=new Array(this.length);for(var r=0;r<this.length;r++)this.words[r]=0;for(var n=0,r=e.length-6,i=0;r>=t;r-=6){var o=parseInt(e.slice(r,r+6),16);this.words[i]|=o<<n&67108863,this.words[i+1]|=o>>>26-n&4194303,n+=24,n>=26&&(n-=26,i++)}if(r+6!==t){var o=parseInt(e.slice(t,r+6),16);this.words[i]|=o<<n&67108863,this.words[i+1]|=o>>>26-n&4194303}this.strip()},i.prototype._parseBase=function(e,t,n){this.words=[0],this.length=1;for(var o=0,s=1,a=0,h=null,c=n;c<e.length;c++){var u,f=e[c];u=10===t||"9">=f?0|f:f>="a"?f.charCodeAt(0)-97+10:f.charCodeAt(0)-65+10,o*=t,o+=u,s*=t,a++,s>1048575&&(r(67108863>=s),h||(h=new i(s)),this.mul(h).copy(this),this.iadd(new i(o)),o=0,s=1,a=0)}0!==a&&(this.mul(new i(s)).copy(this),this.iadd(new i(o)))},i.prototype.copy=function(e){e.words=new Array(this.length);for(var t=0;t<this.length;t++)e.words[t]=this.words[t];e.length=this.length,e.sign=this.sign,e.red=this.red},i.prototype.clone=function(){var e=new i(null);return this.copy(e),e},i.prototype.strip=function(){for(;this.length>1&&0===this.words[this.length-1];)this.length--;return this._normSign()},i.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.sign=!1),this},i.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var d=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],l=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],p=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];i.prototype.toString=function(e,t){if(e=e||10,16===e||"hex"===e){for(var n="",i=0,t=0|t||1,o=0,s=0;s<this.length;s++){var a=this.words[s],h=(16777215&(a<<i|o)).toString(16);o=a>>>24-i&16777215,n=0!==o||s!==this.length-1?d[6-h.length]+h+n:h+n,i+=2,i>=26&&(i-=26,s--)}for(0!==o&&(n=o.toString(16)+n);n.length%t!==0;)n="0"+n;return this.sign&&(n="-"+n),n}if(e===(0|e)&&e>=2&&36>=e){var c=l[e],u=p[e],n="",f=this.clone();for(f.sign=!1;0!==f.cmpn(0);){var b=f.modn(u).toString(e);f=f.idivn(u),n=0!==f.cmpn(0)?d[c-b.length]+b+n:b+n}return 0===this.cmpn(0)&&(n="0"+n),this.sign&&(n="-"+n),n}r(!1,"Base should be between 2 and 36")},i.prototype.toJSON=function(){return this.toString(16)},i.prototype.toArray=function(){this.strip();var e=new Array(this.byteLength());e[0]=0;for(var t=this.clone(),r=0;0!==t.cmpn(0);r++){var n=t.andln(255);t.ishrn(8),e[e.length-r-1]=n}return e},i.prototype._countBits=function(e){return e>=33554432?26:e>=16777216?25:e>=8388608?24:e>=4194304?23:e>=2097152?22:e>=1048576?21:e>=524288?20:e>=262144?19:e>=131072?18:e>=65536?17:e>=32768?16:e>=16384?15:e>=8192?14:e>=4096?13:e>=2048?12:e>=1024?11:e>=512?10:e>=256?9:e>=128?8:e>=64?7:e>=32?6:e>=16?5:e>=8?4:e>=4?3:e>=2?2:e>=1?1:0},i.prototype.bitLength=function(){var e=0,t=this.words[this.length-1],e=this._countBits(t);return 26*(this.length-1)+e},i.prototype.byteLength=function(){this.words[this.length-1];return Math.ceil(this.bitLength()/8)},i.prototype.neg=function(){if(0===this.cmpn(0))return this.clone();var e=this.clone();return e.sign=!this.sign,e},i.prototype.iadd=function(e){if(this.sign&&!e.sign){this.sign=!1;var t=this.isub(e);return this.sign=!this.sign,this._normSign()}if(!this.sign&&e.sign){e.sign=!1;var t=this.isub(e);return e.sign=!0,t._normSign()}var r,n;this.length>e.length?(r=this,n=e):(r=e,n=this);for(var i=0,o=0;o<n.length;o++){var t=r.words[o]+n.words[o]+i;this.words[o]=67108863&t,i=t>>>26}for(;0!==i&&o<r.length;o++){var t=r.words[o]+i;this.words[o]=67108863&t,i=t>>>26}if(this.length=r.length,0!==i)this.words[this.length]=i,this.length++;else if(r!==this)for(;o<r.length;o++)this.words[o]=r.words[o];return this},i.prototype.add=function(e){if(e.sign&&!this.sign){e.sign=!1;var t=this.sub(e);return e.sign=!0,t}if(!e.sign&&this.sign){this.sign=!1;var t=e.sub(this);return this.sign=!0,t}return this.length>e.length?this.clone().iadd(e):e.clone().iadd(this)},i.prototype.isub=function(e){if(e.sign){e.sign=!1;var t=this.iadd(e);return e.sign=!0,t._normSign()}if(this.sign)return this.sign=!1,this.iadd(e),this.sign=!0,this._normSign();var r=this.cmp(e);if(0===r)return this.sign=!1,this.length=1,this.words[0]=0,this;if(r>0)var n=this,i=e;else var n=e,i=this;for(var o=0,s=0;s<i.length;s++){var t=n.words[s]-i.words[s]-o;0>t?(t+=67108864,o=1):o=0,this.words[s]=t}for(;0!==o&&s<n.length;s++){var t=n.words[s]-o;0>t?(t+=67108864,o=1):o=0,this.words[s]=t}if(0===o&&s<n.length&&n!==this)for(;s<n.length;s++)this.words[s]=n.words[s];return this.length=Math.max(this.length,s),n!==this&&(this.sign=!0),this.strip()},i.prototype.sub=function(e){return this.clone().isub(e)},i.prototype._smallMulTo=function(e,t){t.sign=e.sign!==this.sign,t.length=this.length+e.length;for(var r=0,n=0;n<t.length-1;n++){for(var i=r>>>26,o=67108863&r,s=Math.min(n,e.length-1),a=Math.max(0,n-this.length+1);s>=a;a++){var h=n-a,c=0|this.words[h],u=0|e.words[a],f=c*u,d=67108863&f;i=i+(f/67108864|0)|0,d=d+o|0,o=67108863&d,i=i+(d>>>26)|0}t.words[n]=o,r=i}return 0!==r?t.words[n]=r:t.length--,t.strip()},i.prototype._bigMulTo=function(e,t){t.sign=e.sign!==this.sign,t.length=this.length+e.length;for(var r=0,n=0,i=0;i<t.length-1;i++){var o=n;n=0;for(var s=67108863&r,a=Math.min(i,e.length-1),h=Math.max(0,i-this.length+1);a>=h;h++){var c=i-h,u=0|this.words[c],f=0|e.words[h],d=u*f,l=67108863&d;o=o+(d/67108864|0)|0,l=l+s|0,s=67108863&l,o=o+(l>>>26)|0,n+=o>>>26,o&=67108863}t.words[i]=s,r=o,o=n}return 0!==r?t.words[i]=r:t.length--,t.strip()},i.prototype.mulTo=function(e,t){var r;return r=this.length+e.length<63?this._smallMulTo(e,t):this._bigMulTo(e,t)},i.prototype.mul=function(e){var t=new i(null);return t.words=new Array(this.length+e.length),this.mulTo(e,t)},i.prototype.imul=function(e){if(0===this.cmpn(0)||0===e.cmpn(0))return this.words[0]=0,this.length=1,this;var t=this.length,r=e.length;this.sign=e.sign!==this.sign,this.length=this.length+e.length,this.words[this.length-1]=0;for(var n=this.length-2;n>=0;n--){for(var i=0,o=0,s=Math.min(n,r-1),a=Math.max(0,n-t+1);s>=a;a++){var h=n-a,c=this.words[h],u=e.words[a],f=c*u,d=67108863&f;i+=f/67108864|0,d+=o,o=67108863&d,i+=d>>>26}this.words[n]=o,this.words[n+1]+=i,i=0}for(var i=0,h=1;h<this.length;h++){var l=this.words[h]+i;this.words[h]=67108863&l,i=l>>>26}return this.strip()},i.prototype.sqr=function(){return this.mul(this)},i.prototype.isqr=function(){return this.mul(this)},i.prototype.ishln=function(e){r("number"==typeof e&&e>=0);{var t=e%26,n=(e-t)/26,i=67108863>>>26-t<<26-t;this.clone()}if(0!==t){for(var o=0,s=0;s<this.length;s++){var a=this.words[s]&i,h=this.words[s]-a<<t;this.words[s]=h|o,o=a>>>26-t}o&&(this.words[s]=o,this.length++)}if(0!==n){for(var s=this.length-1;s>=0;s--)this.words[s+n]=this.words[s];for(var s=0;n>s;s++)this.words[s]=0;this.length+=n}return this.strip()},i.prototype.ishrn=function(e,t,n){r("number"==typeof e&&e>=0),t=t?(t-t%26)/26:0;var i=e%26,o=Math.min((e-i)/26,this.length),s=67108863^67108863>>>i<<i,a=n;if(t-=o,t=Math.max(0,t),a){for(var h=0;o>h;h++)a.words[h]=this.words[h];a.length=o}if(0===o);else if(this.length>o){this.length-=o;for(var h=0;h<this.length;h++)this.words[h]=this.words[h+o]}else this.words[0]=0,this.length=1;for(var c=0,h=this.length-1;h>=0&&(0!==c||h>=t);h--){var u=this.words[h];this.words[h]=c<<26-i|u>>>i,c=u&s}return a&&0!==c&&(a.words[a.length++]=c),0===this.length&&(this.words[0]=0,this.length=1),this.strip(),n?{hi:this,lo:a}:this},i.prototype.shln=function(e){return this.clone().ishln(e)},i.prototype.shrn=function(e){return this.clone().ishrn(e)},i.prototype.testn=function(e){r("number"==typeof e&&e>=0);var t=e%26,n=(e-t)/26,i=1<<t;if(this.length<=n)return!1;var o=this.words[n];return!!(o&i)},i.prototype.imaskn=function(e){r("number"==typeof e&&e>=0);var t=e%26,n=(e-t)/26;if(r(!this.sign,"imaskn works only with positive numbers"),0!==t&&n++,this.length=Math.min(n,this.length),0!==t){var i=67108863^67108863>>>t<<t;this.words[this.length-1]&=i}return this.strip()},i.prototype.maskn=function(e){return this.clone().imaskn(e)},i.prototype.iaddn=function(e){if(r("number"==typeof e),0>e)return this.isubn(-e);if(this.sign)return 1===this.length&&this.words[0]<e?(this.words[0]=e-this.words[0],this.sign=!1,this):(this.sign=!1,this.isubn(e),this.sign=!0,this);this.words[0]+=e;for(var t=0;t<this.length&&this.words[t]>=67108864;t++)this.words[t]-=67108864,t===this.length-1?this.words[t+1]=1:this.words[t+1]++;return this.length=Math.max(this.length,t+1),this},i.prototype.isubn=function(e){if(r("number"==typeof e),0>e)return this.iaddn(-e);if(this.sign)return this.sign=!1,this.iaddn(e),this.sign=!0,this;this.words[0]-=e;for(var t=0;t<this.length&&this.words[t]<0;t++)this.words[t]+=67108864,this.words[t+1]-=1;return this.strip()},i.prototype.addn=function(e){return this.clone().iaddn(e)},i.prototype.subn=function(e){return this.clone().isubn(e)},i.prototype.iabs=function(){return this.sign=!1,this},i.prototype.abs=function(){return this.clone().iabs()},i.prototype._wordDiv=function(e,t){for(var r=this.length-e.length,n=this.clone(),o=e,s="mod"!==t&&new i(0);n.length>o.length;){var a=67108864*n.words[n.length-1]+n.words[n.length-2],h=a/o.words[o.length-1],c=h/67108864|0,u=67108863&h;h=new i(null),h.words=[u,c],h.length=2;var r=26*(n.length-o.length-1);if(s){var f=h.shln(r);n.sign?s.isub(f):s.iadd(f)}h=h.mul(o).ishln(r),n.sign?n.iadd(h):n.isub(h)}for(;n.ucmp(o)>=0;){var a=n.words[n.length-1],h=new i(a/o.words[o.length-1]|0),r=26*(n.length-o.length);if(s){var f=h.shln(r);n.sign?s.isub(f):s.iadd(f)}h=h.mul(o).ishln(r),n.sign?n.iadd(h):n.isub(h)}return n.sign&&(s&&s.isubn(1),n.iadd(o)),{div:s?s:null,mod:n}},i.prototype.divmod=function(e,t){if(r(0!==e.cmpn(0)),this.sign&&!e.sign){var n,o,s=this.neg().divmod(e,t);return"mod"!==t&&(n=s.div.neg()),"div"!==t&&(o=0===s.mod.cmpn(0)?s.mod:e.sub(s.mod)),{div:n,mod:o}}if(!this.sign&&e.sign){var n,s=this.divmod(e.neg(),t);return"mod"!==t&&(n=s.div.neg()),{div:n,mod:s.mod}}return this.sign&&e.sign?this.neg().divmod(e.neg(),t):e.length>this.length||this.cmp(e)<0?{div:new i(0),mod:this}:1===e.length?"div"===t?{div:this.divn(e.words[0]),mod:null}:"mod"===t?{div:null,mod:new i(this.modn(e.words[0]))}:{div:this.divn(e.words[0]),mod:new i(this.modn(e.words[0]))}:this._wordDiv(e,t)},i.prototype.div=function(e){return this.divmod(e,"div").div},i.prototype.mod=function(e){return this.divmod(e,"mod").mod},i.prototype.divRound=function(e){var t=this.divmod(e);if(0===t.mod.cmpn(0))return t.div;var r=t.div.sign?t.mod.isub(e):t.mod,n=e.shrn(1),i=e.andln(1),o=r.cmp(n);return 0>o||1===i&&0===o?t.div:t.div.sign?t.div.isubn(1):t.div.iaddn(1)},i.prototype.modn=function(e){r(67108863>=e);for(var t=(1<<26)%e,n=0,i=this.length-1;i>=0;i--)n=(t*n+this.words[i])%e;return n},i.prototype.idivn=function(e){r(67108863>=e);for(var t=0,n=this.length-1;n>=0;n--){var i=this.words[n]+67108864*t;this.words[n]=i/e|0,t=i%e}return this.strip()},i.prototype.divn=function(e){return this.clone().idivn(e)},i.prototype._egcd=function(e,t){r(!t.sign),r(0!==t.cmpn(0));var n=this,o=t.clone();n=n.sign?n.mod(t):n.clone();for(var s=new i(0);o.isEven();)o.ishrn(1);for(var a=o.clone();n.cmpn(1)>0&&o.cmpn(1)>0;){for(;n.isEven();)n.ishrn(1),e.isEven()?e.ishrn(1):e.iadd(a).ishrn(1);for(;o.isEven();)o.ishrn(1),s.isEven()?s.ishrn(1):s.iadd(a).ishrn(1);n.cmp(o)>=0?(n.isub(o),e.isub(s)):(o.isub(n),s.isub(e))}return 0===n.cmpn(1)?e:s},i.prototype.gcd=function(e){if(0===this.cmpn(0))return e.clone();if(0===e.cmpn(0))return this.clone();var t=this.clone(),r=e.clone();t.sign=!1,r.sign=!1;for(var n=0;t.isEven()&&r.isEven();n++)t.ishrn(1),r.ishrn(1);for(;t.isEven();)t.ishrn(1);do{for(;r.isEven();)r.ishrn(1);if(t.cmp(r)<0){var i=t;t=r,r=i}t.isub(t.div(r).mul(r))}while(0!==t.cmpn(0)&&0!==r.cmpn(0));return 0===t.cmpn(0)?r.ishln(n):t.ishln(n)},i.prototype.invm=function(e){return this._egcd(new i(1),e).mod(e)},i.prototype.isEven=function(){return 0===(1&this.words[0])},i.prototype.isOdd=function(){return 1===(1&this.words[0])},i.prototype.andln=function(e){return this.words[0]&e},i.prototype.bincn=function(e){r("number"==typeof e);var t=e%26,n=(e-t)/26,i=1<<t;if(this.length<=n){for(var o=this.length;n+1>o;o++)this.words[o]=0;return this.words[n]|=i,this.length=n+1,this}for(var s=i,o=n;0!==s&&o<this.length;o++){var a=this.words[o];a+=s,s=a>>>26,a&=67108863,this.words[o]=a}return 0!==s&&(this.words[o]=s,this.length++),this},i.prototype.cmpn=function(e){var t=0>e;if(t&&(e=-e),this.sign&&!t)return-1;if(!this.sign&&t)return 1;e&=67108863,this.strip();var r;if(this.length>1)r=1;else{var n=this.words[0];r=n===e?0:e>n?-1:1}return this.sign&&(r=-r),r},i.prototype.cmp=function(e){if(this.sign&&!e.sign)return-1;if(!this.sign&&e.sign)return 1;var t=this.ucmp(e);return this.sign?-t:t},i.prototype.ucmp=function(e){if(this.length>e.length)return 1;if(this.length<e.length)return-1;for(var t=0,r=this.length-1;r>=0;r--){var n=this.words[r],i=e.words[r];if(n!==i){i>n?t=-1:n>i&&(t=1);break}}return t},i.red=function(e){return new u(e)},i.prototype.toRed=function(e){return r(!this.red,"Already a number in reduction context"),r(!this.sign,"red works only with positives"),e.convertTo(this)._forceRed(e)},i.prototype.fromRed=function(){return r(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},i.prototype._forceRed=function(e){return this.red=e,this},i.prototype.forceRed=function(e){return r(!this.red,"Already a number in reduction context"),this._forceRed(e)},i.prototype.redAdd=function(e){return r(this.red,"redAdd works only with red numbers"),this.red.add(this,e)},i.prototype.redIAdd=function(e){return r(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,e)},i.prototype.redSub=function(e){return r(this.red,"redSub works only with red numbers"),this.red.sub(this,e)},i.prototype.redISub=function(e){return r(this.red,"redISub works only with red numbers"),this.red.isub(this,e)},i.prototype.redShl=function(e){return r(this.red,"redShl works only with red numbers"),this.red.shl(this,e)},i.prototype.redMul=function(e){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,e),this.red.mul(this,e)},i.prototype.redIMul=function(e){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,e),this.red.imul(this,e)},i.prototype.redSqr=function(){return r(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},i.prototype.redISqr=function(){return r(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},i.prototype.redSqrt=function(){return r(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},i.prototype.redInvm=function(){return r(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},i.prototype.redNeg=function(){return r(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},i.prototype.redPow=function(e){return r(this.red&&!e.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,e)};var b={k256:null,p224:null,p192:null,p25519:null};o.prototype._tmp=function(){var e=new i(null);return e.words=new Array(Math.ceil(this.n/13)),e},o.prototype.ireduce=function(e){var t,r=e;do{var n=r.ishrn(this.n,0,this.tmp);r=this.imulK(n.hi),r=r.iadd(n.lo),t=r.bitLength()}while(t>this.n);var i=t<this.n?-1:r.cmp(this.p);return 0===i?(r.words[0]=0,r.length=1):i>0?r.isub(this.p):r.strip(),r},o.prototype.imulK=function(e){return e.imul(this.k)},n(s,o),s.prototype.imulK=function(e){e.words[e.length]=0,e.words[e.length+1]=0,e.length+=2;for(var t=e.length-3;t>=0;t--){var r=e.words[t],n=64*r,i=977*r;n+=i/67108864|0;var o=n/67108864|0;n&=67108863,i&=67108863,e.words[t+2]+=o,e.words[t+1]+=n,e.words[t]=i}var r=e.words[e.length-2];return r>=67108864&&(e.words[e.length-1]+=r>>>26,e.words[e.length-2]=67108863&r),0===e.words[e.length-1]&&e.length--,0===e.words[e.length-1]&&e.length--,e},n(a,o),n(h,o),n(c,o),c.prototype.imulK=function(e){for(var t=0,r=0;r<e.length;r++){var n=19*e.words[r]+t,i=67108863&n;n>>>=26,e.words[r]=i,t=n}return 0!==t&&(e.words[e.length++]=t),e},i._prime=function e(t){if(b[t])return b[t];var e;if("k256"===t)e=new s;else if("p224"===t)e=new a;else if("p192"===t)e=new h;else{if("p25519"!==t)throw new Error("Unknown prime "+t);e=new c}return b[t]=e,e},u.prototype._verify1=function(e){r(!e.sign,"red works only with positives"),r(e.red,"red works only with red numbers")},u.prototype._verify2=function(e,t){r(!e.sign&&!t.sign,"red works only with positives"),r(e.red&&e.red===t.red,"red works only with red numbers")},u.prototype.imod=function(e){return this.prime?this.prime.ireduce(e)._forceRed(this):e.mod(this.m)._forceRed(this)},u.prototype.neg=function(e){var t=e.clone();return t.sign=!t.sign,t.iadd(this.m)._forceRed(this)},u.prototype.add=function(e,t){this._verify2(e,t);var r=e.add(t);return r.cmp(this.m)>=0&&r.isub(this.m),r._forceRed(this)},u.prototype.iadd=function(e,t){this._verify2(e,t);var r=e.iadd(t);return r.cmp(this.m)>=0&&r.isub(this.m),r},u.prototype.sub=function(e,t){this._verify2(e,t);var r=e.sub(t);return r.cmpn(0)<0&&r.iadd(this.m),r._forceRed(this)},u.prototype.isub=function(e,t){this._verify2(e,t);var r=e.isub(t);return r.cmpn(0)<0&&r.iadd(this.m),r},u.prototype.shl=function(e,t){return this._verify1(e),this.imod(e.shln(t))},u.prototype.imul=function(e,t){return this._verify2(e,t),this.imod(e.imul(t))},u.prototype.mul=function(e,t){return this._verify2(e,t),this.imod(e.mul(t))},u.prototype.isqr=function(e){return this.imul(e,e)},u.prototype.sqr=function(e){return this.mul(e,e)},u.prototype.sqrt=function(e){if(0===e.cmpn(0))return e.clone();var t=this.m.andln(3);if(r(t%2===1),3===t){var n=this.m.add(new i(1)).ishrn(2),o=this.pow(e,n);return o}for(var s=this.m.subn(1),a=0;0!==s.cmpn(0)&&0===s.andln(1);)a++,s.ishrn(1);r(0!==s.cmpn(0));var h=new i(1).toRed(this),c=h.redNeg(),u=this.m.subn(1).ishrn(1),f=this.m.bitLength();for(f=new i(2*f*f).toRed(this);0!==this.pow(f,u).cmp(c);)f.redIAdd(c);for(var d=this.pow(f,s),o=this.pow(e,s.addn(1).ishrn(1)),l=this.pow(e,s),p=a;0!==l.cmp(h);){for(var b=l,g=0;0!==b.cmp(h);g++)b=b.redSqr();r(p>g);var m=this.pow(d,new i(1).ishln(p-g-1));o=o.redMul(m),d=m.redSqr(),l=l.redMul(d),p=g}return o},u.prototype.invm=function(e){var t=e._egcd(new i(1),this.m);return t.sign?(t.sign=!1,this.imod(t).redNeg()):this.imod(t)},u.prototype.pow=function(e,t){for(var r=[],n=t.clone();0!==n.cmpn(0);)r.push(n.andln(1)),n.ishrn(1);for(var i=e,o=0;o<r.length&&0===r[o];o++,i=this.sqr(i));if(++o<r.length)for(var n=this.sqr(i);o<r.length;o++,n=this.sqr(n))0!==r[o]&&(i=this.mul(i,n));return i},u.prototype.convertTo=function(e){return e.clone()},u.prototype.convertFrom=function(e){var t=e.clone();return t.red=null,t},i.mont=function(e){return new f(e)},n(f,u),f.prototype.convertTo=function(e){return this.imod(e.shln(this.shift))},f.prototype.convertFrom=function(e){var t=this.imod(e.mul(this.rinv));return t.red=null,t},f.prototype.imul=function(e,t){if(0===e.cmpn(0)||0===t.cmpn(0))return e.words[0]=0,e.length=1,e;var r=e.imul(t),n=r.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),i=r.isub(n).ishrn(this.shift),o=i;return i.cmp(this.m)>=0?o=i.isub(this.m):i.cmpn(0)<0&&(o=i.iadd(this.m)),o._forceRed(this)},f.prototype.mul=function(e,t){if(0===e.cmpn(0)||0===t.cmpn(0))return new i(0)._forceRed(this);var r=e.mul(t),n=r.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),o=r.isub(n).ishrn(this.shift),s=o;return o.cmp(this.m)>=0?s=o.isub(this.m):o.cmpn(0)<0&&(s=o.iadd(this.m)),s._forceRed(this)},f.prototype.invm=function(e){var t=this.imod(e.invm(this.m).mul(this.r2));return t._forceRed(this)}},{}],82:[function(e,t){(function(r){function n(e,t){var r=o(e,t),n=r.toRed(s.mont(e.modulus)).redPow(new s(e.publicExponent)).fromRed();return{blinder:n,unblinder:r.invm(e.modulus)}}function i(e,t,i){var o=n(t,i),a=t.modulus.byteLength(),h=(s.mont(t.modulus),new s(e).mul(o.blinder).mod(t.modulus)),c=h.toRed(s.mont(t.prime1)),u=h.toRed(s.mont(t.prime2)),f=t.coefficient,d=t.prime1,l=t.prime2,p=c.redPow(t.exponent1),b=u.redPow(t.exponent2);p=p.fromRed(),b=b.fromRed();var g=p.isub(b).imul(f).mod(d);g.imul(l),b.iadd(g);var m=new r(b.imul(o.unblinder).mod(t.modulus).toArray());if(m.length<a){var v=new r(a-m.length);v.fill(0),m=r.concat([v,m],a)}return m}function o(e,t){for(var r=e.modulus.byteLength(),n=new s(t.randomBytes(r));n.cmp(e.modulus)>=0||!n.mod(e.prime1)||!n.mod(e.prime2);)n=new s(t.randomBytes(r));return n}var s=e("bn.js");t.exports=i,i.getr=o}).call(this,e("buffer").Buffer)},{"bn.js":83,buffer:52}],83:[function(e,t){function r(e,t){if(!e)throw new Error(t||"Assertion failed")}function n(e,t){e.super_=t;var r=function(){};r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e}function i(e,t,r){return null!==e&&"object"==typeof e&&Array.isArray(e.words)?e:(this.sign=!1,this.words=null,this.length=0,this.red=null,("le"===t||"be"===t)&&(r=t,t=10),void(null!==e&&this._init(e||0,t||10,r||"be")))}function o(e,t){this.name=e,this.p=new i(t,16),this.n=this.p.bitLength(),this.k=new i(1).ishln(this.n).isub(this.p),this.tmp=this._tmp()}function s(){o.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function a(){o.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function h(){o.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function c(){o.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function u(e){if("string"==typeof e){var t=i._prime(e);this.m=t.p,this.prime=t}else this.m=e,this.prime=null}function f(e){u.call(this,e),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new i(1).ishln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r.invm(this.m),this.minv=this.rinv.mul(this.r).sub(new i(1)).div(this.m).neg().mod(this.r)}"object"==typeof t&&(t.exports=i),i.BN=i,i.wordSize=26,i.prototype._init=function(e,t,n){if("number"==typeof e)return 0>e&&(this.sign=!0,e=-e),void(67108864>e?(this.words=[67108863&e],this.length=1):(this.words=[67108863&e,e/67108864&67108863],this.length=2));if("object"==typeof e)return this._initArray(e,t,n);"hex"===t&&(t=16),r(t===(0|t)&&t>=2&&36>=t),e=e.toString().replace(/\s+/g,"");var i=0;"-"===e[0]&&i++,16===t?this._parseHex(e,i):this._parseBase(e,t,i),"-"===e[0]&&(this.sign=!0),this.strip()},i.prototype._initArray=function(e,t,n){r("number"==typeof e.length),this.length=Math.ceil(e.length/3),this.words=new Array(this.length);for(var i=0;i<this.length;i++)this.words[i]=0;var o=0;if("be"===n)for(var i=e.length-1,s=0;i>=0;i-=3){var a=e[i]|e[i-1]<<8|e[i-2]<<16;this.words[s]|=a<<o&67108863,this.words[s+1]=a>>>26-o&67108863,o+=24,o>=26&&(o-=26,s++)}else if("le"===n)for(var i=0,s=0;i<e.length;i+=3){var a=e[i]|e[i+1]<<8|e[i+2]<<16;this.words[s]|=a<<o&67108863,this.words[s+1]=a>>>26-o&67108863,o+=24,o>=26&&(o-=26,s++)}return this.strip()},i.prototype._parseHex=function(e,t){this.length=Math.ceil((e.length-t)/6),this.words=new Array(this.length);for(var r=0;r<this.length;r++)this.words[r]=0;for(var n=0,r=e.length-6,i=0;r>=t;r-=6){var o=parseInt(e.slice(r,r+6),16);this.words[i]|=o<<n&67108863,this.words[i+1]|=o>>>26-n&4194303,n+=24,n>=26&&(n-=26,i++)}if(r+6!==t){var o=parseInt(e.slice(t,r+6),16);this.words[i]|=o<<n&67108863,this.words[i+1]|=o>>>26-n&4194303}this.strip()},i.prototype._parseBase=function(e,t,n){this.words=[0],this.length=1;for(var o=0,s=1,a=0,h=null,c=n;c<e.length;c++){var u,f=e[c];u=10===t||"9">=f?0|f:f>="a"?f.charCodeAt(0)-97+10:f.charCodeAt(0)-65+10,o*=t,o+=u,s*=t,a++,s>1048575&&(r(67108863>=s),h||(h=new i(s)),this.mul(h).copy(this),this.iadd(new i(o)),o=0,s=1,a=0)}0!==a&&(this.mul(new i(s)).copy(this),this.iadd(new i(o)))},i.prototype.copy=function(e){e.words=new Array(this.length);for(var t=0;t<this.length;t++)e.words[t]=this.words[t];e.length=this.length,e.sign=this.sign,e.red=this.red},i.prototype.clone=function(){var e=new i(null);return this.copy(e),e},i.prototype.strip=function(){for(;this.length>1&&0===this.words[this.length-1];)this.length--;return this._normSign()},i.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.sign=!1),this},i.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var d=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],l=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],p=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];i.prototype.toString=function(e,t){if(e=e||10,16===e||"hex"===e){for(var n="",i=0,t=0|t||1,o=0,s=0;s<this.length;s++){var a=this.words[s],h=(16777215&(a<<i|o)).toString(16);o=a>>>24-i&16777215,n=0!==o||s!==this.length-1?d[6-h.length]+h+n:h+n,i+=2,i>=26&&(i-=26,s--)}for(0!==o&&(n=o.toString(16)+n);n.length%t!==0;)n="0"+n;return this.sign&&(n="-"+n),n}if(e===(0|e)&&e>=2&&36>=e){var c=l[e],u=p[e],n="",f=this.clone();for(f.sign=!1;0!==f.cmpn(0);){var b=f.modn(u).toString(e);f=f.idivn(u),n=0!==f.cmpn(0)?d[c-b.length]+b+n:b+n}return 0===this.cmpn(0)&&(n="0"+n),this.sign&&(n="-"+n),n}r(!1,"Base should be between 2 and 36")},i.prototype.toJSON=function(){return this.toString(16)},i.prototype.toArray=function(){this.strip();var e=new Array(this.byteLength());e[0]=0;for(var t=this.clone(),r=0;0!==t.cmpn(0);r++){var n=t.andln(255);t.ishrn(8),e[e.length-r-1]=n}return e},i.prototype._countBits=function(e){return e>=33554432?26:e>=16777216?25:e>=8388608?24:e>=4194304?23:e>=2097152?22:e>=1048576?21:e>=524288?20:e>=262144?19:e>=131072?18:e>=65536?17:e>=32768?16:e>=16384?15:e>=8192?14:e>=4096?13:e>=2048?12:e>=1024?11:e>=512?10:e>=256?9:e>=128?8:e>=64?7:e>=32?6:e>=16?5:e>=8?4:e>=4?3:e>=2?2:e>=1?1:0},i.prototype.bitLength=function(){var e=0,t=this.words[this.length-1],e=this._countBits(t);return 26*(this.length-1)+e},i.prototype.byteLength=function(){this.words[this.length-1];return Math.ceil(this.bitLength()/8)},i.prototype.neg=function(){if(0===this.cmpn(0))return this.clone();var e=this.clone();return e.sign=!this.sign,e},i.prototype.iadd=function(e){if(this.sign&&!e.sign){this.sign=!1;var t=this.isub(e);return this.sign=!this.sign,this._normSign()}if(!this.sign&&e.sign){e.sign=!1;var t=this.isub(e);return e.sign=!0,t._normSign()}var r,n;this.length>e.length?(r=this,n=e):(r=e,n=this);for(var i=0,o=0;o<n.length;o++){var t=r.words[o]+n.words[o]+i;this.words[o]=67108863&t,i=t>>>26}for(;0!==i&&o<r.length;o++){var t=r.words[o]+i;this.words[o]=67108863&t,i=t>>>26}if(this.length=r.length,0!==i)this.words[this.length]=i,this.length++;else if(r!==this)for(;o<r.length;o++)this.words[o]=r.words[o];return this},i.prototype.add=function(e){if(e.sign&&!this.sign){e.sign=!1;var t=this.sub(e);return e.sign=!0,t}if(!e.sign&&this.sign){this.sign=!1;var t=e.sub(this);return this.sign=!0,t}return this.length>e.length?this.clone().iadd(e):e.clone().iadd(this)},i.prototype.isub=function(e){if(e.sign){e.sign=!1;var t=this.iadd(e);return e.sign=!0,t._normSign()}if(this.sign)return this.sign=!1,this.iadd(e),this.sign=!0,this._normSign();var r=this.cmp(e);if(0===r)return this.sign=!1,this.length=1,this.words[0]=0,this;if(r>0)var n=this,i=e;else var n=e,i=this;for(var o=0,s=0;s<i.length;s++){var t=n.words[s]-i.words[s]-o;0>t?(t+=67108864,o=1):o=0,this.words[s]=t}for(;0!==o&&s<n.length;s++){var t=n.words[s]-o;0>t?(t+=67108864,o=1):o=0,this.words[s]=t}if(0===o&&s<n.length&&n!==this)for(;s<n.length;s++)this.words[s]=n.words[s];return this.length=Math.max(this.length,s),n!==this&&(this.sign=!0),this.strip()},i.prototype.sub=function(e){return this.clone().isub(e)},i.prototype._smallMulTo=function(e,t){t.sign=e.sign!==this.sign,t.length=this.length+e.length;for(var r=0,n=0;n<t.length-1;n++){for(var i=r>>>26,o=67108863&r,s=Math.min(n,e.length-1),a=Math.max(0,n-this.length+1);s>=a;a++){var h=n-a,c=0|this.words[h],u=0|e.words[a],f=c*u,d=67108863&f;i=i+(f/67108864|0)|0,d=d+o|0,o=67108863&d,i=i+(d>>>26)|0}t.words[n]=o,r=i}return 0!==r?t.words[n]=r:t.length--,t.strip()},i.prototype._bigMulTo=function(e,t){t.sign=e.sign!==this.sign,t.length=this.length+e.length;for(var r=0,n=0,i=0;i<t.length-1;i++){var o=n;n=0;for(var s=67108863&r,a=Math.min(i,e.length-1),h=Math.max(0,i-this.length+1);a>=h;h++){var c=i-h,u=0|this.words[c],f=0|e.words[h],d=u*f,l=67108863&d;
o=o+(d/67108864|0)|0,l=l+s|0,s=67108863&l,o=o+(l>>>26)|0,n+=o>>>26,o&=67108863}t.words[i]=s,r=o,o=n}return 0!==r?t.words[i]=r:t.length--,t.strip()},i.prototype.mulTo=function(e,t){var r;return r=this.length+e.length<63?this._smallMulTo(e,t):this._bigMulTo(e,t)},i.prototype.mul=function(e){var t=new i(null);return t.words=new Array(this.length+e.length),this.mulTo(e,t)},i.prototype.imul=function(e){if(0===this.cmpn(0)||0===e.cmpn(0))return this.words[0]=0,this.length=1,this;var t=this.length,r=e.length;this.sign=e.sign!==this.sign,this.length=this.length+e.length,this.words[this.length-1]=0;for(var n=this.length-2;n>=0;n--){for(var i=0,o=0,s=Math.min(n,r-1),a=Math.max(0,n-t+1);s>=a;a++){var h=n-a,c=this.words[h],u=e.words[a],f=c*u,d=67108863&f;i+=f/67108864|0,d+=o,o=67108863&d,i+=d>>>26}this.words[n]=o,this.words[n+1]+=i,i=0}for(var i=0,h=1;h<this.length;h++){var l=this.words[h]+i;this.words[h]=67108863&l,i=l>>>26}return this.strip()},i.prototype.sqr=function(){return this.mul(this)},i.prototype.isqr=function(){return this.mul(this)},i.prototype.ishln=function(e){r("number"==typeof e&&e>=0);{var t=e%26,n=(e-t)/26,i=67108863>>>26-t<<26-t;this.clone()}if(0!==t){for(var o=0,s=0;s<this.length;s++){var a=this.words[s]&i,h=this.words[s]-a<<t;this.words[s]=h|o,o=a>>>26-t}o&&(this.words[s]=o,this.length++)}if(0!==n){for(var s=this.length-1;s>=0;s--)this.words[s+n]=this.words[s];for(var s=0;n>s;s++)this.words[s]=0;this.length+=n}return this.strip()},i.prototype.ishrn=function(e,t,n){r("number"==typeof e&&e>=0),t=t?(t-t%26)/26:0;var i=e%26,o=Math.min((e-i)/26,this.length),s=67108863^67108863>>>i<<i,a=n;if(t-=o,t=Math.max(0,t),a){for(var h=0;o>h;h++)a.words[h]=this.words[h];a.length=o}if(0===o);else if(this.length>o){this.length-=o;for(var h=0;h<this.length;h++)this.words[h]=this.words[h+o]}else this.words[0]=0,this.length=1;for(var c=0,h=this.length-1;h>=0&&(0!==c||h>=t);h--){var u=this.words[h];this.words[h]=c<<26-i|u>>>i,c=u&s}return a&&0!==c&&(a.words[a.length++]=c),0===this.length&&(this.words[0]=0,this.length=1),this.strip(),n?{hi:this,lo:a}:this},i.prototype.shln=function(e){return this.clone().ishln(e)},i.prototype.shrn=function(e){return this.clone().ishrn(e)},i.prototype.testn=function(e){r("number"==typeof e&&e>=0);var t=e%26,n=(e-t)/26,i=1<<t;if(this.length<=n)return!1;var o=this.words[n];return!!(o&i)},i.prototype.imaskn=function(e){r("number"==typeof e&&e>=0);var t=e%26,n=(e-t)/26;if(r(!this.sign,"imaskn works only with positive numbers"),0!==t&&n++,this.length=Math.min(n,this.length),0!==t){var i=67108863^67108863>>>t<<t;this.words[this.length-1]&=i}return this.strip()},i.prototype.maskn=function(e){return this.clone().imaskn(e)},i.prototype.iaddn=function(e){if(r("number"==typeof e),0>e)return this.isubn(-e);if(this.sign)return 1===this.length&&this.words[0]<e?(this.words[0]=e-this.words[0],this.sign=!1,this):(this.sign=!1,this.isubn(e),this.sign=!0,this);this.words[0]+=e;for(var t=0;t<this.length&&this.words[t]>=67108864;t++)this.words[t]-=67108864,t===this.length-1?this.words[t+1]=1:this.words[t+1]++;return this.length=Math.max(this.length,t+1),this},i.prototype.isubn=function(e){if(r("number"==typeof e),0>e)return this.iaddn(-e);if(this.sign)return this.sign=!1,this.iaddn(e),this.sign=!0,this;this.words[0]-=e;for(var t=0;t<this.length&&this.words[t]<0;t++)this.words[t]+=67108864,this.words[t+1]-=1;return this.strip()},i.prototype.addn=function(e){return this.clone().iaddn(e)},i.prototype.subn=function(e){return this.clone().isubn(e)},i.prototype.iabs=function(){return this.sign=!1,this},i.prototype.abs=function(){return this.clone().iabs()},i.prototype._wordDiv=function(e,t){for(var r=this.length-e.length,n=this.clone(),o=e,s="mod"!==t&&new i(0);n.length>o.length;){var a=67108864*n.words[n.length-1]+n.words[n.length-2],h=a/o.words[o.length-1],c=h/67108864|0,u=67108863&h;h=new i(null),h.words=[u,c],h.length=2;var r=26*(n.length-o.length-1);if(s){var f=h.shln(r);n.sign?s.isub(f):s.iadd(f)}h=h.mul(o).ishln(r),n.sign?n.iadd(h):n.isub(h)}for(;n.ucmp(o)>=0;){var a=n.words[n.length-1],h=new i(a/o.words[o.length-1]|0),r=26*(n.length-o.length);if(s){var f=h.shln(r);n.sign?s.isub(f):s.iadd(f)}h=h.mul(o).ishln(r),n.sign?n.iadd(h):n.isub(h)}return n.sign&&(s&&s.isubn(1),n.iadd(o)),{div:s?s:null,mod:n}},i.prototype.divmod=function(e,t){if(r(0!==e.cmpn(0)),this.sign&&!e.sign){var n,o,s=this.neg().divmod(e,t);return"mod"!==t&&(n=s.div.neg()),"div"!==t&&(o=0===s.mod.cmpn(0)?s.mod:e.sub(s.mod)),{div:n,mod:o}}if(!this.sign&&e.sign){var n,s=this.divmod(e.neg(),t);return"mod"!==t&&(n=s.div.neg()),{div:n,mod:s.mod}}return this.sign&&e.sign?this.neg().divmod(e.neg(),t):e.length>this.length||this.cmp(e)<0?{div:new i(0),mod:this}:1===e.length?"div"===t?{div:this.divn(e.words[0]),mod:null}:"mod"===t?{div:null,mod:new i(this.modn(e.words[0]))}:{div:this.divn(e.words[0]),mod:new i(this.modn(e.words[0]))}:this._wordDiv(e,t)},i.prototype.div=function(e){return this.divmod(e,"div").div},i.prototype.mod=function(e){return this.divmod(e,"mod").mod},i.prototype.divRound=function(e){var t=this.divmod(e);if(0===t.mod.cmpn(0))return t.div;var r=t.div.sign?t.mod.isub(e):t.mod,n=e.shrn(1),i=e.andln(1),o=r.cmp(n);return 0>o||1===i&&0===o?t.div:t.div.sign?t.div.isubn(1):t.div.iaddn(1)},i.prototype.modn=function(e){r(67108863>=e);for(var t=(1<<26)%e,n=0,i=this.length-1;i>=0;i--)n=(t*n+this.words[i])%e;return n},i.prototype.idivn=function(e){r(67108863>=e);for(var t=0,n=this.length-1;n>=0;n--){var i=this.words[n]+67108864*t;this.words[n]=i/e|0,t=i%e}return this.strip()},i.prototype.divn=function(e){return this.clone().idivn(e)},i.prototype._egcd=function(e,t){r(!t.sign),r(0!==t.cmpn(0));var n=this,o=t.clone();n=n.sign?n.mod(t):n.clone();for(var s=new i(0);o.isEven();)o.ishrn(1);for(var a=o.clone();n.cmpn(1)>0&&o.cmpn(1)>0;){for(;n.isEven();)n.ishrn(1),e.isEven()?e.ishrn(1):e.iadd(a).ishrn(1);for(;o.isEven();)o.ishrn(1),s.isEven()?s.ishrn(1):s.iadd(a).ishrn(1);n.cmp(o)>=0?(n.isub(o),e.isub(s)):(o.isub(n),s.isub(e))}return 0===n.cmpn(1)?e:s},i.prototype.gcd=function(e){if(0===this.cmpn(0))return e.clone();if(0===e.cmpn(0))return this.clone();var t=this.clone(),r=e.clone();t.sign=!1,r.sign=!1;for(var n=0;t.isEven()&&r.isEven();n++)t.ishrn(1),r.ishrn(1);for(;t.isEven();)t.ishrn(1);do{for(;r.isEven();)r.ishrn(1);if(t.cmp(r)<0){var i=t;t=r,r=i}t.isub(t.div(r).mul(r))}while(0!==t.cmpn(0)&&0!==r.cmpn(0));return 0===t.cmpn(0)?r.ishln(n):t.ishln(n)},i.prototype.invm=function(e){return this._egcd(new i(1),e).mod(e)},i.prototype.isEven=function(){return 0===(1&this.words[0])},i.prototype.isOdd=function(){return 1===(1&this.words[0])},i.prototype.andln=function(e){return this.words[0]&e},i.prototype.bincn=function(e){r("number"==typeof e);var t=e%26,n=(e-t)/26,i=1<<t;if(this.length<=n){for(var o=this.length;n+1>o;o++)this.words[o]=0;return this.words[n]|=i,this.length=n+1,this}for(var s=i,o=n;0!==s&&o<this.length;o++){var a=this.words[o];a+=s,s=a>>>26,a&=67108863,this.words[o]=a}return 0!==s&&(this.words[o]=s,this.length++),this},i.prototype.cmpn=function(e){var t=0>e;if(t&&(e=-e),this.sign&&!t)return-1;if(!this.sign&&t)return 1;e&=67108863,this.strip();var r;if(this.length>1)r=1;else{var n=this.words[0];r=n===e?0:e>n?-1:1}return this.sign&&(r=-r),r},i.prototype.cmp=function(e){if(this.sign&&!e.sign)return-1;if(!this.sign&&e.sign)return 1;var t=this.ucmp(e);return this.sign?-t:t},i.prototype.ucmp=function(e){if(this.length>e.length)return 1;if(this.length<e.length)return-1;for(var t=0,r=this.length-1;r>=0;r--){var n=this.words[r],i=e.words[r];if(n!==i){i>n?t=-1:n>i&&(t=1);break}}return t},i.red=function(e){return new u(e)},i.prototype.toRed=function(e){return r(!this.red,"Already a number in reduction context"),r(!this.sign,"red works only with positives"),e.convertTo(this)._forceRed(e)},i.prototype.fromRed=function(){return r(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},i.prototype._forceRed=function(e){return this.red=e,this},i.prototype.forceRed=function(e){return r(!this.red,"Already a number in reduction context"),this._forceRed(e)},i.prototype.redAdd=function(e){return r(this.red,"redAdd works only with red numbers"),this.red.add(this,e)},i.prototype.redIAdd=function(e){return r(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,e)},i.prototype.redSub=function(e){return r(this.red,"redSub works only with red numbers"),this.red.sub(this,e)},i.prototype.redISub=function(e){return r(this.red,"redISub works only with red numbers"),this.red.isub(this,e)},i.prototype.redShl=function(e){return r(this.red,"redShl works only with red numbers"),this.red.shl(this,e)},i.prototype.redMul=function(e){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,e),this.red.mul(this,e)},i.prototype.redIMul=function(e){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,e),this.red.imul(this,e)},i.prototype.redSqr=function(){return r(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},i.prototype.redISqr=function(){return r(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},i.prototype.redSqrt=function(){return r(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},i.prototype.redInvm=function(){return r(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},i.prototype.redNeg=function(){return r(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},i.prototype.redPow=function(e){return r(this.red&&!e.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,e)};var b={k256:null,p224:null,p192:null,p25519:null};o.prototype._tmp=function(){var e=new i(null);return e.words=new Array(Math.ceil(this.n/13)),e},o.prototype.ireduce=function(e){var t,r=e;do{var n=r.ishrn(this.n,0,this.tmp);r=this.imulK(n.hi),r=r.iadd(n.lo),t=r.bitLength()}while(t>this.n);var i=t<this.n?-1:r.cmp(this.p);return 0===i?(r.words[0]=0,r.length=1):i>0?r.isub(this.p):r.strip(),r},o.prototype.imulK=function(e){return e.imul(this.k)},n(s,o),s.prototype.imulK=function(e){e.words[e.length]=0,e.words[e.length+1]=0,e.length+=2;for(var t=e.length-3;t>=0;t--){var r=e.words[t],n=64*r,i=977*r;n+=i/67108864|0;var o=n/67108864|0;n&=67108863,i&=67108863,e.words[t+2]+=o,e.words[t+1]+=n,e.words[t]=i}var r=e.words[e.length-2];return r>=67108864&&(e.words[e.length-1]+=r>>>26,e.words[e.length-2]=67108863&r),0===e.words[e.length-1]&&e.length--,0===e.words[e.length-1]&&e.length--,e},n(a,o),n(h,o),n(c,o),c.prototype.imulK=function(e){for(var t=0,r=0;r<e.length;r++){var n=19*e.words[r]+t,i=67108863&n;n>>>=26,e.words[r]=i,t=n}return 0!==t&&(e.words[e.length++]=t),e},i._prime=function e(t){if(b[t])return b[t];var e;if("k256"===t)e=new s;else if("p224"===t)e=new a;else if("p192"===t)e=new h;else{if("p25519"!==t)throw new Error("Unknown prime "+t);e=new c}return b[t]=e,e},u.prototype._verify1=function(e){r(!e.sign,"red works only with positives"),r(e.red,"red works only with red numbers")},u.prototype._verify2=function(e,t){r(!e.sign&&!t.sign,"red works only with positives"),r(e.red&&e.red===t.red,"red works only with red numbers")},u.prototype.imod=function(e){return this.prime?this.prime.ireduce(e)._forceRed(this):e.mod(this.m)._forceRed(this)},u.prototype.neg=function(e){var t=e.clone();return t.sign=!t.sign,t.iadd(this.m)._forceRed(this)},u.prototype.add=function(e,t){this._verify2(e,t);var r=e.add(t);return r.cmp(this.m)>=0&&r.isub(this.m),r._forceRed(this)},u.prototype.iadd=function(e,t){this._verify2(e,t);var r=e.iadd(t);return r.cmp(this.m)>=0&&r.isub(this.m),r},u.prototype.sub=function(e,t){this._verify2(e,t);var r=e.sub(t);return r.cmpn(0)<0&&r.iadd(this.m),r._forceRed(this)},u.prototype.isub=function(e,t){this._verify2(e,t);var r=e.isub(t);return r.cmpn(0)<0&&r.iadd(this.m),r},u.prototype.shl=function(e,t){return this._verify1(e),this.imod(e.shln(t))},u.prototype.imul=function(e,t){return this._verify2(e,t),this.imod(e.imul(t))},u.prototype.mul=function(e,t){return this._verify2(e,t),this.imod(e.mul(t))},u.prototype.isqr=function(e){return this.imul(e,e)},u.prototype.sqr=function(e){return this.mul(e,e)},u.prototype.sqrt=function(e){if(0===e.cmpn(0))return e.clone();var t=this.m.andln(3);if(r(t%2===1),3===t){var n=this.m.add(new i(1)).ishrn(2),o=this.pow(e,n);return o}for(var s=this.m.subn(1),a=0;0!==s.cmpn(0)&&0===s.andln(1);)a++,s.ishrn(1);r(0!==s.cmpn(0));var h=new i(1).toRed(this),c=h.redNeg(),u=this.m.subn(1).ishrn(1),f=this.m.bitLength();for(f=new i(2*f*f).toRed(this);0!==this.pow(f,u).cmp(c);)f.redIAdd(c);for(var d=this.pow(f,s),o=this.pow(e,s.addn(1).ishrn(1)),l=this.pow(e,s),p=a;0!==l.cmp(h);){for(var b=l,g=0;0!==b.cmp(h);g++)b=b.redSqr();r(p>g);var m=this.pow(d,new i(1).ishln(p-g-1));o=o.redMul(m),d=m.redSqr(),l=l.redMul(d),p=g}return o},u.prototype.invm=function(e){var t=e._egcd(new i(1),this.m);return t.sign?(t.sign=!1,this.imod(t).redNeg()):this.imod(t)},u.prototype.pow=function(e,t){for(var r=[],n=t.clone();0!==n.cmpn(0);)r.push(n.andln(1)),n.ishrn(1);for(var i=e,o=0;o<r.length&&0===r[o];o++,i=this.sqr(i));if(++o<r.length)for(var n=this.sqr(i);o<r.length;o++,n=this.sqr(n))0!==r[o]&&(i=this.mul(i,n));return i},u.prototype.convertTo=function(e){return e.clone()},u.prototype.convertFrom=function(e){var t=e.clone();return t.red=null,t},i.mont=function(e){return new f(e)},n(f,u),f.prototype.convertTo=function(e){return this.imod(e.shln(this.shift))},f.prototype.convertFrom=function(e){var t=this.imod(e.mul(this.rinv));return t.red=null,t},f.prototype.imul=function(e,t){if(0===e.cmpn(0)||0===t.cmpn(0))return e.words[0]=0,e.length=1,e;var r=e.imul(t),n=r.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),i=r.isub(n).ishrn(this.shift),o=i;return i.cmp(this.m)>=0?o=i.isub(this.m):i.cmpn(0)<0&&(o=i.iadd(this.m)),o._forceRed(this)},f.prototype.mul=function(e,t){if(0===e.cmpn(0)||0===t.cmpn(0))return new i(0)._forceRed(this);var r=e.mul(t),n=r.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),o=r.isub(n).ishrn(this.shift),s=o;return o.cmp(this.m)>=0?s=o.isub(this.m):o.cmpn(0)<0&&(s=o.iadd(this.m)),s._forceRed(this)},f.prototype.invm=function(e){var t=this.imod(e.invm(this.m).mul(this.r2));return t._forceRed(this)}},{}],84:[function(e,t,r){var n=r;n.version=e("../package.json").version,n.utils=e("./elliptic/utils"),n.rand=e("brorand"),n.hmacDRBG=e("./elliptic/hmac-drbg"),n.curve=e("./elliptic/curve"),n.curves=e("./elliptic/curves"),n.ec=e("./elliptic/ec")},{"../package.json":103,"./elliptic/curve":87,"./elliptic/curves":90,"./elliptic/ec":91,"./elliptic/hmac-drbg":94,"./elliptic/utils":95,brorand:96}],85:[function(e,t){function r(e,t){this.type=e,this.p=new o(t.p,16),this.red=t.prime?o.red(t.prime):o.mont(this.p),this.zero=new o(0).toRed(this.red),this.one=new o(1).toRed(this.red),this.two=new o(2).toRed(this.red),this.n=t.n&&new o(t.n,16),this.g=t.g&&this.pointFromJSON(t.g,t.gRed),this._wnafT1=new Array(4),this._wnafT2=new Array(4),this._wnafT3=new Array(4),this._wnafT4=new Array(4)}function n(e,t){this.curve=e,this.type=t,this.precomputed=null}var i=e("assert"),o=e("bn.js"),s=e("../../elliptic"),a=s.utils.getNAF,h=s.utils.getJSF;t.exports=r,r.prototype.point=function(){throw new Error("Not implemented")},r.prototype.validate=function(){throw new Error("Not implemented")},r.prototype._fixedNafMul=function(e,t){var r=e._getDoubles(),n=a(t,1),i=(1<<r.step+1)-(r.step%2===0?2:1);i/=3;for(var o=[],s=0;s<n.length;s+=r.step){for(var h=0,t=s+r.step-1;t>=s;t--)h=(h<<1)+n[t];o.push(h)}for(var c=this.jpoint(null,null,null),u=this.jpoint(null,null,null),f=i;f>0;f--){for(var s=0;s<o.length;s++){var h=o[s];h===f?u=u.mixedAdd(r.points[s]):h===-f&&(u=u.mixedAdd(r.points[s].neg()))}c=c.add(u)}return c.toP()},r.prototype._wnafMul=function(e,t){var r=4,n=e._getNAFPoints(r);r=n.wnd;for(var o=n.points,s=a(t,r),h=this.jpoint(null,null,null),c=s.length-1;c>=0;c--){for(var t=0;c>=0&&0===s[c];c--)t++;if(c>=0&&t++,h=h.dblp(t),0>c)break;var u=s[c];i(0!==u),h="affine"===e.type?h.mixedAdd(u>0?o[u-1>>1]:o[-u-1>>1].neg()):h.add(u>0?o[u-1>>1]:o[-u-1>>1].neg())}return"affine"===e.type?h.toP():h},r.prototype._wnafMulAdd=function(e,t,r,n){for(var i=this._wnafT1,o=this._wnafT2,s=this._wnafT3,c=0,u=0;n>u;u++){var f=t[u],d=f._getNAFPoints(e);i[u]=d.wnd,o[u]=d.points}for(var u=n-1;u>=1;u-=2){var l=u-1,p=u;if(1===i[l]&&1===i[p]){var b=[t[l],null,null,t[p]];0===t[l].y.cmp(t[p].y)?(b[1]=t[l].add(t[p]),b[2]=t[l].toJ().mixedAdd(t[p].neg())):0===t[l].y.cmp(t[p].y.redNeg())?(b[1]=t[l].toJ().mixedAdd(t[p]),b[2]=t[l].add(t[p].neg())):(b[1]=t[l].toJ().mixedAdd(t[p]),b[2]=t[l].toJ().mixedAdd(t[p].neg()));var g=[-3,-1,-5,-7,0,7,5,1,3],m=h(r[l],r[p]);c=Math.max(m[0].length,c),s[l]=new Array(c),s[p]=new Array(c);for(var v=0;c>v;v++){var y=0|m[0][v],w=0|m[1][v];s[l][v]=g[3*(y+1)+(w+1)],s[p][v]=0,o[l]=b}}else s[l]=a(r[l],i[l]),s[p]=a(r[p],i[p]),c=Math.max(s[l].length,c),c=Math.max(s[p].length,c)}for(var _=this.jpoint(null,null,null),x=this._wnafT4,u=c;u>=0;u--){for(var S=0;u>=0;){for(var T=!0,v=0;n>v;v++)x[v]=0|s[v][u],0!==x[v]&&(T=!1);if(!T)break;S++,u--}if(u>=0&&S++,_=_.dblp(S),0>u)break;for(var v=0;n>v;v++){var f,A=x[v];0!==A&&(A>0?f=o[v][A-1>>1]:0>A&&(f=o[v][-A-1>>1].neg()),_="affine"===f.type?_.mixedAdd(f):_.add(f))}}for(var u=0;n>u;u++)o[u]=null;return _.toP()},r.BasePoint=n,n.prototype.validate=function(){return this.curve.validate(this)},n.prototype.precompute=function(e){if(this.precomputed)return this;var t={doubles:null,naf:null,beta:null};return t.naf=this._getNAFPoints(8),t.doubles=this._getDoubles(4,e),t.beta=this._getBeta(),this.precomputed=t,this},n.prototype._getDoubles=function(e,t){if(this.precomputed&&this.precomputed.doubles)return this.precomputed.doubles;for(var r=[this],n=this,i=0;t>i;i+=e){for(var o=0;e>o;o++)n=n.dbl();r.push(n)}return{step:e,points:r}},n.prototype._getNAFPoints=function(e){if(this.precomputed&&this.precomputed.naf)return this.precomputed.naf;for(var t=[this],r=(1<<e)-1,n=1===r?null:this.dbl(),i=1;r>i;i++)t[i]=t[i-1].add(n);return{wnd:e,points:t}},n.prototype._getBeta=function(){return null},n.prototype.dblp=function(e){for(var t=this,r=0;e>r;r++)t=t.dbl();return t}},{"../../elliptic":84,assert:50,"bn.js":81}],86:[function(e,t){function r(e){this.twisted=1!=e.a,this.mOneA=this.twisted&&-1==e.a,this.extended=this.mOneA,c.call(this,"mont",e),this.a=new a(e.a,16).mod(this.red.m).toRed(this.red),this.c=new a(e.c,16).toRed(this.red),this.c2=this.c.redSqr(),this.d=new a(e.d,16).toRed(this.red),this.dd=this.d.redAdd(this.d),i(!this.twisted||0===this.c.fromRed().cmpn(1)),this.oneC=1==e.c}function n(e,t,r,n,i){c.BasePoint.call(this,e,"projective"),null===t&&null===r&&null===n?(this.x=this.curve.zero,this.y=this.curve.one,this.z=this.curve.one,this.t=this.curve.zero,this.zOne=!0):(this.x=new a(t,16),this.y=new a(r,16),this.z=n?new a(n,16):this.curve.one,this.t=i&&new a(i,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.t&&!this.t.red&&(this.t=this.t.toRed(this.curve.red)),this.zOne=this.z===this.curve.one,this.curve.extended&&!this.t&&(this.t=this.x.redMul(this.y),this.zOne||(this.t=this.t.redMul(this.z.redInvm()))))}{var i=e("assert"),o=e("../curve"),s=e("../../elliptic"),a=e("bn.js"),h=e("inherits"),c=o.base;s.utils.getNAF}h(r,c),t.exports=r,r.prototype._mulA=function(e){return this.mOneA?e.redNeg():this.a.redMul(e)},r.prototype._mulC=function(e){return this.oneC?e:this.c.redMul(e)},r.prototype.point=function(e,t,r,i){return new n(this,e,t,r,i)},r.prototype.jpoint=function(e,t,r,n){return this.point(e,t,r,n)},r.prototype.pointFromJSON=function(e){return n.fromJSON(this,e)},r.prototype.pointFromX=function(e,t){t=new a(t,16),t.red||(t=t.toRed(this.red));var r=t.redSqr(),n=this.c2.redSub(this.a.redMul(r)),i=this.one.redSub(this.c2.redMul(this.d).redMul(r)),s=n.redMul(i.redInvm()).redSqrt(),h=s.fromRed().isOdd();return(e&&!h||!e&&h)&&(s=s.redNeg()),this.point(t,s,o.one)},r.prototype.validate=function(e){if(e.isInfinity())return!0;e.normalize();var t=e.x.redSqr(),r=e.y.redSqr(),n=t.redMul(this.a).redAdd(r),i=this.c2.redMul(this.one.redAdd(this.d.redMul(t).redMul(r)));return 0===n.cmp(i)},h(n,c.BasePoint),n.fromJSON=function(e,t){return new n(e,t[0],t[1],t[2])},n.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"},n.prototype.isInfinity=function(){return 0===this.x.cmpn(0)&&0===this.y.cmp(this.z)},n.prototype._extDbl=function(){var e=this.x.redSqr(),t=this.y.redSqr(),r=this.z.redSqr();r=r.redIAdd(r);var n=this.curve._mulA(e),i=this.x.redAdd(this.y).redSqr().redISub(e).redISub(t),o=n.redAdd(t),s=o.redSub(r),a=n.redSub(t),h=i.redMul(s),c=o.redMul(a),u=i.redMul(a),f=s.redMul(o);return this.curve.point(h,c,f,u)},n.prototype._projDbl=function(){var e=this.x.redAdd(this.y).redSqr(),t=this.x.redSqr(),r=this.y.redSqr();if(this.curve.twisted){var n=this.curve._mulA(t),i=n.redAdd(r);if(this.zOne)var o=e.redSub(t).redSub(r).redMul(i.redSub(this.curve.two)),s=i.redMul(n.redSub(r)),a=i.redSqr().redSub(i).redSub(i);else var h=this.z.redSqr(),c=i.redSub(h).redISub(h),o=e.redSub(t).redISub(r).redMul(c),s=i.redMul(n.redSub(r)),a=i.redMul(c)}else var n=t.redAdd(r),h=this.curve._mulC(redMul(this.z)).redSqr(),c=n.redSub(h).redSub(h),o=this.curve._mulC(e.redISub(n)).redMul(c),s=this.curve._mulC(n).redMul(t.redISub(r)),a=n.redMul(c);return this.curve.point(o,s,a)},n.prototype.dbl=function(){return this.isInfinity()?this:this.curve.extended?this._extDbl():this._projDbl()},n.prototype._extAdd=function(e){var t=this.y.redSub(this.x).redMul(e.y.redSub(e.x)),r=this.y.redAdd(this.x).redMul(e.y.redAdd(e.x)),n=this.t.redMul(this.curve.dd).redMul(e.t),i=this.z.redMul(e.z.redAdd(e.z)),o=r.redSub(t),s=i.redSub(n),a=i.redAdd(n),h=r.redAdd(t),c=o.redMul(s),u=a.redMul(h),f=o.redMul(h),d=s.redMul(a);return this.curve.point(c,u,d,f)},n.prototype._projAdd=function(e){var t=this.z.redMul(e.z),r=t.redSqr(),n=this.x.redMul(e.x),i=this.y.redMul(e.y),o=this.curve.d.redMul(n).redMul(i),s=r.redSub(o),a=r.redAdd(o),h=this.x.redAdd(this.y).redMul(e.x.redAdd(e.y)).redISub(n).redISub(i),c=t.redMul(s).redMul(h);if(this.curve.twisted)var u=t.redMul(a).redMul(i.redSub(this.curve._mulA(n))),f=s.redMul(a);else var u=t.redMul(a).redMul(i.redSub(n)),f=this.curve._mulC(s).redMul(a);return this.curve.point(c,u,f)},n.prototype.add=function(e){return this.isInfinity()?e:e.isInfinity()?this:this.curve.extended?this._extAdd(e):this._projAdd(e)},n.prototype.mul=function(e){return this.precomputed&&this.precomputed.doubles?this.curve._fixedNafMul(this,e):this.curve._wnafMul(this,e)},n.prototype.mulAdd=function(e,t,r){return this.curve._wnafMulAdd(1,[this,t],[e,r],2)},n.prototype.normalize=function(){if(this.zOne)return this;var e=this.z.redInvm();return this.x=this.x.redMul(e),this.y=this.y.redMul(e),this.t&&(this.t=this.t.redMul(e)),this.z=this.curve.one,this.zOne=!0,this},n.prototype.neg=function(){return this.curve.point(this.x.redNeg(),this.y,this.z,this.t&&this.t.redNeg())},n.prototype.getX=function(){return this.normalize(),this.x.fromRed()},n.prototype.getY=function(){return this.normalize(),this.y.fromRed()},n.prototype.toP=n.prototype.normalize,n.prototype.mixedAdd=n.prototype.add},{"../../elliptic":84,"../curve":87,assert:50,"bn.js":81,inherits:195}],87:[function(e,t,r){var n=r;n.base=e("./base"),n.short=e("./short"),n.mont=e("./mont"),n.edwards=e("./edwards")},{"./base":85,"./edwards":86,"./mont":88,"./short":89}],88:[function(e,t){function r(e){h.call(this,"mont",e),this.a=new s(e.a,16).toRed(this.red),this.b=new s(e.b,16).toRed(this.red),this.i4=new s(4).toRed(this.red).redInvm(),this.two=new s(2).toRed(this.red),this.a24=this.i4.redMul(this.a.redAdd(this.two))}function n(e,t,r){h.BasePoint.call(this,e,"projective"),null===t&&null===r?(this.x=this.curve.one,this.z=this.curve.zero):(this.x=new s(t,16),this.z=new s(r,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)))}{var i=(e("assert"),e("../curve")),o=e("../../elliptic"),s=e("bn.js"),a=e("inherits"),h=i.base;o.utils.getNAF}a(r,h),t.exports=r,r.prototype.point=function(e,t){return new n(this,e,t)},r.prototype.pointFromJSON=function(e){return n.fromJSON(this,e)},r.prototype.validate=function(e){var t=e.normalize().x,r=t.redSqr(),n=r.redMul(t).redAdd(r.redMul(this.a)).redAdd(t),i=n.redSqrt();return 0===i.redSqr().cmp(n)},a(n,h.BasePoint),n.prototype.precompute=function(){},n.fromJSON=function(e,t){return new n(e,t[0],t[1]||e.one)},n.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"},n.prototype.isInfinity=function(){return 0===this.z.cmpn(0)},n.prototype.dbl=function(){var e=this.x.redAdd(this.z),t=e.redSqr(),r=this.x.redSub(this.z),n=r.redSqr(),i=t.redSub(n),o=t.redMul(n),s=i.redMul(n.redAdd(this.curve.a24.redMul(i)));return this.curve.point(o,s)},n.prototype.add=function(){throw new Error("Not supported on Montgomery curve")},n.prototype.diffAdd=function(e,t){var r=this.x.redAdd(this.z),n=this.x.redSub(this.z),i=e.x.redAdd(e.z),o=e.x.redSub(e.z),s=o.redMul(r),a=i.redMul(n),h=t.z.redMul(s.redAdd(a).redSqr()),c=t.x.redMul(s.redISub(a).redSqr());return this.curve.point(h,c)},n.prototype.mul=function(e){for(var t=e.clone(),r=this,n=this.curve.point(null,null),i=this,o=[];0!==t.cmpn(0);t.ishrn(1))o.push(t.andln(1));for(var s=o.length-1;s>=0;s--)0===o[s]?(r=r.diffAdd(n,i),n=n.dbl()):(n=r.diffAdd(n,i),r=r.dbl());return n},n.prototype.mulAdd=function(){throw new Error("Not supported on Montgomery curve")},n.prototype.normalize=function(){return this.x=this.x.redMul(this.z.redInvm()),this.z=this.curve.one,this},n.prototype.getX=function(){return this.normalize(),this.x.fromRed()}},{"../../elliptic":84,"../curve":87,assert:50,"bn.js":81,inherits:195}],89:[function(e,t){function r(e){u.call(this,"short",e),this.a=new h(e.a,16).toRed(this.red),this.b=new h(e.b,16).toRed(this.red),this.tinv=this.two.redInvm(),this.zeroA=0===this.a.fromRed().cmpn(0),this.threeA=0===this.a.fromRed().sub(this.p).cmpn(-3),this.endo=this._getEndomorphism(e),this._endoWnafT1=new Array(4),this._endoWnafT2=new Array(4)}function n(e,t,r,n){u.BasePoint.call(this,e,"affine"),null===t&&null===r?(this.x=null,this.y=null,this.inf=!0):(this.x=new h(t,16),this.y=new h(r,16),n&&(this.x.forceRed(this.curve.red),this.y.forceRed(this.curve.red)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.inf=!1)}function i(e,t,r,n){u.BasePoint.call(this,e,"jacobian"),null===t&&null===r&&null===n?(this.x=this.curve.one,this.y=this.curve.one,this.z=new h(0)):(this.x=new h(t,16),this.y=new h(r,16),this.z=new h(n,16)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.zOne=this.z===this.curve.one}{var o=e("assert"),s=e("../curve"),a=e("../../elliptic"),h=e("bn.js"),c=e("inherits"),u=s.base;a.utils.getNAF}c(r,u),t.exports=r,r.prototype._getEndomorphism=function(e){if(this.zeroA&&this.g&&this.n&&1===this.p.modn(3)){var t,r;if(e.beta)t=new h(e.beta,16).toRed(this.red);else{var n=this._getEndoRoots(this.p);t=n[0].cmp(n[1])<0?n[0]:n[1],t=t.toRed(this.red)}if(e.lambda)r=new h(e.lambda,16);else{var i=this._getEndoRoots(this.n);0===this.g.mul(i[0]).x.cmp(this.g.x.redMul(t))?r=i[0]:(r=i[1],o(0===this.g.mul(r).x.cmp(this.g.x.redMul(t))))}var s;return s=e.basis?e.basis.map(function(e){return{a:new h(e.a,16),b:new h(e.b,16)}}):this._getEndoBasis(r),{beta:t,lambda:r,basis:s}}},r.prototype._getEndoRoots=function(e){var t=e===this.p?this.red:h.mont(e),r=new h(2).toRed(t).redInvm(),n=r.redNeg(),i=(new h(1).toRed(t),new h(3).toRed(t).redNeg().redSqrt().redMul(r)),o=n.redAdd(i).fromRed(),s=n.redSub(i).fromRed();return[o,s]},r.prototype._getEndoBasis=function(e){for(var t,r,n,i,o,s,a,c=this.n.shrn(Math.floor(this.n.bitLength()/2)),u=e,f=this.n.clone(),d=new h(1),l=new h(0),p=new h(0),b=new h(1),g=0;0!==u.cmpn(0);){var m=f.div(u),v=f.sub(m.mul(u)),y=p.sub(m.mul(d)),w=b.sub(m.mul(l));if(!n&&v.cmp(c)<0)t=a.neg(),r=d,n=v.neg(),i=y;else if(n&&2===++g)break;a=v,f=u,u=v,p=d,d=y,b=l,l=w}o=v.neg(),s=y;var _=n.sqr().add(i.sqr()),x=o.sqr().add(s.sqr());return x.cmp(_)>=0&&(o=t,s=r),n.sign&&(n=n.neg(),i=i.neg()),o.sign&&(o=o.neg(),s=s.neg()),[{a:n,b:i},{a:o,b:s}]},r.prototype._endoSplit=function(e){var t=this.endo.basis,r=t[0],n=t[1],i=n.b.mul(e).divRound(this.n),o=r.b.neg().mul(e).divRound(this.n),s=i.mul(r.a),a=o.mul(n.a),h=i.mul(r.b),c=o.mul(n.b),u=e.sub(s).sub(a),f=h.add(c).neg();return{k1:u,k2:f}},r.prototype.point=function(e,t,r){return new n(this,e,t,r)},r.prototype.pointFromX=function(e,t){t=new h(t,16),t.red||(t=t.toRed(this.red));var r=t.redSqr().redMul(t).redIAdd(t.redMul(this.a)).redIAdd(this.b),n=r.redSqrt(),i=n.fromRed().isOdd();return(e&&!i||!e&&i)&&(n=n.redNeg()),this.point(t,n)},r.prototype.jpoint=function(e,t,r){return new i(this,e,t,r)},r.prototype.pointFromJSON=function(e,t){return n.fromJSON(this,e,t)},r.prototype.validate=function(e){if(e.inf)return!0;var t=e.x,r=e.y,n=this.a.redMul(t),i=t.redSqr().redMul(t).redIAdd(n).redIAdd(this.b);return 0===r.redSqr().redISub(i).cmpn(0)},r.prototype._endoWnafMulAdd=function(e,t){for(var r=this._endoWnafT1,n=this._endoWnafT2,i=0;i<e.length;i++){var o=this._endoSplit(t[i]),s=e[i],a=s._getBeta();o.k1.sign&&(o.k1.sign=!o.k1.sign,s=s.neg(!0)),o.k2.sign&&(o.k2.sign=!o.k2.sign,a=a.neg(!0)),r[2*i]=s,r[2*i+1]=a,n[2*i]=o.k1,n[2*i+1]=o.k2}for(var h=this._wnafMulAdd(1,r,n,2*i),c=0;2*i>c;c++)r[c]=null,n[c]=null;return h},c(n,u.BasePoint),n.prototype._getBeta=function(){function e(e){return n.point(e.x.redMul(n.endo.beta),e.y)}if(this.curve.endo){var t=this.precomputed;if(t&&t.beta)return t.beta;var r=this.curve.point(this.x.redMul(this.curve.endo.beta),this.y);if(t){var n=this.curve;t.beta=r,r.precomputed={beta:null,naf:t.naf&&{wnd:t.naf.wnd,points:t.naf.points.map(e)},doubles:t.doubles&&{step:t.doubles.step,points:t.doubles.points.map(e)}}}return r}},n.prototype.toJSON=function(){return this.precomputed?[this.x,this.y,this.precomputed&&{doubles:this.precomputed.doubles&&{step:this.precomputed.doubles.step,points:this.precomputed.doubles.points.slice(1)},naf:this.precomputed.naf&&{wnd:this.precomputed.naf.wnd,points:this.precomputed.naf.points.slice(1)}}]:[this.x,this.y]},n.fromJSON=function(e,t,r){function n(t){return e.point(t[0],t[1],r)}"string"==typeof t&&(t=JSON.parse(t));var i=e.point(t[0],t[1],r);if(!t[2])return i;var o=t[2];return i.precomputed={beta:null,doubles:o.doubles&&{step:o.doubles.step,points:[i].concat(o.doubles.points.map(n))},naf:o.naf&&{wnd:o.naf.wnd,points:[i].concat(o.naf.points.map(n))}},i},n.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+">"},n.prototype.isInfinity=function(){return this.inf},n.prototype.add=function(e){if(this.inf)return e;if(e.inf)return this;if(this.eq(e))return this.dbl();if(this.neg().eq(e))return this.curve.point(null,null);if(0===this.x.cmp(e.x))return this.curve.point(null,null);var t=this.y.redSub(e.y);0!==t.cmpn(0)&&(t=t.redMul(this.x.redSub(e.x).redInvm()));var r=t.redSqr().redISub(this.x).redISub(e.x),n=t.redMul(this.x.redSub(r)).redISub(this.y);return this.curve.point(r,n)},n.prototype.dbl=function(){if(this.inf)return this;var e=this.y.redAdd(this.y);if(0===e.cmpn(0))return this.curve.point(null,null);var t=this.curve.a,r=this.x.redSqr(),n=e.redInvm(),i=r.redAdd(r).redIAdd(r).redIAdd(t).redMul(n),o=i.redSqr().redISub(this.x.redAdd(this.x)),s=i.redMul(this.x.redSub(o)).redISub(this.y);return this.curve.point(o,s)},n.prototype.getX=function(){return this.x.fromRed()},n.prototype.getY=function(){return this.y.fromRed()
},n.prototype.mul=function(e){return e=new h(e,16),this.precomputed&&this.precomputed.doubles?this.curve._fixedNafMul(this,e):this.curve.endo?this.curve._endoWnafMulAdd([this],[e]):this.curve._wnafMul(this,e)},n.prototype.mulAdd=function(e,t,r){var n=[this,t],i=[e,r];return this.curve.endo?this.curve._endoWnafMulAdd(n,i):this.curve._wnafMulAdd(1,n,i,2)},n.prototype.eq=function(e){return this===e||this.inf===e.inf&&(this.inf||0===this.x.cmp(e.x)&&0===this.y.cmp(e.y))},n.prototype.neg=function(e){function t(e){return e.neg()}if(this.inf)return this;var r=this.curve.point(this.x,this.y.redNeg());if(e&&this.precomputed){var n=this.precomputed;r.precomputed={naf:n.naf&&{wnd:n.naf.wnd,points:n.naf.points.map(t)},doubles:n.doubles&&{step:n.doubles.step,points:n.doubles.points.map(t)}}}return r},n.prototype.toJ=function(){if(this.inf)return this.curve.jpoint(null,null,null);var e=this.curve.jpoint(this.x,this.y,this.curve.one);return e},c(i,u.BasePoint),i.prototype.toP=function(){if(this.isInfinity())return this.curve.point(null,null);var e=this.z.redInvm(),t=e.redSqr(),r=this.x.redMul(t),n=this.y.redMul(t).redMul(e);return this.curve.point(r,n)},i.prototype.neg=function(){return this.curve.jpoint(this.x,this.y.redNeg(),this.z)},i.prototype.add=function(e){if(this.isInfinity())return e;if(e.isInfinity())return this;var t=e.z.redSqr(),r=this.z.redSqr(),n=this.x.redMul(t),i=e.x.redMul(r),o=this.y.redMul(t.redMul(e.z)),s=e.y.redMul(r.redMul(this.z)),a=n.redSub(i),h=o.redSub(s);if(0===a.cmpn(0))return 0!==h.cmpn(0)?this.curve.jpoint(null,null,null):this.dbl();var c=a.redSqr(),u=c.redMul(a),f=n.redMul(c),d=h.redSqr().redIAdd(u).redISub(f).redISub(f),l=h.redMul(f.redISub(d)).redISub(o.redMul(u)),p=this.z.redMul(e.z).redMul(a);return this.curve.jpoint(d,l,p)},i.prototype.mixedAdd=function(e){if(this.isInfinity())return e.toJ();if(e.isInfinity())return this;var t=this.z.redSqr(),r=this.x,n=e.x.redMul(t),i=this.y,o=e.y.redMul(t).redMul(this.z),s=r.redSub(n),a=i.redSub(o);if(0===s.cmpn(0))return 0!==a.cmpn(0)?this.curve.jpoint(null,null,null):this.dbl();var h=s.redSqr(),c=h.redMul(s),u=r.redMul(h),f=a.redSqr().redIAdd(c).redISub(u).redISub(u),d=a.redMul(u.redISub(f)).redISub(i.redMul(c)),l=this.z.redMul(s);return this.curve.jpoint(f,d,l)},i.prototype.dblp=function(e){if(0===e)return this;if(this.isInfinity())return this;if(!e)return this.dbl();if(this.curve.zeroA||this.curve.threeA){for(var t=this,r=0;e>r;r++)t=t.dbl();return t}for(var n=this.curve.a,i=this.curve.tinv,o=this.x,s=this.y,a=this.z,h=a.redSqr().redSqr(),c=s.redAdd(s),r=0;e>r;r++){var u=o.redSqr(),f=c.redSqr(),d=f.redSqr(),l=u.redAdd(u).redIAdd(u).redIAdd(n.redMul(h)),p=o.redMul(f),b=l.redSqr().redISub(p.redAdd(p)),g=p.redISub(b),m=l.redMul(g);m=m.redIAdd(m).redISub(d);var v=c.redMul(a);e>r+1&&(h=h.redMul(d)),o=b,a=v,c=m}return this.curve.jpoint(o,c.redMul(i),a)},i.prototype.dbl=function(){return this.isInfinity()?this:this.curve.zeroA?this._zeroDbl():this.curve.threeA?this._threeDbl():this._dbl()},i.prototype._zeroDbl=function(){if(this.zOne){var e=this.x.redSqr(),t=this.y.redSqr(),r=t.redSqr(),n=this.x.redAdd(t).redSqr().redISub(e).redISub(r);n=n.redIAdd(n);var i=e.redAdd(e).redIAdd(e),o=i.redSqr().redISub(n).redISub(n),s=r.redIAdd(r);s=s.redIAdd(s),s=s.redIAdd(s);var a=o,h=i.redMul(n.redISub(o)).redISub(s),c=this.y.redAdd(this.y)}else{var u=this.x.redSqr(),f=this.y.redSqr(),d=f.redSqr(),l=this.x.redAdd(f).redSqr().redISub(u).redISub(d);l=l.redIAdd(l);var p=u.redAdd(u).redIAdd(u),b=p.redSqr(),g=d.redIAdd(d);g=g.redIAdd(g),g=g.redIAdd(g);var a=b.redISub(l).redISub(l),h=p.redMul(l.redISub(a)).redISub(g),c=this.y.redMul(this.z);c=c.redIAdd(c)}return this.curve.jpoint(a,h,c)},i.prototype._threeDbl=function(){if(this.zOne){var e=this.x.redSqr(),t=this.y.redSqr(),r=t.redSqr(),n=this.x.redAdd(t).redSqr().redISub(e).redISub(r);n=n.redIAdd(n);var i=e.redAdd(e).redIAdd(e).redIAdd(this.curve.a),o=i.redSqr().redISub(n).redISub(n),s=o,a=r.redIAdd(r);a=a.redIAdd(a),a=a.redIAdd(a);var h=i.redMul(n.redISub(o)).redISub(a),c=this.y.redAdd(this.y)}else{var u=this.z.redSqr(),f=this.y.redSqr(),d=this.x.redMul(f),l=this.x.redSub(u).redMul(this.x.redAdd(u));l=l.redAdd(l).redIAdd(l);var p=d.redIAdd(d);p=p.redIAdd(p);var b=p.redAdd(p),s=l.redSqr().redISub(b),c=this.y.redAdd(this.z).redSqr().redISub(f).redISub(u),g=f.redSqr();g=g.redIAdd(g),g=g.redIAdd(g),g=g.redIAdd(g);var h=l.redMul(p.redISub(s)).redISub(g)}return this.curve.jpoint(s,h,c)},i.prototype._dbl=function(){var e=this.curve.a,t=(this.curve.tinv,this.x),r=this.y,n=this.z,i=n.redSqr().redSqr(),o=t.redSqr(),s=r.redSqr(),a=o.redAdd(o).redIAdd(o).redIAdd(e.redMul(i)),h=t.redAdd(t);h=h.redIAdd(h);var c=h.redMul(s),u=a.redSqr().redISub(c.redAdd(c)),f=c.redISub(u),d=s.redSqr();d=d.redIAdd(d),d=d.redIAdd(d),d=d.redIAdd(d);var l=a.redMul(f).redISub(d),p=r.redAdd(r).redMul(n);return this.curve.jpoint(u,l,p)},i.prototype.trpl=function(){if(!this.curve.zeroA)return this.dbl().add(this);var e=this.x.redSqr(),t=this.y.redSqr(),r=this.z.redSqr(),n=t.redSqr(),i=e.redAdd(e).redIAdd(e),o=i.redSqr(),s=this.x.redAdd(t).redSqr().redISub(e).redISub(n);s=s.redIAdd(s),s=s.redAdd(s).redIAdd(s),s=s.redISub(o);var a=s.redSqr(),h=n.redIAdd(n);h=h.redIAdd(h),h=h.redIAdd(h),h=h.redIAdd(h);var c=i.redIAdd(s).redSqr().redISub(o).redISub(a).redISub(h),u=t.redMul(c);u=u.redIAdd(u),u=u.redIAdd(u);var f=this.x.redMul(a).redISub(u);f=f.redIAdd(f),f=f.redIAdd(f);var d=this.y.redMul(c.redMul(h.redISub(c)).redISub(s.redMul(a)));d=d.redIAdd(d),d=d.redIAdd(d),d=d.redIAdd(d);var l=this.z.redAdd(s).redSqr().redISub(r).redISub(a);return this.curve.jpoint(f,d,l)},i.prototype.mul=function(e,t){return e=new h(e,t),this.curve._wnafMul(this,e)},i.prototype.eq=function(e){if("affine"===e.type)return this.eq(e.toJ());if(this===e)return!0;var t=this.z.redSqr(),r=e.z.redSqr();if(0!==this.x.redMul(r).redISub(e.x.redMul(t)).cmpn(0))return!1;var n=t.redMul(this.z),i=r.redMul(e.z);return 0===this.y.redMul(i).redISub(e.y.redMul(n)).cmpn(0)},i.prototype.inspect=function(){return this.isInfinity()?"<EC JPoint Infinity>":"<EC JPoint x: "+this.x.toString(16,2)+" y: "+this.y.toString(16,2)+" z: "+this.z.toString(16,2)+">"},i.prototype.isInfinity=function(){return 0===this.z.cmpn(0)}},{"../../elliptic":84,"../curve":87,assert:50,"bn.js":81,inherits:195}],90:[function(e,t,r){function n(e){this.curve="short"===e.type?new h.curve.short(e):"edwards"===e.type?new h.curve.edwards(e):new h.curve.mont(e),this.g=this.curve.g,this.n=this.curve.n,this.hash=e.hash,s(this.g.validate(),"Invalid curve"),s(this.g.mul(this.n).isInfinity(),"Invalid curve, G*N != O")}function i(e,t){Object.defineProperty(o,e,{configurable:!0,enumerable:!0,get:function(){var r=new n(t);return Object.defineProperty(o,e,{configurable:!0,enumerable:!0,value:r}),r}})}var o=r,s=e("assert"),a=e("hash.js"),h=(e("bn.js"),e("../elliptic"));o.PresetCurve=n,i("p192",{type:"short",prime:"p192",p:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff",a:"ffffffff ffffffff ffffffff fffffffe ffffffff fffffffc",b:"64210519 e59c80e7 0fa7e9ab 72243049 feb8deec c146b9b1",n:"ffffffff ffffffff ffffffff 99def836 146bc9b1 b4d22831",hash:a.sha256,gRed:!1,g:["188da80e b03090f6 7cbf20eb 43a18800 f4ff0afd 82ff1012","07192b95 ffc8da78 631011ed 6b24cdd5 73f977a1 1e794811"]}),i("p224",{type:"short",prime:"p224",p:"ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001",a:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff fffffffe",b:"b4050a85 0c04b3ab f5413256 5044b0b7 d7bfd8ba 270b3943 2355ffb4",n:"ffffffff ffffffff ffffffff ffff16a2 e0b8f03e 13dd2945 5c5c2a3d",hash:a.sha256,gRed:!1,g:["b70e0cbd 6bb4bf7f 321390b9 4a03c1d3 56c21122 343280d6 115c1d21","bd376388 b5f723fb 4c22dfe6 cd4375a0 5a074764 44d58199 85007e34"]}),i("p256",{type:"short",prime:null,p:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff ffffffff",a:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff fffffffc",b:"5ac635d8 aa3a93e7 b3ebbd55 769886bc 651d06b0 cc53b0f6 3bce3c3e 27d2604b",n:"ffffffff 00000000 ffffffff ffffffff bce6faad a7179e84 f3b9cac2 fc632551",hash:a.sha256,gRed:!1,g:["6b17d1f2 e12c4247 f8bce6e5 63a440f2 77037d81 2deb33a0 f4a13945 d898c296","4fe342e2 fe1a7f9b 8ee7eb4a 7c0f9e16 2bce3357 6b315ece cbb64068 37bf51f5"]}),i("curve25519",{type:"mont",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"76d06",b:"0",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:a.sha256,gRed:!1,g:["9"]}),i("ed25519",{type:"edwards",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"-1",c:"1",d:"52036cee2b6ffe73 8cc740797779e898 00700a4d4141d8ab 75eb4dca135978a3",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:a.sha256,gRed:!1,g:["216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a","6666666666666666666666666666666666666666666666666666666666666658"]}),i("secp256k1",{type:"short",prime:"k256",p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f",a:"0",b:"7",n:"ffffffff ffffffff ffffffff fffffffe baaedce6 af48a03b bfd25e8c d0364141",h:"1",hash:a.sha256,beta:"7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee",lambda:"5363ad4cc05c30e0a5261c028812645a122e22ea20816678df02967c1b23bd72",basis:[{a:"3086d221a7d46bcde86c90e49284eb15",b:"-e4437ed6010e88286f547fa90abfe4c3"},{a:"114ca50f7a8e2f3f657c1108d9d44cfd8",b:"3086d221a7d46bcde86c90e49284eb15"}],gRed:!1,g:["79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798","483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8",{doubles:{step:4,points:[["e60fce93b59e9ec53011aabc21c23e97b2a31369b87a5ae9c44ee89e2a6dec0a","f7e3507399e595929db99f34f57937101296891e44d23f0be1f32cce69616821"],["8282263212c609d9ea2a6e3e172de238d8c39cabd5ac1ca10646e23fd5f51508","11f8a8098557dfe45e8256e830b60ace62d613ac2f7b17bed31b6eaff6e26caf"],["175e159f728b865a72f99cc6c6fc846de0b93833fd2222ed73fce5b551e5b739","d3506e0d9e3c79eba4ef97a51ff71f5eacb5955add24345c6efa6ffee9fed695"],["363d90d447b00c9c99ceac05b6262ee053441c7e55552ffe526bad8f83ff4640","4e273adfc732221953b445397f3363145b9a89008199ecb62003c7f3bee9de9"],["8b4b5f165df3c2be8c6244b5b745638843e4a781a15bcd1b69f79a55dffdf80c","4aad0a6f68d308b4b3fbd7813ab0da04f9e336546162ee56b3eff0c65fd4fd36"],["723cbaa6e5db996d6bf771c00bd548c7b700dbffa6c0e77bcb6115925232fcda","96e867b5595cc498a921137488824d6e2660a0653779494801dc069d9eb39f5f"],["eebfa4d493bebf98ba5feec812c2d3b50947961237a919839a533eca0e7dd7fa","5d9a8ca3970ef0f269ee7edaf178089d9ae4cdc3a711f712ddfd4fdae1de8999"],["100f44da696e71672791d0a09b7bde459f1215a29b3c03bfefd7835b39a48db0","cdd9e13192a00b772ec8f3300c090666b7ff4a18ff5195ac0fbd5cd62bc65a09"],["e1031be262c7ed1b1dc9227a4a04c017a77f8d4464f3b3852c8acde6e534fd2d","9d7061928940405e6bb6a4176597535af292dd419e1ced79a44f18f29456a00d"],["feea6cae46d55b530ac2839f143bd7ec5cf8b266a41d6af52d5e688d9094696d","e57c6b6c97dce1bab06e4e12bf3ecd5c981c8957cc41442d3155debf18090088"],["da67a91d91049cdcb367be4be6ffca3cfeed657d808583de33fa978bc1ec6cb1","9bacaa35481642bc41f463f7ec9780e5dec7adc508f740a17e9ea8e27a68be1d"],["53904faa0b334cdda6e000935ef22151ec08d0f7bb11069f57545ccc1a37b7c0","5bc087d0bc80106d88c9eccac20d3c1c13999981e14434699dcb096b022771c8"],["8e7bcd0bd35983a7719cca7764ca906779b53a043a9b8bcaeff959f43ad86047","10b7770b2a3da4b3940310420ca9514579e88e2e47fd68b3ea10047e8460372a"],["385eed34c1cdff21e6d0818689b81bde71a7f4f18397e6690a841e1599c43862","283bebc3e8ea23f56701de19e9ebf4576b304eec2086dc8cc0458fe5542e5453"],["6f9d9b803ecf191637c73a4413dfa180fddf84a5947fbc9c606ed86c3fac3a7","7c80c68e603059ba69b8e2a30e45c4d47ea4dd2f5c281002d86890603a842160"],["3322d401243c4e2582a2147c104d6ecbf774d163db0f5e5313b7e0e742d0e6bd","56e70797e9664ef5bfb019bc4ddaf9b72805f63ea2873af624f3a2e96c28b2a0"],["85672c7d2de0b7da2bd1770d89665868741b3f9af7643397721d74d28134ab83","7c481b9b5b43b2eb6374049bfa62c2e5e77f17fcc5298f44c8e3094f790313a6"],["948bf809b1988a46b06c9f1919413b10f9226c60f668832ffd959af60c82a0a","53a562856dcb6646dc6b74c5d1c3418c6d4dff08c97cd2bed4cb7f88d8c8e589"],["6260ce7f461801c34f067ce0f02873a8f1b0e44dfc69752accecd819f38fd8e8","bc2da82b6fa5b571a7f09049776a1ef7ecd292238051c198c1a84e95b2b4ae17"],["e5037de0afc1d8d43d8348414bbf4103043ec8f575bfdc432953cc8d2037fa2d","4571534baa94d3b5f9f98d09fb990bddbd5f5b03ec481f10e0e5dc841d755bda"],["e06372b0f4a207adf5ea905e8f1771b4e7e8dbd1c6a6c5b725866a0ae4fce725","7a908974bce18cfe12a27bb2ad5a488cd7484a7787104870b27034f94eee31dd"],["213c7a715cd5d45358d0bbf9dc0ce02204b10bdde2a3f58540ad6908d0559754","4b6dad0b5ae462507013ad06245ba190bb4850f5f36a7eeddff2c27534b458f2"],["4e7c272a7af4b34e8dbb9352a5419a87e2838c70adc62cddf0cc3a3b08fbd53c","17749c766c9d0b18e16fd09f6def681b530b9614bff7dd33e0b3941817dcaae6"],["fea74e3dbe778b1b10f238ad61686aa5c76e3db2be43057632427e2840fb27b6","6e0568db9b0b13297cf674deccb6af93126b596b973f7b77701d3db7f23cb96f"],["76e64113f677cf0e10a2570d599968d31544e179b760432952c02a4417bdde39","c90ddf8dee4e95cf577066d70681f0d35e2a33d2b56d2032b4b1752d1901ac01"],["c738c56b03b2abe1e8281baa743f8f9a8f7cc643df26cbee3ab150242bcbb891","893fb578951ad2537f718f2eacbfbbbb82314eef7880cfe917e735d9699a84c3"],["d895626548b65b81e264c7637c972877d1d72e5f3a925014372e9f6588f6c14b","febfaa38f2bc7eae728ec60818c340eb03428d632bb067e179363ed75d7d991f"],["b8da94032a957518eb0f6433571e8761ceffc73693e84edd49150a564f676e03","2804dfa44805a1e4d7c99cc9762808b092cc584d95ff3b511488e4e74efdf6e7"],["e80fea14441fb33a7d8adab9475d7fab2019effb5156a792f1a11778e3c0df5d","eed1de7f638e00771e89768ca3ca94472d155e80af322ea9fcb4291b6ac9ec78"],["a301697bdfcd704313ba48e51d567543f2a182031efd6915ddc07bbcc4e16070","7370f91cfb67e4f5081809fa25d40f9b1735dbf7c0a11a130c0d1a041e177ea1"],["90ad85b389d6b936463f9d0512678de208cc330b11307fffab7ac63e3fb04ed4","e507a3620a38261affdcbd9427222b839aefabe1582894d991d4d48cb6ef150"],["8f68b9d2f63b5f339239c1ad981f162ee88c5678723ea3351b7b444c9ec4c0da","662a9f2dba063986de1d90c2b6be215dbbea2cfe95510bfdf23cbf79501fff82"],["e4f3fb0176af85d65ff99ff9198c36091f48e86503681e3e6686fd5053231e11","1e63633ad0ef4f1c1661a6d0ea02b7286cc7e74ec951d1c9822c38576feb73bc"],["8c00fa9b18ebf331eb961537a45a4266c7034f2f0d4e1d0716fb6eae20eae29e","efa47267fea521a1a9dc343a3736c974c2fadafa81e36c54e7d2a4c66702414b"],["e7a26ce69dd4829f3e10cec0a9e98ed3143d084f308b92c0997fddfc60cb3e41","2a758e300fa7984b471b006a1aafbb18d0a6b2c0420e83e20e8a9421cf2cfd51"],["b6459e0ee3662ec8d23540c223bcbdc571cbcb967d79424f3cf29eb3de6b80ef","67c876d06f3e06de1dadf16e5661db3c4b3ae6d48e35b2ff30bf0b61a71ba45"],["d68a80c8280bb840793234aa118f06231d6f1fc67e73c5a5deda0f5b496943e8","db8ba9fff4b586d00c4b1f9177b0e28b5b0e7b8f7845295a294c84266b133120"],["324aed7df65c804252dc0270907a30b09612aeb973449cea4095980fc28d3d5d","648a365774b61f2ff130c0c35aec1f4f19213b0c7e332843967224af96ab7c84"],["4df9c14919cde61f6d51dfdbe5fee5dceec4143ba8d1ca888e8bd373fd054c96","35ec51092d8728050974c23a1d85d4b5d506cdc288490192ebac06cad10d5d"],["9c3919a84a474870faed8a9c1cc66021523489054d7f0308cbfc99c8ac1f98cd","ddb84f0f4a4ddd57584f044bf260e641905326f76c64c8e6be7e5e03d4fc599d"],["6057170b1dd12fdf8de05f281d8e06bb91e1493a8b91d4cc5a21382120a959e5","9a1af0b26a6a4807add9a2daf71df262465152bc3ee24c65e899be932385a2a8"],["a576df8e23a08411421439a4518da31880cef0fba7d4df12b1a6973eecb94266","40a6bf20e76640b2c92b97afe58cd82c432e10a7f514d9f3ee8be11ae1b28ec8"],["7778a78c28dec3e30a05fe9629de8c38bb30d1f5cf9a3a208f763889be58ad71","34626d9ab5a5b22ff7098e12f2ff580087b38411ff24ac563b513fc1fd9f43ac"],["928955ee637a84463729fd30e7afd2ed5f96274e5ad7e5cb09eda9c06d903ac","c25621003d3f42a827b78a13093a95eeac3d26efa8a8d83fc5180e935bcd091f"],["85d0fef3ec6db109399064f3a0e3b2855645b4a907ad354527aae75163d82751","1f03648413a38c0be29d496e582cf5663e8751e96877331582c237a24eb1f962"],["ff2b0dce97eece97c1c9b6041798b85dfdfb6d8882da20308f5404824526087e","493d13fef524ba188af4c4dc54d07936c7b7ed6fb90e2ceb2c951e01f0c29907"],["827fbbe4b1e880ea9ed2b2e6301b212b57f1ee148cd6dd28780e5e2cf856e241","c60f9c923c727b0b71bef2c67d1d12687ff7a63186903166d605b68baec293ec"],["eaa649f21f51bdbae7be4ae34ce6e5217a58fdce7f47f9aa7f3b58fa2120e2b3","be3279ed5bbbb03ac69a80f89879aa5a01a6b965f13f7e59d47a5305ba5ad93d"],["e4a42d43c5cf169d9391df6decf42ee541b6d8f0c9a137401e23632dda34d24f","4d9f92e716d1c73526fc99ccfb8ad34ce886eedfa8d8e4f13a7f7131deba9414"],["1ec80fef360cbdd954160fadab352b6b92b53576a88fea4947173b9d4300bf19","aeefe93756b5340d2f3a4958a7abbf5e0146e77f6295a07b671cdc1cc107cefd"],["146a778c04670c2f91b00af4680dfa8bce3490717d58ba889ddb5928366642be","b318e0ec3354028add669827f9d4b2870aaa971d2f7e5ed1d0b297483d83efd0"],["fa50c0f61d22e5f07e3acebb1aa07b128d0012209a28b9776d76a8793180eef9","6b84c6922397eba9b72cd2872281a68a5e683293a57a213b38cd8d7d3f4f2811"],["da1d61d0ca721a11b1a5bf6b7d88e8421a288ab5d5bba5220e53d32b5f067ec2","8157f55a7c99306c79c0766161c91e2966a73899d279b48a655fba0f1ad836f1"],["a8e282ff0c9706907215ff98e8fd416615311de0446f1e062a73b0610d064e13","7f97355b8db81c09abfb7f3c5b2515888b679a3e50dd6bd6cef7c73111f4cc0c"],["174a53b9c9a285872d39e56e6913cab15d59b1fa512508c022f382de8319497c","ccc9dc37abfc9c1657b4155f2c47f9e6646b3a1d8cb9854383da13ac079afa73"],["959396981943785c3d3e57edf5018cdbe039e730e4918b3d884fdff09475b7ba","2e7e552888c331dd8ba0386a4b9cd6849c653f64c8709385e9b8abf87524f2fd"],["d2a63a50ae401e56d645a1153b109a8fcca0a43d561fba2dbb51340c9d82b151","e82d86fb6443fcb7565aee58b2948220a70f750af484ca52d4142174dcf89405"],["64587e2335471eb890ee7896d7cfdc866bacbdbd3839317b3436f9b45617e073","d99fcdd5bf6902e2ae96dd6447c299a185b90a39133aeab358299e5e9faf6589"],["8481bde0e4e4d885b3a546d3e549de042f0aa6cea250e7fd358d6c86dd45e458","38ee7b8cba5404dd84a25bf39cecb2ca900a79c42b262e556d64b1b59779057e"],["13464a57a78102aa62b6979ae817f4637ffcfed3c4b1ce30bcd6303f6caf666b","69be159004614580ef7e433453ccb0ca48f300a81d0942e13f495a907f6ecc27"],["bc4a9df5b713fe2e9aef430bcc1dc97a0cd9ccede2f28588cada3a0d2d83f366","d3a81ca6e785c06383937adf4b798caa6e8a9fbfa547b16d758d666581f33c1"],["8c28a97bf8298bc0d23d8c749452a32e694b65e30a9472a3954ab30fe5324caa","40a30463a3305193378fedf31f7cc0eb7ae784f0451cb9459e71dc73cbef9482"],["8ea9666139527a8c1dd94ce4f071fd23c8b350c5a4bb33748c4ba111faccae0","620efabbc8ee2782e24e7c0cfb95c5d735b783be9cf0f8e955af34a30e62b945"],["dd3625faef5ba06074669716bbd3788d89bdde815959968092f76cc4eb9a9787","7a188fa3520e30d461da2501045731ca941461982883395937f68d00c644a573"],["f710d79d9eb962297e4f6232b40e8f7feb2bc63814614d692c12de752408221e","ea98e67232d3b3295d3b535532115ccac8612c721851617526ae47a9c77bfc82"]]},naf:{wnd:7,points:[["f9308a019258c31049344f85f89d5229b531c845836f99b08601f113bce036f9","388f7b0f632de8140fe337e62a37f3566500a99934c2231b6cb9fd7584b8e672"],["2f8bde4d1a07209355b4a7250a5c5128e88b84bddc619ab7cba8d569b240efe4","d8ac222636e5e3d6d4dba9dda6c9c426f788271bab0d6840dca87d3aa6ac62d6"],["5cbdf0646e5db4eaa398f365f2ea7a0e3d419b7e0330e39ce92bddedcac4f9bc","6aebca40ba255960a3178d6d861a54dba813d0b813fde7b5a5082628087264da"],["acd484e2f0c7f65309ad178a9f559abde09796974c57e714c35f110dfc27ccbe","cc338921b0a7d9fd64380971763b61e9add888a4375f8e0f05cc262ac64f9c37"],["774ae7f858a9411e5ef4246b70c65aac5649980be5c17891bbec17895da008cb","d984a032eb6b5e190243dd56d7b7b365372db1e2dff9d6a8301d74c9c953c61b"],["f28773c2d975288bc7d1d205c3748651b075fbc6610e58cddeeddf8f19405aa8","ab0902e8d880a89758212eb65cdaf473a1a06da521fa91f29b5cb52db03ed81"],["d7924d4f7d43ea965a465ae3095ff41131e5946f3c85f79e44adbcf8e27e080e","581e2872a86c72a683842ec228cc6defea40af2bd896d3a5c504dc9ff6a26b58"],["defdea4cdb677750a420fee807eacf21eb9898ae79b9768766e4faa04a2d4a34","4211ab0694635168e997b0ead2a93daeced1f4a04a95c0f6cfb199f69e56eb77"],["2b4ea0a797a443d293ef5cff444f4979f06acfebd7e86d277475656138385b6c","85e89bc037945d93b343083b5a1c86131a01f60c50269763b570c854e5c09b7a"],["352bbf4a4cdd12564f93fa332ce333301d9ad40271f8107181340aef25be59d5","321eb4075348f534d59c18259dda3e1f4a1b3b2e71b1039c67bd3d8bcf81998c"],["2fa2104d6b38d11b0230010559879124e42ab8dfeff5ff29dc9cdadd4ecacc3f","2de1068295dd865b64569335bd5dd80181d70ecfc882648423ba76b532b7d67"],["9248279b09b4d68dab21a9b066edda83263c3d84e09572e269ca0cd7f5453714","73016f7bf234aade5d1aa71bdea2b1ff3fc0de2a887912ffe54a32ce97cb3402"],["daed4f2be3a8bf278e70132fb0beb7522f570e144bf615c07e996d443dee8729","a69dce4a7d6c98e8d4a1aca87ef8d7003f83c230f3afa726ab40e52290be1c55"],["c44d12c7065d812e8acf28d7cbb19f9011ecd9e9fdf281b0e6a3b5e87d22e7db","2119a460ce326cdc76c45926c982fdac0e106e861edf61c5a039063f0e0e6482"],["6a245bf6dc698504c89a20cfded60853152b695336c28063b61c65cbd269e6b4","e022cf42c2bd4a708b3f5126f16a24ad8b33ba48d0423b6efd5e6348100d8a82"],["1697ffa6fd9de627c077e3d2fe541084ce13300b0bec1146f95ae57f0d0bd6a5","b9c398f186806f5d27561506e4557433a2cf15009e498ae7adee9d63d01b2396"],["605bdb019981718b986d0f07e834cb0d9deb8360ffb7f61df982345ef27a7479","2972d2de4f8d20681a78d93ec96fe23c26bfae84fb14db43b01e1e9056b8c49"],["62d14dab4150bf497402fdc45a215e10dcb01c354959b10cfe31c7e9d87ff33d","80fc06bd8cc5b01098088a1950eed0db01aa132967ab472235f5642483b25eaf"],["80c60ad0040f27dade5b4b06c408e56b2c50e9f56b9b8b425e555c2f86308b6f","1c38303f1cc5c30f26e66bad7fe72f70a65eed4cbe7024eb1aa01f56430bd57a"],["7a9375ad6167ad54aa74c6348cc54d344cc5dc9487d847049d5eabb0fa03c8fb","d0e3fa9eca8726909559e0d79269046bdc59ea10c70ce2b02d499ec224dc7f7"],["d528ecd9b696b54c907a9ed045447a79bb408ec39b68df504bb51f459bc3ffc9","eecf41253136e5f99966f21881fd656ebc4345405c520dbc063465b521409933"],["49370a4b5f43412ea25f514e8ecdad05266115e4a7ecb1387231808f8b45963","758f3f41afd6ed428b3081b0512fd62a54c3f3afbb5b6764b653052a12949c9a"],["77f230936ee88cbbd73df930d64702ef881d811e0e1498e2f1c13eb1fc345d74","958ef42a7886b6400a08266e9ba1b37896c95330d97077cbbe8eb3c7671c60d6"],["f2dac991cc4ce4b9ea44887e5c7c0bce58c80074ab9d4dbaeb28531b7739f530","e0dedc9b3b2f8dad4da1f32dec2531df9eb5fbeb0598e4fd1a117dba703a3c37"],["463b3d9f662621fb1b4be8fbbe2520125a216cdfc9dae3debcba4850c690d45b","5ed430d78c296c3543114306dd8622d7c622e27c970a1de31cb377b01af7307e"],["f16f804244e46e2a09232d4aff3b59976b98fac14328a2d1a32496b49998f247","cedabd9b82203f7e13d206fcdf4e33d92a6c53c26e5cce26d6579962c4e31df6"],["caf754272dc84563b0352b7a14311af55d245315ace27c65369e15f7151d41d1","cb474660ef35f5f2a41b643fa5e460575f4fa9b7962232a5c32f908318a04476"],["2600ca4b282cb986f85d0f1709979d8b44a09c07cb86d7c124497bc86f082120","4119b88753c15bd6a693b03fcddbb45d5ac6be74ab5f0ef44b0be9475a7e4b40"],["7635ca72d7e8432c338ec53cd12220bc01c48685e24f7dc8c602a7746998e435","91b649609489d613d1d5e590f78e6d74ecfc061d57048bad9e76f302c5b9c61"],["754e3239f325570cdbbf4a87deee8a66b7f2b33479d468fbc1a50743bf56cc18","673fb86e5bda30fb3cd0ed304ea49a023ee33d0197a695d0c5d98093c536683"],["e3e6bd1071a1e96aff57859c82d570f0330800661d1c952f9fe2694691d9b9e8","59c9e0bba394e76f40c0aa58379a3cb6a5a2283993e90c4167002af4920e37f5"],["186b483d056a033826ae73d88f732985c4ccb1f32ba35f4b4cc47fdcf04aa6eb","3b952d32c67cf77e2e17446e204180ab21fb8090895138b4a4a797f86e80888b"],["df9d70a6b9876ce544c98561f4be4f725442e6d2b737d9c91a8321724ce0963f","55eb2dafd84d6ccd5f862b785dc39d4ab157222720ef9da217b8c45cf2ba2417"],["5edd5cc23c51e87a497ca815d5dce0f8ab52554f849ed8995de64c5f34ce7143","efae9c8dbc14130661e8cec030c89ad0c13c66c0d17a2905cdc706ab7399a868"],["290798c2b6476830da12fe02287e9e777aa3fba1c355b17a722d362f84614fba","e38da76dcd440621988d00bcf79af25d5b29c094db2a23146d003afd41943e7a"],["af3c423a95d9f5b3054754efa150ac39cd29552fe360257362dfdecef4053b45","f98a3fd831eb2b749a93b0e6f35cfb40c8cd5aa667a15581bc2feded498fd9c6"],["766dbb24d134e745cccaa28c99bf274906bb66b26dcf98df8d2fed50d884249a","744b1152eacbe5e38dcc887980da38b897584a65fa06cedd2c924f97cbac5996"],["59dbf46f8c94759ba21277c33784f41645f7b44f6c596a58ce92e666191abe3e","c534ad44175fbc300f4ea6ce648309a042ce739a7919798cd85e216c4a307f6e"],["f13ada95103c4537305e691e74e9a4a8dd647e711a95e73cb62dc6018cfd87b8","e13817b44ee14de663bf4bc808341f326949e21a6a75c2570778419bdaf5733d"],["7754b4fa0e8aced06d4167a2c59cca4cda1869c06ebadfb6488550015a88522c","30e93e864e669d82224b967c3020b8fa8d1e4e350b6cbcc537a48b57841163a2"],["948dcadf5990e048aa3874d46abef9d701858f95de8041d2a6828c99e2262519","e491a42537f6e597d5d28a3224b1bc25df9154efbd2ef1d2cbba2cae5347d57e"],["7962414450c76c1689c7b48f8202ec37fb224cf5ac0bfa1570328a8a3d7c77ab","100b610ec4ffb4760d5c1fc133ef6f6b12507a051f04ac5760afa5b29db83437"],["3514087834964b54b15b160644d915485a16977225b8847bb0dd085137ec47ca","ef0afbb2056205448e1652c48e8127fc6039e77c15c2378b7e7d15a0de293311"],["d3cc30ad6b483e4bc79ce2c9dd8bc54993e947eb8df787b442943d3f7b527eaf","8b378a22d827278d89c5e9be8f9508ae3c2ad46290358630afb34db04eede0a4"],["1624d84780732860ce1c78fcbfefe08b2b29823db913f6493975ba0ff4847610","68651cf9b6da903e0914448c6cd9d4ca896878f5282be4c8cc06e2a404078575"],["733ce80da955a8a26902c95633e62a985192474b5af207da6df7b4fd5fc61cd4","f5435a2bd2badf7d485a4d8b8db9fcce3e1ef8e0201e4578c54673bc1dc5ea1d"],["15d9441254945064cf1a1c33bbd3b49f8966c5092171e699ef258dfab81c045c","d56eb30b69463e7234f5137b73b84177434800bacebfc685fc37bbe9efe4070d"],["a1d0fcf2ec9de675b612136e5ce70d271c21417c9d2b8aaaac138599d0717940","edd77f50bcb5a3cab2e90737309667f2641462a54070f3d519212d39c197a629"],["e22fbe15c0af8ccc5780c0735f84dbe9a790badee8245c06c7ca37331cb36980","a855babad5cd60c88b430a69f53a1a7a38289154964799be43d06d77d31da06"],["311091dd9860e8e20ee13473c1155f5f69635e394704eaa74009452246cfa9b3","66db656f87d1f04fffd1f04788c06830871ec5a64feee685bd80f0b1286d8374"],["34c1fd04d301be89b31c0442d3e6ac24883928b45a9340781867d4232ec2dbdf","9414685e97b1b5954bd46f730174136d57f1ceeb487443dc5321857ba73abee"],["f219ea5d6b54701c1c14de5b557eb42a8d13f3abbcd08affcc2a5e6b049b8d63","4cb95957e83d40b0f73af4544cccf6b1f4b08d3c07b27fb8d8c2962a400766d1"],["d7b8740f74a8fbaab1f683db8f45de26543a5490bca627087236912469a0b448","fa77968128d9c92ee1010f337ad4717eff15db5ed3c049b3411e0315eaa4593b"],["32d31c222f8f6f0ef86f7c98d3a3335ead5bcd32abdd94289fe4d3091aa824bf","5f3032f5892156e39ccd3d7915b9e1da2e6dac9e6f26e961118d14b8462e1661"],["7461f371914ab32671045a155d9831ea8793d77cd59592c4340f86cbc18347b5","8ec0ba238b96bec0cbdddcae0aa442542eee1ff50c986ea6b39847b3cc092ff6"],["ee079adb1df1860074356a25aa38206a6d716b2c3e67453d287698bad7b2b2d6","8dc2412aafe3be5c4c5f37e0ecc5f9f6a446989af04c4e25ebaac479ec1c8c1e"],["16ec93e447ec83f0467b18302ee620f7e65de331874c9dc72bfd8616ba9da6b5","5e4631150e62fb40d0e8c2a7ca5804a39d58186a50e497139626778e25b0674d"],["eaa5f980c245f6f038978290afa70b6bd8855897f98b6aa485b96065d537bd99","f65f5d3e292c2e0819a528391c994624d784869d7e6ea67fb18041024edc07dc"],["78c9407544ac132692ee1910a02439958ae04877151342ea96c4b6b35a49f51","f3e0319169eb9b85d5404795539a5e68fa1fbd583c064d2462b675f194a3ddb4"],["494f4be219a1a77016dcd838431aea0001cdc8ae7a6fc688726578d9702857a5","42242a969283a5f339ba7f075e36ba2af925ce30d767ed6e55f4b031880d562c"],["a598a8030da6d86c6bc7f2f5144ea549d28211ea58faa70ebf4c1e665c1fe9b5","204b5d6f84822c307e4b4a7140737aec23fc63b65b35f86a10026dbd2d864e6b"],["c41916365abb2b5d09192f5f2dbeafec208f020f12570a184dbadc3e58595997","4f14351d0087efa49d245b328984989d5caf9450f34bfc0ed16e96b58fa9913"],["841d6063a586fa475a724604da03bc5b92a2e0d2e0a36acfe4c73a5514742881","73867f59c0659e81904f9a1c7543698e62562d6744c169ce7a36de01a8d6154"],["5e95bb399a6971d376026947f89bde2f282b33810928be4ded112ac4d70e20d5","39f23f366809085beebfc71181313775a99c9aed7d8ba38b161384c746012865"],["36e4641a53948fd476c39f8a99fd974e5ec07564b5315d8bf99471bca0ef2f66","d2424b1b1abe4eb8164227b085c9aa9456ea13493fd563e06fd51cf5694c78fc"],["336581ea7bfbbb290c191a2f507a41cf5643842170e914faeab27c2c579f726","ead12168595fe1be99252129b6e56b3391f7ab1410cd1e0ef3dcdcabd2fda224"],["8ab89816dadfd6b6a1f2634fcf00ec8403781025ed6890c4849742706bd43ede","6fdcef09f2f6d0a044e654aef624136f503d459c3e89845858a47a9129cdd24e"],["1e33f1a746c9c5778133344d9299fcaa20b0938e8acff2544bb40284b8c5fb94","60660257dd11b3aa9c8ed618d24edff2306d320f1d03010e33a7d2057f3b3b6"],["85b7c1dcb3cec1b7ee7f30ded79dd20a0ed1f4cc18cbcfcfa410361fd8f08f31","3d98a9cdd026dd43f39048f25a8847f4fcafad1895d7a633c6fed3c35e999511"],["29df9fbd8d9e46509275f4b125d6d45d7fbe9a3b878a7af872a2800661ac5f51","b4c4fe99c775a606e2d8862179139ffda61dc861c019e55cd2876eb2a27d84b"],["a0b1cae06b0a847a3fea6e671aaf8adfdfe58ca2f768105c8082b2e449fce252","ae434102edde0958ec4b19d917a6a28e6b72da1834aff0e650f049503a296cf2"],["4e8ceafb9b3e9a136dc7ff67e840295b499dfb3b2133e4ba113f2e4c0e121e5","cf2174118c8b6d7a4b48f6d534ce5c79422c086a63460502b827ce62a326683c"],["d24a44e047e19b6f5afb81c7ca2f69080a5076689a010919f42725c2b789a33b","6fb8d5591b466f8fc63db50f1c0f1c69013f996887b8244d2cdec417afea8fa3"],["ea01606a7a6c9cdd249fdfcfacb99584001edd28abbab77b5104e98e8e3b35d4","322af4908c7312b0cfbfe369f7a7b3cdb7d4494bc2823700cfd652188a3ea98d"],["af8addbf2b661c8a6c6328655eb96651252007d8c5ea31be4ad196de8ce2131f","6749e67c029b85f52a034eafd096836b2520818680e26ac8f3dfbcdb71749700"],["e3ae1974566ca06cc516d47e0fb165a674a3dabcfca15e722f0e3450f45889","2aeabe7e4531510116217f07bf4d07300de97e4874f81f533420a72eeb0bd6a4"],["591ee355313d99721cf6993ffed1e3e301993ff3ed258802075ea8ced397e246","b0ea558a113c30bea60fc4775460c7901ff0b053d25ca2bdeee98f1a4be5d196"],["11396d55fda54c49f19aa97318d8da61fa8584e47b084945077cf03255b52984","998c74a8cd45ac01289d5833a7beb4744ff536b01b257be4c5767bea93ea57a4"],["3c5d2a1ba39c5a1790000738c9e0c40b8dcdfd5468754b6405540157e017aa7a","b2284279995a34e2f9d4de7396fc18b80f9b8b9fdd270f6661f79ca4c81bd257"],["cc8704b8a60a0defa3a99a7299f2e9c3fbc395afb04ac078425ef8a1793cc030","bdd46039feed17881d1e0862db347f8cf395b74fc4bcdc4e940b74e3ac1f1b13"],["c533e4f7ea8555aacd9777ac5cad29b97dd4defccc53ee7ea204119b2889b197","6f0a256bc5efdf429a2fb6242f1a43a2d9b925bb4a4b3a26bb8e0f45eb596096"],["c14f8f2ccb27d6f109f6d08d03cc96a69ba8c34eec07bbcf566d48e33da6593","c359d6923bb398f7fd4473e16fe1c28475b740dd098075e6c0e8649113dc3a38"],["a6cbc3046bc6a450bac24789fa17115a4c9739ed75f8f21ce441f72e0b90e6ef","21ae7f4680e889bb130619e2c0f95a360ceb573c70603139862afd617fa9b9f"],["347d6d9a02c48927ebfb86c1359b1caf130a3c0267d11ce6344b39f99d43cc38","60ea7f61a353524d1c987f6ecec92f086d565ab687870cb12689ff1e31c74448"],["da6545d2181db8d983f7dcb375ef5866d47c67b1bf31c8cf855ef7437b72656a","49b96715ab6878a79e78f07ce5680c5d6673051b4935bd897fea824b77dc208a"],["c40747cc9d012cb1a13b8148309c6de7ec25d6945d657146b9d5994b8feb1111","5ca560753be2a12fc6de6caf2cb489565db936156b9514e1bb5e83037e0fa2d4"],["4e42c8ec82c99798ccf3a610be870e78338c7f713348bd34c8203ef4037f3502","7571d74ee5e0fb92a7a8b33a07783341a5492144cc54bcc40a94473693606437"],["3775ab7089bc6af823aba2e1af70b236d251cadb0c86743287522a1b3b0dedea","be52d107bcfa09d8bcb9736a828cfa7fac8db17bf7a76a2c42ad961409018cf7"],["cee31cbf7e34ec379d94fb814d3d775ad954595d1314ba8846959e3e82f74e26","8fd64a14c06b589c26b947ae2bcf6bfa0149ef0be14ed4d80f448a01c43b1c6d"],["b4f9eaea09b6917619f6ea6a4eb5464efddb58fd45b1ebefcdc1a01d08b47986","39e5c9925b5a54b07433a4f18c61726f8bb131c012ca542eb24a8ac07200682a"],["d4263dfc3d2df923a0179a48966d30ce84e2515afc3dccc1b77907792ebcc60e","62dfaf07a0f78feb30e30d6295853ce189e127760ad6cf7fae164e122a208d54"],["48457524820fa65a4f8d35eb6930857c0032acc0a4a2de422233eeda897612c4","25a748ab367979d98733c38a1fa1c2e7dc6cc07db2d60a9ae7a76aaa49bd0f77"],["dfeeef1881101f2cb11644f3a2afdfc2045e19919152923f367a1767c11cceda","ecfb7056cf1de042f9420bab396793c0c390bde74b4bbdff16a83ae09a9a7517"],["6d7ef6b17543f8373c573f44e1f389835d89bcbc6062ced36c82df83b8fae859","cd450ec335438986dfefa10c57fea9bcc521a0959b2d80bbf74b190dca712d10"],["e75605d59102a5a2684500d3b991f2e3f3c88b93225547035af25af66e04541f","f5c54754a8f71ee540b9b48728473e314f729ac5308b06938360990e2bfad125"],["eb98660f4c4dfaa06a2be453d5020bc99a0c2e60abe388457dd43fefb1ed620c","6cb9a8876d9cb8520609af3add26cd20a0a7cd8a9411131ce85f44100099223e"],["13e87b027d8514d35939f2e6892b19922154596941888336dc3563e3b8dba942","fef5a3c68059a6dec5d624114bf1e91aac2b9da568d6abeb2570d55646b8adf1"],["ee163026e9fd6fe017c38f06a5be6fc125424b371ce2708e7bf4491691e5764a","1acb250f255dd61c43d94ccc670d0f58f49ae3fa15b96623e5430da0ad6c62b2"],["b268f5ef9ad51e4d78de3a750c2dc89b1e626d43505867999932e5db33af3d80","5f310d4b3c99b9ebb19f77d41c1dee018cf0d34fd4191614003e945a1216e423"],["ff07f3118a9df035e9fad85eb6c7bfe42b02f01ca99ceea3bf7ffdba93c4750d","438136d603e858a3a5c440c38eccbaddc1d2942114e2eddd4740d098ced1f0d8"],["8d8b9855c7c052a34146fd20ffb658bea4b9f69e0d825ebec16e8c3ce2b526a1","cdb559eedc2d79f926baf44fb84ea4d44bcf50fee51d7ceb30e2e7f463036758"],["52db0b5384dfbf05bfa9d472d7ae26dfe4b851ceca91b1eba54263180da32b63","c3b997d050ee5d423ebaf66a6db9f57b3180c902875679de924b69d84a7b375"],["e62f9490d3d51da6395efd24e80919cc7d0f29c3f3fa48c6fff543becbd43352","6d89ad7ba4876b0b22c2ca280c682862f342c8591f1daf5170e07bfd9ccafa7d"],["7f30ea2476b399b4957509c88f77d0191afa2ff5cb7b14fd6d8e7d65aaab1193","ca5ef7d4b231c94c3b15389a5f6311e9daff7bb67b103e9880ef4bff637acaec"],["5098ff1e1d9f14fb46a210fada6c903fef0fb7b4a1dd1d9ac60a0361800b7a00","9731141d81fc8f8084d37c6e7542006b3ee1b40d60dfe5362a5b132fd17ddc0"],["32b78c7de9ee512a72895be6b9cbefa6e2f3c4ccce445c96b9f2c81e2778ad58","ee1849f513df71e32efc3896ee28260c73bb80547ae2275ba497237794c8753c"],["e2cb74fddc8e9fbcd076eef2a7c72b0ce37d50f08269dfc074b581550547a4f7","d3aa2ed71c9dd2247a62df062736eb0baddea9e36122d2be8641abcb005cc4a4"],["8438447566d4d7bedadc299496ab357426009a35f235cb141be0d99cd10ae3a8","c4e1020916980a4da5d01ac5e6ad330734ef0d7906631c4f2390426b2edd791f"],["4162d488b89402039b584c6fc6c308870587d9c46f660b878ab65c82c711d67e","67163e903236289f776f22c25fb8a3afc1732f2b84b4e95dbda47ae5a0852649"],["3fad3fa84caf0f34f0f89bfd2dcf54fc175d767aec3e50684f3ba4a4bf5f683d","cd1bc7cb6cc407bb2f0ca647c718a730cf71872e7d0d2a53fa20efcdfe61826"],["674f2600a3007a00568c1a7ce05d0816c1fb84bf1370798f1c69532faeb1a86b","299d21f9413f33b3edf43b257004580b70db57da0b182259e09eecc69e0d38a5"],["d32f4da54ade74abb81b815ad1fb3b263d82d6c692714bcff87d29bd5ee9f08f","f9429e738b8e53b968e99016c059707782e14f4535359d582fc416910b3eea87"],["30e4e670435385556e593657135845d36fbb6931f72b08cb1ed954f1e3ce3ff6","462f9bce619898638499350113bbc9b10a878d35da70740dc695a559eb88db7b"],["be2062003c51cc3004682904330e4dee7f3dcd10b01e580bf1971b04d4cad297","62188bc49d61e5428573d48a74e1c655b1c61090905682a0d5558ed72dccb9bc"],["93144423ace3451ed29e0fb9ac2af211cb6e84a601df5993c419859fff5df04a","7c10dfb164c3425f5c71a3f9d7992038f1065224f72bb9d1d902a6d13037b47c"],["b015f8044f5fcbdcf21ca26d6c34fb8197829205c7b7d2a7cb66418c157b112c","ab8c1e086d04e813744a655b2df8d5f83b3cdc6faa3088c1d3aea1454e3a1d5f"],["d5e9e1da649d97d89e4868117a465a3a4f8a18de57a140d36b3f2af341a21b52","4cb04437f391ed73111a13cc1d4dd0db1693465c2240480d8955e8592f27447a"],["d3ae41047dd7ca065dbf8ed77b992439983005cd72e16d6f996a5316d36966bb","bd1aeb21ad22ebb22a10f0303417c6d964f8cdd7df0aca614b10dc14d125ac46"],["463e2763d885f958fc66cdd22800f0a487197d0a82e377b49f80af87c897b065","bfefacdb0e5d0fd7df3a311a94de062b26b80c61fbc97508b79992671ef7ca7f"],["7985fdfd127c0567c6f53ec1bb63ec3158e597c40bfe747c83cddfc910641917","603c12daf3d9862ef2b25fe1de289aed24ed291e0ec6708703a5bd567f32ed03"],["74a1ad6b5f76e39db2dd249410eac7f99e74c59cb83d2d0ed5ff1543da7703e9","cc6157ef18c9c63cd6193d83631bbea0093e0968942e8c33d5737fd790e0db08"],["30682a50703375f602d416664ba19b7fc9bab42c72747463a71d0896b22f6da3","553e04f6b018b4fa6c8f39e7f311d3176290d0e0f19ca73f17714d9977a22ff8"],["9e2158f0d7c0d5f26c3791efefa79597654e7a2b2464f52b1ee6c1347769ef57","712fcdd1b9053f09003a3481fa7762e9ffd7c8ef35a38509e2fbf2629008373"],["176e26989a43c9cfeba4029c202538c28172e566e3c4fce7322857f3be327d66","ed8cc9d04b29eb877d270b4878dc43c19aefd31f4eee09ee7b47834c1fa4b1c3"],["75d46efea3771e6e68abb89a13ad747ecf1892393dfc4f1b7004788c50374da8","9852390a99507679fd0b86fd2b39a868d7efc22151346e1a3ca4726586a6bed8"],["809a20c67d64900ffb698c4c825f6d5f2310fb0451c869345b7319f645605721","9e994980d9917e22b76b061927fa04143d096ccc54963e6a5ebfa5f3f8e286c1"],["1b38903a43f7f114ed4500b4eac7083fdefece1cf29c63528d563446f972c180","4036edc931a60ae889353f77fd53de4a2708b26b6f5da72ad3394119daf408f9"]]}}]})
},{"../elliptic":84,assert:50,"bn.js":81,"hash.js":97}],91:[function(e,t){function r(e){return this instanceof r?("string"==typeof e&&(n(o.curves.hasOwnProperty(e),"Unknown curve "+e),e=o.curves[e]),e instanceof o.curves.PresetCurve&&(e={curve:e}),this.curve=e.curve.curve,this.n=this.curve.n,this.nh=this.n.shrn(1),this.g=this.curve.g,this.g=e.curve.g,this.g.precompute(e.curve.n.bitLength()+1),void(this.hash=e.hash||e.curve.hash)):new r(e)}var n=e("assert"),i=e("bn.js"),o=e("../../elliptic"),s=(o.utils,e("./key")),a=e("./signature");t.exports=r,r.prototype.keyPair=function(e,t){return new s(this,e,t)},r.prototype.genKeyPair=function(e){e||(e={});for(var t=new o.hmacDRBG({hash:this.hash,pers:e.pers,entropy:e.entropy||o.rand(this.hash.hmacStrength),nonce:this.n.toArray()}),r=this.n.byteLength(),n=this.n.sub(new i(2));;){var s=new i(t.generate(r));if(!(s.cmp(n)>0))return s.iaddn(1),this.keyPair(s)}},r.prototype._truncateToN=function(e,t){var r=8*e.byteLength()-this.n.bitLength();return r>0&&(e=e.shrn(r)),!t&&e.cmp(this.n)>=0?e.sub(this.n):e},r.prototype.sign=function(e,t,r){t=this.keyPair(t,"hex"),e=this._truncateToN(new i(e,16)),r||(r={});for(var n=this.n.byteLength(),s=t.getPrivate().toArray(),h=s.length;21>h;h++)s.unshift(0);for(var c=e.toArray(),h=c.length;n>h;h++)c.unshift(0);for(var u=new o.hmacDRBG({hash:this.hash,entropy:s,nonce:c}),f=this.n.sub(new i(1));;){var d=new i(u.generate(this.n.byteLength()));if(d=this._truncateToN(d,!0),!(d.cmpn(1)<=0||d.cmp(f)>=0)){var l=this.g.mul(d);if(!l.isInfinity()){var p=l.getX().mod(this.n);if(0!==p.cmpn(0)){var b=d.invm(this.n).mul(p.mul(t.getPrivate()).iadd(e)).mod(this.n);if(0!==b.cmpn(0))return r.canonical&&b.cmp(this.nh)>0&&(b=this.n.sub(b)),new a(p,b)}}}}},r.prototype.verify=function(e,t,r){e=this._truncateToN(new i(e,16)),r=this.keyPair(r,"hex"),t=new a(t,"hex");var n=t.r,o=t.s;if(n.cmpn(1)<0||n.cmp(this.n)>=0)return!1;if(o.cmpn(1)<0||o.cmp(this.n)>=0)return!1;var s=o.invm(this.n),h=s.mul(e).mod(this.n),c=s.mul(n).mod(this.n),u=this.g.mulAdd(h,r.getPublic(),c);return u.isInfinity()?!1:0===u.getX().mod(this.n).cmp(n)}},{"../../elliptic":84,"./key":92,"./signature":93,assert:50,"bn.js":81}],92:[function(e,t){function r(e,t,n){return t instanceof r?t:n instanceof r?n:(t||(t=n,n=null),null!==t&&"object"==typeof t&&(t.x?(n=t,t=null):(t.priv||t.pub)&&(n=t.pub,t=t.priv)),this.ec=e,this.priv=null,this.pub=null,void(this._importPublicHex(t,n)||("hex"===n&&(n=null),t&&this._importPrivate(t),n&&this._importPublic(n))))}var n=(e("assert"),e("bn.js")),i=e("../../elliptic"),o=i.utils;t.exports=r,r.prototype.validate=function(){var e=this.getPublic();return e.isInfinity()?{result:!1,reason:"Invalid public key"}:e.validate()?e.mul(this.ec.curve.n).isInfinity()?{result:!0,reason:null}:{result:!1,reason:"Public key * N != O"}:{result:!1,reason:"Public key is not a point"}},r.prototype.getPublic=function(e,t){if(this.pub||(this.pub=this.ec.g.mul(this.priv)),"string"==typeof e&&(t=e,e=null),!t)return this.pub;for(var r=this.ec.curve.p.byteLength(),n=this.pub.getX().toArray(),i=n.length;r>i;i++)n.unshift(0);if(e)var s=[this.pub.getY().isEven()?2:3].concat(n);else{for(var a=this.pub.getY().toArray(),i=a.length;r>i;i++)a.unshift(0);var s=[4].concat(n,a)}return o.encode(s,t)},r.prototype.getPrivate=function(e){return"hex"===e?this.priv.toString(16,2):this.priv},r.prototype._importPrivate=function(e){this.priv=new n(e,16),this.priv=this.priv.mod(this.ec.curve.n)},r.prototype._importPublic=function(e){this.pub=this.ec.curve.point(e.x,e.y)},r.prototype._importPublicHex=function(e,t){e=o.toArray(e,t);var r=this.ec.curve.p.byteLength();if(4===e[0]&&e.length-1===2*r)this.pub=this.ec.curve.point(e.slice(1,1+r),e.slice(1+r,1+2*r));else{if(2!==e[0]&&3!==e[0]||e.length-1!==r)return!1;this.pub=this.ec.curve.pointFromX(3===e[0],e.slice(1,1+r))}return!0},r.prototype.derive=function(e){return e.mul(this.priv).getX()},r.prototype.sign=function(e){return this.ec.sign(e,this)},r.prototype.verify=function(e,t){return this.ec.verify(e,t,this)},r.prototype.inspect=function(){return"<Key priv: "+(this.priv&&this.priv.toString(16,2))+" pub: "+(this.pub&&this.pub.inspect())+" >"}},{"../../elliptic":84,assert:50,"bn.js":81}],93:[function(e,t){function r(e,t){return e instanceof r?e:void(this._importDER(e,t)||(n(e&&t,"Signature without r or s"),this.r=new i(e,16),this.s=new i(t,16)))}var n=e("assert"),i=e("bn.js"),o=e("../../elliptic"),s=o.utils;t.exports=r,r.prototype._importDER=function(e,t){if(e=s.toArray(e,t),e.length<6||48!==e[0]||2!==e[2])return!1;var r=e[1];if(1+r>e.length)return!1;var n=e[3];if(n>=128)return!1;if(4+n+2>=e.length)return!1;if(2!==e[4+n])return!1;var o=e[5+n];return o>=128?!1:4+n+2+o>e.length?!1:(this.r=new i(e.slice(4,4+n)),this.s=new i(e.slice(4+n+2,4+n+2+o)),!0)},r.prototype.toDER=function(e){var t=this.r.toArray(),r=this.s.toArray();128&t[0]&&(t=[0].concat(t)),128&r[0]&&(r=[0].concat(r));var n=t.length+r.length+4,i=[48,n,2,t.length];return i=i.concat(t,[2,r.length],r),s.encode(i,e)}},{"../../elliptic":84,assert:50,"bn.js":81}],94:[function(e,t){function r(e){if(!(this instanceof r))return new r(e);this.hash=e.hash,this.predResist=!!e.predResist,this.outLen=this.hash.outSize,this.minEntropy=e.minEntropy||this.hash.hmacStrength,this.reseed=null,this.reseedInterval=null,this.K=null,this.V=null;var t=s.toArray(e.entropy,e.entropyEnc),i=s.toArray(e.nonce,e.nonceEnc),o=s.toArray(e.pers,e.persEnc);n(t.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._init(t,i,o)}var n=e("assert"),i=e("hash.js"),o=e("../elliptic"),s=o.utils;t.exports=r,r.prototype._init=function(e,t,r){var n=e.concat(t).concat(r);this.K=new Array(this.outLen/8),this.V=new Array(this.outLen/8);for(var i=0;i<this.V.length;i++)this.K[i]=0,this.V[i]=1;this._update(n),this.reseed=1,this.reseedInterval=281474976710656},r.prototype._hmac=function(){return new i.hmac(this.hash,this.K)},r.prototype._update=function(e){var t=this._hmac().update(this.V).update([0]);e&&(t=t.update(e)),this.K=t.digest(),this.V=this._hmac().update(this.V).digest(),e&&(this.K=this._hmac().update(this.V).update([1]).update(e).digest(),this.V=this._hmac().update(this.V).digest())},r.prototype.reseed=function(e,t,r,i){"string"!=typeof t&&(i=r,r=t,t=null),e=s.toBuffer(e,t),r=s.toBuffer(r,i),n(e.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._update(e.concat(r||[])),this.reseed=1},r.prototype.generate=function(e,t,r,n){if(this.reseed>this.reseedInterval)throw new Error("Reseed is required");"string"!=typeof t&&(n=r,r=t,t=null),r&&(r=s.toArray(r,n),this._update(r));for(var i=[];i.length<e;)this.V=this._hmac().update(this.V).digest(),i=i.concat(this.V);var o=i.slice(0,e);return this._update(r),this.reseed++,s.encode(o,t)}},{"../elliptic":84,assert:50,"hash.js":97}],95:[function(e,t,r){function n(e,t){if(Array.isArray(e))return e.slice();if(!e)return[];var r=[];if("string"==typeof e)if(t){if("hex"===t){e=e.replace(/[^a-z0-9]+/gi,""),e.length%2!==0&&(e="0"+e);for(var n=0;n<e.length;n+=2)r.push(parseInt(e[n]+e[n+1],16))}}else for(var n=0;n<e.length;n++){var i=e.charCodeAt(n),o=i>>8,s=255&i;o?r.push(o,s):r.push(s)}else for(var n=0;n<e.length;n++)r[n]=0|e[n];return r}function i(e){for(var t="",r=0;r<e.length;r++)t+=o(e[r].toString(16));return t}function o(e){return 1===e.length?"0"+e:e}function s(e,t){for(var r=[],n=1<<t+1,i=e.clone();i.cmpn(1)>=0;){var o;if(i.isOdd()){var s=i.andln(n-1);o=s>(n>>1)-1?(n>>1)-s:s,i.isubn(o)}else o=0;r.push(o);for(var a=0!==i.cmpn(0)&&0===i.andln(n-1)?t+1:1,h=1;a>h;h++)r.push(0);i.ishrn(a)}return r}function a(e,t){var r=[[],[]];e=e.clone(),t=t.clone();for(var n=0,i=0;e.cmpn(-n)>0||t.cmpn(-i)>0;){var o=e.andln(3)+n&3,s=t.andln(3)+i&3;3===o&&(o=-1),3===s&&(s=-1);var a;if(0===(1&o))a=0;else{var h=e.andln(7)+n&7;a=3!==h&&5!==h||2!==s?o:-o}r[0].push(a);var c;if(0===(1&s))c=0;else{var h=t.andln(7)+i&7;c=3!==h&&5!==h||2!==o?s:-s}r[1].push(c),2*n===a+1&&(n=1-n),2*i===c+1&&(i=1-i),e.ishrn(1),t.ishrn(1)}return r}var h=(e("assert"),e("bn.js"),r);h.toArray=n,h.toHex=i,h.encode=function(e,t){return"hex"===t?i(e):e},h.zero2=o,h.getNAF=s,h.getJSF=a},{assert:50,"bn.js":81}],96:[function(e,t){function r(e){this.rand=e}var n;if(t.exports=function(e){return n||(n=new r(null)),n.generate(e)},t.exports.Rand=r,r.prototype.generate=function(e){return this._rand(e)},"object"==typeof window)r.prototype._rand=window.crypto&&window.crypto.getRandomValues?function(e){var t=new Uint8Array(e);return window.crypto.getRandomValues(t),t}:window.msCrypto&&window.msCrypto.getRandomValues?function(e){var t=new Uint8Array(e);return window.msCrypto.getRandomValues(t),t}:function(){throw new Error("Not implemented yet")};else try{var i=e("crypto");r.prototype._rand=function(e){return i.randomBytes(e)}}catch(e){r.prototype._rand=function(e){for(var t=new Uint8Array(e),r=0;r<t.length;r++)t[r]=this.rand.getByte();return t}}},{}],97:[function(e,t,r){var n=r;n.utils=e("./hash/utils"),n.common=e("./hash/common"),n.sha=e("./hash/sha"),n.ripemd=e("./hash/ripemd"),n.hmac=e("./hash/hmac"),n.sha256=n.sha.sha256,n.sha224=n.sha.sha224,n.ripemd160=n.ripemd.ripemd160},{"./hash/common":98,"./hash/hmac":99,"./hash/ripemd":100,"./hash/sha":101,"./hash/utils":102}],98:[function(e,t,r){function n(){this.pending=null,this.pendingTotal=0,this.blockSize=this.constructor.blockSize,this.outSize=this.constructor.outSize,this.hmacStrength=this.constructor.hmacStrength,this.endian="big"}var i=e("../hash"),o=i.utils,s=o.assert;r.BlockHash=n,n.prototype.update=function(e,t){if(e=o.toArray(e,t),this.pending=this.pending?this.pending.concat(e):e,this.pendingTotal+=e.length,this.pending.length>=this.blockSize/8){e=this.pending;var r=e.length%(this.blockSize/8);this.pending=e.slice(e.length-r,e.length),0===this.pending.length&&(this.pending=null),e=o.join32(e.slice(0,e.length-r),this.endian);for(var n=0;n<e.length;n+=this.blockSize/32)this._update(e.slice(n,n+this.blockSize/32))}return this},n.prototype.digest=function(e){return this.update(this._pad()),s(null===this.pending),this._digest(e)},n.prototype._pad=function(){var e=this.pendingTotal,t=this.blockSize/8,r=t-(e+8)%t,n=new Array(r+8);n[0]=128;for(var i=1;r>i;i++)n[i]=0;return e<<=3,"big"===this.endian?(n[i++]=0,n[i++]=0,n[i++]=0,n[i++]=0,n[i++]=e>>>24&255,n[i++]=e>>>16&255,n[i++]=e>>>8&255,n[i++]=255&e):(n[i++]=255&e,n[i++]=e>>>8&255,n[i++]=e>>>16&255,n[i++]=e>>>24&255,n[i++]=0,n[i++]=0,n[i++]=0,n[i++]=0),n}},{"../hash":97}],99:[function(e,t,r){function n(e,t,r){return this instanceof n?(this.Hash=e,this.blockSize=e.blockSize/8,this.outSize=e.outSize/8,void this._init(o.toArray(t,r))):new n(e,t,r)}var i=e("../hash"),o=i.utils,s=o.assert;t.exports=n,n.prototype._init=function(e){e.length>this.blockSize&&(e=(new this.Hash).update(e).digest()),s(e.length<=this.blockSize);for(var t=e.length;t<this.blockSize;t++)e.push(0);for(var r=e.slice(),t=0;t<e.length;t++)e[t]^=54,r[t]^=92;this.hash={inner:(new this.Hash).update(e),outer:(new this.Hash).update(r)}},n.prototype.update=function(e,t){return this.hash.inner.update(e,t),this},n.prototype.digest=function(e){return this.hash.outer.update(this.hash.inner.digest()),this.hash.outer.digest(e)}},{"../hash":97}],100:[function(e,t,r){function n(){return this instanceof n?(l.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],void(this.endian="little")):new n}function i(e,t,r,n){return 15>=e?t^r^n:31>=e?t&r|~t&n:47>=e?(t|~r)^n:63>=e?t&n|r&~n:t^(r|~n)}function o(e){return 15>=e?0:31>=e?1518500249:47>=e?1859775393:63>=e?2400959708:2840853838}function s(e){return 15>=e?1352829926:31>=e?1548603684:47>=e?1836072691:63>=e?2053994217:0}var a=e("../hash"),h=a.utils,c=h.rotl32,u=h.sum32,f=h.sum32_3,d=h.sum32_4,l=a.common.BlockHash;h.inherits(n,l),r.ripemd160=n,n.blockSize=512,n.outSize=160,n.hmacStrength=192,n.prototype._update=function(e){for(var t=this.h[0],r=this.h[1],n=this.h[2],a=this.h[3],h=this.h[4],l=t,v=r,y=n,w=a,_=h,x=0;80>x;x++){var S=u(c(d(t,i(x,r,n,a),e[p[x]],o(x)),g[x]),h);t=h,h=a,a=c(n,10),n=r,r=S,S=u(c(d(l,i(79-x,v,y,w),e[b[x]],s(x)),m[x]),_),l=_,_=w,w=c(y,10),y=v,v=S}S=f(this.h[1],n,w),this.h[1]=f(this.h[2],a,_),this.h[2]=f(this.h[3],h,l),this.h[3]=f(this.h[4],t,v),this.h[4]=f(this.h[0],r,y),this.h[0]=S},n.prototype._digest=function(e){return"hex"===e?h.toHex32(this.h,"little"):h.split32(this.h,"little")};var p=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],b=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],g=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],m=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]},{"../hash":97}],101:[function(e,t,r){function n(){return this instanceof n?(v.call(this),this.h=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],void(this.k=y)):new n}function i(){return this instanceof i?(n.call(this),void(this.h=[3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428])):new i}function o(e,t,r){return e&t^~e&r}function s(e,t,r){return e&t^e&r^t&r}function a(e){return p(e,2)^p(e,13)^p(e,22)}function h(e){return p(e,6)^p(e,11)^p(e,25)}function c(e){return p(e,7)^p(e,18)^e>>>3}function u(e){return p(e,17)^p(e,19)^e>>>10}var f=e("../hash"),d=f.utils,l=d.assert,p=d.rotr32,b=(d.rotl32,d.sum32),g=d.sum32_4,m=d.sum32_5,v=f.common.BlockHash,y=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];d.inherits(n,v),r.sha256=n,n.blockSize=512,n.outSize=256,n.hmacStrength=192,n.prototype._update=function(e){for(var t=new Array(64),r=0;16>r;r++)t[r]=e[r];for(;r<t.length;r++)t[r]=g(u(t[r-2]),t[r-7],c(t[r-15]),t[r-16]);var n=this.h[0],i=this.h[1],f=this.h[2],d=this.h[3],p=this.h[4],v=this.h[5],y=this.h[6],w=this.h[7];l(this.k.length===t.length);for(var r=0;r<t.length;r++){var _=m(w,h(p),o(p,v,y),this.k[r],t[r]),x=b(a(n),s(n,i,f));w=y,y=v,v=p,p=b(d,_),d=f,f=i,i=n,n=b(_,x)}this.h[0]=b(this.h[0],n),this.h[1]=b(this.h[1],i),this.h[2]=b(this.h[2],f),this.h[3]=b(this.h[3],d),this.h[4]=b(this.h[4],p),this.h[5]=b(this.h[5],v),this.h[6]=b(this.h[6],y),this.h[7]=b(this.h[7],w)},n.prototype._digest=function(e){return"hex"===e?d.toHex32(this.h,"big"):d.split32(this.h,"big")},d.inherits(i,n),r.sha224=i,i.blockSize=512,i.outSize=224,i.hmacStrength=192,i.prototype._digest=function(e){return"hex"===e?d.toHex32(this.h.slice(0,7),"big"):d.split32(this.h.slice(0,7),"big")}},{"../hash":97}],102:[function(e,t,r){function n(e,t){if(Array.isArray(e))return e.slice();if(!e)return[];var r=[];if("string"==typeof e)if(t){if("hex"===t){e=e.replace(/[^a-z0-9]+/gi,""),e.length%2!=0&&(e="0"+e);for(var n=0;n<e.length;n+=2)r.push(parseInt(e[n]+e[n+1],16))}}else for(var n=0;n<e.length;n++){var i=e.charCodeAt(n),o=i>>8,s=255&i;o?r.push(o,s):r.push(s)}else for(var n=0;n<e.length;n++)r[n]=0|e[n];return r}function i(e){for(var t="",r=0;r<e.length;r++)t+=s(e[r].toString(16));return t}function o(e,t){for(var r="",n=0;n<e.length;n++){var i=e[n];"little"===t&&(i=i>>>24|i>>>8&65280|i<<8&16711680|(255&i)<<24,0>i&&(i+=4294967296)),r+=a(i.toString(16))}return r}function s(e){return 1===e.length?"0"+e:e}function a(e){return 7===e.length?"0"+e:6===e.length?"00"+e:5===e.length?"000"+e:4===e.length?"0000"+e:3===e.length?"00000"+e:2===e.length?"000000"+e:1===e.length?"0000000"+e:e}function h(e,t){g(e.length%4===0);for(var r=new Array(e.length/4),n=0,i=0;n<r.length;n++,i+=4){var o;o="big"===t?e[i]<<24|e[i+1]<<16|e[i+2]<<8|e[i+3]:e[i+3]<<24|e[i+2]<<16|e[i+1]<<8|e[i],0>o&&(o+=4294967296),r[n]=o}return r}function c(e,t){for(var r=new Array(4*e.length),n=0,i=0;n<e.length;n++,i+=4){var o=e[n];"big"===t?(r[i]=o>>>24,r[i+1]=o>>>16&255,r[i+2]=o>>>8&255,r[i+3]=255&o):(r[i+3]=o>>>24,r[i+2]=o>>>16&255,r[i+1]=o>>>8&255,r[i]=255&o)}return r}function u(e,t){return e>>>t|e<<32-t}function f(e,t){return e<<t|e>>>32-t}function d(e,t){var r=e+t&4294967295;return 0>r&&(r+=4294967296),r}function l(e,t,r){var n=e+t+r&4294967295;return 0>n&&(n+=4294967296),n}function p(e,t,r,n){var i=e+t+r+n&4294967295;return 0>i&&(i+=4294967296),i}function b(e,t,r,n,i){var o=e+t+r+n+i&4294967295;return 0>o&&(o+=4294967296),o}function g(e,t){if(!e)throw new Error(t||"Assertion failed")}var m=r;m.toArray=n,m.toHex=i,m.toHex32=o,m.zero2=s,m.zero8=a,m.join32=h,m.split32=c,m.rotr32=u,m.rotl32=f,m.sum32=d,m.sum32_3=l,m.sum32_4=p,m.sum32_5=b,m.assert=g,m.inherits="function"==typeof Object.create?function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:function(e,t){e.super_=t;var r=function(){};r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e}},{}],103:[function(e,t){t.exports={name:"elliptic",version:"0.15.15",description:"EC cryptography",main:"lib/elliptic.js",scripts:{test:"mocha --reporter=spec test/*-test.js"},repository:{type:"git",url:"git@github.com:indutny/elliptic"},keywords:["EC","Elliptic","curve","Cryptography"],author:{name:"Fedor Indutny",email:"fedor@indutny.com"},license:"MIT",bugs:{url:"https://github.com/indutny/elliptic/issues"},homepage:"https://github.com/indutny/elliptic",devDependencies:{browserify:"^3.44.2",mocha:"^1.18.2","uglify-js":"^2.4.13"},dependencies:{"bn.js":"^0.15.0",brorand:"^1.0.1","hash.js":"^0.2.0",inherits:"^2.0.1"},gitHead:"4bf1f50607285bff4ae19521217dbc801c3d36af",_id:"elliptic@0.15.15",_shasum:"63269184a856d6e00871e84f37a8401ff84e4aea",_from:"elliptic@>=0.15.14 <0.16.0",_npmVersion:"2.1.6",_nodeVersion:"0.10.33",_npmUser:{name:"indutny",email:"fedor@indutny.com"},maintainers:[{name:"indutny",email:"fedor@indutny.com"}],dist:{shasum:"63269184a856d6e00871e84f37a8401ff84e4aea",tarball:"http://registry.npmjs.org/elliptic/-/elliptic-0.15.15.tgz"},directories:{},_resolved:"https://registry.npmjs.org/elliptic/-/elliptic-0.15.15.tgz",readme:"ERROR: No README data found!"}},{}],104:[function(e,t){(function(e){t.exports=function(t,r,n,i){i/=8;for(var o,s,a,h=0,c=new e(i),u=0;;){if(o=t.createHash("md5"),u++>0&&o.update(s),o.update(r),o.update(n),s=o.digest(),a=0,i>0)for(;;){if(0===i)break;if(a===s.length)break;c[h++]=s[a++],i--}if(0===i)break}for(a=0;a<s.length;a++)s[a]=0;return c}}).call(this,e("buffer").Buffer)},{buffer:52}],105:[function(e,t){t.exports={"2.16.840.1.101.3.4.1.1":"aes-128-ecb","2.16.840.1.101.3.4.1.2":"aes-128-cbc","2.16.840.1.101.3.4.1.3":"aes-128-ofb","2.16.840.1.101.3.4.1.4":"aes-128-cfb","2.16.840.1.101.3.4.1.21":"aes-192-ecb","2.16.840.1.101.3.4.1.22":"aes-192-cbc","2.16.840.1.101.3.4.1.23":"aes-192-ofb","2.16.840.1.101.3.4.1.24":"aes-192-cfb","2.16.840.1.101.3.4.1.41":"aes-256-ecb","2.16.840.1.101.3.4.1.42":"aes-256-cbc","2.16.840.1.101.3.4.1.43":"aes-256-ofb","2.16.840.1.101.3.4.1.44":"aes-256-cfb"}},{}],106:[function(e,t,r){var n=e("asn1.js"),i=e("asn1.js-rfc3280"),o=n.define("RSAPrivateKey",function(){this.seq().obj(this.key("version").int(),this.key("modulus").int(),this.key("publicExponent").int(),this.key("privateExponent").int(),this.key("prime1").int(),this.key("prime2").int(),this.key("exponent1").int(),this.key("exponent2").int(),this.key("coefficient").int())});r.RSAPrivateKey=o;var s=n.define("RSAPublicKey",function(){this.seq().obj(this.key("modulus").int(),this.key("publicExponent").int())});r.RSAPublicKey=s;var a=i.SubjectPublicKeyInfo;r.PublicKey=a;var h=n.define("ECPublicKey",function(){this.seq().obj(this.key("algorithm").seq().obj(this.key("id").objid(),this.key("curve").objid()),this.key("subjectPrivateKey").bitstr())});r.ECPublicKey=h;var c=n.define("ECPrivateWrap",function(){this.seq().obj(this.key("version").int(),this.key("algorithm").seq().obj(this.key("id").objid(),this.key("curve").objid()),this.key("subjectPrivateKey").octstr())});r.ECPrivateWrap=c;var u=n.define("PrivateKeyInfo",function(){this.seq().obj(this.key("version").int(),this.key("algorithm").use(i.AlgorithmIdentifier),this.key("subjectPrivateKey").octstr())});r.PrivateKey=u;var f=n.define("EncryptedPrivateKeyInfo",function(){this.seq().obj(this.key("algorithm").seq().obj(this.key("id").objid(),this.key("decrypt").seq().obj(this.key("kde").seq().obj(this.key("id").objid(),this.key("kdeparams").seq().obj(this.key("salt").octstr(),this.key("iters").int())),this.key("cipher").seq().obj(this.key("algo").objid(),this.key("iv").octstr()))),this.key("subjectPrivateKey").octstr())}),d=n.define("dsaParams",function(){this.seq().obj(this.key("algorithm").objid(),this.key("parameters").seq().obj(this.key("p").int(),this.key("q").int(),this.key("g").int()))});r.EncryptedPrivateKey=f;var l=n.define("DSAPublicKey",function(){this.seq().obj(this.key("algorithm").use(d),this.key("subjectPublicKey").bitstr())});r.DSAPublicKey=l;var p=n.define("DSAPrivateWrap",function(){this.seq().obj(this.key("version").int(),this.key("algorithm").seq().obj(this.key("id").objid(),this.key("parameters").seq().obj(this.key("p").int(),this.key("q").int(),this.key("g").int())),this.key("subjectPrivateKey").octstr())});r.DSAPrivateWrap=p;var b=n.define("DSAPrivateKey",function(){this.seq().obj(this.key("version").int(),this.key("p").int(),this.key("q").int(),this.key("g").int(),this.key("pub_key").int(),this.key("priv_key").int())});r.DSAPrivateKey=b,r.DSAparam=n.define("DSAparam",function(){this.int()});var g=n.define("ECPrivateKey",function(){this.seq().obj(this.key("version").int(),this.key("privateKey").octstr(),this.key("parameters").optional().explicit(0).use(m),this.key("publicKey").optional().explicit(1).bitstr())});r.ECPrivateKey=g;var m=n.define("ECParameters",function(){this.choice({namedCurve:this.objid()})}),v=n.define("ECPrivateKey2",function(){this.seq().obj(this.key("version").int(),this.key("privateKey").octstr(),this.key("publicKey").seq().obj(this.key("key").bitstr()))});r.ECPrivateKey2=v,r.signature=n.define("signature",function(){this.seq().obj(this.key("r").int(),this.key("s").int())})},{"asn1.js":110,"asn1.js-rfc3280":109}],107:[function(e,t){(function(r){function n(e){for(var t=[];e;){if(e.length<64){t.push(e);break}t.push(e.slice(0,64)),e=e.slice(64)}return t.join("\n")}var i=/Proc-Type: 4,ENCRYPTED\n\r?DEK-Info: AES-((?:128)|(?:192)|(?:256))-CBC,([0-9A-H]+)\n\r?\n\r?([0-9A-z\n\r\+\/\=]+)\n\r?/m,o=/^-----BEGIN (.*)-----\n/,s=e("./EVP_BytesToKey");t.exports=function(e,t,a){var h=e.toString(),c=h.match(i);if(!c)return e;var u="aes"+c[1],f=new r(c[2],"hex"),d=new r(c[3].replace(/\n\r?/g,""),"base64"),l=s(a,t,f.slice(0,8),parseInt(c[1])),p=[],b=a.createDecipheriv(u,l,f);p.push(b.update(d)),p.push(b.final());var g=r.concat(p).toString("base64"),m=h.match(o)[1];return"-----BEGIN "+m+"-----\n"+n(g)+"\n-----END "+m+"-----\n"}}).call(this,e("buffer").Buffer)},{"./EVP_BytesToKey":104,buffer:52}],108:[function(e,t){(function(r){function n(e,t){var n;"object"!=typeof e||r.isBuffer(e)||(n=e.passphrase,e=e.key),"string"==typeof e&&(e=new r(e)),n&&(e=h(e,n,t));var a,c,u=o.strip(e),f=u.tag,d=new r(u.base64,"base64");switch(f){case"PUBLIC KEY":switch(c=s.PublicKey.decode(d,"der"),a=c.algorithm.algorithm.join(".")){case"1.2.840.113549.1.1.1":return s.RSAPublicKey.decode(c.subjectPublicKey.data,"der");case"1.2.840.10045.2.1":return{type:"ec",data:s.ECPublicKey.decode(d,"der")};case"1.2.840.10040.4.1":return c=s.DSAPublicKey.decode(d,"der"),c.algorithm.parameters.pub_key=s.DSAparam.decode(c.subjectPublicKey.data,"der"),{type:"dsa",data:c.algorithm.parameters};default:throw new Error("unknown key id "+a)}throw new Error("unknown key type "+f);case"ENCRYPTED PRIVATE KEY":d=s.EncryptedPrivateKey.decode(d,"der"),d=i(t,d,n);case"PRIVATE KEY":switch(c=s.PrivateKey.decode(d,"der"),a=c.algorithm.algorithm.join(".")){case"1.2.840.113549.1.1.1":return s.RSAPrivateKey.decode(c.subjectPrivateKey,"der");case"1.2.840.10045.2.1":return c=s.ECPrivateWrap.decode(d,"der"),{curve:c.algorithm.curve,privateKey:s.ECPrivateKey.decode(c.subjectPrivateKey,"der").privateKey};case"1.2.840.10040.4.1":return c=s.DSAPrivateWrap.decode(d,"der"),c.algorithm.parameters.priv_key=s.DSAparam.decode(c.subjectPrivateKey,"der"),{type:"dsa",params:c.algorithm.parameters};default:throw new Error("unknown key id "+a)}throw new Error("unknown key type "+f);case"RSA PUBLIC KEY":return s.RSAPublicKey.decode(d,"der");case"RSA PRIVATE KEY":return s.RSAPrivateKey.decode(d,"der");case"DSA PRIVATE KEY":return{type:"dsa",params:s.DSAPrivateKey.decode(d,"der")};case"EC PRIVATE KEY":return d=s.ECPrivateKey.decode(d,"der"),{curve:d.parameters.value,privateKey:d.privateKey};default:throw new Error("unknown key type "+f)}}function i(e,t,n){var i=t.algorithm.decrypt.kde.kdeparams.salt,o=t.algorithm.decrypt.kde.kdeparams.iters,s=a[t.algorithm.decrypt.cipher.algo.join(".")],h=t.algorithm.decrypt.cipher.iv,c=t.subjectPrivateKey,u=parseInt(s.split("-")[1],10)/8,f=e.pbkdf2Sync(n,i,o,u),d=e.createDecipheriv(s,f,h),l=[];return l.push(d.update(c)),l.push(d.final()),r.concat(l)}var o=e("pemstrip"),s=e("./asn1"),a=e("./aesid.json"),h=e("./fixProc");t.exports=n,n.signature=s.signature}).call(this,e("buffer").Buffer)},{"./aesid.json":105,"./asn1":106,"./fixProc":107,buffer:52,pemstrip:122}],109:[function(e,t,r){try{var n=e("asn1.js")}catch(t){var n=e("../..")}var i=n.define("CRLReason",function(){this.enum({0:"unspecified",1:"keyCompromise",2:"CACompromise",3:"affiliationChanged",4:"superseded",5:"cessationOfOperation",6:"certificateHold",8:"removeFromCRL",9:"privilegeWithdrawn",10:"AACompromise"})});r.CRLReason=i;var o=n.define("AlgorithmIdentifier",function(){this.seq().obj(this.key("algorithm").objid(),this.key("parameters").optional().any())});r.AlgorithmIdentifier=o;var s=n.define("Certificate",function(){this.seq().obj(this.key("tbsCertificate").use(a),this.key("signatureAlgorithm").use(o),this.key("signature").bitstr())});r.Certificate=s;var a=n.define("TBSCertificate",function(){this.seq().obj(this.key("version").def("v1").explicit(0).use(h),this.key("serialNumber").use(c),this.key("signature").use(o),this.key("issuer").use(g),this.key("validity").use(u),this.key("subject").use(g),this.key("subjectPublicKeyInfo").use(l),this.key("issuerUniqueID").optional().explicit(1).use(d),this.key("subjectUniqueID").optional().explicit(2).use(d),this.key("extensions").optional().explicit(3).use(p))});r.TBSCertificate=a;var h=n.define("Version",function(){this.int({0:"v1",1:"v2",2:"v3"})});r.Version=h;var c=n.define("CertificateSerialNumber",function(){this.int()});r.CertificateSerialNumber=c;var u=n.define("Validity",function(){this.seq().obj(this.key("notBefore").use(f),this.key("notAfter").use(f))});r.Validity=u;var f=n.define("Time",function(){this.choice({utcTime:this.utctime(),genTime:this.gentime()})});r.Time=f;var d=n.define("UniqueIdentifier",function(){this.bitstr()});r.UniqueIdentifier=d;var l=n.define("SubjectPublicKeyInfo",function(){this.seq().obj(this.key("algorithm").use(o),this.key("subjectPublicKey").bitstr())});r.SubjectPublicKeyInfo=l;var p=n.define("Extensions",function(){this.seqof(b)});r.Extensions=p;var b=n.define("Extension",function(){this.seq().obj(this.key("extnID").objid(),this.key("critical").bool().def(!1),this.key("extnValue").octstr())});r.Extension=b;var g=n.define("Name",function(){this.choice({rdn:this.use(m)})});r.Name=g;var m=n.define("RDNSequence",function(){this.seqof(v)});r.RDNSequence=m;var v=n.define("RelativeDistinguishedName",function(){this.setof(y)});r.RelativeDistinguishedName=v;var y=n.define("AttributeTypeAndValue",function(){this.seq().obj(this.key("type").use(w),this.key("value").use(_))});r.AttributeTypeAndValue=y;var w=n.define("AttributeType",function(){this.objid()});r.AttributeType=w;var _=n.define("AttributeValue",function(){this.any()});r.AttributeValue=_},{"../..":108,"asn1.js":110}],110:[function(e,t,r){var n=r;n.bignum=e("bn.js"),n.define=e("./asn1/api").define,n.base=e("./asn1/base"),n.constants=e("./asn1/constants"),n.decoders=e("./asn1/decoders"),n.encoders=e("./asn1/encoders")},{"./asn1/api":111,"./asn1/base":113,"./asn1/constants":117,"./asn1/decoders":119,"./asn1/encoders":121,"bn.js":81}],111:[function(e,t,r){function n(e,t){this.name=e,this.body=t,this.decoders={},this.encoders={}}var i=e("../asn1"),o=e("util"),s=e("vm"),a=r;a.define=function(e,t){return new n(e,t)},n.prototype._createNamed=function(e){var t=s.runInThisContext("(function "+this.name+"(entity) {\n  this._initNamed(entity);\n})");return o.inherits(t,e),t.prototype._initNamed=function(t){e.call(this,t)},new t(this)},n.prototype._getDecoder=function(e){return this.decoders.hasOwnProperty(e)||(this.decoders[e]=this._createNamed(i.decoders[e])),this.decoders[e]},n.prototype.decode=function(e,t,r){return this._getDecoder(t).decode(e,r)},n.prototype._getEncoder=function(e){return this.encoders.hasOwnProperty(e)||(this.encoders[e]=this._createNamed(i.encoders[e])),this.encoders[e]},n.prototype.encode=function(e,t,r){return this._getEncoder(t).encode(e,r)}},{"../asn1":110,util:212,vm:213}],112:[function(e,t,r){function n(e,t){return s.call(this,t),a.isBuffer(e)?(this.base=e,this.offset=0,void(this.length=e.length)):void this.error("Input not Buffer")}function i(e,t){if(Array.isArray(e))this.length=0,this.value=e.map(function(e){return e instanceof i||(e=new i(e,t)),this.length+=e.length,e},this);else if("number"==typeof e){if(!(e>=0&&255>=e))return t.error("non-byte EncoderBuffer value");this.value=e,this.length=1}else if("string"==typeof e)this.value=e,this.length=a.byteLength(e);else{if(!a.isBuffer(e))return t.error("Unsupported type: "+typeof e);this.value=e,this.length=e.length}}var o=(e("assert"),e("util")),s=e("../base").Reporter,a=e("buffer").Buffer;o.inherits(n,s),r.DecoderBuffer=n,n.prototype.save=function(){return{offset:this.offset}},n.prototype.restore=function(e){var t=new n(this.base);return t.offset=e.offset,t.length=this.offset,this.offset=e.offset,t},n.prototype.isEmpty=function(){return this.offset===this.length},n.prototype.readUInt8=function(e){return this.offset+1<=this.length?this.base.readUInt8(this.offset++,!0):this.error(e||"DecoderBuffer overrun")},n.prototype.skip=function(e,t){if(!(this.offset+e<=this.length))return this.error(t||"DecoderBuffer overrun");var r=new n(this.base);return r._reporterState=this._reporterState,r.offset=this.offset,r.length=this.offset+e,this.offset+=e,r},n.prototype.raw=function(e){return this.base.slice(e?e.offset:this.offset,this.length)},r.EncoderBuffer=i,i.prototype.join=function(e,t){return e||(e=new a(this.length)),t||(t=0),0===this.length?e:(Array.isArray(this.value)?this.value.forEach(function(r){r.join(e,t),t+=r.length}):("number"==typeof this.value?e[t]=this.value:"string"==typeof this.value?e.write(this.value,t):a.isBuffer(this.value)&&this.value.copy(e,t),t+=this.length),e)}},{"../base":113,assert:50,buffer:52,util:212}],113:[function(e,t,r){var n=r;n.Reporter=e("./reporter").Reporter,n.DecoderBuffer=e("./buffer").DecoderBuffer,n.EncoderBuffer=e("./buffer").EncoderBuffer,n.Node=e("./node")},{"./buffer":112,"./node":114,"./reporter":115}],114:[function(e,t){function r(e,t){var r={};
this._baseState=r,r.enc=e,r.parent=t||null,r.children=null,r.tag=null,r.args=null,r.reverseArgs=null,r.choice=null,r.optional=!1,r.any=!1,r.obj=!1,r.use=null,r.useDecoder=null,r.key=null,r.default=null,r.explicit=null,r.implicit=null,r.parent||(r.children=[],this._wrap())}var n=e("assert"),i=e("../base").Reporter,o=e("../base").EncoderBuffer,s=["seq","seqof","set","setof","octstr","bitstr","objid","bool","gentime","utctime","null_","enum","int","ia5str"],a=["key","obj","use","optional","explicit","implicit","def","choice","any"].concat(s),h=["_peekTag","_decodeTag","_use","_decodeStr","_decodeObjid","_decodeTime","_decodeNull","_decodeInt","_decodeBool","_decodeList","_encodeComposite","_encodeStr","_encodeObjid","_encodeTime","_encodeNull","_encodeInt","_encodeBool"];t.exports=r;var c=["enc","parent","children","tag","args","reverseArgs","choice","optional","any","obj","use","alteredUse","key","default","explicit","implicit"];r.prototype.clone=function(){var e=this._baseState,t={};c.forEach(function(r){t[r]=e[r]});var r=new this.constructor(t.parent);return r._baseState=t,r},r.prototype._wrap=function(){var e=this._baseState;a.forEach(function(t){this[t]=function(){var r=new this.constructor(this);return e.children.push(r),r[t].apply(r,arguments)}},this)},r.prototype._init=function(e){var t=this._baseState;n(null===t.parent),e.call(this),t.children=t.children.filter(function(e){return e._baseState.parent===this},this),n.equal(t.children.length,1,"Root node can have only one child")},r.prototype._useArgs=function(e){var t=this._baseState,r=e.filter(function(e){return e instanceof this.constructor},this);e=e.filter(function(e){return!(e instanceof this.constructor)},this),0!==r.length&&(n(null===t.children),t.children=r,r.forEach(function(e){e._baseState.parent=this},this)),0!==e.length&&(n(null===t.args),t.args=e,t.reverseArgs=e.map(function(e){if("object"!=typeof e||e.constructor!==Object)return e;var t={};return Object.keys(e).forEach(function(r){r==(0|r)&&(r|=0);var n=e[r];t[n]=r}),t}))},h.forEach(function(e){r.prototype[e]=function(){var t=this._baseState;throw new Error(e+" not implemented for encoding: "+t.enc)}}),s.forEach(function(e){r.prototype[e]=function(){var t=this._baseState,r=Array.prototype.slice.call(arguments);return n(null===t.tag),t.tag=e,this._useArgs(r),this}}),r.prototype.use=function(e){var t=this._baseState;return n(null===t.use),t.use=e,this},r.prototype.optional=function(){var e=this._baseState;return e.optional=!0,this},r.prototype.def=function(e){var t=this._baseState;return n(null===t.default),t.default=e,t.optional=!0,this},r.prototype.explicit=function(e){var t=this._baseState;return n(null===t.explicit&&null===t.implicit),t.explicit=e,this},r.prototype.implicit=function(e){var t=this._baseState;return n(null===t.explicit&&null===t.implicit),t.implicit=e,this},r.prototype.obj=function(){var e=this._baseState,t=Array.prototype.slice.call(arguments);return e.obj=!0,0!==t.length&&this._useArgs(t),this},r.prototype.key=function e(e){var t=this._baseState;return n(null===t.key),t.key=e,this},r.prototype.any=function(){var e=this._baseState;return e.any=!0,this},r.prototype.choice=function(e){var t=this._baseState;return n(null===t.choice),t.choice=e,this._useArgs(Object.keys(e).map(function(t){return e[t]})),this},r.prototype._decode=function(e){var t=this._baseState;if(null===t.parent)return e.wrapResult(t.children[0]._decode(e));var r,n=t.default,i=!0;if(null!==t.key&&(r=e.enterKey(t.key)),t.optional&&(i=this._peekTag(e,null!==t.explicit?t.explicit:null!==t.implicit?t.implicit:t.tag||0),e.isError(i)))return i;var o;if(t.obj&&i&&(o=e.enterObject()),i){if(null!==t.explicit){var s=this._decodeTag(e,t.explicit);if(e.isError(s))return s;e=s}if(null===t.use&&null===t.choice){if(t.any)var a=e.save();var h=this._decodeTag(e,null!==t.implicit?t.implicit:t.tag,t.any);if(e.isError(h))return h;t.any?n=e.raw(a):e=h}if(n=t.any?n:null===t.choice?this._decodeGeneric(t.tag,e):this._decodeChoice(e),e.isError(n))return n;if(!t.any&&null===t.choice&&null!==t.children){var c=t.children.some(function(t){t._decode(e)});if(c)return err}}return t.obj&&i&&(n=e.leaveObject(o)),null===t.key||null===n&&i!==!0||e.leaveKey(r,t.key,n),n},r.prototype._decodeGeneric=function(e,t){var r=this._baseState;return"seq"===e||"set"===e?null:"seqof"===e||"setof"===e?this._decodeList(t,e,r.args[0]):"octstr"===e||"bitstr"===e||"ia5str"===e?this._decodeStr(t,e):"objid"===e&&r.args?this._decodeObjid(t,r.args[0],r.args[1]):"objid"===e?this._decodeObjid(t,null,null):"gentime"===e||"utctime"===e?this._decodeTime(t,e):"null_"===e?this._decodeNull(t):"bool"===e?this._decodeBool(t):"int"===e||"enum"===e?this._decodeInt(t,r.args&&r.args[0]):null!==r.use?this._getUse(r.use,t._reporterState.obj)._decode(t):t.error("unknown tag: "+e)},r.prototype._getUse=function(e,t){var r=this._baseState;return r.useDecoder=this._use(e,t),n(null===r.useDecoder._baseState.parent),r.useDecoder=r.useDecoder._baseState.children[0],r.implicit!==r.useDecoder._baseState.implicit&&(r.useDecoder=r.useDecoder.clone(),r.useDecoder._baseState.implicit=r.implicit),r.useDecoder},r.prototype._decodeChoice=function(e){var t=this._baseState,r=null,n=!1;return Object.keys(t.choice).some(function(i){var o=e.save(),s=t.choice[i];try{var a=s._decode(e);if(e.isError(a))return!1;r={type:i,value:a},n=!0}catch(t){return e.restore(o),!1}return!0},this),n?r:e.error("Choice not matched")},r.prototype._createEncoderBuffer=function(e){return new o(e,this.reporter)},r.prototype._encode=function(e,t,r){var n=this._baseState;if(null===n.default||n.default!==e){var i=this._encodeValue(e,t,r);if(void 0!==i&&!this._skipDefault(i,t,r))return i}},r.prototype._encodeValue=function(e,t,r){var n=this._baseState;if(null===n.parent)return n.children[0]._encode(e,t||new i);var o=null;if(this.reporter=t,n.optional&&void 0===e){if(null===n.default)return;e=n.default}var s=null,a=!1;if(n.any)o=this._createEncoderBuffer(e);else if(n.choice)o=this._encodeChoice(e,t);else if(n.children)s=n.children.map(function(r){if("null_"===r._baseState.tag)return r._encode(null,t,e);if(null===r._baseState.key)return t.error("Child should have a key");var n=t.enterKey(r._baseState.key);if("object"!=typeof e)return t.error("Child expected, but input is not object");var i=r._encode(e[r._baseState.key],t,e);return t.leaveKey(n),i},this).filter(function(e){return e}),s=this._createEncoderBuffer(s);else if("seqof"===n.tag||"setof"===n.tag){if(!n.args||1!==n.args.length)return t.error("Too many args for : "+n.tag);if(!Array.isArray(e))return t.error("seqof/setof, but data is not Array");var h=this.clone();h._baseState.implicit=null,s=this._createEncoderBuffer(e.map(function(r){var n=this._baseState;return this._getUse(n.args[0],e)._encode(r,t)},h))}else null!==n.use?o=this._getUse(n.use,r)._encode(e,t):(s=this._encodePrimitive(n.tag,e),a=!0);var o;if(!n.any&&null===n.choice){var c=null!==n.implicit?n.implicit:n.tag,u=null===n.implicit?"universal":"context";null===c?null===n.use&&t.error("Tag could be ommited only for .use()"):null===n.use&&(o=this._encodeComposite(c,a,u,s))}return null!==n.explicit&&(o=this._encodeComposite(n.explicit,!1,"context",o)),o},r.prototype._encodeChoice=function(e,t){var r=this._baseState,i=r.choice[e.type];return i||n(!1,e.type+" not found in "+JSON.stringify(Object.keys(r.choice))),i._encode(e.value,t)},r.prototype._encodePrimitive=function(e,t){var r=this._baseState;if("octstr"===e||"bitstr"===e||"ia5str"===e)return this._encodeStr(t,e);if("objid"===e&&r.args)return this._encodeObjid(t,r.reverseArgs[0],r.args[1]);if("objid"===e)return this._encodeObjid(t,null,null);if("gentime"===e||"utctime"===e)return this._encodeTime(t,e);if("null_"===e)return this._encodeNull();if("int"===e||"enum"===e)return this._encodeInt(t,r.args&&r.reverseArgs[0]);if("bool"===e)return this._encodeBool(t);throw new Error("Unsupported tag: "+e)}},{"../base":113,assert:50}],115:[function(e,t,r){function n(e){this._reporterState={obj:null,path:[],options:e||{},errors:[]}}function i(e,t){this.path=e,this.rethrow(t)}var o=e("util");r.Reporter=n,n.prototype.isError=function(e){return e instanceof i},n.prototype.enterKey=function(e){return this._reporterState.path.push(e)},n.prototype.leaveKey=function(e,t,r){var n=this._reporterState;n.path=n.path.slice(0,e-1),null!==n.obj&&(n.obj[t]=r)},n.prototype.enterObject=function(){var e=this._reporterState,t=e.obj;return e.obj={},t},n.prototype.leaveObject=function(e){var t=this._reporterState,r=t.obj;return t.obj=e,r},n.prototype.error=function(e){var t,r=this._reporterState,n=e instanceof i;if(t=n?e:new i(r.path.map(function(e){return"["+JSON.stringify(e)+"]"}).join(""),e.message||e,e.stack),!r.options.partial)throw t;return n||r.errors.push(t),t},n.prototype.wrapResult=function(e){var t=this._reporterState;return t.options.partial?{result:this.isError(e)?null:e,errors:t.errors}:e},o.inherits(i,Error),i.prototype.rethrow=function(e){return this.message=e+" at: "+(this.path||"(shallow)"),Error.captureStackTrace(this,i),this}},{util:212}],116:[function(e,t,r){var n=e("../constants");r.tagClass={0:"universal",1:"application",2:"context",3:"private"},r.tagClassByName=n._reverse(r.tagClass),r.tag={0:"end",1:"bool",2:"int",3:"bitstr",4:"octstr",5:"null_",6:"objid",7:"objDesc",8:"external",9:"real",10:"enum",11:"embed",12:"utf8str",13:"relativeOid",16:"seq",17:"set",18:"numstr",19:"printstr",20:"t61str",21:"videostr",22:"ia5str",23:"utctime",24:"gentime",25:"graphstr",26:"iso646str",27:"genstr",28:"unistr",29:"charstr",30:"bmpstr"},r.tagByName=n._reverse(r.tag)},{"../constants":117}],117:[function(e,t,r){var n=r;n._reverse=function(e){var t={};return Object.keys(e).forEach(function(r){(0|r)==r&&(r=0|r);var n=e[r];t[n]=r}),t},n.der=e("./der")},{"./der":116}],118:[function(e,t){function r(e){this.enc="der",this.name=e.name,this.entity=e,this.tree=new n,this.tree._init(e.body)}function n(e){h.Node.call(this,"der",e)}function i(e,t){var r=e.readUInt8(t);if(e.isError(r))return r;var n=u.tagClass[r>>6],i=0===(32&r);if(31===(31&r)){var o=r;for(r=0;128===(128&o);){if(o=e.readUInt8(t),e.isError(o))return o;r<<=7,r|=127&o}}else r&=31;var s=u.tag[r];return{cls:n,primitive:i,tag:r,tagStr:s}}function o(e,t,r){var n=e.readUInt8(r);if(e.isError(n))return n;if(!t&&128===n)return null;if(0===(128&n))return n;var i=127&n;if(i>=4)return e.error("length octect is too long");n=0;for(var o=0;i>o;o++){n<<=8;var s=e.readUInt8(r);if(e.isError(s))return s;n|=s}return n}var s=e("util"),a=e("../../asn1"),h=a.base,c=a.bignum,u=a.constants.der;t.exports=r,r.prototype.decode=function(e,t){return e instanceof h.DecoderBuffer||(e=new h.DecoderBuffer(e,t)),this.tree._decode(e,t)},s.inherits(n,h.Node),n.prototype._peekTag=function(e,t){if(e.isEmpty())return!1;var r=e.save(),n=i(e,'Failed to peek tag: "'+t+'"');return e.isError(n)?n:(e.restore(r),n.tag===t||n.tagStr===t)},n.prototype._decodeTag=function(e,t,r){var n=i(e,'Failed to decode tag of "'+t+'"');if(e.isError(n))return n;var s=o(e,n.primitive,'Failed to get length of "'+t+'"');if(e.isError(s))return s;if(!r&&n.tag!==t&&n.tagStr!==t&&n.tagStr+"of"!==t)return e.error('Failed to match tag: "'+t+'"');if(n.primitive||null!==s)return e.skip(s,'Failed to match body of: "'+t+'"');var a=e.start(),h=this._skipUntilEnd(e,'Failed to skip indefinite length body: "'+this.tag+'"');return e.isError(h)?h:e.cut(a)},n.prototype._skipUntilEnd=function(e,t){for(;;){var r=i(e,t);if(e.isError(r))return r;var n=o(e,r.primitive,t);if(e.isError(n))return n;var s;if(s=r.primitive||null!==n?e.skip(n):this._skipUntilEnd(e,t),e.isError(s))return s;if("end"===r.tagStr)break}},n.prototype._decodeList=function(e,t,r){for(var n=[];!e.isEmpty();){var i=this._peekTag(e,"end");if(e.isError(i))return i;var o=r.decode(e,"der");if(e.isError(o)&&i)break;n.push(o)}return n},n.prototype._decodeStr=function(e,t){if("octstr"===t)return e.raw();if("bitstr"===t){var r=e.readUInt8();return e.isError(r)?r:{unused:r,data:e.raw()}}return"ia5str"===t?e.raw().toString():this.error("Decoding of string type: "+t+" unsupported")},n.prototype._decodeObjid=function(e,t,r){for(var n=[],i=0;!e.isEmpty();){var o=e.readUInt8();i<<=7,i|=127&o,0===(128&o)&&(n.push(i),i=0)}128&o&&n.push(i);var s=n[0]/40|0,a=n[0]%40;return result=r?n:[s,a].concat(n.slice(1)),t&&(result=t[result.join(" ")]),result},n.prototype._decodeTime=function(e,t){var r=e.raw().toString();if("gentime"===t)var n=0|r.slice(0,4),i=0|r.slice(4,6),o=0|r.slice(6,8),s=0|r.slice(8,10),a=0|r.slice(10,12),h=0|r.slice(12,14);else{if("utctime"!==t)return this.error("Decoding "+t+" time is not supported yet");var n=0|r.slice(0,2),i=0|r.slice(2,4),o=0|r.slice(4,6),s=0|r.slice(6,8),a=0|r.slice(8,10),h=0|r.slice(10,12);n=70>n?2e3+n:1900+n}return Date.UTC(n,i-1,o,s,a,h,0)},n.prototype._decodeNull=function(){return null},n.prototype._decodeBool=function(e){var t=e.readUInt8();return e.isError(t)?t:0!==t},n.prototype._decodeInt=function(e,t){var r=0,n=e.raw();if(n.length>3)return new c(n);for(;!e.isEmpty();){r<<=8;var i=e.readUInt8();if(e.isError(i))return i;r|=i}return t&&(r=t[r]||r),r},n.prototype._use=function(e,t){return"function"==typeof e&&(e=e(t)),e._getDecoder("der").tree}},{"../../asn1":110,util:212}],119:[function(e,t,r){var n=r;n.der=e("./der")},{"./der":118}],120:[function(e,t){function r(e){this.enc="der",this.name=e.name,this.entity=e,this.tree=new n,this.tree._init(e.body)}function n(e){c.Node.call(this,"der",e)}function i(e){return 10>=e?"0"+e:e}function o(e,t,r,n){var i;if("seqof"===e?e="seq":"setof"===e&&(e="set"),f.tagByName.hasOwnProperty(e))i=f.tagByName[e];else{if("number"!=typeof e||(0|e)!==e)return n.error("Unknown tag: "+e);i=e}return i>=31?n.error("Multi-octet tag encoding unsupported"):(t||(i|=32),i|=f.tagClassByName[r||"universal"]<<6)}var s=e("util"),a=e("buffer").Buffer,h=e("../../asn1"),c=h.base,u=h.bignum,f=h.constants.der;t.exports=r,r.prototype.encode=function(e,t){return this.tree._encode(e,t).join()},s.inherits(n,c.Node),n.prototype._encodeComposite=function(e,t,r,n){var i=o(e,t,r,this.reporter);if(n.length<128){var s=new a(2);return s[0]=i,s[1]=n.length,this._createEncoderBuffer([s,n])}for(var h=1,c=n.length;c>=256;c>>=8)h++;var s=new a(2+h);s[0]=i,s[1]=128|h;for(var c=1+h,u=n.length;u>0;c--,u>>=8)s[c]=255&u;return this._createEncoderBuffer([s,n])},n.prototype._encodeStr=function(e,t){return"octstr"===t?this._createEncoderBuffer(e):"bitstr"===t?this._createEncoderBuffer([0|e.unused,e.data]):"ia5str"===t?this._createEncoderBuffer(e):this.reporter.error("Encoding of string type: "+t+" unsupported")},n.prototype._encodeObjid=function(e,t,r){if("string"==typeof e){if(!t)return this.reporter.error("string objid given, but no values map found");if(!t.hasOwnProperty(e))return this.reporter.error("objid not found in values map");e=t[e].split(/\s+/g);for(var n=0;n<e.length;n++)e[n]|=0}else Array.isArray(e)&&(e=e.slice());if(!Array.isArray(e))return this.reporter.error("objid() should be either array or string, got: "+JSON.stringify(e));if(!r){if(e[1]>=40)return this.reporter.error("Second objid identifier OOB");e.splice(0,2,40*e[0]+e[1])}for(var i=0,n=0;n<e.length;n++){var o=e[n];for(i++;o>=128;o>>=7)i++}for(var s=new a(i),h=s.length-1,n=e.length-1;n>=0;n--){var o=e[n];for(s[h--]=127&o;(o>>=7)>0;)s[h--]=128|127&o}return this._createEncoderBuffer(s)},n.prototype._encodeTime=function(e,t){var r,n=new Date(e);return"gentime"===t?r=[n.getFullYear(),i(n.getUTCMonth()+1),i(n.getUTCDate()),i(n.getUTCHours()),i(n.getUTCMinutes()),i(n.getUTCSeconds()),"Z"].join(""):"utctime"===t?r=[n.getFullYear()%100,i(n.getUTCMonth()+1),i(n.getUTCDate()),i(n.getUTCHours()),i(n.getUTCMinutes()),i(n.getUTCSeconds()),"Z"].join(""):this.reporter.error("Encoding "+t+" time is not supported yet"),this._encodeStr(r,"octstr")},n.prototype._encodeNull=function(){return this._createEncoderBuffer("")},n.prototype._encodeInt=function(e,t){if("string"==typeof e){if(!t)return this.reporter.error("String int or enum given, but no values map");if(!t.hasOwnProperty(e))return this.reporter.error("Values map doesn't contain: "+JSON.stringify(e));e=t[e]}if(null!==u&&e instanceof u){var r=e.toArray();e.sign===!1&&128&r[0]&&r.unshift(0),e=new a(r)}if(a.isBuffer(e)){var n=e.length;0===e.length&&n++;var i=new a(n);return e.copy(i),0===e.length&&(i[0]=0),this._createEncoderBuffer(i)}if(128>e)return this._createEncoderBuffer(e);if(256>e)return this._createEncoderBuffer([0,e]);for(var n=1,o=e;o>=256;o>>=8)n++;for(var i=new Array(n),o=i.length-1;o>=0;o--)i[o]=255&e,e>>=8;return 128&i[0]&&i.unshift(0),this._createEncoderBuffer(new a(i))},n.prototype._encodeBool=function(e){return this._createEncoderBuffer(e?255:0)},n.prototype._use=function(e,t){return"function"==typeof e&&(e=e(t)),e._getEncoder("der").tree},n.prototype._skipDefault=function(e,t,r){var n,i=this._baseState;if(null===i.default)return!1;var o=e.join();if(void 0===i.defaultBuffer&&(i.defaultBuffer=this._encodeValue(i.default,t,r).join()),o.length!==i.defaultBuffer.length)return!1;for(n=0;n<o.length;n++)if(o[n]!==i.defaultBuffer[n])return!1;return!0}},{"../../asn1":110,buffer:52,util:212}],121:[function(e,t,r){var n=r;n.der=e("./der")},{"./der":120}],122:[function(e,t,r){r.strip=function(e){e=e.toString();var t=/^-----BEGIN (.*)-----\n/,r=t.exec(e),n=r[1],i=new RegExp("\n-----END "+n+"-----(\n*)$"),o=e.slice(r[0].length).replace(i,"").replace(/\n/g,"");return{tag:n,base64:o}};var n=function(e,t){for(var r=[];e;){if(e.length<t){r.push(e);break}r.push(e.substr(0,t)),e=e.substr(t)}return r.join("\n")};r.assemble=function(e){var t=e.tag,r=e.base64,i="-----BEGIN "+t+"-----",o="-----END "+t+"-----";return i+"\n"+n(r,64)+"\n"+o+"\n"}},{}],123:[function(e,t){(function(r){function n(e,t,r){var n=c(t,r);if(n.curve)return i(e,n,r);if("dsa"===n.type)return o(e,n,r);for(var s=n.modulus.byteLength(),a=[0,1];e.length+a.length+1<s;)a.push(255);a.push(0);for(var h=-1;++h<e.length;)a.push(e[h]);var u=d(a,n,r);return u}function i(e,t,n){f.rand=n.randomBytes;var i;"1.3.132.0.10"===t.curve.join(".")&&(i=new f.ec("secp256k1"));var o=i.genKeyPair();o._importPrivate(t.privateKey);var s=o.sign(e);return new r(s.toDER())}function o(e,t,r){for(var n,i=t.params.priv_key,o=t.params.p,c=t.params.q,f=(u.mont(c),t.params.g),d=new u(0),l=new u(e),p=!1;p===!1;){for(;!d.cmpn(0);)n=a(c,r),d=h(f,n,o,c);p=n.invm(c).imul(l.add(i.imul(d).mod(c)).mod(c)).mod(c),p.cmpn(0)||(p=!1,d=new u(0))}return s(d,p)}function s(e,t){e=e.toArray(),t=t.toArray(),128&e[0]&&(e=[0].concat(e)),128&t[0]&&(t=[0].concat(t));var n=e.length+t.length+4,i=[48,n,2,e.length];return i=i.concat(e,[2,t.length],t),new r(i)}function a(e,t){for(var r=new u(t.randomBytes(e.byteLength()));r.cmp(e)>=0;)r=new u(t.randomBytes(e.byteLength()));return r}function h(e,t,r,n){return e.toRed(u.mont(r)).redPow(t).fromRed().mod(n)}var c=e("parse-asn1"),u=e("bn.js"),f=e("elliptic"),d=e("browserify-rsa");t.exports=n}).call(this,e("buffer").Buffer)},{"bn.js":81,"browserify-rsa":82,buffer:52,elliptic:84,"parse-asn1":108}],124:[function(e,t){(function(r){function n(e,t,n){var s=a(n);if("ec"===s.type)return i(e,t,s);if("dsa"===s.type)return o(e,t,s);for(var h=s.modulus.byteLength(),u=[0,1];t.length+u.length+1<h;)u.push(255);u.push(0);for(var f=-1;++f<t.length;)u.push(t[f]);u=t;var d=c.mont(s.modulus);e=new c(e).toRed(d),e=e.redPow(new c(s.publicExponent)),e=new r(e.fromRed().toArray()),e=e.slice(e.length-t.length);var l=0;for(h=e.length,f=-1;++f<h;)l+=e[f]^t[f];return!l}function i(e,t,r){var n;"1.3.132.0.10"===r.data.algorithm.curve.join(".")&&(n=new h.ec("secp256k1"));var i=r.data.subjectPrivateKey.data;return n.verify(t.toString("hex"),e.toString("hex"),i.toString("hex"))}function o(e,t,r){var n=r.data.p,i=r.data.q,o=r.data.g,h=r.data.pub_key,u=a.signature.decode(e,"der"),f=u.s,d=u.r;s(f,i),s(d,i);var l=(c.mont(i),c.mont(n)),p=f.invm(i),b=o.toRed(l).redPow(new c(t).mul(p).mod(i)).fromRed().mul(h.toRed(l).redPow(d.mul(p).mod(i)).fromRed()).mod(n).mod(i);return!b.cmp(d)}function s(e,t){if(e.cmpn(0)<=0)throw new Error("invalid sig");if(e.cmp(t)>=t)throw new Error("invalid sig")}var a=e("parse-asn1"),h=e("elliptic"),c=e("bn.js");t.exports=n}).call(this,e("buffer").Buffer)},{"bn.js":81,buffer:52,elliptic:84,"parse-asn1":108}],125:[function(e,t){(function(r){function n(e,t){o.rand=t.randomBytes,this.curve=new o.ec(e),this.keys=void 0}function i(e,t){Array.isArray(e)||(e=e.toArray());var n=new r(e);return t?n.toString(t):n}var o=e("elliptic"),s=e("bn.js");t.exports=n,n.prototype.generateKeys=function(e,t){return this.keys=this.curve.genKeyPair(),this.getPublicKey(e,t)},n.prototype.computeSecret=function(e,t,n){t=t||"utf8",r.isBuffer(e)||(e=new r(e,t)),e=new s(e),e=e.toString(16);var o=this.curve.keyPair(e,"hex").getPublic(),a=o.mul(this.keys.getPrivate()).getX();return i(a,n)},n.prototype.getPublicKey=function(e,t){var r=this.keys.getPublic("compressed"===t,!0);return"hybrid"===t&&(r[0]=r[r.length-1]%2?7:6),i(r,e)},n.prototype.getPrivateKey=function(e){return i(this.keys.getPrivate(),e)},n.prototype.setPublicKey=function(e,t){t=t||"utf8",r.isBuffer(e)||(e=new r(e,t));var n=new s(e);n=n.toArray(),this.keys._importPublicHex(n)},n.prototype.setPrivateKey=function(e,t){t=t||"utf8",r.isBuffer(e)||(e=new r(e,t));var n=new s(e);n=n.toString(16),this.keys._importPrivate(n)}}).call(this,e("buffer").Buffer)},{"bn.js":127,buffer:52,elliptic:128}],126:[function(e,t){var r=e("./ecdh");t.exports=function(e,t){t.createECDH=function(t){return new r(t,e)}}},{"./ecdh":125}],127:[function(e,t){t.exports=e(81)},{"/Volumes/Case Sensitive/perso/bonhomme/node_modules/browserify/node_modules/crypto-browserify/node_modules/browserify-sign/node_modules/bn.js/lib/bn.js":81}],128:[function(e,t){t.exports=e(84)},{"../package.json":147,"./elliptic/curve":131,"./elliptic/curves":134,"./elliptic/ec":135,"./elliptic/hmac-drbg":138,"./elliptic/utils":139,"/Volumes/Case Sensitive/perso/bonhomme/node_modules/browserify/node_modules/crypto-browserify/node_modules/browserify-sign/node_modules/elliptic/lib/elliptic.js":84,brorand:140}],129:[function(e,t){t.exports=e(85)},{"../../elliptic":128,"/Volumes/Case Sensitive/perso/bonhomme/node_modules/browserify/node_modules/crypto-browserify/node_modules/browserify-sign/node_modules/elliptic/lib/elliptic/curve/base.js":85,assert:50,"bn.js":127}],130:[function(e,t){t.exports=e(86)},{"../../elliptic":128,"../curve":131,"/Volumes/Case Sensitive/perso/bonhomme/node_modules/browserify/node_modules/crypto-browserify/node_modules/browserify-sign/node_modules/elliptic/lib/elliptic/curve/edwards.js":86,assert:50,"bn.js":127,inherits:195}],131:[function(e,t){t.exports=e(87)},{"./base":129,"./edwards":130,"./mont":132,"./short":133,"/Volumes/Case Sensitive/perso/bonhomme/node_modules/browserify/node_modules/crypto-browserify/node_modules/browserify-sign/node_modules/elliptic/lib/elliptic/curve/index.js":87}],132:[function(e,t){t.exports=e(88)},{"../../elliptic":128,"../curve":131,"/Volumes/Case Sensitive/perso/bonhomme/node_modules/browserify/node_modules/crypto-browserify/node_modules/browserify-sign/node_modules/elliptic/lib/elliptic/curve/mont.js":88,assert:50,"bn.js":127,inherits:195}],133:[function(e,t){t.exports=e(89)},{"../../elliptic":128,"../curve":131,"/Volumes/Case Sensitive/perso/bonhomme/node_modules/browserify/node_modules/crypto-browserify/node_modules/browserify-sign/node_modules/elliptic/lib/elliptic/curve/short.js":89,assert:50,"bn.js":127,inherits:195}],134:[function(e,t){t.exports=e(90)},{"../elliptic":128,"/Volumes/Case Sensitive/perso/bonhomme/node_modules/browserify/node_modules/crypto-browserify/node_modules/browserify-sign/node_modules/elliptic/lib/elliptic/curves.js":90,assert:50,"bn.js":127,"hash.js":141}],135:[function(e,t){t.exports=e(91)},{"../../elliptic":128,"./key":136,"./signature":137,"/Volumes/Case Sensitive/perso/bonhomme/node_modules/browserify/node_modules/crypto-browserify/node_modules/browserify-sign/node_modules/elliptic/lib/elliptic/ec/index.js":91,assert:50,"bn.js":127}],136:[function(e,t){t.exports=e(92)},{"../../elliptic":128,"/Volumes/Case Sensitive/perso/bonhomme/node_modules/browserify/node_modules/crypto-browserify/node_modules/browserify-sign/node_modules/elliptic/lib/elliptic/ec/key.js":92,assert:50,"bn.js":127}],137:[function(e,t){t.exports=e(93)},{"../../elliptic":128,"/Volumes/Case Sensitive/perso/bonhomme/node_modules/browserify/node_modules/crypto-browserify/node_modules/browserify-sign/node_modules/elliptic/lib/elliptic/ec/signature.js":93,assert:50,"bn.js":127}],138:[function(e,t){t.exports=e(94)},{"../elliptic":128,"/Volumes/Case Sensitive/perso/bonhomme/node_modules/browserify/node_modules/crypto-browserify/node_modules/browserify-sign/node_modules/elliptic/lib/elliptic/hmac-drbg.js":94,assert:50,"hash.js":141}],139:[function(e,t){t.exports=e(95)},{"/Volumes/Case Sensitive/perso/bonhomme/node_modules/browserify/node_modules/crypto-browserify/node_modules/browserify-sign/node_modules/elliptic/lib/elliptic/utils.js":95,assert:50,"bn.js":127}],140:[function(e,t){t.exports=e(96)},{"/Volumes/Case Sensitive/perso/bonhomme/node_modules/browserify/node_modules/crypto-browserify/node_modules/browserify-sign/node_modules/elliptic/node_modules/brorand/index.js":96}],141:[function(e,t){t.exports=e(97)},{"./hash/common":142,"./hash/hmac":143,"./hash/ripemd":144,"./hash/sha":145,"./hash/utils":146,"/Volumes/Case Sensitive/perso/bonhomme/node_modules/browserify/node_modules/crypto-browserify/node_modules/browserify-sign/node_modules/elliptic/node_modules/hash.js/lib/hash.js":97}],142:[function(e,t){t.exports=e(98)},{"../hash":141,"/Volumes/Case Sensitive/perso/bonhomme/node_modules/browserify/node_modules/crypto-browserify/node_modules/browserify-sign/node_modules/elliptic/node_modules/hash.js/lib/hash/common.js":98}],143:[function(e,t){t.exports=e(99)},{"../hash":141,"/Volumes/Case Sensitive/perso/bonhomme/node_modules/browserify/node_modules/crypto-browserify/node_modules/browserify-sign/node_modules/elliptic/node_modules/hash.js/lib/hash/hmac.js":99}],144:[function(e,t){t.exports=e(100)},{"../hash":141,"/Volumes/Case Sensitive/perso/bonhomme/node_modules/browserify/node_modules/crypto-browserify/node_modules/browserify-sign/node_modules/elliptic/node_modules/hash.js/lib/hash/ripemd.js":100}],145:[function(e,t){t.exports=e(101)},{"../hash":141,"/Volumes/Case Sensitive/perso/bonhomme/node_modules/browserify/node_modules/crypto-browserify/node_modules/browserify-sign/node_modules/elliptic/node_modules/hash.js/lib/hash/sha.js":101}],146:[function(e,t){t.exports=e(102)},{"/Volumes/Case Sensitive/perso/bonhomme/node_modules/browserify/node_modules/crypto-browserify/node_modules/browserify-sign/node_modules/elliptic/node_modules/hash.js/lib/hash/utils.js":102}],147:[function(e,t){t.exports=e(103)},{"/Volumes/Case Sensitive/perso/bonhomme/node_modules/browserify/node_modules/crypto-browserify/node_modules/browserify-sign/node_modules/elliptic/package.json":103}],148:[function(e,t){(function(r){function n(e,t){t=t||"utf8",r.isBuffer(e)||(e=new r(e,t)),this._pub=new c(e)}function i(e,t){t=t||"utf8",r.isBuffer(e)||(e=new r(e,t)),this._priv=new c(e)}function o(e,t){var r=t.toString("hex"),n=[r,e.toString(16)].join("_");if(n in v)return v[n];var i=0;if(e.isEven()||!m.simpleSieve||!m.fermatTest(e)||!f.test(e))return i+=1,i+="02"===r||"05"===r?8:4,v[n]=i,i;f.test(e.shrn(1))||(i+=2);var o,r=t.toString("hex");switch(r){case"02":e.mod(d).cmp(l)&&(i+=8);break;case"05":o=e.mod(p),o.cmp(b)&&o.cmp(g)&&(i+=8);break;default:i+=4}return v[n]=i,i}function s(e,t){try{Object.defineProperty(e,"verifyError",{enumerable:!0,value:t,writable:!1})}catch(r){e.verifyError=t}}function a(e,t,r,a){this.setGenerator(t),this.__prime=new c(e),this._prime=c.mont(this.__prime),this._pub=void 0,this._priv=void 0,a?(this.setPublicKey=n,this.setPrivateKey=i,s(this,o(this.__prime,t))):s(this,8),this._makeNum=function(){return r.randomBytes(192)}}function h(e,t){var n=new r(e.toArray());return t?n.toString(t):n}var c=e("bn.js"),u=e("miller-rabin"),f=new u,d=new c(24),l=new c(11),p=new c(10),b=new c(3),g=new c(7),m=e("./generatePrime");t.exports=a;var v={};a.prototype.generateKeys=function(){return this._priv||(this._priv=new c(this._makeNum())),this._pub=this._gen.toRed(this._prime).redPow(this._priv).fromRed(),this.getPublicKey()},a.prototype.computeSecret=function(e){e=new c(e),e=e.toRed(this._prime);var t=e.redPow(this._priv).fromRed(),n=new r(t.toArray()),i=this.getPrime();if(n.length<i.length){var o=new r(i.length-n.length);o.fill(0),n=r.concat([o,n])}return n},a.prototype.getPublicKey=function(e){return h(this._pub,e)},a.prototype.getPrivateKey=function(e){return h(this._priv,e)},a.prototype.getPrime=function(e){return h(this.__prime,e)},a.prototype.getGenerator=function(e){return h(this._gen,e)},a.prototype.setGenerator=function(e,t){t=t||"utf8",r.isBuffer(e)||(e=new r(e,t)),this._gen=new c(e)}}).call(this,e("buffer").Buffer)},{"./generatePrime":149,"bn.js":151,buffer:52,"miller-rabin":152}],149:[function(e,t){function r(){if(null!==y)return y;var e=1048576,t=[];t[0]=2;for(var r=1,n=3;e>n;n+=2){for(var i=Math.ceil(Math.sqrt(n)),o=0;r>o&&t[o]<=i&&n%t[o]!==0;o++);r!==o&&t[o]<=i||(t[r++]=n)}return y=t,t}function n(e){for(var t=r(),n=0;n<t.length;n++)if(0===e.modn(t[n]))return!1;return!0}function i(e){var t=s.mont(e);return 0===u.toRed(t).redPow(e.subn(1)).fromRed().cmpn(1)}function o(e,t,r){function o(e){h=-1;var n=r.randomBytes(Math.ceil(e/8));n[0]|=192,n[n.length-1]|=3;var i,o=new s(n);if(t.cmp(u))if(t.cmp(f))y={major:[m],minor:[u]};else{for(i=o.mod(p);i.cmp(b);)o.iadd(m),i=o.mod(p);y={major:[m,d],minor:[u,l]}}else{for(;o.mod(a).cmp(g);)o.iadd(m);y={major:[a],minor:[v]}}return o}t=new s(t);for(var h,y,w=o(e),_=w.shrn(1);;){if(w.bitLength()>e&&(w=o(e),_=w.shrn(1)),h++,n(_)&&i(_)&&c.test(_)&&n(w)&&i(w)&&c.test(w))return w;w.iadd(y.major[h%y.major.length]),_.iadd(y.minor[h%y.minor.length])}}t.exports=o,o.simpleSieve=n,o.fermatTest=i;var s=e("bn.js"),a=new s(24),h=e("miller-rabin"),c=new h,u=(new s(1),new s(2)),f=new s(5),d=new s(16),l=new s(8),p=new s(10),b=new s(3),g=(new s(7),new s(11)),m=new s(4),v=new s(12),y=null},{"bn.js":151,"miller-rabin":152}],150:[function(e,t){(function(r){var n=e("./primes.json"),i=e("./dh"),o=e("./generatePrime");t.exports=function(e,t){function s(t){return new i(new r(n[t].prime,"hex"),new r(n[t].gen,"hex"),e)}function a(t,n,s,a){return(r.isBuffer(n)||"string"==typeof n&&-1===["hex","binary","base64"].indexOf(n))&&(a=s,s=n,n=void 0),n=n||"binary",a=a||"binary",s=s||new r([2]),r.isBuffer(s)||(s=new r(s,a)),"number"==typeof t?new i(o(t,s,e),s,e,!0):(r.isBuffer(t)||(t=new r(t,n)),new i(t,s,e,!0))}t.DiffieHellmanGroup=t.createDiffieHellmanGroup=t.getDiffieHellman=s,t.createDiffieHellman=t.DiffieHellman=a}}).call(this,e("buffer").Buffer)},{"./dh":148,"./generatePrime":149,"./primes.json":154,buffer:52}],151:[function(e,t){t.exports=e(81)},{"/Volumes/Case Sensitive/perso/bonhomme/node_modules/browserify/node_modules/crypto-browserify/node_modules/browserify-sign/node_modules/bn.js/lib/bn.js":81}],152:[function(e,t){function r(e){this.rand=e||new i.Rand}var n=e("bn.js"),i=e("brorand");t.exports=r,r.create=function(e){return new r(e)},r.prototype._rand=function(e){var t=e.bitLength(),r=this.rand.generate(Math.ceil(t/8));r[0]|=3;var i=7&t;return 0!==i&&(r[r.length-1]>>=7-i),new n(r)},r.prototype.test=function(e,t,r){var i=e.bitLength(),o=n.mont(e),s=new n(1).toRed(o);t||(t=Math.max(1,i/48|0));for(var a=e.subn(1),h=a.subn(1),c=0;!a.testn(c);c++);for(var u=e.shrn(c),f=a.toRed(o),d=!0;t>0;t--){var l=this._rand(h);r&&r(l);var p=l.toRed(o).redPow(u);if(0!==p.cmp(s)&&0!==p.cmp(f)){for(var b=1;c>b;b++){if(p=p.redSqr(),0===p.cmp(s))return!1;if(0===p.cmp(f))break}if(b===c)return!1}}return d},r.prototype.getDivisor=function(e,t){var r=e.bitLength(),i=n.mont(e),o=new n(1).toRed(i);t||(t=Math.max(1,r/48|0));for(var s=e.subn(1),a=s.subn(1),h=0;!s.testn(h);h++);for(var c=e.shrn(h),u=s.toRed(i),f=!0;t>0;t--){var d=this._rand(a),l=e.gcd(d);if(0!==l.cmpn(1))return l;var p=d.toRed(i).redPow(c);if(0!==p.cmp(o)&&0!==p.cmp(u)){for(var b=1;h>b;b++){if(p=p.redSqr(),0===p.cmp(o))return p.fromRed().subn(1).gcd(e);
if(0===p.cmp(u))break}if(b===h)return p=p.redSqr(),p.fromRed().subn(1).gcd(e)}}return f}},{"bn.js":151,brorand:153}],153:[function(e,t){t.exports=e(96)},{"/Volumes/Case Sensitive/perso/bonhomme/node_modules/browserify/node_modules/crypto-browserify/node_modules/browserify-sign/node_modules/elliptic/node_modules/brorand/index.js":96}],154:[function(e,t){t.exports={modp1:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a63a3620ffffffffffffffff"},modp2:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece65381ffffffffffffffff"},modp5:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca237327ffffffffffffffff"},modp14:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aacaa68ffffffffffffffff"},modp15:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a93ad2caffffffffffffffff"},modp16:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c934063199ffffffffffffffff"},modp17:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c93402849236c3fab4d27c7026c1d4dcb2602646dec9751e763dba37bdf8ff9406ad9e530ee5db382f413001aeb06a53ed9027d831179727b0865a8918da3edbebcf9b14ed44ce6cbaced4bb1bdb7f1447e6cc254b332051512bd7af426fb8f401378cd2bf5983ca01c64b92ecf032ea15d1721d03f482d7ce6e74fef6d55e702f46980c82b5a84031900b1c9e59e7c97fbec7e8f323a97a7e36cc88be0f1d45b7ff585ac54bd407b22b4154aacc8f6d7ebf48e1d814cc5ed20f8037e0a79715eef29be32806a1d58bb7c5da76f550aa3d8a1fbff0eb19ccb1a313d55cda56c9ec2ef29632387fe8d76e3c0468043e8f663f4860ee12bf2d5b0b7474d6e694f91e6dcc4024ffffffffffffffff"},modp18:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c93402849236c3fab4d27c7026c1d4dcb2602646dec9751e763dba37bdf8ff9406ad9e530ee5db382f413001aeb06a53ed9027d831179727b0865a8918da3edbebcf9b14ed44ce6cbaced4bb1bdb7f1447e6cc254b332051512bd7af426fb8f401378cd2bf5983ca01c64b92ecf032ea15d1721d03f482d7ce6e74fef6d55e702f46980c82b5a84031900b1c9e59e7c97fbec7e8f323a97a7e36cc88be0f1d45b7ff585ac54bd407b22b4154aacc8f6d7ebf48e1d814cc5ed20f8037e0a79715eef29be32806a1d58bb7c5da76f550aa3d8a1fbff0eb19ccb1a313d55cda56c9ec2ef29632387fe8d76e3c0468043e8f663f4860ee12bf2d5b0b7474d6e694f91e6dbe115974a3926f12fee5e438777cb6a932df8cd8bec4d073b931ba3bc832b68d9dd300741fa7bf8afc47ed2576f6936ba424663aab639c5ae4f5683423b4742bf1c978238f16cbe39d652de3fdb8befc848ad922222e04a4037c0713eb57a81a23f0c73473fc646cea306b4bcbc8862f8385ddfa9d4b7fa2c087e879683303ed5bdd3a062b3cf5b3a278a66d2a13f83f44f82ddf310ee074ab6a364597e899a0255dc164f31cc50846851df9ab48195ded7ea1b1d510bd7ee74d73faf36bc31ecfa268359046f4eb879f924009438b481c6cd7889a002ed5ee382bc9190da6fc026e479558e4475677e9aa9e3050e2765694dfc81f56e880b96e7160c980dd98edd3dfffffffffffffffff"}}},{}],155:[function(e,t){(function(e){t.exports=function(t){function r(e,t,r,i,o,s){if("function"==typeof o&&(s=o,o=void 0),"function"!=typeof s)throw new Error("No callback provided to pbkdf2");setTimeout(function(){var a;try{a=n(e,t,r,i,o)}catch(e){return s(e)}s(void 0,a)})}function n(r,n,i,o,s){if("number"!=typeof i)throw new TypeError("Iterations not a number");if(0>i)throw new TypeError("Bad iterations");if("number"!=typeof o)throw new TypeError("Key length not a number");if(0>o)throw new TypeError("Bad key length");s=s||"sha1",e.isBuffer(r)||(r=new e(r)),e.isBuffer(n)||(n=new e(n));var a,h,c,u=1,f=new e(o),d=new e(n.length+4);n.copy(d,0,0,n.length);for(var l=1;u>=l;l++){d.writeUInt32BE(l,n.length);var p=t.createHmac(s,r).update(d).digest();if(!a&&(a=p.length,c=new e(a),u=Math.ceil(o/a),h=o-(u-1)*a,o>(Math.pow(2,32)-1)*a))throw new TypeError("keylen exceeds maximum length");p.copy(c,0,0,a);for(var b=1;i>b;b++){p=t.createHmac(s,r).update(p).digest();for(var g=0;a>g;g++)c[g]^=p[g]}var m=(l-1)*a,v=l==u?h:a;c.copy(f,m,0,v)}return f}return{pbkdf2:r,pbkdf2Sync:n}}}).call(this,e("buffer").Buffer)},{buffer:52}],156:[function(e,t){t.exports=function(t,r){t.publicEncrypt=e("./publicEncrypt")(r),t.privateDecrypt=e("./privateDecrypt")(r)}},{"./privateDecrypt":180,"./publicEncrypt":181}],157:[function(e,t){(function(e){function r(t){var r=new e(4);return r.writeUInt32BE(t,0),r}t.exports=function(t,n,i){for(var o,s=new e(""),a=0;s.length<n;)o=r(a++),s=e.concat([s,i.createHash("sha1").update(t).update(o).digest()]);return s.slice(0,n)}}).call(this,e("buffer").Buffer)},{buffer:52}],158:[function(e,t){t.exports=e(83)},{"/Volumes/Case Sensitive/perso/bonhomme/node_modules/browserify/node_modules/crypto-browserify/node_modules/browserify-sign/node_modules/browserify-rsa/node_modules/bn.js/lib/bn.js":83}],159:[function(e,t){t.exports=e(82)},{"/Volumes/Case Sensitive/perso/bonhomme/node_modules/browserify/node_modules/crypto-browserify/node_modules/browserify-sign/node_modules/browserify-rsa/index.js":82,"bn.js":158,buffer:52}],160:[function(e,t){t.exports=e(104)},{"/Volumes/Case Sensitive/perso/bonhomme/node_modules/browserify/node_modules/crypto-browserify/node_modules/browserify-sign/node_modules/parse-asn1/EVP_BytesToKey.js":104,buffer:52}],161:[function(e,t){t.exports=e(105)},{"/Volumes/Case Sensitive/perso/bonhomme/node_modules/browserify/node_modules/crypto-browserify/node_modules/browserify-sign/node_modules/parse-asn1/aesid.json":105}],162:[function(e,t){t.exports=e(106)},{"/Volumes/Case Sensitive/perso/bonhomme/node_modules/browserify/node_modules/crypto-browserify/node_modules/browserify-sign/node_modules/parse-asn1/asn1.js":106,"asn1.js":166,"asn1.js-rfc3280":165}],163:[function(e,t){t.exports=e(107)},{"./EVP_BytesToKey":160,"/Volumes/Case Sensitive/perso/bonhomme/node_modules/browserify/node_modules/crypto-browserify/node_modules/browserify-sign/node_modules/parse-asn1/fixProc.js":107,buffer:52}],164:[function(e,t){t.exports=e(108)},{"./aesid.json":161,"./asn1":162,"./fixProc":163,"/Volumes/Case Sensitive/perso/bonhomme/node_modules/browserify/node_modules/crypto-browserify/node_modules/browserify-sign/node_modules/parse-asn1/index.js":108,buffer:52,pemstrip:179}],165:[function(e,t){t.exports=e(109)},{"../..":164,"/Volumes/Case Sensitive/perso/bonhomme/node_modules/browserify/node_modules/crypto-browserify/node_modules/browserify-sign/node_modules/parse-asn1/node_modules/asn1.js-rfc3280/index.js":109,"asn1.js":166}],166:[function(e,t){t.exports=e(110)},{"./asn1/api":167,"./asn1/base":169,"./asn1/constants":173,"./asn1/decoders":175,"./asn1/encoders":177,"/Volumes/Case Sensitive/perso/bonhomme/node_modules/browserify/node_modules/crypto-browserify/node_modules/browserify-sign/node_modules/parse-asn1/node_modules/asn1.js/lib/asn1.js":110,"bn.js":178}],167:[function(e,t){t.exports=e(111)},{"../asn1":166,"/Volumes/Case Sensitive/perso/bonhomme/node_modules/browserify/node_modules/crypto-browserify/node_modules/browserify-sign/node_modules/parse-asn1/node_modules/asn1.js/lib/asn1/api.js":111,util:212,vm:213}],168:[function(e,t){t.exports=e(112)},{"../base":169,"/Volumes/Case Sensitive/perso/bonhomme/node_modules/browserify/node_modules/crypto-browserify/node_modules/browserify-sign/node_modules/parse-asn1/node_modules/asn1.js/lib/asn1/base/buffer.js":112,assert:50,buffer:52,util:212}],169:[function(e,t){t.exports=e(113)},{"./buffer":168,"./node":170,"./reporter":171,"/Volumes/Case Sensitive/perso/bonhomme/node_modules/browserify/node_modules/crypto-browserify/node_modules/browserify-sign/node_modules/parse-asn1/node_modules/asn1.js/lib/asn1/base/index.js":113}],170:[function(e,t){t.exports=e(114)},{"../base":169,"/Volumes/Case Sensitive/perso/bonhomme/node_modules/browserify/node_modules/crypto-browserify/node_modules/browserify-sign/node_modules/parse-asn1/node_modules/asn1.js/lib/asn1/base/node.js":114,assert:50}],171:[function(e,t){t.exports=e(115)},{"/Volumes/Case Sensitive/perso/bonhomme/node_modules/browserify/node_modules/crypto-browserify/node_modules/browserify-sign/node_modules/parse-asn1/node_modules/asn1.js/lib/asn1/base/reporter.js":115,util:212}],172:[function(e,t){t.exports=e(116)},{"../constants":173,"/Volumes/Case Sensitive/perso/bonhomme/node_modules/browserify/node_modules/crypto-browserify/node_modules/browserify-sign/node_modules/parse-asn1/node_modules/asn1.js/lib/asn1/constants/der.js":116}],173:[function(e,t){t.exports=e(117)},{"./der":172,"/Volumes/Case Sensitive/perso/bonhomme/node_modules/browserify/node_modules/crypto-browserify/node_modules/browserify-sign/node_modules/parse-asn1/node_modules/asn1.js/lib/asn1/constants/index.js":117}],174:[function(e,t){t.exports=e(118)},{"../../asn1":166,"/Volumes/Case Sensitive/perso/bonhomme/node_modules/browserify/node_modules/crypto-browserify/node_modules/browserify-sign/node_modules/parse-asn1/node_modules/asn1.js/lib/asn1/decoders/der.js":118,util:212}],175:[function(e,t){t.exports=e(119)},{"./der":174,"/Volumes/Case Sensitive/perso/bonhomme/node_modules/browserify/node_modules/crypto-browserify/node_modules/browserify-sign/node_modules/parse-asn1/node_modules/asn1.js/lib/asn1/decoders/index.js":119}],176:[function(e,t){t.exports=e(120)},{"../../asn1":166,"/Volumes/Case Sensitive/perso/bonhomme/node_modules/browserify/node_modules/crypto-browserify/node_modules/browserify-sign/node_modules/parse-asn1/node_modules/asn1.js/lib/asn1/encoders/der.js":120,buffer:52,util:212}],177:[function(e,t){t.exports=e(121)},{"./der":176,"/Volumes/Case Sensitive/perso/bonhomme/node_modules/browserify/node_modules/crypto-browserify/node_modules/browserify-sign/node_modules/parse-asn1/node_modules/asn1.js/lib/asn1/encoders/index.js":121}],178:[function(e,t){t.exports=e(81)},{"/Volumes/Case Sensitive/perso/bonhomme/node_modules/browserify/node_modules/crypto-browserify/node_modules/browserify-sign/node_modules/bn.js/lib/bn.js":81}],179:[function(e,t){t.exports=e(122)},{"/Volumes/Case Sensitive/perso/bonhomme/node_modules/browserify/node_modules/crypto-browserify/node_modules/browserify-sign/node_modules/parse-asn1/node_modules/pemstrip/index.js":122}],180:[function(e,t){(function(r){function n(e,t,n){var i=(e.modulus,e.modulus.byteLength()),s=(t.length,n.createHash("sha1").update(new r("")).digest()),c=s.length;if(0!==t[0])throw new Error("decryption error");var u=t.slice(1,c+1),f=t.slice(c+1),d=h(u,a(f,c,n)),l=h(f,a(d,i-c-1,n));if(o(s,l.slice(0,c)))throw new Error("decryption error");for(var p=c;0===l[p];)p++;if(1!==l[p++])throw new Error("decryption error");return l.slice(p)}function i(e,t){for(var r=t.slice(0,2),n=2,i=0;0!==t[n++];)if(n>=t.length){i++;break}{var o=t.slice(2,n-1);t.slice(n-1,n)}return"0002"!==r.toString("hex")&&i++,o.length<8&&i++,t.slice(n)}function o(e,t){var r=0,n=e.length;e.length!==t.length&&(r++,n=Math.min(e.length,t.length));for(var i=-1;++i<n;)r+=e[i]^t[i];return r}var s=e("parse-asn1"),a=e("./mgf"),h=e("./xor"),c=e("bn.js"),u=e("browserify-rsa");t.exports=function(e){function t(t,o){var a;a=t.padding?t.padding:4;var h=s(t,e),f=h.modulus.byteLength();if(o.length>f||new c(o).cmp(h.modulus)>=0)throw new Error("decryption error");var d=u(o,h,e),l=new r(f-d.length);if(l.fill(0),d=r.concat([l,d],f),4===a)return n(h,d,e);if(1===a)return i(h,d,e);if(3===a)return d;throw new Error("unknown padding")}return t}}).call(this,e("buffer").Buffer)},{"./mgf":157,"./xor":182,"bn.js":158,"browserify-rsa":159,buffer:52,"parse-asn1":164}],181:[function(e,t){(function(r){function n(e,t,n){var i=e.modulus.byteLength(),o=t.length,s=n.createHash("sha1").update(new r("")).digest(),u=s.length,f=2*u;if(o>i-f-2)throw new Error("message too long");var d=new r(i-o-f-2);d.fill(0);var l=i-u-1,p=n.randomBytes(u),b=h(r.concat([s,d,new r([1]),t],l),a(p,l,n)),g=h(p,a(b,u,n));return new c(r.concat([new r([0]),g,b],i))}function i(e,t,n){var i=t.length,s=e.modulus.byteLength();if(i>s-11)throw new Error("message too long");var a=o(s-i-3,n);return new c(r.concat([new r([0,2]),a,new r([0]),t],s))}function o(e,t){for(var n,i=new r(e),o=0,s=t.randomBytes(2*e),a=0;e>o;)a===s.length&&(s=t.randomBytes(2*e),a=0),n=s[a++],n&&(i[o++]=n);return i}var s=e("parse-asn1"),a=e("./mgf"),h=e("./xor"),c=e("bn.js");t.exports=function(e){function t(t,o){var a;a=t.padding?t.padding:4;var h,u=s(t);if(4===a)h=n(u,o,e);else if(1===a)h=i(u,o,e);else{if(3!==a)throw new Error("unknown padding");if(h=new c(o),h.cmp(u.modulus)>=0)throw new Error("data too long for modulus")}var f=h.toRed(c.mont(u.modulus)).redPow(new c(u.publicExponent)).fromRed().toArray();return new r(f)}return t}}).call(this,e("buffer").Buffer)},{"./mgf":157,"./xor":182,"bn.js":158,buffer:52,"parse-asn1":164}],182:[function(e,t){t.exports=function(e,t){for(var r=e.length,n=-1;++n<r;)e[n]^=t[n];return e}},{}],183:[function(e,t){(function(e){function r(e,t,r){return e^t^r}function n(e,t,r){return e&t|~e&r}function i(e,t,r){return(e|~t)^r}function o(e,t,r){return e&r|t&~r}function s(e,t,r){return e^(t|~r)}function a(e,t){return e<<t|e>>>32-t}function h(t){var r=[1732584193,4023233417,2562383102,271733878,3285377520];"string"==typeof t&&(t=new e(t,"utf8"));var n=b(t),i=8*t.length,o=8*t.length;n[i>>>5]|=128<<24-i%32,n[(i+64>>>9<<4)+14]=16711935&(o<<8|o>>>24)|4278255360&(o<<24|o>>>8);for(var s=0;s<n.length;s+=16)m(r,n,s);for(var s=0;5>s;s++){var a=r[s];r[s]=16711935&(a<<8|a>>>24)|4278255360&(a<<24|a>>>8)}var h=g(r);return new e(h)}t.exports=h;var c=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],u=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],f=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],d=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11],l=[0,1518500249,1859775393,2400959708,2840853838],p=[1352829926,1548603684,1836072691,2053994217,0],b=function(e){for(var t=[],r=0,n=0;r<e.length;r++,n+=8)t[n>>>5]|=e[r]<<24-n%32;return t},g=function(e){for(var t=[],r=0;r<32*e.length;r+=8)t.push(e[r>>>5]>>>24-r%32&255);return t},m=function(e,t,h){for(var b=0;16>b;b++){var g=h+b,m=t[g];t[g]=16711935&(m<<8|m>>>24)|4278255360&(m<<24|m>>>8)}var v,y,w,_,x,S,T,A,E,C;S=v=e[0],T=y=e[1],A=w=e[2],E=_=e[3],C=x=e[4];for(var k,b=0;80>b;b+=1)k=v+t[h+c[b]]|0,k+=16>b?r(y,w,_)+l[0]:32>b?n(y,w,_)+l[1]:48>b?i(y,w,_)+l[2]:64>b?o(y,w,_)+l[3]:s(y,w,_)+l[4],k=0|k,k=a(k,f[b]),k=k+x|0,v=x,x=_,_=a(w,10),w=y,y=k,k=S+t[h+u[b]]|0,k+=16>b?s(T,A,E)+p[0]:32>b?o(T,A,E)+p[1]:48>b?i(T,A,E)+p[2]:64>b?n(T,A,E)+p[3]:r(T,A,E)+p[4],k=0|k,k=a(k,d[b]),k=k+C|0,S=C,C=E,E=a(A,10),A=T,T=k;k=e[1]+w+E|0,e[1]=e[2]+_+C|0,e[2]=e[3]+x+S|0,e[3]=e[4]+v+T|0,e[4]=e[0]+y+A|0,e[0]=k}}).call(this,e("buffer").Buffer)},{buffer:52}],184:[function(e,t){(function(e){function r(t,r){this._block=new e(t),this._finalSize=r,this._blockSize=t,this._len=0,this._s=0}r.prototype.init=function(){this._s=0,this._len=0},r.prototype.update=function(t,r){"string"==typeof t&&(r=r||"utf8",t=new e(t,r));for(var n=this._len+=t.length,i=this._s=this._s||0,o=0,s=this._block;n>i;){for(var a=Math.min(t.length,o+this._blockSize-i%this._blockSize),h=a-o,c=0;h>c;c++)s[i%this._blockSize+c]=t[c+o];i+=h,o+=h,i%this._blockSize===0&&this._update(s)}return this._s=i,this},r.prototype.digest=function(e){var t=8*this._len;this._block[this._len%this._blockSize]=128,this._block.fill(0,this._len%this._blockSize+1),t%(8*this._blockSize)>=8*this._finalSize&&(this._update(this._block),this._block.fill(0)),this._block.writeInt32BE(t,this._blockSize-4);var r=this._update(this._block)||this._hash();return e?r.toString(e):r},r.prototype._update=function(){throw new Error("_update must be implemented by subclass")},t.exports=r}).call(this,e("buffer").Buffer)},{buffer:52}],185:[function(e,t,r){var r=t.exports=function(e){var t=r[e.toLowerCase()];if(!t)throw new Error(e+" is not supported (we accept pull requests)");return new t};r.sha1=e("./sha1"),r.sha224=e("./sha224"),r.sha256=e("./sha256"),r.sha384=e("./sha384"),r.sha512=e("./sha512")},{"./sha1":186,"./sha224":187,"./sha256":188,"./sha384":189,"./sha512":190}],186:[function(e,t){(function(r){function n(){return g.length?g.pop().init():this instanceof n?(this._w=b,c.call(this,64,56),this._h=null,void this.init()):new n}function i(e,t,r,n){return 20>e?t&r|~t&n:40>e?t^r^n:60>e?t&r|t&n|r&n:t^r^n}function o(e){return 20>e?1518500249:40>e?1859775393:60>e?-1894007588:-899497514}function s(e,t){return e+t|0}function a(e,t){return e<<t|e>>>32-t}var h=e("util").inherits,c=e("./hash"),u=0,f=4,d=8,l=12,p=16,b=new("undefined"==typeof Int32Array?Array:Int32Array)(80),g=[];h(n,c),n.prototype.init=function(){return this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520,c.prototype.init.call(this),this},n.prototype._POOL=g,n.prototype._update=function(e){var t,r,n,h,c,u,f,d,l,p;t=u=this._a,r=f=this._b,n=d=this._c,h=l=this._d,c=p=this._e;for(var b=this._w,g=0;80>g;g++){var m=b[g]=16>g?e.readInt32BE(4*g):a(b[g-3]^b[g-8]^b[g-14]^b[g-16],1),v=s(s(a(t,5),i(g,r,n,h)),s(s(c,m),o(g)));c=h,h=n,n=a(r,30),r=t,t=v}this._a=s(t,u),this._b=s(r,f),this._c=s(n,d),this._d=s(h,l),this._e=s(c,p)},n.prototype._hash=function(){g.length<100&&g.push(this);var e=new r(20);return e.writeInt32BE(0|this._a,u),e.writeInt32BE(0|this._b,f),e.writeInt32BE(0|this._c,d),e.writeInt32BE(0|this._d,l),e.writeInt32BE(0|this._e,p),e},t.exports=n}).call(this,e("buffer").Buffer)},{"./hash":184,buffer:52,util:212}],187:[function(e,t){(function(r){function n(){this.init(),this._w=a,s.call(this,64,56)}var i=e("util").inherits,o=e("./sha256"),s=e("./hash"),a=new Array(64);i(n,o),n.prototype.init=function(){return this._a=-1056596264,this._b=914150663,this._c=812702999,this._d=-150054599,this._e=-4191439,this._f=1750603025,this._g=1694076839,this._h=-1090891868,this._len=this._s=0,this},n.prototype._hash=function(){var e=new r(28);return e.writeInt32BE(this._a,0),e.writeInt32BE(this._b,4),e.writeInt32BE(this._c,8),e.writeInt32BE(this._d,12),e.writeInt32BE(this._e,16),e.writeInt32BE(this._f,20),e.writeInt32BE(this._g,24),e},t.exports=n}).call(this,e("buffer").Buffer)},{"./hash":184,"./sha256":188,buffer:52,util:212}],188:[function(e,t){(function(r){function n(){this.init(),this._w=b,l.call(this,64,56)}function i(e,t){return e>>>t|e<<32-t}function o(e,t){return e>>>t}function s(e,t,r){return e&t^~e&r}function a(e,t,r){return e&t^e&r^t&r}function h(e){return i(e,2)^i(e,13)^i(e,22)}function c(e){return i(e,6)^i(e,11)^i(e,25)}function u(e){return i(e,7)^i(e,18)^o(e,3)}function f(e){return i(e,17)^i(e,19)^o(e,10)}var d=e("util").inherits,l=e("./hash"),p=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],b=new Array(64);d(n,l),n.prototype.init=function(){return this._a=1779033703,this._b=-1150833019,this._c=1013904242,this._d=-1521486534,this._e=1359893119,this._f=-1694144372,this._g=528734635,this._h=1541459225,this._len=this._s=0,this},n.prototype._update=function(e){var t,r,n,i,o,d,l,b,g,m,v=this._w;t=0|this._a,r=0|this._b,n=0|this._c,i=0|this._d,o=0|this._e,d=0|this._f,l=0|this._g,b=0|this._h;for(var y=0;64>y;y++){var w=v[y]=16>y?e.readInt32BE(4*y):f(v[y-2])+v[y-7]+u(v[y-15])+v[y-16];g=b+c(o)+s(o,d,l)+p[y]+w,m=h(t)+a(t,r,n),b=l,l=d,d=o,o=i+g,i=n,n=r,r=t,t=g+m}this._a=t+this._a|0,this._b=r+this._b|0,this._c=n+this._c|0,this._d=i+this._d|0,this._e=o+this._e|0,this._f=d+this._f|0,this._g=l+this._g|0,this._h=b+this._h|0},n.prototype._hash=function(){var e=new r(32);return e.writeInt32BE(this._a,0),e.writeInt32BE(this._b,4),e.writeInt32BE(this._c,8),e.writeInt32BE(this._d,12),e.writeInt32BE(this._e,16),e.writeInt32BE(this._f,20),e.writeInt32BE(this._g,24),e.writeInt32BE(this._h,28),e},t.exports=n}).call(this,e("buffer").Buffer)},{"./hash":184,buffer:52,util:212}],189:[function(e,t){(function(r){function n(){this.init(),this._w=a,s.call(this,128,112)}var i=e("util").inherits,o=e("./sha512"),s=e("./hash"),a=new Array(160);i(n,o),n.prototype.init=function(){return this._a=-876896931,this._b=1654270250,this._c=-1856437926,this._d=355462360,this._e=1731405415,this._f=-1900787065,this._g=-619958771,this._h=1203062813,this._al=-1056596264,this._bl=914150663,this._cl=812702999,this._dl=-150054599,this._el=-4191439,this._fl=1750603025,this._gl=1694076839,this._hl=-1090891868,this._len=this._s=0,this},n.prototype._hash=function(){function e(e,r,n){t.writeInt32BE(e,n),t.writeInt32BE(r,n+4)}var t=new r(48);return e(this._a,this._al,0),e(this._b,this._bl,8),e(this._c,this._cl,16),e(this._d,this._dl,24),e(this._e,this._el,32),e(this._f,this._fl,40),t},t.exports=n}).call(this,e("buffer").Buffer)},{"./hash":184,"./sha512":190,buffer:52,util:212}],190:[function(e,t){(function(r){function n(){this.init(),this._w=u,h.call(this,128,112)}function i(e,t,r){return e>>>r|t<<32-r}function o(e,t,r){return e&t^~e&r}function s(e,t,r){return e&t^e&r^t&r}var a=e("util").inherits,h=e("./hash"),c=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591],u=new Array(160);a(n,h),n.prototype.init=function(){return this._a=1779033703,this._b=-1150833019,this._c=1013904242,this._d=-1521486534,this._e=1359893119,this._f=-1694144372,this._g=528734635,this._h=1541459225,this._al=-205731576,this._bl=-2067093701,this._cl=-23791573,this._dl=1595750129,this._el=-1377402159,this._fl=725511199,this._gl=-79577749,this._hl=327033209,this._len=this._s=0,this},n.prototype._update=function(e){var t,r,n,a,h,u,f,d,l,p,b,g,m,v,y,w,_=this._w;t=0|this._a,r=0|this._b,n=0|this._c,a=0|this._d,h=0|this._e,u=0|this._f,f=0|this._g,d=0|this._h,l=0|this._al,p=0|this._bl,b=0|this._cl,g=0|this._dl,m=0|this._el,v=0|this._fl,y=0|this._gl,w=0|this._hl;for(var x=0;80>x;x++){var S,T,A=2*x;if(16>x)S=_[A]=e.readInt32BE(4*A),T=_[A+1]=e.readInt32BE(4*A+4);else{var E=_[A-30],C=_[A-30+1],k=i(E,C,1)^i(E,C,8)^E>>>7,R=i(C,E,1)^i(C,E,8)^i(C,E,7);E=_[A-4],C=_[A-4+1];var M=i(E,C,19)^i(C,E,29)^E>>>6,B=i(C,E,19)^i(E,C,29)^i(C,E,6),I=_[A-14],j=_[A-14+1],P=_[A-32],L=_[A-32+1];T=R+j,S=k+I+(R>>>0>T>>>0?1:0),T+=B,S=S+M+(B>>>0>T>>>0?1:0),T+=L,S=S+P+(L>>>0>T>>>0?1:0),_[A]=S,_[A+1]=T}var O=s(t,r,n),D=s(l,p,b),F=i(t,l,28)^i(l,t,2)^i(l,t,7),U=i(l,t,28)^i(t,l,2)^i(t,l,7),N=i(h,m,14)^i(h,m,18)^i(m,h,9),G=i(m,h,14)^i(m,h,18)^i(h,m,9),W=c[A],q=c[A+1],V=o(h,u,f),z=o(m,v,y),Y=w+G,X=d+N+(w>>>0>Y>>>0?1:0);Y+=z,X=X+V+(z>>>0>Y>>>0?1:0),Y+=q,X=X+W+(q>>>0>Y>>>0?1:0),Y+=T,X=X+S+(T>>>0>Y>>>0?1:0);var H=U+D,K=F+O+(U>>>0>H>>>0?1:0);d=f,w=y,f=u,y=v,u=h,v=m,m=g+Y|0,h=a+X+(g>>>0>m>>>0?1:0)|0,a=n,g=b,n=r,b=p,r=t,p=l,l=Y+H|0,t=X+K+(Y>>>0>l>>>0?1:0)|0}this._al=this._al+l|0,this._bl=this._bl+p|0,this._cl=this._cl+b|0,this._dl=this._dl+g|0,this._el=this._el+m|0,this._fl=this._fl+v|0,this._gl=this._gl+y|0,this._hl=this._hl+w|0,this._a=this._a+t+(this._al>>>0<l>>>0?1:0)|0,this._b=this._b+r+(this._bl>>>0<p>>>0?1:0)|0,this._c=this._c+n+(this._cl>>>0<b>>>0?1:0)|0,this._d=this._d+a+(this._dl>>>0<g>>>0?1:0)|0,this._e=this._e+h+(this._el>>>0<m>>>0?1:0)|0,this._f=this._f+u+(this._fl>>>0<v>>>0?1:0)|0,this._g=this._g+f+(this._gl>>>0<y>>>0?1:0)|0,this._h=this._h+d+(this._hl>>>0<w>>>0?1:0)|0},n.prototype._hash=function(){function e(e,r,n){t.writeInt32BE(e,n),t.writeInt32BE(r,n+4)}var t=new r(64);return e(this._a,this._al,0),e(this._b,this._bl,8),e(this._c,this._cl,16),e(this._d,this._dl,24),e(this._e,this._el,32),e(this._f,this._fl,40),e(this._g,this._gl,48),e(this._h,this._hl,56),t},t.exports=n}).call(this,e("buffer").Buffer)},{"./hash":184,buffer:52,util:212}],191:[function(e,t){"use strict";var r=e("pbkdf2-compat/pbkdf2");t.exports=function(e,t){t=t||{};var n=r(e);return t.pbkdf2=n.pbkdf2,t.pbkdf2Sync=n.pbkdf2Sync,t}},{"pbkdf2-compat/pbkdf2":155}],192:[function(e,t){(function(r,n){"use strict";!function(){var i=("undefined"==typeof window?r:window)||{},o=i.crypto||i.msCrypto||e("crypto");t.exports=function(e){if(o.getRandomValues){var t=new n(e);return o.getRandomValues(t),t}if(o.pseudoRandomBytes)return o.pseudoRandomBytes(e);throw new Error("pseudo random number generation not yet implemented for this browser\nuse chrome, FireFox or Internet Explorer 11")}}()}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer)},{buffer:52,crypto:51}],193:[function(e,t){(function(r,n){"use strict";!function(){var i=("undefined"==typeof window?r:window)||{},o=i.crypto||i.msCrypto||e("crypto");t.exports=function(e){if(o.getRandomValues){var t=new n(e);return o.getRandomValues(t),t}if(o.randomBytes)return o.randomBytes(e);throw new Error("secure random number generation not supported by this browser\nuse chrome, FireFox or Internet Explorer 11")}}()}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer)},{buffer:52,crypto:51}],194:[function(e,t){function r(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function n(e){return"function"==typeof e}function i(e){return"number"==typeof e}function o(e){return"object"==typeof e&&null!==e}function s(e){return void 0===e}t.exports=r,r.EventEmitter=r,r.prototype._events=void 0,r.prototype._maxListeners=void 0,r.defaultMaxListeners=10,r.prototype.setMaxListeners=function(e){if(!i(e)||0>e||isNaN(e))throw TypeError("n must be a positive number");
return this._maxListeners=e,this},r.prototype.emit=function(e){var t,r,i,a,h,c;if(this._events||(this._events={}),"error"===e&&(!this._events.error||o(this._events.error)&&!this._events.error.length)){if(t=arguments[1],t instanceof Error)throw t;throw TypeError('Uncaught, unspecified "error" event.')}if(r=this._events[e],s(r))return!1;if(n(r))switch(arguments.length){case 1:r.call(this);break;case 2:r.call(this,arguments[1]);break;case 3:r.call(this,arguments[1],arguments[2]);break;default:for(i=arguments.length,a=new Array(i-1),h=1;i>h;h++)a[h-1]=arguments[h];r.apply(this,a)}else if(o(r)){for(i=arguments.length,a=new Array(i-1),h=1;i>h;h++)a[h-1]=arguments[h];for(c=r.slice(),i=c.length,h=0;i>h;h++)c[h].apply(this,a)}return!0},r.prototype.addListener=function(e,t){var i;if(!n(t))throw TypeError("listener must be a function");if(this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,n(t.listener)?t.listener:t),this._events[e]?o(this._events[e])?this._events[e].push(t):this._events[e]=[this._events[e],t]:this._events[e]=t,o(this._events[e])&&!this._events[e].warned){var i;i=s(this._maxListeners)?r.defaultMaxListeners:this._maxListeners,i&&i>0&&this._events[e].length>i&&(this._events[e].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[e].length),"function"==typeof console.trace&&console.trace())}return this},r.prototype.on=r.prototype.addListener,r.prototype.once=function(e,t){function r(){this.removeListener(e,r),i||(i=!0,t.apply(this,arguments))}if(!n(t))throw TypeError("listener must be a function");var i=!1;return r.listener=t,this.on(e,r),this},r.prototype.removeListener=function(e,t){var r,i,s,a;if(!n(t))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;if(r=this._events[e],s=r.length,i=-1,r===t||n(r.listener)&&r.listener===t)delete this._events[e],this._events.removeListener&&this.emit("removeListener",e,t);else if(o(r)){for(a=s;a-->0;)if(r[a]===t||r[a].listener&&r[a].listener===t){i=a;break}if(0>i)return this;1===r.length?(r.length=0,delete this._events[e]):r.splice(i,1),this._events.removeListener&&this.emit("removeListener",e,t)}return this},r.prototype.removeAllListeners=function(e){var t,r;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[e]&&delete this._events[e],this;if(0===arguments.length){for(t in this._events)"removeListener"!==t&&this.removeAllListeners(t);return this.removeAllListeners("removeListener"),this._events={},this}if(r=this._events[e],n(r))this.removeListener(e,r);else for(;r.length;)this.removeListener(e,r[r.length-1]);return delete this._events[e],this},r.prototype.listeners=function(e){var t;return t=this._events&&this._events[e]?n(this._events[e])?[this._events[e]]:this._events[e].slice():[]},r.listenerCount=function(e,t){var r;return r=e._events&&e._events[t]?n(e._events[t])?1:e._events[t].length:0}},{}],195:[function(e,t){t.exports="function"==typeof Object.create?function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:function(e,t){e.super_=t;var r=function(){};r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e}},{}],196:[function(e,t){t.exports=Array.isArray||function(e){return"[object Array]"==Object.prototype.toString.call(e)}},{}],197:[function(e,t){function r(){}var n=t.exports={};n.nextTick=function(){var e="undefined"!=typeof window&&window.setImmediate,t="undefined"!=typeof window&&window.MutationObserver,r="undefined"!=typeof window&&window.postMessage&&window.addEventListener;if(e)return function(e){return window.setImmediate(e)};var n=[];if(t){var i=document.createElement("div"),o=new MutationObserver(function(){var e=n.slice();n.length=0,e.forEach(function(e){e()})});return o.observe(i,{attributes:!0}),function(e){n.length||i.setAttribute("yes","no"),n.push(e)}}return r?(window.addEventListener("message",function(e){var t=e.source;if((t===window||null===t)&&"process-tick"===e.data&&(e.stopPropagation(),n.length>0)){var r=n.shift();r()}},!0),function(e){n.push(e),window.postMessage("process-tick","*")}):function(e){setTimeout(e,0)}}(),n.title="browser",n.browser=!0,n.env={},n.argv=[],n.on=r,n.addListener=r,n.once=r,n.off=r,n.removeListener=r,n.removeAllListeners=r,n.emit=r,n.binding=function(){throw new Error("process.binding is not supported")},n.cwd=function(){return"/"},n.chdir=function(){throw new Error("process.chdir is not supported")}},{}],198:[function(e,t){t.exports=e("./lib/_stream_duplex.js")},{"./lib/_stream_duplex.js":199}],199:[function(e,t){(function(r){function n(e){return this instanceof n?(h.call(this,e),c.call(this,e),e&&e.readable===!1&&(this.readable=!1),e&&e.writable===!1&&(this.writable=!1),this.allowHalfOpen=!0,e&&e.allowHalfOpen===!1&&(this.allowHalfOpen=!1),void this.once("end",i)):new n(e)}function i(){this.allowHalfOpen||this._writableState.ended||r.nextTick(this.end.bind(this))}function o(e,t){for(var r=0,n=e.length;n>r;r++)t(e[r],r)}t.exports=n;var s=Object.keys||function(e){var t=[];for(var r in e)t.push(r);return t},a=e("core-util-is");a.inherits=e("inherits");var h=e("./_stream_readable"),c=e("./_stream_writable");a.inherits(n,h),o(s(c.prototype),function(e){n.prototype[e]||(n.prototype[e]=c.prototype[e])})}).call(this,e("_process"))},{"./_stream_readable":201,"./_stream_writable":203,_process:197,"core-util-is":204,inherits:195}],200:[function(e,t){function r(e){return this instanceof r?void n.call(this,e):new r(e)}t.exports=r;var n=e("./_stream_transform"),i=e("core-util-is");i.inherits=e("inherits"),i.inherits(r,n),r.prototype._transform=function(e,t,r){r(null,e)}},{"./_stream_transform":202,"core-util-is":204,inherits:195}],201:[function(e,t){(function(r){function n(t){t=t||{};var r=t.highWaterMark;this.highWaterMark=r||0===r?r:16384,this.highWaterMark=~~this.highWaterMark,this.buffer=[],this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=!1,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.calledRead=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.objectMode=!!t.objectMode,this.defaultEncoding=t.defaultEncoding||"utf8",this.ranOut=!1,this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,t.encoding&&(k||(k=e("string_decoder/").StringDecoder),this.decoder=new k(t.encoding),this.encoding=t.encoding)}function i(e){return this instanceof i?(this._readableState=new n(e,this),this.readable=!0,void E.call(this)):new i(e)}function o(e,t,r,n,i){var o=c(t,r);if(o)e.emit("error",o);else if(null===r||void 0===r)t.reading=!1,t.ended||u(e,t);else if(t.objectMode||r&&r.length>0)if(t.ended&&!i){var a=new Error("stream.push() after EOF");e.emit("error",a)}else if(t.endEmitted&&i){var a=new Error("stream.unshift() after end event");e.emit("error",a)}else!t.decoder||i||n||(r=t.decoder.write(r)),t.length+=t.objectMode?1:r.length,i?t.buffer.unshift(r):(t.reading=!1,t.buffer.push(r)),t.needReadable&&f(e),l(e,t);else i||(t.reading=!1);return s(t)}function s(e){return!e.ended&&(e.needReadable||e.length<e.highWaterMark||0===e.length)}function a(e){if(e>=R)e=R;else{e--;for(var t=1;32>t;t<<=1)e|=e>>t;e++}return e}function h(e,t){return 0===t.length&&t.ended?0:t.objectMode?0===e?0:1:null===e||isNaN(e)?t.flowing&&t.buffer.length?t.buffer[0].length:t.length:0>=e?0:(e>t.highWaterMark&&(t.highWaterMark=a(e)),e>t.length?t.ended?t.length:(t.needReadable=!0,0):e)}function c(e,t){var r=null;return T.isBuffer(t)||"string"==typeof t||null===t||void 0===t||e.objectMode||(r=new TypeError("Invalid non-string/buffer chunk")),r}function u(e,t){if(t.decoder&&!t.ended){var r=t.decoder.end();r&&r.length&&(t.buffer.push(r),t.length+=t.objectMode?1:r.length)}t.ended=!0,t.length>0?f(e):w(e)}function f(e){var t=e._readableState;t.needReadable=!1,t.emittedReadable||(t.emittedReadable=!0,t.sync?r.nextTick(function(){d(e)}):d(e))}function d(e){e.emit("readable")}function l(e,t){t.readingMore||(t.readingMore=!0,r.nextTick(function(){p(e,t)}))}function p(e,t){for(var r=t.length;!t.reading&&!t.flowing&&!t.ended&&t.length<t.highWaterMark&&(e.read(0),r!==t.length);)r=t.length;t.readingMore=!1}function b(e){return function(){var t=e._readableState;t.awaitDrain--,0===t.awaitDrain&&g(e)}}function g(e){function t(e){var t=e.write(r);!1===t&&n.awaitDrain++}var r,n=e._readableState;for(n.awaitDrain=0;n.pipesCount&&null!==(r=e.read());)if(1===n.pipesCount?t(n.pipes,0,null):_(n.pipes,t),e.emit("data",r),n.awaitDrain>0)return;return 0===n.pipesCount?(n.flowing=!1,void(A.listenerCount(e,"data")>0&&v(e))):void(n.ranOut=!0)}function m(){this._readableState.ranOut&&(this._readableState.ranOut=!1,g(this))}function v(e,t){var n=e._readableState;if(n.flowing)throw new Error("Cannot switch to old mode now.");var i=t||!1,o=!1;e.readable=!0,e.pipe=E.prototype.pipe,e.on=e.addListener=E.prototype.on,e.on("readable",function(){o=!0;for(var t;!i&&null!==(t=e.read());)e.emit("data",t);null===t&&(o=!1,e._readableState.needReadable=!0)}),e.pause=function(){i=!0,this.emit("pause")},e.resume=function(){i=!1,o?r.nextTick(function(){e.emit("readable")}):this.read(0),this.emit("resume")},e.emit("readable")}function y(e,t){var r,n=t.buffer,i=t.length,o=!!t.decoder,s=!!t.objectMode;if(0===n.length)return null;if(0===i)r=null;else if(s)r=n.shift();else if(!e||e>=i)r=o?n.join(""):T.concat(n,i),n.length=0;else if(e<n[0].length){var a=n[0];r=a.slice(0,e),n[0]=a.slice(e)}else if(e===n[0].length)r=n.shift();else{r=o?"":new T(e);for(var h=0,c=0,u=n.length;u>c&&e>h;c++){var a=n[0],f=Math.min(e-h,a.length);o?r+=a.slice(0,f):a.copy(r,h,0,f),f<a.length?n[0]=a.slice(f):n.shift(),h+=f}}return r}function w(e){var t=e._readableState;if(t.length>0)throw new Error("endReadable called on non-empty stream");!t.endEmitted&&t.calledRead&&(t.ended=!0,r.nextTick(function(){t.endEmitted||0!==t.length||(t.endEmitted=!0,e.readable=!1,e.emit("end"))}))}function _(e,t){for(var r=0,n=e.length;n>r;r++)t(e[r],r)}function x(e,t){for(var r=0,n=e.length;n>r;r++)if(e[r]===t)return r;return-1}t.exports=i;var S=e("isarray"),T=e("buffer").Buffer;i.ReadableState=n;var A=e("events").EventEmitter;A.listenerCount||(A.listenerCount=function(e,t){return e.listeners(t).length});var E=e("stream"),C=e("core-util-is");C.inherits=e("inherits");var k;C.inherits(i,E),i.prototype.push=function(e,t){var r=this._readableState;return"string"!=typeof e||r.objectMode||(t=t||r.defaultEncoding,t!==r.encoding&&(e=new T(e,t),t="")),o(this,r,e,t,!1)},i.prototype.unshift=function(e){var t=this._readableState;return o(this,t,e,"",!0)},i.prototype.setEncoding=function(t){k||(k=e("string_decoder/").StringDecoder),this._readableState.decoder=new k(t),this._readableState.encoding=t};var R=8388608;i.prototype.read=function(e){var t=this._readableState;t.calledRead=!0;var r,n=e;if(("number"!=typeof e||e>0)&&(t.emittedReadable=!1),0===e&&t.needReadable&&(t.length>=t.highWaterMark||t.ended))return f(this),null;if(e=h(e,t),0===e&&t.ended)return r=null,t.length>0&&t.decoder&&(r=y(e,t),t.length-=r.length),0===t.length&&w(this),r;var i=t.needReadable;return t.length-e<=t.highWaterMark&&(i=!0),(t.ended||t.reading)&&(i=!1),i&&(t.reading=!0,t.sync=!0,0===t.length&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1),i&&!t.reading&&(e=h(n,t)),r=e>0?y(e,t):null,null===r&&(t.needReadable=!0,e=0),t.length-=e,0!==t.length||t.ended||(t.needReadable=!0),t.ended&&!t.endEmitted&&0===t.length&&w(this),r},i.prototype._read=function(){this.emit("error",new Error("not implemented"))},i.prototype.pipe=function(e,t){function n(e){e===u&&o()}function i(){e.end()}function o(){e.removeListener("close",a),e.removeListener("finish",h),e.removeListener("drain",p),e.removeListener("error",s),e.removeListener("unpipe",n),u.removeListener("end",i),u.removeListener("end",o),(!e._writableState||e._writableState.needDrain)&&p()}function s(t){c(),e.removeListener("error",s),0===A.listenerCount(e,"error")&&e.emit("error",t)}function a(){e.removeListener("finish",h),c()}function h(){e.removeListener("close",a),c()}function c(){u.unpipe(e)}var u=this,f=this._readableState;switch(f.pipesCount){case 0:f.pipes=e;break;case 1:f.pipes=[f.pipes,e];break;default:f.pipes.push(e)}f.pipesCount+=1;var d=(!t||t.end!==!1)&&e!==r.stdout&&e!==r.stderr,l=d?i:o;f.endEmitted?r.nextTick(l):u.once("end",l),e.on("unpipe",n);var p=b(u);return e.on("drain",p),e._events&&e._events.error?S(e._events.error)?e._events.error.unshift(s):e._events.error=[s,e._events.error]:e.on("error",s),e.once("close",a),e.once("finish",h),e.emit("pipe",u),f.flowing||(this.on("readable",m),f.flowing=!0,r.nextTick(function(){g(u)})),e},i.prototype.unpipe=function(e){var t=this._readableState;if(0===t.pipesCount)return this;if(1===t.pipesCount)return e&&e!==t.pipes?this:(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,this.removeListener("readable",m),t.flowing=!1,e&&e.emit("unpipe",this),this);if(!e){var r=t.pipes,n=t.pipesCount;t.pipes=null,t.pipesCount=0,this.removeListener("readable",m),t.flowing=!1;for(var i=0;n>i;i++)r[i].emit("unpipe",this);return this}var i=x(t.pipes,e);return-1===i?this:(t.pipes.splice(i,1),t.pipesCount-=1,1===t.pipesCount&&(t.pipes=t.pipes[0]),e.emit("unpipe",this),this)},i.prototype.on=function(e,t){var r=E.prototype.on.call(this,e,t);if("data"!==e||this._readableState.flowing||v(this),"readable"===e&&this.readable){var n=this._readableState;n.readableListening||(n.readableListening=!0,n.emittedReadable=!1,n.needReadable=!0,n.reading?n.length&&f(this,n):this.read(0))}return r},i.prototype.addListener=i.prototype.on,i.prototype.resume=function(){v(this),this.read(0),this.emit("resume")},i.prototype.pause=function(){v(this,!0),this.emit("pause")},i.prototype.wrap=function(e){var t=this._readableState,r=!1,n=this;e.on("end",function(){if(t.decoder&&!t.ended){var e=t.decoder.end();e&&e.length&&n.push(e)}n.push(null)}),e.on("data",function(i){if(t.decoder&&(i=t.decoder.write(i)),(!t.objectMode||null!==i&&void 0!==i)&&(t.objectMode||i&&i.length)){var o=n.push(i);o||(r=!0,e.pause())}});for(var i in e)"function"==typeof e[i]&&"undefined"==typeof this[i]&&(this[i]=function(t){return function(){return e[t].apply(e,arguments)}}(i));var o=["error","close","destroy","pause","resume"];return _(o,function(t){e.on(t,n.emit.bind(n,t))}),n._read=function(){r&&(r=!1,e.resume())},n},i._fromList=y}).call(this,e("_process"))},{_process:197,buffer:52,"core-util-is":204,events:194,inherits:195,isarray:196,stream:209,"string_decoder/":210}],202:[function(e,t){function r(e,t){this.afterTransform=function(e,r){return n(t,e,r)},this.needTransform=!1,this.transforming=!1,this.writecb=null,this.writechunk=null}function n(e,t,r){var n=e._transformState;n.transforming=!1;var i=n.writecb;if(!i)return e.emit("error",new Error("no writecb in Transform class"));n.writechunk=null,n.writecb=null,null!==r&&void 0!==r&&e.push(r),i&&i(t);var o=e._readableState;o.reading=!1,(o.needReadable||o.length<o.highWaterMark)&&e._read(o.highWaterMark)}function i(e){if(!(this instanceof i))return new i(e);s.call(this,e);var t=(this._transformState=new r(e,this),this);this._readableState.needReadable=!0,this._readableState.sync=!1,this.once("finish",function(){"function"==typeof this._flush?this._flush(function(e){o(t,e)}):o(t)})}function o(e,t){if(t)return e.emit("error",t);var r=e._writableState,n=(e._readableState,e._transformState);if(r.length)throw new Error("calling transform done when ws.length != 0");if(n.transforming)throw new Error("calling transform done when still transforming");return e.push(null)}t.exports=i;var s=e("./_stream_duplex"),a=e("core-util-is");a.inherits=e("inherits"),a.inherits(i,s),i.prototype.push=function(e,t){return this._transformState.needTransform=!1,s.prototype.push.call(this,e,t)},i.prototype._transform=function(){throw new Error("not implemented")},i.prototype._write=function(e,t,r){var n=this._transformState;if(n.writecb=r,n.writechunk=e,n.writeencoding=t,!n.transforming){var i=this._readableState;(n.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}},i.prototype._read=function(){var e=this._transformState;null!==e.writechunk&&e.writecb&&!e.transforming?(e.transforming=!0,this._transform(e.writechunk,e.writeencoding,e.afterTransform)):e.needTransform=!0}},{"./_stream_duplex":199,"core-util-is":204,inherits:195}],203:[function(e,t){(function(r){function n(e,t,r){this.chunk=e,this.encoding=t,this.callback=r}function i(e,t){e=e||{};var r=e.highWaterMark;this.highWaterMark=r||0===r?r:16384,this.objectMode=!!e.objectMode,this.highWaterMark=~~this.highWaterMark,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1;var n=e.decodeStrings===!1;this.decodeStrings=!n,this.defaultEncoding=e.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e){l(t,e)},this.writecb=null,this.writelen=0,this.buffer=[],this.errorEmitted=!1}function o(t){var r=e("./_stream_duplex");return this instanceof o||this instanceof r?(this._writableState=new i(t,this),this.writable=!0,void x.call(this)):new o(t)}function s(e,t,n){var i=new Error("write after end");e.emit("error",i),r.nextTick(function(){n(i)})}function a(e,t,n,i){var o=!0;if(!w.isBuffer(n)&&"string"!=typeof n&&null!==n&&void 0!==n&&!t.objectMode){var s=new TypeError("Invalid non-string/buffer chunk");e.emit("error",s),r.nextTick(function(){i(s)}),o=!1}return o}function h(e,t,r){return e.objectMode||e.decodeStrings===!1||"string"!=typeof t||(t=new w(t,r)),t}function c(e,t,r,i,o){r=h(t,r,i),w.isBuffer(r)&&(i="buffer");var s=t.objectMode?1:r.length;t.length+=s;var a=t.length<t.highWaterMark;return a||(t.needDrain=!0),t.writing?t.buffer.push(new n(r,i,o)):u(e,t,s,r,i,o),a}function u(e,t,r,n,i,o){t.writelen=r,t.writecb=o,t.writing=!0,t.sync=!0,e._write(n,i,t.onwrite),t.sync=!1}function f(e,t,n,i,o){n?r.nextTick(function(){o(i)}):o(i),e._writableState.errorEmitted=!0,e.emit("error",i)}function d(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0}function l(e,t){var n=e._writableState,i=n.sync,o=n.writecb;if(d(n),t)f(e,n,i,t,o);else{var s=m(e,n);s||n.bufferProcessing||!n.buffer.length||g(e,n),i?r.nextTick(function(){p(e,n,s,o)}):p(e,n,s,o)}}function p(e,t,r,n){r||b(e,t),n(),r&&v(e,t)}function b(e,t){0===t.length&&t.needDrain&&(t.needDrain=!1,e.emit("drain"))}function g(e,t){t.bufferProcessing=!0;for(var r=0;r<t.buffer.length;r++){var n=t.buffer[r],i=n.chunk,o=n.encoding,s=n.callback,a=t.objectMode?1:i.length;if(u(e,t,a,i,o,s),t.writing){r++;break}}t.bufferProcessing=!1,r<t.buffer.length?t.buffer=t.buffer.slice(r):t.buffer.length=0}function m(e,t){return t.ending&&0===t.length&&!t.finished&&!t.writing}function v(e,t){var r=m(e,t);return r&&(t.finished=!0,e.emit("finish")),r}function y(e,t,n){t.ending=!0,v(e,t),n&&(t.finished?r.nextTick(n):e.once("finish",n)),t.ended=!0}t.exports=o;var w=e("buffer").Buffer;o.WritableState=i;var _=e("core-util-is");_.inherits=e("inherits");var x=e("stream");_.inherits(o,x),o.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe. Not readable."))},o.prototype.write=function(e,t,r){var n=this._writableState,i=!1;return"function"==typeof t&&(r=t,t=null),w.isBuffer(e)?t="buffer":t||(t=n.defaultEncoding),"function"!=typeof r&&(r=function(){}),n.ended?s(this,n,r):a(this,n,e,r)&&(i=c(this,n,e,t,r)),i},o.prototype._write=function(e,t,r){r(new Error("not implemented"))},o.prototype.end=function(e,t,r){var n=this._writableState;"function"==typeof e?(r=e,e=null,t=null):"function"==typeof t&&(r=t,t=null),"undefined"!=typeof e&&null!==e&&this.write(e,t),n.ending||n.finished||y(this,n,r)}}).call(this,e("_process"))},{"./_stream_duplex":199,_process:197,buffer:52,"core-util-is":204,inherits:195,stream:209}],204:[function(e,t,r){(function(e){function t(e){return Array.isArray(e)}function n(e){return"boolean"==typeof e}function i(e){return null===e}function o(e){return null==e}function s(e){return"number"==typeof e}function a(e){return"string"==typeof e}function h(e){return"symbol"==typeof e}function c(e){return void 0===e}function u(e){return f(e)&&"[object RegExp]"===m(e)}function f(e){return"object"==typeof e&&null!==e}function d(e){return f(e)&&"[object Date]"===m(e)}function l(e){return f(e)&&("[object Error]"===m(e)||e instanceof Error)}function p(e){return"function"==typeof e}function b(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||"undefined"==typeof e}function g(t){return e.isBuffer(t)}function m(e){return Object.prototype.toString.call(e)}r.isArray=t,r.isBoolean=n,r.isNull=i,r.isNullOrUndefined=o,r.isNumber=s,r.isString=a,r.isSymbol=h,r.isUndefined=c,r.isRegExp=u,r.isObject=f,r.isDate=d,r.isError=l,r.isFunction=p,r.isPrimitive=b,r.isBuffer=g}).call(this,e("buffer").Buffer)},{buffer:52}],205:[function(e,t){t.exports=e("./lib/_stream_passthrough.js")},{"./lib/_stream_passthrough.js":200}],206:[function(e,t,r){var n=e("stream");r=t.exports=e("./lib/_stream_readable.js"),r.Stream=n,r.Readable=r,r.Writable=e("./lib/_stream_writable.js"),r.Duplex=e("./lib/_stream_duplex.js"),r.Transform=e("./lib/_stream_transform.js"),r.PassThrough=e("./lib/_stream_passthrough.js")},{"./lib/_stream_duplex.js":199,"./lib/_stream_passthrough.js":200,"./lib/_stream_readable.js":201,"./lib/_stream_transform.js":202,"./lib/_stream_writable.js":203,stream:209}],207:[function(e,t){t.exports=e("./lib/_stream_transform.js")},{"./lib/_stream_transform.js":202}],208:[function(e,t){t.exports=e("./lib/_stream_writable.js")},{"./lib/_stream_writable.js":203}],209:[function(e,t){function r(){n.call(this)}t.exports=r;var n=e("events").EventEmitter,i=e("inherits");i(r,n),r.Readable=e("readable-stream/readable.js"),r.Writable=e("readable-stream/writable.js"),r.Duplex=e("readable-stream/duplex.js"),r.Transform=e("readable-stream/transform.js"),r.PassThrough=e("readable-stream/passthrough.js"),r.Stream=r,r.prototype.pipe=function(e,t){function r(t){e.writable&&!1===e.write(t)&&c.pause&&c.pause()}function i(){c.readable&&c.resume&&c.resume()}function o(){u||(u=!0,e.end())}function s(){u||(u=!0,"function"==typeof e.destroy&&e.destroy())}function a(e){if(h(),0===n.listenerCount(this,"error"))throw e}function h(){c.removeListener("data",r),e.removeListener("drain",i),c.removeListener("end",o),c.removeListener("close",s),c.removeListener("error",a),e.removeListener("error",a),c.removeListener("end",h),c.removeListener("close",h),e.removeListener("close",h)}var c=this;c.on("data",r),e.on("drain",i),e._isStdio||t&&t.end===!1||(c.on("end",o),c.on("close",s));var u=!1;return c.on("error",a),e.on("error",a),c.on("end",h),c.on("close",h),e.on("close",h),e.emit("pipe",c),e}},{events:194,inherits:195,"readable-stream/duplex.js":198,"readable-stream/passthrough.js":205,"readable-stream/readable.js":206,"readable-stream/transform.js":207,"readable-stream/writable.js":208}],210:[function(e,t,r){function n(e){if(e&&!h(e))throw new Error("Unknown encoding: "+e)}function i(e){return e.toString(this.encoding)}function o(e){this.charReceived=e.length%2,this.charLength=this.charReceived?2:0}function s(e){this.charReceived=e.length%3,this.charLength=this.charReceived?3:0}var a=e("buffer").Buffer,h=a.isEncoding||function(e){switch(e&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}},c=r.StringDecoder=function(e){switch(this.encoding=(e||"utf8").toLowerCase().replace(/[-_]/,""),n(e),this.encoding){case"utf8":this.surrogateSize=3;break;case"ucs2":case"utf16le":this.surrogateSize=2,this.detectIncompleteChar=o;break;case"base64":this.surrogateSize=3,this.detectIncompleteChar=s;break;default:return void(this.write=i)}this.charBuffer=new a(6),this.charReceived=0,this.charLength=0};c.prototype.write=function(e){for(var t="";this.charLength;){var r=e.length>=this.charLength-this.charReceived?this.charLength-this.charReceived:e.length;if(e.copy(this.charBuffer,this.charReceived,0,r),this.charReceived+=r,this.charReceived<this.charLength)return"";e=e.slice(r,e.length),t=this.charBuffer.slice(0,this.charLength).toString(this.encoding);var n=t.charCodeAt(t.length-1);if(!(n>=55296&&56319>=n)){if(this.charReceived=this.charLength=0,0===e.length)return t;break}this.charLength+=this.surrogateSize,t=""}this.detectIncompleteChar(e);var i=e.length;this.charLength&&(e.copy(this.charBuffer,0,e.length-this.charReceived,i),i-=this.charReceived),t+=e.toString(this.encoding,0,i);var i=t.length-1,n=t.charCodeAt(i);if(n>=55296&&56319>=n){var o=this.surrogateSize;return this.charLength+=o,this.charReceived+=o,this.charBuffer.copy(this.charBuffer,o,0,o),e.copy(this.charBuffer,0,0,o),t.substring(0,i)}return t},c.prototype.detectIncompleteChar=function(e){for(var t=e.length>=3?3:e.length;t>0;t--){var r=e[e.length-t];if(1==t&&r>>5==6){this.charLength=2;break}if(2>=t&&r>>4==14){this.charLength=3;break}if(3>=t&&r>>3==30){this.charLength=4;break}}this.charReceived=t},c.prototype.end=function(e){var t="";if(e&&e.length&&(t=this.write(e)),this.charReceived){var r=this.charReceived,n=this.charBuffer,i=this.encoding;t+=n.slice(0,r).toString(i)}return t}},{buffer:52}],211:[function(e,t){t.exports=function(e){return e&&"object"==typeof e&&"function"==typeof e.copy&&"function"==typeof e.fill&&"function"==typeof e.readUInt8}},{}],212:[function(e,t,r){(function(t,n){function i(e,t){var n={seen:[],stylize:s};return arguments.length>=3&&(n.depth=arguments[2]),arguments.length>=4&&(n.colors=arguments[3]),b(t)?n.showHidden=t:t&&r._extend(n,t),_(n.showHidden)&&(n.showHidden=!1),_(n.depth)&&(n.depth=2),_(n.colors)&&(n.colors=!1),_(n.customInspect)&&(n.customInspect=!0),n.colors&&(n.stylize=o),h(n,e,n.depth)}function o(e,t){var r=i.styles[t];return r?"["+i.colors[r][0]+"m"+e+"["+i.colors[r][1]+"m":e}function s(e){return e}function a(e){var t={};return e.forEach(function(e){t[e]=!0}),t}function h(e,t,n){if(e.customInspect&&t&&E(t.inspect)&&t.inspect!==r.inspect&&(!t.constructor||t.constructor.prototype!==t)){var i=t.inspect(n,e);return y(i)||(i=h(e,i,n)),i}var o=c(e,t);if(o)return o;var s=Object.keys(t),b=a(s);if(e.showHidden&&(s=Object.getOwnPropertyNames(t)),A(t)&&(s.indexOf("message")>=0||s.indexOf("description")>=0))return u(t);if(0===s.length){if(E(t)){var g=t.name?": "+t.name:"";return e.stylize("[Function"+g+"]","special")}if(x(t))return e.stylize(RegExp.prototype.toString.call(t),"regexp");if(T(t))return e.stylize(Date.prototype.toString.call(t),"date");if(A(t))return u(t)}var m="",v=!1,w=["{","}"];if(p(t)&&(v=!0,w=["[","]"]),E(t)){var _=t.name?": "+t.name:"";m=" [Function"+_+"]"}if(x(t)&&(m=" "+RegExp.prototype.toString.call(t)),T(t)&&(m=" "+Date.prototype.toUTCString.call(t)),A(t)&&(m=" "+u(t)),0===s.length&&(!v||0==t.length))return w[0]+m+w[1];if(0>n)return x(t)?e.stylize(RegExp.prototype.toString.call(t),"regexp"):e.stylize("[Object]","special");e.seen.push(t);var S;return S=v?f(e,t,n,b,s):s.map(function(r){return d(e,t,n,b,r,v)}),e.seen.pop(),l(S,m,w)}function c(e,t){if(_(t))return e.stylize("undefined","undefined");if(y(t)){var r="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(r,"string")}return v(t)?e.stylize(""+t,"number"):b(t)?e.stylize(""+t,"boolean"):g(t)?e.stylize("null","null"):void 0}function u(e){return"["+Error.prototype.toString.call(e)+"]"}function f(e,t,r,n,i){for(var o=[],s=0,a=t.length;a>s;++s)o.push(B(t,String(s))?d(e,t,r,n,String(s),!0):"");return i.forEach(function(i){i.match(/^\d+$/)||o.push(d(e,t,r,n,i,!0))}),o}function d(e,t,r,n,i,o){var s,a,c;if(c=Object.getOwnPropertyDescriptor(t,i)||{value:t[i]},c.get?a=c.set?e.stylize("[Getter/Setter]","special"):e.stylize("[Getter]","special"):c.set&&(a=e.stylize("[Setter]","special")),B(n,i)||(s="["+i+"]"),a||(e.seen.indexOf(c.value)<0?(a=g(r)?h(e,c.value,null):h(e,c.value,r-1),a.indexOf("\n")>-1&&(a=o?a.split("\n").map(function(e){return"  "+e}).join("\n").substr(2):"\n"+a.split("\n").map(function(e){return"   "+e}).join("\n"))):a=e.stylize("[Circular]","special")),_(s)){if(o&&i.match(/^\d+$/))return a;s=JSON.stringify(""+i),s.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(s=s.substr(1,s.length-2),s=e.stylize(s,"name")):(s=s.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),s=e.stylize(s,"string"))}return s+": "+a}function l(e,t,r){var n=0,i=e.reduce(function(e,t){return n++,t.indexOf("\n")>=0&&n++,e+t.replace(/\u001b\[\d\d?m/g,"").length+1},0);return i>60?r[0]+(""===t?"":t+"\n ")+" "+e.join(",\n  ")+" "+r[1]:r[0]+t+" "+e.join(", ")+" "+r[1]}function p(e){return Array.isArray(e)}function b(e){return"boolean"==typeof e}function g(e){return null===e}function m(e){return null==e}function v(e){return"number"==typeof e}function y(e){return"string"==typeof e}function w(e){return"symbol"==typeof e}function _(e){return void 0===e}function x(e){return S(e)&&"[object RegExp]"===k(e)}function S(e){return"object"==typeof e&&null!==e}function T(e){return S(e)&&"[object Date]"===k(e)}function A(e){return S(e)&&("[object Error]"===k(e)||e instanceof Error)}function E(e){return"function"==typeof e}function C(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||"undefined"==typeof e}function k(e){return Object.prototype.toString.call(e)}function R(e){return 10>e?"0"+e.toString(10):e.toString(10)}function M(){var e=new Date,t=[R(e.getHours()),R(e.getMinutes()),R(e.getSeconds())].join(":");return[e.getDate(),L[e.getMonth()],t].join(" ")}function B(e,t){return Object.prototype.hasOwnProperty.call(e,t)}var I=/%[sdj%]/g;r.format=function(e){if(!y(e)){for(var t=[],r=0;r<arguments.length;r++)t.push(i(arguments[r]));return t.join(" ")}for(var r=1,n=arguments,o=n.length,s=String(e).replace(I,function(e){if("%%"===e)return"%";if(r>=o)return e;switch(e){case"%s":return String(n[r++]);case"%d":return Number(n[r++]);case"%j":try{return JSON.stringify(n[r++])}catch(e){return"[Circular]"}default:return e}}),a=n[r];o>r;a=n[++r])s+=g(a)||!S(a)?" "+a:" "+i(a);return s},r.deprecate=function(e,i){function o(){if(!s){if(t.throwDeprecation)throw new Error(i);t.traceDeprecation?console.trace(i):console.error(i),s=!0}return e.apply(this,arguments)}if(_(n.process))return function(){return r.deprecate(e,i).apply(this,arguments)};if(t.noDeprecation===!0)return e;var s=!1;return o};var j,P={};r.debuglog=function(e){if(_(j)&&(j=t.env.NODE_DEBUG||""),e=e.toUpperCase(),!P[e])if(new RegExp("\\b"+e+"\\b","i").test(j)){var n=t.pid;P[e]=function(){var t=r.format.apply(r,arguments);console.error("%s %d: %s",e,n,t)}}else P[e]=function(){};return P[e]},r.inspect=i,i.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},i.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},r.isArray=p,r.isBoolean=b,r.isNull=g,r.isNullOrUndefined=m,r.isNumber=v,r.isString=y,r.isSymbol=w,r.isUndefined=_,r.isRegExp=x,r.isObject=S,r.isDate=T,r.isError=A,r.isFunction=E,r.isPrimitive=C,r.isBuffer=e("./support/isBuffer");var L=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];r.log=function(){console.log("%s - %s",M(),r.format.apply(r,arguments))},r.inherits=e("inherits"),r._extend=function(e,t){if(!t||!S(t))return e;for(var r=Object.keys(t),n=r.length;n--;)e[r[n]]=t[r[n]];return e}}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./support/isBuffer":211,_process:197,inherits:195}],213:[function(require,module,exports){function Context(){}var indexOf=require("indexof"),Object_keys=function(e){if(Object.keys)return Object.keys(e);var t=[];for(var r in e)t.push(r);return t},forEach=function(e,t){if(e.forEach)return e.forEach(t);for(var r=0;r<e.length;r++)t(e[r],r,e)
},defineProp=function(){try{return Object.defineProperty({},"_",{}),function(e,t,r){Object.defineProperty(e,t,{writable:!0,enumerable:!1,configurable:!0,value:r})}}catch(e){return function(e,t,r){e[t]=r}}}(),globals=["Array","Boolean","Date","Error","EvalError","Function","Infinity","JSON","Math","NaN","Number","Object","RangeError","ReferenceError","RegExp","String","SyntaxError","TypeError","URIError","decodeURI","decodeURIComponent","encodeURI","encodeURIComponent","escape","eval","isFinite","isNaN","parseFloat","parseInt","undefined","unescape"];Context.prototype={};var Script=exports.Script=function(e){return this instanceof Script?void(this.code=e):new Script(e)};Script.prototype.runInContext=function(e){if(!(e instanceof Context))throw new TypeError("needs a 'context' argument.");var t=document.createElement("iframe");t.style||(t.style={}),t.style.display="none",document.body.appendChild(t);var r=t.contentWindow,n=r.eval,i=r.execScript;!n&&i&&(i.call(r,"null"),n=r.eval),forEach(Object_keys(e),function(t){r[t]=e[t]}),forEach(globals,function(t){e[t]&&(r[t]=e[t])});var o=Object_keys(r),s=n.call(r,this.code);return forEach(Object_keys(r),function(t){(t in e||-1===indexOf(o,t))&&(e[t]=r[t])}),forEach(globals,function(t){t in e||defineProp(e,t,r[t])}),document.body.removeChild(t),s},Script.prototype.runInThisContext=function(){return eval(this.code)},Script.prototype.runInNewContext=function(e){var t=Script.createContext(e),r=this.runInContext(t);return forEach(Object_keys(t),function(r){e[r]=t[r]}),r},forEach(Object_keys(Script.prototype),function(e){exports[e]=Script[e]=function(t){var r=Script(t);return r[e].apply(r,[].slice.call(arguments,1))}}),exports.createScript=function(e){return exports.Script(e)},exports.createContext=Script.createContext=function(e){var t=new Context;return"object"==typeof e&&forEach(Object_keys(e),function(r){t[r]=e[r]}),t}},{indexof:214}],214:[function(e,t){var r=[].indexOf;t.exports=function(e,t){if(r)return e.indexOf(t);for(var n=0;n<e.length;++n)if(e[n]===t)return n;return-1}},{}],215:[function(e,t,r){!function(){"use strict";function e(){try{"undefined"!=typeof AudioContext?t=new AudioContext:"undefined"!=typeof webkitAudioContext?t=new webkitAudioContext:n=!1}catch(e){n=!1}if(!n)if("undefined"!=typeof Audio)try{new Audio}catch(e){i=!0}else i=!0}var t=null,n=!0,i=!1;if(e(),n){var o="undefined"==typeof t.createGain?t.createGainNode():t.createGain();o.gain.value=1,o.connect(t.destination)}var s=function(){this.init()};s.prototype={init:function(){var e=this||a;return e._codecs={},e._howls=[],e._muted=!1,e._volume=1,e.iOSAutoEnable=!0,e.noAudio=i,e.usingWebAudio=n,e.ctx=t,i||e._setupCodecs(),e},volume:function(e){var t=this||a;if(e=parseFloat(e),"undefined"!=typeof e&&e>=0&&1>=e){t._volume=e,n&&(o.gain.value=e);for(var r=0;r<t._howls.length;r++)if(!t._howls[r]._webAudio)for(var i=t._howls[r]._getSoundIds(),s=0;s<i.length;s++){var h=t._howls[r]._soundById(i[s]);h&&h._node&&(h._node.volume=h._volume*e)}return t}return t._volume},mute:function(e){var t=this||a;t._muted=e,n&&(o.gain.value=e?0:t._volume);for(var r=0;r<t._howls.length;r++)if(!t._howls[r]._webAudio)for(var i=t._howls[r]._getSoundIds(),s=0;s<i.length;s++){var h=t._howls[r]._soundById(i[s]);h&&h._node&&(h._node.muted=e?!0:h._muted)}return t},codecs:function(e){return(this||a)._codecs[e]},_setupCodecs:function(){var e=this||a,t=new Audio,r=t.canPlayType("audio/mpeg;").replace(/^no$/,"");return e._codecs={mp3:!(!r&&!t.canPlayType("audio/mp3;").replace(/^no$/,"")),mpeg:!!r,opus:!!t.canPlayType('audio/ogg; codecs="opus"').replace(/^no$/,""),ogg:!!t.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),wav:!!t.canPlayType('audio/wav; codecs="1"').replace(/^no$/,""),aac:!!t.canPlayType("audio/aac;").replace(/^no$/,""),m4a:!!(t.canPlayType("audio/x-m4a;")||t.canPlayType("audio/m4a;")||t.canPlayType("audio/aac;")).replace(/^no$/,""),mp4:!!(t.canPlayType("audio/x-mp4;")||t.canPlayType("audio/mp4;")||t.canPlayType("audio/aac;")).replace(/^no$/,""),weba:!!t.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,""),webm:!!t.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")},e},_enableiOSAudio:function(){var e=this||a;if(!t||!e._iOSEnabled&&/iPhone|iPad|iPod/i.test(navigator.userAgent)){e._iOSEnabled=!1;var r=function(){var n=t.createBuffer(1,1,22050),i=t.createBufferSource();i.buffer=n,i.connect(t.destination),"undefined"==typeof i.start?i.noteOn(0):i.start(0),setTimeout(function(){(i.playbackState===i.PLAYING_STATE||i.playbackState===i.FINISHED_STATE)&&(e._iOSEnabled=!0,e.iOSAutoEnable=!1,window.removeEventListener("touchstart",r,!1))},0)};return window.addEventListener("touchstart",r,!1),e}}};var a=new s,h=function(e){var t=this;return e.src?void t.init(e):void console.error("An array of source files must be passed with any new Howl.")};h.prototype={init:function(e){var r=this;return r._autoplay=e.autoplay||!1,r._ext=e.ext||null,r._html5=e.html5||!1,r._muted=e.mute||!1,r._loop=e.loop||!1,r._pool=e.pool||5,r._preload="boolean"==typeof e.preload?e.preload:!0,r._rate=e.rate||1,r._sprite=e.sprite||{},r._src="string"!=typeof e.src?e.src:[e.src],r._volume=void 0!==e.volume?e.volume:1,r._duration=0,r._loaded=!1,r._sounds=[],r._endTimers={},r._onend=e.onend?[{fn:e.onend}]:[],r._onfaded=e.onfaded?[{fn:e.onfaded}]:[],r._onload=e.onload?[{fn:e.onload}]:[],r._onloaderror=e.onloaderror?[{fn:e.onloaderror}]:[],r._onpause=e.onpause?[{fn:e.onpause}]:[],r._onplay=e.onplay?[{fn:e.onplay}]:[],r._webAudio=n&&!r._html5,"undefined"!=typeof t&&t&&a.iOSAutoEnable&&a._enableiOSAudio(),a._howls.push(r),r._preload&&r.load(),r},load:function(){var e=this,t=null;if(i)return void e._emit("loaderror");"string"==typeof e._src&&(e._src=[e._src]);for(var r=0;r<e._src.length;r++){var n,o;if(e._ext&&e._ext[r]?n=e._ext[r]:(o=e._src[r],n=/^data:audio\/([^;,]+);/i.exec(o),n||(n=/\.([^.]+)$/.exec(o.split("?",1)[0])),n&&(n=n[1].toLowerCase())),a.codecs(n)){t=e._src[r];break}}return t?(e._src=t,new c(e),e._webAudio&&f(e),e):void e._emit("loaderror")},play:function(e){var r=this,n=null;if("number"==typeof e)n=e,e=null;else if("undefined"==typeof e){e="__default";for(var i=0,o=0;o<r._sounds.length;o++)r._sounds[o]._paused&&!r._sounds[o]._ended&&(i++,n=r._sounds[o]._id);1===i?e=null:n=null}var s=n?r._soundById(n):r._inactiveSound();if(!s)return null;if(n&&!e&&(e=s._sprite||"__default"),!r._loaded&&!r._sprite[e])return r.once("load",function(){r.play(r._soundById(s._id)?s._id:void 0)}),s._id;if(n&&!s._paused)return s._id;var h=s._seek>0?s._seek:r._sprite[e][0]/1e3,c=(r._sprite[e][0]+r._sprite[e][1])/1e3-h,u=!(!s._loop&&!r._sprite[e][2]),f=function(){r._emit("end",s._id),!r._webAudio&&u&&r.stop(s._id).play(s._id),r._webAudio&&u&&(r._emit("play",s._id),s._seek=s._start||0,s._playStart=t.currentTime,r._endTimers[s._id]=setTimeout(f,1e3*(s._stop-s._start)/Math.abs(r._rate))),r._webAudio&&!u&&(s._paused=!0,s._ended=!0,s._seek=s._start||0,r._clearTimer(s._id),s._node.bufferSource=null),r._webAudio||u||r.stop(s._id)};r._endTimers[s._id]=setTimeout(f,1e3*c/Math.abs(r._rate)),s._paused=!1,s._ended=!1,s._sprite=e,s._seek=h,s._start=r._sprite[e][0]/1e3,s._stop=(r._sprite[e][0]+r._sprite[e][1])/1e3,s._loop=u;var d=s._node;if(r._webAudio){var l=function(){r._refreshBuffer(s);var e=s._muted||r._muted?0:s._volume*a.volume();d.gain.setValueAtTime(e,t.currentTime),s._playStart=t.currentTime,"undefined"==typeof d.bufferSource.start?d.bufferSource.noteGrainOn(0,h,c):d.bufferSource.start(0,h,c),r._endTimers[s._id]||(r._endTimers[s._id]=setTimeout(f,1e3*c/Math.abs(r._rate))),setTimeout(function(){r._emit("play",s._id)},0)};r._loaded?l():(r.once("load",l),r._clearTimer(s._id))}else{var p=function(){d.currentTime=h,d.muted=s._muted||r._muted||a._muted||d.muted,d.volume=s._volume*a.volume(),d.playbackRate=r._rate,setTimeout(function(){d.play(),r._emit("play",s._id)},0)};if(4===d.readyState||!d.readyState&&navigator.isCocoonJS)p();else{var b=function(){r._endTimers[s._id]=setTimeout(f,1e3*c/Math.abs(r._rate)),p(),d.removeEventListener("canplaythrough",b,!1)};d.addEventListener("canplaythrough",b,!1),r._clearTimer(s._id)}}return s._id},pause:function(e){var t=this;if(!t._loaded)return t.once("play",function(){t.pause(e)}),t;for(var r=t._getSoundIds(e),n=0;n<r.length;n++){t._clearTimer(r[n]);var i=t._soundById(r[n]);if(i&&!i._paused){if(i._seek=t.seek(r[n]),i._paused=!0,t._webAudio){if(!i._node.bufferSource)return t;"undefined"==typeof i._node.bufferSource.stop?i._node.bufferSource.noteOff(0):i._node.bufferSource.stop(0),i._node.bufferSource=null}else isNaN(i._node.duration)||i._node.pause();arguments[1]||t._emit("pause",i._id)}}return t},stop:function(e){var t=this;if(!t._loaded)return"undefined"!=typeof t._sounds[0]._sprite&&t.once("play",function(){t.stop(e)}),t;for(var r=t._getSoundIds(e),n=0;n<r.length;n++){t._clearTimer(r[n]);var i=t._soundById(r[n]);if(i&&!i._paused)if(i._seek=i._start||0,i._paused=!0,i._ended=!0,t._webAudio&&i._node){if(!i._node.bufferSource)return t;"undefined"==typeof i._node.bufferSource.stop?i._node.bufferSource.noteOff(0):i._node.bufferSource.stop(0),i._node.bufferSource=null}else i._node&&!isNaN(i._node.duration)&&(i._node.pause(),i._node.currentTime=i._start||0)}return t},mute:function(e,r){var n=this;if(!n._loaded)return n.once("play",function(){n.mute(e,r)}),n;if("undefined"==typeof r){if("boolean"!=typeof e)return n._muted;n._muted=e}for(var i=n._getSoundIds(r),o=0;o<i.length;o++){var s=n._soundById(i[o]);s&&(s._muted=e,n._webAudio&&s._node?s._node.gain.setValueAtTime(e?0:s._volume*a.volume(),t.currentTime):s._node&&(s._node.muted=a._muted?!0:e))}return n},volume:function(){var e,r,n=this,i=arguments;if(0===i.length)return n._volume;if(1===i.length){var o=n._getSoundIds(),s=o.indexOf(i[0]);s>=0?r=parseInt(i[0],10):e=parseFloat(i[0])}else 2===i.length&&(e=parseFloat(i[0]),r=parseInt(i[1],10));var h;if(!("undefined"!=typeof e&&e>=0&&1>=e))return h=r?n._soundById(r):n._sounds[0],h?h._volume:0;if(!n._loaded)return n.once("play",function(){n.volume.apply(n,i)}),n;"undefined"==typeof r&&(n._volume=e),r=n._getSoundIds(r);for(var c=0;c<r.length;c++)h=n._soundById(r[c]),h&&(h._volume=e,n._webAudio&&h._node?h._node.gain.setValueAtTime(e*a.volume(),t.currentTime):h._node&&(h._node.volume=e*a.volume()));return n},fade:function(e,r,n,i){var o=this;if(!o._loaded)return o.once("play",function(){o.fade(e,r,n,i)}),o;o.volume(e,i);for(var s=o._getSoundIds(i),a=0;a<s.length;a++){var h=o._soundById(s[a]);if(h)if(o._webAudio){var c=t.currentTime,u=c+n/1e3;h._volume=e,h._node.gain.setValueAtTime(e,c),h._node.gain.linearRampToValueAtTime(r,u),setTimeout(function(e,n){setTimeout(function(){n._volume=r,o._emit("faded",e)},u-t.currentTime>0?Math.ceil(1e3*(u-t.currentTime)):0)}.bind(o,s[a],h),n)}else{var f=Math.abs(e-r),d=e>r?"out":"in",l=f/.01,p=n/l;!function(){var t=e,n=setInterval(function(e){t+="in"===d?.01:-.01,t=Math.max(0,t),t=Math.min(1,t),t=Math.round(100*t)/100,o.volume(t,e),t===r&&(clearInterval(n),o._emit("faded",e))}.bind(o,s[a]),p)}()}}return o},loop:function(){var e,t,r,n=this,i=arguments;if(0===i.length)return n._loop;if(1===i.length){if("boolean"!=typeof i[0])return r=n._soundById(parseInt(i[0],10)),r?r._loop:!1;e=i[0],n._loop=e}else 2===i.length&&(e=i[0],t=parseInt(i[1],10));for(var o=n._getSoundIds(t),s=0;s<o.length;s++)r=n._soundById(o[s]),r&&(r._loop=e);return n},seek:function(){var e,r,n=this,i=arguments;if(0===i.length)r=n._sounds[0]._id;else if(1===i.length){var o=n._getSoundIds(),s=o.indexOf(i[0]);s>=0?r=parseInt(i[0],10):(r=n._sounds[0]._id,e=parseFloat(i[0]))}else 2===i.length&&(e=parseFloat(i[0]),r=parseInt(i[1],10));if("undefined"==typeof r)return n;if(!n._loaded)return n.once("load",function(){n.seek.apply(n,i)}),n;var a=n._soundById(r);if(a){if(!(e>=0))return n._webAudio?a._seek+(t.currentTime-a._playStart):a._node.currentTime;var h=n.playing(r);h&&n.pause(r,!0),a._seek=e,n._clearTimer(r),h&&n.play(r)}return n},playing:function(e){var t=this,r=t._soundById(e)||t._sounds[0];return r?!r._paused:!1},duration:function(){return this._duration},unload:function(){for(var e=this,t=e._sounds,r=0;r<t.length;r++){t[r]._paused||(e.stop(t[r]._id),e._emit("end",t[r]._id)),e._webAudio||(t[r]._node.src="",t[r]._node.removeEventListener("error",t[r]._errorFn,!1),t[r]._node.removeEventListener("canplaythrough",t[r]._loadFn,!1)),delete t[r]._node,e._clearTimer(t[r]._id);var n=a._howls.indexOf(e);n>=0&&a._howls.splice(n,1)}return u&&delete u[e._src],e=null,null},on:function(e,t,r){var n=this,i=n["_on"+e];return"function"==typeof t&&i.push({id:r,fn:t}),n},off:function(e,t,r){var n=this,i=n["_on"+e];if(t){for(var o=0;o<i.length;o++)if(t===i[o].fn&&r===i[o].id){i.splice(o,1);break}}else i=[];return n},once:function(e,t,r){var n=this,i=function(){t.apply(n,arguments),n.off(e,i,r)};return n.on(e,i,r),n},_emit:function(e,t,r){for(var n=this,i=n["_on"+e],o=0;o<i.length;o++)i[o].id&&i[o].id!==t||setTimeout(function(e){e.call(this,t,r)}.bind(n,i[o].fn),0);return n},_clearTimer:function(e){var t=this;return t._endTimers[e]&&(clearTimeout(t._endTimers[e]),delete t._endTimers[e]),t},_soundById:function(e){for(var t=this,r=0;r<t._sounds.length;r++)if(e===t._sounds[r]._id)return t._sounds[r];return null},_inactiveSound:function(){var e=this;e._drain();for(var t=0;t<e._sounds.length;t++)if(e._sounds[t]._ended)return e._sounds[t].reset();return new c(e)},_drain:function(){var e=this,t=e._pool,r=0,n=0;if(!(e._sounds.length<t)){for(n=0;n<e._sounds.length;n++)e._sounds[n]._ended&&r++;for(n=e._sounds.length-1;n>=0;n--){if(t>=r)return;e._sounds[n]._ended&&(e._webAudio&&e._sounds[n]._node&&e._sounds[n]._node.disconnect(0),e._sounds.splice(n,1),r--)}}},_getSoundIds:function(e){var t=this;if("undefined"==typeof e){for(var r=[],n=0;n<t._sounds.length;n++)r.push(t._sounds[n]._id);return r}return[e]},_refreshBuffer:function(e){var r=this;return e._node.bufferSource=t.createBufferSource(),e._node.bufferSource.buffer=u[r._src],e._node.bufferSource.connect(e._panner?e._panner:e._node),e._node.bufferSource.loop=e._loop,e._loop&&(e._node.bufferSource.loopStart=e._start||0,e._node.bufferSource.loopEnd=e._stop),e._node.bufferSource.playbackRate.value=r._rate,r}};var c=function(e){this._parent=e,this.init()};if(c.prototype={init:function(){var e=this,t=e._parent;return e._muted=t._muted,e._loop=t._loop,e._volume=t._volume,e._muted=t._muted,e._seek=0,e._paused=!0,e._ended=!0,e._id=Math.round(Date.now()*Math.random()),t._sounds.push(e),e.create(),e},create:function(){var e=this,r=e._parent,n=a._muted||e._muted||e._parent._muted?0:e._volume*a.volume();return r._webAudio?(e._node="undefined"==typeof t.createGain?t.createGainNode():t.createGain(),e._node.gain.setValueAtTime(n,t.currentTime),e._node.paused=!0,e._node.connect(o)):(e._node=new Audio,e._errorFn=e._errorListener.bind(e),e._node.addEventListener("error",e._errorFn,!1),e._loadFn=e._loadListener.bind(e),e._node.addEventListener("canplaythrough",e._loadFn,!1),e._node.src=r._src,e._node.preload="auto",e._node.volume=n,e._node.load()),e},reset:function(){var e=this,t=e._parent;return e._muted=t._muted,e._loop=t._loop,e._volume=t._volume,e._muted=t._muted,e._seek=0,e._paused=!0,e._ended=!0,e._sprite=null,e._id=Math.round(Date.now()*Math.random()),e},_errorListener:function(){var e=this;e._node.error&&4===e._node.error.code&&(a.noAudio=!0),e._parent._emit("loaderror",e._id,e._node.error?e._node.error.code:0),e._node.removeEventListener("error",e._errorListener,!1)},_loadListener:function(){var e=this,t=e._parent;t._duration=Math.ceil(10*e._node.duration)/10,0===Object.keys(t._sprite).length&&(t._sprite={__default:[0,1e3*t._duration]}),t._loaded||(t._loaded=!0,t._emit("load")),t._autoplay&&t.play(),e._node.removeEventListener("canplaythrough",e._loadListener,!1)}},n)var u={},f=function(e){var t=e._src;if(u[t])return e._duration=u[t].duration,void p(e);if(/^data:[^;]+;base64,/.test(t)){window.atob=window.atob||function(e){for(var t,r,n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",i=String(e).replace(/=+$/,""),o=0,s=0,a="";r=i.charAt(s++);~r&&(t=o%4?64*t+r:r,o++%4)?a+=String.fromCharCode(255&t>>(-2*o&6)):0)r=n.indexOf(r);return a};for(var r=atob(t.split(",")[1]),n=new Uint8Array(r.length),i=0;i<r.length;++i)n[i]=r.charCodeAt(i);l(n.buffer,e)}else{var o=new XMLHttpRequest;o.open("GET",t,!0),o.responseType="arraybuffer",o.onload=function(){l(o.response,e)},o.onerror=function(){e._webAudio&&(e._html5=!0,e._webAudio=!1,e._sounds=[],delete u[t],e.load())},d(o)}},d=function(e){try{e.send()}catch(t){e.onerror()}},l=function(e,r){t.decodeAudioData(e,function(e){e&&(u[r._src]=e,p(r,e))},function(){r._emit("loaderror")})},p=function(e,t){t&&!e._duration&&(e._duration=t.duration),0===Object.keys(e._sprite).length&&(e._sprite={__default:[0,1e3*e._duration]}),e._loaded||(e._loaded=!0,e._emit("load")),e._autoplay&&e.play()};"function"==typeof define&&define.amd&&define("howler",function(){return{Howler:a,Howl:h}}),"undefined"!=typeof r&&(r.Howler=a,r.Howl=h),"undefined"!=typeof window&&(window.HowlerGlobal=s,window.Howler=a,window.Howl=h,window.Sound=c)}(),function(){"use strict";HowlerGlobal.prototype.init=function(e){return function(){var t=this;return t._pos=[0,0,0],t._orientation=[0,0,-1,0,1,0],t._velocity=[0,0,0],t._listenerAttr={dopplerFactor:1,speedOfSound:343.3},e.call(this,o)}}(HowlerGlobal.prototype.init),HowlerGlobal.prototype.pos=function(e,t,r){var n=this;return n.ctx&&n.ctx.listener?(t="number"!=typeof t?n._pos[1]:t,r="number"!=typeof r?n._pos[2]:r,"number"!=typeof e?n._pos:(n._pos=[e,t,r],n.ctx.listener.setPosition(n._pos[0],n._pos[1],n._pos[2]),n)):n},HowlerGlobal.prototype.orientation=function(e,t,r,n,i,o){var s=this;if(!s.ctx||!s.ctx.listener)return s;var a=s._orientation;return t="number"!=typeof t?a[1]:t,r="number"!=typeof r?a[2]:r,n="number"!=typeof n?a[3]:n,i="number"!=typeof i?a[4]:i,o="number"!=typeof o?a[5]:o,"number"!=typeof e?a:(s._orientation=[e,t,r,n,i,o],s.ctx.listener.setOrientation(a[0],a[1],a[2],a[3],a[4],a[5]),s)},HowlerGlobal.prototype.velocity=function(e,t,r){var n=this;return n.ctx&&n.ctx.listener?(t="number"!=typeof t?n._velocity[1]:t,r="number"!=typeof r?n._velocity[2]:r,"number"!=typeof e?n._velocity:(n._velocity=[e,t,r],n.ctx.listener.setVelocity(n._velocity[0],n._velocity[1],n._velocity[2]),n)):n},HowlerGlobal.prototype.listenerAttr=function(e){var t=this;if(!t.ctx||!t.ctx.listener)return t;var r=t._listenerAttr;return e?(t._listenerAttr={dopplerFactor:"undefined"!=typeof e.dopplerFactor?e.dopplerFactor:r.dopplerFactor,speedOfSound:"undefined"!=typeof e.speedOfSound?e.speedOfSound:r.speedOfSound},t.ctx.listener.dopplerFactor=r.dopplerFactor,t.ctx.listener.speedOfSound=r.speedOfSound,t):r},Howl.prototype.init=function(e){return function(t){var r=this;return r._orientation=t.orientation||[1,0,0],r._pos=t.pos||null,r._velocity=t.velocity||[0,0,0],r._pannerAttr={coneInnerAngle:"undefined"!=typeof t.coneInnerAngle?t.coneInnerAngle:360,coneOUterAngle:"undefined"!=typeof t.coneOUterAngle?t.coneOUterAngle:360,coneOuterGain:"undefined"!=typeof t.coneOuterGain?t.coneOuterGain:0,distanceModel:"undefined"!=typeof t.distanceModel?t.distanceModel:"inverse",maxDistance:"undefined"!=typeof t.maxDistance?t.maxDistance:1e4,panningModel:"undefined"!=typeof t.panningModel?t.panningModel:"HRTF",refDistance:"undefined"!=typeof t.refDistance?t.refDistance:1,rolloffFactor:"undefined"!=typeof t.rolloffFactor?t.rolloffFactor:1},e.call(this,t)}}(Howl.prototype.init),Howl.prototype.pos=function(t,r,n,i){var o=this;if(!o._webAudio)return o;if(!o._loaded)return o.once("play",function(){o.pos(t,r,n,i)}),o;if(r="number"!=typeof r?0:r,n="number"!=typeof n?-.5:n,"undefined"==typeof i){if("number"!=typeof t)return o._pos;o._pos=[t,r,n]}for(var s=o._getSoundIds(i),a=0;a<s.length;a++){var h=o._soundById(s[a]);if(h){if("number"!=typeof t)return h._pos;h._pos=[t,r,n],h._node&&(h._panner||e(h),h._panner.setPosition(t,r,n))}}return o},Howl.prototype.orientation=function(t,r,n,i){var o=this;if(!o._webAudio)return o;if(!o._loaded)return o.once("play",function(){o.orientation(t,r,n,i)}),o;if(r="number"!=typeof r?o._orientation[1]:r,n="number"!=typeof n?o._orientation[1]:n,"undefined"==typeof i){if("number"!=typeof t)return o._orientation;o._orientation=[t,r,n]}for(var s=o._getSoundIds(i),a=0;a<s.length;a++){var h=o._soundById(s[a]);if(h){if("number"!=typeof t)return h._orientation;h._orientation=[t,r,n],h._node&&(h._panner||e(h),h._panner.setOrientation(t,r,n))}}return o},Howl.prototype.velocity=function(t,r,n,i){var o=this;if(!o._webAudio)return o;if(!o._loaded)return o.once("play",function(){o.velocity(t,r,n,i)}),o;if(r="number"!=typeof r?o._velocity[1]:r,n="number"!=typeof n?o._velocity[1]:n,"undefined"==typeof i){if("number"!=typeof t)return o._velocity;o._velocity=[t,r,n]}for(var s=o._getSoundIds(i),a=0;a<s.length;a++){var h=o._soundById(s[a]);if(h){if("number"!=typeof t)return h._velocity;h._velocity=[t,r,n],h._node&&(h._panner||e(h),h._panner.setVelocity(t,r,n))}}return o},Howl.prototype.pannerAttr=function(){var t,r,n,i=this,o=arguments;if(!i._webAudio)return i;if(0===o.length)return i._pannerAttr;if(1===o.length){if("object"!=typeof o[0])return n=i._soundById(parseInt(o[0],10)),n?n._pannerAttr:i._pannerAttr;t=o[0],"undefined"==typeof r&&(i._pannerAttr={coneInnerAngle:"undefined"!=typeof t.coneInnerAngle?t.coneInnerAngle:i._coneInnerAngle,coneOUterAngle:"undefined"!=typeof t.coneOUterAngle?t.coneOUterAngle:i._coneOUterAngle,coneOuterGain:"undefined"!=typeof t.coneOuterGain?t.coneOuterGain:i._coneOuterGain,distanceModel:"undefined"!=typeof t.distanceModel?t.distanceModel:i._distanceModel,maxDistance:"undefined"!=typeof t.maxDistance?t.maxDistance:i._maxDistance,panningModel:"undefined"!=typeof t.panningModel?t.panningModel:i._panningModel,refDistance:"undefined"!=typeof t.refDistance?t.refDistance:i._refDistance,rolloffFactor:"undefined"!=typeof t.rolloffFactor?t.rolloffFactor:i._rolloffFactor})}else 2===o.length&&(t=o[0],r=parseInt(o[1],10));for(var s=i._getSoundIds(r),a=0;a<s.length;a++)if(n=i._soundById(s[a])){var h=n._pannerAttr;h={coneInnerAngle:"undefined"!=typeof t.coneInnerAngle?t.coneInnerAngle:h.coneInnerAngle,coneOUterAngle:"undefined"!=typeof t.coneOUterAngle?t.coneOUterAngle:h.coneOUterAngle,coneOuterGain:"undefined"!=typeof t.coneOuterGain?t.coneOuterGain:h.coneOuterGain,distanceModel:"undefined"!=typeof t.distanceModel?t.distanceModel:h.distanceModel,maxDistance:"undefined"!=typeof t.maxDistance?t.maxDistance:h.maxDistance,panningModel:"undefined"!=typeof t.panningModel?t.panningModel:h.panningModel,refDistance:"undefined"!=typeof t.refDistance?t.refDistance:h.refDistance,rolloffFactor:"undefined"!=typeof t.rolloffFactor?t.rolloffFactor:h.rolloffFactor};var c=n._panner;c?(c.coneInnerAngle=h.coneInnerAngle,c.coneOUterAngle=h.coneOUterAngle,c.coneOuterGain=h.coneOuterGain,c.distanceModel=h.distanceModel,c.maxDistance=h.maxDistance,c.panningModel=h.panningModel,c.refDistance=h.refDistance,c.rolloffFactor=h.rolloffFactor):(n._pos||(n._pos=i._pos||[0,0,-.5]),e(n))}return i},Sound.prototype.init=function(e){return function(){var t=this,r=t._parent;t._orientation=r._orientation,t._pos=r._pos,t._velocity=r._velocity,t._pannerAttr=r._pannerAttr,e.call(this),t._pos&&r.pos(t._pos[0],t._pos[1],t._pos[2],t._id)}}(Sound.prototype.init),Sound.prototype.reset=function(e){return function(){var t=this,r=t._parent;return t._orientation=r._orientation,t._pos=r._pos,t._velocity=r._velocity,t._pannerAttr=r._pannerAttr,e.call(this)}}(Sound.prototype.reset);var e=function(e){e._panner=Howler.ctx.createPanner(),e._panner.coneInnerAngle=e._pannerAttr.coneInnerAngle,e._panner.coneOUterAngle=e._pannerAttr.coneOUterAngle,e._panner.coneOuterGain=e._pannerAttr.coneOuterGain,e._panner.distanceModel=e._pannerAttr.distanceModel,e._panner.maxDistance=e._pannerAttr.maxDistance,e._panner.panningModel=e._pannerAttr.panningModel,e._panner.refDistance=e._pannerAttr.refDistance,e._panner.rolloffFactor=e._pannerAttr.rolloffFactor,e._panner.setPosition(e._pos[0],e._pos[1],e._pos[2]),e._panner.setOrientation(e._orientation[0],e._orientation[1],e._orientation[2]),e._panner.setVelocity(e._velocity[0],e._velocity[1],e._velocity[2]),e._panner.connect(e._node),e._paused||e._parent.pause(e._id).play(e._id)}}()},{}],216:[function(e,t){function r(){this.setSettings=function(e){for(var t=0;24>t;t++)this[String.fromCharCode(97+t)]=e[t]||0;this.c<.01&&(this.c=.01);var r=this.b+this.c+this.e;if(.18>r){var n=.18/r;this.b*=n,this.c*=n,this.e*=n}}}function n(){this._params=new r;var e,t,n,i,o,s,a,h,c,u,f,d;this.reset=function(){var e=this._params;i=100/(e.f*e.f+.001),o=100/(e.g*e.g+.001),s=1-e.h*e.h*e.h*.01,a=-e.i*e.i*e.i*1e-6,e.a||(f=.5-e.n/2,d=5e-5*-e.o),h=1+e.l*e.l*(e.l>0?-.9:10),c=0,u=1==e.m?0:(1-e.m)*(1-e.m)*2e4+32},this.totalReset=function(){this.reset();var r=this._params;return e=r.b*r.b*1e5,t=r.c*r.c*1e5,n=r.e*r.e*1e5+12,3*((e+t+n)/3|0)},this.synthWave=function(r,l){var p=this._params,b=1!=p.s||p.v,g=p.v*p.v*.1,m=1+3e-4*p.w,v=p.s*p.s*p.s*.1,y=1+1e-4*p.t,w=1!=p.s,_=p.x*p.x,x=p.g,S=p.q||p.r,T=p.r*p.r*p.r*.2,A=p.q*p.q*(p.q<0?-1020:1020),E=p.p?((1-p.p)*(1-p.p)*2e4|0)+32:0,C=p.d,k=p.j/2,R=p.k*p.k*.01,M=p.a,B=e,I=1/e,j=1/t,P=1/n,L=5/(1+p.u*p.u*20)*(.01+v);L>.8&&(L=.8),L=1-L;for(var O,D,F,U,N,G,W=!1,q=0,V=0,z=0,Y=0,X=0,H=0,K=0,J=0,$=0,Q=0,Z=new Array(1024),et=new Array(32),tt=Z.length;tt--;)Z[tt]=0;for(var tt=et.length;tt--;)et[tt]=2*Math.random()-1;for(var tt=0;l>tt;tt++){if(W)return tt;if(E&&++$>=E&&($=0,this.reset()),u&&++c>=u&&(u=0,i*=h),s+=a,i*=s,i>o&&(i=o,x>0&&(W=!0)),D=i,k>0&&(Q+=R,D*=1+Math.sin(Q)*k),D|=0,8>D&&(D=8),M||(f+=d,0>f?f=0:f>.5&&(f=.5)),++V>B)switch(V=0,++q){case 1:B=t;break;case 2:B=n}switch(q){case 0:z=V*I;break;case 1:z=1+2*(1-V*j)*C;break;case 2:z=1-V*P;break;case 3:z=0,W=!0}S&&(A+=T,F=0|A,0>F?F=-F:F>1023&&(F=1023)),b&&m&&(g*=m,1e-5>g?g=1e-5:g>.1&&(g=.1)),G=0;for(var rt=8;rt--;){if(K++,K>=D&&(K%=D,3==M))for(var nt=et.length;nt--;)et[nt]=2*Math.random()-1;switch(M){case 0:N=f>K/D?.5:-.5;break;case 1:N=1-K/D*2;break;case 2:U=K/D,U=6.28318531*(U>.5?U-1:U),N=1.27323954*U+.405284735*U*U*(0>U?1:-1),N=.225*((0>N?-1:1)*N*N-N)+N;break;case 3:N=et[Math.abs(32*K/D|0)]}b&&(O=H,v*=y,0>v?v=0:v>.1&&(v=.1),w?(X+=(N-H)*v,X*=L):(H=N,X=0),H+=X,Y+=H-O,Y*=1-g,N=Y),S&&(Z[J%1024]=N,N+=Z[(J-F+1024)%1024],J++),G+=N}G*=.125*z*_,r[tt]=G>=1?32767:-1>=G?-32768:32767*G|0}return l}}var i=new n,o=function(e){i._params.setSettings(e);var t=i.totalReset(),r=new Uint8Array(4*((t+1)/2|0)+44),n=2*i.synthWave(new Uint16Array(r.buffer,44),t),o=new Uint32Array(r.buffer,0,44);o[0]=1179011410,o[1]=n+36,o[2]=1163280727,o[3]=544501094,o[4]=16,o[5]=65537,o[6]=44100,o[7]=88200,o[8]=1048578,o[9]=1635017060,o[10]=n,n+=44;for(var s=0,a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",h="data:audio/wav;base64,";n>s;s+=3){var c=r[s]<<16|r[s+1]<<8|r[s+2];h+=a[c>>18]+a[c>>12&63]+a[c>>6&63]+a[63&c]}return h};"function"==typeof e?t.exports=o:this.jsfxr=o},{}],217:[function(e,t,r){(function(e){(function(){function n(e,t,r){for(var n=(r||0)-1,i=e?e.length:0;++n<i;)if(e[n]===t)return n;return-1}function i(e,t){var r=typeof t;if(e=e.cache,"boolean"==r||null==t)return e[t]?0:-1;"number"!=r&&"string"!=r&&(r="object");var i="number"==r?t:w+t;return e=(e=e[r])&&e[i],"object"==r?e&&n(e,t)>-1?0:-1:e?0:-1}function o(e){var t=this.cache,r=typeof e;if("boolean"==r||null==e)t[e]=!0;else{"number"!=r&&"string"!=r&&(r="object");var n="number"==r?e:w+e,i=t[r]||(t[r]={});"object"==r?(i[n]||(i[n]=[])).push(e):i[n]=!0}}function s(e){return e.charCodeAt(0)}function a(e,t){for(var r=e.criteria,n=t.criteria,i=-1,o=r.length;++i<o;){var s=r[i],a=n[i];if(s!==a){if(s>a||"undefined"==typeof s)return 1;if(a>s||"undefined"==typeof a)return-1}}return e.index-t.index}function h(e){var t=-1,r=e.length,n=e[0],i=e[r/2|0],s=e[r-1];if(n&&"object"==typeof n&&i&&"object"==typeof i&&s&&"object"==typeof s)return!1;var a=f();a.false=a.null=a.true=a.undefined=!1;var h=f();for(h.array=e,h.cache=a,h.push=o;++t<r;)h.push(e[t]);return h}function c(e){return"\\"+J[e]}function u(){return m.pop()||[]}function f(){return v.pop()||{array:null,cache:null,criteria:null,false:!1,index:0,null:!1,number:null,object:null,push:null,string:null,true:!1,undefined:!1,value:null}}function d(e){e.length=0,m.length<x&&m.push(e)}function l(e){var t=e.cache;t&&l(t),e.array=e.cache=e.criteria=e.object=e.number=e.string=e.value=null,v.length<x&&v.push(e)}function p(e,t,r){t||(t=0),"undefined"==typeof r&&(r=e?e.length:0);for(var n=-1,i=r-t||0,o=Array(0>i?0:i);++n<i;)o[n]=e[t+n];return o}function b(e){function t(e){return e&&"object"==typeof e&&!Qn(e)&&Pn.call(e,"__wrapped__")?e:new r(e)}function r(e,t){this.__chain__=!!t,this.__wrapped__=e}function o(e){function t(){if(n){var e=p(n);Ln.apply(e,arguments)}if(this instanceof t){var o=v(r.prototype),s=r.apply(o,e||arguments);return Mt(s)?s:o}return r.apply(i,e||arguments)}var r=e[0],n=e[2],i=e[4];return $n(t,e),t}function m(e,t,r,n,i){if(r){var o=r(e);if("undefined"!=typeof o)return o}var s=Mt(e);if(!s)return e;var a=Cn.call(e);if(!Y[a])return e;var h=Kn[a];switch(a){case U:case N:return new h(+e);case W:case z:return new h(e);case V:return o=h(e.source,k.exec(e)),o.lastIndex=e.lastIndex,o}var c=Qn(e);if(t){var f=!n;n||(n=u()),i||(i=u());for(var l=n.length;l--;)if(n[l]==e)return i[l];o=c?h(e.length):{}}else o=c?p(e):oi({},e);return c&&(Pn.call(e,"index")&&(o.index=e.index),Pn.call(e,"input")&&(o.input=e.input)),t?(n.push(e),i.push(o),(c?Jt:hi)(e,function(e,s){o[s]=m(e,t,r,n,i)}),f&&(d(n),d(i)),o):o}function v(e){return Mt(e)?Nn(e):{}}function x(e,t,r){if("function"!=typeof e)return $r;if("undefined"==typeof t||!("prototype"in e))return e;var n=e.__bindData__;if("undefined"==typeof n&&(Jn.funcNames&&(n=!e.name),n=n||!Jn.funcDecomp,!n)){var i=In.call(e);Jn.funcNames||(n=!R.test(i)),n||(n=j.test(i),$n(e,n))}if(n===!1||n!==!0&&1&n[1])return e;switch(r){case 1:return function(r){return e.call(t,r)};case 2:return function(r,n){return e.call(t,r,n)};case 3:return function(r,n,i){return e.call(t,r,n,i)};case 4:return function(r,n,i,o){return e.call(t,r,n,i,o)}}return Pr(e,t)}function J(e){function t(){var e=h?s:this;if(i){var l=p(i);Ln.apply(l,arguments)}if((o||u)&&(l||(l=p(arguments)),o&&Ln.apply(l,o),u&&l.length<a))return n|=16,J([r,f?n:-4&n,l,null,s,a]);if(l||(l=arguments),c&&(r=e[d]),this instanceof t){e=v(r.prototype);var b=r.apply(e,l);return Mt(b)?b:e}return r.apply(e,l)}var r=e[0],n=e[1],i=e[2],o=e[3],s=e[4],a=e[5],h=1&n,c=2&n,u=4&n,f=8&n,d=r;return $n(t,e),t}function Q(e,t){var r=-1,o=ht(),s=e?e.length:0,a=s>=_&&o===n,c=[];if(a){var u=h(t);u?(o=i,t=u):a=!1}for(;++r<s;){var f=e[r];o(t,f)<0&&c.push(f)}return a&&l(t),c}function Z(e,t,r,n){for(var i=(n||0)-1,o=e?e.length:0,s=[];++i<o;){var a=e[i];if(a&&"object"==typeof a&&"number"==typeof a.length&&(Qn(a)||dt(a))){t||(a=Z(a,t,r));var h=-1,c=a.length,u=s.length;for(s.length+=c;++h<c;)s[u++]=a[h]}else r||s.push(a)}return s}function et(e,t,r,n,i,o){if(r){var s=r(e,t);if("undefined"!=typeof s)return!!s}if(e===t)return 0!==e||1/e==1/t;var a=typeof e,h=typeof t;if(!(e!==e||e&&K[a]||t&&K[h]))return!1;if(null==e||null==t)return e===t;var c=Cn.call(e),f=Cn.call(t);if(c==D&&(c=q),f==D&&(f=q),c!=f)return!1;switch(c){case U:case N:return+e==+t;case W:return e!=+e?t!=+t:0==e?1/e==1/t:e==+t;case V:case z:return e==xn(t)}var l=c==F;if(!l){var p=Pn.call(e,"__wrapped__"),b=Pn.call(t,"__wrapped__");if(p||b)return et(p?e.__wrapped__:e,b?t.__wrapped__:t,r,n,i,o);if(c!=q)return!1;var g=e.constructor,m=t.constructor;if(g!=m&&!(Rt(g)&&g instanceof g&&Rt(m)&&m instanceof m)&&"constructor"in e&&"constructor"in t)return!1}var v=!i;i||(i=u()),o||(o=u());for(var y=i.length;y--;)if(i[y]==e)return o[y]==t;var w=0;if(s=!0,i.push(e),o.push(t),l){if(y=e.length,w=t.length,s=w==y,s||n)for(;w--;){var _=y,x=t[w];if(n)for(;_--&&!(s=et(e[_],x,r,n,i,o)););else if(!(s=et(e[w],x,r,n,i,o)))break}}else ai(t,function(t,a,h){return Pn.call(h,a)?(w++,s=Pn.call(e,a)&&et(e[a],t,r,n,i,o)):void 0}),s&&!n&&ai(e,function(e,t,r){return Pn.call(r,t)?s=--w>-1:void 0});return i.pop(),o.pop(),v&&(d(i),d(o)),s
}function tt(e,t,r,n,i){(Qn(t)?Jt:hi)(t,function(t,o){var s,a,h=t,c=e[o];if(t&&((a=Qn(t))||ci(t))){for(var u=n.length;u--;)if(s=n[u]==t){c=i[u];break}if(!s){var f;r&&(h=r(c,t),(f="undefined"!=typeof h)&&(c=h)),f||(c=a?Qn(c)?c:[]:ci(c)?c:{}),n.push(t),i.push(c),f||tt(c,t,r,n,i)}}else r&&(h=r(c,t),"undefined"==typeof h&&(h=t)),"undefined"!=typeof h&&(c=h);e[o]=c})}function nt(e,t){return e+Bn(Hn()*(t-e+1))}function it(e,t,r){var o=-1,s=ht(),a=e?e.length:0,c=[],f=!t&&a>=_&&s===n,p=r||f?u():c;if(f){var b=h(p);s=i,p=b}for(;++o<a;){var g=e[o],m=r?r(g,o,e):g;(t?!o||p[p.length-1]!==m:s(p,m)<0)&&((r||f)&&p.push(m),c.push(g))}return f?(d(p.array),l(p)):r&&d(p),c}function ot(e){return function(r,n,i){var o={};n=t.createCallback(n,i,3);var s=-1,a=r?r.length:0;if("number"==typeof a)for(;++s<a;){var h=r[s];e(o,h,n(h,s,r),r)}else hi(r,function(t,r,i){e(o,t,n(t,r,i),i)});return o}}function st(e,t,r,n,i,s){var a=1&t,h=2&t,c=4&t,u=16&t,f=32&t;if(!h&&!Rt(e))throw new Sn;u&&!r.length&&(t&=-17,u=r=!1),f&&!n.length&&(t&=-33,f=n=!1);var d=e&&e.__bindData__;if(d&&d!==!0)return d=p(d),d[2]&&(d[2]=p(d[2])),d[3]&&(d[3]=p(d[3])),!a||1&d[1]||(d[4]=i),!a&&1&d[1]&&(t|=8),!c||4&d[1]||(d[5]=s),u&&Ln.apply(d[2]||(d[2]=[]),r),f&&Fn.apply(d[3]||(d[3]=[]),n),d[1]|=t,st.apply(null,d);var l=1==t||17===t?o:J;return l([e,t,r,n,i,s])}function at(e){return ti[e]}function ht(){var e=(e=t.indexOf)===mr?n:e;return e}function ct(e){return"function"==typeof e&&kn.test(e)}function ut(e){var t,r;return e&&Cn.call(e)==q&&(t=e.constructor,!Rt(t)||t instanceof t)?(ai(e,function(e,t){r=t}),"undefined"==typeof r||Pn.call(e,r)):!1}function ft(e){return ri[e]}function dt(e){return e&&"object"==typeof e&&"number"==typeof e.length&&Cn.call(e)==D||!1}function lt(e,t,r,n){return"boolean"!=typeof t&&null!=t&&(n=r,r=t,t=!1),m(e,t,"function"==typeof r&&x(r,n,1))}function pt(e,t,r){return m(e,!0,"function"==typeof t&&x(t,r,1))}function bt(e,t){var r=v(e);return t?oi(r,t):r}function gt(e,r,n){var i;return r=t.createCallback(r,n,3),hi(e,function(e,t,n){return r(e,t,n)?(i=t,!1):void 0}),i}function mt(e,r,n){var i;return r=t.createCallback(r,n,3),yt(e,function(e,t,n){return r(e,t,n)?(i=t,!1):void 0}),i}function vt(e,t,r){var n=[];ai(e,function(e,t){n.push(t,e)});var i=n.length;for(t=x(t,r,3);i--&&t(n[i--],n[i],e)!==!1;);return e}function yt(e,t,r){var n=ei(e),i=n.length;for(t=x(t,r,3);i--;){var o=n[i];if(t(e[o],o,e)===!1)break}return e}function wt(e){var t=[];return ai(e,function(e,r){Rt(e)&&t.push(r)}),t.sort()}function _t(e,t){return e?Pn.call(e,t):!1}function xt(e){for(var t=-1,r=ei(e),n=r.length,i={};++t<n;){var o=r[t];i[e[o]]=o}return i}function St(e){return e===!0||e===!1||e&&"object"==typeof e&&Cn.call(e)==U||!1}function Tt(e){return e&&"object"==typeof e&&Cn.call(e)==N||!1}function At(e){return e&&1===e.nodeType||!1}function Et(e){var t=!0;if(!e)return t;var r=Cn.call(e),n=e.length;return r==F||r==z||r==D||r==q&&"number"==typeof n&&Rt(e.splice)?!n:(hi(e,function(){return t=!1}),t)}function Ct(e,t,r,n){return et(e,t,"function"==typeof r&&x(r,n,2))}function kt(e){return Wn(e)&&!qn(parseFloat(e))}function Rt(e){return"function"==typeof e}function Mt(e){return!(!e||!K[typeof e])}function Bt(e){return jt(e)&&e!=+e}function It(e){return null===e}function jt(e){return"number"==typeof e||e&&"object"==typeof e&&Cn.call(e)==W||!1}function Pt(e){return e&&"object"==typeof e&&Cn.call(e)==V||!1}function Lt(e){return"string"==typeof e||e&&"object"==typeof e&&Cn.call(e)==z||!1}function Ot(e){return"undefined"==typeof e}function Dt(e,r,n){var i={};return r=t.createCallback(r,n,3),hi(e,function(e,t,n){i[t]=r(e,t,n)}),i}function Ft(e){var t=arguments,r=2;if(!Mt(e))return e;if("number"!=typeof t[2]&&(r=t.length),r>3&&"function"==typeof t[r-2])var n=x(t[--r-1],t[r--],2);else r>2&&"function"==typeof t[r-1]&&(n=t[--r]);for(var i=p(arguments,1,r),o=-1,s=u(),a=u();++o<r;)tt(e,i[o],n,s,a);return d(s),d(a),e}function Ut(e,r,n){var i={};if("function"!=typeof r){var o=[];ai(e,function(e,t){o.push(t)}),o=Q(o,Z(arguments,!0,!1,1));for(var s=-1,a=o.length;++s<a;){var h=o[s];i[h]=e[h]}}else r=t.createCallback(r,n,3),ai(e,function(e,t,n){r(e,t,n)||(i[t]=e)});return i}function Nt(e){for(var t=-1,r=ei(e),n=r.length,i=pn(n);++t<n;){var o=r[t];i[t]=[o,e[o]]}return i}function Gt(e,r,n){var i={};if("function"!=typeof r)for(var o=-1,s=Z(arguments,!0,!1,1),a=Mt(e)?s.length:0;++o<a;){var h=s[o];h in e&&(i[h]=e[h])}else r=t.createCallback(r,n,3),ai(e,function(e,t,n){r(e,t,n)&&(i[t]=e)});return i}function Wt(e,r,n,i){var o=Qn(e);if(null==n)if(o)n=[];else{var s=e&&e.constructor,a=s&&s.prototype;n=v(a)}return r&&(r=t.createCallback(r,i,4),(o?Jt:hi)(e,function(e,t,i){return r(n,e,t,i)})),n}function qt(e){for(var t=-1,r=ei(e),n=r.length,i=pn(n);++t<n;)i[t]=e[r[t]];return i}function Vt(e){for(var t=arguments,r=-1,n=Z(t,!0,!1,1),i=t[2]&&t[2][t[1]]===e?1:n.length,o=pn(i);++r<i;)o[r]=e[n[r]];return o}function zt(e,t,r){var n=-1,i=ht(),o=e?e.length:0,s=!1;return r=(0>r?zn(0,o+r):r)||0,Qn(e)?s=i(e,t,r)>-1:"number"==typeof o?s=(Lt(e)?e.indexOf(t,r):i(e,t,r))>-1:hi(e,function(e){return++n>=r?!(s=e===t):void 0}),s}function Yt(e,r,n){var i=!0;r=t.createCallback(r,n,3);var o=-1,s=e?e.length:0;if("number"==typeof s)for(;++o<s&&(i=!!r(e[o],o,e)););else hi(e,function(e,t,n){return i=!!r(e,t,n)});return i}function Xt(e,r,n){var i=[];r=t.createCallback(r,n,3);var o=-1,s=e?e.length:0;if("number"==typeof s)for(;++o<s;){var a=e[o];r(a,o,e)&&i.push(a)}else hi(e,function(e,t,n){r(e,t,n)&&i.push(e)});return i}function Ht(e,r,n){r=t.createCallback(r,n,3);var i=-1,o=e?e.length:0;if("number"!=typeof o){var s;return hi(e,function(e,t,n){return r(e,t,n)?(s=e,!1):void 0}),s}for(;++i<o;){var a=e[i];if(r(a,i,e))return a}}function Kt(e,r,n){var i;return r=t.createCallback(r,n,3),$t(e,function(e,t,n){return r(e,t,n)?(i=e,!1):void 0}),i}function Jt(e,t,r){var n=-1,i=e?e.length:0;if(t=t&&"undefined"==typeof r?t:x(t,r,3),"number"==typeof i)for(;++n<i&&t(e[n],n,e)!==!1;);else hi(e,t);return e}function $t(e,t,r){var n=e?e.length:0;if(t=t&&"undefined"==typeof r?t:x(t,r,3),"number"==typeof n)for(;n--&&t(e[n],n,e)!==!1;);else{var i=ei(e);n=i.length,hi(e,function(e,r,o){return r=i?i[--n]:--n,t(o[r],r,o)})}return e}function Qt(e,t){var r=p(arguments,2),n=-1,i="function"==typeof t,o=e?e.length:0,s=pn("number"==typeof o?o:0);return Jt(e,function(e){s[++n]=(i?t:e[t]).apply(e,r)}),s}function Zt(e,r,n){var i=-1,o=e?e.length:0;if(r=t.createCallback(r,n,3),"number"==typeof o)for(var s=pn(o);++i<o;)s[i]=r(e[i],i,e);else s=[],hi(e,function(e,t,n){s[++i]=r(e,t,n)});return s}function er(e,r,n){var i=-1/0,o=i;if("function"!=typeof r&&n&&n[r]===e&&(r=null),null==r&&Qn(e))for(var a=-1,h=e.length;++a<h;){var c=e[a];c>o&&(o=c)}else r=null==r&&Lt(e)?s:t.createCallback(r,n,3),Jt(e,function(e,t,n){var s=r(e,t,n);s>i&&(i=s,o=e)});return o}function tr(e,r,n){var i=1/0,o=i;if("function"!=typeof r&&n&&n[r]===e&&(r=null),null==r&&Qn(e))for(var a=-1,h=e.length;++a<h;){var c=e[a];o>c&&(o=c)}else r=null==r&&Lt(e)?s:t.createCallback(r,n,3),Jt(e,function(e,t,n){var s=r(e,t,n);i>s&&(i=s,o=e)});return o}function rr(e,r,n,i){if(!e)return n;var o=arguments.length<3;r=t.createCallback(r,i,4);var s=-1,a=e.length;if("number"==typeof a)for(o&&(n=e[++s]);++s<a;)n=r(n,e[s],s,e);else hi(e,function(e,t,i){n=o?(o=!1,e):r(n,e,t,i)});return n}function nr(e,r,n,i){var o=arguments.length<3;return r=t.createCallback(r,i,4),$t(e,function(e,t,i){n=o?(o=!1,e):r(n,e,t,i)}),n}function ir(e,r,n){return r=t.createCallback(r,n,3),Xt(e,function(e,t,n){return!r(e,t,n)})}function or(e,t,r){if(e&&"number"!=typeof e.length&&(e=qt(e)),null==t||r)return e?e[nt(0,e.length-1)]:g;var n=sr(e);return n.length=Yn(zn(0,t),n.length),n}function sr(e){var t=-1,r=e?e.length:0,n=pn("number"==typeof r?r:0);return Jt(e,function(e){var r=nt(0,++t);n[t]=n[r],n[r]=e}),n}function ar(e){var t=e?e.length:0;return"number"==typeof t?t:ei(e).length}function hr(e,r,n){var i;r=t.createCallback(r,n,3);var o=-1,s=e?e.length:0;if("number"==typeof s)for(;++o<s&&!(i=r(e[o],o,e)););else hi(e,function(e,t,n){return!(i=r(e,t,n))});return!!i}function cr(e,r,n){var i=-1,o=Qn(r),s=e?e.length:0,h=pn("number"==typeof s?s:0);for(o||(r=t.createCallback(r,n,3)),Jt(e,function(e,t,n){var s=h[++i]=f();o?s.criteria=Zt(r,function(t){return e[t]}):(s.criteria=u())[0]=r(e,t,n),s.index=i,s.value=e}),s=h.length,h.sort(a);s--;){var c=h[s];h[s]=c.value,o||d(c.criteria),l(c)}return h}function ur(e){return e&&"number"==typeof e.length?p(e):qt(e)}function fr(e){for(var t=-1,r=e?e.length:0,n=[];++t<r;){var i=e[t];i&&n.push(i)}return n}function dr(e){return Q(e,Z(arguments,!0,!0,1))}function lr(e,r,n){var i=-1,o=e?e.length:0;for(r=t.createCallback(r,n,3);++i<o;)if(r(e[i],i,e))return i;return-1}function pr(e,r,n){var i=e?e.length:0;for(r=t.createCallback(r,n,3);i--;)if(r(e[i],i,e))return i;return-1}function br(e,r,n){var i=0,o=e?e.length:0;if("number"!=typeof r&&null!=r){var s=-1;for(r=t.createCallback(r,n,3);++s<o&&r(e[s],s,e);)i++}else if(i=r,null==i||n)return e?e[0]:g;return p(e,0,Yn(zn(0,i),o))}function gr(e,t,r,n){return"boolean"!=typeof t&&null!=t&&(n=r,r="function"!=typeof t&&n&&n[t]===e?null:t,t=!1),null!=r&&(e=Zt(e,r,n)),Z(e,t)}function mr(e,t,r){if("number"==typeof r){var i=e?e.length:0;r=0>r?zn(0,i+r):r||0}else if(r){var o=Er(e,t);return e[o]===t?o:-1}return n(e,t,r)}function vr(e,r,n){var i=0,o=e?e.length:0;if("number"!=typeof r&&null!=r){var s=o;for(r=t.createCallback(r,n,3);s--&&r(e[s],s,e);)i++}else i=null==r||n?1:r||i;return p(e,0,Yn(zn(0,o-i),o))}function yr(){for(var e=[],t=-1,r=arguments.length,o=u(),s=ht(),a=s===n,c=u();++t<r;){var f=arguments[t];(Qn(f)||dt(f))&&(e.push(f),o.push(a&&f.length>=_&&h(t?e[t]:c)))}var p=e[0],b=-1,g=p?p.length:0,m=[];e:for(;++b<g;){var v=o[0];if(f=p[b],(v?i(v,f):s(c,f))<0){for(t=r,(v||c).push(f);--t;)if(v=o[t],(v?i(v,f):s(e[t],f))<0)continue e;m.push(f)}}for(;r--;)v=o[r],v&&l(v);return d(o),d(c),m}function wr(e,r,n){var i=0,o=e?e.length:0;if("number"!=typeof r&&null!=r){var s=o;for(r=t.createCallback(r,n,3);s--&&r(e[s],s,e);)i++}else if(i=r,null==i||n)return e?e[o-1]:g;return p(e,zn(0,o-i))}function _r(e,t,r){var n=e?e.length:0;for("number"==typeof r&&(n=(0>r?zn(0,n+r):Yn(r,n-1))+1);n--;)if(e[n]===t)return n;return-1}function xr(e){for(var t=arguments,r=0,n=t.length,i=e?e.length:0;++r<n;)for(var o=-1,s=t[r];++o<i;)e[o]===s&&(Dn.call(e,o--,1),i--);return e}function Sr(e,t,r){e=+e||0,r="number"==typeof r?r:+r||1,null==t&&(t=e,e=0);for(var n=-1,i=zn(0,Rn((t-e)/(r||1))),o=pn(i);++n<i;)o[n]=e,e+=r;return o}function Tr(e,r,n){var i=-1,o=e?e.length:0,s=[];for(r=t.createCallback(r,n,3);++i<o;){var a=e[i];r(a,i,e)&&(s.push(a),Dn.call(e,i--,1),o--)}return s}function Ar(e,r,n){if("number"!=typeof r&&null!=r){var i=0,o=-1,s=e?e.length:0;for(r=t.createCallback(r,n,3);++o<s&&r(e[o],o,e);)i++}else i=null==r||n?1:zn(0,r);return p(e,i)}function Er(e,r,n,i){var o=0,s=e?e.length:o;for(n=n?t.createCallback(n,i,1):$r,r=n(r);s>o;){var a=o+s>>>1;n(e[a])<r?o=a+1:s=a}return o}function Cr(){return it(Z(arguments,!0,!0))}function kr(e,r,n,i){return"boolean"!=typeof r&&null!=r&&(i=n,n="function"!=typeof r&&i&&i[r]===e?null:r,r=!1),null!=n&&(n=t.createCallback(n,i,3)),it(e,r,n)}function Rr(e){return Q(e,p(arguments,1))}function Mr(){for(var e=-1,t=arguments.length;++e<t;){var r=arguments[e];if(Qn(r)||dt(r))var n=n?it(Q(n,r).concat(Q(r,n))):r}return n||[]}function Br(){for(var e=arguments.length>1?arguments:arguments[0],t=-1,r=e?er(li(e,"length")):0,n=pn(0>r?0:r);++t<r;)n[t]=li(e,t);return n}function Ir(e,t){var r=-1,n=e?e.length:0,i={};for(t||!n||Qn(e[0])||(t=[]);++r<n;){var o=e[r];t?i[o]=t[r]:o&&(i[o[0]]=o[1])}return i}function jr(e,t){if(!Rt(t))throw new Sn;return function(){return--e<1?t.apply(this,arguments):void 0}}function Pr(e,t){return arguments.length>2?st(e,17,p(arguments,2),null,t):st(e,1,null,null,t)}function Lr(e){for(var t=arguments.length>1?Z(arguments,!0,!1,1):wt(e),r=-1,n=t.length;++r<n;){var i=t[r];e[i]=st(e[i],1,null,null,e)}return e}function Or(e,t){return arguments.length>2?st(t,19,p(arguments,2),null,e):st(t,3,null,null,e)}function Dr(){for(var e=arguments,t=e.length;t--;)if(!Rt(e[t]))throw new Sn;return function(){for(var t=arguments,r=e.length;r--;)t=[e[r].apply(this,t)];return t[0]}}function Fr(e,t){return t="number"==typeof t?t:+t||e.length,st(e,4,null,null,null,t)}function Ur(e,t,r){var n,i,o,s,a,h,c,u=0,f=!1,d=!0;if(!Rt(e))throw new Sn;if(t=zn(0,t)||0,r===!0){var l=!0;d=!1}else Mt(r)&&(l=r.leading,f="maxWait"in r&&(zn(t,r.maxWait)||0),d="trailing"in r?r.trailing:d);var p=function(){var r=t-(bi()-s);if(0>=r){i&&Mn(i);var f=c;i=h=c=g,f&&(u=bi(),o=e.apply(a,n),h||i||(n=a=null))}else h=On(p,r)},b=function(){h&&Mn(h),i=h=c=g,(d||f!==t)&&(u=bi(),o=e.apply(a,n),h||i||(n=a=null))};return function(){if(n=arguments,s=bi(),a=this,c=d&&(h||!l),f===!1)var r=l&&!h;else{i||l||(u=s);var g=f-(s-u),m=0>=g;m?(i&&(i=Mn(i)),u=s,o=e.apply(a,n)):i||(i=On(b,g))}return m&&h?h=Mn(h):h||t===f||(h=On(p,t)),r&&(m=!0,o=e.apply(a,n)),!m||h||i||(n=a=null),o}}function Nr(e){if(!Rt(e))throw new Sn;var t=p(arguments,1);return On(function(){e.apply(g,t)},1)}function Gr(e,t){if(!Rt(e))throw new Sn;var r=p(arguments,2);return On(function(){e.apply(g,r)},t)}function Wr(e,t){if(!Rt(e))throw new Sn;var r=function(){var n=r.cache,i=t?t.apply(this,arguments):w+arguments[0];return Pn.call(n,i)?n[i]:n[i]=e.apply(this,arguments)};return r.cache={},r}function qr(e){var t,r;if(!Rt(e))throw new Sn;return function(){return t?r:(t=!0,r=e.apply(this,arguments),e=null,r)}}function Vr(e){return st(e,16,p(arguments,1))}function zr(e){return st(e,32,null,p(arguments,1))}function Yr(e,t,r){var n=!0,i=!0;if(!Rt(e))throw new Sn;return r===!1?n=!1:Mt(r)&&(n="leading"in r?r.leading:n,i="trailing"in r?r.trailing:i),X.leading=n,X.maxWait=t,X.trailing=i,Ur(e,t,X)}function Xr(e,t){return st(t,16,[e])}function Hr(e){return function(){return e}}function Kr(e,t,r){var n=typeof e;if(null==e||"function"==n)return x(e,t,r);if("object"!=n)return tn(e);var i=ei(e),o=i[0],s=e[o];return 1!=i.length||s!==s||Mt(s)?function(t){for(var r=i.length,n=!1;r--&&(n=et(t[i[r]],e[i[r]],null,!0)););return n}:function(e){var t=e[o];return s===t&&(0!==s||1/s==1/t)}}function Jr(e){return null==e?"":xn(e).replace(ii,at)}function $r(e){return e}function Qr(e,n,i){var o=!0,s=n&&wt(n);n&&(i||s.length)||(null==i&&(i=n),a=r,n=e,e=t,s=wt(n)),i===!1?o=!1:Mt(i)&&"chain"in i&&(o=i.chain);var a=e,h=Rt(a);Jt(s,function(t){var r=e[t]=n[t];h&&(a.prototype[t]=function(){var t=this.__chain__,n=this.__wrapped__,i=[n];Ln.apply(i,arguments);var s=r.apply(e,i);if(o||t){if(n===s&&Mt(s))return this;s=new a(s),s.__chain__=t}return s})})}function Zr(){return e._=En,this}function en(){}function tn(e){return function(t){return t[e]}}function rn(e,t,r){var n=null==e,i=null==t;if(null==r&&("boolean"==typeof e&&i?(r=e,e=1):i||"boolean"!=typeof t||(r=t,i=!0)),n&&i&&(t=1),e=+e||0,i?(t=e,e=0):t=+t||0,r||e%1||t%1){var o=Hn();return Yn(e+o*(t-e+parseFloat("1e-"+((o+"").length-1))),t)}return nt(e,t)}function nn(e,t){if(e){var r=e[t];return Rt(r)?e[t]():r}}function on(e,r,n){var i=t.templateSettings;e=xn(e||""),n=si({},n,i);var o,s=si({},n.imports,i.imports),a=ei(s),h=qt(s),u=0,f=n.interpolate||I,d="__p += '",l=_n((n.escape||I).source+"|"+f.source+"|"+(f===M?C:I).source+"|"+(n.evaluate||I).source+"|$","g");e.replace(l,function(t,r,n,i,s,a){return n||(n=i),d+=e.slice(u,a).replace(P,c),r&&(d+="' +\n__e("+r+") +\n'"),s&&(o=!0,d+="';\n"+s+";\n__p += '"),n&&(d+="' +\n((__t = ("+n+")) == null ? '' : __t) +\n'"),u=a+t.length,t}),d+="';\n";var p=n.variable,b=p;b||(p="obj",d="with ("+p+") {\n"+d+"\n}\n"),d=(o?d.replace(T,""):d).replace(A,"$1").replace(E,"$1;"),d="function("+p+") {\n"+(b?"":p+" || ("+p+" = {});\n")+"var __t, __p = '', __e = _.escape"+(o?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+d+"return __p\n}";var m="\n/*\n//# sourceURL="+(n.sourceURL||"/lodash/template/source["+O++ +"]")+"\n*/";try{var v=mn(a,"return "+d+m).apply(g,h)}catch(e){throw e.source=d,e}return r?v(r):(v.source=d,v)}function sn(e,t,r){e=(e=+e)>-1?e:0;var n=-1,i=pn(e);for(t=x(t,r,1);++n<e;)i[n]=t(n);return i}function an(e){return null==e?"":xn(e).replace(ni,ft)}function hn(e){var t=++y;return xn(null==e?"":e)+t}function cn(e){return e=new r(e),e.__chain__=!0,e}function un(e,t){return t(e),e}function fn(){return this.__chain__=!0,this}function dn(){return xn(this.__wrapped__)}function ln(){return this.__wrapped__}e=e?rt.defaults($.Object(),e,rt.pick($,L)):$;var pn=e.Array,bn=e.Boolean,gn=e.Date,mn=e.Function,vn=e.Math,yn=e.Number,wn=e.Object,_n=e.RegExp,xn=e.String,Sn=e.TypeError,Tn=[],An=wn.prototype,En=e._,Cn=An.toString,kn=_n("^"+xn(Cn).replace(/[.*+?^${}()|[\]\\]/g,"\\$&").replace(/toString| for [^\]]+/g,".*?")+"$"),Rn=vn.ceil,Mn=e.clearTimeout,Bn=vn.floor,In=mn.prototype.toString,jn=ct(jn=wn.getPrototypeOf)&&jn,Pn=An.hasOwnProperty,Ln=Tn.push,On=e.setTimeout,Dn=Tn.splice,Fn=Tn.unshift,Un=function(){try{var e={},t=ct(t=wn.defineProperty)&&t,r=t(e,e,e)&&t}catch(e){}return r}(),Nn=ct(Nn=wn.create)&&Nn,Gn=ct(Gn=pn.isArray)&&Gn,Wn=e.isFinite,qn=e.isNaN,Vn=ct(Vn=wn.keys)&&Vn,zn=vn.max,Yn=vn.min,Xn=e.parseInt,Hn=vn.random,Kn={};Kn[F]=pn,Kn[U]=bn,Kn[N]=gn,Kn[G]=mn,Kn[q]=wn,Kn[W]=yn,Kn[V]=_n,Kn[z]=xn,r.prototype=t.prototype;var Jn=t.support={};Jn.funcDecomp=!ct(e.WinRTError)&&j.test(b),Jn.funcNames="string"==typeof mn.name,t.templateSettings={escape:/<%-([\s\S]+?)%>/g,evaluate:/<%([\s\S]+?)%>/g,interpolate:M,variable:"",imports:{_:t}},Nn||(v=function(){function t(){}return function(r){if(Mt(r)){t.prototype=r;var n=new t;t.prototype=null}return n||e.Object()}}());var $n=Un?function(e,t){H.value=t,Un(e,"__bindData__",H)}:en,Qn=Gn||function(e){return e&&"object"==typeof e&&"number"==typeof e.length&&Cn.call(e)==F||!1},Zn=function(e){var t,r=e,n=[];if(!r)return n;if(!K[typeof e])return n;for(t in r)Pn.call(r,t)&&n.push(t);return n},ei=Vn?function(e){return Mt(e)?Vn(e):[]}:Zn,ti={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},ri=xt(ti),ni=_n("("+ei(ri).join("|")+")","g"),ii=_n("["+ei(ti).join("")+"]","g"),oi=function(e,t,r){var n,i=e,o=i;if(!i)return o;var s=arguments,a=0,h="number"==typeof r?2:s.length;if(h>3&&"function"==typeof s[h-2])var c=x(s[--h-1],s[h--],2);else h>2&&"function"==typeof s[h-1]&&(c=s[--h]);for(;++a<h;)if(i=s[a],i&&K[typeof i])for(var u=-1,f=K[typeof i]&&ei(i),d=f?f.length:0;++u<d;)n=f[u],o[n]=c?c(o[n],i[n]):i[n];return o},si=function(e,t,r){var n,i=e,o=i;if(!i)return o;for(var s=arguments,a=0,h="number"==typeof r?2:s.length;++a<h;)if(i=s[a],i&&K[typeof i])for(var c=-1,u=K[typeof i]&&ei(i),f=u?u.length:0;++c<f;)n=u[c],"undefined"==typeof o[n]&&(o[n]=i[n]);return o},ai=function(e,t,r){var n,i=e,o=i;if(!i)return o;if(!K[typeof i])return o;t=t&&"undefined"==typeof r?t:x(t,r,3);for(n in i)if(t(i[n],n,e)===!1)return o;return o},hi=function(e,t,r){var n,i=e,o=i;if(!i)return o;if(!K[typeof i])return o;t=t&&"undefined"==typeof r?t:x(t,r,3);for(var s=-1,a=K[typeof i]&&ei(i),h=a?a.length:0;++s<h;)if(n=a[s],t(i[n],n,e)===!1)return o;return o},ci=jn?function(e){if(!e||Cn.call(e)!=q)return!1;var t=e.valueOf,r=ct(t)&&(r=jn(t))&&jn(r);return r?e==r||jn(e)==r:ut(e)}:ut,ui=ot(function(e,t,r){Pn.call(e,r)?e[r]++:e[r]=1}),fi=ot(function(e,t,r){(Pn.call(e,r)?e[r]:e[r]=[]).push(t)}),di=ot(function(e,t,r){e[r]=t}),li=Zt,pi=Xt,bi=ct(bi=gn.now)&&bi||function(){return(new gn).getTime()},gi=8==Xn(S+"08")?Xn:function(e,t){return Xn(Lt(e)?e.replace(B,""):e,t||0)};return t.after=jr,t.assign=oi,t.at=Vt,t.bind=Pr,t.bindAll=Lr,t.bindKey=Or,t.chain=cn,t.compact=fr,t.compose=Dr,t.constant=Hr,t.countBy=ui,t.create=bt,t.createCallback=Kr,t.curry=Fr,t.debounce=Ur,t.defaults=si,t.defer=Nr,t.delay=Gr,t.difference=dr,t.filter=Xt,t.flatten=gr,t.forEach=Jt,t.forEachRight=$t,t.forIn=ai,t.forInRight=vt,t.forOwn=hi,t.forOwnRight=yt,t.functions=wt,t.groupBy=fi,t.indexBy=di,t.initial=vr,t.intersection=yr,t.invert=xt,t.invoke=Qt,t.keys=ei,t.map=Zt,t.mapValues=Dt,t.max=er,t.memoize=Wr,t.merge=Ft,t.min=tr,t.omit=Ut,t.once=qr,t.pairs=Nt,t.partial=Vr,t.partialRight=zr,t.pick=Gt,t.pluck=li,t.property=tn,t.pull=xr,t.range=Sr,t.reject=ir,t.remove=Tr,t.rest=Ar,t.shuffle=sr,t.sortBy=cr,t.tap=un,t.throttle=Yr,t.times=sn,t.toArray=ur,t.transform=Wt,t.union=Cr,t.uniq=kr,t.values=qt,t.where=pi,t.without=Rr,t.wrap=Xr,t.xor=Mr,t.zip=Br,t.zipObject=Ir,t.collect=Zt,t.drop=Ar,t.each=Jt,t.eachRight=$t,t.extend=oi,t.methods=wt,t.object=Ir,t.select=Xt,t.tail=Ar,t.unique=kr,t.unzip=Br,Qr(t),t.clone=lt,t.cloneDeep=pt,t.contains=zt,t.escape=Jr,t.every=Yt,t.find=Ht,t.findIndex=lr,t.findKey=gt,t.findLast=Kt,t.findLastIndex=pr,t.findLastKey=mt,t.has=_t,t.identity=$r,t.indexOf=mr,t.isArguments=dt,t.isArray=Qn,t.isBoolean=St,t.isDate=Tt,t.isElement=At,t.isEmpty=Et,t.isEqual=Ct,t.isFinite=kt,t.isFunction=Rt,t.isNaN=Bt,t.isNull=It,t.isNumber=jt,t.isObject=Mt,t.isPlainObject=ci,t.isRegExp=Pt,t.isString=Lt,t.isUndefined=Ot,t.lastIndexOf=_r,t.mixin=Qr,t.noConflict=Zr,t.noop=en,t.now=bi,t.parseInt=gi,t.random=rn,t.reduce=rr,t.reduceRight=nr,t.result=nn,t.runInContext=b,t.size=ar,t.some=hr,t.sortedIndex=Er,t.template=on,t.unescape=an,t.uniqueId=hn,t.all=Yt,t.any=hr,t.detect=Ht,t.findWhere=Ht,t.foldl=rr,t.foldr=nr,t.include=zt,t.inject=rr,Qr(function(){var e={};return hi(t,function(r,n){t.prototype[n]||(e[n]=r)}),e}(),!1),t.first=br,t.last=wr,t.sample=or,t.take=br,t.head=br,hi(t,function(e,n){var i="sample"!==n;t.prototype[n]||(t.prototype[n]=function(t,n){var o=this.__chain__,s=e(this.__wrapped__,t,n);return o||null!=t&&(!n||i&&"function"==typeof t)?new r(s,o):s})}),t.VERSION="2.4.1",t.prototype.chain=fn,t.prototype.toString=dn,t.prototype.value=ln,t.prototype.valueOf=ln,Jt(["join","pop","shift"],function(e){var n=Tn[e];t.prototype[e]=function(){var e=this.__chain__,t=n.apply(this.__wrapped__,arguments);return e?new r(t,e):t}}),Jt(["push","reverse","sort","unshift"],function(e){var r=Tn[e];t.prototype[e]=function(){return r.apply(this.__wrapped__,arguments),this}}),Jt(["concat","slice","splice"],function(e){var n=Tn[e];t.prototype[e]=function(){return new r(n.apply(this.__wrapped__,arguments),this.__chain__)}}),t}var g,m=[],v=[],y=0,w=+new Date+"",_=75,x=40,S=" 	\f\n\r\u2028\u2029",T=/\b__p \+= '';/g,A=/\b(__p \+=) '' \+/g,E=/(__e\(.*?\)|\b__t\)) \+\n'';/g,C=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,k=/\w*$/,R=/^\s*function[ \n\r\t]+\w/,M=/<%=([\s\S]+?)%>/g,B=RegExp("^["+S+"]*0+(?=.$)"),I=/($^)/,j=/\bthis\b/,P=/['\n\r\t\u2028\u2029\\]/g,L=["Array","Boolean","Date","Function","Math","Number","Object","RegExp","String","_","attachEvent","clearTimeout","isFinite","isNaN","parseInt","setTimeout"],O=0,D="[object Arguments]",F="[object Array]",U="[object Boolean]",N="[object Date]",G="[object Function]",W="[object Number]",q="[object Object]",V="[object RegExp]",z="[object String]",Y={};Y[G]=!1,Y[D]=Y[F]=Y[U]=Y[N]=Y[W]=Y[q]=Y[V]=Y[z]=!0;var X={leading:!1,maxWait:0,trailing:!1},H={configurable:!1,enumerable:!1,value:null,writable:!1},K={boolean:!1,function:!0,object:!0,number:!1,string:!1,undefined:!1},J={"\\":"\\","'":"'","\n":"n","\r":"r","	":"t","\u2028":"u2028","\u2029":"u2029"},$=K[typeof window]&&window||this,Q=K[typeof r]&&r&&!r.nodeType&&r,Z=K[typeof t]&&t&&!t.nodeType&&t,et=Z&&Z.exports===Q&&Q,tt=K[typeof e]&&e;!tt||tt.global!==tt&&tt.window!==tt||($=tt);var rt=b();"function"==typeof define&&"object"==typeof define.amd&&define.amd?($._=rt,define(function(){return rt})):Q&&Z?et?(Z.exports=rt)._=rt:Q._=rt:$._=rt}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],218:[function(e,t){(function(e){(function(){var r,n,i;"undefined"!=typeof performance&&null!==performance&&performance.now?t.exports=function(){return performance.now()}:"undefined"!=typeof e&&null!==e&&e.hrtime?(t.exports=function(){return(r()-i)/1e6},n=e.hrtime,r=function(){var e;return e=n(),1e9*e[0]+e[1]},i=r()):Date.now?(t.exports=function(){return Date.now()-i},i=Date.now()):(t.exports=function(){return(new Date).getTime()-i},i=(new Date).getTime())}).call(this)}).call(this,e("_process"))},{_process:197}],219:[function(e,t,r){(function(){var e=this,n=n||{};n.WEBGL_RENDERER=0,n.CANVAS_RENDERER=1,n.VERSION="v2.2.0",n.blendModes={NORMAL:0,ADD:1,MULTIPLY:2,SCREEN:3,OVERLAY:4,DARKEN:5,LIGHTEN:6,COLOR_DODGE:7,COLOR_BURN:8,HARD_LIGHT:9,SOFT_LIGHT:10,DIFFERENCE:11,EXCLUSION:12,HUE:13,SATURATION:14,COLOR:15,LUMINOSITY:16},n.scaleModes={DEFAULT:0,LINEAR:0,NEAREST:1},n._UID=0,"undefined"!=typeof Float32Array?(n.Float32Array=Float32Array,n.Uint16Array=Uint16Array,n.Uint32Array=Uint32Array,n.ArrayBuffer=ArrayBuffer):(n.Float32Array=Array,n.Uint16Array=Array),n.INTERACTION_FREQUENCY=30,n.AUTO_PREVENT_DEFAULT=!0,n.PI_2=2*Math.PI,n.RAD_TO_DEG=180/Math.PI,n.DEG_TO_RAD=Math.PI/180,n.RETINA_PREFIX="@2x",n.dontSayHello=!1,n.defaultRenderOptions={view:null,transparent:!1,antialias:!1,preserveDrawingBuffer:!1,resolution:1,clearBeforeRender:!0,autoResize:!1},n.sayHello=function(e){if(!n.dontSayHello){if(navigator.userAgent.toLowerCase().indexOf("chrome")>-1){var t=["%c %c %c Pixi.js "+n.VERSION+" - "+e+"  %c  %c  http://www.pixijs.com/  %c %c %c%c ","background: #ff66a5","background: #ff66a5","color: #ff66a5; background: #030307;","background: #ff66a5","background: #ffc3dc","background: #ff66a5","color: #ff2424; background: #fff","color: #ff2424; background: #fff","color: #ff2424; background: #fff"];console.log.apply(console,t)}else window.console&&console.log("Pixi.js "+n.VERSION+" - http://www.pixijs.com/");n.dontSayHello=!0}},n.Point=function(e,t){this.x=e||0,this.y=t||0},n.Point.prototype.clone=function(){return new n.Point(this.x,this.y)},n.Point.prototype.set=function(e,t){this.x=e||0,this.y=t||(0!==t?this.x:0)},n.Point.prototype.constructor=n.Point,n.Rectangle=function(e,t,r,n){this.x=e||0,this.y=t||0,this.width=r||0,this.height=n||0},n.Rectangle.prototype.clone=function(){return new n.Rectangle(this.x,this.y,this.width,this.height)},n.Rectangle.prototype.contains=function(e,t){if(this.width<=0||this.height<=0)return!1;var r=this.x;if(e>=r&&e<=r+this.width){var n=this.y;if(t>=n&&t<=n+this.height)return!0}return!1},n.Rectangle.prototype.constructor=n.Rectangle,n.EmptyRectangle=new n.Rectangle(0,0,0,0),n.Polygon=function(e){if(e instanceof Array||(e=Array.prototype.slice.call(arguments)),e[0]instanceof n.Point){for(var t=[],r=0,i=e.length;i>r;r++)t.push(e[r].x,e[r].y);e=t}this.closed=!0,this.points=e},n.Polygon.prototype.clone=function(){var e=this.points.slice();return new n.Polygon(e)},n.Polygon.prototype.contains=function(e,t){for(var r=!1,n=this.points.length/2,i=0,o=n-1;n>i;o=i++){var s=this.points[2*i],a=this.points[2*i+1],h=this.points[2*o],c=this.points[2*o+1],u=a>t!=c>t&&(h-s)*(t-a)/(c-a)+s>e;u&&(r=!r)}return r},n.Polygon.prototype.constructor=n.Polygon,n.Circle=function(e,t,r){this.x=e||0,this.y=t||0,this.radius=r||0},n.Circle.prototype.clone=function(){return new n.Circle(this.x,this.y,this.radius)},n.Circle.prototype.contains=function(e,t){if(this.radius<=0)return!1;var r=this.x-e,n=this.y-t,i=this.radius*this.radius;return r*=r,n*=n,i>=r+n},n.Circle.prototype.getBounds=function(){return new n.Rectangle(this.x-this.radius,this.y-this.radius,2*this.radius,2*this.radius)},n.Circle.prototype.constructor=n.Circle,n.Ellipse=function(e,t,r,n){this.x=e||0,this.y=t||0,this.width=r||0,this.height=n||0},n.Ellipse.prototype.clone=function(){return new n.Ellipse(this.x,this.y,this.width,this.height)},n.Ellipse.prototype.contains=function(e,t){if(this.width<=0||this.height<=0)return!1;var r=(e-this.x)/this.width,n=(t-this.y)/this.height;return r*=r,n*=n,1>=r+n},n.Ellipse.prototype.getBounds=function(){return new n.Rectangle(this.x-this.width,this.y-this.height,this.width,this.height)},n.Ellipse.prototype.constructor=n.Ellipse,n.RoundedRectangle=function(e,t,r,n,i){this.x=e||0,this.y=t||0,this.width=r||0,this.height=n||0,this.radius=i||20},n.RoundedRectangle.prototype.clone=function(){return new n.RoundedRectangle(this.x,this.y,this.width,this.height,this.radius)},n.RoundedRectangle.prototype.contains=function(e,t){if(this.width<=0||this.height<=0)return!1;var r=this.x;if(e>=r&&e<=r+this.width){var n=this.y;if(t>=n&&t<=n+this.height)return!0}return!1},n.RoundedRectangle.prototype.constructor=n.RoundedRectangle,n.Matrix=function(){this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0},n.Matrix.prototype.fromArray=function(e){this.a=e[0],this.b=e[1],this.c=e[3],this.d=e[4],this.tx=e[2],this.ty=e[5]},n.Matrix.prototype.toArray=function(e){this.array||(this.array=new n.Float32Array(9));var t=this.array;return e?(t[0]=this.a,t[1]=this.b,t[2]=0,t[3]=this.c,t[4]=this.d,t[5]=0,t[6]=this.tx,t[7]=this.ty,t[8]=1):(t[0]=this.a,t[1]=this.c,t[2]=this.tx,t[3]=this.b,t[4]=this.d,t[5]=this.ty,t[6]=0,t[7]=0,t[8]=1),t},n.Matrix.prototype.apply=function(e,t){return t=t||new n.Point,t.x=this.a*e.x+this.c*e.y+this.tx,t.y=this.b*e.x+this.d*e.y+this.ty,t},n.Matrix.prototype.applyInverse=function(e,t){t=t||new n.Point;var r=1/(this.a*this.d+this.c*-this.b);return t.x=this.d*r*e.x+-this.c*r*e.y+(this.ty*this.c-this.tx*this.d)*r,t.y=this.a*r*e.y+-this.b*r*e.x+(-this.ty*this.a+this.tx*this.b)*r,t},n.Matrix.prototype.translate=function(e,t){return this.tx+=e,this.ty+=t,this},n.Matrix.prototype.scale=function(e,t){return this.a*=e,this.d*=t,this.c*=e,this.b*=t,this.tx*=e,this.ty*=t,this},n.Matrix.prototype.rotate=function(e){var t=Math.cos(e),r=Math.sin(e),n=this.a,i=this.c,o=this.tx;return this.a=n*t-this.b*r,this.b=n*r+this.b*t,this.c=i*t-this.d*r,this.d=i*r+this.d*t,this.tx=o*t-this.ty*r,this.ty=o*r+this.ty*t,this},n.Matrix.prototype.append=function(e){var t=this.a,r=this.b,n=this.c,i=this.d;return this.a=e.a*t+e.b*n,this.b=e.a*r+e.b*i,this.c=e.c*t+e.d*n,this.d=e.c*r+e.d*i,this.tx=e.tx*t+e.ty*n+this.tx,this.ty=e.tx*r+e.ty*i+this.ty,this},n.Matrix.prototype.identity=function(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this},n.identityMatrix=new n.Matrix,n.DisplayObject=function(){this.position=new n.Point,this.scale=new n.Point(1,1),this.pivot=new n.Point(0,0),this.rotation=0,this.alpha=1,this.visible=!0,this.hitArea=null,this.buttonMode=!1,this.renderable=!1,this.parent=null,this.stage=null,this.worldAlpha=1,this._interactive=!1,this.defaultCursor="pointer",this.worldTransform=new n.Matrix,this._sr=0,this._cr=1,this.filterArea=null,this._bounds=new n.Rectangle(0,0,1,1),this._currentBounds=null,this._mask=null,this._cacheAsBitmap=!1,this._cacheIsDirty=!1},n.DisplayObject.prototype.constructor=n.DisplayObject,Object.defineProperty(n.DisplayObject.prototype,"interactive",{get:function(){return this._interactive},set:function(e){this._interactive=e,this.stage&&(this.stage.dirty=!0)}}),Object.defineProperty(n.DisplayObject.prototype,"worldVisible",{get:function(){var e=this;do{if(!e.visible)return!1;e=e.parent}while(e);return!0}}),Object.defineProperty(n.DisplayObject.prototype,"mask",{get:function(){return this._mask},set:function(e){this._mask&&(this._mask.isMask=!1),this._mask=e,this._mask&&(this._mask.isMask=!0)}}),Object.defineProperty(n.DisplayObject.prototype,"filters",{get:function(){return this._filters},set:function(e){if(e){for(var t=[],r=0;r<e.length;r++)for(var n=e[r].passes,i=0;i<n.length;i++)t.push(n[i]);this._filterBlock={target:this,filterPasses:t}}this._filters=e}}),Object.defineProperty(n.DisplayObject.prototype,"cacheAsBitmap",{get:function(){return this._cacheAsBitmap},set:function(e){this._cacheAsBitmap!==e&&(e?this._generateCachedSprite():this._destroyCachedSprite(),this._cacheAsBitmap=e)}}),n.DisplayObject.prototype.updateTransform=function(){var e,t,r,i,o,s,a=this.parent.worldTransform,h=this.worldTransform;this.rotation%n.PI_2?(this.rotation!==this.rotationCache&&(this.rotationCache=this.rotation,this._sr=Math.sin(this.rotation),this._cr=Math.cos(this.rotation)),e=this._cr*this.scale.x,t=this._sr*this.scale.x,r=-this._sr*this.scale.y,i=this._cr*this.scale.y,o=this.position.x,s=this.position.y,(this.pivot.x||this.pivot.y)&&(o-=this.pivot.x*e+this.pivot.y*r,s-=this.pivot.x*t+this.pivot.y*i),h.a=e*a.a+t*a.c,h.b=e*a.b+t*a.d,h.c=r*a.a+i*a.c,h.d=r*a.b+i*a.d,h.tx=o*a.a+s*a.c+a.tx,h.ty=o*a.b+s*a.d+a.ty):(e=this.scale.x,i=this.scale.y,o=this.position.x-this.pivot.x*e,s=this.position.y-this.pivot.y*i,h.a=e*a.a,h.b=e*a.b,h.c=i*a.c,h.d=i*a.d,h.tx=o*a.a+s*a.c+a.tx,h.ty=o*a.b+s*a.d+a.ty),this.worldAlpha=this.alpha*this.parent.worldAlpha
},n.DisplayObject.prototype.displayObjectUpdateTransform=n.DisplayObject.prototype.updateTransform,n.DisplayObject.prototype.getBounds=function(e){return e=e,n.EmptyRectangle},n.DisplayObject.prototype.getLocalBounds=function(){return this.getBounds(n.identityMatrix)},n.DisplayObject.prototype.setStageReference=function(e){this.stage=e,this._interactive&&(this.stage.dirty=!0)},n.DisplayObject.prototype.generateTexture=function(e,t,r){var i=this.getLocalBounds(),o=new n.RenderTexture(0|i.width,0|i.height,r,t,e);return n.DisplayObject._tempMatrix.tx=-i.x,n.DisplayObject._tempMatrix.ty=-i.y,o.render(this,n.DisplayObject._tempMatrix),o},n.DisplayObject.prototype.updateCache=function(){this._generateCachedSprite()},n.DisplayObject.prototype.toGlobal=function(e){return this.displayObjectUpdateTransform(),this.worldTransform.apply(e)},n.DisplayObject.prototype.toLocal=function(e,t){return t&&(e=t.toGlobal(e)),this.displayObjectUpdateTransform(),this.worldTransform.applyInverse(e)},n.DisplayObject.prototype._renderCachedSprite=function(e){this._cachedSprite.worldAlpha=this.worldAlpha,e.gl?n.Sprite.prototype._renderWebGL.call(this._cachedSprite,e):n.Sprite.prototype._renderCanvas.call(this._cachedSprite,e)},n.DisplayObject.prototype._generateCachedSprite=function(){this._cacheAsBitmap=!1;var e=this.getLocalBounds();if(this._cachedSprite)this._cachedSprite.texture.resize(0|e.width,0|e.height);else{var t=new n.RenderTexture(0|e.width,0|e.height);this._cachedSprite=new n.Sprite(t),this._cachedSprite.worldTransform=this.worldTransform}var r=this._filters;this._filters=null,this._cachedSprite.filters=r,n.DisplayObject._tempMatrix.tx=-e.x,n.DisplayObject._tempMatrix.ty=-e.y,this._cachedSprite.texture.render(this,n.DisplayObject._tempMatrix,!0),this._cachedSprite.anchor.x=-(e.x/e.width),this._cachedSprite.anchor.y=-(e.y/e.height),this._filters=r,this._cacheAsBitmap=!0},n.DisplayObject.prototype._destroyCachedSprite=function(){this._cachedSprite&&(this._cachedSprite.texture.destroy(!0),this._cachedSprite=null)},n.DisplayObject.prototype._renderWebGL=function(e){e=e},n.DisplayObject.prototype._renderCanvas=function(e){e=e},n.DisplayObject._tempMatrix=new n.Matrix,Object.defineProperty(n.DisplayObject.prototype,"x",{get:function(){return this.position.x},set:function(e){this.position.x=e}}),Object.defineProperty(n.DisplayObject.prototype,"y",{get:function(){return this.position.y},set:function(e){this.position.y=e}}),n.DisplayObjectContainer=function(){n.DisplayObject.call(this),this.children=[]},n.DisplayObjectContainer.prototype=Object.create(n.DisplayObject.prototype),n.DisplayObjectContainer.prototype.constructor=n.DisplayObjectContainer,Object.defineProperty(n.DisplayObjectContainer.prototype,"width",{get:function(){return this.scale.x*this.getLocalBounds().width},set:function(e){var t=this.getLocalBounds().width;this.scale.x=0!==t?e/t:1,this._width=e}}),Object.defineProperty(n.DisplayObjectContainer.prototype,"height",{get:function(){return this.scale.y*this.getLocalBounds().height},set:function(e){var t=this.getLocalBounds().height;this.scale.y=0!==t?e/t:1,this._height=e}}),n.DisplayObjectContainer.prototype.addChild=function(e){return this.addChildAt(e,this.children.length)},n.DisplayObjectContainer.prototype.addChildAt=function(e,t){if(t>=0&&t<=this.children.length)return e.parent&&e.parent.removeChild(e),e.parent=this,this.children.splice(t,0,e),this.stage&&e.setStageReference(this.stage),e;throw new Error(e+"addChildAt: The index "+t+" supplied is out of bounds "+this.children.length)},n.DisplayObjectContainer.prototype.swapChildren=function(e,t){if(e!==t){var r=this.getChildIndex(e),n=this.getChildIndex(t);if(0>r||0>n)throw new Error("swapChildren: Both the supplied DisplayObjects must be a child of the caller.");this.children[r]=t,this.children[n]=e}},n.DisplayObjectContainer.prototype.getChildIndex=function(e){var t=this.children.indexOf(e);if(-1===t)throw new Error("The supplied DisplayObject must be a child of the caller");return t},n.DisplayObjectContainer.prototype.setChildIndex=function(e,t){if(0>t||t>=this.children.length)throw new Error("The supplied index is out of bounds");var r=this.getChildIndex(e);this.children.splice(r,1),this.children.splice(t,0,e)},n.DisplayObjectContainer.prototype.getChildAt=function(e){if(0>e||e>=this.children.length)throw new Error("getChildAt: Supplied index "+e+" does not exist in the child list, or the supplied DisplayObject must be a child of the caller");return this.children[e]},n.DisplayObjectContainer.prototype.removeChild=function(e){var t=this.children.indexOf(e);return-1!==t?this.removeChildAt(t):void 0},n.DisplayObjectContainer.prototype.removeChildAt=function(e){var t=this.getChildAt(e);return this.stage&&t.removeStageReference(),t.parent=void 0,this.children.splice(e,1),t},n.DisplayObjectContainer.prototype.removeChildren=function(e,t){var r=e||0,n="number"==typeof t?t:this.children.length,i=n-r;if(i>0&&n>=i){for(var o=this.children.splice(r,i),s=0;s<o.length;s++){var a=o[s];this.stage&&a.removeStageReference(),a.parent=void 0}return o}if(0===i&&0===this.children.length)return[];throw new Error("removeChildren: Range Error, numeric values are outside the acceptable range")},n.DisplayObjectContainer.prototype.updateTransform=function(){if(this.visible&&(this.displayObjectUpdateTransform(),!this._cacheAsBitmap))for(var e=0,t=this.children.length;t>e;e++)this.children[e].updateTransform()},n.DisplayObjectContainer.prototype.displayObjectContainerUpdateTransform=n.DisplayObjectContainer.prototype.updateTransform,n.DisplayObjectContainer.prototype.getBounds=function(){if(0===this.children.length)return n.EmptyRectangle;for(var e,t,r,i=1/0,o=1/0,s=-1/0,a=-1/0,h=!1,c=0,u=this.children.length;u>c;c++){var f=this.children[c];f.visible&&(h=!0,e=this.children[c].getBounds(),i=i<e.x?i:e.x,o=o<e.y?o:e.y,t=e.width+e.x,r=e.height+e.y,s=s>t?s:t,a=a>r?a:r)}if(!h)return n.EmptyRectangle;var d=this._bounds;return d.x=i,d.y=o,d.width=s-i,d.height=a-o,d},n.DisplayObjectContainer.prototype.getLocalBounds=function(){var e=this.worldTransform;this.worldTransform=n.identityMatrix;for(var t=0,r=this.children.length;r>t;t++)this.children[t].updateTransform();var i=this.getBounds();return this.worldTransform=e,i},n.DisplayObjectContainer.prototype.setStageReference=function(e){this.stage=e,this._interactive&&(this.stage.dirty=!0);for(var t=0,r=this.children.length;r>t;t++){var n=this.children[t];n.setStageReference(e)}},n.DisplayObjectContainer.prototype.removeStageReference=function(){for(var e=0,t=this.children.length;t>e;e++){var r=this.children[e];r.removeStageReference()}this._interactive&&(this.stage.dirty=!0),this.stage=null},n.DisplayObjectContainer.prototype._renderWebGL=function(e){if(this.visible&&!(this.alpha<=0)){if(this._cacheAsBitmap)return void this._renderCachedSprite(e);var t,r;if(this._mask||this._filters){for(this._filters&&(e.spriteBatch.flush(),e.filterManager.pushFilter(this._filterBlock)),this._mask&&(e.spriteBatch.stop(),e.maskManager.pushMask(this.mask,e),e.spriteBatch.start()),t=0,r=this.children.length;r>t;t++)this.children[t]._renderWebGL(e);e.spriteBatch.stop(),this._mask&&e.maskManager.popMask(this._mask,e),this._filters&&e.filterManager.popFilter(),e.spriteBatch.start()}else for(t=0,r=this.children.length;r>t;t++)this.children[t]._renderWebGL(e)}},n.DisplayObjectContainer.prototype._renderCanvas=function(e){if(this.visible!==!1&&0!==this.alpha){if(this._cacheAsBitmap)return void this._renderCachedSprite(e);this._mask&&e.maskManager.pushMask(this._mask,e);for(var t=0,r=this.children.length;r>t;t++){var n=this.children[t];n._renderCanvas(e)}this._mask&&e.maskManager.popMask(e)}},n.Sprite=function(e){n.DisplayObjectContainer.call(this),this.anchor=new n.Point,this.texture=e||n.Texture.emptyTexture,this._width=0,this._height=0,this.tint=16777215,this.blendMode=n.blendModes.NORMAL,this.shader=null,this.texture.baseTexture.hasLoaded?this.onTextureUpdate():this.texture.on("update",this.onTextureUpdate.bind(this)),this.renderable=!0},n.Sprite.prototype=Object.create(n.DisplayObjectContainer.prototype),n.Sprite.prototype.constructor=n.Sprite,Object.defineProperty(n.Sprite.prototype,"width",{get:function(){return this.scale.x*this.texture.frame.width},set:function(e){this.scale.x=e/this.texture.frame.width,this._width=e}}),Object.defineProperty(n.Sprite.prototype,"height",{get:function(){return this.scale.y*this.texture.frame.height},set:function(e){this.scale.y=e/this.texture.frame.height,this._height=e}}),n.Sprite.prototype.setTexture=function(e){this.texture=e,this.cachedTint=16777215},n.Sprite.prototype.onTextureUpdate=function(){this._width&&(this.scale.x=this._width/this.texture.frame.width),this._height&&(this.scale.y=this._height/this.texture.frame.height)},n.Sprite.prototype.getBounds=function(e){var t=this.texture.frame.width,r=this.texture.frame.height,n=t*(1-this.anchor.x),i=t*-this.anchor.x,o=r*(1-this.anchor.y),s=r*-this.anchor.y,a=e||this.worldTransform,h=a.a,c=a.b,u=a.c,f=a.d,d=a.tx,l=a.ty,p=-1/0,b=-1/0,g=1/0,m=1/0;if(0===c&&0===u)0>h&&(h*=-1),0>f&&(f*=-1),g=h*i+d,p=h*n+d,m=f*s+l,b=f*o+l;else{var v=h*i+u*s+d,y=f*s+c*i+l,w=h*n+u*s+d,_=f*s+c*n+l,x=h*n+u*o+d,S=f*o+c*n+l,T=h*i+u*o+d,A=f*o+c*i+l;g=g>v?v:g,g=g>w?w:g,g=g>x?x:g,g=g>T?T:g,m=m>y?y:m,m=m>_?_:m,m=m>S?S:m,m=m>A?A:m,p=v>p?v:p,p=w>p?w:p,p=x>p?x:p,p=T>p?T:p,b=y>b?y:b,b=_>b?_:b,b=S>b?S:b,b=A>b?A:b}var E=this._bounds;return E.x=g,E.width=p-g,E.y=m,E.height=b-m,this._currentBounds=E,E},n.Sprite.prototype._renderWebGL=function(e){if(this.visible&&!(this.alpha<=0)){var t,r;if(this._mask||this._filters){var n=e.spriteBatch;for(this._filters&&(n.flush(),e.filterManager.pushFilter(this._filterBlock)),this._mask&&(n.stop(),e.maskManager.pushMask(this.mask,e),n.start()),n.render(this),t=0,r=this.children.length;r>t;t++)this.children[t]._renderWebGL(e);n.stop(),this._mask&&e.maskManager.popMask(this._mask,e),this._filters&&e.filterManager.popFilter(),n.start()}else for(e.spriteBatch.render(this),t=0,r=this.children.length;r>t;t++)this.children[t]._renderWebGL(e)}},n.Sprite.prototype._renderCanvas=function(e){if(!(this.visible===!1||0===this.alpha||this.texture.crop.width<=0||this.texture.crop.height<=0)){if(this.blendMode!==e.currentBlendMode&&(e.currentBlendMode=this.blendMode,e.context.globalCompositeOperation=n.blendModesCanvas[e.currentBlendMode]),this._mask&&e.maskManager.pushMask(this._mask,e),this.texture.valid){var t=this.texture.baseTexture.resolution/e.resolution;e.context.globalAlpha=this.worldAlpha,e.smoothProperty&&e.scaleMode!==this.texture.baseTexture.scaleMode&&(e.scaleMode=this.texture.baseTexture.scaleMode,e.context[e.smoothProperty]=e.scaleMode===n.scaleModes.LINEAR);var r=this.texture.trim?this.texture.trim.x-this.anchor.x*this.texture.trim.width:this.anchor.x*-this.texture.frame.width,i=this.texture.trim?this.texture.trim.y-this.anchor.y*this.texture.trim.height:this.anchor.y*-this.texture.frame.height;e.roundPixels?(e.context.setTransform(this.worldTransform.a,this.worldTransform.b,this.worldTransform.c,this.worldTransform.d,this.worldTransform.tx*e.resolution|0,this.worldTransform.ty*e.resolution|0),r=0|r,i=0|i):e.context.setTransform(this.worldTransform.a,this.worldTransform.b,this.worldTransform.c,this.worldTransform.d,this.worldTransform.tx*e.resolution,this.worldTransform.ty*e.resolution),16777215!==this.tint?(this.cachedTint!==this.tint&&(this.cachedTint=this.tint,this.tintedTexture=n.CanvasTinter.getTintedTexture(this,this.tint)),e.context.drawImage(this.tintedTexture,0,0,this.texture.crop.width,this.texture.crop.height,r/t,i/t,this.texture.crop.width/t,this.texture.crop.height/t)):e.context.drawImage(this.texture.baseTexture.source,this.texture.crop.x,this.texture.crop.y,this.texture.crop.width,this.texture.crop.height,r/t,i/t,this.texture.crop.width/t,this.texture.crop.height/t)}for(var o=0,s=this.children.length;s>o;o++)this.children[o]._renderCanvas(e);this._mask&&e.maskManager.popMask(e)}},n.Sprite.fromFrame=function(e){var t=n.TextureCache[e];if(!t)throw new Error('The frameId "'+e+'" does not exist in the texture cache'+this);return new n.Sprite(t)},n.Sprite.fromImage=function(e,t,r){var i=n.Texture.fromImage(e,t,r);return new n.Sprite(i)},n.SpriteBatch=function(e){n.DisplayObjectContainer.call(this),this.textureThing=e,this.ready=!1},n.SpriteBatch.prototype=Object.create(n.DisplayObjectContainer.prototype),n.SpriteBatch.prototype.constructor=n.SpriteBatch,n.SpriteBatch.prototype.initWebGL=function(e){this.fastSpriteBatch=new n.WebGLFastSpriteBatch(e),this.ready=!0},n.SpriteBatch.prototype.updateTransform=function(){this.displayObjectUpdateTransform()},n.SpriteBatch.prototype._renderWebGL=function(e){!this.visible||this.alpha<=0||!this.children.length||(this.ready||this.initWebGL(e.gl),e.spriteBatch.stop(),e.shaderManager.setShader(e.shaderManager.fastShader),this.fastSpriteBatch.begin(this,e),this.fastSpriteBatch.render(this),e.spriteBatch.start())},n.SpriteBatch.prototype._renderCanvas=function(e){if(this.visible&&!(this.alpha<=0)&&this.children.length){var t=e.context;t.globalAlpha=this.worldAlpha,this.displayObjectUpdateTransform();for(var r=this.worldTransform,n=!0,i=0;i<this.children.length;i++){var o=this.children[i];if(o.visible){var s=o.texture,a=s.frame;if(t.globalAlpha=this.worldAlpha*o.alpha,o.rotation%(2*Math.PI)===0)n&&(t.setTransform(r.a,r.b,r.c,r.d,r.tx,r.ty),n=!1),t.drawImage(s.baseTexture.source,a.x,a.y,a.width,a.height,o.anchor.x*-a.width*o.scale.x+o.position.x+.5|0,o.anchor.y*-a.height*o.scale.y+o.position.y+.5|0,a.width*o.scale.x,a.height*o.scale.y);else{n||(n=!0),o.displayObjectUpdateTransform();var h=o.worldTransform;e.roundPixels?t.setTransform(h.a,h.b,h.c,h.d,0|h.tx,0|h.ty):t.setTransform(h.a,h.b,h.c,h.d,h.tx,h.ty),t.drawImage(s.baseTexture.source,a.x,a.y,a.width,a.height,o.anchor.x*-a.width+.5|0,o.anchor.y*-a.height+.5|0,a.width,a.height)}}}}},n.MovieClip=function(e){n.Sprite.call(this,e[0]),this.textures=e,this.animationSpeed=1,this.loop=!0,this.onComplete=null,this.currentFrame=0,this.playing=!1},n.MovieClip.prototype=Object.create(n.Sprite.prototype),n.MovieClip.prototype.constructor=n.MovieClip,Object.defineProperty(n.MovieClip.prototype,"totalFrames",{get:function(){return this.textures.length}}),n.MovieClip.prototype.stop=function(){this.playing=!1},n.MovieClip.prototype.play=function(){this.playing=!0},n.MovieClip.prototype.gotoAndStop=function(e){this.playing=!1,this.currentFrame=e;var t=this.currentFrame+.5|0;this.setTexture(this.textures[t%this.textures.length])},n.MovieClip.prototype.gotoAndPlay=function(e){this.currentFrame=e,this.playing=!0},n.MovieClip.prototype.updateTransform=function(){if(this.displayObjectContainerUpdateTransform(),this.playing){this.currentFrame+=this.animationSpeed;var e=this.currentFrame+.5|0;this.currentFrame=this.currentFrame%this.textures.length,this.loop||e<this.textures.length?this.setTexture(this.textures[e%this.textures.length]):e>=this.textures.length&&(this.gotoAndStop(this.textures.length-1),this.onComplete&&this.onComplete())}},n.MovieClip.fromFrames=function(e){for(var t=[],r=0;r<e.length;r++)t.push(new n.Texture.fromFrame(e[r]));return new n.MovieClip(t)},n.MovieClip.fromImages=function(e){for(var t=[],r=0;r<e.length;r++)t.push(new n.Texture.fromImage(e[r]));return new n.MovieClip(t)},n.FilterBlock=function(){this.visible=!0,this.renderable=!0},n.FilterBlock.prototype.constructor=n.FilterBlock,n.Text=function(e,t){this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d"),this.resolution=1,n.Sprite.call(this,n.Texture.fromCanvas(this.canvas)),this.setText(e),this.setStyle(t)},n.Text.prototype=Object.create(n.Sprite.prototype),n.Text.prototype.constructor=n.Text,Object.defineProperty(n.Text.prototype,"width",{get:function(){return this.dirty&&(this.updateText(),this.dirty=!1),this.scale.x*this.texture.frame.width},set:function(e){this.scale.x=e/this.texture.frame.width,this._width=e}}),Object.defineProperty(n.Text.prototype,"height",{get:function(){return this.dirty&&(this.updateText(),this.dirty=!1),this.scale.y*this.texture.frame.height},set:function(e){this.scale.y=e/this.texture.frame.height,this._height=e}}),n.Text.prototype.setStyle=function(e){e=e||{},e.font=e.font||"bold 20pt Arial",e.fill=e.fill||"black",e.align=e.align||"left",e.stroke=e.stroke||"black",e.strokeThickness=e.strokeThickness||0,e.wordWrap=e.wordWrap||!1,e.wordWrapWidth=e.wordWrapWidth||100,e.dropShadow=e.dropShadow||!1,e.dropShadowAngle=e.dropShadowAngle||Math.PI/6,e.dropShadowDistance=e.dropShadowDistance||4,e.dropShadowColor=e.dropShadowColor||"black",this.style=e,this.dirty=!0},n.Text.prototype.setText=function(e){this.text=e.toString()||" ",this.dirty=!0},n.Text.prototype.updateText=function(){this.texture.baseTexture.resolution=this.resolution,this.context.font=this.style.font;var e=this.text;this.style.wordWrap&&(e=this.wordWrap(this.text));for(var t=e.split(/(?:\r\n|\r|\n)/),r=[],n=0,i=this.determineFontProperties(this.style.font),o=0;o<t.length;o++){var s=this.context.measureText(t[o]).width;r[o]=s,n=Math.max(n,s)}var a=n+this.style.strokeThickness;this.style.dropShadow&&(a+=this.style.dropShadowDistance),this.canvas.width=(a+this.context.lineWidth)*this.resolution;var h=i.fontSize+this.style.strokeThickness,c=h*t.length;this.style.dropShadow&&(c+=this.style.dropShadowDistance),this.canvas.height=c*this.resolution,this.context.scale(this.resolution,this.resolution),navigator.isCocoonJS&&this.context.clearRect(0,0,this.canvas.width,this.canvas.height),this.context.font=this.style.font,this.context.strokeStyle=this.style.stroke,this.context.lineWidth=this.style.strokeThickness,this.context.textBaseline="alphabetic";var u,f;if(this.style.dropShadow){this.context.fillStyle=this.style.dropShadowColor;var d=Math.sin(this.style.dropShadowAngle)*this.style.dropShadowDistance,l=Math.cos(this.style.dropShadowAngle)*this.style.dropShadowDistance;for(o=0;o<t.length;o++)u=this.style.strokeThickness/2,f=this.style.strokeThickness/2+o*h+i.ascent,"right"===this.style.align?u+=n-r[o]:"center"===this.style.align&&(u+=(n-r[o])/2),this.style.fill&&this.context.fillText(t[o],u+d,f+l)}for(this.context.fillStyle=this.style.fill,o=0;o<t.length;o++)u=this.style.strokeThickness/2,f=this.style.strokeThickness/2+o*h+i.ascent,"right"===this.style.align?u+=n-r[o]:"center"===this.style.align&&(u+=(n-r[o])/2),this.style.stroke&&this.style.strokeThickness&&this.context.strokeText(t[o],u,f),this.style.fill&&this.context.fillText(t[o],u,f);this.updateTexture()},n.Text.prototype.updateTexture=function(){this.texture.baseTexture.width=this.canvas.width,this.texture.baseTexture.height=this.canvas.height,this.texture.crop.width=this.texture.frame.width=this.canvas.width,this.texture.crop.height=this.texture.frame.height=this.canvas.height,this._width=this.canvas.width,this._height=this.canvas.height,this.texture.baseTexture.dirty()},n.Text.prototype._renderWebGL=function(e){this.dirty&&(this.resolution=e.resolution,this.updateText(),this.dirty=!1),n.Sprite.prototype._renderWebGL.call(this,e)},n.Text.prototype._renderCanvas=function(e){this.dirty&&(this.resolution=e.resolution,this.updateText(),this.dirty=!1),n.Sprite.prototype._renderCanvas.call(this,e)},n.Text.prototype.determineFontProperties=function(e){var t=n.Text.fontPropertiesCache[e];if(!t){t={};var r=n.Text.fontPropertiesCanvas,i=n.Text.fontPropertiesContext;i.font=e;var o=Math.ceil(i.measureText("|Mq").width),s=Math.ceil(i.measureText("M").width),a=2*s;s=1.4*s|0,r.width=o,r.height=a,i.fillStyle="#f00",i.fillRect(0,0,o,a),i.font=e,i.textBaseline="alphabetic",i.fillStyle="#000",i.fillText("|Mq",0,s);var h,c,u=i.getImageData(0,0,o,a).data,f=u.length,d=4*o,l=0,p=!1;for(h=0;s>h;h++){for(c=0;d>c;c+=4)if(255!==u[l+c]){p=!0;break}if(p)break;l+=d}for(t.ascent=s-h,l=f-d,p=!1,h=a;h>s;h--){for(c=0;d>c;c+=4)if(255!==u[l+c]){p=!0;break}if(p)break;l-=d}t.descent=h-s,t.descent+=6,t.fontSize=t.ascent+t.descent,n.Text.fontPropertiesCache[e]=t}return t},n.Text.prototype.wordWrap=function(e){for(var t="",r=e.split("\n"),n=0;n<r.length;n++){for(var i=this.style.wordWrapWidth,o=r[n].split(" "),s=0;s<o.length;s++){var a=this.context.measureText(o[s]).width,h=a+this.context.measureText(" ").width;0===s||h>i?(s>0&&(t+="\n"),t+=o[s],i=this.style.wordWrapWidth-a):(i-=h,t+=" "+o[s])}n<r.length-1&&(t+="\n")}return t},n.Text.prototype.getBounds=function(e){return this.dirty&&(this.updateText(),this.dirty=!1),n.Sprite.prototype.getBounds.call(this,e)},n.Text.prototype.destroy=function(e){this.context=null,this.canvas=null,this.texture.destroy(void 0===e?!0:e)},n.Text.fontPropertiesCache={},n.Text.fontPropertiesCanvas=document.createElement("canvas"),n.Text.fontPropertiesContext=n.Text.fontPropertiesCanvas.getContext("2d"),n.BitmapText=function(e,t){n.DisplayObjectContainer.call(this),this.textWidth=0,this.textHeight=0,this._pool=[],this.setText(e),this.setStyle(t),this.updateText(),this.dirty=!1},n.BitmapText.prototype=Object.create(n.DisplayObjectContainer.prototype),n.BitmapText.prototype.constructor=n.BitmapText,n.BitmapText.prototype.setText=function(e){this.text=e||" ",this.dirty=!0},n.BitmapText.prototype.setStyle=function(e){e=e||{},e.align=e.align||"left",this.style=e;var t=e.font.split(" ");this.fontName=t[t.length-1],this.fontSize=t.length>=2?parseInt(t[t.length-2],10):n.BitmapText.fonts[this.fontName].size,this.dirty=!0,this.tint=e.tint},n.BitmapText.prototype.updateText=function(){for(var e=n.BitmapText.fonts[this.fontName],t=new n.Point,r=null,i=[],o=0,s=[],a=0,h=this.fontSize/e.size,c=0;c<this.text.length;c++){var u=this.text.charCodeAt(c);if(/(?:\r\n|\r|\n)/.test(this.text.charAt(c)))s.push(t.x),o=Math.max(o,t.x),a++,t.x=0,t.y+=e.lineHeight,r=null;else{var f=e.chars[u];f&&(r&&f.kerning[r]&&(t.x+=f.kerning[r]),i.push({texture:f.texture,line:a,charCode:u,position:new n.Point(t.x+f.xOffset,t.y+f.yOffset)}),t.x+=f.xAdvance,r=u)}}s.push(t.x),o=Math.max(o,t.x);var d=[];for(c=0;a>=c;c++){var l=0;"right"===this.style.align?l=o-s[c]:"center"===this.style.align&&(l=(o-s[c])/2),d.push(l)}var p=this.children.length,b=i.length,g=this.tint||16777215;for(c=0;b>c;c++){var m=p>c?this.children[c]:this._pool.pop();m?m.setTexture(i[c].texture):m=new n.Sprite(i[c].texture),m.position.x=(i[c].position.x+d[i[c].line])*h,m.position.y=i[c].position.y*h,m.scale.x=m.scale.y=h,m.tint=g,m.parent||this.addChild(m)}for(;this.children.length>b;){var v=this.getChildAt(this.children.length-1);this._pool.push(v),this.removeChild(v)}this.textWidth=o*h,this.textHeight=(t.y+e.lineHeight)*h},n.BitmapText.prototype.updateTransform=function(){this.dirty&&(this.updateText(),this.dirty=!1),n.DisplayObjectContainer.prototype.updateTransform.call(this)},n.BitmapText.fonts={},n.InteractionData=function(){this.global=new n.Point,this.target=null,this.originalEvent=null},n.InteractionData.prototype.getLocalPosition=function(e,t){var r=e.worldTransform,i=this.global,o=r.a,s=r.c,a=r.tx,h=r.b,c=r.d,u=r.ty,f=1/(o*c+s*-h);return t=t||new n.Point,t.x=c*f*i.x+-s*f*i.y+(u*s-a*c)*f,t.y=o*f*i.y+-h*f*i.x+(-u*o+a*h)*f,t},n.InteractionData.prototype.constructor=n.InteractionData,n.InteractionManager=function(e){this.stage=e,this.mouse=new n.InteractionData,this.touches={},this.tempPoint=new n.Point,this.mouseoverEnabled=!0,this.pool=[],this.interactiveItems=[],this.interactionDOMElement=null,this.onMouseMove=this.onMouseMove.bind(this),this.onMouseDown=this.onMouseDown.bind(this),this.onMouseOut=this.onMouseOut.bind(this),this.onMouseUp=this.onMouseUp.bind(this),this.onTouchStart=this.onTouchStart.bind(this),this.onTouchEnd=this.onTouchEnd.bind(this),this.onTouchMove=this.onTouchMove.bind(this),this.last=0,this.currentCursorStyle="inherit",this.mouseOut=!1,this.resolution=1,this._tempPoint=new n.Point},n.InteractionManager.prototype.constructor=n.InteractionManager,n.InteractionManager.prototype.collectInteractiveSprite=function(e,t){for(var r=e.children,n=r.length,i=n-1;i>=0;i--){var o=r[i];o._interactive?(t.interactiveChildren=!0,this.interactiveItems.push(o),o.children.length>0&&this.collectInteractiveSprite(o,o)):(o.__iParent=null,o.children.length>0&&this.collectInteractiveSprite(o,t))}},n.InteractionManager.prototype.setTarget=function(e){this.target=e,this.resolution=e.resolution,null===this.interactionDOMElement&&this.setTargetDomElement(e.view)},n.InteractionManager.prototype.setTargetDomElement=function(e){this.removeEvents(),window.navigator.msPointerEnabled&&(e.style["-ms-content-zooming"]="none",e.style["-ms-touch-action"]="none"),this.interactionDOMElement=e,e.addEventListener("mousemove",this.onMouseMove,!0),e.addEventListener("mousedown",this.onMouseDown,!0),e.addEventListener("mouseout",this.onMouseOut,!0),e.addEventListener("touchstart",this.onTouchStart,!0),e.addEventListener("touchend",this.onTouchEnd,!0),e.addEventListener("touchmove",this.onTouchMove,!0),window.addEventListener("mouseup",this.onMouseUp,!0)},n.InteractionManager.prototype.removeEvents=function(){this.interactionDOMElement&&(this.interactionDOMElement.style["-ms-content-zooming"]="",this.interactionDOMElement.style["-ms-touch-action"]="",this.interactionDOMElement.removeEventListener("mousemove",this.onMouseMove,!0),this.interactionDOMElement.removeEventListener("mousedown",this.onMouseDown,!0),this.interactionDOMElement.removeEventListener("mouseout",this.onMouseOut,!0),this.interactionDOMElement.removeEventListener("touchstart",this.onTouchStart,!0),this.interactionDOMElement.removeEventListener("touchend",this.onTouchEnd,!0),this.interactionDOMElement.removeEventListener("touchmove",this.onTouchMove,!0),this.interactionDOMElement=null,window.removeEventListener("mouseup",this.onMouseUp,!0))},n.InteractionManager.prototype.update=function(){if(this.target){var e=Date.now(),t=e-this.last;if(t=t*n.INTERACTION_FREQUENCY/1e3,!(1>t)){this.last=e;var r=0;this.dirty&&this.rebuildInteractiveGraph();var i=this.interactiveItems.length,o="inherit",s=!1;for(r=0;i>r;r++){var a=this.interactiveItems[r];a.__hit=this.hitTest(a,this.mouse),this.mouse.target=a,a.__hit&&!s?(a.buttonMode&&(o=a.defaultCursor),a.interactiveChildren||(s=!0),a.__isOver||(a.mouseover&&a.mouseover(this.mouse),a.__isOver=!0)):a.__isOver&&(a.mouseout&&a.mouseout(this.mouse),a.__isOver=!1)}this.currentCursorStyle!==o&&(this.currentCursorStyle=o,this.interactionDOMElement.style.cursor=o)}}},n.InteractionManager.prototype.rebuildInteractiveGraph=function(){this.dirty=!1;for(var e=this.interactiveItems.length,t=0;e>t;t++)this.interactiveItems[t].interactiveChildren=!1;this.interactiveItems=[],this.stage.interactive&&this.interactiveItems.push(this.stage),this.collectInteractiveSprite(this.stage,this.stage)},n.InteractionManager.prototype.onMouseMove=function(e){this.dirty&&this.rebuildInteractiveGraph(),this.mouse.originalEvent=e;var t=this.interactionDOMElement.getBoundingClientRect();this.mouse.global.x=(e.clientX-t.left)*(this.target.width/t.width)/this.resolution,this.mouse.global.y=(e.clientY-t.top)*(this.target.height/t.height)/this.resolution;for(var r=this.interactiveItems.length,n=0;r>n;n++){var i=this.interactiveItems[n];i.mousemove&&i.mousemove(this.mouse)}},n.InteractionManager.prototype.onMouseDown=function(e){this.dirty&&this.rebuildInteractiveGraph(),this.mouse.originalEvent=e,n.AUTO_PREVENT_DEFAULT&&this.mouse.originalEvent.preventDefault();for(var t=this.interactiveItems.length,r=this.mouse.originalEvent,i=2===r.button||3===r.which,o=i?"rightdown":"mousedown",s=i?"rightclick":"click",a=i?"__rightIsDown":"__mouseIsDown",h=i?"__isRightDown":"__isDown",c=0;t>c;c++){var u=this.interactiveItems[c];if((u[o]||u[s])&&(u[a]=!0,u.__hit=this.hitTest(u,this.mouse),u.__hit&&(u[o]&&u[o](this.mouse),u[h]=!0,!u.interactiveChildren)))break}},n.InteractionManager.prototype.onMouseOut=function(e){this.dirty&&this.rebuildInteractiveGraph(),this.mouse.originalEvent=e;var t=this.interactiveItems.length;this.interactionDOMElement.style.cursor="inherit";for(var r=0;t>r;r++){var n=this.interactiveItems[r];n.__isOver&&(this.mouse.target=n,n.mouseout&&n.mouseout(this.mouse),n.__isOver=!1)}this.mouseOut=!0,this.mouse.global.x=-1e4,this.mouse.global.y=-1e4},n.InteractionManager.prototype.onMouseUp=function(e){this.dirty&&this.rebuildInteractiveGraph(),this.mouse.originalEvent=e;for(var t=this.interactiveItems.length,r=!1,n=this.mouse.originalEvent,i=2===n.button||3===n.which,o=i?"rightup":"mouseup",s=i?"rightclick":"click",a=i?"rightupoutside":"mouseupoutside",h=i?"__isRightDown":"__isDown",c=0;t>c;c++){var u=this.interactiveItems[c];(u[s]||u[o]||u[a])&&(u.__hit=this.hitTest(u,this.mouse),u.__hit&&!r?(u[o]&&u[o](this.mouse),u[h]&&u[s]&&u[s](this.mouse),u.interactiveChildren||(r=!0)):u[h]&&u[a]&&u[a](this.mouse),u[h]=!1)}},n.InteractionManager.prototype.hitTest=function(e,t){var r=t.global;if(!e.worldVisible)return!1;e.worldTransform.applyInverse(r,this._tempPoint);var i,o=this._tempPoint.x,s=this._tempPoint.y;if(t.target=e,e.hitArea&&e.hitArea.contains)return e.hitArea.contains(o,s);if(e instanceof n.Sprite){var a,h=e.texture.frame.width,c=e.texture.frame.height,u=-h*e.anchor.x;if(o>u&&u+h>o&&(a=-c*e.anchor.y,s>a&&a+c>s))return!0}else if(e instanceof n.Graphics){var f=e.graphicsData;for(i=0;i<f.length;i++){var d=f[i];if(d.fill&&d.shape&&d.shape.contains(o,s))return!0}}var l=e.children.length;for(i=0;l>i;i++){var p=e.children[i],b=this.hitTest(p,t);if(b)return t.target=e,!0}return!1},n.InteractionManager.prototype.onTouchMove=function(e){this.dirty&&this.rebuildInteractiveGraph();var t,r=this.interactionDOMElement.getBoundingClientRect(),n=e.changedTouches,i=0;for(i=0;i<n.length;i++){var o=n[i];t=this.touches[o.identifier],t.originalEvent=e,t.global.x=(o.clientX-r.left)*(this.target.width/r.width)/this.resolution,t.global.y=(o.clientY-r.top)*(this.target.height/r.height)/this.resolution,!navigator.isCocoonJS||r.left||r.top||e.target.style.width||e.target.style.height||(t.global.x=o.clientX,t.global.y=o.clientY);for(var s=0;s<this.interactiveItems.length;s++){var a=this.interactiveItems[s];a.touchmove&&a.__touchData&&a.__touchData[o.identifier]&&a.touchmove(t)}}},n.InteractionManager.prototype.onTouchStart=function(e){this.dirty&&this.rebuildInteractiveGraph();var t=this.interactionDOMElement.getBoundingClientRect();n.AUTO_PREVENT_DEFAULT&&e.preventDefault();for(var r=e.changedTouches,i=0;i<r.length;i++){var o=r[i],s=this.pool.pop();s||(s=new n.InteractionData),s.originalEvent=e,this.touches[o.identifier]=s,s.global.x=(o.clientX-t.left)*(this.target.width/t.width)/this.resolution,s.global.y=(o.clientY-t.top)*(this.target.height/t.height)/this.resolution,!navigator.isCocoonJS||t.left||t.top||e.target.style.width||e.target.style.height||(s.global.x=o.clientX,s.global.y=o.clientY);for(var a=this.interactiveItems.length,h=0;a>h;h++){var c=this.interactiveItems[h];if((c.touchstart||c.tap)&&(c.__hit=this.hitTest(c,s),c.__hit&&(c.touchstart&&c.touchstart(s),c.__isDown=!0,c.__touchData=c.__touchData||{},c.__touchData[o.identifier]=s,!c.interactiveChildren)))break}}},n.InteractionManager.prototype.onTouchEnd=function(e){this.dirty&&this.rebuildInteractiveGraph();for(var t=this.interactionDOMElement.getBoundingClientRect(),r=e.changedTouches,n=0;n<r.length;n++){var i=r[n],o=this.touches[i.identifier],s=!1;o.global.x=(i.clientX-t.left)*(this.target.width/t.width)/this.resolution,o.global.y=(i.clientY-t.top)*(this.target.height/t.height)/this.resolution,!navigator.isCocoonJS||t.left||t.top||e.target.style.width||e.target.style.height||(o.global.x=i.clientX,o.global.y=i.clientY);for(var a=this.interactiveItems.length,h=0;a>h;h++){var c=this.interactiveItems[h];c.__touchData&&c.__touchData[i.identifier]&&(c.__hit=this.hitTest(c,c.__touchData[i.identifier]),o.originalEvent=e,(c.touchend||c.tap)&&(c.__hit&&!s?(c.touchend&&c.touchend(o),c.__isDown&&c.tap&&c.tap(o),c.interactiveChildren||(s=!0)):c.__isDown&&c.touchendoutside&&c.touchendoutside(o),c.__isDown=!1),c.__touchData[i.identifier]=null)}this.pool.push(o),this.touches[i.identifier]=null}},n.Stage=function(e){n.DisplayObjectContainer.call(this),this.worldTransform=new n.Matrix,this.interactive=!0,this.interactionManager=new n.InteractionManager(this),this.dirty=!0,this.stage=this,this.stage.hitArea=new n.Rectangle(0,0,1e5,1e5),this.setBackgroundColor(e)
},n.Stage.prototype=Object.create(n.DisplayObjectContainer.prototype),n.Stage.prototype.constructor=n.Stage,n.Stage.prototype.setInteractionDelegate=function(e){this.interactionManager.setTargetDomElement(e)},n.Stage.prototype.updateTransform=function(){this.worldAlpha=1;for(var e=0,t=this.children.length;t>e;e++)this.children[e].updateTransform();this.dirty&&(this.dirty=!1,this.interactionManager.dirty=!0),this.interactive&&this.interactionManager.update()},n.Stage.prototype.setBackgroundColor=function(e){this.backgroundColor=e||0,this.backgroundColorSplit=n.hex2rgb(this.backgroundColor);var t=this.backgroundColor.toString(16);t="000000".substr(0,6-t.length)+t,this.backgroundColorString="#"+t},n.Stage.prototype.getMousePosition=function(){return this.interactionManager.mouse.global},function(e){for(var t=0,r=["ms","moz","webkit","o"],n=0;n<r.length&&!e.requestAnimationFrame;++n)e.requestAnimationFrame=e[r[n]+"RequestAnimationFrame"],e.cancelAnimationFrame=e[r[n]+"CancelAnimationFrame"]||e[r[n]+"CancelRequestAnimationFrame"];e.requestAnimationFrame||(e.requestAnimationFrame=function(r){var n=(new Date).getTime(),i=Math.max(0,16-(n-t)),o=e.setTimeout(function(){r(n+i)},i);return t=n+i,o}),e.cancelAnimationFrame||(e.cancelAnimationFrame=function(e){clearTimeout(e)}),e.requestAnimFrame=e.requestAnimationFrame}(this),n.hex2rgb=function(e){return[(e>>16&255)/255,(e>>8&255)/255,(255&e)/255]},n.rgb2hex=function(e){return(255*e[0]<<16)+(255*e[1]<<8)+255*e[2]},"function"!=typeof Function.prototype.bind&&(Function.prototype.bind=function(){return function(e){function t(){for(var n=arguments.length,o=new Array(n);n--;)o[n]=arguments[n];return o=i.concat(o),r.apply(this instanceof t?this:e,o)}var r=this,n=arguments.length-1,i=[];if(n>0)for(i.length=n;n--;)i[n]=arguments[n+1];if("function"!=typeof r)throw new TypeError;return t.prototype=function e(t){return t&&(e.prototype=t),this instanceof e?void 0:new e}(r.prototype),t}}()),n.AjaxRequest=function(){var e=["Msxml2.XMLHTTP.6.0","Msxml2.XMLHTTP.3.0","Microsoft.XMLHTTP"];if(!window.ActiveXObject)return window.XMLHttpRequest?new window.XMLHttpRequest:!1;for(var t=0;t<e.length;t++)try{return new window.ActiveXObject(e[t])}catch(e){}},n.canUseNewCanvasBlendModes=function(){if("undefined"==typeof document)return!1;var e=document.createElement("canvas");e.width=1,e.height=1;var t=e.getContext("2d");return t.fillStyle="#000",t.fillRect(0,0,1,1),t.globalCompositeOperation="multiply",t.fillStyle="#fff",t.fillRect(0,0,1,1),0===t.getImageData(0,0,1,1).data[0]},n.getNextPowerOfTwo=function(e){if(e>0&&0===(e&e-1))return e;for(var t=1;e>t;)t<<=1;return t},n.isPowerOfTwo=function(e,t){return e>0&&0===(e&e-1)&&t>0&&0===(t&t-1)},n.EventTarget={call:function(e){e&&(e=e.prototype||e,n.EventTarget.mixin(e))},mixin:function(e){e.listeners=function(e){return this._listeners=this._listeners||{},this._listeners[e]?this._listeners[e].slice():[]},e.emit=e.dispatchEvent=function(e,t){if(this._listeners=this._listeners||{},"object"==typeof e&&(t=e,e=e.type),t&&t.__isEventObject===!0||(t=new n.Event(this,e,t)),this._listeners&&this._listeners[e]){var r,i=this._listeners[e].slice(0),o=i.length,s=i[0];for(r=0;o>r;s=i[++r])if(s.call(this,t),t.stoppedImmediate)return this;if(t.stopped)return this}return this.parent&&this.parent.emit&&this.parent.emit.call(this.parent,e,t),this},e.on=e.addEventListener=function(e,t){return this._listeners=this._listeners||{},(this._listeners[e]=this._listeners[e]||[]).push(t),this},e.once=function(e,t){function r(){t.apply(n.off(e,r),arguments)}this._listeners=this._listeners||{};var n=this;return r._originalHandler=t,this.on(e,r)},e.off=e.removeEventListener=function(e,t){if(this._listeners=this._listeners||{},!this._listeners[e])return this;for(var r=this._listeners[e],n=t?r.length:0;n-->0;)(r[n]===t||r[n]._originalHandler===t)&&r.splice(n,1);return 0===r.length&&delete this._listeners[e],this},e.removeAllListeners=function(e){return this._listeners=this._listeners||{},this._listeners[e]?(delete this._listeners[e],this):this}}},n.Event=function(e,t,r){this.__isEventObject=!0,this.stopped=!1,this.stoppedImmediate=!1,this.target=e,this.type=t,this.data=r,this.content=r,this.timeStamp=Date.now()},n.Event.prototype.stopPropagation=function(){this.stopped=!0},n.Event.prototype.stopImmediatePropagation=function(){this.stoppedImmediate=!0},n.autoDetectRenderer=function(e,t,r){e||(e=800),t||(t=600);var i=function(){try{var e=document.createElement("canvas");return!!window.WebGLRenderingContext&&(e.getContext("webgl")||e.getContext("experimental-webgl"))}catch(e){return!1}}();return i?new n.WebGLRenderer(e,t,r):new n.CanvasRenderer(e,t,r)},n.autoDetectRecommendedRenderer=function(e,t,r){e||(e=800),t||(t=600);var i=function(){try{var e=document.createElement("canvas");return!!window.WebGLRenderingContext&&(e.getContext("webgl")||e.getContext("experimental-webgl"))}catch(e){return!1}}(),o=/Android/i.test(navigator.userAgent);return i&&!o?new n.WebGLRenderer(e,t,r):new n.CanvasRenderer(e,t,r)},n.PolyK={},n.PolyK.Triangulate=function(e){var t=!0,r=e.length>>1;if(3>r)return[];for(var i=[],o=[],s=0;r>s;s++)o.push(s);s=0;for(var a=r;a>3;){var h=o[(s+0)%a],c=o[(s+1)%a],u=o[(s+2)%a],f=e[2*h],d=e[2*h+1],l=e[2*c],p=e[2*c+1],b=e[2*u],g=e[2*u+1],m=!1;if(n.PolyK._convex(f,d,l,p,b,g,t)){m=!0;for(var v=0;a>v;v++){var y=o[v];if(y!==h&&y!==c&&y!==u&&n.PolyK._PointInTriangle(e[2*y],e[2*y+1],f,d,l,p,b,g)){m=!1;break}}}if(m)i.push(h,c,u),o.splice((s+1)%a,1),a--,s=0;else if(s++>3*a){if(!t)return null;for(i=[],o=[],s=0;r>s;s++)o.push(s);s=0,a=r,t=!1}}return i.push(o[0],o[1],o[2]),i},n.PolyK._PointInTriangle=function(e,t,r,n,i,o,s,a){var h=s-r,c=a-n,u=i-r,f=o-n,d=e-r,l=t-n,p=h*h+c*c,b=h*u+c*f,g=h*d+c*l,m=u*u+f*f,v=u*d+f*l,y=1/(p*m-b*b),w=(m*g-b*v)*y,_=(p*v-b*g)*y;return w>=0&&_>=0&&1>w+_},n.PolyK._convex=function(e,t,r,n,i,o,s){return(t-n)*(i-r)+(r-e)*(o-n)>=0===s},n.initDefaultShaders=function(){},n.CompileVertexShader=function(e,t){return n._CompileShader(e,t,e.VERTEX_SHADER)},n.CompileFragmentShader=function(e,t){return n._CompileShader(e,t,e.FRAGMENT_SHADER)},n._CompileShader=function(e,t,r){var n=t.join("\n"),i=e.createShader(r);return e.shaderSource(i,n),e.compileShader(i),e.getShaderParameter(i,e.COMPILE_STATUS)?i:(window.console.log(e.getShaderInfoLog(i)),null)},n.compileProgram=function(e,t,r){var i=n.CompileFragmentShader(e,r),o=n.CompileVertexShader(e,t),s=e.createProgram();return e.attachShader(s,o),e.attachShader(s,i),e.linkProgram(s),e.getProgramParameter(s,e.LINK_STATUS)||window.console.log("Could not initialise shaders"),s},n.PixiShader=function(e){this._UID=n._UID++,this.gl=e,this.program=null,this.fragmentSrc=["precision lowp float;","varying vec2 vTextureCoord;","varying vec4 vColor;","uniform sampler2D uSampler;","void main(void) {","   gl_FragColor = texture2D(uSampler, vTextureCoord) * vColor ;","}"],this.textureCount=0,this.firstRun=!0,this.dirty=!0,this.attributes=[],this.init()},n.PixiShader.prototype.constructor=n.PixiShader,n.PixiShader.prototype.init=function(){var e=this.gl,t=n.compileProgram(e,this.vertexSrc||n.PixiShader.defaultVertexSrc,this.fragmentSrc);e.useProgram(t),this.uSampler=e.getUniformLocation(t,"uSampler"),this.projectionVector=e.getUniformLocation(t,"projectionVector"),this.offsetVector=e.getUniformLocation(t,"offsetVector"),this.dimensions=e.getUniformLocation(t,"dimensions"),this.aVertexPosition=e.getAttribLocation(t,"aVertexPosition"),this.aTextureCoord=e.getAttribLocation(t,"aTextureCoord"),this.colorAttribute=e.getAttribLocation(t,"aColor"),-1===this.colorAttribute&&(this.colorAttribute=2),this.attributes=[this.aVertexPosition,this.aTextureCoord,this.colorAttribute];for(var r in this.uniforms)this.uniforms[r].uniformLocation=e.getUniformLocation(t,r);this.initUniforms(),this.program=t},n.PixiShader.prototype.initUniforms=function(){this.textureCount=1;var e,t=this.gl;for(var r in this.uniforms){e=this.uniforms[r];var n=e.type;"sampler2D"===n?(e._init=!1,null!==e.value&&this.initSampler2D(e)):"mat2"===n||"mat3"===n||"mat4"===n?(e.glMatrix=!0,e.glValueLength=1,"mat2"===n?e.glFunc=t.uniformMatrix2fv:"mat3"===n?e.glFunc=t.uniformMatrix3fv:"mat4"===n&&(e.glFunc=t.uniformMatrix4fv)):(e.glFunc=t["uniform"+n],e.glValueLength="2f"===n||"2i"===n?2:"3f"===n||"3i"===n?3:"4f"===n||"4i"===n?4:1)}},n.PixiShader.prototype.initSampler2D=function(e){if(e.value&&e.value.baseTexture&&e.value.baseTexture.hasLoaded){var t=this.gl;if(t.activeTexture(t["TEXTURE"+this.textureCount]),t.bindTexture(t.TEXTURE_2D,e.value.baseTexture._glTextures[t.id]),e.textureData){var r=e.textureData,n=r.magFilter?r.magFilter:t.LINEAR,i=r.minFilter?r.minFilter:t.LINEAR,o=r.wrapS?r.wrapS:t.CLAMP_TO_EDGE,s=r.wrapT?r.wrapT:t.CLAMP_TO_EDGE,a=r.luminance?t.LUMINANCE:t.RGBA;if(r.repeat&&(o=t.REPEAT,s=t.REPEAT),t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,!!r.flipY),r.width){var h=r.width?r.width:512,c=r.height?r.height:2,u=r.border?r.border:0;t.texImage2D(t.TEXTURE_2D,0,a,h,c,u,a,t.UNSIGNED_BYTE,null)}else t.texImage2D(t.TEXTURE_2D,0,a,t.RGBA,t.UNSIGNED_BYTE,e.value.baseTexture.source);t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,n),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,i),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,o),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,s)}t.uniform1i(e.uniformLocation,this.textureCount),e._init=!0,this.textureCount++}},n.PixiShader.prototype.syncUniforms=function(){this.textureCount=1;var e,t=this.gl;for(var r in this.uniforms)e=this.uniforms[r],1===e.glValueLength?e.glMatrix===!0?e.glFunc.call(t,e.uniformLocation,e.transpose,e.value):e.glFunc.call(t,e.uniformLocation,e.value):2===e.glValueLength?e.glFunc.call(t,e.uniformLocation,e.value.x,e.value.y):3===e.glValueLength?e.glFunc.call(t,e.uniformLocation,e.value.x,e.value.y,e.value.z):4===e.glValueLength?e.glFunc.call(t,e.uniformLocation,e.value.x,e.value.y,e.value.z,e.value.w):"sampler2D"===e.type&&(e._init?(t.activeTexture(t["TEXTURE"+this.textureCount]),e.value.baseTexture._dirty[t.id]?n.instances[t.id].updateTexture(e.value.baseTexture):t.bindTexture(t.TEXTURE_2D,e.value.baseTexture._glTextures[t.id]),t.uniform1i(e.uniformLocation,this.textureCount),this.textureCount++):this.initSampler2D(e))},n.PixiShader.prototype.destroy=function(){this.gl.deleteProgram(this.program),this.uniforms=null,this.gl=null,this.attributes=null},n.PixiShader.defaultVertexSrc=["attribute vec2 aVertexPosition;","attribute vec2 aTextureCoord;","attribute vec4 aColor;","uniform vec2 projectionVector;","uniform vec2 offsetVector;","varying vec2 vTextureCoord;","varying vec4 vColor;","const vec2 center = vec2(-1.0, 1.0);","void main(void) {","   gl_Position = vec4( ((aVertexPosition + offsetVector) / projectionVector) + center , 0.0, 1.0);","   vTextureCoord = aTextureCoord;","   vColor = vec4(aColor.rgb * aColor.a, aColor.a);","}"],n.PixiFastShader=function(e){this._UID=n._UID++,this.gl=e,this.program=null,this.fragmentSrc=["precision lowp float;","varying vec2 vTextureCoord;","varying float vColor;","uniform sampler2D uSampler;","void main(void) {","   gl_FragColor = texture2D(uSampler, vTextureCoord) * vColor ;","}"],this.vertexSrc=["attribute vec2 aVertexPosition;","attribute vec2 aPositionCoord;","attribute vec2 aScale;","attribute float aRotation;","attribute vec2 aTextureCoord;","attribute float aColor;","uniform vec2 projectionVector;","uniform vec2 offsetVector;","uniform mat3 uMatrix;","varying vec2 vTextureCoord;","varying float vColor;","const vec2 center = vec2(-1.0, 1.0);","void main(void) {","   vec2 v;","   vec2 sv = aVertexPosition * aScale;","   v.x = (sv.x) * cos(aRotation) - (sv.y) * sin(aRotation);","   v.y = (sv.x) * sin(aRotation) + (sv.y) * cos(aRotation);","   v = ( uMatrix * vec3(v + aPositionCoord , 1.0) ).xy ;","   gl_Position = vec4( ( v / projectionVector) + center , 0.0, 1.0);","   vTextureCoord = aTextureCoord;","   vColor = aColor;","}"],this.textureCount=0,this.init()},n.PixiFastShader.prototype.constructor=n.PixiFastShader,n.PixiFastShader.prototype.init=function(){var e=this.gl,t=n.compileProgram(e,this.vertexSrc,this.fragmentSrc);e.useProgram(t),this.uSampler=e.getUniformLocation(t,"uSampler"),this.projectionVector=e.getUniformLocation(t,"projectionVector"),this.offsetVector=e.getUniformLocation(t,"offsetVector"),this.dimensions=e.getUniformLocation(t,"dimensions"),this.uMatrix=e.getUniformLocation(t,"uMatrix"),this.aVertexPosition=e.getAttribLocation(t,"aVertexPosition"),this.aPositionCoord=e.getAttribLocation(t,"aPositionCoord"),this.aScale=e.getAttribLocation(t,"aScale"),this.aRotation=e.getAttribLocation(t,"aRotation"),this.aTextureCoord=e.getAttribLocation(t,"aTextureCoord"),this.colorAttribute=e.getAttribLocation(t,"aColor"),-1===this.colorAttribute&&(this.colorAttribute=2),this.attributes=[this.aVertexPosition,this.aPositionCoord,this.aScale,this.aRotation,this.aTextureCoord,this.colorAttribute],this.program=t},n.PixiFastShader.prototype.destroy=function(){this.gl.deleteProgram(this.program),this.uniforms=null,this.gl=null,this.attributes=null},n.StripShader=function(e){this._UID=n._UID++,this.gl=e,this.program=null,this.fragmentSrc=["precision mediump float;","varying vec2 vTextureCoord;","uniform float alpha;","uniform sampler2D uSampler;","void main(void) {","   gl_FragColor = texture2D(uSampler, vec2(vTextureCoord.x, vTextureCoord.y)) * alpha;","}"],this.vertexSrc=["attribute vec2 aVertexPosition;","attribute vec2 aTextureCoord;","uniform mat3 translationMatrix;","uniform vec2 projectionVector;","uniform vec2 offsetVector;","varying vec2 vTextureCoord;","void main(void) {","   vec3 v = translationMatrix * vec3(aVertexPosition , 1.0);","   v -= offsetVector.xyx;","   gl_Position = vec4( v.x / projectionVector.x -1.0, v.y / -projectionVector.y + 1.0 , 0.0, 1.0);","   vTextureCoord = aTextureCoord;","}"],this.init()},n.StripShader.prototype.constructor=n.StripShader,n.StripShader.prototype.init=function(){var e=this.gl,t=n.compileProgram(e,this.vertexSrc,this.fragmentSrc);e.useProgram(t),this.uSampler=e.getUniformLocation(t,"uSampler"),this.projectionVector=e.getUniformLocation(t,"projectionVector"),this.offsetVector=e.getUniformLocation(t,"offsetVector"),this.colorAttribute=e.getAttribLocation(t,"aColor"),this.aVertexPosition=e.getAttribLocation(t,"aVertexPosition"),this.aTextureCoord=e.getAttribLocation(t,"aTextureCoord"),this.attributes=[this.aVertexPosition,this.aTextureCoord],this.translationMatrix=e.getUniformLocation(t,"translationMatrix"),this.alpha=e.getUniformLocation(t,"alpha"),this.program=t},n.StripShader.prototype.destroy=function(){this.gl.deleteProgram(this.program),this.uniforms=null,this.gl=null,this.attribute=null},n.PrimitiveShader=function(e){this._UID=n._UID++,this.gl=e,this.program=null,this.fragmentSrc=["precision mediump float;","varying vec4 vColor;","void main(void) {","   gl_FragColor = vColor;","}"],this.vertexSrc=["attribute vec2 aVertexPosition;","attribute vec4 aColor;","uniform mat3 translationMatrix;","uniform vec2 projectionVector;","uniform vec2 offsetVector;","uniform float alpha;","uniform float flipY;","uniform vec3 tint;","varying vec4 vColor;","void main(void) {","   vec3 v = translationMatrix * vec3(aVertexPosition , 1.0);","   v -= offsetVector.xyx;","   gl_Position = vec4( v.x / projectionVector.x -1.0, (v.y / projectionVector.y * -flipY) + flipY , 0.0, 1.0);","   vColor = aColor * vec4(tint * alpha, alpha);","}"],this.init()},n.PrimitiveShader.prototype.constructor=n.PrimitiveShader,n.PrimitiveShader.prototype.init=function(){var e=this.gl,t=n.compileProgram(e,this.vertexSrc,this.fragmentSrc);e.useProgram(t),this.projectionVector=e.getUniformLocation(t,"projectionVector"),this.offsetVector=e.getUniformLocation(t,"offsetVector"),this.tintColor=e.getUniformLocation(t,"tint"),this.flipY=e.getUniformLocation(t,"flipY"),this.aVertexPosition=e.getAttribLocation(t,"aVertexPosition"),this.colorAttribute=e.getAttribLocation(t,"aColor"),this.attributes=[this.aVertexPosition,this.colorAttribute],this.translationMatrix=e.getUniformLocation(t,"translationMatrix"),this.alpha=e.getUniformLocation(t,"alpha"),this.program=t},n.PrimitiveShader.prototype.destroy=function(){this.gl.deleteProgram(this.program),this.uniforms=null,this.gl=null,this.attributes=null},n.ComplexPrimitiveShader=function(e){this._UID=n._UID++,this.gl=e,this.program=null,this.fragmentSrc=["precision mediump float;","varying vec4 vColor;","void main(void) {","   gl_FragColor = vColor;","}"],this.vertexSrc=["attribute vec2 aVertexPosition;","uniform mat3 translationMatrix;","uniform vec2 projectionVector;","uniform vec2 offsetVector;","uniform vec3 tint;","uniform float alpha;","uniform vec3 color;","uniform float flipY;","varying vec4 vColor;","void main(void) {","   vec3 v = translationMatrix * vec3(aVertexPosition , 1.0);","   v -= offsetVector.xyx;","   gl_Position = vec4( v.x / projectionVector.x -1.0, (v.y / projectionVector.y * -flipY) + flipY , 0.0, 1.0);","   vColor = vec4(color * alpha * tint, alpha);","}"],this.init()},n.ComplexPrimitiveShader.prototype.constructor=n.ComplexPrimitiveShader,n.ComplexPrimitiveShader.prototype.init=function(){var e=this.gl,t=n.compileProgram(e,this.vertexSrc,this.fragmentSrc);e.useProgram(t),this.projectionVector=e.getUniformLocation(t,"projectionVector"),this.offsetVector=e.getUniformLocation(t,"offsetVector"),this.tintColor=e.getUniformLocation(t,"tint"),this.color=e.getUniformLocation(t,"color"),this.flipY=e.getUniformLocation(t,"flipY"),this.aVertexPosition=e.getAttribLocation(t,"aVertexPosition"),this.attributes=[this.aVertexPosition,this.colorAttribute],this.translationMatrix=e.getUniformLocation(t,"translationMatrix"),this.alpha=e.getUniformLocation(t,"alpha"),this.program=t},n.ComplexPrimitiveShader.prototype.destroy=function(){this.gl.deleteProgram(this.program),this.uniforms=null,this.gl=null,this.attribute=null},n.WebGLGraphics=function(){},n.WebGLGraphics.renderGraphics=function(e,t){var r,i=t.gl,o=t.projection,s=t.offset,a=t.shaderManager.primitiveShader;e.dirty&&n.WebGLGraphics.updateGraphics(e,i);for(var h=e._webGL[i.id],c=0;c<h.data.length;c++)1===h.data[c].mode?(r=h.data[c],t.stencilManager.pushStencil(e,r,t),i.drawElements(i.TRIANGLE_FAN,4,i.UNSIGNED_SHORT,2*(r.indices.length-4)),t.stencilManager.popStencil(e,r,t)):(r=h.data[c],t.shaderManager.setShader(a),a=t.shaderManager.primitiveShader,i.uniformMatrix3fv(a.translationMatrix,!1,e.worldTransform.toArray(!0)),i.uniform1f(a.flipY,1),i.uniform2f(a.projectionVector,o.x,-o.y),i.uniform2f(a.offsetVector,-s.x,-s.y),i.uniform3fv(a.tintColor,n.hex2rgb(e.tint)),i.uniform1f(a.alpha,e.worldAlpha),i.bindBuffer(i.ARRAY_BUFFER,r.buffer),i.vertexAttribPointer(a.aVertexPosition,2,i.FLOAT,!1,24,0),i.vertexAttribPointer(a.colorAttribute,4,i.FLOAT,!1,24,8),i.bindBuffer(i.ELEMENT_ARRAY_BUFFER,r.indexBuffer),i.drawElements(i.TRIANGLE_STRIP,r.indices.length,i.UNSIGNED_SHORT,0))},n.WebGLGraphics.updateGraphics=function(e,t){var r=e._webGL[t.id];r||(r=e._webGL[t.id]={lastIndex:0,data:[],gl:t}),e.dirty=!1;var i;if(e.clearDirty){for(e.clearDirty=!1,i=0;i<r.data.length;i++){var o=r.data[i];o.reset(),n.WebGLGraphics.graphicsDataPool.push(o)}r.data=[],r.lastIndex=0}var s;for(i=r.lastIndex;i<e.graphicsData.length;i++){var a=e.graphicsData[i];if(a.type===n.Graphics.POLY){if(a.points=a.shape.points.slice(),a.shape.closed&&(a.points[0]!==a.points[a.points.length-2]||a.points[1]!==a.points[a.points.length-1])&&a.points.push(a.points[0],a.points[1]),a.fill&&a.points.length>=6)if(a.points.length<12){s=n.WebGLGraphics.switchMode(r,0);var h=n.WebGLGraphics.buildPoly(a,s);h||(s=n.WebGLGraphics.switchMode(r,1),n.WebGLGraphics.buildComplexPoly(a,s))}else s=n.WebGLGraphics.switchMode(r,1),n.WebGLGraphics.buildComplexPoly(a,s);a.lineWidth>0&&(s=n.WebGLGraphics.switchMode(r,0),n.WebGLGraphics.buildLine(a,s))}else s=n.WebGLGraphics.switchMode(r,0),a.type===n.Graphics.RECT?n.WebGLGraphics.buildRectangle(a,s):a.type===n.Graphics.CIRC||a.type===n.Graphics.ELIP?n.WebGLGraphics.buildCircle(a,s):a.type===n.Graphics.RREC&&n.WebGLGraphics.buildRoundedRectangle(a,s);r.lastIndex++}for(i=0;i<r.data.length;i++)s=r.data[i],s.dirty&&s.upload()},n.WebGLGraphics.switchMode=function(e,t){var r;return e.data.length?(r=e.data[e.data.length-1],(r.mode!==t||1===t)&&(r=n.WebGLGraphics.graphicsDataPool.pop()||new n.WebGLGraphicsData(e.gl),r.mode=t,e.data.push(r))):(r=n.WebGLGraphics.graphicsDataPool.pop()||new n.WebGLGraphicsData(e.gl),r.mode=t,e.data.push(r)),r.dirty=!0,r},n.WebGLGraphics.buildRectangle=function(e,t){var r=e.shape,i=r.x,o=r.y,s=r.width,a=r.height;if(e.fill){var h=n.hex2rgb(e.fillColor),c=e.fillAlpha,u=h[0]*c,f=h[1]*c,d=h[2]*c,l=t.points,p=t.indices,b=l.length/6;l.push(i,o),l.push(u,f,d,c),l.push(i+s,o),l.push(u,f,d,c),l.push(i,o+a),l.push(u,f,d,c),l.push(i+s,o+a),l.push(u,f,d,c),p.push(b,b,b+1,b+2,b+3,b+3)}if(e.lineWidth){var g=e.points;e.points=[i,o,i+s,o,i+s,o+a,i,o+a,i,o],n.WebGLGraphics.buildLine(e,t),e.points=g}},n.WebGLGraphics.buildRoundedRectangle=function(e,t){var r=e.shape,i=r.x,o=r.y,s=r.width,a=r.height,h=r.radius,c=[];if(c.push(i,o+h),c=c.concat(n.WebGLGraphics.quadraticBezierCurve(i,o+a-h,i,o+a,i+h,o+a)),c=c.concat(n.WebGLGraphics.quadraticBezierCurve(i+s-h,o+a,i+s,o+a,i+s,o+a-h)),c=c.concat(n.WebGLGraphics.quadraticBezierCurve(i+s,o+h,i+s,o,i+s-h,o)),c=c.concat(n.WebGLGraphics.quadraticBezierCurve(i+h,o,i,o,i,o+h)),e.fill){var u=n.hex2rgb(e.fillColor),f=e.fillAlpha,d=u[0]*f,l=u[1]*f,p=u[2]*f,b=t.points,g=t.indices,m=b.length/6,v=n.PolyK.Triangulate(c),y=0;for(y=0;y<v.length;y+=3)g.push(v[y]+m),g.push(v[y]+m),g.push(v[y+1]+m),g.push(v[y+2]+m),g.push(v[y+2]+m);for(y=0;y<c.length;y++)b.push(c[y],c[++y],d,l,p,f)}if(e.lineWidth){var w=e.points;e.points=c,n.WebGLGraphics.buildLine(e,t),e.points=w}},n.WebGLGraphics.quadraticBezierCurve=function(e,t,r,n,i,o){function s(e,t,r){var n=t-e;return e+n*r}for(var a,h,c,u,f,d,l=20,p=[],b=0,g=0;l>=g;g++)b=g/l,a=s(e,r,b),h=s(t,n,b),c=s(r,i,b),u=s(n,o,b),f=s(a,c,b),d=s(h,u,b),p.push(f,d);return p},n.WebGLGraphics.buildCircle=function(e,t){var r,i,o=e.shape,s=o.x,a=o.y;e.type===n.Graphics.CIRC?(r=o.radius,i=o.radius):(r=o.width,i=o.height);var h=40,c=2*Math.PI/h,u=0;if(e.fill){var f=n.hex2rgb(e.fillColor),d=e.fillAlpha,l=f[0]*d,p=f[1]*d,b=f[2]*d,g=t.points,m=t.indices,v=g.length/6;for(m.push(v),u=0;h+1>u;u++)g.push(s,a,l,p,b,d),g.push(s+Math.sin(c*u)*r,a+Math.cos(c*u)*i,l,p,b,d),m.push(v++,v++);m.push(v-1)}if(e.lineWidth){var y=e.points;for(e.points=[],u=0;h+1>u;u++)e.points.push(s+Math.sin(c*u)*r,a+Math.cos(c*u)*i);n.WebGLGraphics.buildLine(e,t),e.points=y}},n.WebGLGraphics.buildLine=function(e,t){var r=0,i=e.points;if(0!==i.length){if(e.lineWidth%2)for(r=0;r<i.length;r++)i[r]+=.5;var o=new n.Point(i[0],i[1]),s=new n.Point(i[i.length-2],i[i.length-1]);if(o.x===s.x&&o.y===s.y){i=i.slice(),i.pop(),i.pop(),s=new n.Point(i[i.length-2],i[i.length-1]);var a=s.x+.5*(o.x-s.x),h=s.y+.5*(o.y-s.y);i.unshift(a,h),i.push(a,h)}var c,u,f,d,l,p,b,g,m,v,y,w,_,x,S,T,A,E,C,k,R,M,B,I=t.points,j=t.indices,P=i.length/2,L=i.length,O=I.length/6,D=e.lineWidth/2,F=n.hex2rgb(e.lineColor),U=e.lineAlpha,N=F[0]*U,G=F[1]*U,W=F[2]*U;for(f=i[0],d=i[1],l=i[2],p=i[3],m=-(d-p),v=f-l,B=Math.sqrt(m*m+v*v),m/=B,v/=B,m*=D,v*=D,I.push(f-m,d-v,N,G,W,U),I.push(f+m,d+v,N,G,W,U),r=1;P-1>r;r++)f=i[2*(r-1)],d=i[2*(r-1)+1],l=i[2*r],p=i[2*r+1],b=i[2*(r+1)],g=i[2*(r+1)+1],m=-(d-p),v=f-l,B=Math.sqrt(m*m+v*v),m/=B,v/=B,m*=D,v*=D,y=-(p-g),w=l-b,B=Math.sqrt(y*y+w*w),y/=B,w/=B,y*=D,w*=D,S=-v+d-(-v+p),T=-m+l-(-m+f),A=(-m+f)*(-v+p)-(-m+l)*(-v+d),E=-w+g-(-w+p),C=-y+l-(-y+b),k=(-y+b)*(-w+p)-(-y+l)*(-w+g),R=S*C-E*T,Math.abs(R)<.1?(R+=10.1,I.push(l-m,p-v,N,G,W,U),I.push(l+m,p+v,N,G,W,U)):(c=(T*k-C*A)/R,u=(E*A-S*k)/R,M=(c-l)*(c-l)+(u-p)+(u-p),M>19600?(_=m-y,x=v-w,B=Math.sqrt(_*_+x*x),_/=B,x/=B,_*=D,x*=D,I.push(l-_,p-x),I.push(N,G,W,U),I.push(l+_,p+x),I.push(N,G,W,U),I.push(l-_,p-x),I.push(N,G,W,U),L++):(I.push(c,u),I.push(N,G,W,U),I.push(l-(c-l),p-(u-p)),I.push(N,G,W,U)));for(f=i[2*(P-2)],d=i[2*(P-2)+1],l=i[2*(P-1)],p=i[2*(P-1)+1],m=-(d-p),v=f-l,B=Math.sqrt(m*m+v*v),m/=B,v/=B,m*=D,v*=D,I.push(l-m,p-v),I.push(N,G,W,U),I.push(l+m,p+v),I.push(N,G,W,U),j.push(O),r=0;L>r;r++)j.push(O++);j.push(O-1)}},n.WebGLGraphics.buildComplexPoly=function(e,t){var r=e.points.slice();if(!(r.length<6)){var i=t.indices;t.points=r,t.alpha=e.fillAlpha,t.color=n.hex2rgb(e.fillColor);for(var o,s,a=1/0,h=-1/0,c=1/0,u=-1/0,f=0;f<r.length;f+=2)o=r[f],s=r[f+1],a=a>o?o:a,h=o>h?o:h,c=c>s?s:c,u=s>u?s:u;r.push(a,c,h,c,h,u,a,u);var d=r.length/2;for(f=0;d>f;f++)i.push(f)}},n.WebGLGraphics.buildPoly=function(e,t){var r=e.points;if(!(r.length<6)){var i=t.points,o=t.indices,s=r.length/2,a=n.hex2rgb(e.fillColor),h=e.fillAlpha,c=a[0]*h,u=a[1]*h,f=a[2]*h,d=n.PolyK.Triangulate(r);if(!d)return!1;var l=i.length/6,p=0;for(p=0;p<d.length;p+=3)o.push(d[p]+l),o.push(d[p]+l),o.push(d[p+1]+l),o.push(d[p+2]+l),o.push(d[p+2]+l);for(p=0;s>p;p++)i.push(r[2*p],r[2*p+1],c,u,f,h);return!0}},n.WebGLGraphics.graphicsDataPool=[],n.WebGLGraphicsData=function(e){this.gl=e,this.color=[0,0,0],this.points=[],this.indices=[],this.buffer=e.createBuffer(),this.indexBuffer=e.createBuffer(),this.mode=1,this.alpha=1,this.dirty=!0},n.WebGLGraphicsData.prototype.reset=function(){this.points=[],this.indices=[]},n.WebGLGraphicsData.prototype.upload=function(){var e=this.gl;this.glPoints=new n.Float32Array(this.points),e.bindBuffer(e.ARRAY_BUFFER,this.buffer),e.bufferData(e.ARRAY_BUFFER,this.glPoints,e.STATIC_DRAW),this.glIndicies=new n.Uint16Array(this.indices),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,this.indexBuffer),e.bufferData(e.ELEMENT_ARRAY_BUFFER,this.glIndicies,e.STATIC_DRAW),this.dirty=!1},n.glContexts=[],n.instances=[],n.WebGLRenderer=function(e,t,r){if(r)for(var i in n.defaultRenderOptions)"undefined"==typeof r[i]&&(r[i]=n.defaultRenderOptions[i]);else r=n.defaultRenderOptions;n.defaultRenderer||(n.sayHello("webGL"),n.defaultRenderer=this),this.type=n.WEBGL_RENDERER,this.resolution=r.resolution,this.transparent=r.transparent,this.autoResize=r.autoResize||!1,this.preserveDrawingBuffer=r.preserveDrawingBuffer,this.clearBeforeRender=r.clearBeforeRender,this.width=e||800,this.height=t||600,this.view=r.view||document.createElement("canvas"),this.contextLostBound=this.handleContextLost.bind(this),this.contextRestoredBound=this.handleContextRestored.bind(this),this.view.addEventListener("webglcontextlost",this.contextLostBound,!1),this.view.addEventListener("webglcontextrestored",this.contextRestoredBound,!1),this._contextOptions={alpha:this.transparent,antialias:r.antialias,premultipliedAlpha:this.transparent&&"notMultiplied"!==this.transparent,stencil:!0,preserveDrawingBuffer:r.preserveDrawingBuffer},this.projection=new n.Point,this.offset=new n.Point(0,0),this.shaderManager=new n.WebGLShaderManager,this.spriteBatch=new n.WebGLSpriteBatch,this.maskManager=new n.WebGLMaskManager,this.filterManager=new n.WebGLFilterManager,this.stencilManager=new n.WebGLStencilManager,this.blendModeManager=new n.WebGLBlendModeManager,this.renderSession={},this.renderSession.gl=this.gl,this.renderSession.drawCount=0,this.renderSession.shaderManager=this.shaderManager,this.renderSession.maskManager=this.maskManager,this.renderSession.filterManager=this.filterManager,this.renderSession.blendModeManager=this.blendModeManager,this.renderSession.spriteBatch=this.spriteBatch,this.renderSession.stencilManager=this.stencilManager,this.renderSession.renderer=this,this.renderSession.resolution=this.resolution,this.initContext(),this.mapBlendModes()},n.WebGLRenderer.prototype.constructor=n.WebGLRenderer,n.WebGLRenderer.prototype.initContext=function(){var e=this.view.getContext("webgl",this._contextOptions)||this.view.getContext("experimental-webgl",this._contextOptions);if(this.gl=e,!e)throw new Error("This browser does not support webGL. Try using the canvas renderer");this.glContextId=e.id=n.WebGLRenderer.glContextId++,n.glContexts[this.glContextId]=e,n.instances[this.glContextId]=this,e.disable(e.DEPTH_TEST),e.disable(e.CULL_FACE),e.enable(e.BLEND),this.shaderManager.setContext(e),this.spriteBatch.setContext(e),this.maskManager.setContext(e),this.filterManager.setContext(e),this.blendModeManager.setContext(e),this.stencilManager.setContext(e),this.renderSession.gl=this.gl,this.resize(this.width,this.height)},n.WebGLRenderer.prototype.render=function(e){if(!this.contextLost){this.__stage!==e&&(e.interactive&&e.interactionManager.removeEvents(),this.__stage=e),e.updateTransform();var t=this.gl;e._interactive?e._interactiveEventsAdded||(e._interactiveEventsAdded=!0,e.interactionManager.setTarget(this)):e._interactiveEventsAdded&&(e._interactiveEventsAdded=!1,e.interactionManager.setTarget(this)),t.viewport(0,0,this.width,this.height),t.bindFramebuffer(t.FRAMEBUFFER,null),this.clearBeforeRender&&(this.transparent?t.clearColor(0,0,0,0):t.clearColor(e.backgroundColorSplit[0],e.backgroundColorSplit[1],e.backgroundColorSplit[2],1),t.clear(t.COLOR_BUFFER_BIT)),this.renderDisplayObject(e,this.projection)}},n.WebGLRenderer.prototype.renderDisplayObject=function(e,t,r){this.renderSession.blendModeManager.setBlendMode(n.blendModes.NORMAL),this.renderSession.drawCount=0,this.renderSession.flipY=r?-1:1,this.renderSession.projection=t,this.renderSession.offset=this.offset,this.spriteBatch.begin(this.renderSession),this.filterManager.begin(this.renderSession,r),e._renderWebGL(this.renderSession),this.spriteBatch.end()},n.WebGLRenderer.prototype.resize=function(e,t){this.width=e*this.resolution,this.height=t*this.resolution,this.view.width=this.width,this.view.height=this.height,this.autoResize&&(this.view.style.width=this.width/this.resolution+"px",this.view.style.height=this.height/this.resolution+"px"),this.gl.viewport(0,0,this.width,this.height),this.projection.x=this.width/2/this.resolution,this.projection.y=-this.height/2/this.resolution},n.WebGLRenderer.prototype.updateTexture=function(e){if(e.hasLoaded){var t=this.gl;return e._glTextures[t.id]||(e._glTextures[t.id]=t.createTexture()),t.bindTexture(t.TEXTURE_2D,e._glTextures[t.id]),t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,e.premultipliedAlpha),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,e.source),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,e.scaleMode===n.scaleModes.LINEAR?t.LINEAR:t.NEAREST),e.mipmap&&n.isPowerOfTwo(e.width,e.height)?(t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,e.scaleMode===n.scaleModes.LINEAR?t.LINEAR_MIPMAP_LINEAR:t.NEAREST_MIPMAP_NEAREST),t.generateMipmap(t.TEXTURE_2D)):t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,e.scaleMode===n.scaleModes.LINEAR?t.LINEAR:t.NEAREST),e._powerOf2?(t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.REPEAT),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.REPEAT)):(t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE)),e._dirty[t.id]=!1,e._glTextures[t.id]}},n.WebGLRenderer.prototype.handleContextLost=function(e){e.preventDefault(),this.contextLost=!0},n.WebGLRenderer.prototype.handleContextRestored=function(){this.initContext();for(var e in n.TextureCache){var t=n.TextureCache[e].baseTexture;t._glTextures=[]}this.contextLost=!1},n.WebGLRenderer.prototype.destroy=function(){this.view.removeEventListener("webglcontextlost",this.contextLostBound),this.view.removeEventListener("webglcontextrestored",this.contextRestoredBound),n.glContexts[this.glContextId]=null,this.projection=null,this.offset=null,this.shaderManager.destroy(),this.spriteBatch.destroy(),this.maskManager.destroy(),this.filterManager.destroy(),this.shaderManager=null,this.spriteBatch=null,this.maskManager=null,this.filterManager=null,this.gl=null,this.renderSession=null},n.WebGLRenderer.prototype.mapBlendModes=function(){var e=this.gl;n.blendModesWebGL||(n.blendModesWebGL=[],n.blendModesWebGL[n.blendModes.NORMAL]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],n.blendModesWebGL[n.blendModes.ADD]=[e.SRC_ALPHA,e.DST_ALPHA],n.blendModesWebGL[n.blendModes.MULTIPLY]=[e.DST_COLOR,e.ONE_MINUS_SRC_ALPHA],n.blendModesWebGL[n.blendModes.SCREEN]=[e.SRC_ALPHA,e.ONE],n.blendModesWebGL[n.blendModes.OVERLAY]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],n.blendModesWebGL[n.blendModes.DARKEN]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],n.blendModesWebGL[n.blendModes.LIGHTEN]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],n.blendModesWebGL[n.blendModes.COLOR_DODGE]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],n.blendModesWebGL[n.blendModes.COLOR_BURN]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],n.blendModesWebGL[n.blendModes.HARD_LIGHT]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],n.blendModesWebGL[n.blendModes.SOFT_LIGHT]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],n.blendModesWebGL[n.blendModes.DIFFERENCE]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],n.blendModesWebGL[n.blendModes.EXCLUSION]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],n.blendModesWebGL[n.blendModes.HUE]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],n.blendModesWebGL[n.blendModes.SATURATION]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],n.blendModesWebGL[n.blendModes.COLOR]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],n.blendModesWebGL[n.blendModes.LUMINOSITY]=[e.ONE,e.ONE_MINUS_SRC_ALPHA])
},n.WebGLRenderer.glContextId=0,n.WebGLBlendModeManager=function(){this.currentBlendMode=99999},n.WebGLBlendModeManager.prototype.constructor=n.WebGLBlendModeManager,n.WebGLBlendModeManager.prototype.setContext=function(e){this.gl=e},n.WebGLBlendModeManager.prototype.setBlendMode=function(e){if(this.currentBlendMode===e)return!1;this.currentBlendMode=e;var t=n.blendModesWebGL[this.currentBlendMode];return this.gl.blendFunc(t[0],t[1]),!0},n.WebGLBlendModeManager.prototype.destroy=function(){this.gl=null},n.WebGLMaskManager=function(){},n.WebGLMaskManager.prototype.constructor=n.WebGLMaskManager,n.WebGLMaskManager.prototype.setContext=function(e){this.gl=e},n.WebGLMaskManager.prototype.pushMask=function(e,t){var r=t.gl;e.dirty&&n.WebGLGraphics.updateGraphics(e,r),e._webGL[r.id].data.length&&t.stencilManager.pushStencil(e,e._webGL[r.id].data[0],t)},n.WebGLMaskManager.prototype.popMask=function(e,t){var r=this.gl;t.stencilManager.popStencil(e,e._webGL[r.id].data[0],t)},n.WebGLMaskManager.prototype.destroy=function(){this.gl=null},n.WebGLStencilManager=function(){this.stencilStack=[],this.reverse=!0,this.count=0},n.WebGLStencilManager.prototype.setContext=function(e){this.gl=e},n.WebGLStencilManager.prototype.pushStencil=function(e,t,r){var n=this.gl;this.bindGraphics(e,t,r),0===this.stencilStack.length&&(n.enable(n.STENCIL_TEST),n.clear(n.STENCIL_BUFFER_BIT),this.reverse=!0,this.count=0),this.stencilStack.push(t);var i=this.count;n.colorMask(!1,!1,!1,!1),n.stencilFunc(n.ALWAYS,0,255),n.stencilOp(n.KEEP,n.KEEP,n.INVERT),1===t.mode?(n.drawElements(n.TRIANGLE_FAN,t.indices.length-4,n.UNSIGNED_SHORT,0),this.reverse?(n.stencilFunc(n.EQUAL,255-i,255),n.stencilOp(n.KEEP,n.KEEP,n.DECR)):(n.stencilFunc(n.EQUAL,i,255),n.stencilOp(n.KEEP,n.KEEP,n.INCR)),n.drawElements(n.TRIANGLE_FAN,4,n.UNSIGNED_SHORT,2*(t.indices.length-4)),this.reverse?n.stencilFunc(n.EQUAL,255-(i+1),255):n.stencilFunc(n.EQUAL,i+1,255),this.reverse=!this.reverse):(this.reverse?(n.stencilFunc(n.EQUAL,i,255),n.stencilOp(n.KEEP,n.KEEP,n.INCR)):(n.stencilFunc(n.EQUAL,255-i,255),n.stencilOp(n.KEEP,n.KEEP,n.DECR)),n.drawElements(n.TRIANGLE_STRIP,t.indices.length,n.UNSIGNED_SHORT,0),this.reverse?n.stencilFunc(n.EQUAL,i+1,255):n.stencilFunc(n.EQUAL,255-(i+1),255)),n.colorMask(!0,!0,!0,!0),n.stencilOp(n.KEEP,n.KEEP,n.KEEP),this.count++},n.WebGLStencilManager.prototype.bindGraphics=function(e,t,r){this._currentGraphics=e;var i,o=this.gl,s=r.projection,a=r.offset;1===t.mode?(i=r.shaderManager.complexPrimitiveShader,r.shaderManager.setShader(i),o.uniform1f(i.flipY,r.flipY),o.uniformMatrix3fv(i.translationMatrix,!1,e.worldTransform.toArray(!0)),o.uniform2f(i.projectionVector,s.x,-s.y),o.uniform2f(i.offsetVector,-a.x,-a.y),o.uniform3fv(i.tintColor,n.hex2rgb(e.tint)),o.uniform3fv(i.color,t.color),o.uniform1f(i.alpha,e.worldAlpha*t.alpha),o.bindBuffer(o.ARRAY_BUFFER,t.buffer),o.vertexAttribPointer(i.aVertexPosition,2,o.FLOAT,!1,8,0),o.bindBuffer(o.ELEMENT_ARRAY_BUFFER,t.indexBuffer)):(i=r.shaderManager.primitiveShader,r.shaderManager.setShader(i),o.uniformMatrix3fv(i.translationMatrix,!1,e.worldTransform.toArray(!0)),o.uniform1f(i.flipY,r.flipY),o.uniform2f(i.projectionVector,s.x,-s.y),o.uniform2f(i.offsetVector,-a.x,-a.y),o.uniform3fv(i.tintColor,n.hex2rgb(e.tint)),o.uniform1f(i.alpha,e.worldAlpha),o.bindBuffer(o.ARRAY_BUFFER,t.buffer),o.vertexAttribPointer(i.aVertexPosition,2,o.FLOAT,!1,24,0),o.vertexAttribPointer(i.colorAttribute,4,o.FLOAT,!1,24,8),o.bindBuffer(o.ELEMENT_ARRAY_BUFFER,t.indexBuffer))},n.WebGLStencilManager.prototype.popStencil=function(e,t,r){var n=this.gl;if(this.stencilStack.pop(),this.count--,0===this.stencilStack.length)n.disable(n.STENCIL_TEST);else{var i=this.count;this.bindGraphics(e,t,r),n.colorMask(!1,!1,!1,!1),1===t.mode?(this.reverse=!this.reverse,this.reverse?(n.stencilFunc(n.EQUAL,255-(i+1),255),n.stencilOp(n.KEEP,n.KEEP,n.INCR)):(n.stencilFunc(n.EQUAL,i+1,255),n.stencilOp(n.KEEP,n.KEEP,n.DECR)),n.drawElements(n.TRIANGLE_FAN,4,n.UNSIGNED_SHORT,2*(t.indices.length-4)),n.stencilFunc(n.ALWAYS,0,255),n.stencilOp(n.KEEP,n.KEEP,n.INVERT),n.drawElements(n.TRIANGLE_FAN,t.indices.length-4,n.UNSIGNED_SHORT,0),this.reverse?n.stencilFunc(n.EQUAL,i,255):n.stencilFunc(n.EQUAL,255-i,255)):(this.reverse?(n.stencilFunc(n.EQUAL,i+1,255),n.stencilOp(n.KEEP,n.KEEP,n.DECR)):(n.stencilFunc(n.EQUAL,255-(i+1),255),n.stencilOp(n.KEEP,n.KEEP,n.INCR)),n.drawElements(n.TRIANGLE_STRIP,t.indices.length,n.UNSIGNED_SHORT,0),this.reverse?n.stencilFunc(n.EQUAL,i,255):n.stencilFunc(n.EQUAL,255-i,255)),n.colorMask(!0,!0,!0,!0),n.stencilOp(n.KEEP,n.KEEP,n.KEEP)}},n.WebGLStencilManager.prototype.destroy=function(){this.stencilStack=null,this.gl=null},n.WebGLShaderManager=function(){this.maxAttibs=10,this.attribState=[],this.tempAttribState=[];for(var e=0;e<this.maxAttibs;e++)this.attribState[e]=!1;this.stack=[]},n.WebGLShaderManager.prototype.constructor=n.WebGLShaderManager,n.WebGLShaderManager.prototype.setContext=function(e){this.gl=e,this.primitiveShader=new n.PrimitiveShader(e),this.complexPrimitiveShader=new n.ComplexPrimitiveShader(e),this.defaultShader=new n.PixiShader(e),this.fastShader=new n.PixiFastShader(e),this.stripShader=new n.StripShader(e),this.setShader(this.defaultShader)},n.WebGLShaderManager.prototype.setAttribs=function(e){var t;for(t=0;t<this.tempAttribState.length;t++)this.tempAttribState[t]=!1;for(t=0;t<e.length;t++){var r=e[t];this.tempAttribState[r]=!0}var n=this.gl;for(t=0;t<this.attribState.length;t++)this.attribState[t]!==this.tempAttribState[t]&&(this.attribState[t]=this.tempAttribState[t],this.tempAttribState[t]?n.enableVertexAttribArray(t):n.disableVertexAttribArray(t))},n.WebGLShaderManager.prototype.setShader=function(e){return this._currentId===e._UID?!1:(this._currentId=e._UID,this.currentShader=e,this.gl.useProgram(e.program),this.setAttribs(e.attributes),!0)},n.WebGLShaderManager.prototype.destroy=function(){this.attribState=null,this.tempAttribState=null,this.primitiveShader.destroy(),this.complexPrimitiveShader.destroy(),this.defaultShader.destroy(),this.fastShader.destroy(),this.stripShader.destroy(),this.gl=null},n.WebGLSpriteBatch=function(){this.vertSize=5,this.size=2e3;var e=4*this.size*4*this.vertSize,t=6*this.size;this.vertices=new n.ArrayBuffer(e),this.positions=new n.Float32Array(this.vertices),this.colors=new n.Uint32Array(this.vertices),this.indices=new n.Uint16Array(t),this.lastIndexCount=0;for(var r=0,i=0;t>r;r+=6,i+=4)this.indices[r+0]=i+0,this.indices[r+1]=i+1,this.indices[r+2]=i+2,this.indices[r+3]=i+0,this.indices[r+4]=i+2,this.indices[r+5]=i+3;this.drawing=!1,this.currentBatchSize=0,this.currentBaseTexture=null,this.dirty=!0,this.textures=[],this.blendModes=[],this.shaders=[],this.sprites=[],this.defaultShader=new n.AbstractFilter(["precision lowp float;","varying vec2 vTextureCoord;","varying vec4 vColor;","uniform sampler2D uSampler;","void main(void) {","   gl_FragColor = texture2D(uSampler, vTextureCoord) * vColor ;","}"])},n.WebGLSpriteBatch.prototype.setContext=function(e){this.gl=e,this.vertexBuffer=e.createBuffer(),this.indexBuffer=e.createBuffer(),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,this.indexBuffer),e.bufferData(e.ELEMENT_ARRAY_BUFFER,this.indices,e.STATIC_DRAW),e.bindBuffer(e.ARRAY_BUFFER,this.vertexBuffer),e.bufferData(e.ARRAY_BUFFER,this.vertices,e.DYNAMIC_DRAW),this.currentBlendMode=99999;var t=new n.PixiShader(e);t.fragmentSrc=this.defaultShader.fragmentSrc,t.uniforms={},t.init(),this.defaultShader.shaders[e.id]=t},n.WebGLSpriteBatch.prototype.begin=function(e){this.renderSession=e,this.shader=this.renderSession.shaderManager.defaultShader,this.start()},n.WebGLSpriteBatch.prototype.end=function(){this.flush()},n.WebGLSpriteBatch.prototype.render=function(e){var t=e.texture;this.currentBatchSize>=this.size&&(this.flush(),this.currentBaseTexture=t.baseTexture);var r=t._uvs;if(r){var n,i,o,s,a=e.anchor.x,h=e.anchor.y;if(t.trim){var c=t.trim;i=c.x-a*c.width,n=i+t.crop.width,s=c.y-h*c.height,o=s+t.crop.height}else n=t.frame.width*(1-a),i=t.frame.width*-a,o=t.frame.height*(1-h),s=t.frame.height*-h;var u=4*this.currentBatchSize*this.vertSize,f=t.baseTexture.resolution,d=e.worldTransform,l=d.a/f,p=d.b/f,b=d.c/f,g=d.d/f,m=d.tx,v=d.ty,y=this.colors,w=this.positions;this.renderSession.roundPixels?(w[u]=l*i+b*s+m|0,w[u+1]=g*s+p*i+v|0,w[u+5]=l*n+b*s+m|0,w[u+6]=g*s+p*n+v|0,w[u+10]=l*n+b*o+m|0,w[u+11]=g*o+p*n+v|0,w[u+15]=l*i+b*o+m|0,w[u+16]=g*o+p*i+v|0):(w[u]=l*i+b*s+m,w[u+1]=g*s+p*i+v,w[u+5]=l*n+b*s+m,w[u+6]=g*s+p*n+v,w[u+10]=l*n+b*o+m,w[u+11]=g*o+p*n+v,w[u+15]=l*i+b*o+m,w[u+16]=g*o+p*i+v),w[u+2]=r.x0,w[u+3]=r.y0,w[u+7]=r.x1,w[u+8]=r.y1,w[u+12]=r.x2,w[u+13]=r.y2,w[u+17]=r.x3,w[u+18]=r.y3;var _=e.tint;y[u+4]=y[u+9]=y[u+14]=y[u+19]=(_>>16)+(65280&_)+((255&_)<<16)+(255*e.worldAlpha<<24),this.sprites[this.currentBatchSize++]=e}},n.WebGLSpriteBatch.prototype.renderTilingSprite=function(e){var t=e.tilingTexture;this.currentBatchSize>=this.size&&(this.flush(),this.currentBaseTexture=t.baseTexture),e._uvs||(e._uvs=new n.TextureUvs);var r=e._uvs;e.tilePosition.x%=t.baseTexture.width*e.tileScaleOffset.x,e.tilePosition.y%=t.baseTexture.height*e.tileScaleOffset.y;var i=e.tilePosition.x/(t.baseTexture.width*e.tileScaleOffset.x),o=e.tilePosition.y/(t.baseTexture.height*e.tileScaleOffset.y),s=e.width/t.baseTexture.width/(e.tileScale.x*e.tileScaleOffset.x),a=e.height/t.baseTexture.height/(e.tileScale.y*e.tileScaleOffset.y);r.x0=0-i,r.y0=0-o,r.x1=1*s-i,r.y1=0-o,r.x2=1*s-i,r.y2=1*a-o,r.x3=0-i,r.y3=1*a-o;var h=e.tint,c=(h>>16)+(65280&h)+((255&h)<<16)+(255*e.alpha<<24),u=this.positions,f=this.colors,d=e.width,l=e.height,p=e.anchor.x,b=e.anchor.y,g=d*(1-p),m=d*-p,v=l*(1-b),y=l*-b,w=4*this.currentBatchSize*this.vertSize,_=t.baseTexture.resolution,x=e.worldTransform,S=x.a/_,T=x.b/_,A=x.c/_,E=x.d/_,C=x.tx,k=x.ty;u[w++]=S*m+A*y+C,u[w++]=E*y+T*m+k,u[w++]=r.x0,u[w++]=r.y0,f[w++]=c,u[w++]=S*g+A*y+C,u[w++]=E*y+T*g+k,u[w++]=r.x1,u[w++]=r.y1,f[w++]=c,u[w++]=S*g+A*v+C,u[w++]=E*v+T*g+k,u[w++]=r.x2,u[w++]=r.y2,f[w++]=c,u[w++]=S*m+A*v+C,u[w++]=E*v+T*m+k,u[w++]=r.x3,u[w++]=r.y3,f[w++]=c,this.sprites[this.currentBatchSize++]=e},n.WebGLSpriteBatch.prototype.flush=function(){if(0!==this.currentBatchSize){var e,t=this.gl;if(this.dirty){this.dirty=!1,t.activeTexture(t.TEXTURE0),t.bindBuffer(t.ARRAY_BUFFER,this.vertexBuffer),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this.indexBuffer),e=this.defaultShader.shaders[t.id];var r=4*this.vertSize;t.vertexAttribPointer(e.aVertexPosition,2,t.FLOAT,!1,r,0),t.vertexAttribPointer(e.aTextureCoord,2,t.FLOAT,!1,r,8),t.vertexAttribPointer(e.colorAttribute,4,t.UNSIGNED_BYTE,!0,r,16)}if(this.currentBatchSize>.5*this.size)t.bufferSubData(t.ARRAY_BUFFER,0,this.vertices);else{var i=this.positions.subarray(0,4*this.currentBatchSize*this.vertSize);t.bufferSubData(t.ARRAY_BUFFER,0,i)}for(var o,s,a,h,c=0,u=0,f=null,d=this.renderSession.blendModeManager.currentBlendMode,l=null,p=!1,b=!1,g=0,m=this.currentBatchSize;m>g;g++){if(h=this.sprites[g],o=h.texture.baseTexture,s=h.blendMode,a=h.shader||this.defaultShader,p=d!==s,b=l!==a,(f!==o||p||b)&&(this.renderBatch(f,c,u),u=g,c=0,f=o,p&&(d=s,this.renderSession.blendModeManager.setBlendMode(d)),b)){l=a,e=l.shaders[t.id],e||(e=new n.PixiShader(t),e.fragmentSrc=l.fragmentSrc,e.uniforms=l.uniforms,e.init(),l.shaders[t.id]=e),this.renderSession.shaderManager.setShader(e),e.dirty&&e.syncUniforms();var v=this.renderSession.projection;t.uniform2f(e.projectionVector,v.x,v.y);var y=this.renderSession.offset;t.uniform2f(e.offsetVector,y.x,y.y)}c++}this.renderBatch(f,c,u),this.currentBatchSize=0}},n.WebGLSpriteBatch.prototype.renderBatch=function(e,t,r){if(0!==t){var n=this.gl;e._dirty[n.id]?this.renderSession.renderer.updateTexture(e):n.bindTexture(n.TEXTURE_2D,e._glTextures[n.id]),n.drawElements(n.TRIANGLES,6*t,n.UNSIGNED_SHORT,6*r*2),this.renderSession.drawCount++}},n.WebGLSpriteBatch.prototype.stop=function(){this.flush(),this.dirty=!0},n.WebGLSpriteBatch.prototype.start=function(){this.dirty=!0},n.WebGLSpriteBatch.prototype.destroy=function(){this.vertices=null,this.indices=null,this.gl.deleteBuffer(this.vertexBuffer),this.gl.deleteBuffer(this.indexBuffer),this.currentBaseTexture=null,this.gl=null},n.WebGLFastSpriteBatch=function(e){this.vertSize=10,this.maxSize=6e3,this.size=this.maxSize;var t=4*this.size*this.vertSize,r=6*this.maxSize;this.vertices=new n.Float32Array(t),this.indices=new n.Uint16Array(r),this.vertexBuffer=null,this.indexBuffer=null,this.lastIndexCount=0;for(var i=0,o=0;r>i;i+=6,o+=4)this.indices[i+0]=o+0,this.indices[i+1]=o+1,this.indices[i+2]=o+2,this.indices[i+3]=o+0,this.indices[i+4]=o+2,this.indices[i+5]=o+3;this.drawing=!1,this.currentBatchSize=0,this.currentBaseTexture=null,this.currentBlendMode=0,this.renderSession=null,this.shader=null,this.matrix=null,this.setContext(e)},n.WebGLFastSpriteBatch.prototype.constructor=n.WebGLFastSpriteBatch,n.WebGLFastSpriteBatch.prototype.setContext=function(e){this.gl=e,this.vertexBuffer=e.createBuffer(),this.indexBuffer=e.createBuffer(),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,this.indexBuffer),e.bufferData(e.ELEMENT_ARRAY_BUFFER,this.indices,e.STATIC_DRAW),e.bindBuffer(e.ARRAY_BUFFER,this.vertexBuffer),e.bufferData(e.ARRAY_BUFFER,this.vertices,e.DYNAMIC_DRAW)},n.WebGLFastSpriteBatch.prototype.begin=function(e,t){this.renderSession=t,this.shader=this.renderSession.shaderManager.fastShader,this.matrix=e.worldTransform.toArray(!0),this.start()},n.WebGLFastSpriteBatch.prototype.end=function(){this.flush()},n.WebGLFastSpriteBatch.prototype.render=function(e){var t=e.children,r=t[0];if(r.texture._uvs){this.currentBaseTexture=r.texture.baseTexture,r.blendMode!==this.renderSession.blendModeManager.currentBlendMode&&(this.flush(),this.renderSession.blendModeManager.setBlendMode(r.blendMode));for(var n=0,i=t.length;i>n;n++)this.renderSprite(t[n]);this.flush()}},n.WebGLFastSpriteBatch.prototype.renderSprite=function(e){if(e.visible&&(e.texture.baseTexture===this.currentBaseTexture||(this.flush(),this.currentBaseTexture=e.texture.baseTexture,e.texture._uvs))){var t,r,n,i,o,s,a,h,c=this.vertices;if(t=e.texture._uvs,r=e.texture.frame.width,n=e.texture.frame.height,e.texture.trim){var u=e.texture.trim;o=u.x-e.anchor.x*u.width,i=o+e.texture.crop.width,a=u.y-e.anchor.y*u.height,s=a+e.texture.crop.height}else i=e.texture.frame.width*(1-e.anchor.x),o=e.texture.frame.width*-e.anchor.x,s=e.texture.frame.height*(1-e.anchor.y),a=e.texture.frame.height*-e.anchor.y;h=4*this.currentBatchSize*this.vertSize,c[h++]=o,c[h++]=a,c[h++]=e.position.x,c[h++]=e.position.y,c[h++]=e.scale.x,c[h++]=e.scale.y,c[h++]=e.rotation,c[h++]=t.x0,c[h++]=t.y1,c[h++]=e.alpha,c[h++]=i,c[h++]=a,c[h++]=e.position.x,c[h++]=e.position.y,c[h++]=e.scale.x,c[h++]=e.scale.y,c[h++]=e.rotation,c[h++]=t.x1,c[h++]=t.y1,c[h++]=e.alpha,c[h++]=i,c[h++]=s,c[h++]=e.position.x,c[h++]=e.position.y,c[h++]=e.scale.x,c[h++]=e.scale.y,c[h++]=e.rotation,c[h++]=t.x2,c[h++]=t.y2,c[h++]=e.alpha,c[h++]=o,c[h++]=s,c[h++]=e.position.x,c[h++]=e.position.y,c[h++]=e.scale.x,c[h++]=e.scale.y,c[h++]=e.rotation,c[h++]=t.x3,c[h++]=t.y3,c[h++]=e.alpha,this.currentBatchSize++,this.currentBatchSize>=this.size&&this.flush()}},n.WebGLFastSpriteBatch.prototype.flush=function(){if(0!==this.currentBatchSize){var e=this.gl;if(this.currentBaseTexture._glTextures[e.id]||this.renderSession.renderer.updateTexture(this.currentBaseTexture,e),e.bindTexture(e.TEXTURE_2D,this.currentBaseTexture._glTextures[e.id]),this.currentBatchSize>.5*this.size)e.bufferSubData(e.ARRAY_BUFFER,0,this.vertices);else{var t=this.vertices.subarray(0,4*this.currentBatchSize*this.vertSize);e.bufferSubData(e.ARRAY_BUFFER,0,t)}e.drawElements(e.TRIANGLES,6*this.currentBatchSize,e.UNSIGNED_SHORT,0),this.currentBatchSize=0,this.renderSession.drawCount++}},n.WebGLFastSpriteBatch.prototype.stop=function(){this.flush()},n.WebGLFastSpriteBatch.prototype.start=function(){var e=this.gl;e.activeTexture(e.TEXTURE0),e.bindBuffer(e.ARRAY_BUFFER,this.vertexBuffer),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,this.indexBuffer);var t=this.renderSession.projection;e.uniform2f(this.shader.projectionVector,t.x,t.y),e.uniformMatrix3fv(this.shader.uMatrix,!1,this.matrix);var r=4*this.vertSize;e.vertexAttribPointer(this.shader.aVertexPosition,2,e.FLOAT,!1,r,0),e.vertexAttribPointer(this.shader.aPositionCoord,2,e.FLOAT,!1,r,8),e.vertexAttribPointer(this.shader.aScale,2,e.FLOAT,!1,r,16),e.vertexAttribPointer(this.shader.aRotation,1,e.FLOAT,!1,r,24),e.vertexAttribPointer(this.shader.aTextureCoord,2,e.FLOAT,!1,r,28),e.vertexAttribPointer(this.shader.colorAttribute,1,e.FLOAT,!1,r,36)},n.WebGLFilterManager=function(){this.filterStack=[],this.offsetX=0,this.offsetY=0},n.WebGLFilterManager.prototype.constructor=n.WebGLFilterManager,n.WebGLFilterManager.prototype.setContext=function(e){this.gl=e,this.texturePool=[],this.initShaderBuffers()},n.WebGLFilterManager.prototype.begin=function(e,t){this.renderSession=e,this.defaultShader=e.shaderManager.defaultShader;var r=this.renderSession.projection;this.width=2*r.x,this.height=2*-r.y,this.buffer=t},n.WebGLFilterManager.prototype.pushFilter=function(e){var t=this.gl,r=this.renderSession.projection,i=this.renderSession.offset;e._filterArea=e.target.filterArea||e.target.getBounds(),this.filterStack.push(e);var o=e.filterPasses[0];this.offsetX+=e._filterArea.x,this.offsetY+=e._filterArea.y;var s=this.texturePool.pop();s?s.resize(this.width,this.height):s=new n.FilterTexture(this.gl,this.width,this.height),t.bindTexture(t.TEXTURE_2D,s.texture);var a=e._filterArea,h=o.padding;a.x-=h,a.y-=h,a.width+=2*h,a.height+=2*h,a.x<0&&(a.x=0),a.width>this.width&&(a.width=this.width),a.y<0&&(a.y=0),a.height>this.height&&(a.height=this.height),t.bindFramebuffer(t.FRAMEBUFFER,s.frameBuffer),t.viewport(0,0,a.width,a.height),r.x=a.width/2,r.y=-a.height/2,i.x=-a.x,i.y=-a.y,t.colorMask(!0,!0,!0,!0),t.clearColor(0,0,0,0),t.clear(t.COLOR_BUFFER_BIT),e._glFilterTexture=s},n.WebGLFilterManager.prototype.popFilter=function(){var e=this.gl,t=this.filterStack.pop(),r=t._filterArea,i=t._glFilterTexture,o=this.renderSession.projection,s=this.renderSession.offset;if(t.filterPasses.length>1){e.viewport(0,0,r.width,r.height),e.bindBuffer(e.ARRAY_BUFFER,this.vertexBuffer),this.vertexArray[0]=0,this.vertexArray[1]=r.height,this.vertexArray[2]=r.width,this.vertexArray[3]=r.height,this.vertexArray[4]=0,this.vertexArray[5]=0,this.vertexArray[6]=r.width,this.vertexArray[7]=0,e.bufferSubData(e.ARRAY_BUFFER,0,this.vertexArray),e.bindBuffer(e.ARRAY_BUFFER,this.uvBuffer),this.uvArray[2]=r.width/this.width,this.uvArray[5]=r.height/this.height,this.uvArray[6]=r.width/this.width,this.uvArray[7]=r.height/this.height,e.bufferSubData(e.ARRAY_BUFFER,0,this.uvArray);var a=i,h=this.texturePool.pop();h||(h=new n.FilterTexture(this.gl,this.width,this.height)),h.resize(this.width,this.height),e.bindFramebuffer(e.FRAMEBUFFER,h.frameBuffer),e.clear(e.COLOR_BUFFER_BIT),e.disable(e.BLEND);for(var c=0;c<t.filterPasses.length-1;c++){var u=t.filterPasses[c];e.bindFramebuffer(e.FRAMEBUFFER,h.frameBuffer),e.activeTexture(e.TEXTURE0),e.bindTexture(e.TEXTURE_2D,a.texture),this.applyFilterPass(u,r,r.width,r.height);var f=a;a=h,h=f}e.enable(e.BLEND),i=a,this.texturePool.push(h)}var d=t.filterPasses[t.filterPasses.length-1];this.offsetX-=r.x,this.offsetY-=r.y;var l=this.width,p=this.height,b=0,g=0,m=this.buffer;if(0===this.filterStack.length)e.colorMask(!0,!0,!0,!0);else{var v=this.filterStack[this.filterStack.length-1];r=v._filterArea,l=r.width,p=r.height,b=r.x,g=r.y,m=v._glFilterTexture.frameBuffer}o.x=l/2,o.y=-p/2,s.x=b,s.y=g,r=t._filterArea;var y=r.x-b,w=r.y-g;e.bindBuffer(e.ARRAY_BUFFER,this.vertexBuffer),this.vertexArray[0]=y,this.vertexArray[1]=w+r.height,this.vertexArray[2]=y+r.width,this.vertexArray[3]=w+r.height,this.vertexArray[4]=y,this.vertexArray[5]=w,this.vertexArray[6]=y+r.width,this.vertexArray[7]=w,e.bufferSubData(e.ARRAY_BUFFER,0,this.vertexArray),e.bindBuffer(e.ARRAY_BUFFER,this.uvBuffer),this.uvArray[2]=r.width/this.width,this.uvArray[5]=r.height/this.height,this.uvArray[6]=r.width/this.width,this.uvArray[7]=r.height/this.height,e.bufferSubData(e.ARRAY_BUFFER,0,this.uvArray),e.viewport(0,0,l,p),e.bindFramebuffer(e.FRAMEBUFFER,m),e.activeTexture(e.TEXTURE0),e.bindTexture(e.TEXTURE_2D,i.texture),this.applyFilterPass(d,r,l,p),this.texturePool.push(i),t._glFilterTexture=null},n.WebGLFilterManager.prototype.applyFilterPass=function(e,t,r,i){var o=this.gl,s=e.shaders[o.id];s||(s=new n.PixiShader(o),s.fragmentSrc=e.fragmentSrc,s.uniforms=e.uniforms,s.init(),e.shaders[o.id]=s),this.renderSession.shaderManager.setShader(s),o.uniform2f(s.projectionVector,r/2,-i/2),o.uniform2f(s.offsetVector,0,0),e.uniforms.dimensions&&(e.uniforms.dimensions.value[0]=this.width,e.uniforms.dimensions.value[1]=this.height,e.uniforms.dimensions.value[2]=this.vertexArray[0],e.uniforms.dimensions.value[3]=this.vertexArray[5]),s.syncUniforms(),o.bindBuffer(o.ARRAY_BUFFER,this.vertexBuffer),o.vertexAttribPointer(s.aVertexPosition,2,o.FLOAT,!1,0,0),o.bindBuffer(o.ARRAY_BUFFER,this.uvBuffer),o.vertexAttribPointer(s.aTextureCoord,2,o.FLOAT,!1,0,0),o.bindBuffer(o.ARRAY_BUFFER,this.colorBuffer),o.vertexAttribPointer(s.colorAttribute,2,o.FLOAT,!1,0,0),o.bindBuffer(o.ELEMENT_ARRAY_BUFFER,this.indexBuffer),o.drawElements(o.TRIANGLES,6,o.UNSIGNED_SHORT,0),this.renderSession.drawCount++},n.WebGLFilterManager.prototype.initShaderBuffers=function(){var e=this.gl;this.vertexBuffer=e.createBuffer(),this.uvBuffer=e.createBuffer(),this.colorBuffer=e.createBuffer(),this.indexBuffer=e.createBuffer(),this.vertexArray=new n.Float32Array([0,0,1,0,0,1,1,1]),e.bindBuffer(e.ARRAY_BUFFER,this.vertexBuffer),e.bufferData(e.ARRAY_BUFFER,this.vertexArray,e.STATIC_DRAW),this.uvArray=new n.Float32Array([0,0,1,0,0,1,1,1]),e.bindBuffer(e.ARRAY_BUFFER,this.uvBuffer),e.bufferData(e.ARRAY_BUFFER,this.uvArray,e.STATIC_DRAW),this.colorArray=new n.Float32Array([1,16777215,1,16777215,1,16777215,1,16777215]),e.bindBuffer(e.ARRAY_BUFFER,this.colorBuffer),e.bufferData(e.ARRAY_BUFFER,this.colorArray,e.STATIC_DRAW),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,this.indexBuffer),e.bufferData(e.ELEMENT_ARRAY_BUFFER,new Uint16Array([0,1,2,1,3,2]),e.STATIC_DRAW)},n.WebGLFilterManager.prototype.destroy=function(){var e=this.gl;this.filterStack=null,this.offsetX=0,this.offsetY=0;for(var t=0;t<this.texturePool.length;t++)this.texturePool[t].destroy();this.texturePool=null,e.deleteBuffer(this.vertexBuffer),e.deleteBuffer(this.uvBuffer),e.deleteBuffer(this.colorBuffer),e.deleteBuffer(this.indexBuffer)},n.FilterTexture=function(e,t,r,i){this.gl=e,this.frameBuffer=e.createFramebuffer(),this.texture=e.createTexture(),i=i||n.scaleModes.DEFAULT,e.bindTexture(e.TEXTURE_2D,this.texture),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,i===n.scaleModes.LINEAR?e.LINEAR:e.NEAREST),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,i===n.scaleModes.LINEAR?e.LINEAR:e.NEAREST),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.bindFramebuffer(e.FRAMEBUFFER,this.frameBuffer),e.bindFramebuffer(e.FRAMEBUFFER,this.frameBuffer),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,this.texture,0),this.renderBuffer=e.createRenderbuffer(),e.bindRenderbuffer(e.RENDERBUFFER,this.renderBuffer),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.DEPTH_STENCIL_ATTACHMENT,e.RENDERBUFFER,this.renderBuffer),this.resize(t,r)},n.FilterTexture.prototype.constructor=n.FilterTexture,n.FilterTexture.prototype.clear=function(){var e=this.gl;e.clearColor(0,0,0,0),e.clear(e.COLOR_BUFFER_BIT)},n.FilterTexture.prototype.resize=function(e,t){if(this.width!==e||this.height!==t){this.width=e,this.height=t;var r=this.gl;r.bindTexture(r.TEXTURE_2D,this.texture),r.texImage2D(r.TEXTURE_2D,0,r.RGBA,e,t,0,r.RGBA,r.UNSIGNED_BYTE,null),r.bindRenderbuffer(r.RENDERBUFFER,this.renderBuffer),r.renderbufferStorage(r.RENDERBUFFER,r.DEPTH_STENCIL,e,t)}},n.FilterTexture.prototype.destroy=function(){var e=this.gl;e.deleteFramebuffer(this.frameBuffer),e.deleteTexture(this.texture),this.frameBuffer=null,this.texture=null},n.CanvasBuffer=function(e,t){this.width=e,this.height=t,this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d"),this.canvas.width=e,this.canvas.height=t},n.CanvasBuffer.prototype.constructor=n.CanvasBuffer,n.CanvasBuffer.prototype.clear=function(){this.context.setTransform(1,0,0,1,0,0),this.context.clearRect(0,0,this.width,this.height)},n.CanvasBuffer.prototype.resize=function(e,t){this.width=this.canvas.width=e,this.height=this.canvas.height=t},n.CanvasMaskManager=function(){},n.CanvasMaskManager.prototype.constructor=n.CanvasMaskManager,n.CanvasMaskManager.prototype.pushMask=function(e,t){var r=t.context;r.save();var i=e.alpha,o=e.worldTransform,s=t.resolution;r.setTransform(o.a*s,o.b*s,o.c*s,o.d*s,o.tx*s,o.ty*s),n.CanvasGraphics.renderGraphicsMask(e,r),r.clip(),e.worldAlpha=i},n.CanvasMaskManager.prototype.popMask=function(e){e.context.restore()},n.CanvasTinter=function(){},n.CanvasTinter.getTintedTexture=function(e,t){var r=e.texture;t=n.CanvasTinter.roundColor(t);var i="#"+("00000"+(0|t).toString(16)).substr(-6);if(r.tintCache=r.tintCache||{},r.tintCache[i])return r.tintCache[i];var o=n.CanvasTinter.canvas||document.createElement("canvas");if(n.CanvasTinter.tintMethod(r,t,o),n.CanvasTinter.convertTintToImage){var s=new Image;s.src=o.toDataURL(),r.tintCache[i]=s}else r.tintCache[i]=o,n.CanvasTinter.canvas=null;return o},n.CanvasTinter.tintWithMultiply=function(e,t,r){var n=r.getContext("2d"),i=e.crop;r.width=i.width,r.height=i.height,n.fillStyle="#"+("00000"+(0|t).toString(16)).substr(-6),n.fillRect(0,0,i.width,i.height),n.globalCompositeOperation="multiply",n.drawImage(e.baseTexture.source,i.x,i.y,i.width,i.height,0,0,i.width,i.height),n.globalCompositeOperation="destination-atop",n.drawImage(e.baseTexture.source,i.x,i.y,i.width,i.height,0,0,i.width,i.height)},n.CanvasTinter.tintWithOverlay=function(e,t,r){var n=r.getContext("2d"),i=e.crop;r.width=i.width,r.height=i.height,n.globalCompositeOperation="copy",n.fillStyle="#"+("00000"+(0|t).toString(16)).substr(-6),n.fillRect(0,0,i.width,i.height),n.globalCompositeOperation="destination-atop",n.drawImage(e.baseTexture.source,i.x,i.y,i.width,i.height,0,0,i.width,i.height)},n.CanvasTinter.tintWithPerPixel=function(e,t,r){var i=r.getContext("2d"),o=e.crop;r.width=o.width,r.height=o.height,i.globalCompositeOperation="copy",i.drawImage(e.baseTexture.source,o.x,o.y,o.width,o.height,0,0,o.width,o.height);for(var s=n.hex2rgb(t),a=s[0],h=s[1],c=s[2],u=i.getImageData(0,0,o.width,o.height),f=u.data,d=0;d<f.length;d+=4)f[d+0]*=a,f[d+1]*=h,f[d+2]*=c;i.putImageData(u,0,0)},n.CanvasTinter.roundColor=function(e){var t=n.CanvasTinter.cacheStepsPerColorChannel,r=n.hex2rgb(e);return r[0]=Math.min(255,r[0]/t*t),r[1]=Math.min(255,r[1]/t*t),r[2]=Math.min(255,r[2]/t*t),n.rgb2hex(r)},n.CanvasTinter.cacheStepsPerColorChannel=8,n.CanvasTinter.convertTintToImage=!1,n.CanvasTinter.canUseMultiply=n.canUseNewCanvasBlendModes(),n.CanvasTinter.tintMethod=n.CanvasTinter.canUseMultiply?n.CanvasTinter.tintWithMultiply:n.CanvasTinter.tintWithPerPixel,n.CanvasRenderer=function(e,t,r){if(r)for(var i in n.defaultRenderOptions)"undefined"==typeof r[i]&&(r[i]=n.defaultRenderOptions[i]);else r=n.defaultRenderOptions;n.defaultRenderer||(n.sayHello("Canvas"),n.defaultRenderer=this),this.type=n.CANVAS_RENDERER,this.resolution=r.resolution,this.clearBeforeRender=r.clearBeforeRender,this.transparent=r.transparent,this.autoResize=r.autoResize||!1,this.width=e||800,this.height=t||600,this.width*=this.resolution,this.height*=this.resolution,this.view=r.view||document.createElement("canvas"),this.context=this.view.getContext("2d",{alpha:this.transparent}),this.refresh=!0,this.view.width=this.width*this.resolution,this.view.height=this.height*this.resolution,this.count=0,this.maskManager=new n.CanvasMaskManager,this.renderSession={context:this.context,maskManager:this.maskManager,scaleMode:null,smoothProperty:null,roundPixels:!1},this.mapBlendModes(),this.resize(e,t),"imageSmoothingEnabled"in this.context?this.renderSession.smoothProperty="imageSmoothingEnabled":"webkitImageSmoothingEnabled"in this.context?this.renderSession.smoothProperty="webkitImageSmoothingEnabled":"mozImageSmoothingEnabled"in this.context?this.renderSession.smoothProperty="mozImageSmoothingEnabled":"oImageSmoothingEnabled"in this.context?this.renderSession.smoothProperty="oImageSmoothingEnabled":"msImageSmoothingEnabled"in this.context&&(this.renderSession.smoothProperty="msImageSmoothingEnabled")},n.CanvasRenderer.prototype.constructor=n.CanvasRenderer,n.CanvasRenderer.prototype.render=function(e){e.updateTransform(),this.context.setTransform(1,0,0,1,0,0),this.context.globalAlpha=1,this.renderSession.currentBlendMode=n.blendModes.NORMAL,this.context.globalCompositeOperation=n.blendModesCanvas[n.blendModes.NORMAL],navigator.isCocoonJS&&this.view.screencanvas&&(this.context.fillStyle="black",this.context.clear()),this.clearBeforeRender&&(this.transparent?this.context.clearRect(0,0,this.width,this.height):(this.context.fillStyle=e.backgroundColorString,this.context.fillRect(0,0,this.width,this.height))),this.renderDisplayObject(e),e.interactive&&(e._interactiveEventsAdded||(e._interactiveEventsAdded=!0,e.interactionManager.setTarget(this)))},n.CanvasRenderer.prototype.destroy=function(e){"undefined"==typeof e&&(e=!0),e&&this.view.parent&&this.view.parent.removeChild(this.view),this.view=null,this.context=null,this.maskManager=null,this.renderSession=null},n.CanvasRenderer.prototype.resize=function(e,t){this.width=e*this.resolution,this.height=t*this.resolution,this.view.width=this.width,this.view.height=this.height,this.autoResize&&(this.view.style.width=this.width/this.resolution+"px",this.view.style.height=this.height/this.resolution+"px")},n.CanvasRenderer.prototype.renderDisplayObject=function(e,t){this.renderSession.context=t||this.context,this.renderSession.resolution=this.resolution,e._renderCanvas(this.renderSession)},n.CanvasRenderer.prototype.mapBlendModes=function(){n.blendModesCanvas||(n.blendModesCanvas=[],n.canUseNewCanvasBlendModes()?(n.blendModesCanvas[n.blendModes.NORMAL]="source-over",n.blendModesCanvas[n.blendModes.ADD]="lighter",n.blendModesCanvas[n.blendModes.MULTIPLY]="multiply",n.blendModesCanvas[n.blendModes.SCREEN]="screen",n.blendModesCanvas[n.blendModes.OVERLAY]="overlay",n.blendModesCanvas[n.blendModes.DARKEN]="darken",n.blendModesCanvas[n.blendModes.LIGHTEN]="lighten",n.blendModesCanvas[n.blendModes.COLOR_DODGE]="color-dodge",n.blendModesCanvas[n.blendModes.COLOR_BURN]="color-burn",n.blendModesCanvas[n.blendModes.HARD_LIGHT]="hard-light",n.blendModesCanvas[n.blendModes.SOFT_LIGHT]="soft-light",n.blendModesCanvas[n.blendModes.DIFFERENCE]="difference",n.blendModesCanvas[n.blendModes.EXCLUSION]="exclusion",n.blendModesCanvas[n.blendModes.HUE]="hue",n.blendModesCanvas[n.blendModes.SATURATION]="saturation",n.blendModesCanvas[n.blendModes.COLOR]="color",n.blendModesCanvas[n.blendModes.LUMINOSITY]="luminosity"):(n.blendModesCanvas[n.blendModes.NORMAL]="source-over",n.blendModesCanvas[n.blendModes.ADD]="lighter",n.blendModesCanvas[n.blendModes.MULTIPLY]="source-over",n.blendModesCanvas[n.blendModes.SCREEN]="source-over",n.blendModesCanvas[n.blendModes.OVERLAY]="source-over",n.blendModesCanvas[n.blendModes.DARKEN]="source-over",n.blendModesCanvas[n.blendModes.LIGHTEN]="source-over",n.blendModesCanvas[n.blendModes.COLOR_DODGE]="source-over",n.blendModesCanvas[n.blendModes.COLOR_BURN]="source-over",n.blendModesCanvas[n.blendModes.HARD_LIGHT]="source-over",n.blendModesCanvas[n.blendModes.SOFT_LIGHT]="source-over",n.blendModesCanvas[n.blendModes.DIFFERENCE]="source-over",n.blendModesCanvas[n.blendModes.EXCLUSION]="source-over",n.blendModesCanvas[n.blendModes.HUE]="source-over",n.blendModesCanvas[n.blendModes.SATURATION]="source-over",n.blendModesCanvas[n.blendModes.COLOR]="source-over",n.blendModesCanvas[n.blendModes.LUMINOSITY]="source-over"))},n.CanvasGraphics=function(){},n.CanvasGraphics.renderGraphics=function(e,t){var r=e.worldAlpha;
e.dirty&&(this.updateGraphicsTint(e),e.dirty=!1);for(var i=0;i<e.graphicsData.length;i++){var o=e.graphicsData[i],s=o.shape,a=o._fillTint,h=o._lineTint;if(t.lineWidth=o.lineWidth,o.type===n.Graphics.POLY){t.beginPath();var c=s.points;t.moveTo(c[0],c[1]);for(var u=1;u<c.length/2;u++)t.lineTo(c[2*u],c[2*u+1]);s.closed&&t.lineTo(c[0],c[1]),c[0]===c[c.length-2]&&c[1]===c[c.length-1]&&t.closePath(),o.fill&&(t.globalAlpha=o.fillAlpha*r,t.fillStyle="#"+("00000"+(0|a).toString(16)).substr(-6),t.fill()),o.lineWidth&&(t.globalAlpha=o.lineAlpha*r,t.strokeStyle="#"+("00000"+(0|h).toString(16)).substr(-6),t.stroke())}else if(o.type===n.Graphics.RECT)(o.fillColor||0===o.fillColor)&&(t.globalAlpha=o.fillAlpha*r,t.fillStyle="#"+("00000"+(0|a).toString(16)).substr(-6),t.fillRect(s.x,s.y,s.width,s.height)),o.lineWidth&&(t.globalAlpha=o.lineAlpha*r,t.strokeStyle="#"+("00000"+(0|h).toString(16)).substr(-6),t.strokeRect(s.x,s.y,s.width,s.height));else if(o.type===n.Graphics.CIRC)t.beginPath(),t.arc(s.x,s.y,s.radius,0,2*Math.PI),t.closePath(),o.fill&&(t.globalAlpha=o.fillAlpha*r,t.fillStyle="#"+("00000"+(0|a).toString(16)).substr(-6),t.fill()),o.lineWidth&&(t.globalAlpha=o.lineAlpha*r,t.strokeStyle="#"+("00000"+(0|h).toString(16)).substr(-6),t.stroke());else if(o.type===n.Graphics.ELIP){var f=2*s.width,d=2*s.height,l=s.x-f/2,p=s.y-d/2;t.beginPath();var b=.5522848,g=f/2*b,m=d/2*b,v=l+f,y=p+d,w=l+f/2,_=p+d/2;t.moveTo(l,_),t.bezierCurveTo(l,_-m,w-g,p,w,p),t.bezierCurveTo(w+g,p,v,_-m,v,_),t.bezierCurveTo(v,_+m,w+g,y,w,y),t.bezierCurveTo(w-g,y,l,_+m,l,_),t.closePath(),o.fill&&(t.globalAlpha=o.fillAlpha*r,t.fillStyle="#"+("00000"+(0|a).toString(16)).substr(-6),t.fill()),o.lineWidth&&(t.globalAlpha=o.lineAlpha*r,t.strokeStyle="#"+("00000"+(0|h).toString(16)).substr(-6),t.stroke())}else if(o.type===n.Graphics.RREC){var x=s.x,S=s.y,T=s.width,A=s.height,E=s.radius,C=Math.min(T,A)/2|0;E=E>C?C:E,t.beginPath(),t.moveTo(x,S+E),t.lineTo(x,S+A-E),t.quadraticCurveTo(x,S+A,x+E,S+A),t.lineTo(x+T-E,S+A),t.quadraticCurveTo(x+T,S+A,x+T,S+A-E),t.lineTo(x+T,S+E),t.quadraticCurveTo(x+T,S,x+T-E,S),t.lineTo(x+E,S),t.quadraticCurveTo(x,S,x,S+E),t.closePath(),(o.fillColor||0===o.fillColor)&&(t.globalAlpha=o.fillAlpha*r,t.fillStyle="#"+("00000"+(0|a).toString(16)).substr(-6),t.fill()),o.lineWidth&&(t.globalAlpha=o.lineAlpha*r,t.strokeStyle="#"+("00000"+(0|h).toString(16)).substr(-6),t.stroke())}}},n.CanvasGraphics.renderGraphicsMask=function(e,t){var r=e.graphicsData.length;if(0!==r){r>1&&(r=1,window.console.log("Pixi.js warning: masks in canvas can only mask using the first path in the graphics object"));for(var i=0;1>i;i++){var o=e.graphicsData[i],s=o.shape;if(o.type===n.Graphics.POLY){t.beginPath();var a=s.points;t.moveTo(a[0],a[1]);for(var h=1;h<a.length/2;h++)t.lineTo(a[2*h],a[2*h+1]);a[0]===a[a.length-2]&&a[1]===a[a.length-1]&&t.closePath()}else if(o.type===n.Graphics.RECT)t.beginPath(),t.rect(s.x,s.y,s.width,s.height),t.closePath();else if(o.type===n.Graphics.CIRC)t.beginPath(),t.arc(s.x,s.y,s.radius,0,2*Math.PI),t.closePath();else if(o.type===n.Graphics.ELIP){var c=2*s.width,u=2*s.height,f=s.x-c/2,d=s.y-u/2;t.beginPath();var l=.5522848,p=c/2*l,b=u/2*l,g=f+c,m=d+u,v=f+c/2,y=d+u/2;t.moveTo(f,y),t.bezierCurveTo(f,y-b,v-p,d,v,d),t.bezierCurveTo(v+p,d,g,y-b,g,y),t.bezierCurveTo(g,y+b,v+p,m,v,m),t.bezierCurveTo(v-p,m,f,y+b,f,y),t.closePath()}else if(o.type===n.Graphics.RREC){var w=s.points,_=w[0],x=w[1],S=w[2],T=w[3],A=w[4],E=Math.min(S,T)/2|0;A=A>E?E:A,t.beginPath(),t.moveTo(_,x+A),t.lineTo(_,x+T-A),t.quadraticCurveTo(_,x+T,_+A,x+T),t.lineTo(_+S-A,x+T),t.quadraticCurveTo(_+S,x+T,_+S,x+T-A),t.lineTo(_+S,x+A),t.quadraticCurveTo(_+S,x,_+S-A,x),t.lineTo(_+A,x),t.quadraticCurveTo(_,x,_,x+A),t.closePath()}}}},n.CanvasGraphics.updateGraphicsTint=function(e){if(16777215!==e.tint)for(var t=(e.tint>>16&255)/255,r=(e.tint>>8&255)/255,n=(255&e.tint)/255,i=0;i<e.graphicsData.length;i++){var o=e.graphicsData[i],s=0|o.fillColor,a=0|o.lineColor;o._fillTint=((s>>16&255)/255*t*255<<16)+((s>>8&255)/255*r*255<<8)+(255&s)/255*n*255,o._lineTint=((a>>16&255)/255*t*255<<16)+((a>>8&255)/255*r*255<<8)+(255&a)/255*n*255}},n.Graphics=function(){n.DisplayObjectContainer.call(this),this.renderable=!0,this.fillAlpha=1,this.lineWidth=0,this.lineColor=0,this.graphicsData=[],this.tint=16777215,this.blendMode=n.blendModes.NORMAL,this.currentPath=null,this._webGL=[],this.isMask=!1,this.boundsPadding=0,this._localBounds=new n.Rectangle(0,0,1,1),this.dirty=!0,this.webGLDirty=!1,this.cachedSpriteDirty=!1},n.Graphics.prototype=Object.create(n.DisplayObjectContainer.prototype),n.Graphics.prototype.constructor=n.Graphics,Object.defineProperty(n.Graphics.prototype,"cacheAsBitmap",{get:function(){return this._cacheAsBitmap},set:function(e){this._cacheAsBitmap=e,this._cacheAsBitmap?this._generateCachedSprite():(this.destroyCachedSprite(),this.dirty=!0)}}),n.Graphics.prototype.lineStyle=function(e,t,r){if(this.lineWidth=e||0,this.lineColor=t||0,this.lineAlpha=arguments.length<3?1:r,this.currentPath){if(this.currentPath.shape.points.length)return this.drawShape(new n.Polygon(this.currentPath.shape.points.slice(-2))),this;this.currentPath.lineWidth=this.lineWidth,this.currentPath.lineColor=this.lineColor,this.currentPath.lineAlpha=this.lineAlpha}return this},n.Graphics.prototype.moveTo=function(e,t){return this.drawShape(new n.Polygon([e,t])),this},n.Graphics.prototype.lineTo=function(e,t){return this.currentPath.shape.points.push(e,t),this.dirty=!0,this},n.Graphics.prototype.quadraticCurveTo=function(e,t,r,n){this.currentPath?0===this.currentPath.shape.points.length&&(this.currentPath.shape.points=[0,0]):this.moveTo(0,0);var i,o,s=20,a=this.currentPath.shape.points;0===a.length&&this.moveTo(0,0);for(var h=a[a.length-2],c=a[a.length-1],u=0,f=1;s>=f;f++)u=f/s,i=h+(e-h)*u,o=c+(t-c)*u,a.push(i+(e+(r-e)*u-i)*u,o+(t+(n-t)*u-o)*u);return this.dirty=!0,this},n.Graphics.prototype.bezierCurveTo=function(e,t,r,n,i,o){this.currentPath?0===this.currentPath.shape.points.length&&(this.currentPath.shape.points=[0,0]):this.moveTo(0,0);for(var s,a,h,c,u,f=20,d=this.currentPath.shape.points,l=d[d.length-2],p=d[d.length-1],b=0,g=1;f>=g;g++)b=g/f,s=1-b,a=s*s,h=a*s,c=b*b,u=c*b,d.push(h*l+3*a*b*e+3*s*c*r+u*i,h*p+3*a*b*t+3*s*c*n+u*o);return this.dirty=!0,this},n.Graphics.prototype.arcTo=function(e,t,r,n,i){this.currentPath?0===this.currentPath.shape.points.length&&this.currentPath.shape.points.push(e,t):this.moveTo(e,t);var o=this.currentPath.shape.points,s=o[o.length-2],a=o[o.length-1],h=a-t,c=s-e,u=n-t,f=r-e,d=Math.abs(h*f-c*u);if(1e-8>d||0===i)(o[o.length-2]!==e||o[o.length-1]!==t)&&o.push(e,t);else{var l=h*h+c*c,p=u*u+f*f,b=h*u+c*f,g=i*Math.sqrt(l)/d,m=i*Math.sqrt(p)/d,v=g*b/l,y=m*b/p,w=g*f+m*c,_=g*u+m*h,x=c*(m+v),S=h*(m+v),T=f*(g+y),A=u*(g+y),E=Math.atan2(S-_,x-w),C=Math.atan2(A-_,T-w);this.arc(w+e,_+t,i,E,C,c*u>f*h)}return this.dirty=!0,this},n.Graphics.prototype.arc=function(e,t,r,n,i,o){var s,a=e+Math.cos(n)*r,h=t+Math.sin(n)*r;if(this.currentPath?(s=this.currentPath.shape.points,0===s.length?s.push(a,h):(s[s.length-2]!==a||s[s.length-1]!==h)&&s.push(a,h)):(this.moveTo(a,h),s=this.currentPath.shape.points),n===i)return this;!o&&n>=i?i+=2*Math.PI:o&&i>=n&&(n+=2*Math.PI);var c=o?-1*(n-i):i-n,u=Math.abs(c)/(2*Math.PI)*40;if(0===c)return this;for(var f=c/(2*u),d=2*f,l=Math.cos(f),p=Math.sin(f),b=u-1,g=b%1/b,m=0;b>=m;m++){var v=m+g*m,y=f+n+d*v,w=Math.cos(y),_=-Math.sin(y);s.push((l*w+p*_)*r+e,(l*-_+p*w)*r+t)}return this.dirty=!0,this},n.Graphics.prototype.beginFill=function(e,t){return this.filling=!0,this.fillColor=e||0,this.fillAlpha=void 0===t?1:t,this.currentPath&&this.currentPath.shape.points.length<=2&&(this.currentPath.fill=this.filling,this.currentPath.fillColor=this.fillColor,this.currentPath.fillAlpha=this.fillAlpha),this},n.Graphics.prototype.endFill=function(){return this.filling=!1,this.fillColor=null,this.fillAlpha=1,this},n.Graphics.prototype.drawRect=function(e,t,r,i){return this.drawShape(new n.Rectangle(e,t,r,i)),this},n.Graphics.prototype.drawRoundedRect=function(e,t,r,i,o){return this.drawShape(new n.RoundedRectangle(e,t,r,i,o)),this},n.Graphics.prototype.drawCircle=function(e,t,r){return this.drawShape(new n.Circle(e,t,r)),this},n.Graphics.prototype.drawEllipse=function(e,t,r,i){return this.drawShape(new n.Ellipse(e,t,r,i)),this},n.Graphics.prototype.drawPolygon=function(e){return e instanceof Array||(e=Array.prototype.slice.call(arguments)),this.drawShape(new n.Polygon(e)),this},n.Graphics.prototype.clear=function(){return this.lineWidth=0,this.filling=!1,this.dirty=!0,this.clearDirty=!0,this.graphicsData=[],this},n.Graphics.prototype.generateTexture=function(e,t){e=e||1;var r=this.getBounds(),i=new n.CanvasBuffer(r.width*e,r.height*e),o=n.Texture.fromCanvas(i.canvas,t);return o.baseTexture.resolution=e,i.context.scale(e,e),i.context.translate(-r.x,-r.y),n.CanvasGraphics.renderGraphics(this,i.context),o},n.Graphics.prototype._renderWebGL=function(e){if(this.visible!==!1&&0!==this.alpha&&this.isMask!==!0){if(this._cacheAsBitmap)return(this.dirty||this.cachedSpriteDirty)&&(this._generateCachedSprite(),this.updateCachedSpriteTexture(),this.cachedSpriteDirty=!1,this.dirty=!1),this._cachedSprite.worldAlpha=this.worldAlpha,void n.Sprite.prototype._renderWebGL.call(this._cachedSprite,e);if(e.spriteBatch.stop(),e.blendModeManager.setBlendMode(this.blendMode),this._mask&&e.maskManager.pushMask(this._mask,e),this._filters&&e.filterManager.pushFilter(this._filterBlock),this.blendMode!==e.spriteBatch.currentBlendMode){e.spriteBatch.currentBlendMode=this.blendMode;var t=n.blendModesWebGL[e.spriteBatch.currentBlendMode];e.spriteBatch.gl.blendFunc(t[0],t[1])}if(this.webGLDirty&&(this.dirty=!0,this.webGLDirty=!1),n.WebGLGraphics.renderGraphics(this,e),this.children.length){e.spriteBatch.start();for(var r=0,i=this.children.length;i>r;r++)this.children[r]._renderWebGL(e);e.spriteBatch.stop()}this._filters&&e.filterManager.popFilter(),this._mask&&e.maskManager.popMask(this.mask,e),e.drawCount++,e.spriteBatch.start()}},n.Graphics.prototype._renderCanvas=function(e){if(this.visible!==!1&&0!==this.alpha&&this.isMask!==!0){if(this._cacheAsBitmap)return(this.dirty||this.cachedSpriteDirty)&&(this._generateCachedSprite(),this.updateCachedSpriteTexture(),this.cachedSpriteDirty=!1,this.dirty=!1),this._cachedSprite.alpha=this.alpha,void n.Sprite.prototype._renderCanvas.call(this._cachedSprite,e);var t=e.context,r=this.worldTransform;this.blendMode!==e.currentBlendMode&&(e.currentBlendMode=this.blendMode,t.globalCompositeOperation=n.blendModesCanvas[e.currentBlendMode]),this._mask&&e.maskManager.pushMask(this._mask,e);var i=e.resolution;t.setTransform(r.a*i,r.b*i,r.c*i,r.d*i,r.tx*i,r.ty*i),n.CanvasGraphics.renderGraphics(this,t);for(var o=0,s=this.children.length;s>o;o++)this.children[o]._renderCanvas(e);this._mask&&e.maskManager.popMask(e)}},n.Graphics.prototype.getBounds=function(e){if(this.isMask)return n.EmptyRectangle;this.dirty&&(this.updateLocalBounds(),this.webGLDirty=!0,this.cachedSpriteDirty=!0,this.dirty=!1);var t=this._localBounds,r=t.x,i=t.width+t.x,o=t.y,s=t.height+t.y,a=e||this.worldTransform,h=a.a,c=a.b,u=a.c,f=a.d,d=a.tx,l=a.ty,p=h*i+u*s+d,b=f*s+c*i+l,g=h*r+u*s+d,m=f*s+c*r+l,v=h*r+u*o+d,y=f*o+c*r+l,w=h*i+u*o+d,_=f*o+c*i+l,x=p,S=b,T=p,A=b;return T=T>g?g:T,T=T>v?v:T,T=T>w?w:T,A=A>m?m:A,A=A>y?y:A,A=A>_?_:A,x=g>x?g:x,x=v>x?v:x,x=w>x?w:x,S=m>S?m:S,S=y>S?y:S,S=_>S?_:S,this._bounds.x=T,this._bounds.width=x-T,this._bounds.y=A,this._bounds.height=S-A,this._bounds},n.Graphics.prototype.updateLocalBounds=function(){var e=1/0,t=-1/0,r=1/0,i=-1/0;if(this.graphicsData.length)for(var o,s,a,h,c,u,f=0;f<this.graphicsData.length;f++){var d=this.graphicsData[f],l=d.type,p=d.lineWidth;if(o=d.shape,l===n.Graphics.RECT||l===n.Graphics.RREC)a=o.x-p/2,h=o.y-p/2,c=o.width+p,u=o.height+p,e=e>a?a:e,t=a+c>t?a+c:t,r=r>h?h:r,i=h+u>i?h+u:i;else if(l===n.Graphics.CIRC)a=o.x,h=o.y,c=o.radius+p/2,u=o.radius+p/2,e=e>a-c?a-c:e,t=a+c>t?a+c:t,r=r>h-u?h-u:r,i=h+u>i?h+u:i;else if(l===n.Graphics.ELIP)a=o.x,h=o.y,c=o.width+p/2,u=o.height+p/2,e=e>a-c?a-c:e,t=a+c>t?a+c:t,r=r>h-u?h-u:r,i=h+u>i?h+u:i;else{s=o.points;for(var b=0;b<s.length;b+=2)a=s[b],h=s[b+1],e=e>a-p?a-p:e,t=a+p>t?a+p:t,r=r>h-p?h-p:r,i=h+p>i?h+p:i}}else e=0,t=0,r=0,i=0;var g=this.boundsPadding;this._localBounds.x=e-g,this._localBounds.width=t-e+2*g,this._localBounds.y=r-g,this._localBounds.height=i-r+2*g},n.Graphics.prototype._generateCachedSprite=function(){var e=this.getLocalBounds();if(this._cachedSprite)this._cachedSprite.buffer.resize(e.width,e.height);else{var t=new n.CanvasBuffer(e.width,e.height),r=n.Texture.fromCanvas(t.canvas);this._cachedSprite=new n.Sprite(r),this._cachedSprite.buffer=t,this._cachedSprite.worldTransform=this.worldTransform}this._cachedSprite.anchor.x=-(e.x/e.width),this._cachedSprite.anchor.y=-(e.y/e.height),this._cachedSprite.buffer.context.translate(-e.x,-e.y),this.worldAlpha=1,n.CanvasGraphics.renderGraphics(this,this._cachedSprite.buffer.context),this._cachedSprite.alpha=this.alpha},n.Graphics.prototype.updateCachedSpriteTexture=function(){var e=this._cachedSprite,t=e.texture,r=e.buffer.canvas;t.baseTexture.width=r.width,t.baseTexture.height=r.height,t.crop.width=t.frame.width=r.width,t.crop.height=t.frame.height=r.height,e._width=r.width,e._height=r.height,t.baseTexture.dirty()},n.Graphics.prototype.destroyCachedSprite=function(){this._cachedSprite.texture.destroy(!0),this._cachedSprite=null},n.Graphics.prototype.drawShape=function(e){this.currentPath&&this.currentPath.shape.points.length<=2&&this.graphicsData.pop(),this.currentPath=null;var t=new n.GraphicsData(this.lineWidth,this.lineColor,this.lineAlpha,this.fillColor,this.fillAlpha,this.filling,e);return this.graphicsData.push(t),t.type===n.Graphics.POLY&&(t.shape.closed=this.filling,this.currentPath=t),this.dirty=!0,t},n.GraphicsData=function(e,t,r,n,i,o,s){this.lineWidth=e,this.lineColor=t,this.lineAlpha=r,this._lineTint=t,this.fillColor=n,this.fillAlpha=i,this._fillTint=n,this.fill=o,this.shape=s,this.type=s.type},n.Graphics.POLY=0,n.Graphics.RECT=1,n.Graphics.CIRC=2,n.Graphics.ELIP=3,n.Graphics.RREC=4,n.Polygon.prototype.type=n.Graphics.POLY,n.Rectangle.prototype.type=n.Graphics.RECT,n.Circle.prototype.type=n.Graphics.CIRC,n.Ellipse.prototype.type=n.Graphics.ELIP,n.RoundedRectangle.prototype.type=n.Graphics.RREC,n.Strip=function(e){n.DisplayObjectContainer.call(this),this.texture=e,this.uvs=new n.Float32Array([0,1,1,1,1,0,0,1]),this.vertices=new n.Float32Array([0,0,100,0,100,100,0,100]),this.colors=new n.Float32Array([1,1,1,1]),this.indices=new n.Uint16Array([0,1,2,3]),this.dirty=!0,this.blendMode=n.blendModes.NORMAL,this.canvasPadding=0,this.drawMode=n.Strip.DrawModes.TRIANGLE_STRIP},n.Strip.prototype=Object.create(n.DisplayObjectContainer.prototype),n.Strip.prototype.constructor=n.Strip,n.Strip.prototype._renderWebGL=function(e){!this.visible||this.alpha<=0||(e.spriteBatch.stop(),this._vertexBuffer||this._initWebGL(e),e.shaderManager.setShader(e.shaderManager.stripShader),this._renderStrip(e),e.spriteBatch.start())},n.Strip.prototype._initWebGL=function(e){var t=e.gl;this._vertexBuffer=t.createBuffer(),this._indexBuffer=t.createBuffer(),this._uvBuffer=t.createBuffer(),this._colorBuffer=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,this._vertexBuffer),t.bufferData(t.ARRAY_BUFFER,this.vertices,t.DYNAMIC_DRAW),t.bindBuffer(t.ARRAY_BUFFER,this._uvBuffer),t.bufferData(t.ARRAY_BUFFER,this.uvs,t.STATIC_DRAW),t.bindBuffer(t.ARRAY_BUFFER,this._colorBuffer),t.bufferData(t.ARRAY_BUFFER,this.colors,t.STATIC_DRAW),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this._indexBuffer),t.bufferData(t.ELEMENT_ARRAY_BUFFER,this.indices,t.STATIC_DRAW)},n.Strip.prototype._renderStrip=function(e){var t=e.gl,r=e.projection,i=e.offset,o=e.shaderManager.stripShader,s=this.drawMode===n.Strip.DrawModes.TRIANGLE_STRIP?t.TRIANGLE_STRIP:t.TRIANGLES;e.blendModeManager.setBlendMode(this.blendMode),t.uniformMatrix3fv(o.translationMatrix,!1,this.worldTransform.toArray(!0)),t.uniform2f(o.projectionVector,r.x,-r.y),t.uniform2f(o.offsetVector,-i.x,-i.y),t.uniform1f(o.alpha,this.worldAlpha),this.dirty?(this.dirty=!1,t.bindBuffer(t.ARRAY_BUFFER,this._vertexBuffer),t.bufferData(t.ARRAY_BUFFER,this.vertices,t.STATIC_DRAW),t.vertexAttribPointer(o.aVertexPosition,2,t.FLOAT,!1,0,0),t.bindBuffer(t.ARRAY_BUFFER,this._uvBuffer),t.bufferData(t.ARRAY_BUFFER,this.uvs,t.STATIC_DRAW),t.vertexAttribPointer(o.aTextureCoord,2,t.FLOAT,!1,0,0),t.activeTexture(t.TEXTURE0),this.texture.baseTexture._dirty[t.id]?e.renderer.updateTexture(this.texture.baseTexture):t.bindTexture(t.TEXTURE_2D,this.texture.baseTexture._glTextures[t.id]),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this._indexBuffer),t.bufferData(t.ELEMENT_ARRAY_BUFFER,this.indices,t.STATIC_DRAW)):(t.bindBuffer(t.ARRAY_BUFFER,this._vertexBuffer),t.bufferSubData(t.ARRAY_BUFFER,0,this.vertices),t.vertexAttribPointer(o.aVertexPosition,2,t.FLOAT,!1,0,0),t.bindBuffer(t.ARRAY_BUFFER,this._uvBuffer),t.vertexAttribPointer(o.aTextureCoord,2,t.FLOAT,!1,0,0),t.activeTexture(t.TEXTURE0),this.texture.baseTexture._dirty[t.id]?e.renderer.updateTexture(this.texture.baseTexture):t.bindTexture(t.TEXTURE_2D,this.texture.baseTexture._glTextures[t.id]),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this._indexBuffer)),t.drawElements(s,this.indices.length,t.UNSIGNED_SHORT,0)},n.Strip.prototype._renderCanvas=function(e){var t=e.context,r=this.worldTransform;e.roundPixels?t.setTransform(r.a,r.b,r.c,r.d,0|r.tx,0|r.ty):t.setTransform(r.a,r.b,r.c,r.d,r.tx,r.ty),this.drawMode===n.Strip.DrawModes.TRIANGLE_STRIP?this._renderCanvasTriangleStrip(t):this._renderCanvasTriangles(t)},n.Strip.prototype._renderCanvasTriangleStrip=function(e){var t=this.vertices,r=this.uvs,n=t.length/2;this.count++;for(var i=0;n-2>i;i++){var o=2*i;this._renderCanvasDrawTriangle(e,t,r,o,o+2,o+4)}},n.Strip.prototype._renderCanvasTriangles=function(e){var t=this.vertices,r=this.uvs,n=this.indices,i=n.length;this.count++;for(var o=0;i>o;o+=3){var s=2*n[o],a=2*n[o+1],h=2*n[o+2];this._renderCanvasDrawTriangle(e,t,r,s,a,h)}},n.Strip.prototype._renderCanvasDrawTriangle=function(e,t,r,n,i,o){var s=this.texture.baseTexture.source,a=this.texture.width,h=this.texture.height,c=t[n],u=t[i],f=t[o],d=t[n+1],l=t[i+1],p=t[o+1],b=r[n]*a,g=r[i]*a,m=r[o]*a,v=r[n+1]*h,y=r[i+1]*h,w=r[o+1]*h;if(this.canvasPadding>0){var _=this.canvasPadding/this.worldTransform.a,x=this.canvasPadding/this.worldTransform.d,S=(c+u+f)/3,T=(d+l+p)/3,A=c-S,E=d-T,C=Math.sqrt(A*A+E*E);c=S+A/C*(C+_),d=T+E/C*(C+x),A=u-S,E=l-T,C=Math.sqrt(A*A+E*E),u=S+A/C*(C+_),l=T+E/C*(C+x),A=f-S,E=p-T,C=Math.sqrt(A*A+E*E),f=S+A/C*(C+_),p=T+E/C*(C+x)}e.save(),e.beginPath(),e.moveTo(c,d),e.lineTo(u,l),e.lineTo(f,p),e.closePath(),e.clip();var k=b*y+v*m+g*w-y*m-v*g-b*w,R=c*y+v*f+u*w-y*f-v*u-c*w,M=b*u+c*m+g*f-u*m-c*g-b*f,B=b*y*f+v*u*m+c*g*w-c*y*m-v*g*f-b*u*w,I=d*y+v*p+l*w-y*p-v*l-d*w,j=b*l+d*m+g*p-l*m-d*g-b*p,P=b*y*p+v*l*m+d*g*w-d*y*m-v*g*p-b*l*w;e.transform(R/k,I/k,M/k,j/k,B/k,P/k),e.drawImage(s,0,0),e.restore()},n.Strip.prototype.renderStripFlat=function(e){var t=this.context,r=e.vertices,n=r.length/2;this.count++,t.beginPath();for(var i=1;n-2>i;i++){var o=2*i,s=r[o],a=r[o+2],h=r[o+4],c=r[o+1],u=r[o+3],f=r[o+5];t.moveTo(s,c),t.lineTo(a,u),t.lineTo(h,f)}t.fillStyle="#FF0000",t.fill(),t.closePath()},n.Strip.prototype.onTextureUpdate=function(){this.updateFrame=!0},n.Strip.prototype.getBounds=function(e){for(var t=e||this.worldTransform,r=t.a,i=t.b,o=t.c,s=t.d,a=t.tx,h=t.ty,c=-1/0,u=-1/0,f=1/0,d=1/0,l=this.vertices,p=0,b=l.length;b>p;p+=2){var g=l[p],m=l[p+1],v=r*g+o*m+a,y=s*m+i*g+h;f=f>v?v:f,d=d>y?y:d,c=v>c?v:c,u=y>u?y:u}if(f===-1/0||1/0===u)return n.EmptyRectangle;var w=this._bounds;return w.x=f,w.width=c-f,w.y=d,w.height=u-d,this._currentBounds=w,w},n.Strip.DrawModes={TRIANGLE_STRIP:0,TRIANGLES:1},n.Rope=function(e,t){n.Strip.call(this,e),this.points=t,this.vertices=new n.Float32Array(4*t.length),this.uvs=new n.Float32Array(4*t.length),this.colors=new n.Float32Array(2*t.length),this.indices=new n.Uint16Array(2*t.length),this.refresh()},n.Rope.prototype=Object.create(n.Strip.prototype),n.Rope.prototype.constructor=n.Rope,n.Rope.prototype.refresh=function(){var e=this.points;if(!(e.length<1)){var t=this.uvs,r=e[0],n=this.indices,i=this.colors;this.count-=.2,t[0]=0,t[1]=0,t[2]=0,t[3]=1,i[0]=1,i[1]=1,n[0]=0,n[1]=1;for(var o,s,a,h=e.length,c=1;h>c;c++)o=e[c],s=4*c,a=c/(h-1),c%2?(t[s]=a,t[s+1]=0,t[s+2]=a,t[s+3]=1):(t[s]=a,t[s+1]=0,t[s+2]=a,t[s+3]=1),s=2*c,i[s]=1,i[s+1]=1,s=2*c,n[s]=s,n[s+1]=s+1,r=o}},n.Rope.prototype.updateTransform=function(){var e=this.points;if(!(e.length<1)){var t,r=e[0],i={x:0,y:0};this.count-=.2;for(var o,s,a,h,c,u=this.vertices,f=e.length,d=0;f>d;d++)o=e[d],s=4*d,t=d<e.length-1?e[d+1]:o,i.y=-(t.x-r.x),i.x=t.y-r.y,a=10*(1-d/(f-1)),a>1&&(a=1),h=Math.sqrt(i.x*i.x+i.y*i.y),c=this.texture.height/2,i.x/=h,i.y/=h,i.x*=c,i.y*=c,u[s]=o.x+i.x,u[s+1]=o.y+i.y,u[s+2]=o.x-i.x,u[s+3]=o.y-i.y,r=o;n.DisplayObjectContainer.prototype.updateTransform.call(this)}},n.Rope.prototype.setTexture=function(e){this.texture=e},n.TilingSprite=function(e,t,r){n.Sprite.call(this,e),this._width=t||100,this._height=r||100,this.tileScale=new n.Point(1,1),this.tileScaleOffset=new n.Point(1,1),this.tilePosition=new n.Point(0,0),this.renderable=!0,this.tint=16777215,this.blendMode=n.blendModes.NORMAL},n.TilingSprite.prototype=Object.create(n.Sprite.prototype),n.TilingSprite.prototype.constructor=n.TilingSprite,Object.defineProperty(n.TilingSprite.prototype,"width",{get:function(){return this._width},set:function(e){this._width=e}}),Object.defineProperty(n.TilingSprite.prototype,"height",{get:function(){return this._height},set:function(e){this._height=e}}),n.TilingSprite.prototype.setTexture=function(e){this.texture!==e&&(this.texture=e,this.refreshTexture=!0,this.cachedTint=16777215)},n.TilingSprite.prototype._renderWebGL=function(e){if(this.visible!==!1&&0!==this.alpha){var t,r;for(this._mask&&(e.spriteBatch.stop(),e.maskManager.pushMask(this.mask,e),e.spriteBatch.start()),this._filters&&(e.spriteBatch.flush(),e.filterManager.pushFilter(this._filterBlock)),!this.tilingTexture||this.refreshTexture?(this.generateTilingTexture(!0),this.tilingTexture&&this.tilingTexture.needsUpdate&&(n.updateWebGLTexture(this.tilingTexture.baseTexture,e.gl),this.tilingTexture.needsUpdate=!1)):e.spriteBatch.renderTilingSprite(this),t=0,r=this.children.length;r>t;t++)this.children[t]._renderWebGL(e);e.spriteBatch.stop(),this._filters&&e.filterManager.popFilter(),this._mask&&e.maskManager.popMask(this._mask,e),e.spriteBatch.start()}},n.TilingSprite.prototype._renderCanvas=function(e){if(this.visible!==!1&&0!==this.alpha){var t=e.context;this._mask&&e.maskManager.pushMask(this._mask,t),t.globalAlpha=this.worldAlpha;var r,i,o=this.worldTransform,s=e.resolution;if(t.setTransform(o.a*s,o.b*s,o.c*s,o.d*s,o.tx*s,o.ty*s),!this.__tilePattern||this.refreshTexture){if(this.generateTilingTexture(!1),!this.tilingTexture)return;this.__tilePattern=t.createPattern(this.tilingTexture.baseTexture.source,"repeat")}this.blendMode!==e.currentBlendMode&&(e.currentBlendMode=this.blendMode,t.globalCompositeOperation=n.blendModesCanvas[e.currentBlendMode]);var a=this.tilePosition,h=this.tileScale;for(a.x%=this.tilingTexture.baseTexture.width,a.y%=this.tilingTexture.baseTexture.height,t.scale(h.x,h.y),t.translate(a.x+this.anchor.x*-this._width,a.y+this.anchor.y*-this._height),t.fillStyle=this.__tilePattern,t.fillRect(-a.x,-a.y,this._width/h.x,this._height/h.y),t.scale(1/h.x,1/h.y),t.translate(-a.x+this.anchor.x*this._width,-a.y+this.anchor.y*this._height),this._mask&&e.maskManager.popMask(e.context),r=0,i=this.children.length;i>r;r++)this.children[r]._renderCanvas(e)}},n.TilingSprite.prototype.getBounds=function(){var e=this._width,t=this._height,r=e*(1-this.anchor.x),n=e*-this.anchor.x,i=t*(1-this.anchor.y),o=t*-this.anchor.y,s=this.worldTransform,a=s.a,h=s.b,c=s.c,u=s.d,f=s.tx,d=s.ty,l=a*n+c*o+f,p=u*o+h*n+d,b=a*r+c*o+f,g=u*o+h*r+d,m=a*r+c*i+f,v=u*i+h*r+d,y=a*n+c*i+f,w=u*i+h*n+d,_=-1/0,x=-1/0,S=1/0,T=1/0;S=S>l?l:S,S=S>b?b:S,S=S>m?m:S,S=S>y?y:S,T=T>p?p:T,T=T>g?g:T,T=T>v?v:T,T=T>w?w:T,_=l>_?l:_,_=b>_?b:_,_=m>_?m:_,_=y>_?y:_,x=p>x?p:x,x=g>x?g:x,x=v>x?v:x,x=w>x?w:x;var A=this._bounds;return A.x=S,A.width=_-S,A.y=T,A.height=x-T,this._currentBounds=A,A},n.TilingSprite.prototype.onTextureUpdate=function(){},n.TilingSprite.prototype.generateTilingTexture=function(e){if(this.texture.baseTexture.hasLoaded){var t,r,i=this.originalTexture||this.texture,o=i.frame,s=o.width!==i.baseTexture.width||o.height!==i.baseTexture.height,a=!1;if(e?(t=n.getNextPowerOfTwo(o.width),r=n.getNextPowerOfTwo(o.height),(o.width!==t||o.height!==r||i.baseTexture.width!==t||i.baseTexture.height||r)&&(a=!0)):s&&(t=o.width,r=o.height,a=!0),a){var h;this.tilingTexture&&this.tilingTexture.isTiling?(h=this.tilingTexture.canvasBuffer,h.resize(t,r),this.tilingTexture.baseTexture.width=t,this.tilingTexture.baseTexture.height=r,this.tilingTexture.needsUpdate=!0):(h=new n.CanvasBuffer(t,r),this.tilingTexture=n.Texture.fromCanvas(h.canvas),this.tilingTexture.canvasBuffer=h,this.tilingTexture.isTiling=!0),h.context.drawImage(i.baseTexture.source,i.crop.x,i.crop.y,i.crop.width,i.crop.height,0,0,t,r),this.tileScaleOffset.x=o.width/t,this.tileScaleOffset.y=o.height/r}else this.tilingTexture&&this.tilingTexture.isTiling&&this.tilingTexture.destroy(!0),this.tileScaleOffset.x=1,this.tileScaleOffset.y=1,this.tilingTexture=i;this.refreshTexture=!1,this.originalTexture=this.texture,this.texture=this.tilingTexture,this.tilingTexture.baseTexture._powerOf2=!0}};var i={radDeg:180/Math.PI,degRad:Math.PI/180,temp:[],Float32Array:"undefined"==typeof Float32Array?Array:Float32Array,Uint16Array:"undefined"==typeof Uint16Array?Array:Uint16Array};i.BoneData=function(e,t){this.name=e,this.parent=t},i.BoneData.prototype={length:0,x:0,y:0,rotation:0,scaleX:1,scaleY:1,inheritScale:!0,inheritRotation:!0,flipX:!1,flipY:!1},i.SlotData=function(e,t){this.name=e,this.boneData=t},i.SlotData.prototype={r:1,g:1,b:1,a:1,attachmentName:null,additiveBlending:!1},i.IkConstraintData=function(e){this.name=e,this.bones=[]},i.IkConstraintData.prototype={target:null,bendDirection:1,mix:1},i.Bone=function(e,t,r){this.data=e,this.skeleton=t,this.parent=r,this.setToSetupPose()},i.Bone.yDown=!1,i.Bone.prototype={x:0,y:0,rotation:0,rotationIK:0,scaleX:1,scaleY:1,flipX:!1,flipY:!1,m00:0,m01:0,worldX:0,m10:0,m11:0,worldY:0,worldRotation:0,worldScaleX:1,worldScaleY:1,worldFlipX:!1,worldFlipY:!1,updateWorldTransform:function(){var e=this.parent;if(e)this.worldX=this.x*e.m00+this.y*e.m01+e.worldX,this.worldY=this.x*e.m10+this.y*e.m11+e.worldY,this.data.inheritScale?(this.worldScaleX=e.worldScaleX*this.scaleX,this.worldScaleY=e.worldScaleY*this.scaleY):(this.worldScaleX=this.scaleX,this.worldScaleY=this.scaleY),this.worldRotation=this.data.inheritRotation?e.worldRotation+this.rotationIK:this.rotationIK,this.worldFlipX=e.worldFlipX!=this.flipX,this.worldFlipY=e.worldFlipY!=this.flipY;else{var t=this.skeleton.flipX,r=this.skeleton.flipY;this.worldX=t?-this.x:this.x,this.worldY=r!=i.Bone.yDown?-this.y:this.y,this.worldScaleX=this.scaleX,this.worldScaleY=this.scaleY,this.worldRotation=this.rotationIK,this.worldFlipX=t!=this.flipX,this.worldFlipY=r!=this.flipY}var n=this.worldRotation*i.degRad,o=Math.cos(n),s=Math.sin(n);this.worldFlipX?(this.m00=-o*this.worldScaleX,this.m01=s*this.worldScaleY):(this.m00=o*this.worldScaleX,this.m01=-s*this.worldScaleY),this.worldFlipY!=i.Bone.yDown?(this.m10=-s*this.worldScaleX,this.m11=-o*this.worldScaleY):(this.m10=s*this.worldScaleX,this.m11=o*this.worldScaleY)},setToSetupPose:function(){var e=this.data;this.x=e.x,this.y=e.y,this.rotation=e.rotation,this.rotationIK=this.rotation,this.scaleX=e.scaleX,this.scaleY=e.scaleY,this.flipX=e.flipX,this.flipY=e.flipY},worldToLocal:function(e){var t=e[0]-this.worldX,r=e[1]-this.worldY,n=this.m00,o=this.m10,s=this.m01,a=this.m11;this.worldFlipX!=(this.worldFlipY!=i.Bone.yDown)&&(n=-n,a=-a);var h=1/(n*a-s*o);e[0]=t*n*h-r*s*h,e[1]=r*a*h-t*o*h},localToWorld:function(e){var t=e[0],r=e[1];e[0]=t*this.m00+r*this.m01+this.worldX,e[1]=t*this.m10+r*this.m11+this.worldY}},i.Slot=function(e,t){this.data=e,this.bone=t,this.setToSetupPose()},i.Slot.prototype={r:1,g:1,b:1,a:1,_attachmentTime:0,attachment:null,attachmentVertices:[],setAttachment:function(e){this.attachment=e,this._attachmentTime=this.bone.skeleton.time,this.attachmentVertices.length=0},setAttachmentTime:function(e){this._attachmentTime=this.bone.skeleton.time-e},getAttachmentTime:function(){return this.bone.skeleton.time-this._attachmentTime},setToSetupPose:function(){var e=this.data;this.r=e.r,this.g=e.g,this.b=e.b,this.a=e.a;for(var t=this.bone.skeleton.data.slots,r=0,n=t.length;n>r;r++)if(t[r]==e){this.setAttachment(e.attachmentName?this.bone.skeleton.getAttachmentBySlotIndex(r,e.attachmentName):null);break}}},i.IkConstraint=function(e,t){this.data=e,this.mix=e.mix,this.bendDirection=e.bendDirection,this.bones=[];for(var r=0,n=e.bones.length;n>r;r++)this.bones.push(t.findBone(e.bones[r].name));this.target=t.findBone(e.target.name)},i.IkConstraint.prototype={apply:function(){var e=this.target,t=this.bones;switch(t.length){case 1:i.IkConstraint.apply1(t[0],e.worldX,e.worldY,this.mix);break;case 2:i.IkConstraint.apply2(t[0],t[1],e.worldX,e.worldY,this.bendDirection,this.mix)}}},i.IkConstraint.apply1=function(e,t,r,n){var o=e.data.inheritRotation&&e.parent?e.parent.worldRotation:0,s=e.rotation,a=Math.atan2(r-e.worldY,t-e.worldX)*i.radDeg-o;e.rotationIK=s+(a-s)*n},i.IkConstraint.apply2=function(e,t,r,n,o,s){var a=t.rotation,h=e.rotation;if(!s)return t.rotationIK=a,void(e.rotationIK=h);var c,u,f=i.temp,d=e.parent;d?(f[0]=r,f[1]=n,d.worldToLocal(f),r=(f[0]-e.x)*d.worldScaleX,n=(f[1]-e.y)*d.worldScaleY):(r-=e.x,n-=e.y),t.parent==e?(c=t.x,u=t.y):(f[0]=t.x,f[1]=t.y,t.parent.localToWorld(f),e.worldToLocal(f),c=f[0],u=f[1]);var l=c*e.worldScaleX,p=u*e.worldScaleY,b=Math.atan2(p,l),g=Math.sqrt(l*l+p*p),m=t.data.length*t.worldScaleX,v=2*g*m;if(1e-4>v)return void(t.rotationIK=a+(Math.atan2(n,r)*i.radDeg-h-a)*s);var y=(r*r+n*n-g*g-m*m)/v;-1>y?y=-1:y>1&&(y=1);var w=Math.acos(y)*o,_=g+m*y,x=m*Math.sin(w),S=Math.atan2(n*_-r*x,r*_+n*x),T=(S-b)*i.radDeg-h;T>180?T-=360:-180>T&&(T+=360),e.rotationIK=h+T*s,T=(w+b)*i.radDeg-a,T>180?T-=360:-180>T&&(T+=360),t.rotationIK=a+(T+e.worldRotation-t.parent.worldRotation)*s},i.Skin=function(e){this.name=e,this.attachments={}},i.Skin.prototype={addAttachment:function(e,t,r){this.attachments[e+":"+t]=r},getAttachment:function(e,t){return this.attachments[e+":"+t]},_attachAll:function(e,t){for(var r in t.attachments){var n=r.indexOf(":"),i=parseInt(r.substring(0,n)),o=r.substring(n+1),s=e.slots[i];if(s.attachment&&s.attachment.name==o){var a=this.getAttachment(i,o);a&&s.setAttachment(a)}}}},i.Animation=function(e,t,r){this.name=e,this.timelines=t,this.duration=r},i.Animation.prototype={apply:function(e,t,r,n,i){n&&0!=this.duration&&(r%=this.duration,t%=this.duration);for(var o=this.timelines,s=0,a=o.length;a>s;s++)o[s].apply(e,t,r,i,1)},mix:function(e,t,r,n,i,o){n&&0!=this.duration&&(r%=this.duration,t%=this.duration);for(var s=this.timelines,a=0,h=s.length;h>a;a++)s[a].apply(e,t,r,i,o)}},i.Animation.binarySearch=function(e,t,r){var n=0,i=Math.floor(e.length/r)-2;if(!i)return r;for(var o=i>>>1;;){if(e[(o+1)*r]<=t?n=o+1:i=o,n==i)return(n+1)*r;o=n+i>>>1}},i.Animation.binarySearch1=function(e,t){var r=0,n=e.length-2;if(!n)return 1;for(var i=n>>>1;;){if(e[i+1]<=t?r=i+1:n=i,r==n)return r+1;i=r+n>>>1}},i.Animation.linearSearch=function(e,t,r){for(var n=0,i=e.length-r;i>=n;n+=r)if(e[n]>t)return n;return-1},i.Curves=function(){this.curves=[]},i.Curves.prototype={setLinear:function(e){this.curves[19*e]=0},setStepped:function(e){this.curves[19*e]=1},setCurve:function(e,t,r,n,i){var o=.1,s=o*o,a=s*o,h=3*o,c=3*s,u=6*s,f=6*a,d=2*-t+n,l=2*-r+i,p=3*(t-n)+1,b=3*(r-i)+1,g=t*h+d*c+p*a,m=r*h+l*c+b*a,v=d*u+p*f,y=l*u+b*f,w=p*f,_=b*f,x=19*e,S=this.curves;S[x++]=2;for(var T=g,A=m,E=x+19-1;E>x;x+=2)S[x]=T,S[x+1]=A,g+=v,m+=y,v+=w,y+=_,T+=g,A+=m},getCurvePercent:function(e,t){t=0>t?0:t>1?1:t;
var r=this.curves,n=19*e,i=r[n];if(0===i)return t;if(1==i)return 0;n++;for(var o=0,s=n,a=n+19-1;a>n;n+=2)if(o=r[n],o>=t){var h,c;return n==s?(h=0,c=0):(h=r[n-2],c=r[n-1]),c+(r[n+1]-c)*(t-h)/(o-h)}var u=r[n-1];return u+(1-u)*(t-o)/(1-o)}},i.RotateTimeline=function(e){this.curves=new i.Curves(e),this.frames=[],this.frames.length=2*e},i.RotateTimeline.prototype={boneIndex:0,getFrameCount:function(){return this.frames.length/2},setFrame:function(e,t,r){e*=2,this.frames[e]=t,this.frames[e+1]=r},apply:function(e,t,r,n,o){var s=this.frames;if(!(r<s[0])){var a=e.bones[this.boneIndex];if(r>=s[s.length-2]){for(var h=a.data.rotation+s[s.length-1]-a.rotation;h>180;)h-=360;for(;-180>h;)h+=360;return void(a.rotation+=h*o)}var c=i.Animation.binarySearch(s,r,2),u=s[c-1],f=s[c],d=1-(r-f)/(s[c-2]-f);d=this.curves.getCurvePercent(c/2-1,d);for(var h=s[c+1]-u;h>180;)h-=360;for(;-180>h;)h+=360;for(h=a.data.rotation+(u+h*d)-a.rotation;h>180;)h-=360;for(;-180>h;)h+=360;a.rotation+=h*o}}},i.TranslateTimeline=function(e){this.curves=new i.Curves(e),this.frames=[],this.frames.length=3*e},i.TranslateTimeline.prototype={boneIndex:0,getFrameCount:function(){return this.frames.length/3},setFrame:function(e,t,r,n){e*=3,this.frames[e]=t,this.frames[e+1]=r,this.frames[e+2]=n},apply:function(e,t,r,n,o){var s=this.frames;if(!(r<s[0])){var a=e.bones[this.boneIndex];if(r>=s[s.length-3])return a.x+=(a.data.x+s[s.length-2]-a.x)*o,void(a.y+=(a.data.y+s[s.length-1]-a.y)*o);var h=i.Animation.binarySearch(s,r,3),c=s[h-2],u=s[h-1],f=s[h],d=1-(r-f)/(s[h+-3]-f);d=this.curves.getCurvePercent(h/3-1,d),a.x+=(a.data.x+c+(s[h+1]-c)*d-a.x)*o,a.y+=(a.data.y+u+(s[h+2]-u)*d-a.y)*o}}},i.ScaleTimeline=function(e){this.curves=new i.Curves(e),this.frames=[],this.frames.length=3*e},i.ScaleTimeline.prototype={boneIndex:0,getFrameCount:function(){return this.frames.length/3},setFrame:function(e,t,r,n){e*=3,this.frames[e]=t,this.frames[e+1]=r,this.frames[e+2]=n},apply:function(e,t,r,n,o){var s=this.frames;if(!(r<s[0])){var a=e.bones[this.boneIndex];if(r>=s[s.length-3])return a.scaleX+=(a.data.scaleX*s[s.length-2]-a.scaleX)*o,void(a.scaleY+=(a.data.scaleY*s[s.length-1]-a.scaleY)*o);var h=i.Animation.binarySearch(s,r,3),c=s[h-2],u=s[h-1],f=s[h],d=1-(r-f)/(s[h+-3]-f);d=this.curves.getCurvePercent(h/3-1,d),a.scaleX+=(a.data.scaleX*(c+(s[h+1]-c)*d)-a.scaleX)*o,a.scaleY+=(a.data.scaleY*(u+(s[h+2]-u)*d)-a.scaleY)*o}}},i.ColorTimeline=function(e){this.curves=new i.Curves(e),this.frames=[],this.frames.length=5*e},i.ColorTimeline.prototype={slotIndex:0,getFrameCount:function(){return this.frames.length/5},setFrame:function(e,t,r,n,i,o){e*=5,this.frames[e]=t,this.frames[e+1]=r,this.frames[e+2]=n,this.frames[e+3]=i,this.frames[e+4]=o},apply:function(e,t,r,n,o){var s=this.frames;if(!(r<s[0])){var a,h,c,u;if(r>=s[s.length-5]){var f=s.length-1;a=s[f-3],h=s[f-2],c=s[f-1],u=s[f]}else{var d=i.Animation.binarySearch(s,r,5),l=s[d-4],p=s[d-3],b=s[d-2],g=s[d-1],m=s[d],v=1-(r-m)/(s[d-5]-m);v=this.curves.getCurvePercent(d/5-1,v),a=l+(s[d+1]-l)*v,h=p+(s[d+2]-p)*v,c=b+(s[d+3]-b)*v,u=g+(s[d+4]-g)*v}var y=e.slots[this.slotIndex];1>o?(y.r+=(a-y.r)*o,y.g+=(h-y.g)*o,y.b+=(c-y.b)*o,y.a+=(u-y.a)*o):(y.r=a,y.g=h,y.b=c,y.a=u)}}},i.AttachmentTimeline=function(e){this.curves=new i.Curves(e),this.frames=[],this.frames.length=e,this.attachmentNames=[],this.attachmentNames.length=e},i.AttachmentTimeline.prototype={slotIndex:0,getFrameCount:function(){return this.frames.length},setFrame:function(e,t,r){this.frames[e]=t,this.attachmentNames[e]=r},apply:function(e,t,r){var n=this.frames;if(r<n[0])return void(t>r&&this.apply(e,t,Number.MAX_VALUE,null,0));t>r&&(t=-1);var o=r>=n[n.length-1]?n.length-1:i.Animation.binarySearch1(n,r)-1;if(!(n[o]<t)){var s=this.attachmentNames[o];e.slots[this.slotIndex].setAttachment(s?e.getAttachmentBySlotIndex(this.slotIndex,s):null)}}},i.EventTimeline=function(e){this.frames=[],this.frames.length=e,this.events=[],this.events.length=e},i.EventTimeline.prototype={getFrameCount:function(){return this.frames.length},setFrame:function(e,t,r){this.frames[e]=t,this.events[e]=r},apply:function(e,t,r,n,o){if(n){var s=this.frames,a=s.length;if(t>r)this.apply(e,t,Number.MAX_VALUE,n,o),t=-1;else if(t>=s[a-1])return;if(!(r<s[0])){var h;if(t<s[0])h=0;else{h=i.Animation.binarySearch1(s,t);for(var c=s[h];h>0&&s[h-1]==c;)h--}for(var u=this.events;a>h&&r>=s[h];h++)n.push(u[h])}}}},i.DrawOrderTimeline=function(e){this.frames=[],this.frames.length=e,this.drawOrders=[],this.drawOrders.length=e},i.DrawOrderTimeline.prototype={getFrameCount:function(){return this.frames.length},setFrame:function(e,t,r){this.frames[e]=t,this.drawOrders[e]=r},apply:function(e,t,r){var n=this.frames;if(!(r<n[0])){var o;o=r>=n[n.length-1]?n.length-1:i.Animation.binarySearch1(n,r)-1;var s=e.drawOrder,a=e.slots,h=this.drawOrders[o];if(h)for(var c=0,u=h.length;u>c;c++)s[c]=e.slots[h[c]];else for(var c=0,u=a.length;u>c;c++)s[c]=a[c]}}},i.FfdTimeline=function(e){this.curves=new i.Curves(e),this.frames=[],this.frames.length=e,this.frameVertices=[],this.frameVertices.length=e},i.FfdTimeline.prototype={slotIndex:0,attachment:0,getFrameCount:function(){return this.frames.length},setFrame:function(e,t,r){this.frames[e]=t,this.frameVertices[e]=r},apply:function(e,t,r,n,o){var s=e.slots[this.slotIndex];if(s.attachment==this.attachment){var a=this.frames;if(!(r<a[0])){var h=this.frameVertices,c=h[0].length,u=s.attachmentVertices;if(u.length!=c&&(o=1),u.length=c,r>=a[a.length-1]){var f=h[a.length-1];if(1>o)for(var d=0;c>d;d++)u[d]+=(f[d]-u[d])*o;else for(var d=0;c>d;d++)u[d]=f[d]}else{var l=i.Animation.binarySearch1(a,r),p=a[l],b=1-(r-p)/(a[l-1]-p);b=this.curves.getCurvePercent(l-1,0>b?0:b>1?1:b);var g=h[l-1],m=h[l];if(1>o)for(var d=0;c>d;d++){var v=g[d];u[d]+=(v+(m[d]-v)*b-u[d])*o}else for(var d=0;c>d;d++){var v=g[d];u[d]=v+(m[d]-v)*b}}}}}},i.IkConstraintTimeline=function(e){this.curves=new i.Curves(e),this.frames=[],this.frames.length=3*e},i.IkConstraintTimeline.prototype={ikConstraintIndex:0,getFrameCount:function(){return this.frames.length/3},setFrame:function(e,t,r,n){e*=3,this.frames[e]=t,this.frames[e+1]=r,this.frames[e+2]=n},apply:function(e,t,r,n,o){var s=this.frames;if(!(r<s[0])){var a=e.ikConstraints[this.ikConstraintIndex];if(r>=s[s.length-3])return a.mix+=(s[s.length-2]-a.mix)*o,void(a.bendDirection=s[s.length-1]);var h=i.Animation.binarySearch(s,r,3),c=s[h+-2],u=s[h],f=1-(r-u)/(s[h+-3]-u);f=this.curves.getCurvePercent(h/3-1,f);var d=c+(s[h+1]-c)*f;a.mix+=(d-a.mix)*o,a.bendDirection=s[h+-1]}}},i.FlipXTimeline=function(e){this.curves=new i.Curves(e),this.frames=[],this.frames.length=2*e},i.FlipXTimeline.prototype={boneIndex:0,getFrameCount:function(){return this.frames.length/2},setFrame:function(e,t,r){e*=2,this.frames[e]=t,this.frames[e+1]=r?1:0},apply:function(e,t,r){var n=this.frames;if(r<n[0])return void(t>r&&this.apply(e,t,Number.MAX_VALUE,null,0));t>r&&(t=-1);var o=(r>=n[n.length-2]?n.length:i.Animation.binarySearch(n,r,2))-2;n[o]<t||(e.bones[boneIndex].flipX=0!=n[o+1])}},i.FlipYTimeline=function(e){this.curves=new i.Curves(e),this.frames=[],this.frames.length=2*e},i.FlipYTimeline.prototype={boneIndex:0,getFrameCount:function(){return this.frames.length/2},setFrame:function(e,t,r){e*=2,this.frames[e]=t,this.frames[e+1]=r?1:0},apply:function(e,t,r){var n=this.frames;if(r<n[0])return void(t>r&&this.apply(e,t,Number.MAX_VALUE,null,0));t>r&&(t=-1);var o=(r>=n[n.length-2]?n.length:i.Animation.binarySearch(n,r,2))-2;n[o]<t||(e.bones[boneIndex].flipY=0!=n[o+1])}},i.SkeletonData=function(){this.bones=[],this.slots=[],this.skins=[],this.events=[],this.animations=[],this.ikConstraints=[]},i.SkeletonData.prototype={name:null,defaultSkin:null,width:0,height:0,version:null,hash:null,findBone:function(e){for(var t=this.bones,r=0,n=t.length;n>r;r++)if(t[r].name==e)return t[r];return null},findBoneIndex:function(e){for(var t=this.bones,r=0,n=t.length;n>r;r++)if(t[r].name==e)return r;return-1},findSlot:function(e){for(var t=this.slots,r=0,n=t.length;n>r;r++)if(t[r].name==e)return slot[r];return null},findSlotIndex:function(e){for(var t=this.slots,r=0,n=t.length;n>r;r++)if(t[r].name==e)return r;return-1},findSkin:function(e){for(var t=this.skins,r=0,n=t.length;n>r;r++)if(t[r].name==e)return t[r];return null},findEvent:function(e){for(var t=this.events,r=0,n=t.length;n>r;r++)if(t[r].name==e)return t[r];return null},findAnimation:function(e){for(var t=this.animations,r=0,n=t.length;n>r;r++)if(t[r].name==e)return t[r];return null},findIkConstraint:function(e){for(var t=this.ikConstraints,r=0,n=t.length;n>r;r++)if(t[r].name==e)return t[r];return null}},i.Skeleton=function(e){this.data=e,this.bones=[];for(var t=0,r=e.bones.length;r>t;t++){var n=e.bones[t],o=n.parent?this.bones[e.bones.indexOf(n.parent)]:null;this.bones.push(new i.Bone(n,this,o))}this.slots=[],this.drawOrder=[];for(var t=0,r=e.slots.length;r>t;t++){var s=e.slots[t],a=this.bones[e.bones.indexOf(s.boneData)],h=new i.Slot(s,a);this.slots.push(h),this.drawOrder.push(h)}this.ikConstraints=[];for(var t=0,r=e.ikConstraints.length;r>t;t++)this.ikConstraints.push(new i.IkConstraint(e.ikConstraints[t],this));this.boneCache=[],this.updateCache()},i.Skeleton.prototype={x:0,y:0,skin:null,r:1,g:1,b:1,a:1,time:0,flipX:!1,flipY:!1,updateCache:function(){var e=this.ikConstraints,t=e.length,r=t+1,n=this.boneCache;n.length>r&&(n.length=r);for(var i=0,o=n.length;o>i;i++)n[i].length=0;for(;n.length<r;)n[n.length]=[];var s=n[0],a=this.bones;e:for(var i=0,o=a.length;o>i;i++){var h=a[i],c=h;do{for(var u=0;t>u;u++)for(var f=e[u],d=f.bones[0],l=f.bones[f.bones.length-1];;){if(c==l){n[u].push(h),n[u+1].push(h);continue e}if(l==d)break;l=l.parent}c=c.parent}while(c);s[s.length]=h}},updateWorldTransform:function(){for(var e=this.bones,t=0,r=e.length;r>t;t++){var n=e[t];n.rotationIK=n.rotation}for(var t=0,i=this.boneCache.length-1;;){for(var o=this.boneCache[t],s=0,a=o.length;a>s;s++)o[s].updateWorldTransform();if(t==i)break;this.ikConstraints[t].apply(),t++}},setToSetupPose:function(){this.setBonesToSetupPose(),this.setSlotsToSetupPose()},setBonesToSetupPose:function(){for(var e=this.bones,t=0,r=e.length;r>t;t++)e[t].setToSetupPose();for(var n=this.ikConstraints,t=0,r=n.length;r>t;t++){var i=n[t];i.bendDirection=i.data.bendDirection,i.mix=i.data.mix}},setSlotsToSetupPose:function(){for(var e=this.slots,t=this.drawOrder,r=0,n=e.length;n>r;r++)t[r]=e[r],e[r].setToSetupPose(r)},getRootBone:function(){return this.bones.length?this.bones[0]:null},findBone:function(e){for(var t=this.bones,r=0,n=t.length;n>r;r++)if(t[r].data.name==e)return t[r];return null},findBoneIndex:function(e){for(var t=this.bones,r=0,n=t.length;n>r;r++)if(t[r].data.name==e)return r;return-1},findSlot:function(e){for(var t=this.slots,r=0,n=t.length;n>r;r++)if(t[r].data.name==e)return t[r];return null},findSlotIndex:function(e){for(var t=this.slots,r=0,n=t.length;n>r;r++)if(t[r].data.name==e)return r;return-1},setSkinByName:function(e){var t=this.data.findSkin(e);if(!t)throw"Skin not found: "+e;this.setSkin(t)},setSkin:function(e){if(e)if(this.skin)e._attachAll(this,this.skin);else for(var t=this.slots,r=0,n=t.length;n>r;r++){var i=t[r],o=i.data.attachmentName;if(o){var s=e.getAttachment(r,o);s&&i.setAttachment(s)}}this.skin=e},getAttachmentBySlotName:function(e,t){return this.getAttachmentBySlotIndex(this.data.findSlotIndex(e),t)},getAttachmentBySlotIndex:function(e,t){if(this.skin){var r=this.skin.getAttachment(e,t);if(r)return r}return this.data.defaultSkin?this.data.defaultSkin.getAttachment(e,t):null},setAttachment:function(e,t){for(var r=this.slots,n=0,i=r.length;i>n;n++){var o=r[n];if(o.data.name==e){var s=null;if(t&&(s=this.getAttachmentBySlotIndex(n,t),!s))throw"Attachment not found: "+t+", for slot: "+e;return void o.setAttachment(s)}}throw"Slot not found: "+e},findIkConstraint:function(e){for(var t=this.ikConstraints,r=0,n=t.length;n>r;r++)if(t[r].data.name==e)return t[r];return null},update:function(e){this.time+=e}},i.EventData=function(e){this.name=e},i.EventData.prototype={intValue:0,floatValue:0,stringValue:null},i.Event=function(e){this.data=e},i.Event.prototype={intValue:0,floatValue:0,stringValue:null},i.AttachmentType={region:0,boundingbox:1,mesh:2,skinnedmesh:3},i.RegionAttachment=function(e){this.name=e,this.offset=[],this.offset.length=8,this.uvs=[],this.uvs.length=8},i.RegionAttachment.prototype={type:i.AttachmentType.region,x:0,y:0,rotation:0,scaleX:1,scaleY:1,width:0,height:0,r:1,g:1,b:1,a:1,path:null,rendererObject:null,regionOffsetX:0,regionOffsetY:0,regionWidth:0,regionHeight:0,regionOriginalWidth:0,regionOriginalHeight:0,setUVs:function(e,t,r,n,i){var o=this.uvs;i?(o[2]=e,o[3]=n,o[4]=e,o[5]=t,o[6]=r,o[7]=t,o[0]=r,o[1]=n):(o[0]=e,o[1]=n,o[2]=e,o[3]=t,o[4]=r,o[5]=t,o[6]=r,o[7]=n)},updateOffset:function(){var e=this.width/this.regionOriginalWidth*this.scaleX,t=this.height/this.regionOriginalHeight*this.scaleY,r=-this.width/2*this.scaleX+this.regionOffsetX*e,n=-this.height/2*this.scaleY+this.regionOffsetY*t,o=r+this.regionWidth*e,s=n+this.regionHeight*t,a=this.rotation*i.degRad,h=Math.cos(a),c=Math.sin(a),u=r*h+this.x,f=r*c,d=n*h+this.y,l=n*c,p=o*h+this.x,b=o*c,g=s*h+this.y,m=s*c,v=this.offset;v[0]=u-l,v[1]=d+f,v[2]=u-m,v[3]=g+f,v[4]=p-m,v[5]=g+b,v[6]=p-l,v[7]=d+b},computeVertices:function(e,t,r,n){e+=r.worldX,t+=r.worldY;var i=r.m00,o=r.m01,s=r.m10,a=r.m11,h=this.offset;n[0]=h[0]*i+h[1]*o+e,n[1]=h[0]*s+h[1]*a+t,n[2]=h[2]*i+h[3]*o+e,n[3]=h[2]*s+h[3]*a+t,n[4]=h[4]*i+h[5]*o+e,n[5]=h[4]*s+h[5]*a+t,n[6]=h[6]*i+h[7]*o+e,n[7]=h[6]*s+h[7]*a+t}},i.MeshAttachment=function(e){this.name=e},i.MeshAttachment.prototype={type:i.AttachmentType.mesh,vertices:null,uvs:null,regionUVs:null,triangles:null,hullLength:0,r:1,g:1,b:1,a:1,path:null,rendererObject:null,regionU:0,regionV:0,regionU2:0,regionV2:0,regionRotate:!1,regionOffsetX:0,regionOffsetY:0,regionWidth:0,regionHeight:0,regionOriginalWidth:0,regionOriginalHeight:0,edges:null,width:0,height:0,updateUVs:function(){var e=this.regionU2-this.regionU,t=this.regionV2-this.regionV,r=this.regionUVs.length;if(this.uvs&&this.uvs.length==r||(this.uvs=new i.Float32Array(r)),this.regionRotate)for(var n=0;r>n;n+=2)this.uvs[n]=this.regionU+this.regionUVs[n+1]*e,this.uvs[n+1]=this.regionV+t-this.regionUVs[n]*t;else for(var n=0;r>n;n+=2)this.uvs[n]=this.regionU+this.regionUVs[n]*e,this.uvs[n+1]=this.regionV+this.regionUVs[n+1]*t},computeWorldVertices:function(e,t,r,n){var i=r.bone;e+=i.worldX,t+=i.worldY;var o=i.m00,s=i.m01,a=i.m10,h=i.m11,c=this.vertices,u=c.length;r.attachmentVertices.length==u&&(c=r.attachmentVertices);for(var f=0;u>f;f+=2){var d=c[f],l=c[f+1];n[f]=d*o+l*s+e,n[f+1]=d*a+l*h+t}}},i.SkinnedMeshAttachment=function(e){this.name=e},i.SkinnedMeshAttachment.prototype={type:i.AttachmentType.skinnedmesh,bones:null,weights:null,uvs:null,regionUVs:null,triangles:null,hullLength:0,r:1,g:1,b:1,a:1,path:null,rendererObject:null,regionU:0,regionV:0,regionU2:0,regionV2:0,regionRotate:!1,regionOffsetX:0,regionOffsetY:0,regionWidth:0,regionHeight:0,regionOriginalWidth:0,regionOriginalHeight:0,edges:null,width:0,height:0,updateUVs:function(){var e=this.regionU2-this.regionU,t=this.regionV2-this.regionV,r=this.regionUVs.length;if(this.uvs&&this.uvs.length==r||(this.uvs=new i.Float32Array(r)),this.regionRotate)for(var n=0;r>n;n+=2)this.uvs[n]=this.regionU+this.regionUVs[n+1]*e,this.uvs[n+1]=this.regionV+t-this.regionUVs[n]*t;else for(var n=0;r>n;n+=2)this.uvs[n]=this.regionU+this.regionUVs[n]*e,this.uvs[n+1]=this.regionV+this.regionUVs[n+1]*t},computeWorldVertices:function(e,t,r,n){var i,o,s,a,h,c,u,f=r.bone.skeleton.bones,d=this.weights,l=this.bones,p=0,b=0,g=0,m=0,v=l.length;if(r.attachmentVertices.length)for(var y=r.attachmentVertices;v>b;p+=2){for(o=0,s=0,i=l[b++]+b;i>b;b++,g+=3,m+=2)a=f[l[b]],h=d[g]+y[m],c=d[g+1]+y[m+1],u=d[g+2],o+=(h*a.m00+c*a.m01+a.worldX)*u,s+=(h*a.m10+c*a.m11+a.worldY)*u;n[p]=o+e,n[p+1]=s+t}else for(;v>b;p+=2){for(o=0,s=0,i=l[b++]+b;i>b;b++,g+=3)a=f[l[b]],h=d[g],c=d[g+1],u=d[g+2],o+=(h*a.m00+c*a.m01+a.worldX)*u,s+=(h*a.m10+c*a.m11+a.worldY)*u;n[p]=o+e,n[p+1]=s+t}}},i.BoundingBoxAttachment=function(e){this.name=e,this.vertices=[]},i.BoundingBoxAttachment.prototype={type:i.AttachmentType.boundingbox,computeWorldVertices:function(e,t,r,n){e+=r.worldX,t+=r.worldY;for(var i=r.m00,o=r.m01,s=r.m10,a=r.m11,h=this.vertices,c=0,u=h.length;u>c;c+=2){var f=h[c],d=h[c+1];n[c]=f*i+d*o+e,n[c+1]=f*s+d*a+t}}},i.AnimationStateData=function(e){this.skeletonData=e,this.animationToMixTime={}},i.AnimationStateData.prototype={defaultMix:0,setMixByName:function(e,t,r){var n=this.skeletonData.findAnimation(e);if(!n)throw"Animation not found: "+e;var i=this.skeletonData.findAnimation(t);if(!i)throw"Animation not found: "+t;this.setMix(n,i,r)},setMix:function(e,t,r){this.animationToMixTime[e.name+":"+t.name]=r},getMix:function(e,t){var r=e.name+":"+t.name;return this.animationToMixTime.hasOwnProperty(r)?this.animationToMixTime[r]:this.defaultMix}},i.TrackEntry=function(){},i.TrackEntry.prototype={next:null,previous:null,animation:null,loop:!1,delay:0,time:0,lastTime:-1,endTime:0,timeScale:1,mixTime:0,mixDuration:0,mix:1,onStart:null,onEnd:null,onComplete:null,onEvent:null},i.AnimationState=function(e){this.data=e,this.tracks=[],this.events=[]},i.AnimationState.prototype={onStart:null,onEnd:null,onComplete:null,onEvent:null,timeScale:1,update:function(e){e*=this.timeScale;for(var t=0;t<this.tracks.length;t++){var r=this.tracks[t];if(r){if(r.time+=e*r.timeScale,r.previous){var n=e*r.previous.timeScale;r.previous.time+=n,r.mixTime+=n}var i=r.next;i?(i.time=r.lastTime-i.delay,i.time>=0&&this.setCurrent(t,i)):!r.loop&&r.lastTime>=r.endTime&&this.clearTrack(t)}}},apply:function(e){for(var t=0;t<this.tracks.length;t++){var r=this.tracks[t];if(r){this.events.length=0;var n=r.time,i=r.lastTime,o=r.endTime,s=r.loop;!s&&n>o&&(n=o);var a=r.previous;if(a){var h=a.time;!a.loop&&h>a.endTime&&(h=a.endTime),a.animation.apply(e,h,h,a.loop,null);var c=r.mixTime/r.mixDuration*r.mix;c>=1&&(c=1,r.previous=null),r.animation.mix(e,r.lastTime,n,s,this.events,c)}else 1==r.mix?r.animation.apply(e,r.lastTime,n,s,this.events):r.animation.mix(e,r.lastTime,n,s,this.events,r.mix);for(var u=0,f=this.events.length;f>u;u++){var d=this.events[u];r.onEvent&&r.onEvent(t,d),this.onEvent&&this.onEvent(t,d)}if(s?i%o>n%o:o>i&&n>=o){var l=Math.floor(n/o);r.onComplete&&r.onComplete(t,l),this.onComplete&&this.onComplete(t,l)}r.lastTime=r.time}}},clearTracks:function(){for(var e=0,t=this.tracks.length;t>e;e++)this.clearTrack(e);this.tracks.length=0},clearTrack:function(e){if(!(e>=this.tracks.length)){var t=this.tracks[e];t&&(t.onEnd&&t.onEnd(e),this.onEnd&&this.onEnd(e),this.tracks[e]=null)}},_expandToIndex:function(e){if(e<this.tracks.length)return this.tracks[e];for(;e>=this.tracks.length;)this.tracks.push(null);return null},setCurrent:function(e,t){var r=this._expandToIndex(e);if(r){var n=r.previous;r.previous=null,r.onEnd&&r.onEnd(e),this.onEnd&&this.onEnd(e),t.mixDuration=this.data.getMix(r.animation,t.animation),t.mixDuration>0&&(t.mixTime=0,t.previous=n&&r.mixTime/r.mixDuration<.5?n:r)}this.tracks[e]=t,t.onStart&&t.onStart(e),this.onStart&&this.onStart(e)},setAnimationByName:function(e,t,r){var n=this.data.skeletonData.findAnimation(t);if(!n)throw"Animation not found: "+t;return this.setAnimation(e,n,r)},setAnimation:function(e,t,r){var n=new i.TrackEntry;return n.animation=t,n.loop=r,n.endTime=t.duration,this.setCurrent(e,n),n},addAnimationByName:function(e,t,r,n){var i=this.data.skeletonData.findAnimation(t);if(!i)throw"Animation not found: "+t;return this.addAnimation(e,i,r,n)},addAnimation:function(e,t,r,n){var o=new i.TrackEntry;o.animation=t,o.loop=r,o.endTime=t.duration;var s=this._expandToIndex(e);if(s){for(;s.next;)s=s.next;s.next=o}else this.tracks[e]=o;return 0>=n&&(s?n+=s.endTime-this.data.getMix(s.animation,t):n=0),o.delay=n,o},getCurrent:function(e){return e>=this.tracks.length?null:this.tracks[e]}},i.SkeletonJson=function(e){this.attachmentLoader=e},i.SkeletonJson.prototype={scale:1,readSkeletonData:function(e,t){var r=new i.SkeletonData;r.name=t;var n=e.skeleton;n&&(r.hash=n.hash,r.version=n.spine,r.width=n.width||0,r.height=n.height||0);for(var o=e.bones,s=0,a=o.length;a>s;s++){var h=o[s],c=null;if(h.parent&&(c=r.findBone(h.parent),!c))throw"Parent bone not found: "+h.parent;var u=new i.BoneData(h.name,c);u.length=(h.length||0)*this.scale,u.x=(h.x||0)*this.scale,u.y=(h.y||0)*this.scale,u.rotation=h.rotation||0,u.scaleX=h.hasOwnProperty("scaleX")?h.scaleX:1,u.scaleY=h.hasOwnProperty("scaleY")?h.scaleY:1,u.inheritScale=h.hasOwnProperty("inheritScale")?h.inheritScale:!0,u.inheritRotation=h.hasOwnProperty("inheritRotation")?h.inheritRotation:!0,r.bones.push(u)}var f=e.ik;if(f)for(var s=0,a=f.length;a>s;s++){for(var d=f[s],l=new i.IkConstraintData(d.name),o=d.bones,p=0,b=o.length;b>p;p++){var g=r.findBone(o[p]);if(!g)throw"IK bone not found: "+o[p];l.bones.push(g)}if(l.target=r.findBone(d.target),!l.target)throw"Target bone not found: "+d.target;l.bendDirection=!d.hasOwnProperty("bendPositive")||d.bendPositive?1:-1,l.mix=d.hasOwnProperty("mix")?d.mix:1,r.ikConstraints.push(l)}for(var m=e.slots,s=0,a=m.length;a>s;s++){var v=m[s],u=r.findBone(v.bone);if(!u)throw"Slot bone not found: "+v.bone;var y=new i.SlotData(v.name,u),w=v.color;w&&(y.r=this.toColor(w,0),y.g=this.toColor(w,1),y.b=this.toColor(w,2),y.a=this.toColor(w,3)),y.attachmentName=v.attachment,y.additiveBlending=v.additive&&"true"==v.additive,r.slots.push(y)}var _=e.skins;for(var x in _)if(_.hasOwnProperty(x)){var S=_[x],T=new i.Skin(x);for(var A in S)if(S.hasOwnProperty(A)){var E=r.findSlotIndex(A),C=S[A];for(var k in C)if(C.hasOwnProperty(k)){var R=this.readAttachment(T,k,C[k]);R&&T.addAttachment(E,k,R)}}r.skins.push(T),"default"==T.name&&(r.defaultSkin=T)}var M=e.events;for(var B in M)if(M.hasOwnProperty(B)){var I=M[B],j=new i.EventData(B);j.intValue=I.int||0,j.floatValue=I.float||0,j.stringValue=I.string||null,r.events.push(j)}var P=e.animations;for(var L in P)P.hasOwnProperty(L)&&this.readAnimation(L,P[L],r);return r},readAttachment:function(e,t,r){t=r.name||t;var n=i.AttachmentType[r.type||"region"],o=r.path||t,s=this.scale;if(n==i.AttachmentType.region){var a=this.attachmentLoader.newRegionAttachment(e,t,o);if(!a)return null;a.path=o,a.x=(r.x||0)*s,a.y=(r.y||0)*s,a.scaleX=r.hasOwnProperty("scaleX")?r.scaleX:1,a.scaleY=r.hasOwnProperty("scaleY")?r.scaleY:1,a.rotation=r.rotation||0,a.width=(r.width||0)*s,a.height=(r.height||0)*s;var h=r.color;return h&&(a.r=this.toColor(h,0),a.g=this.toColor(h,1),a.b=this.toColor(h,2),a.a=this.toColor(h,3)),a.updateOffset(),a}if(n==i.AttachmentType.mesh){var c=this.attachmentLoader.newMeshAttachment(e,t,o);return c?(c.path=o,c.vertices=this.getFloatArray(r,"vertices",s),c.triangles=this.getIntArray(r,"triangles"),c.regionUVs=this.getFloatArray(r,"uvs",1),c.updateUVs(),h=r.color,h&&(c.r=this.toColor(h,0),c.g=this.toColor(h,1),c.b=this.toColor(h,2),c.a=this.toColor(h,3)),c.hullLength=2*(r.hull||0),r.edges&&(c.edges=this.getIntArray(r,"edges")),c.width=(r.width||0)*s,c.height=(r.height||0)*s,c):null}if(n==i.AttachmentType.skinnedmesh){var c=this.attachmentLoader.newSkinnedMeshAttachment(e,t,o);if(!c)return null;c.path=o;for(var u=this.getFloatArray(r,"uvs",1),f=this.getFloatArray(r,"vertices",1),d=[],l=[],p=0,b=f.length;b>p;){var g=0|f[p++];l[l.length]=g;for(var m=p+4*g;m>p;)l[l.length]=f[p],d[d.length]=f[p+1]*s,d[d.length]=f[p+2]*s,d[d.length]=f[p+3],p+=4}return c.bones=l,c.weights=d,c.triangles=this.getIntArray(r,"triangles"),c.regionUVs=u,c.updateUVs(),h=r.color,h&&(c.r=this.toColor(h,0),c.g=this.toColor(h,1),c.b=this.toColor(h,2),c.a=this.toColor(h,3)),c.hullLength=2*(r.hull||0),r.edges&&(c.edges=this.getIntArray(r,"edges")),c.width=(r.width||0)*s,c.height=(r.height||0)*s,c}if(n==i.AttachmentType.boundingbox){for(var v=this.attachmentLoader.newBoundingBoxAttachment(e,t),f=r.vertices,p=0,b=f.length;b>p;p++)v.vertices.push(f[p]*s);return v}throw"Unknown attachment type: "+n},readAnimation:function(e,t,r){var n=[],o=0,s=t.slots;for(var a in s)if(s.hasOwnProperty(a)){var h=s[a],c=r.findSlotIndex(a);for(var u in h)if(h.hasOwnProperty(u)){var f=h[u];if("color"==u){var d=new i.ColorTimeline(f.length);d.slotIndex=c;for(var l=0,p=0,b=f.length;b>p;p++){var g=f[p],m=g.color,v=this.toColor(m,0),y=this.toColor(m,1),w=this.toColor(m,2),_=this.toColor(m,3);d.setFrame(l,g.time,v,y,w,_),this.readCurve(d,l,g),l++}n.push(d),o=Math.max(o,d.frames[5*d.getFrameCount()-5])}else{if("attachment"!=u)throw"Invalid timeline type for a slot: "+u+" ("+a+")";var d=new i.AttachmentTimeline(f.length);d.slotIndex=c;for(var l=0,p=0,b=f.length;b>p;p++){var g=f[p];d.setFrame(l++,g.time,g.name)}n.push(d),o=Math.max(o,d.frames[d.getFrameCount()-1])}}}var x=t.bones;for(var S in x)if(x.hasOwnProperty(S)){var T=r.findBoneIndex(S);if(-1==T)throw"Bone not found: "+S;var A=x[S];for(var u in A)if(A.hasOwnProperty(u)){var f=A[u];if("rotate"==u){var d=new i.RotateTimeline(f.length);d.boneIndex=T;for(var l=0,p=0,b=f.length;b>p;p++){var g=f[p];d.setFrame(l,g.time,g.angle),this.readCurve(d,l,g),l++}n.push(d),o=Math.max(o,d.frames[2*d.getFrameCount()-2])}else if("translate"==u||"scale"==u){var d,E=1;"scale"==u?d=new i.ScaleTimeline(f.length):(d=new i.TranslateTimeline(f.length),E=this.scale),d.boneIndex=T;for(var l=0,p=0,b=f.length;b>p;p++){var g=f[p],C=(g.x||0)*E,k=(g.y||0)*E;d.setFrame(l,g.time,C,k),this.readCurve(d,l,g),l++}n.push(d),o=Math.max(o,d.frames[3*d.getFrameCount()-3])}else{if("flipX"!=u&&"flipY"!=u)throw"Invalid timeline type for a bone: "+u+" ("+S+")";var C="flipX"==u,d=C?new i.FlipXTimeline(f.length):new i.FlipYTimeline(f.length);d.boneIndex=T;for(var R=C?"x":"y",l=0,p=0,b=f.length;b>p;p++){var g=f[p];d.setFrame(l,g.time,g[R]||!1),l++}n.push(d),o=Math.max(o,d.frames[2*d.getFrameCount()-2])}}}var M=t.ik;for(var B in M)if(M.hasOwnProperty(B)){var I=r.findIkConstraint(B),f=M[B],d=new i.IkConstraintTimeline(f.length);d.ikConstraintIndex=r.ikConstraints.indexOf(I);for(var l=0,p=0,b=f.length;b>p;p++){var g=f[p],j=g.hasOwnProperty("mix")?g.mix:1,P=!g.hasOwnProperty("bendPositive")||g.bendPositive?1:-1;d.setFrame(l,g.time,j,P),this.readCurve(d,l,g),l++}n.push(d),o=Math.max(o,d.frames[3*d.frameCount-3])}var L=t.ffd;for(var O in L){var D=r.findSkin(O),h=L[O];for(a in h){var c=r.findSlotIndex(a),F=h[a];for(var U in F){var f=F[U],d=new i.FfdTimeline(f.length),N=D.getAttachment(c,U);if(!N)throw"FFD attachment not found: "+U;d.slotIndex=c,d.attachment=N;var G,W=N.type==i.AttachmentType.mesh;G=W?N.vertices.length:N.weights.length/3*2;for(var l=0,p=0,b=f.length;b>p;p++){var q,g=f[p];if(g.vertices){var V=g.vertices,q=[];q.length=G;var z=g.offset||0,Y=V.length;if(1==this.scale)for(var X=0;Y>X;X++)q[X+z]=V[X];else for(var X=0;Y>X;X++)q[X+z]=V[X]*this.scale;if(W)for(var H=N.vertices,X=0,Y=q.length;Y>X;X++)q[X]+=H[X]}else W?q=N.vertices:(q=[],q.length=G);d.setFrame(l,g.time,q),this.readCurve(d,l,g),l++}n[n.length]=d,o=Math.max(o,d.frames[d.frameCount-1])}}}var K=t.drawOrder;if(K||(K=t.draworder),K){for(var d=new i.DrawOrderTimeline(K.length),J=r.slots.length,l=0,p=0,b=K.length;b>p;p++){var $=K[p],Q=null;if($.offsets){Q=[],Q.length=J;for(var X=J-1;X>=0;X--)Q[X]=-1;var Z=$.offsets,et=[];et.length=J-Z.length;for(var tt=0,rt=0,X=0,Y=Z.length;Y>X;X++){var nt=Z[X],c=r.findSlotIndex(nt.slot);if(-1==c)throw"Slot not found: "+nt.slot;for(;tt!=c;)et[rt++]=tt++;Q[tt+nt.offset]=tt++}for(;J>tt;)et[rt++]=tt++;for(var X=J-1;X>=0;X--)-1==Q[X]&&(Q[X]=et[--rt])}d.setFrame(l++,$.time,Q)}n.push(d),o=Math.max(o,d.frames[d.getFrameCount()-1])}var it=t.events;if(it){for(var d=new i.EventTimeline(it.length),l=0,p=0,b=it.length;b>p;p++){var ot=it[p],st=r.findEvent(ot.name);if(!st)throw"Event not found: "+ot.name;var at=new i.Event(st);at.intValue=ot.hasOwnProperty("int")?ot.int:st.intValue,at.floatValue=ot.hasOwnProperty("float")?ot.float:st.floatValue,at.stringValue=ot.hasOwnProperty("string")?ot.string:st.stringValue,d.setFrame(l++,ot.time,at)}n.push(d),o=Math.max(o,d.frames[d.getFrameCount()-1])}r.animations.push(new i.Animation(e,n,o))},readCurve:function(e,t,r){var n=r.curve;n?"stepped"==n?e.curves.setStepped(t):n instanceof Array&&e.curves.setCurve(t,n[0],n[1],n[2],n[3]):e.curves.setLinear(t)},toColor:function(e,t){if(8!=e.length)throw"Color hexidecimal length must be 8, recieved: "+e;return parseInt(e.substring(2*t,2*t+2),16)/255},getFloatArray:function(e,t,r){var n=e[t],o=new i.Float32Array(n.length),s=0,a=n.length;if(1==r)for(;a>s;s++)o[s]=n[s];else for(;a>s;s++)o[s]=n[s]*r;return o},getIntArray:function(e,t){for(var r=e[t],n=new i.Uint16Array(r.length),o=0,s=r.length;s>o;o++)n[o]=0|r[o];return n}},i.Atlas=function(e,t){this.textureLoader=t,this.pages=[],this.regions=[];var r=new i.AtlasReader(e),n=[];n.length=4;for(var o=null;;){var s=r.readLine();if(null===s)break;if(s=r.trim(s),s.length)if(o){var a=new i.AtlasRegion;a.name=s,a.page=o,a.rotate="true"==r.readValue(),r.readTuple(n);var h=parseInt(n[0]),c=parseInt(n[1]);r.readTuple(n);var u=parseInt(n[0]),f=parseInt(n[1]);a.u=h/o.width,a.v=c/o.height,a.rotate?(a.u2=(h+f)/o.width,a.v2=(c+u)/o.height):(a.u2=(h+u)/o.width,a.v2=(c+f)/o.height),a.x=h,a.y=c,a.width=Math.abs(u),a.height=Math.abs(f),4==r.readTuple(n)&&(a.splits=[parseInt(n[0]),parseInt(n[1]),parseInt(n[2]),parseInt(n[3])],4==r.readTuple(n)&&(a.pads=[parseInt(n[0]),parseInt(n[1]),parseInt(n[2]),parseInt(n[3])],r.readTuple(n))),a.originalWidth=parseInt(n[0]),a.originalHeight=parseInt(n[1]),r.readTuple(n),a.offsetX=parseInt(n[0]),a.offsetY=parseInt(n[1]),a.index=parseInt(r.readValue()),this.regions.push(a)}else{o=new i.AtlasPage,o.name=s,2==r.readTuple(n)&&(o.width=parseInt(n[0]),o.height=parseInt(n[1]),r.readTuple(n)),o.format=i.Atlas.Format[n[0]],r.readTuple(n),o.minFilter=i.Atlas.TextureFilter[n[0]],o.magFilter=i.Atlas.TextureFilter[n[1]];var d=r.readValue();o.uWrap=i.Atlas.TextureWrap.clampToEdge,o.vWrap=i.Atlas.TextureWrap.clampToEdge,"x"==d?o.uWrap=i.Atlas.TextureWrap.repeat:"y"==d?o.vWrap=i.Atlas.TextureWrap.repeat:"xy"==d&&(o.uWrap=o.vWrap=i.Atlas.TextureWrap.repeat),t.load(o,s,this),this.pages.push(o)}else o=null}},i.Atlas.prototype={findRegion:function(e){for(var t=this.regions,r=0,n=t.length;n>r;r++)if(t[r].name==e)return t[r];return null},dispose:function(){for(var e=this.pages,t=0,r=e.length;r>t;t++)this.textureLoader.unload(e[t].rendererObject)},updateUVs:function(e){for(var t=this.regions,r=0,n=t.length;n>r;r++){var i=t[r];i.page==e&&(i.u=i.x/e.width,i.v=i.y/e.height,i.rotate?(i.u2=(i.x+i.height)/e.width,i.v2=(i.y+i.width)/e.height):(i.u2=(i.x+i.width)/e.width,i.v2=(i.y+i.height)/e.height))}}},i.Atlas.Format={alpha:0,intensity:1,luminanceAlpha:2,rgb565:3,rgba4444:4,rgb888:5,rgba8888:6},i.Atlas.TextureFilter={nearest:0,linear:1,mipMap:2,mipMapNearestNearest:3,mipMapLinearNearest:4,mipMapNearestLinear:5,mipMapLinearLinear:6},i.Atlas.TextureWrap={mirroredRepeat:0,clampToEdge:1,repeat:2},i.AtlasPage=function(){},i.AtlasPage.prototype={name:null,format:null,minFilter:null,magFilter:null,uWrap:null,vWrap:null,rendererObject:null,width:0,height:0},i.AtlasRegion=function(){},i.AtlasRegion.prototype={page:null,name:null,x:0,y:0,width:0,height:0,u:0,v:0,u2:0,v2:0,offsetX:0,offsetY:0,originalWidth:0,originalHeight:0,index:0,rotate:!1,splits:null,pads:null},i.AtlasReader=function(e){this.lines=e.split(/\r\n|\r|\n/)},i.AtlasReader.prototype={index:0,trim:function(e){return e.replace(/^\s+|\s+$/g,"")},readLine:function(){return this.index>=this.lines.length?null:this.lines[this.index++]},readValue:function(){var e=this.readLine(),t=e.indexOf(":");if(-1==t)throw"Invalid line: "+e;return this.trim(e.substring(t+1))},readTuple:function(e){var t=this.readLine(),r=t.indexOf(":");if(-1==r)throw"Invalid line: "+t;for(var n=0,i=r+1;3>n;n++){var o=t.indexOf(",",i);if(-1==o)break;e[n]=this.trim(t.substr(i,o-i)),i=o+1}return e[n]=this.trim(t.substring(i)),n+1}},i.AtlasAttachmentLoader=function(e){this.atlas=e},i.AtlasAttachmentLoader.prototype={newRegionAttachment:function(e,t,r){var n=this.atlas.findRegion(r);if(!n)throw"Region not found in atlas: "+r+" (region attachment: "+t+")";
var o=new i.RegionAttachment(t);return o.rendererObject=n,o.setUVs(n.u,n.v,n.u2,n.v2,n.rotate),o.regionOffsetX=n.offsetX,o.regionOffsetY=n.offsetY,o.regionWidth=n.width,o.regionHeight=n.height,o.regionOriginalWidth=n.originalWidth,o.regionOriginalHeight=n.originalHeight,o},newMeshAttachment:function(e,t,r){var n=this.atlas.findRegion(r);if(!n)throw"Region not found in atlas: "+r+" (mesh attachment: "+t+")";var o=new i.MeshAttachment(t);return o.rendererObject=n,o.regionU=n.u,o.regionV=n.v,o.regionU2=n.u2,o.regionV2=n.v2,o.regionRotate=n.rotate,o.regionOffsetX=n.offsetX,o.regionOffsetY=n.offsetY,o.regionWidth=n.width,o.regionHeight=n.height,o.regionOriginalWidth=n.originalWidth,o.regionOriginalHeight=n.originalHeight,o},newSkinnedMeshAttachment:function(e,t,r){var n=this.atlas.findRegion(r);if(!n)throw"Region not found in atlas: "+r+" (skinned mesh attachment: "+t+")";var o=new i.SkinnedMeshAttachment(t);return o.rendererObject=n,o.regionU=n.u,o.regionV=n.v,o.regionU2=n.u2,o.regionV2=n.v2,o.regionRotate=n.rotate,o.regionOffsetX=n.offsetX,o.regionOffsetY=n.offsetY,o.regionWidth=n.width,o.regionHeight=n.height,o.regionOriginalWidth=n.originalWidth,o.regionOriginalHeight=n.originalHeight,o},newBoundingBoxAttachment:function(e,t){return new i.BoundingBoxAttachment(t)}},i.SkeletonBounds=function(){this.polygonPool=[],this.polygons=[],this.boundingBoxes=[]},i.SkeletonBounds.prototype={minX:0,minY:0,maxX:0,maxY:0,update:function(e,t){var r=e.slots,n=r.length,o=e.x,s=e.y,a=this.boundingBoxes,h=this.polygonPool,c=this.polygons;a.length=0;for(var u=0,f=c.length;f>u;u++)h.push(c[u]);c.length=0;for(var u=0;n>u;u++){var d=r[u],l=d.attachment;if(l.type==i.AttachmentType.boundingbox){a.push(l);var p,b=h.length;b>0?(p=h[b-1],h.splice(b-1,1)):p=[],c.push(p),p.length=l.vertices.length,l.computeWorldVertices(o,s,d.bone,p)}}t&&this.aabbCompute()},aabbCompute:function(){for(var e=this.polygons,t=Number.MAX_VALUE,r=Number.MAX_VALUE,n=Number.MIN_VALUE,i=Number.MIN_VALUE,o=0,s=e.length;s>o;o++)for(var a=e[o],h=0,c=a.length;c>h;h+=2){var u=a[h],f=a[h+1];t=Math.min(t,u),r=Math.min(r,f),n=Math.max(n,u),i=Math.max(i,f)}this.minX=t,this.minY=r,this.maxX=n,this.maxY=i},aabbContainsPoint:function(e,t){return e>=this.minX&&e<=this.maxX&&t>=this.minY&&t<=this.maxY},aabbIntersectsSegment:function(e,t,r,n){var i=this.minX,o=this.minY,s=this.maxX,a=this.maxY;if(i>=e&&i>=r||o>=t&&o>=n||e>=s&&r>=s||t>=a&&n>=a)return!1;var h=(n-t)/(r-e),c=h*(i-e)+t;if(c>o&&a>c)return!0;if(c=h*(s-e)+t,c>o&&a>c)return!0;var u=(o-t)/h+e;return u>i&&s>u?!0:(u=(a-t)/h+e,u>i&&s>u?!0:!1)},aabbIntersectsSkeleton:function(e){return this.minX<e.maxX&&this.maxX>e.minX&&this.minY<e.maxY&&this.maxY>e.minY},containsPoint:function(e,t){for(var r=this.polygons,n=0,i=r.length;i>n;n++)if(this.polygonContainsPoint(r[n],e,t))return this.boundingBoxes[n];return null},intersectsSegment:function(e,t,r,n){for(var i=this.polygons,o=0,s=i.length;s>o;o++)if(i[o].intersectsSegment(e,t,r,n))return this.boundingBoxes[o];return null},polygonContainsPoint:function(e,t,r){for(var n=e.length,i=n-2,o=!1,s=0;n>s;s+=2){var a=e[s+1],h=e[i+1];if(r>a&&h>=r||r>h&&a>=r){var c=e[s];c+(r-a)/(h-a)*(e[i]-c)<t&&(o=!o)}i=s}return o},polygonIntersectsSegment:function(e,t,r,n,i){for(var o=e.length,s=t-n,a=r-i,h=t*i-r*n,c=e[o-2],u=e[o-1],f=0;o>f;f+=2){var d=e[f],l=e[f+1],p=c*l-u*d,b=c-d,g=u-l,m=s*g-a*b,v=(h*b-s*p)/m;if((v>=c&&d>=v||v>=d&&c>=v)&&(v>=t&&n>=v||v>=n&&t>=v)){var y=(h*g-a*p)/m;if((y>=u&&l>=y||y>=l&&u>=y)&&(y>=r&&i>=y||y>=i&&r>=y))return!0}c=d,u=l}return!1},getPolygon:function(e){var t=this.boundingBoxes.indexOf(e);return-1==t?null:this.polygons[t]},getWidth:function(){return this.maxX-this.minX},getHeight:function(){return this.maxY-this.minY}},i.Bone.yDown=!0,n.AnimCache={},n.SpineTextureLoader=function(e,t){n.EventTarget.call(this),this.basePath=e,this.crossorigin=t,this.loadingCount=0},n.SpineTextureLoader.prototype=n.SpineTextureLoader,n.SpineTextureLoader.prototype.load=function(e,t){if(e.rendererObject=n.BaseTexture.fromImage(this.basePath+"/"+t,this.crossorigin),!e.rendererObject.hasLoaded){var r=this;++r.loadingCount,e.rendererObject.addEventListener("loaded",function(){--r.loadingCount,r.dispatchEvent({type:"loadedBaseTexture",content:r})})}},n.SpineTextureLoader.prototype.unload=function(e){e.destroy(!0)},n.Spine=function(e){if(n.DisplayObjectContainer.call(this),this.spineData=n.AnimCache[e],!this.spineData)throw new Error("Spine data must be preloaded using PIXI.SpineLoader or PIXI.AssetLoader: "+e);this.skeleton=new i.Skeleton(this.spineData),this.skeleton.updateWorldTransform(),this.stateData=new i.AnimationStateData(this.spineData),this.state=new i.AnimationState(this.stateData),this.slotContainers=[];for(var t=0,r=this.skeleton.drawOrder.length;r>t;t++){var o=this.skeleton.drawOrder[t],s=o.attachment,a=new n.DisplayObjectContainer;if(this.slotContainers.push(a),this.addChild(a),s instanceof i.RegionAttachment){var h=s.rendererObject.name,c=this.createSprite(o,s);o.currentSprite=c,o.currentSpriteName=h,a.addChild(c)}else{if(!(s instanceof i.MeshAttachment))continue;var u=this.createMesh(o,s);o.currentMesh=u,o.currentMeshName=s.name,a.addChild(u)}}this.autoUpdate=!0},n.Spine.prototype=Object.create(n.DisplayObjectContainer.prototype),n.Spine.prototype.constructor=n.Spine,Object.defineProperty(n.Spine.prototype,"autoUpdate",{get:function(){return this.updateTransform===n.Spine.prototype.autoUpdateTransform},set:function(e){this.updateTransform=e?n.Spine.prototype.autoUpdateTransform:n.DisplayObjectContainer.prototype.updateTransform}}),n.Spine.prototype.update=function(e){this.state.update(e),this.state.apply(this.skeleton),this.skeleton.updateWorldTransform();for(var t=this.skeleton.drawOrder,r=0,o=t.length;o>r;r++){var s=t[r],a=s.attachment,h=this.slotContainers[r];if(a){var c=a.type;if(c===i.AttachmentType.region){if(a.rendererObject&&(!s.currentSpriteName||s.currentSpriteName!==a.name)){var u=a.rendererObject.name;if(void 0!==s.currentSprite&&(s.currentSprite.visible=!1),s.sprites=s.sprites||{},void 0!==s.sprites[u])s.sprites[u].visible=!0;else{var f=this.createSprite(s,a);h.addChild(f)}s.currentSprite=s.sprites[u],s.currentSpriteName=u}var d=s.bone;h.position.x=d.worldX+a.x*d.m00+a.y*d.m01,h.position.y=d.worldY+a.x*d.m10+a.y*d.m11,h.scale.x=d.worldScaleX,h.scale.y=d.worldScaleY,h.rotation=-(s.bone.worldRotation*i.degRad),s.currentSprite.tint=n.rgb2hex([s.r,s.g,s.b])}else{if(c!==i.AttachmentType.skinnedmesh){h.visible=!1;continue}if(!s.currentMeshName||s.currentMeshName!==a.name){var l=a.name;if(void 0!==s.currentMesh&&(s.currentMesh.visible=!1),s.meshes=s.meshes||{},void 0!==s.meshes[l])s.meshes[l].visible=!0;else{var p=this.createMesh(s,a);h.addChild(p)}s.currentMesh=s.meshes[l],s.currentMeshName=l}a.computeWorldVertices(s.bone.skeleton.x,s.bone.skeleton.y,s,s.currentMesh.vertices)}h.visible=!0,h.alpha=s.a}else h.visible=!1}},n.Spine.prototype.autoUpdateTransform=function(){this.lastTime=this.lastTime||Date.now();var e=.001*(Date.now()-this.lastTime);this.lastTime=Date.now(),this.update(e),n.DisplayObjectContainer.prototype.updateTransform.call(this)},n.Spine.prototype.createSprite=function(e,t){var r=t.rendererObject,o=r.page.rendererObject,s=new n.Rectangle(r.x,r.y,r.rotate?r.height:r.width,r.rotate?r.width:r.height),a=new n.Texture(o,s),h=new n.Sprite(a),c=r.rotate?.5*Math.PI:0;return h.scale.set(r.width/r.originalWidth,r.height/r.originalHeight),h.rotation=c-t.rotation*i.degRad,h.anchor.x=h.anchor.y=.5,e.sprites=e.sprites||{},e.sprites[r.name]=h,h},n.Spine.prototype.createMesh=function(e,t){var r=t.rendererObject,i=r.page.rendererObject,o=new n.Texture(i),s=new n.Strip(o);return s.drawMode=n.Strip.DrawModes.TRIANGLES,s.canvasPadding=1.5,s.vertices=new n.Float32Array(t.uvs.length),s.uvs=t.uvs,s.indices=t.triangles,e.meshes=e.meshes||{},e.meshes[t.name]=s,s},n.BaseTextureCache={},n.BaseTextureCacheIdGenerator=0,n.BaseTexture=function(e,t){if(this.resolution=1,this.width=100,this.height=100,this.scaleMode=t||n.scaleModes.DEFAULT,this.hasLoaded=!1,this.source=e,this._UID=n._UID++,this.premultipliedAlpha=!0,this._glTextures=[],this.mipmap=!1,this._dirty=[!0,!0,!0,!0],e){if((this.source.complete||this.source.getContext)&&this.source.width&&this.source.height)this.hasLoaded=!0,this.width=this.source.naturalWidth||this.source.width,this.height=this.source.naturalHeight||this.source.height,this.dirty();else{var r=this;this.source.onload=function(){r.hasLoaded=!0,r.width=r.source.naturalWidth||r.source.width,r.height=r.source.naturalHeight||r.source.height,r.dirty(),r.dispatchEvent({type:"loaded",content:r})},this.source.onerror=function(){r.dispatchEvent({type:"error",content:r})}}this.imageUrl=null,this._powerOf2=!1}},n.BaseTexture.prototype.constructor=n.BaseTexture,n.EventTarget.mixin(n.BaseTexture.prototype),n.BaseTexture.prototype.destroy=function(){this.imageUrl?(delete n.BaseTextureCache[this.imageUrl],delete n.TextureCache[this.imageUrl],this.imageUrl=null,navigator.isCocoonJS||(this.source.src="")):this.source&&this.source._pixiId&&delete n.BaseTextureCache[this.source._pixiId],this.source=null,this.unloadFromGPU()},n.BaseTexture.prototype.updateSourceImage=function(e){this.hasLoaded=!1,this.source.src=null,this.source.src=e},n.BaseTexture.prototype.dirty=function(){for(var e=0;e<this._glTextures.length;e++)this._dirty[e]=!0},n.BaseTexture.prototype.unloadFromGPU=function(){this.dirty();for(var e=this._glTextures.length-1;e>=0;e--){var t=this._glTextures[e],r=n.glContexts[e];r&&t&&r.deleteTexture(t)}this._glTextures.length=0,this.dirty()},n.BaseTexture.fromImage=function(e,t,r){var i=n.BaseTextureCache[e];if(void 0===t&&-1===e.indexOf("data:")&&(t=!0),!i){var o=new Image;t&&(o.crossOrigin=""),o.src=e,i=new n.BaseTexture(o,r),i.imageUrl=e,n.BaseTextureCache[e]=i,-1!==e.indexOf(n.RETINA_PREFIX+".")&&(i.resolution=2)}return i},n.BaseTexture.fromCanvas=function(e,t){e._pixiId||(e._pixiId="canvas_"+n.TextureCacheIdGenerator++);var r=n.BaseTextureCache[e._pixiId];return r||(r=new n.BaseTexture(e,t),n.BaseTextureCache[e._pixiId]=r),r},n.TextureCache={},n.FrameCache={},n.TextureCacheIdGenerator=0,n.Texture=function(e,t,r,i){this.noFrame=!1,t||(this.noFrame=!0,t=new n.Rectangle(0,0,1,1)),e instanceof n.Texture&&(e=e.baseTexture),this.baseTexture=e,this.frame=t,this.trim=i,this.valid=!1,this.requiresUpdate=!1,this._uvs=null,this.width=0,this.height=0,this.crop=r||new n.Rectangle(0,0,1,1),e.hasLoaded?(this.noFrame&&(t=new n.Rectangle(0,0,e.width,e.height)),this.setFrame(t)):e.addEventListener("loaded",this.onBaseTextureLoaded.bind(this))},n.Texture.prototype.constructor=n.Texture,n.EventTarget.mixin(n.Texture.prototype),n.Texture.prototype.onBaseTextureLoaded=function(){var e=this.baseTexture;e.removeEventListener("loaded",this.onLoaded),this.noFrame&&(this.frame=new n.Rectangle(0,0,e.width,e.height)),this.setFrame(this.frame),this.dispatchEvent({type:"update",content:this})},n.Texture.prototype.destroy=function(e){e&&this.baseTexture.destroy(),this.valid=!1},n.Texture.prototype.setFrame=function(e){if(this.noFrame=!1,this.frame=e,this.width=e.width,this.height=e.height,this.crop.x=e.x,this.crop.y=e.y,this.crop.width=e.width,this.crop.height=e.height,!this.trim&&(e.x+e.width>this.baseTexture.width||e.y+e.height>this.baseTexture.height))throw new Error("Texture Error: frame does not fit inside the base Texture dimensions "+this);this.valid=e&&e.width&&e.height&&this.baseTexture.source&&this.baseTexture.hasLoaded,this.trim&&(this.width=this.trim.width,this.height=this.trim.height,this.frame.width=this.trim.width,this.frame.height=this.trim.height),this.valid&&this._updateUvs()},n.Texture.prototype._updateUvs=function(){this._uvs||(this._uvs=new n.TextureUvs);var e=this.crop,t=this.baseTexture.width,r=this.baseTexture.height;this._uvs.x0=e.x/t,this._uvs.y0=e.y/r,this._uvs.x1=(e.x+e.width)/t,this._uvs.y1=e.y/r,this._uvs.x2=(e.x+e.width)/t,this._uvs.y2=(e.y+e.height)/r,this._uvs.x3=e.x/t,this._uvs.y3=(e.y+e.height)/r},n.Texture.fromImage=function(e,t,r){var i=n.TextureCache[e];return i||(i=new n.Texture(n.BaseTexture.fromImage(e,t,r)),n.TextureCache[e]=i),i},n.Texture.fromFrame=function(e){var t=n.TextureCache[e];if(!t)throw new Error('The frameId "'+e+'" does not exist in the texture cache ');return t},n.Texture.fromCanvas=function(e,t){var r=n.BaseTexture.fromCanvas(e,t);return new n.Texture(r)},n.Texture.addTextureToCache=function(e,t){n.TextureCache[t]=e},n.Texture.removeTextureFromCache=function(e){var t=n.TextureCache[e];return delete n.TextureCache[e],delete n.BaseTextureCache[e],t},n.TextureUvs=function(){this.x0=0,this.y0=0,this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.x3=0,this.y3=0},n.Texture.emptyTexture=new n.Texture(new n.BaseTexture),n.RenderTexture=function(e,t,r,i,o){if(this.width=e||100,this.height=t||100,this.resolution=o||1,this.frame=new n.Rectangle(0,0,this.width*this.resolution,this.height*this.resolution),this.crop=new n.Rectangle(0,0,this.width*this.resolution,this.height*this.resolution),this.baseTexture=new n.BaseTexture,this.baseTexture.width=this.width*this.resolution,this.baseTexture.height=this.height*this.resolution,this.baseTexture._glTextures=[],this.baseTexture.resolution=this.resolution,this.baseTexture.scaleMode=i||n.scaleModes.DEFAULT,this.baseTexture.hasLoaded=!0,n.Texture.call(this,this.baseTexture,new n.Rectangle(0,0,this.width,this.height)),this.renderer=r||n.defaultRenderer,this.renderer.type===n.WEBGL_RENDERER){var s=this.renderer.gl;this.baseTexture._dirty[s.id]=!1,this.textureBuffer=new n.FilterTexture(s,this.width*this.resolution,this.height*this.resolution,this.baseTexture.scaleMode),this.baseTexture._glTextures[s.id]=this.textureBuffer.texture,this.render=this.renderWebGL,this.projection=new n.Point(.5*this.width,.5*-this.height)}else this.render=this.renderCanvas,this.textureBuffer=new n.CanvasBuffer(this.width*this.resolution,this.height*this.resolution),this.baseTexture.source=this.textureBuffer.canvas;this.valid=!0,this._updateUvs()},n.RenderTexture.prototype=Object.create(n.Texture.prototype),n.RenderTexture.prototype.constructor=n.RenderTexture,n.RenderTexture.prototype.resize=function(e,t,r){(e!==this.width||t!==this.height)&&(this.valid=e>0&&t>0,this.width=this.frame.width=this.crop.width=e,this.height=this.frame.height=this.crop.height=t,r&&(this.baseTexture.width=this.width,this.baseTexture.height=this.height),this.renderer.type===n.WEBGL_RENDERER&&(this.projection.x=this.width/2,this.projection.y=-this.height/2),this.valid&&this.textureBuffer.resize(this.width*this.resolution,this.height*this.resolution))},n.RenderTexture.prototype.clear=function(){this.valid&&(this.renderer.type===n.WEBGL_RENDERER&&this.renderer.gl.bindFramebuffer(this.renderer.gl.FRAMEBUFFER,this.textureBuffer.frameBuffer),this.textureBuffer.clear())},n.RenderTexture.prototype.renderWebGL=function(e,t,r){if(this.valid){var n=e.worldTransform;n.identity(),n.translate(0,2*this.projection.y),t&&n.append(t),n.scale(1,-1),e.worldAlpha=1;for(var i=e.children,o=0,s=i.length;s>o;o++)i[o].updateTransform();var a=this.renderer.gl;a.viewport(0,0,this.width*this.resolution,this.height*this.resolution),a.bindFramebuffer(a.FRAMEBUFFER,this.textureBuffer.frameBuffer),r&&this.textureBuffer.clear(),this.renderer.spriteBatch.dirty=!0,this.renderer.renderDisplayObject(e,this.projection,this.textureBuffer.frameBuffer),this.renderer.spriteBatch.dirty=!0}},n.RenderTexture.prototype.renderCanvas=function(e,t,r){if(this.valid){var n=e.worldTransform;n.identity(),t&&n.append(t),e.worldAlpha=1;for(var i=e.children,o=0,s=i.length;s>o;o++)i[o].updateTransform();r&&this.textureBuffer.clear();var a=this.textureBuffer.context,h=this.renderer.resolution;this.renderer.resolution=this.resolution,this.renderer.renderDisplayObject(e,a),this.renderer.resolution=h}},n.RenderTexture.prototype.getImage=function(){var e=new Image;return e.src=this.getBase64(),e},n.RenderTexture.prototype.getBase64=function(){return this.getCanvas().toDataURL()},n.RenderTexture.prototype.getCanvas=function(){if(this.renderer.type===n.WEBGL_RENDERER){var e=this.renderer.gl,t=this.textureBuffer.width,r=this.textureBuffer.height,i=new Uint8Array(4*t*r);e.bindFramebuffer(e.FRAMEBUFFER,this.textureBuffer.frameBuffer),e.readPixels(0,0,t,r,e.RGBA,e.UNSIGNED_BYTE,i),e.bindFramebuffer(e.FRAMEBUFFER,null);var o=new n.CanvasBuffer(t,r),s=o.context.getImageData(0,0,t,r);return s.data.set(i),o.context.putImageData(s,0,0),o.canvas}return this.textureBuffer.canvas},n.RenderTexture.tempMatrix=new n.Matrix,n.VideoTexture=function(e,t){if(!e)throw new Error("No video source element specified.");(e.readyState===e.HAVE_ENOUGH_DATA||e.readyState===e.HAVE_FUTURE_DATA)&&e.width&&e.height&&(e.complete=!0),n.BaseTexture.call(this,e,t),this.autoUpdate=!1,this.updateBound=this._onUpdate.bind(this),e.complete||(this._onCanPlay=this.onCanPlay.bind(this),e.addEventListener("canplay",this._onCanPlay),e.addEventListener("canplaythrough",this._onCanPlay),e.addEventListener("play",this.onPlayStart.bind(this)),e.addEventListener("pause",this.onPlayStop.bind(this)))},n.VideoTexture.prototype=Object.create(n.BaseTexture.prototype),n.VideoTexture.constructor=n.VideoTexture,n.VideoTexture.prototype._onUpdate=function(){this.autoUpdate&&(window.requestAnimationFrame(this.updateBound),this.dirty())},n.VideoTexture.prototype.onPlayStart=function(){this.autoUpdate||(window.requestAnimationFrame(this.updateBound),this.autoUpdate=!0)},n.VideoTexture.prototype.onPlayStop=function(){this.autoUpdate=!1},n.VideoTexture.prototype.onCanPlay=function(){"canplaythrough"===event.type&&(this.hasLoaded=!0,this.source&&(this.source.removeEventListener("canplay",this._onCanPlay),this.source.removeEventListener("canplaythrough",this._onCanPlay),this.width=this.source.videoWidth,this.height=this.source.videoHeight,this.__loaded||(this.__loaded=!0,this.dispatchEvent({type:"loaded",content:this}))))},n.VideoTexture.prototype.destroy=function(){this.source&&this.source._pixiId&&(n.BaseTextureCache[this.source._pixiId]=null,delete n.BaseTextureCache[this.source._pixiId],this.source._pixiId=null,delete this.source._pixiId),n.BaseTexture.prototype.destroy.call(this)},n.VideoTexture.baseTextureFromVideo=function(e,t){e._pixiId||(e._pixiId="video_"+n.TextureCacheIdGenerator++);var r=n.BaseTextureCache[e._pixiId];return r||(r=new n.VideoTexture(e,t),n.BaseTextureCache[e._pixiId]=r),r},n.VideoTexture.textureFromVideo=function(e,t){var r=n.VideoTexture.baseTextureFromVideo(e,t);return new n.Texture(r)},n.VideoTexture.fromUrl=function(e,t){var r=document.createElement("video");return r.src=e,r.autoPlay=!0,r.play(),n.VideoTexture.textureFromVideo(r,t)},n.AssetLoader=function(e,t){this.assetURLs=e,this.crossorigin=t,this.loadersByType={jpg:n.ImageLoader,jpeg:n.ImageLoader,png:n.ImageLoader,gif:n.ImageLoader,webp:n.ImageLoader,json:n.JsonLoader,atlas:n.AtlasLoader,anim:n.SpineLoader,xml:n.BitmapFontLoader,fnt:n.BitmapFontLoader}},n.EventTarget.mixin(n.AssetLoader.prototype),n.AssetLoader.prototype.constructor=n.AssetLoader,n.AssetLoader.prototype._getDataType=function(e){var t="data:",r=e.slice(0,t.length).toLowerCase();if(r===t){var n=e.slice(t.length),i=n.indexOf(",");if(-1===i)return null;var o=n.slice(0,i).split(";")[0];return o&&"text/plain"!==o.toLowerCase()?o.split("/").pop().toLowerCase():"txt"}return null},n.AssetLoader.prototype.load=function(){function e(e){t.onAssetLoaded(e.data.content)}var t=this;this.loadCount=this.assetURLs.length;for(var r=0;r<this.assetURLs.length;r++){var n=this.assetURLs[r],i=this._getDataType(n);i||(i=n.split("?").shift().split(".").pop().toLowerCase());var o=this.loadersByType[i];if(!o)throw new Error(i+" is an unsupported file type");var s=new o(n,this.crossorigin);s.on("loaded",e),s.load()}},n.AssetLoader.prototype.onAssetLoaded=function(e){this.loadCount--,this.emit("onProgress",{content:this,loader:e}),this.onProgress&&this.onProgress(e),this.loadCount||(this.emit("onComplete",{content:this}),this.onComplete&&this.onComplete())},n.JsonLoader=function(e,t){this.url=e,this.crossorigin=t,this.baseUrl=e.replace(/[^\/]*$/,""),this.loaded=!1},n.JsonLoader.prototype.constructor=n.JsonLoader,n.EventTarget.mixin(n.JsonLoader.prototype),n.JsonLoader.prototype.load=function(){window.XDomainRequest&&this.crossorigin?(this.ajaxRequest=new window.XDomainRequest,this.ajaxRequest.timeout=3e3,this.ajaxRequest.onerror=this.onError.bind(this),this.ajaxRequest.ontimeout=this.onError.bind(this),this.ajaxRequest.onprogress=function(){},this.ajaxRequest.onload=this.onJSONLoaded.bind(this)):(this.ajaxRequest=window.XMLHttpRequest?new window.XMLHttpRequest:new window.ActiveXObject("Microsoft.XMLHTTP"),this.ajaxRequest.onreadystatechange=this.onReadyStateChanged.bind(this)),this.ajaxRequest.open("GET",this.url,!0),this.ajaxRequest.send()},n.JsonLoader.prototype.onReadyStateChanged=function(){4!==this.ajaxRequest.readyState||200!==this.ajaxRequest.status&&-1!==window.location.href.indexOf("http")||this.onJSONLoaded()},n.JsonLoader.prototype.onJSONLoaded=function(){if(!this.ajaxRequest.responseText)return void this.onError();if(this.json=JSON.parse(this.ajaxRequest.responseText),this.json.frames){var e=this.baseUrl+this.json.meta.image,t=new n.ImageLoader(e,this.crossorigin),r=this.json.frames;this.texture=t.texture.baseTexture,t.addEventListener("loaded",this.onLoaded.bind(this));for(var o in r){var s=r[o].frame;if(s){var a=new n.Rectangle(s.x,s.y,s.w,s.h),h=a.clone(),c=null;if(r[o].trimmed){var u=r[o].sourceSize,f=r[o].spriteSourceSize;c=new n.Rectangle(f.x,f.y,u.w,u.h)}n.TextureCache[o]=new n.Texture(this.texture,a,h,c)}}t.load()}else if(this.json.bones)if(n.AnimCache[this.url])this.onLoaded();else{var d=this.url.substr(0,this.url.lastIndexOf("."))+".atlas",l=new n.JsonLoader(d,this.crossorigin),p=this;l.onJSONLoaded=function(){if(!this.ajaxRequest.responseText)return void this.onError();var e=new n.SpineTextureLoader(this.url.substring(0,this.url.lastIndexOf("/"))),t=new i.Atlas(this.ajaxRequest.responseText,e),r=new i.AtlasAttachmentLoader(t),o=new i.SkeletonJson(r),s=o.readSkeletonData(p.json);n.AnimCache[p.url]=s,p.spine=s,p.spineAtlas=t,p.spineAtlasLoader=l,e.loadingCount>0?e.addEventListener("loadedBaseTexture",function(e){e.content.content.loadingCount<=0&&p.onLoaded()}):p.onLoaded()},l.load()}else this.onLoaded()},n.JsonLoader.prototype.onLoaded=function(){this.loaded=!0,this.dispatchEvent({type:"loaded",content:this})},n.JsonLoader.prototype.onError=function(){this.dispatchEvent({type:"error",content:this})},n.AtlasLoader=function(e,t){this.url=e,this.baseUrl=e.replace(/[^\/]*$/,""),this.crossorigin=t,this.loaded=!1},n.AtlasLoader.constructor=n.AtlasLoader,n.EventTarget.mixin(n.AtlasLoader.prototype),n.AtlasLoader.prototype.load=function(){this.ajaxRequest=new n.AjaxRequest,this.ajaxRequest.onreadystatechange=this.onAtlasLoaded.bind(this),this.ajaxRequest.open("GET",this.url,!0),this.ajaxRequest.overrideMimeType&&this.ajaxRequest.overrideMimeType("application/json"),this.ajaxRequest.send(null)},n.AtlasLoader.prototype.onAtlasLoaded=function(){if(4===this.ajaxRequest.readyState)if(200===this.ajaxRequest.status||-1===window.location.href.indexOf("http")){this.atlas={meta:{image:[]},frames:[]};var e=this.ajaxRequest.responseText.split(/\r?\n/),t=-3,r=0,i=null,o=!1,s=0,a=0,h=this.onLoaded.bind(this);for(s=0;s<e.length;s++)if(e[s]=e[s].replace(/^\s+|\s+$/g,""),""===e[s]&&(o=s+1),e[s].length>0){if(o===s)this.atlas.meta.image.push(e[s]),r=this.atlas.meta.image.length-1,this.atlas.frames.push({}),t=-3;else if(t>0)if(t%7===1)null!=i&&(this.atlas.frames[r][i.name]=i),i={name:e[s],frame:{}};else{var c=e[s].split(" ");if(t%7===3)i.frame.x=Number(c[1].replace(",","")),i.frame.y=Number(c[2]);else if(t%7===4)i.frame.w=Number(c[1].replace(",","")),i.frame.h=Number(c[2]);else if(t%7===5){var u={x:0,y:0,w:Number(c[1].replace(",","")),h:Number(c[2])};u.w>i.frame.w||u.h>i.frame.h?(i.trimmed=!0,i.realSize=u):i.trimmed=!1}}t++}if(null!=i&&(this.atlas.frames[r][i.name]=i),this.atlas.meta.image.length>0){for(this.images=[],a=0;a<this.atlas.meta.image.length;a++){var f=this.baseUrl+this.atlas.meta.image[a],d=this.atlas.frames[a];this.images.push(new n.ImageLoader(f,this.crossorigin));for(s in d){var l=d[s].frame;l&&(n.TextureCache[s]=new n.Texture(this.images[a].texture.baseTexture,{x:l.x,y:l.y,width:l.w,height:l.h}),d[s].trimmed&&(n.TextureCache[s].realSize=d[s].realSize,n.TextureCache[s].trim.x=0,n.TextureCache[s].trim.y=0))}}for(this.currentImageId=0,a=0;a<this.images.length;a++)this.images[a].on("loaded",h);this.images[this.currentImageId].load()}else this.onLoaded()}else this.onError()},n.AtlasLoader.prototype.onLoaded=function(){this.images.length-1>this.currentImageId?(this.currentImageId++,this.images[this.currentImageId].load()):(this.loaded=!0,this.emit("loaded",{content:this}))},n.AtlasLoader.prototype.onError=function(){this.emit("error",{content:this})},n.SpriteSheetLoader=function(e,t){this.url=e,this.crossorigin=t,this.baseUrl=e.replace(/[^\/]*$/,""),this.texture=null,this.frames={}},n.SpriteSheetLoader.prototype.constructor=n.SpriteSheetLoader,n.EventTarget.mixin(n.SpriteSheetLoader.prototype),n.SpriteSheetLoader.prototype.load=function(){var e=this,t=new n.JsonLoader(this.url,this.crossorigin);t.on("loaded",function(t){e.json=t.data.content.json,e.onLoaded()}),t.load()},n.SpriteSheetLoader.prototype.onLoaded=function(){this.emit("loaded",{content:this})},n.ImageLoader=function(e,t){this.texture=n.Texture.fromImage(e,t),this.frames=[]},n.ImageLoader.prototype.constructor=n.ImageLoader,n.EventTarget.mixin(n.ImageLoader.prototype),n.ImageLoader.prototype.load=function(){this.texture.baseTexture.hasLoaded?this.onLoaded():this.texture.baseTexture.on("loaded",this.onLoaded.bind(this))},n.ImageLoader.prototype.onLoaded=function(){this.emit("loaded",{content:this})},n.ImageLoader.prototype.loadFramedSpriteSheet=function(e,t,r){this.frames=[];for(var i=Math.floor(this.texture.width/e),o=Math.floor(this.texture.height/t),s=0,a=0;o>a;a++)for(var h=0;i>h;h++,s++){var c=new n.Texture(this.texture.baseTexture,{x:h*e,y:a*t,width:e,height:t});this.frames.push(c),r&&(n.TextureCache[r+"-"+s]=c)}this.load()},n.BitmapFontLoader=function(e,t){this.url=e,this.crossorigin=t,this.baseUrl=e.replace(/[^\/]*$/,""),this.texture=null},n.BitmapFontLoader.prototype.constructor=n.BitmapFontLoader,n.EventTarget.mixin(n.BitmapFontLoader.prototype),n.BitmapFontLoader.prototype.load=function(){this.ajaxRequest=new n.AjaxRequest,this.ajaxRequest.onreadystatechange=this.onXMLLoaded.bind(this),this.ajaxRequest.open("GET",this.url,!0),this.ajaxRequest.overrideMimeType&&this.ajaxRequest.overrideMimeType("application/xml"),this.ajaxRequest.send(null)},n.BitmapFontLoader.prototype.onXMLLoaded=function(){if(4===this.ajaxRequest.readyState&&(200===this.ajaxRequest.status||-1===window.location.protocol.indexOf("http"))){var e=this.ajaxRequest.responseXML;if(!e||/MSIE 9/i.test(navigator.userAgent)||navigator.isCocoonJS)if("function"==typeof window.DOMParser){var t=new DOMParser;e=t.parseFromString(this.ajaxRequest.responseText,"text/xml")}else{var r=document.createElement("div");r.innerHTML=this.ajaxRequest.responseText,e=r}var i=this.baseUrl+e.getElementsByTagName("page")[0].getAttribute("file"),o=new n.ImageLoader(i,this.crossorigin);this.texture=o.texture.baseTexture;var s={},a=e.getElementsByTagName("info")[0],h=e.getElementsByTagName("common")[0];s.font=a.getAttribute("face"),s.size=parseInt(a.getAttribute("size"),10),s.lineHeight=parseInt(h.getAttribute("lineHeight"),10),s.chars={};for(var c=e.getElementsByTagName("char"),u=0;u<c.length;u++){var f=parseInt(c[u].getAttribute("id"),10),d=new n.Rectangle(parseInt(c[u].getAttribute("x"),10),parseInt(c[u].getAttribute("y"),10),parseInt(c[u].getAttribute("width"),10),parseInt(c[u].getAttribute("height"),10));s.chars[f]={xOffset:parseInt(c[u].getAttribute("xoffset"),10),yOffset:parseInt(c[u].getAttribute("yoffset"),10),xAdvance:parseInt(c[u].getAttribute("xadvance"),10),kerning:{},texture:n.TextureCache[f]=new n.Texture(this.texture,d)}}var l=e.getElementsByTagName("kerning");for(u=0;u<l.length;u++){var p=parseInt(l[u].getAttribute("first"),10),b=parseInt(l[u].getAttribute("second"),10),g=parseInt(l[u].getAttribute("amount"),10);s.chars[b].kerning[p]=g}n.BitmapText.fonts[s.font]=s,o.addEventListener("loaded",this.onLoaded.bind(this)),o.load()}},n.BitmapFontLoader.prototype.onLoaded=function(){this.emit("loaded",{content:this})},n.SpineLoader=function(e,t){this.url=e,this.crossorigin=t,this.loaded=!1},n.SpineLoader.prototype.constructor=n.SpineLoader,n.EventTarget.mixin(n.SpineLoader.prototype),n.SpineLoader.prototype.load=function(){var e=this,t=new n.JsonLoader(this.url,this.crossorigin);t.on("loaded",function(t){e.json=t.data.content.json,e.onLoaded()}),t.load()},n.SpineLoader.prototype.onLoaded=function(){this.loaded=!0,this.emit("loaded",{content:this})},n.AbstractFilter=function(e,t){this.passes=[this],this.shaders=[],this.dirty=!0,this.padding=0,this.uniforms=t||{},this.fragmentSrc=e||[]},n.AbstractFilter.prototype.constructor=n.AbstractFilter,n.AbstractFilter.prototype.syncUniforms=function(){for(var e=0,t=this.shaders.length;t>e;e++)this.shaders[e].dirty=!0},n.AlphaMaskFilter=function(e){n.AbstractFilter.call(this),this.passes=[this],e.baseTexture._powerOf2=!0,this.uniforms={mask:{type:"sampler2D",value:e},mapDimensions:{type:"2f",value:{x:1,y:5112}},dimensions:{type:"4fv",value:[0,0,0,0]}},e.baseTexture.hasLoaded?(this.uniforms.mask.value.x=e.width,this.uniforms.mask.value.y=e.height):(this.boundLoadedFunction=this.onTextureLoaded.bind(this),e.baseTexture.on("loaded",this.boundLoadedFunction)),this.fragmentSrc=["precision mediump float;","varying vec2 vTextureCoord;","varying vec4 vColor;","uniform sampler2D mask;","uniform sampler2D uSampler;","uniform vec2 offset;","uniform vec4 dimensions;","uniform vec2 mapDimensions;","void main(void) {","   vec2 mapCords = vTextureCoord.xy;","   mapCords += (dimensions.zw + offset)/ dimensions.xy ;","   mapCords.y *= -1.0;","   mapCords.y += 1.0;","   mapCords *= dimensions.xy / mapDimensions;","   vec4 original =  texture2D(uSampler, vTextureCoord);","   float maskAlpha =  texture2D(mask, mapCords).r;","   original *= maskAlpha;","   gl_FragColor =  original;","}"]},n.AlphaMaskFilter.prototype=Object.create(n.AbstractFilter.prototype),n.AlphaMaskFilter.prototype.constructor=n.AlphaMaskFilter,n.AlphaMaskFilter.prototype.onTextureLoaded=function(){this.uniforms.mapDimensions.value.x=this.uniforms.mask.value.width,this.uniforms.mapDimensions.value.y=this.uniforms.mask.value.height,this.uniforms.mask.value.baseTexture.off("loaded",this.boundLoadedFunction)},Object.defineProperty(n.AlphaMaskFilter.prototype,"map",{get:function(){return this.uniforms.mask.value},set:function(e){this.uniforms.mask.value=e}}),n.ColorMatrixFilter=function(){n.AbstractFilter.call(this),this.passes=[this],this.uniforms={matrix:{type:"mat4",value:[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}},this.fragmentSrc=["precision mediump float;","varying vec2 vTextureCoord;","varying vec4 vColor;","uniform float invert;","uniform mat4 matrix;","uniform sampler2D uSampler;","void main(void) {","   gl_FragColor = texture2D(uSampler, vTextureCoord) * matrix;","}"]},n.ColorMatrixFilter.prototype=Object.create(n.AbstractFilter.prototype),n.ColorMatrixFilter.prototype.constructor=n.ColorMatrixFilter,Object.defineProperty(n.ColorMatrixFilter.prototype,"matrix",{get:function(){return this.uniforms.matrix.value},set:function(e){this.uniforms.matrix.value=e}}),n.GrayFilter=function(){n.AbstractFilter.call(this),this.passes=[this],this.uniforms={gray:{type:"1f",value:1}},this.fragmentSrc=["precision mediump float;","varying vec2 vTextureCoord;","varying vec4 vColor;","uniform sampler2D uSampler;","uniform float gray;","void main(void) {","   gl_FragColor = texture2D(uSampler, vTextureCoord);","   gl_FragColor.rgb = mix(gl_FragColor.rgb, vec3(0.2126*gl_FragColor.r + 0.7152*gl_FragColor.g + 0.0722*gl_FragColor.b), gray);","}"]},n.GrayFilter.prototype=Object.create(n.AbstractFilter.prototype),n.GrayFilter.prototype.constructor=n.GrayFilter,Object.defineProperty(n.GrayFilter.prototype,"gray",{get:function(){return this.uniforms.gray.value
},set:function(e){this.uniforms.gray.value=e}}),n.DisplacementFilter=function(e){n.AbstractFilter.call(this),this.passes=[this],e.baseTexture._powerOf2=!0,this.uniforms={displacementMap:{type:"sampler2D",value:e},scale:{type:"2f",value:{x:30,y:30}},offset:{type:"2f",value:{x:0,y:0}},mapDimensions:{type:"2f",value:{x:1,y:5112}},dimensions:{type:"4fv",value:[0,0,0,0]}},e.baseTexture.hasLoaded?(this.uniforms.mapDimensions.value.x=e.width,this.uniforms.mapDimensions.value.y=e.height):(this.boundLoadedFunction=this.onTextureLoaded.bind(this),e.baseTexture.on("loaded",this.boundLoadedFunction)),this.fragmentSrc=["precision mediump float;","varying vec2 vTextureCoord;","varying vec4 vColor;","uniform sampler2D displacementMap;","uniform sampler2D uSampler;","uniform vec2 scale;","uniform vec2 offset;","uniform vec4 dimensions;","uniform vec2 mapDimensions;","void main(void) {","   vec2 mapCords = vTextureCoord.xy;","   mapCords += (dimensions.zw + offset)/ dimensions.xy ;","   mapCords.y *= -1.0;","   mapCords.y += 1.0;","   vec2 matSample = texture2D(displacementMap, mapCords).xy;","   matSample -= 0.5;","   matSample *= scale;","   matSample /= mapDimensions;","   gl_FragColor = texture2D(uSampler, vec2(vTextureCoord.x + matSample.x, vTextureCoord.y + matSample.y));","   gl_FragColor.rgb = mix( gl_FragColor.rgb, gl_FragColor.rgb, 1.0);","   vec2 cord = vTextureCoord;","}"]},n.DisplacementFilter.prototype=Object.create(n.AbstractFilter.prototype),n.DisplacementFilter.prototype.constructor=n.DisplacementFilter,n.DisplacementFilter.prototype.onTextureLoaded=function(){this.uniforms.mapDimensions.value.x=this.uniforms.displacementMap.value.width,this.uniforms.mapDimensions.value.y=this.uniforms.displacementMap.value.height,this.uniforms.displacementMap.value.baseTexture.off("loaded",this.boundLoadedFunction)},Object.defineProperty(n.DisplacementFilter.prototype,"map",{get:function(){return this.uniforms.displacementMap.value},set:function(e){this.uniforms.displacementMap.value=e}}),Object.defineProperty(n.DisplacementFilter.prototype,"scale",{get:function(){return this.uniforms.scale.value},set:function(e){this.uniforms.scale.value=e}}),Object.defineProperty(n.DisplacementFilter.prototype,"offset",{get:function(){return this.uniforms.offset.value},set:function(e){this.uniforms.offset.value=e}}),n.PixelateFilter=function(){n.AbstractFilter.call(this),this.passes=[this],this.uniforms={invert:{type:"1f",value:0},dimensions:{type:"4fv",value:new n.Float32Array([1e4,100,10,10])},pixelSize:{type:"2f",value:{x:10,y:10}}},this.fragmentSrc=["precision mediump float;","varying vec2 vTextureCoord;","varying vec4 vColor;","uniform vec2 testDim;","uniform vec4 dimensions;","uniform vec2 pixelSize;","uniform sampler2D uSampler;","void main(void) {","   vec2 coord = vTextureCoord;","   vec2 size = dimensions.xy/pixelSize;","   vec2 color = floor( ( vTextureCoord * size ) ) / size + pixelSize/dimensions.xy * 0.5;","   gl_FragColor = texture2D(uSampler, color);","}"]},n.PixelateFilter.prototype=Object.create(n.AbstractFilter.prototype),n.PixelateFilter.prototype.constructor=n.PixelateFilter,Object.defineProperty(n.PixelateFilter.prototype,"size",{get:function(){return this.uniforms.pixelSize.value},set:function(e){this.dirty=!0,this.uniforms.pixelSize.value=e}}),n.BlurXFilter=function(){n.AbstractFilter.call(this),this.passes=[this],this.uniforms={blur:{type:"1f",value:1/512}},this.fragmentSrc=["precision mediump float;","varying vec2 vTextureCoord;","varying vec4 vColor;","uniform float blur;","uniform sampler2D uSampler;","void main(void) {","   vec4 sum = vec4(0.0);","   sum += texture2D(uSampler, vec2(vTextureCoord.x - 4.0*blur, vTextureCoord.y)) * 0.05;","   sum += texture2D(uSampler, vec2(vTextureCoord.x - 3.0*blur, vTextureCoord.y)) * 0.09;","   sum += texture2D(uSampler, vec2(vTextureCoord.x - 2.0*blur, vTextureCoord.y)) * 0.12;","   sum += texture2D(uSampler, vec2(vTextureCoord.x - blur, vTextureCoord.y)) * 0.15;","   sum += texture2D(uSampler, vec2(vTextureCoord.x, vTextureCoord.y)) * 0.16;","   sum += texture2D(uSampler, vec2(vTextureCoord.x + blur, vTextureCoord.y)) * 0.15;","   sum += texture2D(uSampler, vec2(vTextureCoord.x + 2.0*blur, vTextureCoord.y)) * 0.12;","   sum += texture2D(uSampler, vec2(vTextureCoord.x + 3.0*blur, vTextureCoord.y)) * 0.09;","   sum += texture2D(uSampler, vec2(vTextureCoord.x + 4.0*blur, vTextureCoord.y)) * 0.05;","   gl_FragColor = sum;","}"]},n.BlurXFilter.prototype=Object.create(n.AbstractFilter.prototype),n.BlurXFilter.prototype.constructor=n.BlurXFilter,Object.defineProperty(n.BlurXFilter.prototype,"blur",{get:function(){return this.uniforms.blur.value/(1/7e3)},set:function(e){this.dirty=!0,this.uniforms.blur.value=1/7e3*e}}),n.BlurYFilter=function(){n.AbstractFilter.call(this),this.passes=[this],this.uniforms={blur:{type:"1f",value:1/512}},this.fragmentSrc=["precision mediump float;","varying vec2 vTextureCoord;","varying vec4 vColor;","uniform float blur;","uniform sampler2D uSampler;","void main(void) {","   vec4 sum = vec4(0.0);","   sum += texture2D(uSampler, vec2(vTextureCoord.x, vTextureCoord.y - 4.0*blur)) * 0.05;","   sum += texture2D(uSampler, vec2(vTextureCoord.x, vTextureCoord.y - 3.0*blur)) * 0.09;","   sum += texture2D(uSampler, vec2(vTextureCoord.x, vTextureCoord.y - 2.0*blur)) * 0.12;","   sum += texture2D(uSampler, vec2(vTextureCoord.x, vTextureCoord.y - blur)) * 0.15;","   sum += texture2D(uSampler, vec2(vTextureCoord.x, vTextureCoord.y)) * 0.16;","   sum += texture2D(uSampler, vec2(vTextureCoord.x, vTextureCoord.y + blur)) * 0.15;","   sum += texture2D(uSampler, vec2(vTextureCoord.x, vTextureCoord.y + 2.0*blur)) * 0.12;","   sum += texture2D(uSampler, vec2(vTextureCoord.x, vTextureCoord.y + 3.0*blur)) * 0.09;","   sum += texture2D(uSampler, vec2(vTextureCoord.x, vTextureCoord.y + 4.0*blur)) * 0.05;","   gl_FragColor = sum;","}"]},n.BlurYFilter.prototype=Object.create(n.AbstractFilter.prototype),n.BlurYFilter.prototype.constructor=n.BlurYFilter,Object.defineProperty(n.BlurYFilter.prototype,"blur",{get:function(){return this.uniforms.blur.value/(1/7e3)},set:function(e){this.uniforms.blur.value=1/7e3*e}}),n.BlurFilter=function(){this.blurXFilter=new n.BlurXFilter,this.blurYFilter=new n.BlurYFilter,this.passes=[this.blurXFilter,this.blurYFilter]},n.BlurFilter.prototype=Object.create(n.AbstractFilter.prototype),n.BlurFilter.prototype.constructor=n.BlurFilter,Object.defineProperty(n.BlurFilter.prototype,"blur",{get:function(){return this.blurXFilter.blur},set:function(e){this.blurXFilter.blur=this.blurYFilter.blur=e}}),Object.defineProperty(n.BlurFilter.prototype,"blurX",{get:function(){return this.blurXFilter.blur},set:function(e){this.blurXFilter.blur=e}}),Object.defineProperty(n.BlurFilter.prototype,"blurY",{get:function(){return this.blurYFilter.blur},set:function(e){this.blurYFilter.blur=e}}),n.InvertFilter=function(){n.AbstractFilter.call(this),this.passes=[this],this.uniforms={invert:{type:"1f",value:1}},this.fragmentSrc=["precision mediump float;","varying vec2 vTextureCoord;","varying vec4 vColor;","uniform float invert;","uniform sampler2D uSampler;","void main(void) {","   gl_FragColor = texture2D(uSampler, vTextureCoord);","   gl_FragColor.rgb = mix( (vec3(1)-gl_FragColor.rgb) * gl_FragColor.a, gl_FragColor.rgb, 1.0 - invert);","}"]},n.InvertFilter.prototype=Object.create(n.AbstractFilter.prototype),n.InvertFilter.prototype.constructor=n.InvertFilter,Object.defineProperty(n.InvertFilter.prototype,"invert",{get:function(){return this.uniforms.invert.value},set:function(e){this.uniforms.invert.value=e}}),n.SepiaFilter=function(){n.AbstractFilter.call(this),this.passes=[this],this.uniforms={sepia:{type:"1f",value:1}},this.fragmentSrc=["precision mediump float;","varying vec2 vTextureCoord;","varying vec4 vColor;","uniform float sepia;","uniform sampler2D uSampler;","const mat3 sepiaMatrix = mat3(0.3588, 0.7044, 0.1368, 0.2990, 0.5870, 0.1140, 0.2392, 0.4696, 0.0912);","void main(void) {","   gl_FragColor = texture2D(uSampler, vTextureCoord);","   gl_FragColor.rgb = mix( gl_FragColor.rgb, gl_FragColor.rgb * sepiaMatrix, sepia);","}"]},n.SepiaFilter.prototype=Object.create(n.AbstractFilter.prototype),n.SepiaFilter.prototype.constructor=n.SepiaFilter,Object.defineProperty(n.SepiaFilter.prototype,"sepia",{get:function(){return this.uniforms.sepia.value},set:function(e){this.uniforms.sepia.value=e}}),n.TwistFilter=function(){n.AbstractFilter.call(this),this.passes=[this],this.uniforms={radius:{type:"1f",value:.5},angle:{type:"1f",value:5},offset:{type:"2f",value:{x:.5,y:.5}}},this.fragmentSrc=["precision mediump float;","varying vec2 vTextureCoord;","varying vec4 vColor;","uniform vec4 dimensions;","uniform sampler2D uSampler;","uniform float radius;","uniform float angle;","uniform vec2 offset;","void main(void) {","   vec2 coord = vTextureCoord - offset;","   float distance = length(coord);","   if (distance < radius) {","       float ratio = (radius - distance) / radius;","       float angleMod = ratio * ratio * angle;","       float s = sin(angleMod);","       float c = cos(angleMod);","       coord = vec2(coord.x * c - coord.y * s, coord.x * s + coord.y * c);","   }","   gl_FragColor = texture2D(uSampler, coord+offset);","}"]},n.TwistFilter.prototype=Object.create(n.AbstractFilter.prototype),n.TwistFilter.prototype.constructor=n.TwistFilter,Object.defineProperty(n.TwistFilter.prototype,"offset",{get:function(){return this.uniforms.offset.value},set:function(e){this.dirty=!0,this.uniforms.offset.value=e}}),Object.defineProperty(n.TwistFilter.prototype,"radius",{get:function(){return this.uniforms.radius.value},set:function(e){this.dirty=!0,this.uniforms.radius.value=e}}),Object.defineProperty(n.TwistFilter.prototype,"angle",{get:function(){return this.uniforms.angle.value},set:function(e){this.dirty=!0,this.uniforms.angle.value=e}}),n.ColorStepFilter=function(){n.AbstractFilter.call(this),this.passes=[this],this.uniforms={step:{type:"1f",value:5}},this.fragmentSrc=["precision mediump float;","varying vec2 vTextureCoord;","varying vec4 vColor;","uniform sampler2D uSampler;","uniform float step;","void main(void) {","   vec4 color = texture2D(uSampler, vTextureCoord);","   color = floor(color * step) / step;","   gl_FragColor = color;","}"]},n.ColorStepFilter.prototype=Object.create(n.AbstractFilter.prototype),n.ColorStepFilter.prototype.constructor=n.ColorStepFilter,Object.defineProperty(n.ColorStepFilter.prototype,"step",{get:function(){return this.uniforms.step.value},set:function(e){this.uniforms.step.value=e}}),n.DotScreenFilter=function(){n.AbstractFilter.call(this),this.passes=[this],this.uniforms={scale:{type:"1f",value:1},angle:{type:"1f",value:5},dimensions:{type:"4fv",value:[0,0,0,0]}},this.fragmentSrc=["precision mediump float;","varying vec2 vTextureCoord;","varying vec4 vColor;","uniform vec4 dimensions;","uniform sampler2D uSampler;","uniform float angle;","uniform float scale;","float pattern() {","   float s = sin(angle), c = cos(angle);","   vec2 tex = vTextureCoord * dimensions.xy;","   vec2 point = vec2(","       c * tex.x - s * tex.y,","       s * tex.x + c * tex.y","   ) * scale;","   return (sin(point.x) * sin(point.y)) * 4.0;","}","void main() {","   vec4 color = texture2D(uSampler, vTextureCoord);","   float average = (color.r + color.g + color.b) / 3.0;","   gl_FragColor = vec4(vec3(average * 10.0 - 5.0 + pattern()), color.a);","}"]},n.DotScreenFilter.prototype=Object.create(n.AbstractFilter.prototype),n.DotScreenFilter.prototype.constructor=n.DotScreenFilter,Object.defineProperty(n.DotScreenFilter.prototype,"scale",{get:function(){return this.uniforms.scale.value},set:function(e){this.dirty=!0,this.uniforms.scale.value=e}}),Object.defineProperty(n.DotScreenFilter.prototype,"angle",{get:function(){return this.uniforms.angle.value},set:function(e){this.dirty=!0,this.uniforms.angle.value=e}}),n.CrossHatchFilter=function(){n.AbstractFilter.call(this),this.passes=[this],this.uniforms={blur:{type:"1f",value:1/512}},this.fragmentSrc=["precision mediump float;","varying vec2 vTextureCoord;","varying vec4 vColor;","uniform float blur;","uniform sampler2D uSampler;","void main(void) {","    float lum = length(texture2D(uSampler, vTextureCoord.xy).rgb);","    gl_FragColor = vec4(1.0, 1.0, 1.0, 1.0);","    if (lum < 1.00) {","        if (mod(gl_FragCoord.x + gl_FragCoord.y, 10.0) == 0.0) {","            gl_FragColor = vec4(0.0, 0.0, 0.0, 1.0);","        }","    }","    if (lum < 0.75) {","        if (mod(gl_FragCoord.x - gl_FragCoord.y, 10.0) == 0.0) {","            gl_FragColor = vec4(0.0, 0.0, 0.0, 1.0);","        }","    }","    if (lum < 0.50) {","        if (mod(gl_FragCoord.x + gl_FragCoord.y - 5.0, 10.0) == 0.0) {","            gl_FragColor = vec4(0.0, 0.0, 0.0, 1.0);","        }","    }","    if (lum < 0.3) {","        if (mod(gl_FragCoord.x - gl_FragCoord.y - 5.0, 10.0) == 0.0) {","            gl_FragColor = vec4(0.0, 0.0, 0.0, 1.0);","        }","    }","}"]},n.CrossHatchFilter.prototype=Object.create(n.AbstractFilter.prototype),n.CrossHatchFilter.prototype.constructor=n.CrossHatchFilter,Object.defineProperty(n.CrossHatchFilter.prototype,"blur",{get:function(){return this.uniforms.blur.value/(1/7e3)},set:function(e){this.uniforms.blur.value=1/7e3*e}}),n.RGBSplitFilter=function(){n.AbstractFilter.call(this),this.passes=[this],this.uniforms={red:{type:"2f",value:{x:20,y:20}},green:{type:"2f",value:{x:-20,y:20}},blue:{type:"2f",value:{x:20,y:-20}},dimensions:{type:"4fv",value:[0,0,0,0]}},this.fragmentSrc=["precision mediump float;","varying vec2 vTextureCoord;","varying vec4 vColor;","uniform vec2 red;","uniform vec2 green;","uniform vec2 blue;","uniform vec4 dimensions;","uniform sampler2D uSampler;","void main(void) {","   gl_FragColor.r = texture2D(uSampler, vTextureCoord + red/dimensions.xy).r;","   gl_FragColor.g = texture2D(uSampler, vTextureCoord + green/dimensions.xy).g;","   gl_FragColor.b = texture2D(uSampler, vTextureCoord + blue/dimensions.xy).b;","   gl_FragColor.a = texture2D(uSampler, vTextureCoord).a;","}"]},n.RGBSplitFilter.prototype=Object.create(n.AbstractFilter.prototype),n.RGBSplitFilter.prototype.constructor=n.RGBSplitFilter,Object.defineProperty(n.RGBSplitFilter.prototype,"red",{get:function(){return this.uniforms.red.value},set:function(e){this.uniforms.red.value=e}}),Object.defineProperty(n.RGBSplitFilter.prototype,"green",{get:function(){return this.uniforms.green.value},set:function(e){this.uniforms.green.value=e}}),Object.defineProperty(n.RGBSplitFilter.prototype,"blue",{get:function(){return this.uniforms.blue.value},set:function(e){this.uniforms.blue.value=e}}),"undefined"!=typeof r?("undefined"!=typeof t&&t.exports&&(r=t.exports=n),r.PIXI=n):"undefined"!=typeof define&&define.amd?define(n):e.PIXI=n}).call(this)},{}],220:[function(e,t,r){(function(e){!function(e){"use strict";if("function"==typeof bootstrap)bootstrap("promise",e);else if("object"==typeof r&&"object"==typeof t)t.exports=e();else if("function"==typeof define&&define.amd)define(e);else if("undefined"!=typeof ses){if(!ses.ok())return;ses.makeQ=e}else{if("undefined"==typeof self)throw new Error("This environment was not anticiapted by Q. Please file a bug.");self.Q=e()}}(function(){"use strict";function t(e){return function(){return X.apply(e,arguments)}}function r(e){return e===Object(e)}function n(e){return"[object StopIteration]"===tt(e)||e instanceof q}function i(e,t){if(G&&t.stack&&"object"==typeof e&&null!==e&&e.stack&&-1===e.stack.indexOf(rt)){for(var r=[],n=t;n;n=n.source)n.stack&&r.unshift(n.stack);r.unshift(e.stack);var i=r.join("\n"+rt+"\n");e.stack=o(i)}}function o(e){for(var t=e.split("\n"),r=[],n=0;n<t.length;++n){var i=t[n];h(i)||s(i)||!i||r.push(i)}return r.join("\n")}function s(e){return-1!==e.indexOf("(module.js:")||-1!==e.indexOf("(node.js:")}function a(e){var t=/at .+ \((.+):(\d+):(?:\d+)\)$/.exec(e);if(t)return[t[1],Number(t[2])];var r=/at ([^ ]+):(\d+):(?:\d+)$/.exec(e);if(r)return[r[1],Number(r[2])];var n=/.*@(.+):(\d+)$/.exec(e);return n?[n[1],Number(n[2])]:void 0}function h(e){var t=a(e);if(!t)return!1;var r=t[0],n=t[1];return r===W&&n>=V&&st>=n}function c(){if(G)try{throw new Error}catch(n){var e=n.stack.split("\n"),t=e[0].indexOf("@")>0?e[1]:e[2],r=a(t);if(!r)return;return W=r[0],r[1]}}function u(e,t,r){return function(){return"undefined"!=typeof console&&"function"==typeof console.warn&&console.warn(t+" is deprecated, use "+r+" instead.",new Error("").stack),e.apply(e,arguments)}}function f(e){return e instanceof b?e:y(e)?k(e):C(e)}function d(){function e(e){t=e,o.source=e,K(r,function(t,r){f.nextTick(function(){e.promiseDispatch.apply(e,r)})},void 0),r=void 0,n=void 0}var t,r=[],n=[],i=Q(d.prototype),o=Q(b.prototype);if(o.promiseDispatch=function(e,i,o){var s=H(arguments);r?(r.push(s),"when"===i&&o[1]&&n.push(o[1])):f.nextTick(function(){t.promiseDispatch.apply(t,s)})},o.valueOf=function(){if(r)return o;var e=m(t);return v(e)&&(t=e),e},o.inspect=function(){return t?t.inspect():{state:"pending"}},f.longStackSupport&&G)try{throw new Error}catch(e){o.stack=e.stack.substring(e.stack.indexOf("\n")+1)}return i.promise=o,i.resolve=function(r){t||e(f(r))},i.fulfill=function(r){t||e(C(r))},i.reject=function(r){t||e(E(r))},i.notify=function(e){t||K(n,function(t,r){f.nextTick(function(){r(e)})},void 0)},i}function l(e){if("function"!=typeof e)throw new TypeError("resolver must be a function.");var t=d();try{e(t.resolve,t.reject,t.notify)}catch(e){t.reject(e)}return t.promise}function p(e){return l(function(t,r){for(var n=0,i=e.length;i>n;n++)f(e[n]).then(t,r)})}function b(e,t,r){void 0===t&&(t=function(e){return E(new Error("Promise does not support operation: "+e))}),void 0===r&&(r=function(){return{state:"unknown"}});var n=Q(b.prototype);if(n.promiseDispatch=function(r,i,o){var s;try{s=e[i]?e[i].apply(n,o):t.call(n,i,o)}catch(e){s=E(e)}r&&r(s)},n.inspect=r,r){var i=r();"rejected"===i.state&&(n.exception=i.reason),n.valueOf=function(){var e=r();return"pending"===e.state||"rejected"===e.state?n:e.value}}return n}function g(e,t,r,n){return f(e).then(t,r,n)}function m(e){if(v(e)){var t=e.inspect();if("fulfilled"===t.state)return t.value}return e}function v(e){return e instanceof b}function y(e){return r(e)&&"function"==typeof e.then}function w(e){return v(e)&&"pending"===e.inspect().state}function _(e){return!v(e)||"fulfilled"===e.inspect().state}function x(e){return v(e)&&"rejected"===e.inspect().state}function S(){nt.length=0,it.length=0,ot||(ot=!0)}function T(e,t){ot&&(it.push(e),nt.push(t&&"undefined"!=typeof t.stack?t.stack:"(no stack) "+t))}function A(e){if(ot){var t=J(it,e);-1!==t&&(it.splice(t,1),nt.splice(t,1))}}function E(e){var t=b({when:function(t){return t&&A(this),t?t(e):this}},function(){return this},function(){return{state:"rejected",reason:e}});return T(t,e),t}function C(e){return b({when:function(){return e},get:function(t){return e[t]},set:function(t,r){e[t]=r},delete:function(t){delete e[t]},post:function(t,r){return null===t||void 0===t?e.apply(void 0,r):e[t].apply(e,r)},apply:function(t,r){return e.apply(t,r)},keys:function(){return et(e)}},void 0,function(){return{state:"fulfilled",value:e}})}function k(e){var t=d();return f.nextTick(function(){try{e.then(t.resolve,t.reject,t.notify)}catch(e){t.reject(e)}}),t.promise}function R(e){return b({isDef:function(){}},function(t,r){return L(e,t,r)},function(){return f(e).inspect()})}function M(e,t,r){return f(e).spread(t,r)}function B(e){return function(){function t(e,t){var s;if("undefined"==typeof StopIteration){try{s=r[e](t)}catch(e){return E(e)}return s.done?f(s.value):g(s.value,i,o)}try{s=r[e](t)}catch(e){return n(e)?f(e.value):E(e)}return g(s,i,o)}var r=e.apply(this,arguments),i=t.bind(t,"next"),o=t.bind(t,"throw");return i()}}function I(e){f.done(f.async(e)())}function j(e){throw new q(e)}function P(e){return function(){return M([this,O(arguments)],function(t,r){return e.apply(t,r)})}}function L(e,t,r){return f(e).dispatch(t,r)}function O(e){return g(e,function(e){var t=0,r=d();return K(e,function(n,i,o){var s;v(i)&&"fulfilled"===(s=i.inspect()).state?e[o]=s.value:(++t,g(i,function(n){e[o]=n,0===--t&&r.resolve(e)},r.reject,function(e){r.notify({index:o,value:e})}))},void 0),0===t&&r.resolve(e),r.promise})}function D(e){return g(e,function(e){return e=$(e,f),g(O($(e,function(e){return g(e,z,z)})),function(){return e})})}function F(e){return f(e).allSettled()}function U(e,t){return f(e).then(void 0,void 0,t)}function N(e,t){return f(e).nodeify(t)}var G=!1;try{throw new Error}catch(e){G=!!e.stack}var W,q,V=c(),z=function(){},Y=function(){function t(){for(;r.next;){r=r.next;var e=r.task;r.task=void 0;var n=r.domain;n&&(r.domain=void 0,n.enter());try{e()}catch(e){if(s)throw n&&n.exit(),setTimeout(t,0),n&&n.enter(),e;setTimeout(function(){throw e},0)}n&&n.exit()}i=!1}var r={task:void 0,next:null},n=r,i=!1,o=void 0,s=!1;if(Y=function(t){n=n.next={task:t,domain:s&&e.domain,next:null},i||(i=!0,o())},"undefined"!=typeof e&&e.nextTick)s=!0,o=function(){e.nextTick(t)};else if("function"==typeof setImmediate)o="undefined"!=typeof window?setImmediate.bind(window,t):function(){setImmediate(t)};else if("undefined"!=typeof MessageChannel){var a=new MessageChannel;a.port1.onmessage=function(){o=h,a.port1.onmessage=t,t()};var h=function(){a.port2.postMessage(0)};o=function(){setTimeout(t,0),h()}}else o=function(){setTimeout(t,0)};return Y}(),X=Function.call,H=t(Array.prototype.slice),K=t(Array.prototype.reduce||function(e,t){var r=0,n=this.length;if(1===arguments.length)for(;;){if(r in this){t=this[r++];break}if(++r>=n)throw new TypeError}for(;n>r;r++)r in this&&(t=e(t,this[r],r));return t}),J=t(Array.prototype.indexOf||function(e){for(var t=0;t<this.length;t++)if(this[t]===e)return t;return-1}),$=t(Array.prototype.map||function(e,t){var r=this,n=[];return K(r,function(i,o,s){n.push(e.call(t,o,s,r))},void 0),n}),Q=Object.create||function(e){function t(){}return t.prototype=e,new t},Z=t(Object.prototype.hasOwnProperty),et=Object.keys||function(e){var t=[];for(var r in e)Z(e,r)&&t.push(r);return t},tt=t(Object.prototype.toString);q="undefined"!=typeof ReturnValue?ReturnValue:function(e){this.value=e};var rt="From previous event:";f.resolve=f,f.nextTick=Y,f.longStackSupport=!1,"object"==typeof e&&e&&e.env&&e.env.Q_DEBUG&&(f.longStackSupport=!0),f.defer=d,d.prototype.makeNodeResolver=function(){var e=this;return function(t,r){t?e.reject(t):e.resolve(arguments.length>2?H(arguments,1):r)}},f.Promise=l,f.promise=l,l.race=p,l.all=O,l.reject=E,l.resolve=f,f.passByCopy=function(e){return e},b.prototype.passByCopy=function(){return this},f.join=function(e,t){return f(e).join(t)},b.prototype.join=function(e){return f([this,e]).spread(function(e,t){if(e===t)return e;throw new Error("Can't join: not the same: "+e+" "+t)})},f.race=p,b.prototype.race=function(){return this.then(f.race)},f.makePromise=b,b.prototype.toString=function(){return"[object Promise]"},b.prototype.then=function(e,t,r){function n(t){try{return"function"==typeof e?e(t):t}catch(e){return E(e)}}function o(e){if("function"==typeof t){i(e,a);try{return t(e)}catch(e){return E(e)}}return E(e)}function s(e){return"function"==typeof r?r(e):e}var a=this,h=d(),c=!1;return f.nextTick(function(){a.promiseDispatch(function(e){c||(c=!0,h.resolve(n(e)))},"when",[function(e){c||(c=!0,h.resolve(o(e)))}])}),a.promiseDispatch(void 0,"when",[void 0,function(e){var t,r=!1;try{t=s(e)}catch(e){if(r=!0,!f.onerror)throw e;f.onerror(e)}r||h.notify(t)}]),h.promise},f.tap=function(e,t){return f(e).tap(t)},b.prototype.tap=function(e){return e=f(e),this.then(function(t){return e.fcall(t).thenResolve(t)})},f.when=g,b.prototype.thenResolve=function(e){return this.then(function(){return e})},f.thenResolve=function(e,t){return f(e).thenResolve(t)},b.prototype.thenReject=function(e){return this.then(function(){throw e})},f.thenReject=function(e,t){return f(e).thenReject(t)},f.nearer=m,f.isPromise=v,f.isPromiseAlike=y,f.isPending=w,b.prototype.isPending=function(){return"pending"===this.inspect().state},f.isFulfilled=_,b.prototype.isFulfilled=function(){return"fulfilled"===this.inspect().state},f.isRejected=x,b.prototype.isRejected=function(){return"rejected"===this.inspect().state};var nt=[],it=[],ot=!0;f.resetUnhandledRejections=S,f.getUnhandledReasons=function(){return nt.slice()},f.stopUnhandledRejectionTracking=function(){S(),ot=!1},S(),f.reject=E,f.fulfill=C,f.master=R,f.spread=M,b.prototype.spread=function(e,t){return this.all().then(function(t){return e.apply(void 0,t)},t)},f.async=B,f.spawn=I,f.return=j,f.promised=P,f.dispatch=L,b.prototype.dispatch=function(e,t){var r=this,n=d();return f.nextTick(function(){r.promiseDispatch(n.resolve,e,t)}),n.promise},f.get=function(e,t){return f(e).dispatch("get",[t])},b.prototype.get=function(e){return this.dispatch("get",[e])},f.set=function(e,t,r){return f(e).dispatch("set",[t,r])},b.prototype.set=function(e,t){return this.dispatch("set",[e,t])},f.del=f.delete=function(e,t){return f(e).dispatch("delete",[t])},b.prototype.del=b.prototype.delete=function(e){return this.dispatch("delete",[e])},f.mapply=f.post=function(e,t,r){return f(e).dispatch("post",[t,r])},b.prototype.mapply=b.prototype.post=function(e,t){return this.dispatch("post",[e,t])},f.send=f.mcall=f.invoke=function(e,t){return f(e).dispatch("post",[t,H(arguments,2)])},b.prototype.send=b.prototype.mcall=b.prototype.invoke=function(e){return this.dispatch("post",[e,H(arguments,1)])},f.fapply=function(e,t){return f(e).dispatch("apply",[void 0,t])},b.prototype.fapply=function(e){return this.dispatch("apply",[void 0,e])},f.try=f.fcall=function(e){return f(e).dispatch("apply",[void 0,H(arguments,1)])},b.prototype.fcall=function(){return this.dispatch("apply",[void 0,H(arguments)])},f.fbind=function(e){var t=f(e),r=H(arguments,1);return function(){return t.dispatch("apply",[this,r.concat(H(arguments))])}},b.prototype.fbind=function(){var e=this,t=H(arguments);return function(){return e.dispatch("apply",[this,t.concat(H(arguments))])}},f.keys=function(e){return f(e).dispatch("keys",[])},b.prototype.keys=function(){return this.dispatch("keys",[])},f.all=O,b.prototype.all=function(){return O(this)},f.allResolved=u(D,"allResolved","allSettled"),b.prototype.allResolved=function(){return D(this)},f.allSettled=F,b.prototype.allSettled=function(){return this.then(function(e){return O($(e,function(e){function t(){return e.inspect()}return e=f(e),e.then(t,t)}))})},f.fail=f.catch=function(e,t){return f(e).then(void 0,t)},b.prototype.fail=b.prototype.catch=function(e){return this.then(void 0,e)},f.progress=U,b.prototype.progress=function(e){return this.then(void 0,void 0,e)},f.fin=f.finally=function(e,t){return f(e).finally(t)},b.prototype.fin=b.prototype.finally=function(e){return e=f(e),this.then(function(t){return e.fcall().then(function(){return t})},function(t){return e.fcall().then(function(){throw t})})},f.done=function(e,t,r,n){return f(e).done(t,r,n)},b.prototype.done=function(t,r,n){var o=function(e){f.nextTick(function(){if(i(e,s),!f.onerror)throw e;f.onerror(e)})},s=t||r||n?this.then(t,r,n):this;"object"==typeof e&&e&&e.domain&&(o=e.domain.bind(o)),s.then(void 0,o)},f.timeout=function(e,t,r){return f(e).timeout(t,r)},b.prototype.timeout=function(e,t){var r=d(),n=setTimeout(function(){t&&"string"!=typeof t||(t=new Error(t||"Timed out after "+e+" ms"),t.code="ETIMEDOUT"),r.reject(t)},e);return this.then(function(e){clearTimeout(n),r.resolve(e)},function(e){clearTimeout(n),r.reject(e)},r.notify),r.promise},f.delay=function(e,t){return void 0===t&&(t=e,e=void 0),f(e).delay(t)},b.prototype.delay=function(e){return this.then(function(t){var r=d();return setTimeout(function(){r.resolve(t)},e),r.promise})},f.nfapply=function(e,t){return f(e).nfapply(t)},b.prototype.nfapply=function(e){var t=d(),r=H(e);return r.push(t.makeNodeResolver()),this.fapply(r).fail(t.reject),t.promise},f.nfcall=function(e){var t=H(arguments,1);return f(e).nfapply(t)},b.prototype.nfcall=function(){var e=H(arguments),t=d();return e.push(t.makeNodeResolver()),this.fapply(e).fail(t.reject),t.promise},f.nfbind=f.denodeify=function(e){var t=H(arguments,1);return function(){var r=t.concat(H(arguments)),n=d();return r.push(n.makeNodeResolver()),f(e).fapply(r).fail(n.reject),n.promise}},b.prototype.nfbind=b.prototype.denodeify=function(){var e=H(arguments);return e.unshift(this),f.denodeify.apply(void 0,e)},f.nbind=function(e,t){var r=H(arguments,2);return function(){function n(){return e.apply(t,arguments)}var i=r.concat(H(arguments)),o=d();return i.push(o.makeNodeResolver()),f(n).fapply(i).fail(o.reject),o.promise}},b.prototype.nbind=function(){var e=H(arguments,0);return e.unshift(this),f.nbind.apply(void 0,e)},f.nmapply=f.npost=function(e,t,r){return f(e).npost(t,r)},b.prototype.nmapply=b.prototype.npost=function(e,t){var r=H(t||[]),n=d();return r.push(n.makeNodeResolver()),this.dispatch("post",[e,r]).fail(n.reject),n.promise},f.nsend=f.nmcall=f.ninvoke=function(e,t){var r=H(arguments,2),n=d();return r.push(n.makeNodeResolver()),f(e).dispatch("post",[t,r]).fail(n.reject),n.promise},b.prototype.nsend=b.prototype.nmcall=b.prototype.ninvoke=function(e){var t=H(arguments,1),r=d();return t.push(r.makeNodeResolver()),this.dispatch("post",[e,t]).fail(r.reject),r.promise},f.nodeify=N,b.prototype.nodeify=function(e){return e?void this.then(function(t){f.nextTick(function(){e(null,t)})},function(t){f.nextTick(function(){e(t)})}):this};var st=c();return f})}).call(this,e("_process"))},{_process:197}],221:[function(e,t,r){(function(e){!function(e){if("function"==typeof bootstrap)bootstrap("promise",e);else if("object"==typeof r)t.exports=e();else if("function"==typeof define&&define.amd)define(e);else if("undefined"!=typeof ses){if(!ses.ok())return;ses.makeQ=e}else Q=e()}(function(){"use strict";function t(e){return function(){return X.apply(e,arguments)}}function r(e){return e===Object(e)}function n(e){return"[object StopIteration]"===tt(e)||e instanceof q}function i(e,t){if(G&&t.stack&&"object"==typeof e&&null!==e&&e.stack&&-1===e.stack.indexOf(rt)){for(var r=[],n=t;n;n=n.source)n.stack&&r.unshift(n.stack);r.unshift(e.stack);var i=r.join("\n"+rt+"\n");e.stack=o(i)}}function o(e){for(var t=e.split("\n"),r=[],n=0;n<t.length;++n){var i=t[n];h(i)||s(i)||!i||r.push(i)}return r.join("\n")}function s(e){return-1!==e.indexOf("(module.js:")||-1!==e.indexOf("(node.js:")}function a(e){var t=/at .+ \((.+):(\d+):(?:\d+)\)$/.exec(e);if(t)return[t[1],Number(t[2])];var r=/at ([^ ]+):(\d+):(?:\d+)$/.exec(e);if(r)return[r[1],Number(r[2])];var n=/.*@(.+):(\d+)$/.exec(e);return n?[n[1],Number(n[2])]:void 0}function h(e){var t=a(e);if(!t)return!1;var r=t[0],n=t[1];return r===W&&n>=V&&st>=n}function c(){if(G)try{throw new Error}catch(n){var e=n.stack.split("\n"),t=e[0].indexOf("@")>0?e[1]:e[2],r=a(t);if(!r)return;return W=r[0],r[1]}}function u(e,t,r){return function(){return"undefined"!=typeof console&&"function"==typeof console.warn&&console.warn(t+" is deprecated, use "+r+" instead.",new Error("").stack),e.apply(e,arguments)}}function f(e){return v(e)?e:y(e)?k(e):C(e)}function d(){function e(e){t=e,o.source=e,K(r,function(t,r){Y(function(){e.promiseDispatch.apply(e,r)})},void 0),r=void 0,n=void 0}var t,r=[],n=[],i=Q(d.prototype),o=Q(b.prototype);if(o.promiseDispatch=function(e,i,o){var s=H(arguments);r?(r.push(s),"when"===i&&o[1]&&n.push(o[1])):Y(function(){t.promiseDispatch.apply(t,s)})},o.valueOf=function(){if(r)return o;var e=m(t);return v(e)&&(t=e),e},o.inspect=function(){return t?t.inspect():{state:"pending"}},f.longStackSupport&&G)try{throw new Error}catch(e){o.stack=e.stack.substring(e.stack.indexOf("\n")+1)}return i.promise=o,i.resolve=function(r){t||e(f(r))},i.fulfill=function(r){t||e(C(r))},i.reject=function(r){t||e(E(r))},i.notify=function(e){t||K(n,function(t,r){Y(function(){r(e)})},void 0)},i}function l(e){if("function"!=typeof e)throw new TypeError("resolver must be a function.");var t=d();try{e(t.resolve,t.reject,t.notify)}catch(e){t.reject(e)}return t.promise}function p(e){return l(function(t,r){for(var n=0,i=e.length;i>n;n++)f(e[n]).then(t,r)
})}function b(e,t,r){void 0===t&&(t=function(e){return E(new Error("Promise does not support operation: "+e))}),void 0===r&&(r=function(){return{state:"unknown"}});var n=Q(b.prototype);if(n.promiseDispatch=function(r,i,o){var s;try{s=e[i]?e[i].apply(n,o):t.call(n,i,o)}catch(e){s=E(e)}r&&r(s)},n.inspect=r,r){var i=r();"rejected"===i.state&&(n.exception=i.reason),n.valueOf=function(){var e=r();return"pending"===e.state||"rejected"===e.state?n:e.value}}return n}function g(e,t,r,n){return f(e).then(t,r,n)}function m(e){if(v(e)){var t=e.inspect();if("fulfilled"===t.state)return t.value}return e}function v(e){return r(e)&&"function"==typeof e.promiseDispatch&&"function"==typeof e.inspect}function y(e){return r(e)&&"function"==typeof e.then}function w(e){return v(e)&&"pending"===e.inspect().state}function _(e){return!v(e)||"fulfilled"===e.inspect().state}function x(e){return v(e)&&"rejected"===e.inspect().state}function S(){nt.length=0,it.length=0,ot||(ot=!0)}function T(e,t){ot&&(it.push(e),nt.push(t&&"undefined"!=typeof t.stack?t.stack:"(no stack) "+t))}function A(e){if(ot){var t=J(it,e);-1!==t&&(it.splice(t,1),nt.splice(t,1))}}function E(e){var t=b({when:function(t){return t&&A(this),t?t(e):this}},function(){return this},function(){return{state:"rejected",reason:e}});return T(t,e),t}function C(e){return b({when:function(){return e},get:function(t){return e[t]},set:function(t,r){e[t]=r},delete:function(t){delete e[t]},post:function(t,r){return null===t||void 0===t?e.apply(void 0,r):e[t].apply(e,r)},apply:function(t,r){return e.apply(t,r)},keys:function(){return et(e)}},void 0,function(){return{state:"fulfilled",value:e}})}function k(e){var t=d();return Y(function(){try{e.then(t.resolve,t.reject,t.notify)}catch(e){t.reject(e)}}),t.promise}function R(e){return b({isDef:function(){}},function(t,r){return L(e,t,r)},function(){return f(e).inspect()})}function M(e,t,r){return f(e).spread(t,r)}function B(e){return function(){function t(e,t){var s;if("undefined"==typeof StopIteration){try{s=r[e](t)}catch(e){return E(e)}return s.done?s.value:g(s.value,i,o)}try{s=r[e](t)}catch(e){return n(e)?e.value:E(e)}return g(s,i,o)}var r=e.apply(this,arguments),i=t.bind(t,"next"),o=t.bind(t,"throw");return i()}}function I(e){f.done(f.async(e)())}function j(e){throw new q(e)}function P(e){return function(){return M([this,O(arguments)],function(t,r){return e.apply(t,r)})}}function L(e,t,r){return f(e).dispatch(t,r)}function O(e){return g(e,function(e){var t=0,r=d();return K(e,function(n,i,o){var s;v(i)&&"fulfilled"===(s=i.inspect()).state?e[o]=s.value:(++t,g(i,function(n){e[o]=n,0===--t&&r.resolve(e)},r.reject,function(e){r.notify({index:o,value:e})}))},void 0),0===t&&r.resolve(e),r.promise})}function D(e){return g(e,function(e){return e=$(e,f),g(O($(e,function(e){return g(e,z,z)})),function(){return e})})}function F(e){return f(e).allSettled()}function U(e,t){return f(e).then(void 0,void 0,t)}function N(e,t){return f(e).nodeify(t)}var G=!1;try{throw new Error}catch(e){G=!!e.stack}var W,q,V=c(),z=function(){},Y=function(){function t(){for(;r.next;){r=r.next;var e=r.task;r.task=void 0;var n=r.domain;n&&(r.domain=void 0,n.enter());try{e()}catch(e){if(s)throw n&&n.exit(),setTimeout(t,0),n&&n.enter(),e;setTimeout(function(){throw e},0)}n&&n.exit()}i=!1}var r={task:void 0,next:null},n=r,i=!1,o=void 0,s=!1;if(Y=function(t){n=n.next={task:t,domain:s&&e.domain,next:null},i||(i=!0,o())},"undefined"!=typeof e&&e.nextTick)s=!0,o=function(){e.nextTick(t)};else if("function"==typeof setImmediate)o="undefined"!=typeof window?setImmediate.bind(window,t):function(){setImmediate(t)};else if("undefined"!=typeof MessageChannel){var a=new MessageChannel;a.port1.onmessage=function(){o=h,a.port1.onmessage=t,t()};var h=function(){a.port2.postMessage(0)};o=function(){setTimeout(t,0),h()}}else o=function(){setTimeout(t,0)};return Y}(),X=Function.call,H=t(Array.prototype.slice),K=t(Array.prototype.reduce||function(e,t){var r=0,n=this.length;if(1===arguments.length)for(;;){if(r in this){t=this[r++];break}if(++r>=n)throw new TypeError}for(;n>r;r++)r in this&&(t=e(t,this[r],r));return t}),J=t(Array.prototype.indexOf||function(e){for(var t=0;t<this.length;t++)if(this[t]===e)return t;return-1}),$=t(Array.prototype.map||function(e,t){var r=this,n=[];return K(r,function(i,o,s){n.push(e.call(t,o,s,r))},void 0),n}),Q=Object.create||function(e){function t(){}return t.prototype=e,new t},Z=t(Object.prototype.hasOwnProperty),et=Object.keys||function(e){var t=[];for(var r in e)Z(e,r)&&t.push(r);return t},tt=t(Object.prototype.toString);q="undefined"!=typeof ReturnValue?ReturnValue:function(e){this.value=e};var rt="From previous event:";f.resolve=f,f.nextTick=Y,f.longStackSupport=!1,f.defer=d,d.prototype.makeNodeResolver=function(){var e=this;return function(t,r){t?e.reject(t):e.resolve(arguments.length>2?H(arguments,1):r)}},f.Promise=l,f.promise=l,l.race=p,l.all=O,l.reject=E,l.resolve=f,f.passByCopy=function(e){return e},b.prototype.passByCopy=function(){return this},f.join=function(e,t){return f(e).join(t)},b.prototype.join=function(e){return f([this,e]).spread(function(e,t){if(e===t)return e;throw new Error("Can't join: not the same: "+e+" "+t)})},f.race=p,b.prototype.race=function(){return this.then(f.race)},f.makePromise=b,b.prototype.toString=function(){return"[object Promise]"},b.prototype.then=function(e,t,r){function n(t){try{return"function"==typeof e?e(t):t}catch(e){return E(e)}}function o(e){if("function"==typeof t){i(e,a);try{return t(e)}catch(e){return E(e)}}return E(e)}function s(e){return"function"==typeof r?r(e):e}var a=this,h=d(),c=!1;return Y(function(){a.promiseDispatch(function(e){c||(c=!0,h.resolve(n(e)))},"when",[function(e){c||(c=!0,h.resolve(o(e)))}])}),a.promiseDispatch(void 0,"when",[void 0,function(e){var t,r=!1;try{t=s(e)}catch(e){if(r=!0,!f.onerror)throw e;f.onerror(e)}r||h.notify(t)}]),h.promise},f.when=g,b.prototype.thenResolve=function(e){return this.then(function(){return e})},f.thenResolve=function(e,t){return f(e).thenResolve(t)},b.prototype.thenReject=function(e){return this.then(function(){throw e})},f.thenReject=function(e,t){return f(e).thenReject(t)},f.nearer=m,f.isPromise=v,f.isPromiseAlike=y,f.isPending=w,b.prototype.isPending=function(){return"pending"===this.inspect().state},f.isFulfilled=_,b.prototype.isFulfilled=function(){return"fulfilled"===this.inspect().state},f.isRejected=x,b.prototype.isRejected=function(){return"rejected"===this.inspect().state};var nt=[],it=[],ot=!0;f.resetUnhandledRejections=S,f.getUnhandledReasons=function(){return nt.slice()},f.stopUnhandledRejectionTracking=function(){S(),ot=!1},S(),f.reject=E,f.fulfill=C,f.master=R,f.spread=M,b.prototype.spread=function(e,t){return this.all().then(function(t){return e.apply(void 0,t)},t)},f.async=B,f.spawn=I,f.return=j,f.promised=P,f.dispatch=L,b.prototype.dispatch=function(e,t){var r=this,n=d();return Y(function(){r.promiseDispatch(n.resolve,e,t)}),n.promise},f.get=function(e,t){return f(e).dispatch("get",[t])},b.prototype.get=function(e){return this.dispatch("get",[e])},f.set=function(e,t,r){return f(e).dispatch("set",[t,r])},b.prototype.set=function(e,t){return this.dispatch("set",[e,t])},f.del=f.delete=function(e,t){return f(e).dispatch("delete",[t])},b.prototype.del=b.prototype.delete=function(e){return this.dispatch("delete",[e])},f.mapply=f.post=function(e,t,r){return f(e).dispatch("post",[t,r])},b.prototype.mapply=b.prototype.post=function(e,t){return this.dispatch("post",[e,t])},f.send=f.mcall=f.invoke=function(e,t){return f(e).dispatch("post",[t,H(arguments,2)])},b.prototype.send=b.prototype.mcall=b.prototype.invoke=function(e){return this.dispatch("post",[e,H(arguments,1)])},f.fapply=function(e,t){return f(e).dispatch("apply",[void 0,t])},b.prototype.fapply=function(e){return this.dispatch("apply",[void 0,e])},f.try=f.fcall=function(e){return f(e).dispatch("apply",[void 0,H(arguments,1)])},b.prototype.fcall=function(){return this.dispatch("apply",[void 0,H(arguments)])},f.fbind=function(e){var t=f(e),r=H(arguments,1);return function(){return t.dispatch("apply",[this,r.concat(H(arguments))])}},b.prototype.fbind=function(){var e=this,t=H(arguments);return function(){return e.dispatch("apply",[this,t.concat(H(arguments))])}},f.keys=function(e){return f(e).dispatch("keys",[])},b.prototype.keys=function(){return this.dispatch("keys",[])},f.all=O,b.prototype.all=function(){return O(this)},f.allResolved=u(D,"allResolved","allSettled"),b.prototype.allResolved=function(){return D(this)},f.allSettled=F,b.prototype.allSettled=function(){return this.then(function(e){return O($(e,function(e){function t(){return e.inspect()}return e=f(e),e.then(t,t)}))})},f.fail=f.catch=function(e,t){return f(e).then(void 0,t)},b.prototype.fail=b.prototype.catch=function(e){return this.then(void 0,e)},f.progress=U,b.prototype.progress=function(e){return this.then(void 0,void 0,e)},f.fin=f.finally=function(e,t){return f(e).finally(t)},b.prototype.fin=b.prototype.finally=function(e){return e=f(e),this.then(function(t){return e.fcall().then(function(){return t})},function(t){return e.fcall().then(function(){throw t})})},f.done=function(e,t,r,n){return f(e).done(t,r,n)},b.prototype.done=function(t,r,n){var o=function(e){Y(function(){if(i(e,s),!f.onerror)throw e;f.onerror(e)})},s=t||r||n?this.then(t,r,n):this;"object"==typeof e&&e&&e.domain&&(o=e.domain.bind(o)),s.then(void 0,o)},f.timeout=function(e,t,r){return f(e).timeout(t,r)},b.prototype.timeout=function(e,t){var r=d(),n=setTimeout(function(){r.reject(new Error(t||"Timed out after "+e+" ms"))},e);return this.then(function(e){clearTimeout(n),r.resolve(e)},function(e){clearTimeout(n),r.reject(e)},r.notify),r.promise},f.delay=function(e,t){return void 0===t&&(t=e,e=void 0),f(e).delay(t)},b.prototype.delay=function(e){return this.then(function(t){var r=d();return setTimeout(function(){r.resolve(t)},e),r.promise})},f.nfapply=function(e,t){return f(e).nfapply(t)},b.prototype.nfapply=function(e){var t=d(),r=H(e);return r.push(t.makeNodeResolver()),this.fapply(r).fail(t.reject),t.promise},f.nfcall=function(e){var t=H(arguments,1);return f(e).nfapply(t)},b.prototype.nfcall=function(){var e=H(arguments),t=d();return e.push(t.makeNodeResolver()),this.fapply(e).fail(t.reject),t.promise},f.nfbind=f.denodeify=function(e){var t=H(arguments,1);return function(){var r=t.concat(H(arguments)),n=d();return r.push(n.makeNodeResolver()),f(e).fapply(r).fail(n.reject),n.promise}},b.prototype.nfbind=b.prototype.denodeify=function(){var e=H(arguments);return e.unshift(this),f.denodeify.apply(void 0,e)},f.nbind=function(e,t){var r=H(arguments,2);return function(){function n(){return e.apply(t,arguments)}var i=r.concat(H(arguments)),o=d();return i.push(o.makeNodeResolver()),f(n).fapply(i).fail(o.reject),o.promise}},b.prototype.nbind=function(){var e=H(arguments,0);return e.unshift(this),f.nbind.apply(void 0,e)},f.nmapply=f.npost=function(e,t,r){return f(e).npost(t,r)},b.prototype.nmapply=b.prototype.npost=function(e,t){var r=H(t||[]),n=d();return r.push(n.makeNodeResolver()),this.dispatch("post",[e,r]).fail(n.reject),n.promise},f.nsend=f.nmcall=f.ninvoke=function(e,t){var r=H(arguments,2),n=d();return r.push(n.makeNodeResolver()),f(e).dispatch("post",[t,r]).fail(n.reject),n.promise},b.prototype.nsend=b.prototype.nmcall=b.prototype.ninvoke=function(e){var t=H(arguments,1),r=d();return t.push(r.makeNodeResolver()),this.dispatch("post",[e,t]).fail(r.reject),r.promise},f.nodeify=N,b.prototype.nodeify=function(e){return e?void this.then(function(t){Y(function(){e(null,t)})},function(t){Y(function(){e(t)})}):this};var st=c();return f})}).call(this,e("_process"))},{_process:197}],222:[function(e,t,r){!function(n){"object"==typeof r?t.exports=n(e("q")):"function"==typeof define&&define.amd?define(["q"],n):Qajax=n(Q)}(function(e){"use strict";function t(e,t){return e in t?t[e]:s.defaults[e]}function r(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);return e}function n(e){var t,r=[];for(t in e)e.hasOwnProperty(t)&&r.push(encodeURIComponent(t)+"="+encodeURIComponent(e[t]));return r.join("&")}function i(e){return-1===e.indexOf("?")}function o(e){s.defaults.logs&&window.console&&console.log(e)}var s=function(){var s,h=arguments;if(!h.length)throw new Error("Qajax: settings are required");if("string"==typeof h[0])s="object"==typeof h[1]&&h[1]||{},s.url=h[0];else{if("object"!=typeof h[0])throw new Error("Qajax: settings must be an object");s=h[0]}if(!s.url)throw new Error("Qajax: settings.url is required");if("cancellation"in s&&!e.isPromiseAlike(s.cancellation))throw new Error("cancellation must be a Promise.");var c=new XMLHttpRequest,u=s.cancellation||e.defer().promise,f=t("method",s),d=t("base",s),l=s.url,p=s.data,b=s.responseType,g=s.params||{},m=e.defer(),v=t("timeout",s),y=r({},t("headers",s)),w=t("cache",s),_=t("withCredentials",s);w&&(g[w===!0?"_":w]=(new Date).getTime()),d&&(l=d+l);var x=n(g);return x&&(l=l+(i(l)?"?":"&")+x),null!==p&&"object"==typeof p&&(a in y||(y[a]="application/json"),p=JSON.stringify(p)),e.fcall(function(){c.onreadystatechange=function(){if(4===c.readyState)try{o(f+" "+l+" => "+c.status),c.status?m.resolve(c):m.reject(c)}catch(e){m.reject(c)}},c.onprogress=function(e){m.notify(e)},c.open(f,l,!0),b&&(c.responseType=b);for(var e in y)y.hasOwnProperty(e)&&c.setRequestHeader(e,y[e]);return _&&(c.withCredentials=!0),void 0!==p&&null!==p?c.send(p):c.send(),u.fin(function(){m.promise.isFulfilled()||(o("Qajax cancellation reached."),c.abort())}),v?m.promise.timeout(v).fail(function(e){throw e instanceof Error&&(o("Qajax request delay reach in "+f+" "+l),c.abort()),c}):m.promise})};s.TIMEOUT=void 0,s.defaults={logs:!1,timeout:6e4,cache:!!(window.ActiveXObject||"ActiveXObject"in window),method:"GET",headers:{},base:""},s.filterStatus=function(t){var r,n;if(n=typeof t,"function"===n)r=t;else{if("number"!==n)throw"validStatus type "+n+" unsupported";r=function(e){return e===t}}return function(t){var n=0;try{n=t.status}catch(e){o("Qajax: failed to read xhr.status")}return 1223===n&&(n=204),r(n)?e.resolve(t):e.reject(t)}},s.filterSuccess=s.filterStatus(function(e){return e>=200&&300>e||304===e}),s.toJSON=function(t){return e.fcall(function(){return JSON.parse(t.responseText)})},s.getJSON=function(e){return s({url:e,method:"GET"}).then(s.filterSuccess).then(s.toJSON)},s.serialize=n;var a="Content-Type";return s})},{q:221}],223:[function(e,t){for(var r=e("performance-now"),n="undefined"==typeof window?{}:window,i=["moz","webkit"],o="AnimationFrame",s=n["request"+o],a=n["cancel"+o]||n["cancelRequest"+o],h=!0,c=0;c<i.length&&!s;c++)s=n[i[c]+"Request"+o],a=n[i[c]+"Cancel"+o]||n[i[c]+"CancelRequest"+o];if(!s||!a){h=!1;var u=0,f=0,d=[],l=1e3/60;s=function(e){if(0===d.length){var t=r(),n=Math.max(0,l-(t-u));u=n+t,setTimeout(function(){var e=d.slice(0);d.length=0;for(var t=0;t<e.length;t++)if(!e[t].cancelled)try{e[t].callback(u)}catch(e){setTimeout(function(){throw e},0)}},Math.round(n))}return d.push({handle:++f,callback:e,cancelled:!1}),f},a=function(e){for(var t=0;t<d.length;t++)d[t].handle===e&&(d[t].cancelled=!0)}}t.exports=function(e){return h?s.call(n,function(){try{e.apply(this,arguments)}catch(e){setTimeout(function(){throw e},0)}}):s.call(n,e)},t.exports.cancel=function(){a.apply(n,arguments)}},{"performance-now":218}],224:[function(e,t){!function(t,r,n,i,o,s,a,h,c){function u(e){var t,r=e.length,n=this,o=0,s=n.i=n.j=0,a=n.S=[];for(r||(e=[r++]);i>o;)a[o]=o++;for(o=0;i>o;o++)a[o]=a[s=w&s+e[o%r]+(t=a[o])],a[s]=t;(n.g=function(e){for(var t,r=0,o=n.i,s=n.j,a=n.S;e--;)t=a[o=w&o+1],r=r*i+a[w&(a[o]=a[s=w&s+t])+(a[s]=t)];return n.i=o,n.j=s,r})(i)}function f(e,t){return t.i=e.i,t.j=e.j,t.S=e.S.slice(),t}function d(e,t){var r,n=[],i=typeof e;if(t&&"object"==i)for(r in e)try{n.push(d(e[r],t-1))}catch(e){}return n.length?n:"string"==i?e:e+"\x00"}function l(e,t){for(var r,n=e+"",i=0;i<n.length;)t[w&i]=w&(r^=19*t[w&i])+n.charCodeAt(i++);return b(t)}function p(e){try{return g?b(g.randomBytes(i)):(t.crypto.getRandomValues(e=new Uint8Array(i)),b(e))}catch(n){return[+new Date,t,(e=t.navigator)&&e.plugins,t.screen,b(r)]}}function b(e){return String.fromCharCode.apply(0,e)}var g,m=n.pow(i,o),v=n.pow(2,s),y=2*v,w=i-1,_=n["seed"+c]=function(e,t,s){var a=[];t=1==t?{entropy:!0}:t||{};var h=l(d(t.entropy?[e,b(r)]:null==e?p():e,3),a),g=new u(a);return l(b(g.S),r),(t.pass||s||function(e,t,r,i){return i&&(i.S&&f(i,g),e.state=function(){return f(g,{})}),r?(n[c]=e,t):e})(function(){for(var e=g.g(o),t=m,r=0;v>e;)e=(e+r)*i,t*=i,r=g.g(1);for(;e>=y;)e/=2,t/=2,r>>>=1;return(e+r)/t},h,"global"in t?t.global:this==n,t.state)};if(l(n[c](),r),a&&a.exports){a.exports=_;try{g=e("crypto")}catch(e){}}else h&&h.amd&&h(function(){return _})}(this,[],Math,256,6,52,"object"==typeof t&&t,"function"==typeof define&&define,"random")},{crypto:59}],225:[function(e,t){function r(e,t,r,n,i,o){this.chunkSize=r,this.alloc=e,this.free=t,this.nbAhead=n||0,this.nbBehind=i||0,this.chunks={},isNaN(o)?(this.currentAlloc=null,this.currentFree=null):this.currentAlloc=this.currentFree=o}r.prototype={chunkIndexForX:function(e){return Math.floor(e/this.chunkSize)},getChunkForX:function(e){return this.chunks[this.chunkIndexForX(e)]},sync:function(e,t){var r,n;if(e instanceof Array){if(r=e[0],n=e[1],isNaN(r))throw new Error("xtail is not a number: "+[r,n]);if(isNaN(n))throw new Error("xhead is not a number: "+[r,n]);if(r>n)throw new Error("xtail shouldn't be greater than xhead")}else{if(isNaN(e))throw new Error("x is required and must be an array");r=e,n=e}null===this.currentAlloc&&(this.currentFree=this.currentAlloc=this.chunkIndexForX(r));for(var i=this.chunkIndexForX(n)+1,o=i+this.nbAhead;o>this.currentAlloc;){var s=this.currentAlloc;this.chunks[s]=this.alloc(s,t),this.currentAlloc++}for(var a=this.chunkIndexForX(r),h=a-this.nbBehind;this.currentFree<h;){var s=this.currentFree;this.free(s,this.chunks[s],t),delete this.chunks[s],this.currentFree++}}},t.exports=r},{}],226:[function(e,t){t.exports=function(e,t,r){var n=Math.max(0,Math.min(1,(r-e)/(t-e)));return n*n*(3-2*n)}},{}],227:[function(){!function(e){var t,r={},n=[];r.init=function(e,r){r=r||{},t=e,t.on("ntp:server_sync",i),setInterval(o,r.interval||1e3)};var i=function(e){var t=Date.now()-e.t1+(Date.now()-e.t0)/2;n.unshift(t),n.length>10&&n.pop()};r.offset=function(){for(var e=0,t=0;t<n.length;t++)e+=n[t];return e/=n.length};var o=function(){t.emit("ntp:client_sync",{t0:Date.now()})};"function"==typeof define&&define.amd?define("ntp",[],function(){return r}):e.ntp=r}(window)},{}],228:[function(e,t){t.exports=e("./lib/")},{"./lib/":229}],229:[function(e,t,r){function n(e,t){"object"==typeof e&&(t=e,e=void 0),t=t||{};var r,n=i(e),o=n.source,c=n.id;return t.forceNew||t["force new connection"]||!1===t.multiplex?(a("ignoring socket cache for %s",o),r=s(o,t)):(h[c]||(a("new io instance for %s",o),h[c]=s(o,t)),r=h[c]),r.socket(n.path)}var i=e("./url"),o=e("socket.io-parser"),s=e("./manager"),a=e("debug")("socket.io-client");t.exports=r=n;var h=r.managers={};r.protocol=o.protocol,r.connect=n,r.Manager=e("./manager"),r.Socket=e("./socket")},{"./manager":230,"./socket":232,"./url":233,debug:236,"socket.io-parser":270}],230:[function(e,t){function r(e,t){return this instanceof r?(e&&"object"==typeof e&&(t=e,e=void 0),t=t||{},t.path=t.path||"/socket.io",this.nsps={},this.subs=[],this.opts=t,this.reconnection(t.reconnection!==!1),this.reconnectionAttempts(t.reconnectionAttempts||1/0),this.reconnectionDelay(t.reconnectionDelay||1e3),this.reconnectionDelayMax(t.reconnectionDelayMax||5e3),this.timeout(null==t.timeout?2e4:t.timeout),this.readyState="closed",this.uri=e,this.connected=[],this.attempts=0,this.encoding=!1,this.packetBuffer=[],this.encoder=new s.Encoder,this.decoder=new s.Decoder,this.autoConnect=t.autoConnect!==!1,void(this.autoConnect&&this.open())):new r(e,t)}var n=(e("./url"),e("engine.io-client")),i=e("./socket"),o=e("component-emitter"),s=e("socket.io-parser"),a=e("./on"),h=e("component-bind"),c=(e("object-component"),e("debug")("socket.io-client:manager")),u=e("indexof");t.exports=r,r.prototype.emitAll=function(){this.emit.apply(this,arguments);for(var e in this.nsps)this.nsps[e].emit.apply(this.nsps[e],arguments)},o(r.prototype),r.prototype.reconnection=function(e){return arguments.length?(this._reconnection=!!e,this):this._reconnection},r.prototype.reconnectionAttempts=function(e){return arguments.length?(this._reconnectionAttempts=e,this):this._reconnectionAttempts},r.prototype.reconnectionDelay=function(e){return arguments.length?(this._reconnectionDelay=e,this):this._reconnectionDelay},r.prototype.reconnectionDelayMax=function(e){return arguments.length?(this._reconnectionDelayMax=e,this):this._reconnectionDelayMax},r.prototype.timeout=function(e){return arguments.length?(this._timeout=e,this):this._timeout},r.prototype.maybeReconnectOnOpen=function(){this.openReconnect||this.reconnecting||!this._reconnection||0!==this.attempts||(this.openReconnect=!0,this.reconnect())},r.prototype.open=r.prototype.connect=function(e){if(c("readyState %s",this.readyState),~this.readyState.indexOf("open"))return this;c("opening %s",this.uri),this.engine=n(this.uri,this.opts);var t=this.engine,r=this;this.readyState="opening",this.skipReconnect=!1;var i=a(t,"open",function(){r.onopen(),e&&e()}),o=a(t,"error",function(t){if(c("connect_error"),r.cleanup(),r.readyState="closed",r.emitAll("connect_error",t),e){var n=new Error("Connection error");n.data=t,e(n)}r.maybeReconnectOnOpen()});if(!1!==this._timeout){var s=this._timeout;c("connect attempt will timeout after %d",s);var h=setTimeout(function(){c("connect attempt timed out after %d",s),i.destroy(),t.close(),t.emit("error","timeout"),r.emitAll("connect_timeout",s)},s);this.subs.push({destroy:function(){clearTimeout(h)}})}return this.subs.push(i),this.subs.push(o),this},r.prototype.onopen=function(){c("open"),this.cleanup(),this.readyState="open",this.emit("open");var e=this.engine;this.subs.push(a(e,"data",h(this,"ondata"))),this.subs.push(a(this.decoder,"decoded",h(this,"ondecoded"))),this.subs.push(a(e,"error",h(this,"onerror"))),this.subs.push(a(e,"close",h(this,"onclose")))},r.prototype.ondata=function(e){this.decoder.add(e)},r.prototype.ondecoded=function(e){this.emit("packet",e)},r.prototype.onerror=function(e){c("error",e),this.emitAll("error",e)},r.prototype.socket=function(e){var t=this.nsps[e];if(!t){t=new i(this,e),this.nsps[e]=t;var r=this;t.on("connect",function(){~u(r.connected,t)||r.connected.push(t)})}return t},r.prototype.destroy=function(e){var t=u(this.connected,e);~t&&this.connected.splice(t,1),this.connected.length||this.close()},r.prototype.packet=function(e){c("writing packet %j",e);var t=this;t.encoding?t.packetBuffer.push(e):(t.encoding=!0,this.encoder.encode(e,function(e){for(var r=0;r<e.length;r++)t.engine.write(e[r]);t.encoding=!1,t.processPacketQueue()}))},r.prototype.processPacketQueue=function(){if(this.packetBuffer.length>0&&!this.encoding){var e=this.packetBuffer.shift();this.packet(e)}},r.prototype.cleanup=function(){for(var e;e=this.subs.shift();)e.destroy();this.packetBuffer=[],this.encoding=!1,this.decoder.destroy()},r.prototype.close=r.prototype.disconnect=function(){this.skipReconnect=!0,this.readyState="closed",this.engine&&this.engine.close()},r.prototype.onclose=function(e){c("close"),this.cleanup(),this.readyState="closed",this.emit("close",e),this._reconnection&&!this.skipReconnect&&this.reconnect()},r.prototype.reconnect=function(){if(this.reconnecting||this.skipReconnect)return this;var e=this;if(this.attempts++,this.attempts>this._reconnectionAttempts)c("reconnect failed"),this.emitAll("reconnect_failed"),this.reconnecting=!1;else{var t=this.attempts*this.reconnectionDelay();t=Math.min(t,this.reconnectionDelayMax()),c("will wait %dms before reconnect attempt",t),this.reconnecting=!0;var r=setTimeout(function(){e.skipReconnect||(c("attempting reconnect"),e.emitAll("reconnect_attempt",e.attempts),e.emitAll("reconnecting",e.attempts),e.skipReconnect||e.open(function(t){t?(c("reconnect attempt error"),e.reconnecting=!1,e.reconnect(),e.emitAll("reconnect_error",t.data)):(c("reconnect success"),e.onreconnect())}))},t);this.subs.push({destroy:function(){clearTimeout(r)}})}},r.prototype.onreconnect=function(){var e=this.attempts;this.attempts=0,this.reconnecting=!1,this.emitAll("reconnect",e)}},{"./on":231,"./socket":232,"./url":233,"component-bind":234,"component-emitter":235,debug:236,"engine.io-client":237,indexof:266,"object-component":267,"socket.io-parser":270}],231:[function(e,t){function r(e,t,r){return e.on(t,r),{destroy:function(){e.removeListener(t,r)}}}t.exports=r},{}],232:[function(e,t,r){function n(e,t){this.io=e,this.nsp=t,this.json=this,this.ids=0,this.acks={},this.io.autoConnect&&this.open(),this.receiveBuffer=[],this.sendBuffer=[],this.connected=!1,this.disconnected=!0}var i=e("socket.io-parser"),o=e("component-emitter"),s=e("to-array"),a=e("./on"),h=e("component-bind"),c=e("debug")("socket.io-client:socket"),u=e("has-binary");t.exports=r=n;var f={connect:1,connect_error:1,connect_timeout:1,disconnect:1,error:1,reconnect:1,reconnect_attempt:1,reconnect_failed:1,reconnect_error:1,reconnecting:1},d=o.prototype.emit;o(n.prototype),n.prototype.subEvents=function(){if(!this.subs){var e=this.io;this.subs=[a(e,"open",h(this,"onopen")),a(e,"packet",h(this,"onpacket")),a(e,"close",h(this,"onclose"))]}},n.prototype.open=n.prototype.connect=function(){return this.connected?this:(this.subEvents(),this.io.open(),"open"==this.io.readyState&&this.onopen(),this)},n.prototype.send=function(){var e=s(arguments);return e.unshift("message"),this.emit.apply(this,e),this},n.prototype.emit=function(e){if(f.hasOwnProperty(e))return d.apply(this,arguments),this;var t=s(arguments),r=i.EVENT;u(t)&&(r=i.BINARY_EVENT);var n={type:r,data:t};return"function"==typeof t[t.length-1]&&(c("emitting packet with ack id %d",this.ids),this.acks[this.ids]=t.pop(),n.id=this.ids++),this.connected?this.packet(n):this.sendBuffer.push(n),this},n.prototype.packet=function(e){e.nsp=this.nsp,this.io.packet(e)},n.prototype.onopen=function(){c("transport is open - connecting"),"/"!=this.nsp&&this.packet({type:i.CONNECT})},n.prototype.onclose=function(e){c("close (%s)",e),this.connected=!1,this.disconnected=!0,this.emit("disconnect",e)},n.prototype.onpacket=function(e){if(e.nsp==this.nsp)switch(e.type){case i.CONNECT:this.onconnect();break;case i.EVENT:this.onevent(e);break;case i.BINARY_EVENT:this.onevent(e);break;case i.ACK:this.onack(e);break;case i.BINARY_ACK:this.onack(e);break;case i.DISCONNECT:this.ondisconnect();break;case i.ERROR:this.emit("error",e.data)}},n.prototype.onevent=function(e){var t=e.data||[];c("emitting event %j",t),null!=e.id&&(c("attaching ack callback to event"),t.push(this.ack(e.id))),this.connected?d.apply(this,t):this.receiveBuffer.push(t)},n.prototype.ack=function(e){var t=this,r=!1;return function(){if(!r){r=!0;var n=s(arguments);c("sending ack %j",n);var o=u(n)?i.BINARY_ACK:i.ACK;t.packet({type:o,id:e,data:n})}}},n.prototype.onack=function(e){c("calling ack %s with %j",e.id,e.data);var t=this.acks[e.id];t.apply(this,e.data),delete this.acks[e.id]},n.prototype.onconnect=function(){this.connected=!0,this.disconnected=!1,this.emit("connect"),this.emitBuffered()},n.prototype.emitBuffered=function(){var e;for(e=0;e<this.receiveBuffer.length;e++)d.apply(this,this.receiveBuffer[e]);for(this.receiveBuffer=[],e=0;e<this.sendBuffer.length;e++)this.packet(this.sendBuffer[e]);this.sendBuffer=[]},n.prototype.ondisconnect=function(){c("server disconnect (%s)",this.nsp),this.destroy(),this.onclose("io server disconnect")},n.prototype.destroy=function(){if(this.subs){for(var e=0;e<this.subs.length;e++)this.subs[e].destroy();this.subs=null}this.io.destroy(this)},n.prototype.close=n.prototype.disconnect=function(){return this.connected&&(c("performing disconnect (%s)",this.nsp),this.packet({type:i.DISCONNECT})),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}},{"./on":231,"component-bind":234,"component-emitter":235,debug:236,"has-binary":264,"socket.io-parser":270,"to-array":274}],233:[function(e,t){(function(r){function n(e,t){var n=e,t=t||r.location;return null==e&&(e=t.protocol+"//"+t.hostname),"string"==typeof e&&("/"==e.charAt(0)&&(e="/"==e.charAt(1)?t.protocol+e:t.hostname+e),/^(https?|wss?):\/\//.test(e)||(o("protocol-less url %s",e),e="undefined"!=typeof t?t.protocol+"//"+e:"https://"+e),o("parse %s",e),n=i(e)),n.port||(/^(http|ws)$/.test(n.protocol)?n.port="80":/^(http|ws)s$/.test(n.protocol)&&(n.port="443")),n.path=n.path||"/",n.id=n.protocol+"://"+n.host+":"+n.port,n.href=n.protocol+"://"+n.host+(t&&t.port==n.port?"":":"+n.port),n}var i=e("parseuri"),o=e("debug")("socket.io-client:url");t.exports=n}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{debug:236,parseuri:268}],234:[function(e,t){var r=[].slice;t.exports=function(e,t){if("string"==typeof t&&(t=e[t]),"function"!=typeof t)throw new Error("bind() requires a function");var n=r.call(arguments,2);return function(){return t.apply(e,n.concat(r.call(arguments)))}}},{}],235:[function(e,t){function r(e){return e?n(e):void 0}function n(e){for(var t in r.prototype)e[t]=r.prototype[t];return e}t.exports=r,r.prototype.on=r.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks[e]=this._callbacks[e]||[]).push(t),this},r.prototype.once=function(e,t){function r(){n.off(e,r),t.apply(this,arguments)}var n=this;return this._callbacks=this._callbacks||{},r.fn=t,this.on(e,r),this},r.prototype.off=r.prototype.removeListener=r.prototype.removeAllListeners=r.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var r=this._callbacks[e];if(!r)return this;if(1==arguments.length)return delete this._callbacks[e],this;for(var n,i=0;i<r.length;i++)if(n=r[i],n===t||n.fn===t){r.splice(i,1);break}return this},r.prototype.emit=function(e){this._callbacks=this._callbacks||{};var t=[].slice.call(arguments,1),r=this._callbacks[e];if(r){r=r.slice(0);for(var n=0,i=r.length;i>n;++n)r[n].apply(this,t)}return this},r.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks[e]||[]},r.prototype.hasListeners=function(e){return!!this.listeners(e).length}},{}],236:[function(e,t){function r(e){return r.enabled(e)?function(t){t=n(t);var i=new Date,o=i-(r[e]||i);r[e]=i,t=e+" "+t+" +"+r.humanize(o),window.console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)}:function(){}}function n(e){return e instanceof Error?e.stack||e.message:e}t.exports=r,r.names=[],r.skips=[],r.enable=function(e){try{localStorage.debug=e}catch(e){}for(var t=(e||"").split(/[\s,]+/),n=t.length,i=0;n>i;i++)e=t[i].replace("*",".*?"),"-"===e[0]?r.skips.push(new RegExp("^"+e.substr(1)+"$")):r.names.push(new RegExp("^"+e+"$"))},r.disable=function(){r.enable("")},r.humanize=function(e){var t=1e3,r=6e4,n=60*r;return e>=n?(e/n).toFixed(1)+"h":e>=r?(e/r).toFixed(1)+"m":e>=t?(e/t|0)+"s":e+"ms"},r.enabled=function(e){for(var t=0,n=r.skips.length;n>t;t++)if(r.skips[t].test(e))return!1;for(var t=0,n=r.names.length;n>t;t++)if(r.names[t].test(e))return!0;return!1};try{window.localStorage&&r.enable(localStorage.debug)}catch(e){}},{}],237:[function(e,t){t.exports=e("./lib/")},{"./lib/":238}],238:[function(e,t){t.exports=e("./socket"),t.exports.parser=e("engine.io-parser")},{"./socket":239,"engine.io-parser":251}],239:[function(e,t){(function(r){function n(e,t){if(!(this instanceof n))return new n(e,t);if(t=t||{},e&&"object"==typeof e&&(t=e,e=null),e&&(e=u(e),t.host=e.host,t.secure="https"==e.protocol||"wss"==e.protocol,t.port=e.port,e.query&&(t.query=e.query)),this.secure=null!=t.secure?t.secure:r.location&&"https:"==location.protocol,t.host){var i=t.host.split(":");t.hostname=i.shift(),i.length&&(t.port=i.pop())}this.agent=t.agent||!1,this.hostname=t.hostname||(r.location?location.hostname:"localhost"),this.port=t.port||(r.location&&location.port?location.port:this.secure?443:80),this.query=t.query||{},"string"==typeof this.query&&(this.query=d.decode(this.query)),this.upgrade=!1!==t.upgrade,this.path=(t.path||"/engine.io").replace(/\/$/,"")+"/",this.forceJSONP=!!t.forceJSONP,this.jsonp=!1!==t.jsonp,this.forceBase64=!!t.forceBase64,this.enablesXDR=!!t.enablesXDR,this.timestampParam=t.timestampParam||"t",this.timestampRequests=t.timestampRequests,this.transports=t.transports||["polling","websocket"],this.readyState="",this.writeBuffer=[],this.callbackBuffer=[],this.policyPort=t.policyPort||843,this.rememberUpgrade=t.rememberUpgrade||!1,this.open(),this.binaryType=null,this.onlyBinaryUpgrades=t.onlyBinaryUpgrades
}function i(e){var t={};for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);return t}var o=e("./transports"),s=e("component-emitter"),a=e("debug")("engine.io-client:socket"),h=e("indexof"),c=e("engine.io-parser"),u=e("parseuri"),f=e("parsejson"),d=e("parseqs");t.exports=n,n.priorWebsocketSuccess=!1,s(n.prototype),n.protocol=c.protocol,n.Socket=n,n.Transport=e("./transport"),n.transports=e("./transports"),n.parser=e("engine.io-parser"),n.prototype.createTransport=function(e){a('creating transport "%s"',e);var t=i(this.query);t.EIO=c.protocol,t.transport=e,this.id&&(t.sid=this.id);var r=new o[e]({agent:this.agent,hostname:this.hostname,port:this.port,secure:this.secure,path:this.path,query:t,forceJSONP:this.forceJSONP,jsonp:this.jsonp,forceBase64:this.forceBase64,enablesXDR:this.enablesXDR,timestampRequests:this.timestampRequests,timestampParam:this.timestampParam,policyPort:this.policyPort,socket:this});return r},n.prototype.open=function(){var e;if(this.rememberUpgrade&&n.priorWebsocketSuccess&&-1!=this.transports.indexOf("websocket"))e="websocket";else{if(0==this.transports.length){var t=this;return void setTimeout(function(){t.emit("error","No transports available")},0)}e=this.transports[0]}this.readyState="opening";var e;try{e=this.createTransport(e)}catch(e){return this.transports.shift(),void this.open()}e.open(),this.setTransport(e)},n.prototype.setTransport=function(e){a("setting transport %s",e.name);var t=this;this.transport&&(a("clearing existing transport %s",this.transport.name),this.transport.removeAllListeners()),this.transport=e,e.on("drain",function(){t.onDrain()}).on("packet",function(e){t.onPacket(e)}).on("error",function(e){t.onError(e)}).on("close",function(){t.onClose("transport close")})},n.prototype.probe=function(e){function t(){if(d.onlyBinaryUpgrades){var t=!this.supportsBinary&&d.transport.supportsBinary;f=f||t}f||(a('probe transport "%s" opened',e),u.send([{type:"ping",data:"probe"}]),u.once("packet",function(t){if(!f)if("pong"==t.type&&"probe"==t.data){if(a('probe transport "%s" pong',e),d.upgrading=!0,d.emit("upgrading",u),!u)return;n.priorWebsocketSuccess="websocket"==u.name,a('pausing current transport "%s"',d.transport.name),d.transport.pause(function(){f||"closed"!=d.readyState&&(a("changing transport and sending upgrade packet"),c(),d.setTransport(u),u.send([{type:"upgrade"}]),d.emit("upgrade",u),u=null,d.upgrading=!1,d.flush())})}else{a('probe transport "%s" failed',e);var r=new Error("probe error");r.transport=u.name,d.emit("upgradeError",r)}}))}function r(){f||(f=!0,c(),u.close(),u=null)}function i(t){var n=new Error("probe error: "+t);n.transport=u.name,r(),a('probe transport "%s" failed because of error: %s',e,t),d.emit("upgradeError",n)}function o(){i("transport closed")}function s(){i("socket closed")}function h(e){u&&e.name!=u.name&&(a('"%s" works - aborting "%s"',e.name,u.name),r())}function c(){u.removeListener("open",t),u.removeListener("error",i),u.removeListener("close",o),d.removeListener("close",s),d.removeListener("upgrading",h)}a('probing transport "%s"',e);var u=this.createTransport(e,{probe:1}),f=!1,d=this;n.priorWebsocketSuccess=!1,u.once("open",t),u.once("error",i),u.once("close",o),this.once("close",s),this.once("upgrading",h),u.open()},n.prototype.onOpen=function(){if(a("socket open"),this.readyState="open",n.priorWebsocketSuccess="websocket"==this.transport.name,this.emit("open"),this.flush(),"open"==this.readyState&&this.upgrade&&this.transport.pause){a("starting upgrade probes");for(var e=0,t=this.upgrades.length;t>e;e++)this.probe(this.upgrades[e])}},n.prototype.onPacket=function(e){if("opening"==this.readyState||"open"==this.readyState)switch(a('socket receive: type "%s", data "%s"',e.type,e.data),this.emit("packet",e),this.emit("heartbeat"),e.type){case"open":this.onHandshake(f(e.data));break;case"pong":this.setPing();break;case"error":var t=new Error("server error");t.code=e.data,this.emit("error",t);break;case"message":this.emit("data",e.data),this.emit("message",e.data)}else a('packet received with socket readyState "%s"',this.readyState)},n.prototype.onHandshake=function(e){this.emit("handshake",e),this.id=e.sid,this.transport.query.sid=e.sid,this.upgrades=this.filterUpgrades(e.upgrades),this.pingInterval=e.pingInterval,this.pingTimeout=e.pingTimeout,this.onOpen(),"closed"!=this.readyState&&(this.setPing(),this.removeListener("heartbeat",this.onHeartbeat),this.on("heartbeat",this.onHeartbeat))},n.prototype.onHeartbeat=function(e){clearTimeout(this.pingTimeoutTimer);var t=this;t.pingTimeoutTimer=setTimeout(function(){"closed"!=t.readyState&&t.onClose("ping timeout")},e||t.pingInterval+t.pingTimeout)},n.prototype.setPing=function(){var e=this;clearTimeout(e.pingIntervalTimer),e.pingIntervalTimer=setTimeout(function(){a("writing ping packet - expecting pong within %sms",e.pingTimeout),e.ping(),e.onHeartbeat(e.pingTimeout)},e.pingInterval)},n.prototype.ping=function(){this.sendPacket("ping")},n.prototype.onDrain=function(){for(var e=0;e<this.prevBufferLen;e++)this.callbackBuffer[e]&&this.callbackBuffer[e]();this.writeBuffer.splice(0,this.prevBufferLen),this.callbackBuffer.splice(0,this.prevBufferLen),this.prevBufferLen=0,0==this.writeBuffer.length?this.emit("drain"):this.flush()},n.prototype.flush=function(){"closed"!=this.readyState&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length&&(a("flushing %d packets in socket",this.writeBuffer.length),this.transport.send(this.writeBuffer),this.prevBufferLen=this.writeBuffer.length,this.emit("flush"))},n.prototype.write=n.prototype.send=function(e,t){return this.sendPacket("message",e,t),this},n.prototype.sendPacket=function(e,t,r){if("closing"!=this.readyState&&"closed"!=this.readyState){var n={type:e,data:t};this.emit("packetCreate",n),this.writeBuffer.push(n),this.callbackBuffer.push(r),this.flush()}},n.prototype.close=function(){function e(){n.onClose("forced close"),a("socket closing - telling transport to close"),n.transport.close()}function t(){n.removeListener("upgrade",t),n.removeListener("upgradeError",t),e()}function r(){n.once("upgrade",t),n.once("upgradeError",t)}if("opening"==this.readyState||"open"==this.readyState){this.readyState="closing";var n=this;this.writeBuffer.length?this.once("drain",function(){this.upgrading?r():e()}):this.upgrading?r():e()}return this},n.prototype.onError=function(e){a("socket error %j",e),n.priorWebsocketSuccess=!1,this.emit("error",e),this.onClose("transport error",e)},n.prototype.onClose=function(e,t){if("opening"==this.readyState||"open"==this.readyState||"closing"==this.readyState){a('socket close with reason: "%s"',e);var r=this;clearTimeout(this.pingIntervalTimer),clearTimeout(this.pingTimeoutTimer),setTimeout(function(){r.writeBuffer=[],r.callbackBuffer=[],r.prevBufferLen=0},0),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),this.readyState="closed",this.id=null,this.emit("close",e,t)}},n.prototype.filterUpgrades=function(e){for(var t=[],r=0,n=e.length;n>r;r++)~h(this.transports,e[r])&&t.push(e[r]);return t}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./transport":240,"./transports":241,"component-emitter":235,debug:248,"engine.io-parser":251,indexof:266,parsejson:260,parseqs:261,parseuri:262}],240:[function(e,t){function r(e){this.path=e.path,this.hostname=e.hostname,this.port=e.port,this.secure=e.secure,this.query=e.query,this.timestampParam=e.timestampParam,this.timestampRequests=e.timestampRequests,this.readyState="",this.agent=e.agent||!1,this.socket=e.socket,this.enablesXDR=e.enablesXDR}var n=e("engine.io-parser"),i=e("component-emitter");t.exports=r,i(r.prototype),r.timestamps=0,r.prototype.onError=function(e,t){var r=new Error(e);return r.type="TransportError",r.description=t,this.emit("error",r),this},r.prototype.open=function(){return("closed"==this.readyState||""==this.readyState)&&(this.readyState="opening",this.doOpen()),this},r.prototype.close=function(){return("opening"==this.readyState||"open"==this.readyState)&&(this.doClose(),this.onClose()),this},r.prototype.send=function(e){if("open"!=this.readyState)throw new Error("Transport not open");this.write(e)},r.prototype.onOpen=function(){this.readyState="open",this.writable=!0,this.emit("open")},r.prototype.onData=function(e){var t=n.decodePacket(e,this.socket.binaryType);this.onPacket(t)},r.prototype.onPacket=function(e){this.emit("packet",e)},r.prototype.onClose=function(){this.readyState="closed",this.emit("close")}},{"component-emitter":235,"engine.io-parser":251}],241:[function(e,t,r){(function(t){function n(e){var r,n=!1,a=!1,h=!1!==e.jsonp;if(t.location){var c="https:"==location.protocol,u=location.port;u||(u=c?443:80),n=e.hostname!=location.hostname||u!=e.port,a=e.secure!=c}if(e.xdomain=n,e.xscheme=a,r=new i(e),"open"in r&&!e.forceJSONP)return new o(e);if(!h)throw new Error("JSONP disabled");return new s(e)}var i=e("xmlhttprequest"),o=e("./polling-xhr"),s=e("./polling-jsonp"),a=e("./websocket");r.polling=n,r.websocket=a}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./polling-jsonp":242,"./polling-xhr":243,"./websocket":245,xmlhttprequest:246}],242:[function(e,t){(function(r){function n(){}function i(e){o.call(this,e),this.query=this.query||{},a||(r.___eio||(r.___eio=[]),a=r.___eio),this.index=a.length;var t=this;a.push(function(e){t.onData(e)}),this.query.j=this.index,r.document&&r.addEventListener&&r.addEventListener("beforeunload",function(){t.script&&(t.script.onerror=n)},!1)}var o=e("./polling"),s=e("component-inherit");t.exports=i;var a,h=/\n/g,c=/\\n/g;s(i,o),i.prototype.supportsBinary=!1,i.prototype.doClose=function(){this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),this.form&&(this.form.parentNode.removeChild(this.form),this.form=null,this.iframe=null),o.prototype.doClose.call(this)},i.prototype.doPoll=function(){var e=this,t=document.createElement("script");this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),t.async=!0,t.src=this.uri(),t.onerror=function(t){e.onError("jsonp poll error",t)};var r=document.getElementsByTagName("script")[0];r.parentNode.insertBefore(t,r),this.script=t;var n="undefined"!=typeof navigator&&/gecko/i.test(navigator.userAgent);n&&setTimeout(function(){var e=document.createElement("iframe");document.body.appendChild(e),document.body.removeChild(e)},100)},i.prototype.doWrite=function(e,t){function r(){n(),t()}function n(){if(i.iframe)try{i.form.removeChild(i.iframe)}catch(e){i.onError("jsonp polling iframe removal error",e)}try{var e='<iframe src="javascript:0" name="'+i.iframeId+'">';o=document.createElement(e)}catch(e){o=document.createElement("iframe"),o.name=i.iframeId,o.src="javascript:0"}o.id=i.iframeId,i.form.appendChild(o),i.iframe=o}var i=this;if(!this.form){var o,s=document.createElement("form"),a=document.createElement("textarea"),u=this.iframeId="eio_iframe_"+this.index;s.className="socketio",s.style.position="absolute",s.style.top="-1000px",s.style.left="-1000px",s.target=u,s.method="POST",s.setAttribute("accept-charset","utf-8"),a.name="d",s.appendChild(a),document.body.appendChild(s),this.form=s,this.area=a}this.form.action=this.uri(),n(),e=e.replace(c,"\\\n"),this.area.value=e.replace(h,"\\n");try{this.form.submit()}catch(e){}this.iframe.attachEvent?this.iframe.onreadystatechange=function(){"complete"==i.iframe.readyState&&r()}:this.iframe.onload=r}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./polling":244,"component-inherit":247}],243:[function(e,t){(function(r){function n(){}function i(e){if(h.call(this,e),r.location){var t="https:"==location.protocol,n=location.port;n||(n=t?443:80),this.xd=e.hostname!=r.location.hostname||n!=e.port,this.xs=e.secure!=t}}function o(e){this.method=e.method||"GET",this.uri=e.uri,this.xd=!!e.xd,this.xs=!!e.xs,this.async=!1!==e.async,this.data=void 0!=e.data?e.data:null,this.agent=e.agent,this.isBinary=e.isBinary,this.supportsBinary=e.supportsBinary,this.enablesXDR=e.enablesXDR,this.create()}function s(){for(var e in o.requests)o.requests.hasOwnProperty(e)&&o.requests[e].abort()}var a=e("xmlhttprequest"),h=e("./polling"),c=e("component-emitter"),u=e("component-inherit"),f=e("debug")("engine.io-client:polling-xhr");t.exports=i,t.exports.Request=o,u(i,h),i.prototype.supportsBinary=!0,i.prototype.request=function(e){return e=e||{},e.uri=this.uri(),e.xd=this.xd,e.xs=this.xs,e.agent=this.agent||!1,e.supportsBinary=this.supportsBinary,e.enablesXDR=this.enablesXDR,new o(e)},i.prototype.doWrite=function(e,t){var r="string"!=typeof e&&void 0!==e,n=this.request({method:"POST",data:e,isBinary:r}),i=this;n.on("success",t),n.on("error",function(e){i.onError("xhr post error",e)}),this.sendXhr=n},i.prototype.doPoll=function(){f("xhr poll");var e=this.request(),t=this;e.on("data",function(e){t.onData(e)}),e.on("error",function(e){t.onError("xhr poll error",e)}),this.pollXhr=e},c(o.prototype),o.prototype.create=function(){var e=this.xhr=new a({agent:this.agent,xdomain:this.xd,xscheme:this.xs,enablesXDR:this.enablesXDR}),t=this;try{if(f("xhr open %s: %s",this.method,this.uri),e.open(this.method,this.uri,this.async),this.supportsBinary&&(e.responseType="arraybuffer"),"POST"==this.method)try{this.isBinary?e.setRequestHeader("Content-type","application/octet-stream"):e.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch(e){}"withCredentials"in e&&(e.withCredentials=!0),this.hasXDR()?(e.onload=function(){t.onLoad()},e.onerror=function(){t.onError(e.responseText)}):e.onreadystatechange=function(){4==e.readyState&&(200==e.status||1223==e.status?t.onLoad():setTimeout(function(){t.onError(e.status)},0))},f("xhr data %s",this.data),e.send(this.data)}catch(e){return void setTimeout(function(){t.onError(e)},0)}r.document&&(this.index=o.requestsCount++,o.requests[this.index]=this)},o.prototype.onSuccess=function(){this.emit("success"),this.cleanup()},o.prototype.onData=function(e){this.emit("data",e),this.onSuccess()},o.prototype.onError=function(e){this.emit("error",e),this.cleanup()},o.prototype.cleanup=function(){if("undefined"!=typeof this.xhr&&null!==this.xhr){this.hasXDR()?this.xhr.onload=this.xhr.onerror=n:this.xhr.onreadystatechange=n;try{this.xhr.abort()}catch(e){}r.document&&delete o.requests[this.index],this.xhr=null}},o.prototype.onLoad=function(){var e;try{var t;try{t=this.xhr.getResponseHeader("Content-Type").split(";")[0]}catch(e){}e="application/octet-stream"===t?this.xhr.response:this.supportsBinary?"ok":this.xhr.responseText}catch(e){this.onError(e)}null!=e&&this.onData(e)},o.prototype.hasXDR=function(){return"undefined"!=typeof r.XDomainRequest&&!this.xs&&this.enablesXDR},o.prototype.abort=function(){this.cleanup()},r.document&&(o.requestsCount=0,o.requests={},r.attachEvent?r.attachEvent("onunload",s):r.addEventListener&&r.addEventListener("beforeunload",s,!1))}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./polling":244,"component-emitter":235,"component-inherit":247,debug:248,xmlhttprequest:246}],244:[function(e,t){function r(e){var t=e&&e.forceBase64;(!h||t)&&(this.supportsBinary=!1),n.call(this,e)}var n=e("../transport"),i=e("parseqs"),o=e("engine.io-parser"),s=e("component-inherit"),a=e("debug")("engine.io-client:polling");t.exports=r;var h=function(){var t=e("xmlhttprequest"),r=new t({xdomain:!1});return null!=r.responseType}();s(r,n),r.prototype.name="polling",r.prototype.doOpen=function(){this.poll()},r.prototype.pause=function(e){function t(){a("paused"),r.readyState="paused",e()}var r=this;if(this.readyState="pausing",this.polling||!this.writable){var n=0;this.polling&&(a("we are currently polling - waiting to pause"),n++,this.once("pollComplete",function(){a("pre-pause polling complete"),--n||t()})),this.writable||(a("we are currently writing - waiting to pause"),n++,this.once("drain",function(){a("pre-pause writing complete"),--n||t()}))}else t()},r.prototype.poll=function(){a("polling"),this.polling=!0,this.doPoll(),this.emit("poll")},r.prototype.onData=function(e){var t=this;a("polling got data %s",e);var r=function(e){return"opening"==t.readyState&&t.onOpen(),"close"==e.type?(t.onClose(),!1):void t.onPacket(e)};o.decodePayload(e,this.socket.binaryType,r),"closed"!=this.readyState&&(this.polling=!1,this.emit("pollComplete"),"open"==this.readyState?this.poll():a('ignoring poll - transport state "%s"',this.readyState))},r.prototype.doClose=function(){function e(){a("writing close packet"),t.write([{type:"close"}])}var t=this;"open"==this.readyState?(a("transport open - closing"),e()):(a("transport not open - deferring close"),this.once("open",e))},r.prototype.write=function(e){var t=this;this.writable=!1;var r=function(){t.writable=!0,t.emit("drain")},t=this;o.encodePayload(e,this.supportsBinary,function(e){t.doWrite(e,r)})},r.prototype.uri=function(){var e=this.query||{},t=this.secure?"https":"http",r="";return!1!==this.timestampRequests&&(e[this.timestampParam]=+new Date+"-"+n.timestamps++),this.supportsBinary||e.sid||(e.b64=1),e=i.encode(e),this.port&&("https"==t&&443!=this.port||"http"==t&&80!=this.port)&&(r=":"+this.port),e.length&&(e="?"+e),t+"://"+this.hostname+r+this.path+e}},{"../transport":240,"component-inherit":247,debug:248,"engine.io-parser":251,parseqs:261,xmlhttprequest:246}],245:[function(e,t){function r(e){var t=e&&e.forceBase64;t&&(this.supportsBinary=!1),n.call(this,e)}var n=e("../transport"),i=e("engine.io-parser"),o=e("parseqs"),s=e("component-inherit"),a=e("debug")("engine.io-client:websocket"),h=e("ws");t.exports=r,s(r,n),r.prototype.name="websocket",r.prototype.supportsBinary=!0,r.prototype.doOpen=function(){if(this.check()){var e=this.uri(),t=void 0,r={agent:this.agent};this.ws=new h(e,t,r),void 0===this.ws.binaryType&&(this.supportsBinary=!1),this.ws.binaryType="arraybuffer",this.addEventListeners()}},r.prototype.addEventListeners=function(){var e=this;this.ws.onopen=function(){e.onOpen()},this.ws.onclose=function(){e.onClose()},this.ws.onmessage=function(t){e.onData(t.data)},this.ws.onerror=function(t){e.onError("websocket error",t)}},"undefined"!=typeof navigator&&/iPad|iPhone|iPod/i.test(navigator.userAgent)&&(r.prototype.onData=function(e){var t=this;setTimeout(function(){n.prototype.onData.call(t,e)},0)}),r.prototype.write=function(e){function t(){r.writable=!0,r.emit("drain")}var r=this;this.writable=!1;for(var n=0,o=e.length;o>n;n++)i.encodePacket(e[n],this.supportsBinary,function(e){try{r.ws.send(e)}catch(e){a("websocket closed before onclose event")}});setTimeout(t,0)},r.prototype.onClose=function(){n.prototype.onClose.call(this)},r.prototype.doClose=function(){"undefined"!=typeof this.ws&&this.ws.close()},r.prototype.uri=function(){var e=this.query||{},t=this.secure?"wss":"ws",r="";return this.port&&("wss"==t&&443!=this.port||"ws"==t&&80!=this.port)&&(r=":"+this.port),this.timestampRequests&&(e[this.timestampParam]=+new Date),this.supportsBinary||(e.b64=1),e=o.encode(e),e.length&&(e="?"+e),t+"://"+this.hostname+r+this.path+e},r.prototype.check=function(){return!(!h||"__initialize"in h&&this.name===r.prototype.name)}},{"../transport":240,"component-inherit":247,debug:248,"engine.io-parser":251,parseqs:261,ws:263}],246:[function(e,t){var r=e("has-cors");t.exports=function(e){var t=e.xdomain,n=e.xscheme,i=e.enablesXDR;try{if("undefined"!=typeof XMLHttpRequest&&(!t||r))return new XMLHttpRequest}catch(e){}try{if("undefined"!=typeof XDomainRequest&&!n&&i)return new XDomainRequest}catch(e){}if(!t)try{return new ActiveXObject("Microsoft.XMLHTTP")}catch(e){}}},{"has-cors":258}],247:[function(e,t){t.exports=function(e,t){var r=function(){};r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e}},{}],248:[function(e,t,r){function n(){return"WebkitAppearance"in document.documentElement.style||window.console&&(console.firebug||console.exception&&console.table)||navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31}function i(){var e=arguments,t=this.useColors;if(e[0]=(t?"%c":"")+this.namespace+(t?" %c":" ")+e[0]+(t?"%c ":" ")+"+"+r.humanize(this.diff),!t)return e;var n="color: "+this.color;e=[e[0],n,"color: inherit"].concat(Array.prototype.slice.call(e,1));var i=0,o=0;return e[0].replace(/%[a-z%]/g,function(e){"%%"!==e&&(i++,"%c"===e&&(o=i))}),e.splice(o,0,n),e}function o(){return"object"==typeof console&&"function"==typeof console.log&&Function.prototype.apply.call(console.log,console,arguments)}function s(e){try{null==e?localStorage.removeItem("debug"):localStorage.debug=e}catch(e){}}function a(){var e;try{e=localStorage.debug}catch(e){}return e}r=t.exports=e("./debug"),r.log=o,r.formatArgs=i,r.save=s,r.load=a,r.useColors=n,r.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"],r.formatters.j=function(e){return JSON.stringify(e)},r.enable(a())},{"./debug":249}],249:[function(e,t,r){function n(){return r.colors[u++%r.colors.length]}function i(e){function t(){}function i(){var e=i,t=+new Date,o=t-(c||t);e.diff=o,e.prev=c,e.curr=t,c=t,null==e.useColors&&(e.useColors=r.useColors()),null==e.color&&e.useColors&&(e.color=n());var s=Array.prototype.slice.call(arguments);s[0]=r.coerce(s[0]),"string"!=typeof s[0]&&(s=["%o"].concat(s));var a=0;s[0]=s[0].replace(/%([a-z%])/g,function(t,n){if("%%"===t)return t;a++;var i=r.formatters[n];if("function"==typeof i){var o=s[a];t=i.call(e,o),s.splice(a,1),a--}return t}),"function"==typeof r.formatArgs&&(s=r.formatArgs.apply(e,s));var h=i.log||r.log||console.log.bind(console);h.apply(e,s)}t.enabled=!1,i.enabled=!0;var o=r.enabled(e)?i:t;return o.namespace=e,o}function o(e){r.save(e);for(var t=(e||"").split(/[\s,]+/),n=t.length,i=0;n>i;i++)t[i]&&(e=t[i].replace(/\*/g,".*?"),"-"===e[0]?r.skips.push(new RegExp("^"+e.substr(1)+"$")):r.names.push(new RegExp("^"+e+"$")))}function s(){r.enable("")}function a(e){var t,n;for(t=0,n=r.skips.length;n>t;t++)if(r.skips[t].test(e))return!1;for(t=0,n=r.names.length;n>t;t++)if(r.names[t].test(e))return!0;return!1}function h(e){return e instanceof Error?e.stack||e.message:e}r=t.exports=i,r.coerce=h,r.disable=s,r.enable=o,r.enabled=a,r.humanize=e("ms"),r.names=[],r.skips=[],r.formatters={};var c,u=0},{ms:250}],250:[function(e,t){function r(e){var t=/^((?:\d+)?\.?\d+) *(ms|seconds?|s|minutes?|m|hours?|h|days?|d|years?|y)?$/i.exec(e);if(t){var r=parseFloat(t[1]),n=(t[2]||"ms").toLowerCase();switch(n){case"years":case"year":case"y":return r*u;case"days":case"day":case"d":return r*c;case"hours":case"hour":case"h":return r*h;case"minutes":case"minute":case"m":return r*a;case"seconds":case"second":case"s":return r*s;case"ms":return r}}}function n(e){return e>=c?Math.round(e/c)+"d":e>=h?Math.round(e/h)+"h":e>=a?Math.round(e/a)+"m":e>=s?Math.round(e/s)+"s":e+"ms"}function i(e){return o(e,c,"day")||o(e,h,"hour")||o(e,a,"minute")||o(e,s,"second")||e+" ms"}function o(e,t,r){return t>e?void 0:1.5*t>e?Math.floor(e/t)+" "+r:Math.ceil(e/t)+" "+r+"s"}var s=1e3,a=60*s,h=60*a,c=24*h,u=365.25*c;t.exports=function(e,t){return t=t||{},"string"==typeof e?r(e):t.long?i(e):n(e)}},{}],251:[function(e,t,r){(function(t){function n(e,t,n){if(!t)return r.encodeBase64Packet(e,n);var i=e.data,o=new Uint8Array(i),s=new Uint8Array(1+i.byteLength);s[0]=l[e.type];for(var a=0;a<o.length;a++)s[a+1]=o[a];return n(s.buffer)}function i(e,t,n){if(!t)return r.encodeBase64Packet(e,n);var i=new FileReader;return i.onload=function(){e.data=i.result,r.encodePacket(e,t,!0,n)},i.readAsArrayBuffer(e.data)}function o(e,t,n){if(!t)return r.encodeBase64Packet(e,n);if(d)return i(e,t,n);var o=new Uint8Array(1);o[0]=l[e.type];var s=new g([o.buffer,e.data]);return n(s)}function s(e,t,r){for(var n=new Array(e.length),i=u(e.length,r),o=function(e,r,i){t(r,function(t,r){n[e]=r,i(t,n)})},s=0;s<e.length;s++)o(s,e[s],i)}var a=e("./keys"),h=e("arraybuffer.slice"),c=e("base64-arraybuffer"),u=e("after"),f=e("utf8"),d=navigator.userAgent.match(/Android/i);r.protocol=3;var l=r.packets={open:0,close:1,ping:2,pong:3,message:4,upgrade:5,noop:6},p=a(l),b={type:"error",data:"parser error"},g=e("blob");r.encodePacket=function(e,r,i,s){"function"==typeof r&&(s=r,r=!1),"function"==typeof i&&(s=i,i=null);var a=void 0===e.data?void 0:e.data.buffer||e.data;if(t.ArrayBuffer&&a instanceof ArrayBuffer)return n(e,r,s);if(g&&a instanceof t.Blob)return o(e,r,s);var h=l[e.type];return void 0!==e.data&&(h+=i?f.encode(String(e.data)):String(e.data)),s(""+h)},r.encodeBase64Packet=function(e,n){var i="b"+r.packets[e.type];if(g&&e.data instanceof g){var o=new FileReader;return o.onload=function(){var e=o.result.split(",")[1];n(i+e)},o.readAsDataURL(e.data)}var s;try{s=String.fromCharCode.apply(null,new Uint8Array(e.data))}catch(t){for(var a=new Uint8Array(e.data),h=new Array(a.length),c=0;c<a.length;c++)h[c]=a[c];s=String.fromCharCode.apply(null,h)}return i+=t.btoa(s),n(i)},r.decodePacket=function(e,t,n){if("string"==typeof e||void 0===e){if("b"==e.charAt(0))return r.decodeBase64Packet(e.substr(1),t);if(n)try{e=f.decode(e)}catch(e){return b}var i=e.charAt(0);return Number(i)==i&&p[i]?e.length>1?{type:p[i],data:e.substring(1)}:{type:p[i]}:b}var o=new Uint8Array(e),i=o[0],s=h(e,1);return g&&"blob"===t&&(s=new g([s])),{type:p[i],data:s}},r.decodeBase64Packet=function(e,r){var n=p[e.charAt(0)];if(!t.ArrayBuffer)return{type:n,data:{base64:!0,data:e.substr(1)}};var i=c.decode(e.substr(1));return"blob"===r&&g&&(i=new g([i])),{type:n,data:i}},r.encodePayload=function(e,t,n){function i(e){return e.length+":"+e}function o(e,n){r.encodePacket(e,t,!0,function(e){n(null,i(e))})}return"function"==typeof t&&(n=t,t=null),t?g&&!d?r.encodePayloadAsBlob(e,n):r.encodePayloadAsArrayBuffer(e,n):e.length?void s(e,o,function(e,t){return n(t.join(""))}):n("0:")},r.decodePayload=function(e,t,n){if("string"!=typeof e)return r.decodePayloadAsBinary(e,t,n);"function"==typeof t&&(n=t,t=null);var i;if(""==e)return n(b,0,1);for(var o,s,a="",h=0,c=e.length;c>h;h++){var u=e.charAt(h);if(":"!=u)a+=u;else{if(""==a||a!=(o=Number(a)))return n(b,0,1);if(s=e.substr(h+1,o),a!=s.length)return n(b,0,1);if(s.length){if(i=r.decodePacket(s,t,!0),b.type==i.type&&b.data==i.data)return n(b,0,1);var f=n(i,h+o,c);if(!1===f)return}h+=o,a=""}}return""!=a?n(b,0,1):void 0},r.encodePayloadAsArrayBuffer=function(e,t){function n(e,t){r.encodePacket(e,!0,!0,function(e){return t(null,e)})}return e.length?void s(e,n,function(e,r){var n=r.reduce(function(e,t){var r;return r="string"==typeof t?t.length:t.byteLength,e+r.toString().length+r+2},0),i=new Uint8Array(n),o=0;return r.forEach(function(e){var t="string"==typeof e,r=e;if(t){for(var n=new Uint8Array(e.length),s=0;s<e.length;s++)n[s]=e.charCodeAt(s);r=n.buffer}i[o++]=t?0:1;for(var a=r.byteLength.toString(),s=0;s<a.length;s++)i[o++]=parseInt(a[s]);i[o++]=255;for(var n=new Uint8Array(r),s=0;s<n.length;s++)i[o++]=n[s]}),t(i.buffer)}):t(new ArrayBuffer(0))},r.encodePayloadAsBlob=function(e,t){function n(e,t){r.encodePacket(e,!0,!0,function(e){var r=new Uint8Array(1);if(r[0]=1,"string"==typeof e){for(var n=new Uint8Array(e.length),i=0;i<e.length;i++)n[i]=e.charCodeAt(i);e=n.buffer,r[0]=0}for(var o=e instanceof ArrayBuffer?e.byteLength:e.size,s=o.toString(),a=new Uint8Array(s.length+1),i=0;i<s.length;i++)a[i]=parseInt(s[i]);if(a[s.length]=255,g){var h=new g([r.buffer,a.buffer,e]);t(null,h)}})}s(e,n,function(e,r){return t(new g(r))})},r.decodePayloadAsBinary=function(e,t,n){"function"==typeof t&&(n=t,t=null);for(var i=e,o=[],s=!1;i.byteLength>0;){for(var a=new Uint8Array(i),c=0===a[0],u="",f=1;255!=a[f];f++){if(u.length>310){s=!0;break}u+=a[f]}if(s)return n(b,0,1);i=h(i,2+u.length),u=parseInt(u);var d=h(i,0,u);if(c)try{d=String.fromCharCode.apply(null,new Uint8Array(d))}catch(e){var l=new Uint8Array(d);d="";for(var f=0;f<l.length;f++)d+=String.fromCharCode(l[f])}o.push(d),i=h(i,u)}var p=o.length;o.forEach(function(e,i){n(r.decodePacket(e,t,!0),i,p)})}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./keys":252,after:253,"arraybuffer.slice":254,"base64-arraybuffer":255,blob:256,utf8:257}],252:[function(e,t){t.exports=Object.keys||function(e){var t=[],r=Object.prototype.hasOwnProperty;for(var n in e)r.call(e,n)&&t.push(n);return t}},{}],253:[function(e,t){function r(e,t,r){function i(e,n){if(i.count<=0)throw new Error("after called too many times");--i.count,e?(o=!0,t(e),t=r):0!==i.count||o||t(null,n)}var o=!1;return r=r||n,i.count=e,0===e?t():i}function n(){}t.exports=r},{}],254:[function(e,t){t.exports=function(e,t,r){var n=e.byteLength;if(t=t||0,r=r||n,e.slice)return e.slice(t,r);if(0>t&&(t+=n),0>r&&(r+=n),r>n&&(r=n),t>=n||t>=r||0===n)return new ArrayBuffer(0);for(var i=new Uint8Array(e),o=new Uint8Array(r-t),s=t,a=0;r>s;s++,a++)o[a]=i[s];return o.buffer}},{}],255:[function(e,t,r){!function(e){"use strict";r.encode=function(t){var r,n=new Uint8Array(t),i=n.length,o="";for(r=0;i>r;r+=3)o+=e[n[r]>>2],o+=e[(3&n[r])<<4|n[r+1]>>4],o+=e[(15&n[r+1])<<2|n[r+2]>>6],o+=e[63&n[r+2]];return i%3===2?o=o.substring(0,o.length-1)+"=":i%3===1&&(o=o.substring(0,o.length-2)+"=="),o},r.decode=function(t){var r,n,i,o,s,a=.75*t.length,h=t.length,c=0;"="===t[t.length-1]&&(a--,"="===t[t.length-2]&&a--);var u=new ArrayBuffer(a),f=new Uint8Array(u);for(r=0;h>r;r+=4)n=e.indexOf(t[r]),i=e.indexOf(t[r+1]),o=e.indexOf(t[r+2]),s=e.indexOf(t[r+3]),f[c++]=n<<2|i>>4,f[c++]=(15&i)<<4|o>>2,f[c++]=(3&o)<<6|63&s;return u}}("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/")},{}],256:[function(e,t){(function(e){function r(e,t){t=t||{};for(var r=new n,i=0;i<e.length;i++)r.append(e[i]);return t.type?r.getBlob(t.type):r.getBlob()}var n=e.BlobBuilder||e.WebKitBlobBuilder||e.MSBlobBuilder||e.MozBlobBuilder,i=function(){try{var e=new Blob(["hi"]);return 2==e.size}catch(e){return!1}}(),o=n&&n.prototype.append&&n.prototype.getBlob;t.exports=function(){return i?e.Blob:o?r:void 0}()}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],257:[function(e,t,r){(function(e){!function(n){function i(e){for(var t,r,n=[],i=0,o=e.length;o>i;)t=e.charCodeAt(i++),t>=55296&&56319>=t&&o>i?(r=e.charCodeAt(i++),56320==(64512&r)?n.push(((1023&t)<<10)+(1023&r)+65536):(n.push(t),i--)):n.push(t);return n}function o(e){for(var t,r=e.length,n=-1,i="";++n<r;)t=e[n],t>65535&&(t-=65536,i+=v(t>>>10&1023|55296),t=56320|1023&t),i+=v(t);return i}function s(e,t){return v(e>>t&63|128)}function a(e){if(0==(4294967168&e))return v(e);var t="";return 0==(4294965248&e)?t=v(e>>6&31|192):0==(4294901760&e)?(t=v(e>>12&15|224),t+=s(e,6)):0==(4292870144&e)&&(t=v(e>>18&7|240),t+=s(e,12),t+=s(e,6)),t+=v(63&e|128)}function h(e){for(var t,r=i(e),n=r.length,o=-1,s="";++o<n;)t=r[o],s+=a(t);return s}function c(){if(m>=g)throw Error("Invalid byte index");var e=255&b[m];if(m++,128==(192&e))return 63&e;throw Error("Invalid continuation byte")}function u(){var e,t,r,n,i;if(m>g)throw Error("Invalid byte index");if(m==g)return!1;if(e=255&b[m],m++,0==(128&e))return e;if(192==(224&e)){var t=c();if(i=(31&e)<<6|t,i>=128)return i;throw Error("Invalid continuation byte")}if(224==(240&e)){if(t=c(),r=c(),i=(15&e)<<12|t<<6|r,i>=2048)return i;throw Error("Invalid continuation byte")}if(240==(248&e)&&(t=c(),r=c(),n=c(),i=(15&e)<<18|t<<12|r<<6|n,i>=65536&&1114111>=i))return i;throw Error("Invalid UTF-8 detected")}function f(e){b=i(e),g=b.length,m=0;for(var t,r=[];(t=u())!==!1;)r.push(t);return o(r)}var d="object"==typeof r&&r,l="object"==typeof t&&t&&t.exports==d&&t,p="object"==typeof e&&e;(p.global===p||p.window===p)&&(n=p);var b,g,m,v=String.fromCharCode,y={version:"2.0.0",encode:h,decode:f};if("function"==typeof define&&"object"==typeof define.amd&&define.amd)define(function(){return y});else if(d&&!d.nodeType)if(l)l.exports=y;else{var w={},_=w.hasOwnProperty;for(var x in y)_.call(y,x)&&(d[x]=y[x])}else n.utf8=y}(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})
},{}],258:[function(e,t){var r=e("global");try{t.exports="XMLHttpRequest"in r&&"withCredentials"in new r.XMLHttpRequest}catch(e){t.exports=!1}},{global:259}],259:[function(e,t){t.exports=function(){return this}()},{}],260:[function(e,t){(function(e){var r=/^[\],:{}\s]*$/,n=/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,i=/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,o=/(?:^|:|,)(?:\s*\[)+/g,s=/^\s+/,a=/\s+$/;t.exports=function(t){return"string"==typeof t&&t?(t=t.replace(s,"").replace(a,""),e.JSON&&JSON.parse?JSON.parse(t):r.test(t.replace(n,"@").replace(i,"]").replace(o,""))?new Function("return "+t)():void 0):null}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],261:[function(e,t,r){r.encode=function(e){var t="";for(var r in e)e.hasOwnProperty(r)&&(t.length&&(t+="&"),t+=encodeURIComponent(r)+"="+encodeURIComponent(e[r]));return t},r.decode=function(e){for(var t={},r=e.split("&"),n=0,i=r.length;i>n;n++){var o=r[n].split("=");t[decodeURIComponent(o[0])]=decodeURIComponent(o[1])}return t}},{}],262:[function(e,t){var r=/^(?:(?![^:@]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,n=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];t.exports=function(e){var t=e,i=e.indexOf("["),o=e.indexOf("]");-1!=i&&-1!=o&&(e=e.substring(0,i)+e.substring(i,o).replace(/:/g,";")+e.substring(o,e.length));for(var s=r.exec(e||""),a={},h=14;h--;)a[n[h]]=s[h]||"";return-1!=i&&-1!=o&&(a.source=t,a.host=a.host.substring(1,a.host.length-1).replace(/;/g,":"),a.authority=a.authority.replace("[","").replace("]","").replace(/;/g,":"),a.ipv6uri=!0),a}},{}],263:[function(e,t){function r(e,t){var r;return r=t?new i(e,t):new i(e)}var n=function(){return this}(),i=n.WebSocket||n.MozWebSocket;t.exports=i?r:null,i&&(r.prototype=i.prototype)},{}],264:[function(e,t){(function(r){function n(e){function t(e){if(!e)return!1;if(r.Buffer&&r.Buffer.isBuffer(e)||r.ArrayBuffer&&e instanceof ArrayBuffer||r.Blob&&e instanceof Blob||r.File&&e instanceof File)return!0;if(i(e)){for(var n=0;n<e.length;n++)if(t(e[n]))return!0}else if(e&&"object"==typeof e){e.toJSON&&(e=e.toJSON());for(var o in e)if(e.hasOwnProperty(o)&&t(e[o]))return!0}return!1}return t(e)}var i=e("isarray");t.exports=n}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{isarray:265}],265:[function(e,t){t.exports=e(196)},{"/Volumes/Case Sensitive/perso/bonhomme/node_modules/browserify/node_modules/isarray/index.js":196}],266:[function(e,t){t.exports=e(214)},{"/Volumes/Case Sensitive/perso/bonhomme/node_modules/browserify/node_modules/vm-browserify/node_modules/indexof/index.js":214}],267:[function(e,t,r){var n=Object.prototype.hasOwnProperty;r.keys=Object.keys||function(e){var t=[];for(var r in e)n.call(e,r)&&t.push(r);return t},r.values=function(e){var t=[];for(var r in e)n.call(e,r)&&t.push(e[r]);return t},r.merge=function(e,t){for(var r in t)n.call(t,r)&&(e[r]=t[r]);return e},r.length=function(e){return r.keys(e).length},r.isEmpty=function(e){return 0==r.length(e)}},{}],268:[function(e,t){var r=/^(?:(?![^:@]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,n=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];t.exports=function(e){for(var t=r.exec(e||""),i={},o=14;o--;)i[n[o]]=t[o]||"";return i}},{}],269:[function(e,t,r){(function(t){var n=e("isarray"),i=e("./is-buffer");r.deconstructPacket=function(e){function t(e){if(!e)return e;if(i(e)){var o={_placeholder:!0,num:r.length};return r.push(e),o}if(n(e)){for(var s=new Array(e.length),a=0;a<e.length;a++)s[a]=t(e[a]);return s}if("object"==typeof e&&!(e instanceof Date)){var s={};for(var h in e)s[h]=t(e[h]);return s}return e}var r=[],o=e.data,s=e;return s.data=t(o),s.attachments=r.length,{packet:s,buffers:r}},r.reconstructPacket=function(e,t){function r(e){if(e&&e._placeholder){var i=t[e.num];return i}if(n(e)){for(var o=0;o<e.length;o++)e[o]=r(e[o]);return e}if(e&&"object"==typeof e){for(var s in e)e[s]=r(e[s]);return e}return e}return e.data=r(e.data),e.attachments=void 0,e},r.removeBlobs=function(e,r){function o(e,h,c){if(!e)return e;if(t.Blob&&e instanceof Blob||t.File&&e instanceof File){s++;var u=new FileReader;u.onload=function(){c?c[h]=this.result:a=this.result,--s||r(a)},u.readAsArrayBuffer(e)}else if(n(e))for(var f=0;f<e.length;f++)o(e[f],f,e);else if(e&&"object"==typeof e&&!i(e))for(var d in e)o(e[d],d,e)}var s=0,a=e;o(a),s||r(a)}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./is-buffer":271,isarray:272}],270:[function(e,t,r){function n(){}function i(e){var t="",n=!1;return t+=e.type,(r.BINARY_EVENT==e.type||r.BINARY_ACK==e.type)&&(t+=e.attachments,t+="-"),e.nsp&&"/"!=e.nsp&&(n=!0,t+=e.nsp),null!=e.id&&(n&&(t+=",",n=!1),t+=e.id),null!=e.data&&(n&&(t+=","),t+=f.stringify(e.data)),u("encoded %j as %s",e,t),t}function o(e,t){function r(e){var r=l.deconstructPacket(e),n=i(r.packet),o=r.buffers;o.unshift(n),t(o)}l.removeBlobs(e,r)}function s(){this.reconstructor=null}function a(e){var t={},n=0;if(t.type=Number(e.charAt(0)),null==r.types[t.type])return c();if(r.BINARY_EVENT==t.type||r.BINARY_ACK==t.type){for(t.attachments="";"-"!=e.charAt(++n);)t.attachments+=e.charAt(n);t.attachments=Number(t.attachments)}if("/"==e.charAt(n+1))for(t.nsp="";++n;){var i=e.charAt(n);if(","==i)break;if(t.nsp+=i,n+1==e.length)break}else t.nsp="/";var o=e.charAt(n+1);if(""!=o&&Number(o)==o){for(t.id="";++n;){var i=e.charAt(n);if(null==i||Number(i)!=i){--n;break}if(t.id+=e.charAt(n),n+1==e.length)break}t.id=Number(t.id)}if(e.charAt(++n))try{t.data=f.parse(e.substr(n))}catch(e){return c()}return u("decoded %s as %j",e,t),t}function h(e){this.reconPack=e,this.buffers=[]}function c(){return{type:r.ERROR,data:"parser error"}}var u=e("debug")("socket.io-parser"),f=e("json3"),d=(e("isarray"),e("component-emitter")),l=e("./binary"),p=e("./is-buffer");r.protocol=4,r.types=["CONNECT","DISCONNECT","EVENT","BINARY_EVENT","ACK","BINARY_ACK","ERROR"],r.CONNECT=0,r.DISCONNECT=1,r.EVENT=2,r.ACK=3,r.ERROR=4,r.BINARY_EVENT=5,r.BINARY_ACK=6,r.Encoder=n,r.Decoder=s,n.prototype.encode=function(e,t){if(u("encoding packet %j",e),r.BINARY_EVENT==e.type||r.BINARY_ACK==e.type)o(e,t);else{var n=i(e);t([n])}},d(s.prototype),s.prototype.add=function(e){var t;if("string"==typeof e)t=a(e),r.BINARY_EVENT==t.type||r.BINARY_ACK==t.type?(this.reconstructor=new h(t),0==this.reconstructor.reconPack.attachments&&this.emit("decoded",t)):this.emit("decoded",t);else{if(!p(e)&&!e.base64)throw new Error("Unknown type: "+e);if(!this.reconstructor)throw new Error("got binary data when not reconstructing a packet");t=this.reconstructor.takeBinaryData(e),t&&(this.reconstructor=null,this.emit("decoded",t))}},s.prototype.destroy=function(){this.reconstructor&&this.reconstructor.finishedReconstruction()},h.prototype.takeBinaryData=function(e){if(this.buffers.push(e),this.buffers.length==this.reconPack.attachments){var t=l.reconstructPacket(this.reconPack,this.buffers);return this.finishedReconstruction(),t}return null},h.prototype.finishedReconstruction=function(){this.reconPack=null,this.buffers=[]}},{"./binary":269,"./is-buffer":271,"component-emitter":235,debug:236,isarray:272,json3:273}],271:[function(e,t){(function(e){function r(t){return e.Buffer&&e.Buffer.isBuffer(t)||e.ArrayBuffer&&t instanceof ArrayBuffer}t.exports=r}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],272:[function(e,t){t.exports=e(196)},{"/Volumes/Case Sensitive/perso/bonhomme/node_modules/browserify/node_modules/isarray/index.js":196}],273:[function(e,t,r){!function(e){function t(e){if(t[e]!==o)return t[e];var r;if("bug-string-char-index"==e)r="a"!="a"[0];else if("json"==e)r=t("json-stringify")&&t("json-parse");else{var n,i='{"a":[1,true,false,null,"\\u0000\\b\\n\\f\\r\\t"]}';if("json-stringify"==e){var a=c.stringify,h="function"==typeof a&&u;if(h){(n=function(){return 1}).toJSON=n;try{h="0"===a(0)&&"0"===a(new Number)&&'""'==a(new String)&&a(s)===o&&a(o)===o&&a()===o&&"1"===a(n)&&"[1]"==a([n])&&"[null]"==a([o])&&"null"==a(null)&&"[null,null,null]"==a([o,s,null])&&a({a:[n,!0,!1,null,"\x00\b\n\f\r	"]})==i&&"1"===a(null,n)&&"[\n 1,\n 2\n]"==a([1,2],null,1)&&'"-271821-04-20T00:00:00.000Z"'==a(new Date(-864e13))&&'"+275760-09-13T00:00:00.000Z"'==a(new Date(864e13))&&'"-000001-01-01T00:00:00.000Z"'==a(new Date(-621987552e5))&&'"1969-12-31T23:59:59.999Z"'==a(new Date(-1))}catch(e){h=!1}}r=h}if("json-parse"==e){var f=c.parse;if("function"==typeof f)try{if(0===f("0")&&!f(!1)){n=f(i);var d=5==n.a.length&&1===n.a[0];if(d){try{d=!f('"	"')}catch(e){}if(d)try{d=1!==f("01")}catch(e){}if(d)try{d=1!==f("1.")}catch(e){}}}}catch(e){d=!1}r=d}}return t[e]=!!r}var n,i,o,s={}.toString,a="function"==typeof define&&define.amd,h="object"==typeof JSON&&JSON,c="object"==typeof r&&r&&!r.nodeType&&r;c&&h?(c.stringify=h.stringify,c.parse=h.parse):c=e.JSON=h||{};var u=new Date(-0xc782b5b800cec);try{u=-109252==u.getUTCFullYear()&&0===u.getUTCMonth()&&1===u.getUTCDate()&&10==u.getUTCHours()&&37==u.getUTCMinutes()&&6==u.getUTCSeconds()&&708==u.getUTCMilliseconds()}catch(e){}if(!t("json")){var f="[object Function]",d="[object Date]",l="[object Number]",p="[object String]",b="[object Array]",g="[object Boolean]",m=t("bug-string-char-index");if(!u)var v=Math.floor,y=[0,31,59,90,120,151,181,212,243,273,304,334],w=function(e,t){return y[t]+365*(e-1970)+v((e-1969+(t=+(t>1)))/4)-v((e-1901+t)/100)+v((e-1601+t)/400)};(n={}.hasOwnProperty)||(n=function(e){var t,r={};return(r.__proto__=null,r.__proto__={toString:1},r).toString!=s?n=function(e){var t=this.__proto__,r=e in(this.__proto__=null,this);return this.__proto__=t,r}:(t=r.constructor,n=function(e){var r=(this.constructor||t).prototype;return e in this&&!(e in r&&this[e]===r[e])}),r=null,n.call(this,e)});var _={boolean:1,number:1,string:1,undefined:1},x=function(e,t){var r=typeof e[t];return"object"==r?!!e[t]:!_[r]};if(i=function(e,t){var r,o,a,h=0;(r=function(){this.valueOf=0}).prototype.valueOf=0,o=new r;for(a in o)n.call(o,a)&&h++;return r=o=null,h?i=2==h?function(e,t){var r,i={},o=s.call(e)==f;for(r in e)o&&"prototype"==r||n.call(i,r)||!(i[r]=1)||!n.call(e,r)||t(r)}:function(e,t){var r,i,o=s.call(e)==f;for(r in e)o&&"prototype"==r||!n.call(e,r)||(i="constructor"===r)||t(r);(i||n.call(e,r="constructor"))&&t(r)}:(o=["valueOf","toString","toLocaleString","propertyIsEnumerable","isPrototypeOf","hasOwnProperty","constructor"],i=function(e,t){var r,i,a=s.call(e)==f,h=!a&&"function"!=typeof e.constructor&&x(e,"hasOwnProperty")?e.hasOwnProperty:n;for(r in e)a&&"prototype"==r||!h.call(e,r)||t(r);for(i=o.length;r=o[--i];h.call(e,r)&&t(r));}),i(e,t)},!t("json-stringify")){var S={92:"\\\\",34:'\\"',8:"\\b",12:"\\f",10:"\\n",13:"\\r",9:"\\t"},T="000000",A=function(e,t){return(T+(t||0)).slice(-e)},E="\\u00",C=function(e){var t,r='"',n=0,i=e.length,o=i>10&&m;for(o&&(t=e.split(""));i>n;n++){var s=e.charCodeAt(n);switch(s){case 8:case 9:case 10:case 12:case 13:case 34:case 92:r+=S[s];break;default:if(32>s){r+=E+A(2,s.toString(16));break}r+=o?t[n]:m?e.charAt(n):e[n]}}return r+'"'},k=function(e,t,r,a,h,c,u){var f,m,y,_,x,S,T,E,R,M,B,I,j,P,L,O;try{f=t[e]}catch(e){}if("object"==typeof f&&f)if(m=s.call(f),m!=d||n.call(f,"toJSON"))"function"==typeof f.toJSON&&(m!=l&&m!=p&&m!=b||n.call(f,"toJSON"))&&(f=f.toJSON(e));else if(f>-1/0&&1/0>f){if(w){for(x=v(f/864e5),y=v(x/365.2425)+1970-1;w(y+1,0)<=x;y++);for(_=v((x-w(y,0))/30.42);w(y,_+1)<=x;_++);x=1+x-w(y,_),S=(f%864e5+864e5)%864e5,T=v(S/36e5)%24,E=v(S/6e4)%60,R=v(S/1e3)%60,M=S%1e3}else y=f.getUTCFullYear(),_=f.getUTCMonth(),x=f.getUTCDate(),T=f.getUTCHours(),E=f.getUTCMinutes(),R=f.getUTCSeconds(),M=f.getUTCMilliseconds();f=(0>=y||y>=1e4?(0>y?"-":"+")+A(6,0>y?-y:y):A(4,y))+"-"+A(2,_+1)+"-"+A(2,x)+"T"+A(2,T)+":"+A(2,E)+":"+A(2,R)+"."+A(3,M)+"Z"}else f=null;if(r&&(f=r.call(t,e,f)),null===f)return"null";if(m=s.call(f),m==g)return""+f;if(m==l)return f>-1/0&&1/0>f?""+f:"null";if(m==p)return C(""+f);if("object"==typeof f){for(P=u.length;P--;)if(u[P]===f)throw TypeError();if(u.push(f),B=[],L=c,c+=h,m==b){for(j=0,P=f.length;P>j;j++)I=k(j,f,r,a,h,c,u),B.push(I===o?"null":I);O=B.length?h?"[\n"+c+B.join(",\n"+c)+"\n"+L+"]":"["+B.join(",")+"]":"[]"}else i(a||f,function(e){var t=k(e,f,r,a,h,c,u);t!==o&&B.push(C(e)+":"+(h?" ":"")+t)}),O=B.length?h?"{\n"+c+B.join(",\n"+c)+"\n"+L+"}":"{"+B.join(",")+"}":"{}";return u.pop(),O}};c.stringify=function(e,t,r){var n,i,o,a;if("function"==typeof t||"object"==typeof t&&t)if((a=s.call(t))==f)i=t;else if(a==b){o={};for(var h,c=0,u=t.length;u>c;h=t[c++],a=s.call(h),(a==p||a==l)&&(o[h]=1));}if(r)if((a=s.call(r))==l){if((r-=r%1)>0)for(n="",r>10&&(r=10);n.length<r;n+=" ");}else a==p&&(n=r.length<=10?r:r.slice(0,10));return k("",(h={},h[""]=e,h),i,o,n,"",[])}}if(!t("json-parse")){var R,M,B=String.fromCharCode,I={92:"\\",34:'"',47:"/",98:"\b",116:"	",110:"\n",102:"\f",114:"\r"},j=function(){throw R=M=null,SyntaxError()},P=function(){for(var e,t,r,n,i,o=M,s=o.length;s>R;)switch(i=o.charCodeAt(R)){case 9:case 10:case 13:case 32:R++;break;case 123:case 125:case 91:case 93:case 58:case 44:return e=m?o.charAt(R):o[R],R++,e;case 34:for(e="@",R++;s>R;)if(i=o.charCodeAt(R),32>i)j();else if(92==i)switch(i=o.charCodeAt(++R)){case 92:case 34:case 47:case 98:case 116:case 110:case 102:case 114:e+=I[i],R++;break;case 117:for(t=++R,r=R+4;r>R;R++)i=o.charCodeAt(R),i>=48&&57>=i||i>=97&&102>=i||i>=65&&70>=i||j();e+=B("0x"+o.slice(t,R));break;default:j()}else{if(34==i)break;for(i=o.charCodeAt(R),t=R;i>=32&&92!=i&&34!=i;)i=o.charCodeAt(++R);e+=o.slice(t,R)}if(34==o.charCodeAt(R))return R++,e;j();default:if(t=R,45==i&&(n=!0,i=o.charCodeAt(++R)),i>=48&&57>=i){for(48==i&&(i=o.charCodeAt(R+1),i>=48&&57>=i)&&j(),n=!1;s>R&&(i=o.charCodeAt(R),i>=48&&57>=i);R++);if(46==o.charCodeAt(R)){for(r=++R;s>r&&(i=o.charCodeAt(r),i>=48&&57>=i);r++);r==R&&j(),R=r}if(i=o.charCodeAt(R),101==i||69==i){for(i=o.charCodeAt(++R),(43==i||45==i)&&R++,r=R;s>r&&(i=o.charCodeAt(r),i>=48&&57>=i);r++);r==R&&j(),R=r}return+o.slice(t,R)}if(n&&j(),"true"==o.slice(R,R+4))return R+=4,!0;if("false"==o.slice(R,R+5))return R+=5,!1;if("null"==o.slice(R,R+4))return R+=4,null;j()}return"$"},L=function(e){var t,r;if("$"==e&&j(),"string"==typeof e){if("@"==(m?e.charAt(0):e[0]))return e.slice(1);if("["==e){for(t=[];e=P(),"]"!=e;r||(r=!0))r&&(","==e?(e=P(),"]"==e&&j()):j()),","==e&&j(),t.push(L(e));return t}if("{"==e){for(t={};e=P(),"}"!=e;r||(r=!0))r&&(","==e?(e=P(),"}"==e&&j()):j()),(","==e||"string"!=typeof e||"@"!=(m?e.charAt(0):e[0])||":"!=P())&&j(),t[e.slice(1)]=L(P());return t}j()}return e},O=function(e,t,r){var n=D(e,t,r);n===o?delete e[t]:e[t]=n},D=function(e,t,r){var n,o=e[t];if("object"==typeof o&&o)if(s.call(o)==b)for(n=o.length;n--;)O(o,n,r);else i(o,function(e){O(o,e,r)});return r.call(e,t,o)};c.parse=function(e,t){var r,n;return R=0,M=""+e,r=L(P()),"$"!=P()&&j(),R=M=null,t&&s.call(t)==f?D((n={},n[""]=r,n),"",t):r}}}a&&define(function(){return c})}(this)},{}],274:[function(e,t){function r(e,t){var r=[];t=t||0;for(var n=t||0;n<e.length;n++)r[n-t]=e[n];return r}t.exports=r},{}]},{},[39]);