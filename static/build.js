!function t(e,r,n){function i(s,a){if(!r[s]){if(!e[s]){var h="function"==typeof require&&require;if(!a&&h)return h(s,!0);if(o)return o(s,!0);var c=new Error("Cannot find module '"+s+"'");throw c.code="MODULE_NOT_FOUND",c}var u=r[s]={exports:{}};e[s][0].call(u.exports,function(t){var r=e[s][1][t];return i(r?r:t)},u,u.exports,t,e,r,n)}return r[s].exports}for(var o="function"==typeof require&&require,s=0;s<n.length;s++)i(n[s]);return i}({1:[function(t,e){function r(){this._keys={},document.body.addEventListener("keydown",this._onDown.bind(this),!1),document.body.addEventListener("keyup",this._onUp.bind(this),!1),window.addEventListener("focus",this._onFocus.bind(this),!1),window.addEventListener("blur",this._onBlur.bind(this),!1)}r.prototype={_onFocus:function(){this._paused=0},_onBlur:function(){this._paused=1},_onDown:function(t){[37,38,39,40].indexOf(t.which)>=0&&t.preventDefault(),this._keys[t.which]=1},_onUp:function(t){this._keys[t.which]=0},paused:function(){return this._paused},x:function(){if(this._paused)return 0;var t=!!(this._keys[37]||this._keys[81]||this._keys[65]),e=!(!this._keys[39]&&!this._keys[68]);return-t+e},y:function(){if(this._paused)return 0;var t=!!(this._keys[38]||this._keys[90]||this._keys[87]),e=!(!this._keys[40]&&!this._keys[83]);return+t-e}},e.exports=r},{}],2:[function(t,e){var r=t(1),n=t(4),i=t(52);e.exports=i?n:r},{}],3:[function(t,e){function r(){this._x=0,this._y=0}r.prototype={setState:function(t){this._x=t.x,this._y=t.y},x:function(){return this._x},y:function(){return this._y}},e.exports=r},{}],4:[function(t,e){function r(){window.addEventListener("touchstart",this._onStart.bind(this),!1),window.addEventListener("touchend",this._onEnd.bind(this),!1),window.addEventListener("touchmove",this._onMove.bind(this),!1),window.addEventListener("touchcancel",this._onCancel.bind(this),!1),window.addEventListener("focus",this._onFocus.bind(this),!1),window.addEventListener("blur",this._onBlur.bind(this),!1),this._paused=!1,this.touchEventId=null}function n(t,e){if(null===e)return null;for(var r=t.length,n=0;r>n;++n)if(e===t[n].identifier)return t[n];return null}function i(t){return[t.screenX,t.screenY]}r.prototype={_onFocus:function(){this._paused=0},_onBlur:function(){this._paused=1},_onStart:function(t){if(t.preventDefault(),!this.startPos){var e=t.changedTouches[0];this.touchEventId=e.identifier,this.startPos=i(e),this.movePos=this.startPos}},_onMove:function(t){t.preventDefault();var e=n(t.changedTouches,this.touchEventId);e&&(this.movePos=i(e))},_onEnd:function(t){t.preventDefault();var e=n(t.changedTouches,this.touchEventId);e&&(this.startPos=null,this.movePos=null)},_onCancel:function(t){t.preventDefault(),this.startPos=null,this.movePos=null},update:function(t,e){if(this.startPos){var r=this.movePos[0]-this.startPos[0],n=this.movePos[1]-this.startPos[1];this.startPos[0]=this.startPos[0]+.001*r*e,this.startPos[1]=this.startPos[1]+.001*n*e}},paused:function(){return this._paused},x:function(){if(this._paused)return 0;if(!this.startPos||!this.movePos)return 0;var t=this.movePos[0]-this.startPos[0];return Math.abs(t)<30?0:0>t?-1:1},y:function(){if(this._paused)return 0;if(!this.startPos||!this.movePos)return 0;var t=this.movePos[1]-this.startPos[1]-10;return Math.abs(t)<8?0:0>t?1:-1}},e.exports=r},{}],5:[function(t,e){e.exports=t(2)},{}],6:[function(t,e){function r(t){n.DisplayObjectContainer.call(this),this.game=t;var e=new o("",{font:i.style(20)});this.life=e;var r=new n.Sprite(a);this.m2=r,r.scale.set(.5,.5),r.position.set(40,-12),this.addChild(e),this.addChild(r)}var n=t(231),i=t(19),o=t(48),s=t(41),a=n.Texture.fromImage("./img/m2.png");r.prototype=Object.create(n.DisplayObjectContainer.prototype),r.prototype.constructor=r,r.prototype.update=function(){var t=this.game.player.life,e=s.getPlayerScore(this.game.player);e>0&&t>0?(this.m2.tint=this.life.tint=50>t?16711680:100>=t?16750848:200>=t?10066329:6736998,this.life.text=""+(t/100).toFixed(2),this.alpha=1):this.alpha=0},e.exports=r},{}],7:[function(t,e){function r(t){i.call(this,"",{font:n.style(20,!0)}),this.game=t,this.tint=13386752}var n=t(19),i=t(48),o=t(41);r.prototype=Object.create(i.prototype),r.prototype.constructor=r,r.prototype.update=function(t){var e=this.game,r=e.player,n=r.life,i=o.getPlayerScore(r);if(i>0){var s=e.getCurrentRank(i);s?(this.alpha=0>=n?1:Math.cos(t/80)<0?1:.2,this.text="#"+s):this.alpha=0}else{var a=e.getPlayerBestScore(r.name);this.text=a?"#"+a.rank:"no rank"}},e.exports=r},{}],8:[function(t,e){function r(t){i.call(this,"",{font:n.style(20,!0)}),this.game=t,this.tint=8947899}var n=t(19),i=t(48),o=t(41);r.prototype=Object.create(i.prototype),r.prototype.constructor=r,r.prototype.update=function(){var t=this.game,e=t.player,r=o.getPlayerScore(e);if(r>0)this.text=""+r;else{var n=t.getPlayerBestScore(e.name);this.text=n?""+n.score:"no score"}},e.exports=r},{}],9:[function(t,e){function r(t){i.call(this),this.game=t,this.life=new a(t),this.life.position.set(n.WIDTH-80,10),this.addChild(this.life),this.rank=new s(t),this.rank.position.set(10,40),this.addChild(this.rank),this.score=new o(t),this.score.position.set(10,10),this.addChild(this.score)}var n=t(18),i=t(49),o=t(8),s=t(7),a=t(6);r.prototype=Object.create(i.prototype),r.prototype.constructor=r,e.exports=r},{}],10:[function(t,e){e.exports={CAR:Math.pow(2,1),PARTICLE:Math.pow(2,2),PLAYER:Math.pow(2,3)}},{}],11:[function(t,e){function r(){var t=n.defer();return t.resolve(),t.promise}var n=t(232);e.exports=r},{}],12:[function(t,e){function r(t){return h([3,,.2597,.3427,.3548,.04+.03*t,,.1573,,,,,,,,,.3027,-.0823,1,,,,,.5])}function n(t){var e=.1+.2*t,r=.08;return h([3,.4,1,,.81,e,,,,.04,.45,,,,,,.58,,r,,.05,.05,,.8])}function i(t){var e=new u({src:[t],volume:0,loop:!0,autoplay:!0});return{setVolume:function(t){e.volume(t)},stop:function(){e.stop()}}}function o(t,e,r){f.usingWebAudio&&(t.pos(r.x,r.y,0,e),r.vel&&t.velocity(r.vel[0],r.vel[1],0,e))}function s(t,e,r){if(!(t in l))throw new Error(t+" is unknown");if(f.usingWebAudio){r=r||1;var n=l[t],i=1===n.length?n[0]:n[~~(Math.random()*n.length)],s=i.play();if(i.volume(r,s),e){var a=[i,s,e];o.apply(null,a),w.push(a),i.once("end",function(){var t=w.indexOf(a);-1!==t&&w.splice(t,1)},s)}}}function a(){for(var t=0,e=w.length;e>t;++t)o.apply(null,w[t])}var h=t(228),c=t(227),u=c.Howl,f=c.Howler,d={burn:[r(0),r(.2),r(.4),r(.6),r(.8),r(1)],snowballHit:[h([3,.03,.1,.14,.28,.92,,-.02,,,,.0155,.8768,,,,,,.35,,,,,.5])],carHit:[h([3,,.0661,,.36,.3901,,-.5478,,,,-.0799,.29,,,,,-.2199,.22,-.26,,,.02,.5])],car:[n(0),n(.5),n(1)],start:[h([2,.44,.24,,.55,.2,,.02,.02,.12,.34,,.43,.66,-.14,,-.54,.56,.17,,,.28,,.6])],lose:[h([2,.08,.63,.11,.84,.24,,,-.06,.23,.77,,.43,.66,-.14,,-.6,.56,.32,-.06,,,,.6])]},l={};for(var p in d){for(var v=[],b=d[p],g=b.length,y=0;g>y;++y){var m=new u({src:[b[y]],refDistance:10,rolloffFactor:1});v.push(m)}l[p]=v}var w=[];e.exports={micOn:function(t){f.pos(t.x,t.y,0),t.vel&&f.velocity(t.vel[0],t.vel[1],0)},play:s,loop:i,update:a}},{}],13:[function(t,e){var r=t(18);e.exports=function(){var t=this.x,e=this.y,n=this.width;(e>0||-n>t||t>r.WIDTH+n)&&(this.parent.removeChild(this),this.destroy&&this.destroy())}},{}],14:[function(t,e){e.exports=function(t){var e=this._dieAfterTimeout;e||(e=this._dieAfterTimeout=t+(this.dieTimeout||0)),t>e&&this.parent&&this.parent.removeChild(this)}},{}],15:[function(t,e){e.exports=function(){0===this.children.length&&(this.parent.removeChild(this),this.destroy&&this.destroy())}},{}],16:[function(t,e){e.exports=function(t,e){for(var r=this.children,n=0;n<r.length;++n){var i=r[n];i.update&&i.update(t,e)}}},{}],17:[function(t,e){e.exports=function(t,e){var r=this.vel;if(r){var n=this.position;this.position.set(n.x+r[0]*e,n.y+r[1]*e)}}},{}],18:[function(t,e){e.exports={WIDTH:320,HEIGHT:480,networkPlaybackDelay:100,networkSendRate:50,playerMoveSpeed:.25,version:"2a",events:{playerenter:1,playerleave:2,playermove:3,playerdie:4,players:5,scores:6,newscore:7,playerready:8,ready:9}}},{}],19:[function(t,e){function r(t){var e=i.defer(),r=new n.BitmapFontLoader(t);return r.on("loaded",e.resolve),r.load(),e.promise}var n=t(231),i=t(232);e.exports={ready:i.all([,r("./fonts/Monda.xml")]).delay(100),style:function(t){return"bold "+(t||12)+" Monda"}}},{}],20:[function(t){function e(){var t=c.offset();return isNaN(t)||(E=t),Date.now()-E}function r(t){var n="grewebisawesome"+~~(e()/864e5),i=new l(n,T,t);i.on("GameOver",function(){o.delay(6e3).fin(function(){i.destroy(),r(t),i=null}).done()}),x=i,_&&_.setGame(x),S.setGame(x)}function n(t){function n(t){a(n);var r=Math.max(e(),o);o=r,i||(i=t);var s=Math.min(100,t-i);i=t,x.update(r,s),_&&_.update(r,s),w.render(x),S.update(r,s)}r(t);var i,o=0;a(n)}var i=t(238),o=t(232),s=t(234),a=t(239),h=t(245);t(244);var c=window.ntp,u=t(11),f=t(19),d=t(51),l=t(55),p=t(56),v=t(23),b=t(5),g=h("/",{reconnection:!1}),y=o.defer(),m=y.promise;g.on("connect",y.resolve),g.on("connect_error",y.reject),c.init(g);var w,x,_,S,T,A=m.delay(2e3),E=0;m.then(function(){_=new v(g),x&&_.setGame(x)}),i.then(function(){S=new d,T=new b,w=S.createRenderer();var t,e=u(),r=o.all([S.getPlayerName().fail(function(){return null}),e,A,f.ready]),i=new p;return function e(n){t||(t=n),r.isPending()&&(a(e),i.setProgress((n-t)/2200),i.update(n-t),w.render(i))}(),r.spread(n)}).done(),window.onerror=function(t){var e=function(){try{var t=document.createElement("canvas");return!!window.WebGLRenderingContext&&(t.getContext("webgl")||t.getContext("experimental-webgl"))}catch(t){return!1}}();s("/report/error",{method:"POST",data:{userAgent:window.navigator.userAgent,e:""+t,message:t.message,stack:t.stack,supports:{webgl:e}}})}},{}],21:[function(t,e){e.exports=t(22)},{}],22:[function(t,e){function r(t){return function(e,r){return t.logs.push(e+": "+JSON.stringify(r)),r}}function n(t,e,r){var n,i=new Int8Array(e);for(n=0;e>n;++n)i[n]=1;var o=r-e;for(n=0;o>n;++n)i[~~(e*t())]++;return i}function i(t,e){for(var r=[],n=0,i=0,o=0;t>o;++o){var s=!m.contains(e,o);s&&i&&(r.push(i),i=0),!s&&n&&(r.push(n),n=0),s?n++:i--}return n&&r.push(n),i&&r.push(i),r}function o(t){return m.map(t,function(t){return~~t})}function s(t,e){return m.map(t,function(t){return e*t})}function a(t,e){for(var r=[],n=0;n<e.length;++n){var i=e[n];if(0>i)r.push(i*t.length);else for(var o=0;i>o;++o)for(var s=0;s<t.length;++s)r.push(t[s])}return r}function h(t,e,r,n,i,o,s,a){return{scale:t,pos:e,vel:s,rot:(n+2*Math.PI)/r,speed:i,count:r,pattern:o,life:6e3,ang:0,randAng:a||0,randVel:a||0}}function c(t,e,r,n,i,o,s){for(var a=6,h=[],c=0;a>c;++c){var u=(c%2?-1:1)*~~(1+((c%2?o:i)-1)*t());h.push(u)}return{y:e,leftToRight:r,vel:n,speed:80*(1+(s||0))/n,seq:h}}function u(t,e){return m.map(m.range(0,t),function(r){var n=e(r*A,r);return n.first=r===t-1,n.last=0===r,n})}function f(t,e,r,n){var i=~~Math.min(.8+t()+5*r*t(),n);if(0>=i)return[];var o=1-1/i,s=t()<.5;return u(i,function(n){var i=.08+.5*x(t(),1-o,.8)*x(t(),r,.5),a=3+o*t()+6*t()*r,h=9-5*x(w(0,20,r*o),t(),.5),u=.2+.2*(1-r);return c(t,e+n,s=!s,i,a,h,u)})}function d(t){var e=~~(3*t());switch(e){case 0:return o(s([.2+.8*t(),-t(),.2+.8*t(),-1-t()],20+20*t()));case 1:return o(s([.5+.5*t(),-.5-2*t()],80));case 2:return o(s([1,-1],30+50*t()))}throw new Error("reached unmatched case "+e)}function l(t,e){function o(t){return.3+.8*t.random()}var s,c={roads:[],snowballs:[],fireballs:[],logs:[]},u=r(c),f=~~(1.6+1*e+2*e*t()),l=f*(1+1.2*t()*t()+3*e*t()),p=n(t,f,l);u("distribCols",p);var v=0|x(30,_.WIDTH/2-30,t()*t()),b=0|x(100,200,t());for(s=0;f>s;++s){var g=p[s],y=[s%2?v:S-v,80+b*(s/2|0)],w=(t()<.5?1:-1)*(.01+.01*e)*t()*t(),T=90-40*t()-30*e,A=m.range(Math.min(g*(.2*(1-e)+.4*t()*t()),g-1)),E=d(t),C=i(g,A),M=a(C,E);u("repeatPattern",E);var R=h(o,y,g,w,T,M,.2);c.fireballs.push(R)}return c}function p(t,e){function o(t){return.2+.2*t.random()}var s,a={roads:[],snowballs:[],fireballs:[],logs:[]},c=r(a),u=x(e,t(),.5);c("more-cols",u);var f=~~(1.8+4*e*e*x(e,t(),.5)),l=2*f+40*u,p=0|x(50,_.WIDTH/2-50,1-t()*t()),v=n(t,f,l);for(s=0;f>s;++s){var b=[s%2?p:S-p,100+60*~~(s/2)],g=(t()<.5?1:-1)*(.05*t()+.2*t()*e),y=300-280*t()*e*u,w=v[s],T=m.range(Math.min(w*(.2*(1-e)+.4*t()*t()),w-1)),A=t()<.2?d(t):i(w,T);a.snowballs.push(h(o,b,w,g,y,A,.25,.1))}return a}function v(t,e){var r=t()<.5?[e/2,e]:[e,e/2],n=f(t,0,r[0],5),i=160-80*t()-60*e*t(),o=n.length*A,s=n.length*A+i,a=~~((T-s)/A),h=f(t,s,r[1],a),c=[];return t()>x(t(),e,.8)&&c.push({scale:function(){return.5},pos:[5,o+.5*i],vel:.1+.1*t(),ang:0,randAngle:.8*t(),speed:500+1e3*t(),life:6e3}),{roads:n.concat(h),snowballs:c,fireballs:[],logs:[]}}function b(t,e,n){function i(t){return function(e){return t*(.8+.4*e.random())}}function o(t){return.3+.3*t.random()*t.random()}var s,a,c,u,l,p,v,b={roads:[],snowballs:[],fireballs:[],logs:[]},g=r(b),y=6;n>0&&(b.roads=f(t,0,e,y));var w=b.roads.length,_=A*w,E=m.max(m.pluck(b.roads,"vel")),C=w?Math.max(0,Math.min(Math.pow(w/y,2)+2*(E-.05),1)):0;g("road-difficulty",C);var M=6,R=5,k=_,B=T-_,I=m.range(1,M).map(function(t){return Math.floor(t*S/M)}),P=m.range(1,R).map(function(t){return Math.floor(k+t*B/R)}),L=[];if(I.forEach(function(t){P.forEach(function(e){L.push([t,e])})}),n>1&&t()<.9)for(a=2*t()*t(),l=0;a>l;++l)s=L.splice(~~(t()*L.length),1)[0],c=1+~~(t()*t()+5*t()*t()*t()),u=t()*(.3*t()+.1*(n%24)/24),v=t()*t(),p=(1.1-v)*x(600,200,C),b.snowballs.push(h(o,s,c,u,p,t()<v?d(t):null,.22,.05));if(n>4&&t()<.9)for(a=3*(1-C)*t()*t(),l=0;a>l;++l)s=L.splice(~~(t()*L.length),1)[0],c=1+~~(t()*t()+5*t()*t()*t()),u=t()*t()*.3,v=t()*t(),g("a",v),p=(1.1-v)*x(100,600,C),b.fireballs.push(h(i(.4+.3*e+2*t()*(1-v)*(1-v)),s,c,u,p,t()*t()>v?d(t):[~~(10+50*t()),-1],.25-.2*t()*v));return b}function g(t,e){function n(r){return.2*e+.4+.3*r.random()+.2*e*t()}function i(t){return.3*e+.2+.3*t.random()*t.random()}for(var o={roads:[],snowballs:[],fireballs:[],logs:[]},s=(r(o),2+2*t()+(3+2*t())*e|0),a=0,h=1;s>h;++h){var c=t()<.5,u=t()<.5*(1-e)+.2*t(),f=40+50*t()+30*(1-e),l=d(t);(u?o.snowballs:o.fireballs).push({scale:u?i:n,pos:[c?a:S-a,Math.floor(h*T/s)],vel:.2+.1*t(),ang:c?0:Math.PI,speed:f,pattern:l,life:6e3})}if(t()<e){var p=~~(2+t()+2*t()*e);o.fireballs.push({scale:n,pos:[t()*S,t()<.5?30:T-30],vel:.2,rot:(.02*t()+2*Math.PI)/p,count:p,speed:100,pattern:d(t),life:6e3})}if(t()<.2){var p=~~(1+2*t()+4*t()*t());o.snowballs.push({scale:i,pos:[t()*S,t()<.5?30:T-30],vel:.2,rot:(.04*t()+2*Math.PI)/p,count:p,speed:10+100*t(),pattern:[100,-200],life:6e3})}return o}function y(t,e,r){var n=.2*(t/16%1)+.5*(t/32%1)+.3*(t/64)+.8*r()*r()*r(),i="standard";r()<.08*w(0,8,t)&&(i="blizzard"),r()<.15*w(0,8,t)&&(i="hell"),r()<.3*w(0,4,t)&&(i="passage"),r()<.2*w(0,4,t)&&(i="double");var o=E[i](r,n,t);return o.logs=["gen: "+i+", diff: "+n.toPrecision(3),""].concat(o.logs),o}var m=t(229),w=t(243),x=t(59),_=t(18),S=_.WIDTH,T=500,A=60,E={hell:l,blizzard:p,standard:b,double:v,passage:g};e.exports={chunkSize:T,generate:y}},{}],23:[function(t,e){function r(t){this.socket=t,this.score=new o(t),this.playersByIds={},this.playersData={},this.players=new c,this.names=new n.DisplayObjectContainer,t.on(u.playermove,this.onPlayerMove.bind(this)),t.on(u.playerdie,this.onPlayerDie.bind(this)),t.on(u.playerenter,this.onPlayerEnter.bind(this)),t.on(u.playerleave,this.onPlayerLeave.bind(this)),t.on(u.players,this.onPlayers.bind(this)),this.playerGhost=!0;var e=this;this.env=this.playerGhost?{computeAlpha:function(t){return 1-e.game.positionObfuscation(t)}}:{},t.emit(u.ready,h)}var n=t(231),i=t(39),o=t(24),s=t(25),a=t(26),h=t(18),c=t(49),u=h.events;r.prototype={setGame:function(t){this.score.setGame(t),this.game=t,t.players.addChild(this.players),t.names.addChild(this.names),this.player&&this.player.destroy(),this.player=new s(t.player,this.socket)},onPlayers:function(t){for(var e in t)this.onNewPlayerData(t[e],e)},onPlayerDie:function(t,e,r){if(e in this.playersData){var n=this.playersByIds[e];n&&(n.onDie(t,r,this.game),n.destroy(),delete this.playersByIds[e])}},onPlayerMove:function(t,e){if(e in this.playersData){var r=this.playersByIds[e];if(!r){var n=this.playersData[e],o=new i(n.name,this.names,this.playerGhost?.6:1,this.env);o.position.x=-1e3,r=new a(o),this.playersByIds[e]=r,this.players.addChild(o)}r.onMove(t)}},onPlayerEnter:function(t,e){this.onNewPlayerData(t,e)},onPlayerLeave:function(t){var e=this.playersByIds[t];e&&(e.destroy(),delete this.playersByIds[t]),delete this.playersData[t]},onNewPlayerData:function(t,e){this.playersData[e]=t},update:function(t,e){if(this.game){this.player.update(t,e);for(var r in this.playersByIds)this.playersByIds[r].update(t,e)}}},e.exports=r},{}],24:[function(t,e){function r(t){this.socket=t,this.scores=[],this.refreshScores=n(this._refreshScores.bind(this),800);var e=this;t.on(o.scores,function(t){e.scores=e.scores.concat(t),e.refreshScores(!1)}),t.on(o.newscore,this.addScore.bind(this))}var n=t(235),i=t(18),o=i.events;r.prototype={addScore:function(t){this.scores.push(t),this.refreshScores(!0)},_refreshScores:function(t){this.scores.sort(function(t,e){return t.score<e.score}),this.game&&this.game.setScores(this.scores,t)},setGame:function(t){var e=this;this.game=t,t.setScores(this.scores),t.on("GameOver",function(t){e.socket.emit(o.playerdie,t.data)})}},e.exports=r},{}],25:[function(t,e){function r(t,e,r){this.player=t,this.socket=e,this.rate=r||n.networkSendRate,this._lastSubmit=0,this.socket.emit(i.playerready,{name:t.name})}var n=t(18),i=n.events,o=t(27);r.prototype={destroy:function(){this.player=null,this.socket=null},update:function(t){if(!(t-this._lastSubmit<this.rate||(this._lastSubmit=t,this.player.dead||this.player.controls.paused()))){var e=o.encodeFromPlayer(this.player,t);this.socket.emit(i.playermove,e)}}},e.exports=r},{}],26:[function(t,e){function r(t,e){var r=new n;t.controls=r,this.player=t,this.controls=r,this.delay=e||i.networkPlaybackDelay,this.timeout=this.delay+100,this.evts=[],this.maxProgress=t.maxProgress}var n=t(3),i=t(18),o=t(27);r.prototype={destroy:function(){this.player.destroy(),this.player=null,this.evts=null},onMove:function(t){var e=o.decode(t);this.evts.push(e)},onDie:function(t,e,r){r.world.playerDied(this.player,!1)},update:function(t){for(var e=0;e<this.evts.length;++e){var r=this.evts[e];r.time<t-this.delay&&(this.lastEvts=r.time,o.applyToPlayer(this.player,r),this.maxProgress=Math.min(this.player.y,this.maxProgress),this.player.maxProgress=this.maxProgress,this.evts.splice(e--,1))}}},e.exports=r},{}],27:[function(t,e){var r=t(18),n=e.exports={encodeFromPlayer:function(t,e){return n.encode(n.getFromPlayer(t,e))},decodeToPlayer:function(t,e){return n.applyToPlayer(n.decode(e))},getFromPlayer:function(t,e){return{time:Math.floor(e),input:[t.controls.x(),t.controls.y()],pos:[Math.floor(t.x),Math.floor(t.y)],life:Math.floor(t.life)}},applyToPlayer:function(t,e){return t.controls.setState({x:e.input[0],y:e.input[1]}),t.position.set(e.pos[0],e.pos[1]),t.life=e.life,e.time},encode:function(t){return[t.time].concat(t.input).concat(t.pos).concat([t.life])},decode:function(t){return{time:t[0],input:t.slice(1,3),pos:t.slice(3,5),life:t[5]}},validatePos:function(t,e){return!(0>t||t>r.WIDTH)&&e<=r.HEIGHT},validateEncoded:function(t){return 6===t.length&&t.every(function(t){return"number"==typeof t&&!isNaN(t)&&isFinite(t)})&&t[5]<1e3&&this.validatePos.apply(this,t.slice(3,5))&&(-1===t[1]||0===t[1]||1===t[1])&&(-1===t[2]||0===t[2]||1===t[2])}}},{}],28:[function(t,e){function r(t,e){var r=new o.DisplayObjectContainer,n=new o.Sprite(a),i=new o.Sprite(h);return n.tint=t,r.addChild(n),e.forEach(function(t){var e=new o.Sprite(c[t]);r.addChild(e)}),r.addChild(i),r.width=84,r.height=48,r}function n(t){var e=t(),r=t(),n=t(),i=t(),o=t(),a=t(),h=e*e,c=.6+-.5*r*h+Math.pow(i,3),u=.2*(o+a)+(1.2+.5*n)*(.5-Math.abs(h-.3));return.3>u?(u*=.5,c*=.3):u>.85?c*=.5:c>.5&&.7>u&&(c=1),s(~~(360*h),~~(100*Math.max(0,Math.min(c,1))),~~(100*Math.max(0,Math.min(u,1))))}function i(t){var e=n(t),i=t()<.25?[u[~~(t()*u.length)]]:[];return r(e,i)}var o=t(231),s=t(58),a=o.Texture.fromImage("./img/car_chassis.png"),h=o.Texture.fromImage("./img/car_top.png"),c={racestripe1:o.Texture.fromImage("./img/car_racestripe1.png"),racestripe2:o.Texture.fromImage("./img/car_racestripe2.png"),racestripe3:o.Texture.fromImage("./img/car_racestripe3.png")},u=Object.keys(c);e.exports=i},{}],29:[function(t,e){function r(t){n.DisplayObjectContainer.call(this);var e=i(t);this.addChild(e),this._bound={x:0,y:0,w:0,h:0,group:s.CAR,obj:this}}var n=t(231),i=t(28),o=t(17),s=t(10),a=84,h=48;r.prototype=Object.create(n.DisplayObjectContainer.prototype),r.prototype.constructor=r,r.prototype.destroy=function(){this.parent&&this.parent.removeChild(this)},r.prototype.update=function(t,e){this._init||(this._init=!0,this.width=this.vel[0]<0?-a:a,this.height=h,this._bound.w=.8*a,this._bound.h=h),o.call(this,t,e),this._bound.x=this.x+Math.min(this.width,0)+.1*a,this._bound.y=this.y},r.prototype.toQuadTreeObject=function(){return this._bound},e.exports=r},{}],30:[function(t,e){function r(t,e,r,i){n.DisplayObjectContainer.call(this);var c=new n.Sprite(h);c.pivot.set(12,24);var u=new o(t.player,{align:"center",font:s.style(i||10)});u.tint=r?16729088:13386752,u.updateText(),u.position.set(-u.width/2,0),this.position.set(t.x,a.scoreToY(t.score)),this.addChild(c),this.addChild(u),this.alpha=t.opacity,this.animated=e}var n=t(231),i=t(243),o=t(48),s=t(19),a=t(41),h=n.Texture.fromImage("./img/dead_carrot.png");r.prototype=Object.create(n.DisplayObjectContainer.prototype),r.prototype.constructor=r,r.prototype.update=function(t){if(this.start||(this.start=t),this.animated){var e=1+i(4e3,0,t-this.start);this.scale.set(e,e)}},e.exports=r},{}],31:[function(t,e){function r(t,e){var r=t.scale;delete t.scale,t.front=20,t.seed=""+t.pos,t.spawn=function(t){var n=new o(r(t));n.position.set.apply(n.position,t.position),n.vel=t.velocity,n.rotation=t.angle,e.addChild(n)};var n=new i(t);s.call(this,n,60,a,h),this.position.set.apply(this.position,t.pos),this.scale.set(.5,.5),this.spawner=n}var n=t(231),i=t(226),o=t(32),s=t(44),a=n.Texture.fromImage("/img/firespawner.png"),h=n.Texture.fromImage("/img/firespawnerweapon.png");r.prototype=Object.create(s.prototype),r.prototype.constructor=r,r.prototype.update=function(t,e){s.prototype.update.call(this,t,e),this.spawner.update(t)},e.exports=r},{}],32:[function(t,e){function r(t,e){n.Sprite.call(this,h),this.pivot.set(16,16),this.growSpeed=.005,this.targetScale=t,this.initialScale=t,this.scale.set(0,0),this.dieTimeout=e||6e3,this._bound={x:0,y:0,w:0,h:0,group:i.PARTICLE,obj:this}}var n=t(231),i=t(10),o=t(13),s=t(17),a=t(14),h=n.Texture.fromImage("./img/fireball.png");r.prototype=Object.create(n.Sprite.prototype),r.prototype.constructor=r,r.prototype.update=function(t,e){if(s.call(this,t,e),this.startT||(this.startT=t),this.scale.x<this.targetScale){var r=Math.min((t-this.startT)*this.growSpeed,this.targetScale);this.scale.set(r,r)}o.call(this,t,e),a.call(this,t,e);var n=this.width,i=this.height;this._bound.x=this.x-this.pivot.x*this.scale.x+.2*n,this._bound.y=this.y-this.pivot.y*this.scale.y+.2*i,this._bound.w=.6*n,this._bound.h=.6*i},r.prototype.toQuadTreeObject=function(){return this._bound},r.prototype.playerLifeValue=function(){return-30*this.initialScale},r.prototype.explodeInWorld=function(t){t.fireballExplode(this),this.parent&&this.parent.removeChild(this)},r.prototype.hitPlayer=function(t){t.onFireball(this)},e.exports=r},{}],33:[function(t,e){function r(t){n.Sprite.call(this,s[~~(Math.random()*s.length)]),this.rotation=2*Math.random()*Math.PI,this.pivot.set(12,12),this.height=this.width=t}var n=t(231),i=t(61),o=n.Texture.fromImage("./img/foots.png"),s=[0,1,2,3,4,5,6,7,8,9].map(function(t){return i.tile24(o,0,t)});r.prototype=Object.create(n.Sprite.prototype),r.prototype.constructor=r,e.exports=r},{}],34:[function(t,e){function r(){n.DisplayObjectContainer.call(this),this.containers=new i(this.alloc.bind(this),this.free.bind(this),{chunkSize:200,ahead:1,behind:1,bounds:[-4,+1/0]})}var n=t(231),i=t(242),o=t(33);r.prototype=Object.create(n.DisplayObjectContainer.prototype),r.prototype.constructor=r,r.prototype.alloc=function(){var t=new n.DisplayObjectContainer;return this.addChild(t),t},r.prototype.free=function(t,e){this.removeChild(e)},r.prototype.watchWindow=function(t){this.containers.move(t)},r.prototype.walk=function(t,e){var r=new o(e);r.position.x=t.x,r.position.y=t.y;var n=this.containers.getChunk(-t.y);n&&n.addChild(r)},e.exports=r},{}],35:[function(t,e){function r(t,e){if(n.DisplayObjectContainer.call(this),s[e]){var r=new n.Sprite(s[e]);r.position.set(0,0),this.addChild(r)}var a=new i(t.player,{align:"center",font:o.style(10)});a.tint=13386752,a.updateText(),a.position.set(30,10),this.addChild(a);var h=new i(""+t.score,{align:"center",font:o.style(12,!0)});h.tint=13386752,h.updateText(),h.position.set(100,10),this.addChild(h)}var n=t(231),i=t(48),o=t(19),s=[n.Texture.fromImage("./img/scoreIcon1.png"),n.Texture.fromImage("./img/scoreIcon2.png"),n.Texture.fromImage("./img/scoreIcon3.png")];r.prototype=Object.create(n.DisplayObjectContainer.prototype),r.prototype.constructor=r,e.exports=r},{}],36:[function(t,e){function r(){n.Sprite.call(this,h),this.logo=new n.Sprite(c),this.logo.scale.set(.5,.5),this.logo.position.set((a.WIDTH-200)/2,0),this.logo.tint=6588614,this.highscoresTitle=new i("Daily Highscores",{font:s.style(18,!0)}),this.highscoresTitle.position.set(10,200),this.highscoresTitle.tint=13386752,this.highscoresTitle.updateText(),this.highscores=new n.DisplayObjectContainer,this.addChild(this.logo),this.addChild(this.highscoresTitle),this.addChild(this.highscores)}var n=t(231),i=t(48),o=t(35),s=t(19),a=t(18),h=n.Texture.fromImage("./img/map2.png"),c=n.Texture.fromImage("./img/logo.png");r.prototype=Object.create(n.Sprite.prototype),r.prototype.constructor=r,r.prototype.setScores=function(t){this.highscores.removeChildren();for(var e=0;e<t.length&&5>e;++e){var r=t[e],n=new o(r,e);n.position.set(40,240+30*e),this.highscores.addChild(n)}},e.exports=r},{}],37:[function(t,e){function r(t,e,r,s){i.DisplayObjectContainer.call(this),this.seed=t,this.cars=e,this.particles=r,this.spawners=s;var c=400,u=this.homeTile=new a,f=new i.DisplayObjectContainer;this.addChild(f),this.generateMapTileWindow=new o(function(e){var r,i=-e*c;return r=0===e?u:new h(n(t+"tile"+e)),r.position.y=i,r.i=e,f.addChildAt(r,0),r},function(t,e){f.removeChild(e)},{chunkSize:c,right:2,left:1,bounds:[0,+1/0]}),this.generateLevels=new o(this.allocChunk.bind(this),this.freeChunk.bind(this),{chunkSize:p.chunkSize,right:1,left:1,bounds:[1,+1/0]})}var n=t(240),i=t(231),o=t(242),s=t(18),a=t(36),h=t(38),c=t(31),u=t(45),f=t(49),d=t(16),l=t(43),p=t(21);r.prototype=Object.create(i.DisplayObjectContainer.prototype),r.prototype.constructor=r,r.prototype.setScores=function(t){this.homeTile.setScores(t)},r.prototype.watchWindow=function(t){this._win=t},r.prototype.update=function(t,e){var r=this._win;d.call(this,t,e),r&&(this.generateMapTileWindow.move(r,t),this.generateLevels.move(r,t))},r.prototype.freeChunk=function(t,e){e.destroy()},r.prototype.allocChunk=function(t,e){function r(t){return d.push(t),t}var o=n(this.seed+"-"+t),a=p.generate(t,e,o),h=-t*p.chunkSize,d=[],v=r(new f),b=r(new f),g=r(new i.DisplayObjectContainer),y=r(new f),m=r(new f);if(this.cars.addChild(v),this.addChild(b),this.addChild(g),this.particles.addChild(y),this.spawners.addChild(m),(a.roads||[]).forEach(function(t){t.y+=h;var e=new l(t,v,g);b.addChild(e)}),(a.snowballs||[]).forEach(function(t){t.pos[1]+=h;var e=new u(t,y);m.addChild(e)}),(a.fireballs||[]).forEach(function(t){t.pos[1]+=h;var e=new c(t,y);m.addChild(e)}),this.debug){var w=r(new i.DisplayObjectContainer),x=p.chunkSize;w.position.set(0,h),this.debug.addChild(w);var _=new i.Graphics;_.beginFill(16711680),_.drawRect(0,x-2,s.WIDTH,2),_.endFill();var S=new i.Text("chunk "+t,{fill:"#F00",font:"bold 32px monospace"});S.scale.set(.5,.5),S.position.set(s.WIDTH-S.width-4,x-4-S.height);var T=x-4;(a.logs||[]).forEach(function(t){var e=new i.Text(t,{fill:"#F00",font:"normal 16px monospace"});e.scale.set(.5,.5),T-=e.height,e.position.set(4,T),e.alpha=.7,w.addChild(e)}),w.addChild(_),w.addChild(S)}return a=null,{destroy:function(){d.forEach(function(t){t.parent.removeChild(t)}),d=null}}},e.exports=r},{}],38:[function(t,e){function r(t){n.Sprite.call(this,i[t()*i.length|0])}var n=t(231),i=[n.Texture.fromImage("./img/map1.png"),n.Texture.fromImage("./img/map2.png"),n.Texture.fromImage("./img/map3.png")];r.prototype=Object.create(n.Sprite.prototype),r.prototype.constructor=r,e.exports=r},{}],39:[function(t,e){function r(t,e,r,s){this.nameSprite=new i("",{font:n.style(12)}),this.nameSprite.tint=13386752,e.addChild(this.nameSprite),o.call(this,t),this.maxAlpha=r||1,this.nameSprite.alpha=this.alpha=this.maxAlpha,this.env=s||{}}var n=t(19),i=t(48),o=t(41);r.prototype=Object.create(o.prototype),r.prototype.constructor=r,r.prototype.update=function(t,e){o.prototype.update.call(this,t,e),this.env.computeAlpha&&(this.nameSprite.alpha=this.alpha=this.maxAlpha*this.env.computeAlpha(this.position)),this.nameSprite.position.set(this.position.x-this.nameSprite.width/2,this.y+.4*this.height)},r.prototype.destroy=function(){this.nameSprite.parent.removeChild(this.nameSprite),this.parent.removeChild(this)},Object.defineProperty(r.prototype,"name",{set:function(t){this._name=t,this.nameSprite.text=t||""},get:function(){return this._name}}),e.exports=r},{}],40:[function(t,e){function r(t,e,r){n.DisplayObjectContainer.call(this),this.position.x=t.position.x,this.position.y=t.position.y,this.speed=r||150,this.alpha=t.alpha||1,this.width=t.width,this.height=t.width,this.rotation=2*Math.random()*Math.PI,this.pivot.set(32,32),this.nb=e.length,this.sprites=e.map(function(t){return new n.Sprite(t)})}var n=t(231);r.prototype=Object.create(n.DisplayObjectContainer.prototype),r.prototype.constructor=r,r.prototype.update=function(t){this.current||(this.start=t);var e=~~((t-this.start)/this.speed);if(e<this.nb){var r=this.sprites[e];r!==this.current&&(this.current&&this.removeChild(this.current),this.addChild(r),this.current=r)}else this.parent.removeChild(this)},e.exports=r},{}],41:[function(t,e){function r(t,e){this.name=t,n.Sprite.call(this,f),this.life=201,this.maxLife=999,this.meltingSpeed=.0025,this.moveSpeed=c.playerMoveSpeed,this.maxMoveBack=120,this.dead=!1,this.controls=null,this.vel=[0,0],this.position.x=c.WIDTH/2,this.position.y=c.HEIGHT-50,this.maxProgress=c.HEIGHT-this.maxMoveBack-25,this._m=0,this.pivot.set(250,200),e&&e.addChild(this.footprints=new u),this._bound={x:0,y:0,w:0,h:0,group:s.PLAYER,obj:this}}var n=t(231),i=t(243),o=t(59),s=t(10),a=t(17),h=t(12),c=t(18),u=t(34),f=n.Texture.fromImage("./img/player.png"),d=[n.Texture.fromImage("./img/player1.png"),f,n.Texture.fromImage("./img/player2.png")];r.prototype=Object.create(n.Sprite.prototype),r.prototype.constructor=r,r.prototype.die=function(){this.dead=!0},r.prototype.isDead=function(){return this.dead},r.prototype.constraintX=function(t){var e=this.width/2;return Math.max(e,Math.min(t,c.WIDTH-e))},r.prototype.update=function(t,e){if(!this.dead){this.controls.update&&this.controls.update(t,e);var r=this.controls.x(),n=this.controls.y(),s=this.position.x,h=this.position.y,c=this._m;if(r||n){c||(this._m=c=t);var u=this.moveSpeed*o(.5,1,i(0,200,t-c));r&&n&&(u/=1.414),this.vel[0]=r*u,this.vel[1]=-n*u}else this._m=0,this.setTexture(f),this.vel[0]=0,this.vel[1]=0;a.call(this,t,e);var l=this.x,p=this.y;this.maxProgress=Math.min(this.maxProgress,p),this.maxProgress<0&&(this.life-=e*this.meltingSpeed),p=Math.min(p,this.maxProgress+this.maxMoveBack);var v=.6+this.life/150,b=this.width=50*v,g=this.height=40*v;0>n?this.rotation=Math.PI:n>0?this.rotation=0:r>0?this.rotation=Math.PI/2:0>r&&(this.rotation=-Math.PI/2),l=this.constraintX(l),!r&&!n||l===s&&p===h||(this.setTexture(d[~~(t/150)%d.length]),this.footprints&&(!this._lastFoot||t-this._lastFoot>30)&&Math.random()<.7&&this.footprints.walk(this.position,this.width/2)),this.x=l,this.y=p,this._bound.x=l-this.pivot.x*this.scale.x+.25*b,this._bound.y=p-this.pivot.y*this.scale.y+.2*g,this._bound.w=.5*b,this._bound.h=.6*g
}},r.prototype.toQuadTreeObject=function(){return this._bound},r.prototype.knock=function(t,e){this.x=this.constraintX(this.x+t),this.y+=e},r.prototype.onProjectile=function(t){var e=4+100*t.width/this.width;this.knock(e*t.vel[0],e*t.vel[1])},r.prototype.onSnowball=function(t){this.life=Math.min(this.life+t.playerLifeValue(),this.maxLife),this.onProjectile(t)},r.prototype.onFireball=function(t){this.life+=t.playerLifeValue(),this.onProjectile(t)},r.prototype.onCarHit=function(t){h.play("carHit",null,1),this.life-=100;var e=8e3/this.width;this.knock(e*t.vel[0],0),this.footprints&&this.footprints.walk(this.position,this.width)},r.prototype.getScore=function(){return{player:this.name,x:~~this.x,score:r.getPlayerScore(this)}},r.getPlayerScore=function(t){return~~Math.max(0,-t.y)},r.scoreToY=function(t){return-t},e.exports=r},{}],42:[function(t,e){function r(t){if(n.DisplayObjectContainer.call(this),i.extend(this,t),"function"!=typeof this.spawn)throw new Error("spawn function must be implemented and return a PIXI object.");this._trigger()}var n=t(231),i=t(229),o=t(16),s=t(15),a={pos:[0,0],vel:.2,n:8,spawn:null,front:0,angleOffset:0};r.prototype=Object.create(n.DisplayObjectContainer.prototype),r.prototype.constructor=r,i.extend(r.prototype,a),r.prototype._trigger=function(){i.range(0,2*Math.PI,2*Math.PI/this.n).forEach(function(t){var e=this.spawn(),r=t+this.angleOffset;e.position.set(this.pos[0]+this.front*Math.cos(r),this.pos[1]+this.front*Math.sin(r)),e.vel=[this.vel*Math.cos(r),this.vel*Math.sin(r)],this.addChild(e)},this)},r.prototype.update=function(t,e){o.call(this,t,e),s.call(this)},e.exports=r},{}],43:[function(t,e){function r(t,e,r){n.DisplayObjectContainer.call(this);var d=[t.leftToRight?-100:o.WIDTH+100,t.y],l=t.leftToRight?0:Math.PI,p=function(r){var n=new s(r.random);n.position.set.apply(n.position,r.position),n.vel=r.velocity,n.livingBound={x:-100,y:t.y,height:100,width:o.WIDTH+200},e.addChild(n)},v=new i({seed:t.y,pos:d,spawn:p,ang:l,speed:t.speed,vel:t.vel,pattern:t.seq}),b=t.last?t.first?h:u:t.first?c:a,g=new n.Sprite(b);if(g.position.set(0,t.y),this.addChild(g),!t.last){var y=new n.Sprite(f);y.position.set(-~~(100*Math.random()),t.y-8),r.addChild(y)}this.spawner=v}var n=t(231),i=t(226),o=t(18),s=t(29),a=n.Texture.fromImage("/img/road.png"),h=n.Texture.fromImage("/img/roadinout.png"),c=n.Texture.fromImage("/img/roadin.png"),u=n.Texture.fromImage("/img/roadout.png"),f=n.Texture.fromImage("/img/roadseparator.png");r.prototype=Object.create(n.DisplayObjectContainer.prototype),r.prototype.constructor=r,r.prototype.update=function(t){this._init||(this._init=!0,this.spawner.init(t-1e3)),this.spawner.update(t)},e.exports=r},{}],44:[function(t,e){function r(t,e,r,n){i.DisplayObjectContainer.call(this),this.weaponTexture=n,this.spawner=t,this.pivot.set(e,e),this.radius=e,this.heads=new i.DisplayObjectContainer,this.addChild(this.heads),this.addChild(new i.Sprite(r))}var n=t(243),i=t(231);r.prototype=Object.create(i.DisplayObjectContainer.prototype),r.prototype.constructor=r,r.prototype.syncHeadCount=function(t){var e,r=this.heads.children.length;for(e=r;t>e;++e){var n=new i.Sprite(this.weaponTexture);n.pivot.set(this.radius,this.radius),n.position.set(this.radius,this.radius),this.heads.addChild(n)}for(e=r;e>t;--e)this.heads.removeChild(this.children[0])},r.prototype.update=function(t){var e=this.spawner.getHeads(t);this.syncHeadCount(e.length);for(var r=0;r<e.length;++r){var i=e[r],o=this.heads.children[r];o.rotation=i.angle+Math.PI/2,o.pivot.y=this.radius*(i.trigger?1-.1*n(.5,0,i.p):.8)}},e.exports=r},{}],45:[function(t,e){function r(t,e){var r=t.scale;delete t.scale,t.front=40,t.seed=""+t.pos,t.spawn=function(t){var n=new o(r(t),t.random);n.position.set.apply(n.position,t.position),n.vel=t.velocity,n.rotation+=t.angle,e.addChild(n)};var n=new i(t);s.call(this,n,60,a,h),this.position.set.apply(this.position,t.pos),this.scale.set(.5,.5),this.spawner=n}var n=t(231),i=t(226),o=t(46),s=t(44),a=n.Texture.fromImage("/img/snowspawner.png"),h=n.Texture.fromImage("/img/snowspawnerweapon.png");r.prototype=Object.create(s.prototype),r.prototype.constructor=r,r.prototype.update=function(t,e){s.prototype.update.call(this,t,e),this.spawner.update(t)},e.exports=r},{}],46:[function(t,e){function r(t,e){n.Sprite.call(this,u[u.length*e()|0]),this.rotation=2*Math.PI*e(),this.pivot.set(32,32),this.scale.set(t,t),this.dieTimeout=6e3,this._bound={x:0,y:0,w:0,h:0,group:s.PARTICLE,obj:this}}var n=t(231),i=t(13),o=t(17),s=t(10),a=t(14),h=t(61),c=n.Texture.fromImage("./img/snowballs.png"),u=[0,1,2,3].map(function(t){return h.tile64(c,t,0)});r.prototype=Object.create(n.Sprite.prototype),r.prototype.constructor=r,r.prototype.update=function(t,e){o.call(this,t,e),i.call(this,t,e),a.call(this,t,e);var r=this.width,n=this.height;this._bound.x=this.x-this.pivot.x*this.scale.x+.2*r,this._bound.y=this.y-this.pivot.y*this.scale.y+.2*n,this._bound.w=.6*r,this._bound.h=.6*n},r.prototype.toQuadTreeObject=function(){return this._bound},r.prototype.playerLifeValue=function(){return 20*this.scale.x},r.prototype.explodeInWorld=function(t){t.snowballExplode(this),this.parent&&this.parent.removeChild(this)},r.prototype.hitPlayer=function(t){t.onSnowball(this)},e.exports=r},{}],47:[function(t,e){function r(t,e,r){n.DisplayObjectContainer.call(this),this._focusY=0,this.shaking=0,this.particles=t,this.explosions=e,this.explosionsPlayer=r}var n=t(231),i=t(293),o=t(46),s=t(40),a=t(42),h=t(12),c=t(18),u=t(16),f=t(60),d=t(61),l=d.tile64,p=n.Texture.fromImage("./img/fireexplosion.png"),v=[l(p,0,0),l(p,1,0),l(p,2,0)],b=n.Texture.fromImage("./img/snowexplosion.png"),g=[l(b,0,0),l(b,1,0),l(b,2,0)],y=n.Texture.fromImage("./img/playerexplosion.png"),m=[l(y,0,0),l(y,1,0),l(y,2,0)];r.prototype=Object.create(n.DisplayObjectContainer.prototype),r.prototype.constructor=r,r.prototype.update=function(t,e){if(u.call(this,t,e),this.position.set(0,this._focusY),this.shaking){var r=this.shaking*(Math.random()-.5),n=this.shaking*(Math.random()-.5);this.position.x+=r,this.position.y+=n,this.shaking=Math.max(0,this.shaking+this.shakingVel*e)}},r.prototype.playerDied=function(t,e){var r=new s(t,m,400);this.explosionsPlayer.addChild(r),e&&i(400),setTimeout(function(){e&&h.play("lose")},1e3)},r.prototype.snowballExplode=function(t){h.play("snowballHit",t,.6),this.explosions.addChild(new s(t,g))},r.prototype.carHitPlayerExplode=function(t,e){var r=f(t,e),n=r.from.x+(r.to.x-r.from.x)/2,s=r.from.y+(r.to.y-r.from.y)/2;if(this.shaking=10+(e.life<=0?10:0),this.shakingVel=-0.03,!(e.life<=0)&&(i(200),this.particles)){var h=.2+e.life/2e3,c=~~(5/h);this.particles.addChild(new a({pos:[n,s],n:c,spawn:function(){return new o(h,Math.random)},vel:.1,front:4+e.width/2,angleOffset:Math.random()}))}},r.prototype.fireballExplode=function(t){h.play("burn",t,.3),this.explosions.addChild(new s(t,v))},r.prototype.getWindow=function(){return[this._focusY-c.HEIGHT,this._focusY]},r.prototype.focusOn=function(t){var e=c.HEIGHT-Math.max(t.y,t.maxProgress+t.maxMoveBack+t.height/2);e=Math.floor(Math.max(0,e)),this._focusY=this._focusY+.07*(e-this._focusY)},r.prototype.focusOnY=function(t){this._focusY=t},e.exports=r},{}],48:[function(t,e){function r(){n.BitmapText.apply(this,arguments),this._text=this.text}var n=t(231);r.prototype=Object.create(n.BitmapText.prototype),r.prototype.constructor=r,Object.defineProperty(r.prototype,"text",{set:function(t){this._text!==t&&this.setText(this._text=""+t)},get:function(){return this._text}}),e.exports=r},{}],49:[function(t,e){function r(){n.DisplayObjectContainer.call(this)}var n=t(231),i=t(16);r.prototype=Object.create(n.DisplayObjectContainer.prototype),r.prototype.constructor=r,r.prototype.update=i,e.exports=r},{}],50:[function(t,e){function r(t){window.localStorage.player=t}function n(){return window.localStorage.player}function i(){var t=document.createElement("div");t.style.overflow="hidden",t.style.position="absolute",t.style.zIndex=0,t.style.top="0",t.style.left="0",t.style.width="100%",t.style.height=s.HEIGHT+"px",this.gridwrap=t;var e=document.createElement("div");e.style.position="absolute",e.style.top="0",e.style.left="0",e.style.width="100%",e.style.height="2000px",e.style[h]="translate3D(0,-9999px,0)",e.style.background="url(./img/grid.png) repeat",this.grid=e;var r=document.createElement("div");r.style.position="absolute",r.style.color="#fff",r.style.width=s.WIDTH+"px",r.style.height="40px",r.style.lineHeight="40px",r.style.font="normal 20px sans-serif",this.bar=r,this.syncBar(),t.appendChild(e),document.body.appendChild(t),document.body.appendChild(r),this.name=c.defer();var i=n();i?this.name.resolve(i):this._setName()}var o=t(231),s=t(18),a=t(292),h=a("transform"),c=t(232),u=t(54);i.prototype={syncBar:function(){var t=this.bar;t.innerHTML="";var e=n(),r=document.createElement("span"),i=document.createElement("a");if(e){var o=document.createElement("span");o.textContent="Welcome ",r.appendChild(o),i.textContent=e,i.style.color="#fff",i.href="#",i.addEventListener("click",this._reaskName.bind(this),!1)}else i.textContent="Hi! can I get your name?",i.style.color="#fff",i.href="#",i.addEventListener("click",this._setName.bind(this),!1);r.appendChild(i),t.appendChild(r)},_setName:function(t,e){t&&t.preventDefault();var n=this;u(e?"please give a name between 3 to 10 alphanum characters":"What's your name? (3 to 10 alphanum characters)").then(function(e){return/^[a-zA-Z0-9]{3,10}$/.exec(e)?(r(e),n.syncBar(),void n.name.resolve(e)):n._setName(t,!0)})},_reaskName:function(t){t.preventDefault();var e=this;u("Change your name:",n()).then(function(n){return/^[a-zA-Z0-9]{3,10}$/.exec(n)?(r(n),void window.location.reload()):e._reaskName(t)})},getPlayerName:function(){return this.name.promise},setViewportPos:function(t,e){this.gridwrap.style[h]="translate3D(0,"+e+"px,0)",this.canvas.style[h]="translate3D("+t+"px,"+e+"px,0)",this.bar.style[h]="translate3D("+t+"px,"+(e-40)+"px,0)"},setGridY:function(t){t=Math.round(t)%1e3-1e3-(1e3>t?1e3:0),this._lastGridY!==t&&(this._lastGridY=t,this.grid.style[h]="translate3D(0,"+t+"px,0)")},setGame:function(t){this.game||(this.canvas.style.boxShadow="0px 0px 10px #fff"),this.game=t},createRenderer:function(){var t=o.autoDetectRenderer(s.WIDTH,s.HEIGHT,{resolution:window.devicePixelRatio}),e=t.view;return e.style.width=s.WIDTH+"px",e.style.height=s.HEIGHT+"px",e.style.zIndex=10,e.style[h]="translate3D(0,0,0)",this.canvas=e,document.body.appendChild(e),window.addEventListener("resize",this.onResize.bind(this),!1),this.onResize(),t},onResize:function(){var t=Math.max(0,Math.round((window.innerWidth-s.WIDTH)/2)),e=Math.max(0,Math.round((window.innerHeight-s.HEIGHT)/2));(t!==this._lastresizex||e!==this._lastresizey)&&(this._lastresizex=t,this._lastresizey=e,this.setViewportPos(t,e))},update:function(){this.game&&this.setGridY(this.game.world.y)}},e.exports=i},{}],51:[function(t,e){var r=t(52);e.exports=t(r?53:50)},{}],52:[function(t,e){e.exports=window.navigator.userAgent.match(/Android|webOS|iPhone|iPad|iPod|BlackBerry|Windows Phone/i)},{}],53:[function(t,e){function r(t){window.localStorage.player=t}function n(){return window.localStorage.player}function i(){this.lockPromise=s.fcall(function(){return window.screen.orientation.lock("portrait")})}var o=t(231),s=t(232),a=t(18),h=t(292),c=h("transform"),u=t(54);i.prototype={getPlayerName:function(){return s(n())||this.askName()},askName:function(t){var e=this;return u(t?"please give a name between 3 to 10 alphanum characters":"What's your name? (3 to 10 alphanum characters)").then(function(t){return/^[a-zA-Z0-9]{3,10}$/.exec(t)?(r(t),t):e.askName(!0)})},createRenderer:function(){var t=o.autoDetectRenderer(a.WIDTH,a.HEIGHT,{resolution:window.devicePixelRatio}),e=t.view;return e.style.width=a.WIDTH+"px",e.style.height=a.HEIGHT+"px",e.style[c]="translate3D(0,0,0)",this.canvas=e,document.body.appendChild(e),document.body.style.background="#000",t},setGame:function(){},update:function(){}},e.exports=i},{}],54:[function(t,e){function r(t,e){return n.fcall(function(){var r=window.prompt(t,e||"");if(null===r)throw new Error("cancelled");return r})}var n=t(232);e.exports=r},{}],55:[function(t,e){function r(t,e,r){n.Stage.call(this,16777215),n.EventTarget.mixin(this);var i=new b,o=new b,s=new b,a=new b,h=new b,u=new l(t,i,o,h),p=new b,g=new n.DisplayObjectContainer,y=new v(r,g);y.controls=e;var m=new b,w=new n.DisplayObjectContainer,x=new f(this);this.ui=x;var _=new d(o,s,a);_.addChild(u),_.addChild(g),_.addChild(p),_.addChild(m),_.addChild(w),_.addChild(y),_.addChild(i),_.addChild(o),_.addChild(h),_.addChild(s),_.addChild(a),this.addChild(_),this.addChild(x),this.world=_,this.map=u,this.cars=i,this.particles=o,this.spawners=h,this.deadCarrots=p,this.footprints=g,this.player=y,this.players=m,this.names=w,this.controls=e,this.audio1=c.loop("/audio/1.ogg"),this.playerGhost=!0,c.play("start")}var n=t(231),i=t(243),o=t(229),s=t(241),a=t(57),h=t(10),c=t(12),u=t(18),f=t(9),d=t(47),l=t(37),p=t(30),v=t(41),b=t(49);r.prototype=Object.create(n.Stage.prototype),r.prototype.constructor=r,r.prototype.destroy=function(){this.audio1.stop();for(var t in this)this[t]=null},r.prototype.handleCarCollides=function(t){t.group&h.PARTICLE&&t.obj.explodeInWorld(this.world)},r.prototype.update=function(t,e){function r(t){t.group&h.PARTICLE&&t.obj.explodeInWorld(l)}function n(t,e){if(!t.isDead()){if(e||!A){var r=t.toQuadTreeObject();m.get(r,function(r){if(r.group&h.CAR){var n=r.obj;t.onCarHit(n),l.carHitPlayerExplode(n,t)}else if(r.group&h.PARTICLE){var i=r.obj;i.explodeInWorld(l),i.hitPlayer(t),e&&T++}})}t.life<=0&&(t.die(),l.playerDied(t,e),e&&(l.removeChild(t),this.emit("GameOver",t.getScore())))}}var o,f,d,l=this.world,p=this.player,v=this.controls,b=this.map,g=v.x()||v.y(),y=0,m=s(0,0,u.WIDTH,100);for(o=0;o<this.particles.children.length;++o)for(d=this.particles.children[o],f=0;f<d.children.length;++f){var w=d.children[f];m.put(w.toQuadTreeObject())}for(o=0;o<this.cars.children.length;++o)for(d=this.cars.children[o],f=0;f<d.children.length;++f){var x=d.children[f],_=x.toQuadTreeObject();m.get(_,r),m.put(_);var S=a(x,p);y+=Math.pow(i(300,50,S),2),!x.neverSaw&&300>S&&(x.neverSaw=1,c.play("car",x))}var T=0,A=this.playerGhost;if(this.players.children.length){var E=this.players.children[0].children;for(o=0;o<E.length;++o)n.call(this,E[o],!1)}n.call(this,p,!0),T=Math.max(0,T-.001*e),this.audio1.setVolume(p.dead?0:g?.2+Math.min(.8,T+y/4):0),l.focusOn(p),c.micOn(p);var C=l.getWindow(),M=this.footprints.children;for(o=0;o<M.length;++o)M[o].watchWindow(C);b.watchWindow(C),l.update(t,e),this.ui.update(t,e),c.update(t,e)},r.prototype.positionObfuscation=function(t){var e=this.player.width;return.9*i(40+e,e/2,a(this.player.position,t))},r.prototype.createDeadCarrot=function(t,e){if(t.opacity>0){var r=new p(t,e,t.player===this.player.name);this.deadCarrots.addChild(r)}},r.prototype.getCurrentRank=function(t){if(!this.scores)return 0;for(var e=0,r=this.scores.length;r>e&&t<this.scores[e].score;++e);return e+1},r.prototype.getPlayerBestScore=function(t){return this.scores?this.bestScorePerPlayer[t]||null:null},r.prototype.setScores=function(t,e){var r,n=this.scores||[],i=o.filter(t,function(t){return!o.any(n,function(e){return t.player===e.player&&t.x===e.x&&t.score===e.score})});for(t=[].concat(t),t.sort(function(t,e){return e.score-t.score}),this.map.setScores(t),r=0;r<i.length;++r)this.createDeadCarrot(i[r],e);var s={};for(r=0;r<t.length;++r){var a=t[r];a.player in s||(s[a.player]={rank:r+1,score:a.score})}this.scores=t,this.bestScorePerPlayer=s},e.exports=r},{}],56:[function(t,e){function r(){n.Stage.call(this,6588614),this.layer=new n.DisplayObjectContainer,this.logo=new n.Sprite(s),this.logo.scale.set(.5,.5),this.logo.position.set((o.WIDTH-200)/2,100),this.loadbar=new n.Sprite(a),this.loadbar.scale.set(.5,.5),this.loadbar.position.set((o.WIDTH-200)/2,300),this.layer.addChild(this.logo),this.layer.addChild(this.loadbar),this.addChild(this.layer),this.setProgress(0)}var n=t(231),i=t(243),o=t(18),s=n.Texture.fromImage("./img/logo.png"),a=n.Texture.fromImage("./img/loadbar.png");r.prototype=Object.create(n.Stage.prototype),r.prototype.constructor=r,r.prototype.setProgress=function(t){this.progress=t},r.prototype.update=function(t){this.layer.alpha=i(0,1e3,t-250);var e=new n.Graphics;e.beginFill(),e.drawRect(0,0,this.progress*o.WIDTH,o.HEIGHT),this.loadbar.mask=e},e.exports=r},{}],57:[function(t,e){e.exports=function(t,e){var r=t.x-e.x,n=t.y-e.y;return Math.sqrt(r*r+n*n)}},{}],58:[function(t,e){function r(t,e,r){return 0>r&&(r+=1),r>1&&(r-=1),1/6>r?t+6*(e-t)*r:.5>r?e:2/3>r?t+(e-t)*(2/3-r)*6:t}window.h=e.exports=function(t,e,n){var i,o,s;if(t/=360,e/=100,n/=100,t>1||0>t||e>1||0>e||n>1||0>n)return null;if(0===e)i=o=s=n;else{var a=.5>n?n*(1+e):n+e-n*e,h=2*n-a;i=r(h,a,t+1/3),s=r(h,a,t),o=r(h,a,t-1/3)}return~~(255*i)<<16|~~(255*s)<<8|~~(255*o)}},{}],59:[function(t,e){e.exports=function(t,e,r){return r*e+(1-r)*t}},{}],60:[function(t,e){function r(t,e){var r=t.x,i=t.x+t.w,o=t.y,s=t.y+t.h,a=e.x,h=e.x+e.w,c=e.y,u=e.y+e.h,f=Math.max(r,a),d=Math.max(o,c),l=Math.min(i,h),p=Math.min(s,u);return{from:new n.Point(f,d),to:new n.Point(l,p),width:l-f,height:p-d}}var n=t(231);e.exports=function(t,e){return r(t.toQuadTreeObject(),e.toQuadTreeObject())}},{}],61:[function(t,e){function r(t){return function(e,r,i){return new n.Texture(e,{x:r*t,y:i*t,width:t,height:t})}}var n=t(231),i=r(64),o=r(24);r.tile64=i,r.tile24=o,e.exports=r},{}],62:[function(){},{}],63:[function(t,e,r){function n(t,e,r){if(!(this instanceof n))return new n(t,e,r);var i,o=typeof t;if("number"===o)i=t>0?t>>>0:0;else if("string"===o)i=n.byteLength(t,e);else{if("object"!==o||null===t)throw new TypeError("must start with number, buffer, array or string");"Buffer"===t.type&&D(t.data)&&(t=t.data),i=+t.length>0?Math.floor(+t.length):0}if(i>j)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+j.toString(16)+" bytes");var s;n.TYPED_ARRAY_SUPPORT?s=n._augment(new Uint8Array(i)):(s=this,s.length=i,s._isBuffer=!0);var a;if(n.TYPED_ARRAY_SUPPORT&&"number"==typeof t.byteLength)s._set(t);else if(E(t))if(n.isBuffer(t))for(a=0;i>a;a++)s[a]=t.readUInt8(a);else for(a=0;i>a;a++)s[a]=(t[a]%256+256)%256;else if("string"===o)s.write(t,0,e);else if("number"===o&&!n.TYPED_ARRAY_SUPPORT&&!r)for(a=0;i>a;a++)s[a]=0;return i>0&&i<=n.poolSize&&(s.parent=F),s}function i(t,e,r){if(!(this instanceof i))return new i(t,e,r);var o=new n(t,e,r);return delete o.parent,o}function o(t,e,r,n){r=Number(r)||0;var i=t.length-r;n?(n=Number(n),n>i&&(n=i)):n=i;var o=e.length;if(o%2!==0)throw new Error("Invalid hex string");n>o/2&&(n=o/2);for(var s=0;n>s;s++){var a=parseInt(e.substr(2*s,2),16);if(isNaN(a))throw new Error("Invalid hex string");t[r+s]=a}return s}function s(t,e,r,n){var i=I(M(e,t.length-r),t,r,n);return i}function a(t,e,r,n){var i=I(R(e),t,r,n);return i}function h(t,e,r,n){return a(t,e,r,n)}function c(t,e,r,n){var i=I(B(e),t,r,n);return i}function u(t,e,r,n){var i=I(k(e,t.length-r),t,r,n,2);return i}function f(t,e,r){return L.fromByteArray(0===e&&r===t.length?t:t.slice(e,r))}function d(t,e,r){var n="",i="";r=Math.min(t.length,r);for(var o=e;r>o;o++)t[o]<=127?(n+=P(i)+String.fromCharCode(t[o]),i=""):i+="%"+t[o].toString(16);return n+P(i)}function l(t,e,r){var n="";r=Math.min(t.length,r);for(var i=e;r>i;i++)n+=String.fromCharCode(127&t[i]);return n}function p(t,e,r){var n="";r=Math.min(t.length,r);for(var i=e;r>i;i++)n+=String.fromCharCode(t[i]);return n}function v(t,e,r){var n=t.length;(!e||0>e)&&(e=0),(!r||0>r||r>n)&&(r=n);for(var i="",o=e;r>o;o++)i+=C(t[o]);return i}function b(t,e,r){for(var n=t.slice(e,r),i="",o=0;o<n.length;o+=2)i+=String.fromCharCode(n[o]+256*n[o+1]);return i}function g(t,e,r){if(t%1!==0||0>t)throw new RangeError("offset is not uint");if(t+e>r)throw new RangeError("Trying to access beyond buffer length")}function y(t,e,r,i,o,s){if(!n.isBuffer(t))throw new TypeError("buffer must be a Buffer instance");if(e>o||s>e)throw new RangeError("value is out of bounds");if(r+i>t.length)throw new RangeError("index out of range")}function m(t,e,r,n){0>e&&(e=65535+e+1);for(var i=0,o=Math.min(t.length-r,2);o>i;i++)t[r+i]=(e&255<<8*(n?i:1-i))>>>8*(n?i:1-i)}function w(t,e,r,n){0>e&&(e=4294967295+e+1);for(var i=0,o=Math.min(t.length-r,4);o>i;i++)t[r+i]=e>>>8*(n?i:3-i)&255}function x(t,e,r,n,i,o){if(e>i||o>e)throw new RangeError("value is out of bounds");if(r+n>t.length)throw new RangeError("index out of range");if(0>r)throw new RangeError("index out of range")}function _(t,e,r,n,i){return i||x(t,e,r,4,3.4028234663852886e38,-3.4028234663852886e38),O.write(t,e,r,n,23,4),r+4}function S(t,e,r,n,i){return i||x(t,e,r,8,1.7976931348623157e308,-1.7976931348623157e308),O.write(t,e,r,n,52,8),r+8}function T(t){if(t=A(t).replace(N,""),t.length<2)return"";for(;t.length%4!==0;)t+="=";return t}function A(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function E(t){return D(t)||n.isBuffer(t)||t&&"object"==typeof t&&"number"==typeof t.length}function C(t){return 16>t?"0"+t.toString(16):t.toString(16)}function M(t,e){var r,n=t.length,i=null;e=e||1/0;for(var o=[],s=0;n>s;s++){if(r=t.charCodeAt(s),r>55295&&57344>r){if(!i){if(r>56319){(e-=3)>-1&&o.push(239,191,189);continue}if(s+1===n){(e-=3)>-1&&o.push(239,191,189);continue}i=r;continue}if(56320>r){(e-=3)>-1&&o.push(239,191,189),i=r;continue}r=i-55296<<10|r-56320|65536,i=null}else i&&((e-=3)>-1&&o.push(239,191,189),i=null);if(128>r){if((e-=1)<0)break;o.push(r)}else if(2048>r){if((e-=2)<0)break;o.push(r>>6|192,63&r|128)}else if(65536>r){if((e-=3)<0)break;o.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(2097152>r))throw new Error("Invalid code point");if((e-=4)<0)break;o.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return o}function R(t){for(var e=[],r=0;r<t.length;r++)e.push(255&t.charCodeAt(r));return e}function k(t,e){for(var r,n,i,o=[],s=0;s<t.length&&!((e-=2)<0);s++)r=t.charCodeAt(s),n=r>>8,i=r%256,o.push(i),o.push(n);return o}function B(t){return L.toByteArray(T(t))}function I(t,e,r,n,i){i&&(n-=n%i);for(var o=0;n>o&&!(o+r>=e.length||o>=t.length);o++)e[o+r]=t[o];return o}function P(t){try{return decodeURIComponent(t)}catch(t){return String.fromCharCode(65533)}}var L=t(64),O=t(65),D=t(66);r.Buffer=n,r.SlowBuffer=i,r.INSPECT_MAX_BYTES=50,n.poolSize=8192;var j=1073741823,F={};n.TYPED_ARRAY_SUPPORT=function(){try{var t=new ArrayBuffer(0),e=new Uint8Array(t);return e.foo=function(){return 42},42===e.foo()&&"function"==typeof e.subarray&&0===new Uint8Array(1).subarray(1,1).byteLength}catch(t){return!1}}(),n.isBuffer=function(t){return!(null==t||!t._isBuffer)},n.compare=function(t,e){if(!n.isBuffer(t)||!n.isBuffer(e))throw new TypeError("Arguments must be Buffers");for(var r=t.length,i=e.length,o=0,s=Math.min(r,i);s>o&&t[o]===e[o];o++);return o!==s&&(r=t[o],i=e[o]),i>r?-1:r>i?1:0},n.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"raw":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},n.concat=function(t,e){if(!D(t))throw new TypeError("Usage: Buffer.concat(list[, length])");if(0===t.length)return new n(0);if(1===t.length)return t[0];var r;if(void 0===e)for(e=0,r=0;r<t.length;r++)e+=t[r].length;var i=new n(e),o=0;for(r=0;r<t.length;r++){var s=t[r];s.copy(i,o),o+=s.length}return i},n.byteLength=function(t,e){var r;switch(t+="",e||"utf8"){case"ascii":case"binary":case"raw":r=t.length;break;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":r=2*t.length;break;case"hex":r=t.length>>>1;break;case"utf8":case"utf-8":r=M(t).length;break;case"base64":r=B(t).length;break;default:r=t.length}return r},n.prototype.length=void 0,n.prototype.parent=void 0,n.prototype.toString=function(t,e,r){var n=!1;if(e>>>=0,r=void 0===r||1/0===r?this.length:r>>>0,t||(t="utf8"),0>e&&(e=0),r>this.length&&(r=this.length),e>=r)return"";for(;;)switch(t){case"hex":return v(this,e,r);case"utf8":case"utf-8":return d(this,e,r);case"ascii":return l(this,e,r);case"binary":return p(this,e,r);case"base64":return f(this,e,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return b(this,e,r);default:if(n)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),n=!0}},n.prototype.equals=function(t){if(!n.isBuffer(t))throw new TypeError("Argument must be a Buffer");return 0===n.compare(this,t)},n.prototype.inspect=function(){var t="",e=r.INSPECT_MAX_BYTES;return this.length>0&&(t=this.toString("hex",0,e).match(/.{2}/g).join(" "),this.length>e&&(t+=" ... ")),"<Buffer "+t+">"},n.prototype.compare=function(t){if(!n.isBuffer(t))throw new TypeError("Argument must be a Buffer");return n.compare(this,t)},n.prototype.get=function(t){return console.log(".get() is deprecated. Access using array indexes instead."),this.readUInt8(t)},n.prototype.set=function(t,e){return console.log(".set() is deprecated. Access using array indexes instead."),this.writeUInt8(t,e)},n.prototype.write=function(t,e,r,n){if(isFinite(e))isFinite(r)||(n=r,r=void 0);else{var i=n;n=e,e=r,r=i}if(e=Number(e)||0,0>r||0>e||e>this.length)throw new RangeError("attempt to write outside buffer bounds");var f=this.length-e;r?(r=Number(r),r>f&&(r=f)):r=f,n=String(n||"utf8").toLowerCase();var d;switch(n){case"hex":d=o(this,t,e,r);break;case"utf8":case"utf-8":d=s(this,t,e,r);break;case"ascii":d=a(this,t,e,r);break;case"binary":d=h(this,t,e,r);break;case"base64":d=c(this,t,e,r);break;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":d=u(this,t,e,r);break;default:throw new TypeError("Unknown encoding: "+n)}return d},n.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},n.prototype.slice=function(t,e){var r=this.length;t=~~t,e=void 0===e?r:~~e,0>t?(t+=r,0>t&&(t=0)):t>r&&(t=r),0>e?(e+=r,0>e&&(e=0)):e>r&&(e=r),t>e&&(e=t);var i;if(n.TYPED_ARRAY_SUPPORT)i=n._augment(this.subarray(t,e));else{var o=e-t;i=new n(o,void 0,!0);for(var s=0;o>s;s++)i[s]=this[s+t]}return i.length&&(i.parent=this.parent||this),i},n.prototype.readUIntLE=function(t,e,r){t>>>=0,e>>>=0,r||g(t,e,this.length);for(var n=this[t],i=1,o=0;++o<e&&(i*=256);)n+=this[t+o]*i;return n},n.prototype.readUIntBE=function(t,e,r){t>>>=0,e>>>=0,r||g(t,e,this.length);for(var n=this[t+--e],i=1;e>0&&(i*=256);)n+=this[t+--e]*i;return n},n.prototype.readUInt8=function(t,e){return e||g(t,1,this.length),this[t]},n.prototype.readUInt16LE=function(t,e){return e||g(t,2,this.length),this[t]|this[t+1]<<8},n.prototype.readUInt16BE=function(t,e){return e||g(t,2,this.length),this[t]<<8|this[t+1]},n.prototype.readUInt32LE=function(t,e){return e||g(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},n.prototype.readUInt32BE=function(t,e){return e||g(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},n.prototype.readIntLE=function(t,e,r){t>>>=0,e>>>=0,r||g(t,e,this.length);for(var n=this[t],i=1,o=0;++o<e&&(i*=256);)n+=this[t+o]*i;return i*=128,n>=i&&(n-=Math.pow(2,8*e)),n},n.prototype.readIntBE=function(t,e,r){t>>>=0,e>>>=0,r||g(t,e,this.length);for(var n=e,i=1,o=this[t+--n];n>0&&(i*=256);)o+=this[t+--n]*i;return i*=128,o>=i&&(o-=Math.pow(2,8*e)),o},n.prototype.readInt8=function(t,e){return e||g(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},n.prototype.readInt16LE=function(t,e){e||g(t,2,this.length);var r=this[t]|this[t+1]<<8;return 32768&r?4294901760|r:r},n.prototype.readInt16BE=function(t,e){e||g(t,2,this.length);var r=this[t+1]|this[t]<<8;return 32768&r?4294901760|r:r},n.prototype.readInt32LE=function(t,e){return e||g(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},n.prototype.readInt32BE=function(t,e){return e||g(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},n.prototype.readFloatLE=function(t,e){return e||g(t,4,this.length),O.read(this,t,!0,23,4)},n.prototype.readFloatBE=function(t,e){return e||g(t,4,this.length),O.read(this,t,!1,23,4)},n.prototype.readDoubleLE=function(t,e){return e||g(t,8,this.length),O.read(this,t,!0,52,8)},n.prototype.readDoubleBE=function(t,e){return e||g(t,8,this.length),O.read(this,t,!1,52,8)},n.prototype.writeUIntLE=function(t,e,r,n){t=+t,e>>>=0,r>>>=0,n||y(this,t,e,r,Math.pow(2,8*r),0);var i=1,o=0;for(this[e]=255&t;++o<r&&(i*=256);)this[e+o]=t/i>>>0&255;return e+r},n.prototype.writeUIntBE=function(t,e,r,n){t=+t,e>>>=0,r>>>=0,n||y(this,t,e,r,Math.pow(2,8*r),0);var i=r-1,o=1;for(this[e+i]=255&t;--i>=0&&(o*=256);)this[e+i]=t/o>>>0&255;return e+r},n.prototype.writeUInt8=function(t,e,r){return t=+t,e>>>=0,r||y(this,t,e,1,255,0),n.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[e]=t,e+1},n.prototype.writeUInt16LE=function(t,e,r){return t=+t,e>>>=0,r||y(this,t,e,2,65535,0),n.TYPED_ARRAY_SUPPORT?(this[e]=t,this[e+1]=t>>>8):m(this,t,e,!0),e+2},n.prototype.writeUInt16BE=function(t,e,r){return t=+t,e>>>=0,r||y(this,t,e,2,65535,0),n.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=t):m(this,t,e,!1),e+2},n.prototype.writeUInt32LE=function(t,e,r){return t=+t,e>>>=0,r||y(this,t,e,4,4294967295,0),n.TYPED_ARRAY_SUPPORT?(this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=t):w(this,t,e,!0),e+4},n.prototype.writeUInt32BE=function(t,e,r){return t=+t,e>>>=0,r||y(this,t,e,4,4294967295,0),n.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=t):w(this,t,e,!1),e+4},n.prototype.writeIntLE=function(t,e,r,n){t=+t,e>>>=0,n||y(this,t,e,r,Math.pow(2,8*r-1)-1,-Math.pow(2,8*r-1));var i=0,o=1,s=0>t?1:0;for(this[e]=255&t;++i<r&&(o*=256);)this[e+i]=(t/o>>0)-s&255;return e+r},n.prototype.writeIntBE=function(t,e,r,n){t=+t,e>>>=0,n||y(this,t,e,r,Math.pow(2,8*r-1)-1,-Math.pow(2,8*r-1));var i=r-1,o=1,s=0>t?1:0;for(this[e+i]=255&t;--i>=0&&(o*=256);)this[e+i]=(t/o>>0)-s&255;return e+r},n.prototype.writeInt8=function(t,e,r){return t=+t,e>>>=0,r||y(this,t,e,1,127,-128),n.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),0>t&&(t=255+t+1),this[e]=t,e+1},n.prototype.writeInt16LE=function(t,e,r){return t=+t,e>>>=0,r||y(this,t,e,2,32767,-32768),n.TYPED_ARRAY_SUPPORT?(this[e]=t,this[e+1]=t>>>8):m(this,t,e,!0),e+2},n.prototype.writeInt16BE=function(t,e,r){return t=+t,e>>>=0,r||y(this,t,e,2,32767,-32768),n.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=t):m(this,t,e,!1),e+2},n.prototype.writeInt32LE=function(t,e,r){return t=+t,e>>>=0,r||y(this,t,e,4,2147483647,-2147483648),n.TYPED_ARRAY_SUPPORT?(this[e]=t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24):w(this,t,e,!0),e+4},n.prototype.writeInt32BE=function(t,e,r){return t=+t,e>>>=0,r||y(this,t,e,4,2147483647,-2147483648),0>t&&(t=4294967295+t+1),n.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=t):w(this,t,e,!1),e+4},n.prototype.writeFloatLE=function(t,e,r){return _(this,t,e,!0,r)},n.prototype.writeFloatBE=function(t,e,r){return _(this,t,e,!1,r)},n.prototype.writeDoubleLE=function(t,e,r){return S(this,t,e,!0,r)},n.prototype.writeDoubleBE=function(t,e,r){return S(this,t,e,!1,r)},n.prototype.copy=function(t,e,r,i){var o=this;if(r||(r=0),i||0===i||(i=this.length),e>=t.length&&(e=t.length),e||(e=0),i>0&&r>i&&(i=r),i===r)return 0;if(0===t.length||0===o.length)return 0;if(0>e)throw new RangeError("targetStart out of bounds");if(0>r||r>=o.length)throw new RangeError("sourceStart out of bounds");if(0>i)throw new RangeError("sourceEnd out of bounds");i>this.length&&(i=this.length),t.length-e<i-r&&(i=t.length-e+r);var s=i-r;if(1e3>s||!n.TYPED_ARRAY_SUPPORT)for(var a=0;s>a;a++)t[a+e]=this[a+r];else t._set(this.subarray(r,r+s),e);return s},n.prototype.fill=function(t,e,r){if(t||(t=0),e||(e=0),r||(r=this.length),e>r)throw new RangeError("end < start");if(r!==e&&0!==this.length){if(0>e||e>=this.length)throw new RangeError("start out of bounds");if(0>r||r>this.length)throw new RangeError("end out of bounds");var n;if("number"==typeof t)for(n=e;r>n;n++)this[n]=t;else{var i=M(t.toString()),o=i.length;for(n=e;r>n;n++)this[n]=i[n%o]}return this}},n.prototype.toArrayBuffer=function(){if("undefined"!=typeof Uint8Array){if(n.TYPED_ARRAY_SUPPORT)return new n(this).buffer;for(var t=new Uint8Array(this.length),e=0,r=t.length;r>e;e+=1)t[e]=this[e];return t.buffer}throw new TypeError("Buffer.toArrayBuffer not supported in this browser")
};var U=n.prototype;n._augment=function(t){return t.constructor=n,t._isBuffer=!0,t._get=t.get,t._set=t.set,t.get=U.get,t.set=U.set,t.write=U.write,t.toString=U.toString,t.toLocaleString=U.toString,t.toJSON=U.toJSON,t.equals=U.equals,t.compare=U.compare,t.copy=U.copy,t.slice=U.slice,t.readUIntLE=U.readUIntLE,t.readUIntBE=U.readUIntBE,t.readUInt8=U.readUInt8,t.readUInt16LE=U.readUInt16LE,t.readUInt16BE=U.readUInt16BE,t.readUInt32LE=U.readUInt32LE,t.readUInt32BE=U.readUInt32BE,t.readIntLE=U.readIntLE,t.readIntBE=U.readIntBE,t.readInt8=U.readInt8,t.readInt16LE=U.readInt16LE,t.readInt16BE=U.readInt16BE,t.readInt32LE=U.readInt32LE,t.readInt32BE=U.readInt32BE,t.readFloatLE=U.readFloatLE,t.readFloatBE=U.readFloatBE,t.readDoubleLE=U.readDoubleLE,t.readDoubleBE=U.readDoubleBE,t.writeUInt8=U.writeUInt8,t.writeUIntLE=U.writeUIntLE,t.writeUIntBE=U.writeUIntBE,t.writeUInt16LE=U.writeUInt16LE,t.writeUInt16BE=U.writeUInt16BE,t.writeUInt32LE=U.writeUInt32LE,t.writeUInt32BE=U.writeUInt32BE,t.writeIntLE=U.writeIntLE,t.writeIntBE=U.writeIntBE,t.writeInt8=U.writeInt8,t.writeInt16LE=U.writeInt16LE,t.writeInt16BE=U.writeInt16BE,t.writeInt32LE=U.writeInt32LE,t.writeInt32BE=U.writeInt32BE,t.writeFloatLE=U.writeFloatLE,t.writeFloatBE=U.writeFloatBE,t.writeDoubleLE=U.writeDoubleLE,t.writeDoubleBE=U.writeDoubleBE,t.fill=U.fill,t.inspect=U.inspect,t.toArrayBuffer=U.toArrayBuffer,t};var N=/[^+\/0-9A-z\-]/g},{}],64:[function(t,e,r){var n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";!function(t){"use strict";function e(t){var e=t.charCodeAt(0);return e===s||e===f?62:e===a||e===d?63:h>e?-1:h+10>e?e-h+26+26:u+26>e?e-u:c+26>e?e-c+26:void 0}function r(t){function r(t){c[f++]=t}var n,i,s,a,h,c;if(t.length%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var u=t.length;h="="===t.charAt(u-2)?2:"="===t.charAt(u-1)?1:0,c=new o(3*t.length/4-h),s=h>0?t.length-4:t.length;var f=0;for(n=0,i=0;s>n;n+=4,i+=3)a=e(t.charAt(n))<<18|e(t.charAt(n+1))<<12|e(t.charAt(n+2))<<6|e(t.charAt(n+3)),r((16711680&a)>>16),r((65280&a)>>8),r(255&a);return 2===h?(a=e(t.charAt(n))<<2|e(t.charAt(n+1))>>4,r(255&a)):1===h&&(a=e(t.charAt(n))<<10|e(t.charAt(n+1))<<4|e(t.charAt(n+2))>>2,r(a>>8&255),r(255&a)),c}function i(t){function e(t){return n.charAt(t)}function r(t){return e(t>>18&63)+e(t>>12&63)+e(t>>6&63)+e(63&t)}var i,o,s,a=t.length%3,h="";for(i=0,s=t.length-a;s>i;i+=3)o=(t[i]<<16)+(t[i+1]<<8)+t[i+2],h+=r(o);switch(a){case 1:o=t[t.length-1],h+=e(o>>2),h+=e(o<<4&63),h+="==";break;case 2:o=(t[t.length-2]<<8)+t[t.length-1],h+=e(o>>10),h+=e(o>>4&63),h+=e(o<<2&63),h+="="}return h}var o="undefined"!=typeof Uint8Array?Uint8Array:Array,s="+".charCodeAt(0),a="/".charCodeAt(0),h="0".charCodeAt(0),c="a".charCodeAt(0),u="A".charCodeAt(0),f="-".charCodeAt(0),d="_".charCodeAt(0);t.toByteArray=r,t.fromByteArray=i}("undefined"==typeof r?this.base64js={}:r)},{}],65:[function(t,e,r){r.read=function(t,e,r,n,i){var o,s,a=8*i-n-1,h=(1<<a)-1,c=h>>1,u=-7,f=r?i-1:0,d=r?-1:1,l=t[e+f];for(f+=d,o=l&(1<<-u)-1,l>>=-u,u+=a;u>0;o=256*o+t[e+f],f+=d,u-=8);for(s=o&(1<<-u)-1,o>>=-u,u+=n;u>0;s=256*s+t[e+f],f+=d,u-=8);if(0===o)o=1-c;else{if(o===h)return s?0/0:1/0*(l?-1:1);s+=Math.pow(2,n),o-=c}return(l?-1:1)*s*Math.pow(2,o-n)},r.write=function(t,e,r,n,i,o){var s,a,h,c=8*o-i-1,u=(1<<c)-1,f=u>>1,d=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,l=n?0:o-1,p=n?1:-1,v=0>e||0===e&&0>1/e?1:0;for(e=Math.abs(e),isNaN(e)||1/0===e?(a=isNaN(e)?1:0,s=u):(s=Math.floor(Math.log(e)/Math.LN2),e*(h=Math.pow(2,-s))<1&&(s--,h*=2),e+=s+f>=1?d/h:d*Math.pow(2,1-f),e*h>=2&&(s++,h/=2),s+f>=u?(a=0,s=u):s+f>=1?(a=(e*h-1)*Math.pow(2,i),s+=f):(a=e*Math.pow(2,f-1)*Math.pow(2,i),s=0));i>=8;t[r+l]=255&a,l+=p,a/=256,i-=8);for(s=s<<i|a,c+=i;c>0;t[r+l]=255&s,l+=p,s/=256,c-=8);t[r+l-p]|=128*v}},{}],66:[function(t,e){var r=Array.isArray,n=Object.prototype.toString;e.exports=r||function(t){return!!t&&"[object Array]"==n.call(t)}},{}],67:[function(t,e){(function(r){"use strict";function n(t){h.call(this),this._hash=t,this.buffers=[]}function i(t){h.call(this),this._hash=t}var o=t(196),s=t(71),a=t(194),h=t(220).Transform,c=t(223).inherits;e.exports=function(t){return"md5"===t?new n(s):"rmd160"===t?new n(a):new i(o(t))},c(n,h),n.prototype._transform=function(t,e,r){this.buffers.push(t),r()},n.prototype._flush=function(t){var e=r.concat(this.buffers),n=this._hash(e);this.buffers=null,this.push(n),t()},n.prototype.update=function(t,e){return this.write(t,e),this},n.prototype.digest=function(t){this.end();for(var e,n=new r("");e=this.read();)n=r.concat([n,e]);return t&&(n=n.toString(t)),n},c(i,h),i.prototype._transform=function(t,e,r){this._hash.update(t),r()},i.prototype._flush=function(t){this.push(this._hash.digest()),this._hash=null,t()},i.prototype.update=function(t,e){return this.write(t,e),this},i.prototype.digest=function(t){this.end();for(var e,n=new r("");e=this.read();)n=r.concat([n,e]);return t&&(n=n.toString(t)),n}}).call(this,t(63).Buffer)},{}],68:[function(t,e){(function(r){"use strict";function n(t,e){if(!(this instanceof n))return new n(t,e);o.call(this),this._opad=c,this._alg=t;var s="sha512"===t||"sha384"===t?128:64;e=this._key=r.isBuffer(e)?e:new r(e),e.length>s?e=i(t).update(e).digest():e.length<s&&(e=r.concat([e,a],s));for(var h=this._ipad=new r(s),c=this._opad=new r(s),u=0;s>u;u++)h[u]=54^e[u],c[u]=92^e[u];this._hash=i(t).update(h)}var i=t(67),o=t(220).Transform,s=t(223).inherits,a=new r(128);a.fill(0),e.exports=n,s(n,o),n.prototype.update=function(t,e){return this.write(t,e),this},n.prototype._transform=function(t,e,r){this._hash.update(t),r()},n.prototype._flush=function(t){var e=this._hash.digest();this.push(i(this._alg).update(this._opad).update(e).digest()),t()},n.prototype.digest=function(t){this.end();for(var e,n=new r("");e=this.read();)n=r.concat([n,e]);return t&&(n=n.toString(t)),n}}).call(this,t(63).Buffer)},{}],69:[function(t,e){(function(t){"use strict";function r(e,r){if(e.length%o!==0){var n=e.length+(o-e.length%o);e=t.concat([e,s],n)}for(var i=[],a=r?e.readInt32BE:e.readInt32LE,h=0;h<e.length;h+=o)i.push(a.call(e,h));return i}function n(e,r,n){for(var i=new t(r),o=n?i.writeInt32BE:i.writeInt32LE,s=0;s<e.length;s++)o.call(i,e[s],4*s,!0);return i}function i(e,i,o,s){t.isBuffer(e)||(e=new t(e));var h=i(r(e,s),e.length*a);return n(h,o,s)}var o=4,s=new t(o);s.fill(0);var a=8;e.exports={hash:i}}).call(this,t(63).Buffer)},{}],70:[function(t,e,r){"use strict";function n(){var t=[].slice.call(arguments).join(" ");throw new Error([t,"we accept pull requests","http://github.com/dominictarr/crypto-browserify"].join("\n"))}function i(t,e){for(var r in t)e(t[r],r)}var o=r.rng=t(204),s=r.prng=t(203);r.createHash=r.Hash=t(67),r.createHmac=r.Hmac=t(68),r.randomBytes=function(t,e){if(!e||!e.call)return o(t);try{e.call(this,void 0,o(t))}catch(t){e(t)}},r.pseudoRandomBytes=function(t,e){if(!e||!e.call)return s(t);try{e.call(this,void 0,s(t))}catch(t){e(t)}};var a=["sha1","sha224","sha256","sha384","sha512","md5","rmd160"].concat(Object.keys(t(90)));r.getHashes=function(){return a};var h=t(202)(r);r.pbkdf2=h.pbkdf2,r.pbkdf2Sync=h.pbkdf2Sync,t(79)(r,e.exports),t(91)(e.exports,r),t(161)(r,e.exports),t(137)(e.exports,r),t(167)(e.exports,r),i(["createCredentials"],function(t){r[t]=function(){n("sorry,",t,"is not implemented yet")}})},{}],71:[function(t,e){"use strict";function r(t,e){t[e>>5]|=128<<e%32,t[(e+64>>>9<<4)+14]=e;for(var r=1732584193,n=-271733879,c=-1732584194,u=271733878,f=0;f<t.length;f+=16){var d=r,l=n,p=c,v=u;r=i(r,n,c,u,t[f+0],7,-680876936),u=i(u,r,n,c,t[f+1],12,-389564586),c=i(c,u,r,n,t[f+2],17,606105819),n=i(n,c,u,r,t[f+3],22,-1044525330),r=i(r,n,c,u,t[f+4],7,-176418897),u=i(u,r,n,c,t[f+5],12,1200080426),c=i(c,u,r,n,t[f+6],17,-1473231341),n=i(n,c,u,r,t[f+7],22,-45705983),r=i(r,n,c,u,t[f+8],7,1770035416),u=i(u,r,n,c,t[f+9],12,-1958414417),c=i(c,u,r,n,t[f+10],17,-42063),n=i(n,c,u,r,t[f+11],22,-1990404162),r=i(r,n,c,u,t[f+12],7,1804603682),u=i(u,r,n,c,t[f+13],12,-40341101),c=i(c,u,r,n,t[f+14],17,-1502002290),n=i(n,c,u,r,t[f+15],22,1236535329),r=o(r,n,c,u,t[f+1],5,-165796510),u=o(u,r,n,c,t[f+6],9,-1069501632),c=o(c,u,r,n,t[f+11],14,643717713),n=o(n,c,u,r,t[f+0],20,-373897302),r=o(r,n,c,u,t[f+5],5,-701558691),u=o(u,r,n,c,t[f+10],9,38016083),c=o(c,u,r,n,t[f+15],14,-660478335),n=o(n,c,u,r,t[f+4],20,-405537848),r=o(r,n,c,u,t[f+9],5,568446438),u=o(u,r,n,c,t[f+14],9,-1019803690),c=o(c,u,r,n,t[f+3],14,-187363961),n=o(n,c,u,r,t[f+8],20,1163531501),r=o(r,n,c,u,t[f+13],5,-1444681467),u=o(u,r,n,c,t[f+2],9,-51403784),c=o(c,u,r,n,t[f+7],14,1735328473),n=o(n,c,u,r,t[f+12],20,-1926607734),r=s(r,n,c,u,t[f+5],4,-378558),u=s(u,r,n,c,t[f+8],11,-2022574463),c=s(c,u,r,n,t[f+11],16,1839030562),n=s(n,c,u,r,t[f+14],23,-35309556),r=s(r,n,c,u,t[f+1],4,-1530992060),u=s(u,r,n,c,t[f+4],11,1272893353),c=s(c,u,r,n,t[f+7],16,-155497632),n=s(n,c,u,r,t[f+10],23,-1094730640),r=s(r,n,c,u,t[f+13],4,681279174),u=s(u,r,n,c,t[f+0],11,-358537222),c=s(c,u,r,n,t[f+3],16,-722521979),n=s(n,c,u,r,t[f+6],23,76029189),r=s(r,n,c,u,t[f+9],4,-640364487),u=s(u,r,n,c,t[f+12],11,-421815835),c=s(c,u,r,n,t[f+15],16,530742520),n=s(n,c,u,r,t[f+2],23,-995338651),r=a(r,n,c,u,t[f+0],6,-198630844),u=a(u,r,n,c,t[f+7],10,1126891415),c=a(c,u,r,n,t[f+14],15,-1416354905),n=a(n,c,u,r,t[f+5],21,-57434055),r=a(r,n,c,u,t[f+12],6,1700485571),u=a(u,r,n,c,t[f+3],10,-1894986606),c=a(c,u,r,n,t[f+10],15,-1051523),n=a(n,c,u,r,t[f+1],21,-2054922799),r=a(r,n,c,u,t[f+8],6,1873313359),u=a(u,r,n,c,t[f+15],10,-30611744),c=a(c,u,r,n,t[f+6],15,-1560198380),n=a(n,c,u,r,t[f+13],21,1309151649),r=a(r,n,c,u,t[f+4],6,-145523070),u=a(u,r,n,c,t[f+11],10,-1120210379),c=a(c,u,r,n,t[f+2],15,718787259),n=a(n,c,u,r,t[f+9],21,-343485551),r=h(r,d),n=h(n,l),c=h(c,p),u=h(u,v)}return Array(r,n,c,u)}function n(t,e,r,n,i,o){return h(c(h(h(e,t),h(n,o)),i),r)}function i(t,e,r,i,o,s,a){return n(e&r|~e&i,t,e,o,s,a)}function o(t,e,r,i,o,s,a){return n(e&i|r&~i,t,e,o,s,a)}function s(t,e,r,i,o,s,a){return n(e^r^i,t,e,o,s,a)}function a(t,e,r,i,o,s,a){return n(r^(e|~i),t,e,o,s,a)}function h(t,e){var r=(65535&t)+(65535&e),n=(t>>16)+(e>>16)+(r>>16);return n<<16|65535&r}function c(t,e){return t<<e|t>>>32-e}var u=t(69);e.exports=function(t){return u.hash(t,r,16)}},{}],72:[function(t,e){(function(t){e.exports=function(e,r,n,i){n/=8,i=i||0;for(var o,s,a,h=0,c=0,u=new t(n),f=new t(i),d=0;;){if(o=e.createHash("md5"),d++>0&&o.update(s),o.update(r),s=o.digest(),a=0,n>0)for(;;){if(0===n)break;if(a===s.length)break;u[h++]=s[a],n--,a++}if(i>0&&a!==s.length)for(;;){if(0===i)break;if(a===s.length)break;f[c++]=s[a],i--,a++}if(0===n&&0===i)break}for(a=0;a<s.length;a++)s[a]=0;return{key:u,iv:f}}}).call(this,t(63).Buffer)},{}],73:[function(t,e,r){(function(t){function e(t){var e,r;return e=t>a||0>t?(r=Math.abs(t)%a,0>t?a-r:r):t}function n(t){var e,r,n;for(e=r=0,n=t.length;n>=0?n>r:r>n;e=n>=0?++r:--r)t[e]=0;return!1}function i(){var t;this.SBOX=[],this.INV_SBOX=[],this.SUB_MIX=function(){var e,r;for(r=[],t=e=0;4>e;t=++e)r.push([]);return r}(),this.INV_SUB_MIX=function(){var e,r;for(r=[],t=e=0;4>e;t=++e)r.push([]);return r}(),this.init(),this.RCON=[0,1,2,4,8,16,32,64,128,27,54]}function o(t){for(var e=t.length/4,r=new Array(e),n=-1;++n<e;)r[n]=t.readUInt32BE(4*n);return r}function s(t){this._key=o(t),this._doReset()}var a=Math.pow(2,32);i.prototype.init=function(){var t,e,r,n,i,o,s,a,h,c;for(t=function(){var t,r;for(r=[],e=t=0;256>t;e=++t)r.push(128>e?e<<1:e<<1^283);return r}(),i=0,h=0,e=c=0;256>c;e=++c)r=h^h<<1^h<<2^h<<3^h<<4,r=r>>>8^255&r^99,this.SBOX[i]=r,this.INV_SBOX[r]=i,o=t[i],s=t[o],a=t[s],n=257*t[r]^16843008*r,this.SUB_MIX[0][i]=n<<24|n>>>8,this.SUB_MIX[1][i]=n<<16|n>>>16,this.SUB_MIX[2][i]=n<<8|n>>>24,this.SUB_MIX[3][i]=n,n=16843009*a^65537*s^257*o^16843008*i,this.INV_SUB_MIX[0][r]=n<<24|n>>>8,this.INV_SUB_MIX[1][r]=n<<16|n>>>16,this.INV_SUB_MIX[2][r]=n<<8|n>>>24,this.INV_SUB_MIX[3][r]=n,0===i?i=h=1:(i=o^t[t[t[a^o]]],h^=t[t[h]]);return!0};var h=new i;s.blockSize=16,s.prototype.blockSize=s.blockSize,s.keySize=32,s.prototype.keySize=s.keySize,s.prototype._doReset=function(){var t,e,r,n,i,o,s,a;for(r=this._key,e=r.length,this._nRounds=e+6,i=4*(this._nRounds+1),this._keySchedule=[],n=s=0;i>=0?i>s:s>i;n=i>=0?++s:--s)this._keySchedule[n]=e>n?r[n]:(o=this._keySchedule[n-1],n%e===0?(o=o<<8|o>>>24,o=h.SBOX[o>>>24]<<24|h.SBOX[o>>>16&255]<<16|h.SBOX[o>>>8&255]<<8|h.SBOX[255&o],o^=h.RCON[n/e|0]<<24):e>6&&n%e===4?o=h.SBOX[o>>>24]<<24|h.SBOX[o>>>16&255]<<16|h.SBOX[o>>>8&255]<<8|h.SBOX[255&o]:void 0,this._keySchedule[n-e]^o);for(this._invKeySchedule=[],t=a=0;i>=0?i>a:a>i;t=i>=0?++a:--a)n=i-t,o=this._keySchedule[n-(t%4?0:4)],this._invKeySchedule[t]=4>t||4>=n?o:h.INV_SUB_MIX[0][h.SBOX[o>>>24]]^h.INV_SUB_MIX[1][h.SBOX[o>>>16&255]]^h.INV_SUB_MIX[2][h.SBOX[o>>>8&255]]^h.INV_SUB_MIX[3][h.SBOX[255&o]];return!0},s.prototype.encryptBlock=function(e){e=o(new t(e));var r=this._doCryptBlock(e,this._keySchedule,h.SUB_MIX,h.SBOX),n=new t(16);return n.writeUInt32BE(r[0],0),n.writeUInt32BE(r[1],4),n.writeUInt32BE(r[2],8),n.writeUInt32BE(r[3],12),n},s.prototype.decryptBlock=function(e){e=o(new t(e));var r=[e[3],e[1]];e[1]=r[0],e[3]=r[1];var n=this._doCryptBlock(e,this._invKeySchedule,h.INV_SUB_MIX,h.INV_SBOX),i=new t(16);return i.writeUInt32BE(n[0],0),i.writeUInt32BE(n[3],4),i.writeUInt32BE(n[2],8),i.writeUInt32BE(n[1],12),i},s.prototype.scrub=function(){n(this._keySchedule),n(this._invKeySchedule),n(this._key)},s.prototype._doCryptBlock=function(t,r,n,i){var o,s,a,h,c,u,f,d,l,p,v,b;for(a=t[0]^r[0],h=t[1]^r[1],c=t[2]^r[2],u=t[3]^r[3],o=4,s=v=1,b=this._nRounds;b>=1?b>v:v>b;s=b>=1?++v:--v)f=n[0][a>>>24]^n[1][h>>>16&255]^n[2][c>>>8&255]^n[3][255&u]^r[o++],d=n[0][h>>>24]^n[1][c>>>16&255]^n[2][u>>>8&255]^n[3][255&a]^r[o++],l=n[0][c>>>24]^n[1][u>>>16&255]^n[2][a>>>8&255]^n[3][255&h]^r[o++],p=n[0][u>>>24]^n[1][a>>>16&255]^n[2][h>>>8&255]^n[3][255&c]^r[o++],a=f,h=d,c=l,u=p;return f=(i[a>>>24]<<24|i[h>>>16&255]<<16|i[c>>>8&255]<<8|i[255&u])^r[o++],d=(i[h>>>24]<<24|i[c>>>16&255]<<16|i[u>>>8&255]<<8|i[255&a])^r[o++],l=(i[c>>>24]<<24|i[u>>>16&255]<<16|i[a>>>8&255]<<8|i[255&h])^r[o++],p=(i[u>>>24]<<24|i[a>>>16&255]<<16|i[h>>>8&255]<<8|i[255&c])^r[o++],[e(f),e(d),e(l),e(p)]},r.AES=s}).call(this,t(63).Buffer)},{}],74:[function(t,e){(function(r){function n(t,e,i,a){if(!(this instanceof n))return new n(t,e,i);s.call(this),this._finID=r.concat([i,new r([0,0,0,1])]),i=r.concat([i,new r([0,0,0,2])]),this._cipher=new o.AES(e),this._prev=new r(i.length),this._cache=new r(""),this._secCache=new r(""),this._decrypt=a,this._alen=0,this._len=0,i.copy(this._prev),this._mode=t;var c=new r(4);c.fill(0),this._ghash=new h(this._cipher.encryptBlock(c)),this._authTag=null,this._called=!1}function i(t,e){var r=0;t.length!==e.length&&r++;for(var n=Math.min(t.length,e.length),i=-1;++i<n;)r+=t[i]^e[i];return r}var o=t(73),s=t(75),a=t(206),h=t(78),c=t(89);a(n,s),e.exports=n,n.prototype._update=function(t){if(!this._called&&this._alen){var e=16-this._alen%16;16>e&&(e=new r(e),e.fill(0),this._ghash.update(e))}this._called=!0;var n=this._mode.encrypt(this,t);return this._ghash.update(this._decrypt?t:n),this._len+=t.length,n},n.prototype._final=function(){if(this._decrypt&&!this._authTag)throw new Error("Unsupported state or unable to authenticate data");var t=c(this._ghash.final(8*this._alen,8*this._len),this._cipher.encryptBlock(this._finID));if(this._decrypt){if(i(t,this._authTag))throw new Error("Unsupported state or unable to authenticate data")}else this._authTag=t;this._cipher.scrub()},n.prototype.getAuthTag=function(){if(!this._decrypt&&r.isBuffer(this._authTag))return this._authTag;throw new Error("Attempting to get auth tag in unsupported state")},n.prototype.setAuthTag=function(t){if(!this._decrypt)throw new Error("Attempting to set auth tag in unsupported state");this._authTag=t},n.prototype.setAAD=function(t){if(this._called)throw new Error("Attempting to set AAD in unsupported state");this._ghash.update(t),this._alen+=t.length}}).call(this,t(63).Buffer)},{}],75:[function(t,e){(function(r){function n(){i.call(this)}var i=t(220).Transform,o=t(206);e.exports=n,o(n,i),n.prototype.update=function(t,e,n){"string"==typeof t&&(t=new r(t,e));var i=this._update(t);return n&&(i=i.toString(n)),i},n.prototype._transform=function(t,e,r){this.push(this._update(t)),r()},n.prototype._flush=function(t){try{this.push(this._final())}catch(e){return t(e)}t()},n.prototype.final=function(t){var e=this._final()||new r("");return t&&(e=e.toString(t)),e}}).call(this,t(63).Buffer)},{}],76:[function(t,e){(function(r){function n(t,e,o){return this instanceof n?(a.call(this),this._cache=new i,this._last=void 0,this._cipher=new s.AES(e),this._prev=new r(o.length),o.copy(this._prev),this._mode=t,void(this._autopadding=!0)):new n(t,e,o)}function i(){return this instanceof i?void(this.cache=new r("")):new i}function o(t){for(var e=t[15],r=-1;++r<e;)if(t[r+(16-e)]!==e)throw new Error("unable to decrypt data");return 16!==e?t.slice(0,16-e):void 0}var s=t(73),a=t(75),h=t(206),c=t(80),u=t(88),f=t(74),d=t(72);h(n,a),n.prototype._update=function(t){this._cache.add(t);for(var e,n,i=[];e=this._cache.get(this._autopadding);)n=this._mode.decrypt(this,e),i.push(n);return r.concat(i)},n.prototype._final=function(){var t=this._cache.flush();if(this._autopadding)return o(this._mode.decrypt(this,t));if(t)throw new Error("data not multiple of block length")},n.prototype.setAutoPadding=function(t){this._autopadding=!!t},i.prototype.add=function(t){this.cache=r.concat([this.cache,t])},i.prototype.get=function(t){var e;if(t){if(this.cache.length>16)return e=this.cache.slice(0,16),this.cache=this.cache.slice(16),e}else if(this.cache.length>=16)return e=this.cache.slice(0,16),this.cache=this.cache.slice(16),e;return null},i.prototype.flush=function(){return this.cache.length?this.cache:void 0};var l={ECB:t(86),CBC:t(81),CFB:t(82),CFB8:t(84),CFB1:t(83),OFB:t(87),CTR:t(85),GCM:t(85)};e.exports=function(t){function e(t,e,i){var o=c[t.toLowerCase()];if(!o)throw new TypeError("invalid suite type");if("string"==typeof i&&(i=new r(i)),"string"==typeof e&&(e=new r(e)),e.length!==o.key/8)throw new TypeError("invalid key length "+e.length);if(i.length!==o.iv)throw new TypeError("invalid iv length "+i.length);return"stream"===o.type?new u(l[o.mode],e,i,!0):"auth"===o.type?new f(l[o.mode],e,i,!0):new n(l[o.mode],e,i)}function i(r,n){var i=c[r.toLowerCase()];if(!i)throw new TypeError("invalid suite type");var o=d(t,n,i.key,i.iv);return e(r,o.key,o.iv)}return{createDecipher:i,createDecipheriv:e}}}).call(this,t(63).Buffer)},{}],77:[function(t,e){(function(r){function n(t,e,a){return this instanceof n?(s.call(this),this._cache=new i,this._cipher=new o.AES(e),this._prev=new r(a.length),a.copy(this._prev),this._mode=t,void(this._autopadding=!0)):new n(t,e,a)}function i(){return this instanceof i?void(this.cache=new r("")):new i}var o=t(73),s=t(75),a=t(206),h=t(80),c=t(72),u=t(88),f=t(74);a(n,s),n.prototype._update=function(t){this._cache.add(t);for(var e,n,i=[];e=this._cache.get();)n=this._mode.encrypt(this,e),i.push(n);return r.concat(i)},n.prototype._final=function(){var t=this._cache.flush();if(this._autopadding)return t=this._mode.encrypt(this,t),this._cipher.scrub(),t;if("10101010101010101010101010101010"!==t.toString("hex"))throw this._cipher.scrub(),new Error("data not multiple of block length")},n.prototype.setAutoPadding=function(t){this._autopadding=!!t},i.prototype.add=function(t){this.cache=r.concat([this.cache,t])},i.prototype.get=function(){if(this.cache.length>15){var t=this.cache.slice(0,16);return this.cache=this.cache.slice(16),t}return null},i.prototype.flush=function(){for(var t=16-this.cache.length,e=new r(t),n=-1;++n<t;)e.writeUInt8(t,n);var i=r.concat([this.cache,e]);return i};var d={ECB:t(86),CBC:t(81),CFB:t(82),CFB8:t(84),CFB1:t(83),OFB:t(87),CTR:t(85),GCM:t(85)};e.exports=function(t){function e(t,e,i){var o=h[t.toLowerCase()];if(!o)throw new TypeError("invalid suite type");if("string"==typeof i&&(i=new r(i)),"string"==typeof e&&(e=new r(e)),e.length!==o.key/8)throw new TypeError("invalid key length "+e.length);if(i.length!==o.iv)throw new TypeError("invalid iv length "+i.length);return"stream"===o.type?new u(d[o.mode],e,i):"auth"===o.type?new f(d[o.mode],e,i):new n(d[o.mode],e,i)}function i(r,n){var i=h[r.toLowerCase()];if(!i)throw new TypeError("invalid suite type");var o=c(t,n,i.key,i.iv);return e(r,o.key,o.iv)}return{createCipher:i,createCipheriv:e}}}).call(this,t(63).Buffer)},{}],78:[function(t,e){(function(t){function r(e){this.h=e,this.state=new t(16),this.state.fill(0),this.cache=new t("")}function n(t){return[t.readUInt32BE(0),t.readUInt32BE(4),t.readUInt32BE(8),t.readUInt32BE(12)]}function i(e){e=e.map(o);var r=new t(16);return r.writeUInt32BE(e[0],0),r.writeUInt32BE(e[1],4),r.writeUInt32BE(e[2],8),r.writeUInt32BE(e[3],12),r}function o(t){var e,r;return e=t>h||0>t?(r=Math.abs(t)%h,0>t?h-r:r):t}function s(t,e){return[t[0]^e[0],t[1]^e[1],t[2]^e[2],t[3]^e[3]]}var a=new t(16);a.fill(0),e.exports=r,r.prototype.ghash=function(t){for(var e=-1;++e<t.length;)this.state[e]^=t[e];this._multiply()},r.prototype._multiply=function(){for(var t,e,r,o=n(this.h),a=[0,0,0,0],h=-1;++h<128;){for(e=0!==(this.state[~~(h/8)]&1<<7-h%8),e&&(a=s(a,o)),r=0!==(1&o[3]),t=3;t>0;t--)o[t]=o[t]>>>1|(1&o[t-1])<<31;o[0]=o[0]>>>1,r&&(o[0]=o[0]^225<<24)}this.state=i(a)},r.prototype.update=function(e){this.cache=t.concat([this.cache,e]);for(var r;this.cache.length>=16;)r=this.cache.slice(0,16),this.cache=this.cache.slice(16),this.ghash(r)},r.prototype.final=function(e,r){return this.cache.length&&this.ghash(t.concat([this.cache,a],16)),this.ghash(i([0,e,0,r])),this.state};var h=Math.pow(2,32)}).call(this,t(63).Buffer)},{}],79:[function(t,e){e.exports=function(e,r){function n(){return Object.keys(s)}r=r||{};var i=t(77)(e);r.createCipher=r.Cipher=i.createCipher,r.createCipheriv=r.Cipheriv=i.createCipheriv;var o=t(76)(e);r.createDecipher=r.Decipher=o.createDecipher,r.createDecipheriv=r.Decipheriv=o.createDecipheriv;var s=t(80);r.listCiphers=r.getCiphers=n}},{}],80:[function(t,e,r){r["aes-128-ecb"]={cipher:"AES",key:128,iv:0,mode:"ECB",type:"block"},r["aes-192-ecb"]={cipher:"AES",key:192,iv:0,mode:"ECB",type:"block"},r["aes-256-ecb"]={cipher:"AES",key:256,iv:0,mode:"ECB",type:"block"},r["aes-128-cbc"]={cipher:"AES",key:128,iv:16,mode:"CBC",type:"block"},r["aes-192-cbc"]={cipher:"AES",key:192,iv:16,mode:"CBC",type:"block"},r["aes-256-cbc"]={cipher:"AES",key:256,iv:16,mode:"CBC",type:"block"},r.aes128=r["aes-128-cbc"],r.aes192=r["aes-192-cbc"],r.aes256=r["aes-256-cbc"],r["aes-128-cfb"]={cipher:"AES",key:128,iv:16,mode:"CFB",type:"stream"},r["aes-192-cfb"]={cipher:"AES",key:192,iv:16,mode:"CFB",type:"stream"},r["aes-256-cfb"]={cipher:"AES",key:256,iv:16,mode:"CFB",type:"stream"},r["aes-128-cfb8"]={cipher:"AES",key:128,iv:16,mode:"CFB8",type:"stream"},r["aes-192-cfb8"]={cipher:"AES",key:192,iv:16,mode:"CFB8",type:"stream"},r["aes-256-cfb8"]={cipher:"AES",key:256,iv:16,mode:"CFB8",type:"stream"},r["aes-128-cfb1"]={cipher:"AES",key:128,iv:16,mode:"CFB1",type:"stream"},r["aes-192-cfb1"]={cipher:"AES",key:192,iv:16,mode:"CFB1",type:"stream"},r["aes-256-cfb1"]={cipher:"AES",key:256,iv:16,mode:"CFB1",type:"stream"},r["aes-128-ofb"]={cipher:"AES",key:128,iv:16,mode:"OFB",type:"stream"},r["aes-192-ofb"]={cipher:"AES",key:192,iv:16,mode:"OFB",type:"stream"},r["aes-256-ofb"]={cipher:"AES",key:256,iv:16,mode:"OFB",type:"stream"},r["aes-128-ctr"]={cipher:"AES",key:128,iv:16,mode:"CTR",type:"stream"},r["aes-192-ctr"]={cipher:"AES",key:192,iv:16,mode:"CTR",type:"stream"},r["aes-256-ctr"]={cipher:"AES",key:256,iv:16,mode:"CTR",type:"stream"},r["aes-128-gcm"]={cipher:"AES",key:128,iv:12,mode:"GCM",type:"auth"},r["aes-192-gcm"]={cipher:"AES",key:192,iv:12,mode:"GCM",type:"auth"},r["aes-256-gcm"]={cipher:"AES",key:256,iv:12,mode:"GCM",type:"auth"}},{}],81:[function(t,e,r){var n=t(89);r.encrypt=function(t,e){var r=n(e,t._prev);return t._prev=t._cipher.encryptBlock(r),t._prev},r.decrypt=function(t,e){var r=t._prev;t._prev=e;var i=t._cipher.decryptBlock(e);return n(i,r)}},{}],82:[function(t,e,r){(function(e){function n(t,r,n){var o=r.length,s=i(r,t._cache);return t._cache=t._cache.slice(o),t._prev=e.concat([t._prev,n?r:s]),s}var i=t(89);r.encrypt=function(t,r,i){for(var o,s=new e("");r.length;){if(0===t._cache.length&&(t._cache=t._cipher.encryptBlock(t._prev),t._prev=new e("")),!(t._cache.length<=r.length)){s=e.concat([s,n(t,r,i)]);break}o=t._cache.length,s=e.concat([s,n(t,r.slice(0,o),i)]),r=r.slice(o)}return s}}).call(this,t(63).Buffer)},{}],83:[function(t,e,r){(function(t){function e(t,e,r){for(var i,o,s,a=-1,h=8,c=0;++a<h;)i=t._cipher.encryptBlock(t._prev),o=e&1<<7-a?128:0,s=i[0]^o,c+=(128&s)>>a%8,t._prev=n(t._prev,r?o:s);return c}function n(e,r){var n=e.length,i=-1,o=new t(e.length);for(e=t.concat([e,new t([r])]);++i<n;)o[i]=e[i]<<1|e[i+1]>>7;return o}r.encrypt=function(r,n,i){for(var o=n.length,s=new t(o),a=-1;++a<o;)s[a]=e(r,n[a],i);return s}}).call(this,t(63).Buffer)},{}],84:[function(t,e,r){(function(t){function e(e,r,n){var i=e._cipher.encryptBlock(e._prev),o=i[0]^r;return e._prev=t.concat([e._prev.slice(1),new t([n?r:o])]),o}r.encrypt=function(r,n,i){for(var o=n.length,s=new t(o),a=-1;++a<o;)s[a]=e(r,n[a],i);return s}}).call(this,t(63).Buffer)},{}],85:[function(t,e,r){(function(e){function n(t){var e=t._cipher.encryptBlock(t._prev);return i(t._prev),e}function i(t){for(var e,r=t.length;r--;){if(e=t.readUInt8(r),255!==e){e++,t.writeUInt8(e,r);break}t.writeUInt8(0,r)}}var o=t(89);r.encrypt=function(t,r){for(;t._cache.length<r.length;)t._cache=e.concat([t._cache,n(t)]);var i=t._cache.slice(0,r.length);return t._cache=t._cache.slice(r.length),o(r,i)}}).call(this,t(63).Buffer)},{}],86:[function(t,e,r){r.encrypt=function(t,e){return t._cipher.encryptBlock(e)},r.decrypt=function(t,e){return t._cipher.decryptBlock(e)}},{}],87:[function(t,e,r){(function(e){function n(t){return t._prev=t._cipher.encryptBlock(t._prev),t._prev}var i=t(89);r.encrypt=function(t,r){for(;t._cache.length<r.length;)t._cache=e.concat([t._cache,n(t)]);var o=t._cache.slice(0,r.length);return t._cache=t._cache.slice(r.length),i(r,o)}}).call(this,t(63).Buffer)},{}],88:[function(t,e){(function(r){function n(t,e,s,a){return this instanceof n?(o.call(this),this._cipher=new i.AES(e),this._prev=new r(s.length),this._cache=new r(""),this._secCache=new r(""),this._decrypt=a,s.copy(this._prev),void(this._mode=t)):new n(t,e,s)}var i=t(73),o=t(75),s=t(206);s(n,o),e.exports=n,n.prototype._update=function(t){return this._mode.encrypt(this,t,this._decrypt)},n.prototype._final=function(){this._cipher.scrub()}}).call(this,t(63).Buffer)},{}],89:[function(t,e){(function(t){function r(e,r){for(var n=Math.min(e.length,r.length),i=new t(n),o=-1;++o<n;)i.writeUInt8(e[o]^r[o],o);return i}e.exports=r}).call(this,t(63).Buffer)},{}],90:[function(t,e,r){(function(t){r["RSA-SHA224"]=r.sha224WithRSAEncryption={sign:"rsa",hash:"sha224",id:new t("302d300d06096086480165030402040500041c","hex")},r["RSA-SHA256"]=r.sha256WithRSAEncryption={sign:"rsa",hash:"sha256",id:new t("3031300d060960864801650304020105000420","hex")},r["RSA-SHA384"]=r.sha384WithRSAEncryption={sign:"rsa",hash:"sha384",id:new t("3041300d060960864801650304020205000430","hex")},r["RSA-SHA512"]=r.sha512WithRSAEncryption={sign:"rsa",hash:"sha512",id:new t("3051300d060960864801650304020305000440","hex")},r["RSA-SHA1"]={sign:"rsa",hash:"sha1",id:new t("3021300906052b0e03021a05000414","hex")},r["ecdsa-with-SHA1"]={sign:"ecdsa",hash:"sha1",id:new t("","hex")},r.DSA=r["DSA-SHA1"]=r["DSA-SHA"]={sign:"dsa",hash:"sha1",id:new t("","hex")},r["DSA-SHA224"]=r["DSA-WITH-SHA224"]={sign:"dsa",hash:"sha224",id:new t("","hex")},r["DSA-SHA256"]=r["DSA-WITH-SHA256"]={sign:"dsa",hash:"sha256",id:new t("","hex")},r["DSA-SHA384"]=r["DSA-WITH-SHA384"]={sign:"dsa",hash:"sha384",id:new t("","hex")},r["DSA-SHA512"]=r["DSA-WITH-SHA512"]={sign:"dsa",hash:"sha512",id:new t("","hex")},r["DSA-RIPEMD160"]={sign:"dsa",hash:"rmd160",id:new t("","hex")},r["RSA-RIPEMD160"]=r.ripemd160WithRSA={sign:"rsa",hash:"rmd160",id:new t("3021300906052b2403020105000414","hex")},r["RSA-MD5"]=r.md5WithRSAEncryption={sign:"rsa",hash:"md5",id:new t("3020300c06082a864886f70d020505000410","hex")}}).call(this,t(63).Buffer)},{}],91:[function(t,e){(function(r){function n(t,e){a.Writable.call(this);var r=u[t];if(!r)throw new Error("Unknown message digest");this._hashType=r.hash,this._hash=e.createHash(r.hash),this._tag=r.id,this._crypto=e}function i(t,e){a.Writable.call(this);var r=u[t];if(!r)throw new Error("Unknown message digest");this._hash=e.createHash(r.hash),this._tag=r.id}var o=t(134),s=t(135),a=t(220),h=t(206),c=t(90),u={};Object.keys(c).forEach(function(t){u[t]=u[t.toLowerCase()]=c[t]}),e.exports=function(t,e){function r(t){return new n(t,e)}function o(t){return new i(t,e)}t.createSign=t.Sign=r,t.createVerify=t.Verify=o},h(n,a.Writable),n.prototype._write=function(t,e,r){this._hash.update(t),r()},n.prototype.update=function(t){return this.write(t),this},n.prototype.sign=function(t,e){this.end();var n=this._hash.digest(),i=o(r.concat([this._tag,n]),t,this._hashType,this._crypto);return e&&(i=i.toString(e)),i},h(i,a.Writable),i.prototype._write=function(t,e,r){this._hash.update(t),r()},i.prototype.update=function(t){return this.write(t),this},i.prototype.verify=function(t,e,n){this.end();var i=this._hash.digest();return r.isBuffer(e)||(e=new r(e,n)),s(e,r.concat([this._tag,i]),t)}}).call(this,t(63).Buffer)},{}],92:[function(t,e){function r(t,e){if(!t)throw new Error(e||"Assertion failed")}function n(t,e){t.super_=e;var r=function(){};r.prototype=e.prototype,t.prototype=new r,t.prototype.constructor=t}function i(t,e,r){return null!==t&&"object"==typeof t&&Array.isArray(t.words)?t:(this.sign=!1,this.words=null,this.length=0,this.red=null,("le"===e||"be"===e)&&(r=e,e=10),void(null!==t&&this._init(t||0,e||10,r||"be")))}function o(t,e){this.name=t,this.p=new i(e,16),this.n=this.p.bitLength(),this.k=new i(1).ishln(this.n).isub(this.p),this.tmp=this._tmp()}function s(){o.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function a(){o.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function h(){o.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function c(){o.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function u(t){if("string"==typeof t){var e=i._prime(t);this.m=e.p,this.prime=e}else this.m=t,this.prime=null}function f(t){u.call(this,t),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new i(1).ishln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r.invm(this.m),this.minv=this.rinv.mul(this.r).sub(new i(1)).div(this.m).neg().mod(this.r)}"object"==typeof e&&(e.exports=i),i.BN=i,i.wordSize=26,i.prototype._init=function(t,e,n){if("number"==typeof t)return 0>t&&(this.sign=!0,t=-t),void(67108864>t?(this.words=[67108863&t],this.length=1):(this.words=[67108863&t,t/67108864&67108863],this.length=2));if("object"==typeof t)return this._initArray(t,e,n);"hex"===e&&(e=16),r(e===(0|e)&&e>=2&&36>=e),t=t.toString().replace(/\s+/g,"");var i=0;"-"===t[0]&&i++,16===e?this._parseHex(t,i):this._parseBase(t,e,i),"-"===t[0]&&(this.sign=!0),this.strip()},i.prototype._initArray=function(t,e,n){r("number"==typeof t.length),this.length=Math.ceil(t.length/3),this.words=new Array(this.length);for(var i=0;i<this.length;i++)this.words[i]=0;var o=0;if("be"===n)for(var i=t.length-1,s=0;i>=0;i-=3){var a=t[i]|t[i-1]<<8|t[i-2]<<16;this.words[s]|=a<<o&67108863,this.words[s+1]=a>>>26-o&67108863,o+=24,o>=26&&(o-=26,s++)}else if("le"===n)for(var i=0,s=0;i<t.length;i+=3){var a=t[i]|t[i+1]<<8|t[i+2]<<16;this.words[s]|=a<<o&67108863,this.words[s+1]=a>>>26-o&67108863,o+=24,o>=26&&(o-=26,s++)}return this.strip()},i.prototype._parseHex=function(t,e){this.length=Math.ceil((t.length-e)/6),this.words=new Array(this.length);for(var r=0;r<this.length;r++)this.words[r]=0;for(var n=0,r=t.length-6,i=0;r>=e;r-=6){var o=parseInt(t.slice(r,r+6),16);this.words[i]|=o<<n&67108863,this.words[i+1]|=o>>>26-n&4194303,n+=24,n>=26&&(n-=26,i++)
}if(r+6!==e){var o=parseInt(t.slice(e,r+6),16);this.words[i]|=o<<n&67108863,this.words[i+1]|=o>>>26-n&4194303}this.strip()},i.prototype._parseBase=function(t,e,n){this.words=[0],this.length=1;for(var o=0,s=1,a=0,h=null,c=n;c<t.length;c++){var u,f=t[c];u=10===e||"9">=f?0|f:f>="a"?f.charCodeAt(0)-97+10:f.charCodeAt(0)-65+10,o*=e,o+=u,s*=e,a++,s>1048575&&(r(67108863>=s),h||(h=new i(s)),this.mul(h).copy(this),this.iadd(new i(o)),o=0,s=1,a=0)}0!==a&&(this.mul(new i(s)).copy(this),this.iadd(new i(o)))},i.prototype.copy=function(t){t.words=new Array(this.length);for(var e=0;e<this.length;e++)t.words[e]=this.words[e];t.length=this.length,t.sign=this.sign,t.red=this.red},i.prototype.clone=function(){var t=new i(null);return this.copy(t),t},i.prototype.strip=function(){for(;this.length>1&&0===this.words[this.length-1];)this.length--;return this._normSign()},i.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.sign=!1),this},i.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var d=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],l=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],p=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];i.prototype.toString=function(t,e){if(t=t||10,16===t||"hex"===t){for(var n="",i=0,e=0|e||1,o=0,s=0;s<this.length;s++){var a=this.words[s],h=(16777215&(a<<i|o)).toString(16);o=a>>>24-i&16777215,n=0!==o||s!==this.length-1?d[6-h.length]+h+n:h+n,i+=2,i>=26&&(i-=26,s--)}for(0!==o&&(n=o.toString(16)+n);n.length%e!==0;)n="0"+n;return this.sign&&(n="-"+n),n}if(t===(0|t)&&t>=2&&36>=t){var c=l[t],u=p[t],n="",f=this.clone();for(f.sign=!1;0!==f.cmpn(0);){var v=f.modn(u).toString(t);f=f.idivn(u),n=0!==f.cmpn(0)?d[c-v.length]+v+n:v+n}return 0===this.cmpn(0)&&(n="0"+n),this.sign&&(n="-"+n),n}r(!1,"Base should be between 2 and 36")},i.prototype.toJSON=function(){return this.toString(16)},i.prototype.toArray=function(){this.strip();var t=new Array(this.byteLength());t[0]=0;for(var e=this.clone(),r=0;0!==e.cmpn(0);r++){var n=e.andln(255);e.ishrn(8),t[t.length-r-1]=n}return t},i.prototype._countBits=function(t){return t>=33554432?26:t>=16777216?25:t>=8388608?24:t>=4194304?23:t>=2097152?22:t>=1048576?21:t>=524288?20:t>=262144?19:t>=131072?18:t>=65536?17:t>=32768?16:t>=16384?15:t>=8192?14:t>=4096?13:t>=2048?12:t>=1024?11:t>=512?10:t>=256?9:t>=128?8:t>=64?7:t>=32?6:t>=16?5:t>=8?4:t>=4?3:t>=2?2:t>=1?1:0},i.prototype.bitLength=function(){var t=0,e=this.words[this.length-1],t=this._countBits(e);return 26*(this.length-1)+t},i.prototype.byteLength=function(){this.words[this.length-1];return Math.ceil(this.bitLength()/8)},i.prototype.neg=function(){if(0===this.cmpn(0))return this.clone();var t=this.clone();return t.sign=!this.sign,t},i.prototype.iadd=function(t){if(this.sign&&!t.sign){this.sign=!1;var e=this.isub(t);return this.sign=!this.sign,this._normSign()}if(!this.sign&&t.sign){t.sign=!1;var e=this.isub(t);return t.sign=!0,e._normSign()}var r,n;this.length>t.length?(r=this,n=t):(r=t,n=this);for(var i=0,o=0;o<n.length;o++){var e=r.words[o]+n.words[o]+i;this.words[o]=67108863&e,i=e>>>26}for(;0!==i&&o<r.length;o++){var e=r.words[o]+i;this.words[o]=67108863&e,i=e>>>26}if(this.length=r.length,0!==i)this.words[this.length]=i,this.length++;else if(r!==this)for(;o<r.length;o++)this.words[o]=r.words[o];return this},i.prototype.add=function(t){if(t.sign&&!this.sign){t.sign=!1;var e=this.sub(t);return t.sign=!0,e}if(!t.sign&&this.sign){this.sign=!1;var e=t.sub(this);return this.sign=!0,e}return this.length>t.length?this.clone().iadd(t):t.clone().iadd(this)},i.prototype.isub=function(t){if(t.sign){t.sign=!1;var e=this.iadd(t);return t.sign=!0,e._normSign()}if(this.sign)return this.sign=!1,this.iadd(t),this.sign=!0,this._normSign();var r=this.cmp(t);if(0===r)return this.sign=!1,this.length=1,this.words[0]=0,this;if(r>0)var n=this,i=t;else var n=t,i=this;for(var o=0,s=0;s<i.length;s++){var e=n.words[s]-i.words[s]-o;0>e?(e+=67108864,o=1):o=0,this.words[s]=e}for(;0!==o&&s<n.length;s++){var e=n.words[s]-o;0>e?(e+=67108864,o=1):o=0,this.words[s]=e}if(0===o&&s<n.length&&n!==this)for(;s<n.length;s++)this.words[s]=n.words[s];return this.length=Math.max(this.length,s),n!==this&&(this.sign=!0),this.strip()},i.prototype.sub=function(t){return this.clone().isub(t)},i.prototype._smallMulTo=function(t,e){e.sign=t.sign!==this.sign,e.length=this.length+t.length;for(var r=0,n=0;n<e.length-1;n++){for(var i=r>>>26,o=67108863&r,s=Math.min(n,t.length-1),a=Math.max(0,n-this.length+1);s>=a;a++){var h=n-a,c=0|this.words[h],u=0|t.words[a],f=c*u,d=67108863&f;i=i+(f/67108864|0)|0,d=d+o|0,o=67108863&d,i=i+(d>>>26)|0}e.words[n]=o,r=i}return 0!==r?e.words[n]=r:e.length--,e.strip()},i.prototype._bigMulTo=function(t,e){e.sign=t.sign!==this.sign,e.length=this.length+t.length;for(var r=0,n=0,i=0;i<e.length-1;i++){var o=n;n=0;for(var s=67108863&r,a=Math.min(i,t.length-1),h=Math.max(0,i-this.length+1);a>=h;h++){var c=i-h,u=0|this.words[c],f=0|t.words[h],d=u*f,l=67108863&d;o=o+(d/67108864|0)|0,l=l+s|0,s=67108863&l,o=o+(l>>>26)|0,n+=o>>>26,o&=67108863}e.words[i]=s,r=o,o=n}return 0!==r?e.words[i]=r:e.length--,e.strip()},i.prototype.mulTo=function(t,e){var r;return r=this.length+t.length<63?this._smallMulTo(t,e):this._bigMulTo(t,e)},i.prototype.mul=function(t){var e=new i(null);return e.words=new Array(this.length+t.length),this.mulTo(t,e)},i.prototype.imul=function(t){if(0===this.cmpn(0)||0===t.cmpn(0))return this.words[0]=0,this.length=1,this;var e=this.length,r=t.length;this.sign=t.sign!==this.sign,this.length=this.length+t.length,this.words[this.length-1]=0;for(var n=this.length-2;n>=0;n--){for(var i=0,o=0,s=Math.min(n,r-1),a=Math.max(0,n-e+1);s>=a;a++){var h=n-a,c=this.words[h],u=t.words[a],f=c*u,d=67108863&f;i+=f/67108864|0,d+=o,o=67108863&d,i+=d>>>26}this.words[n]=o,this.words[n+1]+=i,i=0}for(var i=0,h=1;h<this.length;h++){var l=this.words[h]+i;this.words[h]=67108863&l,i=l>>>26}return this.strip()},i.prototype.sqr=function(){return this.mul(this)},i.prototype.isqr=function(){return this.mul(this)},i.prototype.ishln=function(t){r("number"==typeof t&&t>=0);{var e=t%26,n=(t-e)/26,i=67108863>>>26-e<<26-e;this.clone()}if(0!==e){for(var o=0,s=0;s<this.length;s++){var a=this.words[s]&i,h=this.words[s]-a<<e;this.words[s]=h|o,o=a>>>26-e}o&&(this.words[s]=o,this.length++)}if(0!==n){for(var s=this.length-1;s>=0;s--)this.words[s+n]=this.words[s];for(var s=0;n>s;s++)this.words[s]=0;this.length+=n}return this.strip()},i.prototype.ishrn=function(t,e,n){r("number"==typeof t&&t>=0),e=e?(e-e%26)/26:0;var i=t%26,o=Math.min((t-i)/26,this.length),s=67108863^67108863>>>i<<i,a=n;if(e-=o,e=Math.max(0,e),a){for(var h=0;o>h;h++)a.words[h]=this.words[h];a.length=o}if(0===o);else if(this.length>o){this.length-=o;for(var h=0;h<this.length;h++)this.words[h]=this.words[h+o]}else this.words[0]=0,this.length=1;for(var c=0,h=this.length-1;h>=0&&(0!==c||h>=e);h--){var u=this.words[h];this.words[h]=c<<26-i|u>>>i,c=u&s}return a&&0!==c&&(a.words[a.length++]=c),0===this.length&&(this.words[0]=0,this.length=1),this.strip(),n?{hi:this,lo:a}:this},i.prototype.shln=function(t){return this.clone().ishln(t)},i.prototype.shrn=function(t){return this.clone().ishrn(t)},i.prototype.testn=function(t){r("number"==typeof t&&t>=0);var e=t%26,n=(t-e)/26,i=1<<e;if(this.length<=n)return!1;var o=this.words[n];return!!(o&i)},i.prototype.imaskn=function(t){r("number"==typeof t&&t>=0);var e=t%26,n=(t-e)/26;if(r(!this.sign,"imaskn works only with positive numbers"),0!==e&&n++,this.length=Math.min(n,this.length),0!==e){var i=67108863^67108863>>>e<<e;this.words[this.length-1]&=i}return this.strip()},i.prototype.maskn=function(t){return this.clone().imaskn(t)},i.prototype.iaddn=function(t){if(r("number"==typeof t),0>t)return this.isubn(-t);if(this.sign)return 1===this.length&&this.words[0]<t?(this.words[0]=t-this.words[0],this.sign=!1,this):(this.sign=!1,this.isubn(t),this.sign=!0,this);this.words[0]+=t;for(var e=0;e<this.length&&this.words[e]>=67108864;e++)this.words[e]-=67108864,e===this.length-1?this.words[e+1]=1:this.words[e+1]++;return this.length=Math.max(this.length,e+1),this},i.prototype.isubn=function(t){if(r("number"==typeof t),0>t)return this.iaddn(-t);if(this.sign)return this.sign=!1,this.iaddn(t),this.sign=!0,this;this.words[0]-=t;for(var e=0;e<this.length&&this.words[e]<0;e++)this.words[e]+=67108864,this.words[e+1]-=1;return this.strip()},i.prototype.addn=function(t){return this.clone().iaddn(t)},i.prototype.subn=function(t){return this.clone().isubn(t)},i.prototype.iabs=function(){return this.sign=!1,this},i.prototype.abs=function(){return this.clone().iabs()},i.prototype._wordDiv=function(t,e){for(var r=this.length-t.length,n=this.clone(),o=t,s="mod"!==e&&new i(0);n.length>o.length;){var a=67108864*n.words[n.length-1]+n.words[n.length-2],h=a/o.words[o.length-1],c=h/67108864|0,u=67108863&h;h=new i(null),h.words=[u,c],h.length=2;var r=26*(n.length-o.length-1);if(s){var f=h.shln(r);n.sign?s.isub(f):s.iadd(f)}h=h.mul(o).ishln(r),n.sign?n.iadd(h):n.isub(h)}for(;n.ucmp(o)>=0;){var a=n.words[n.length-1],h=new i(a/o.words[o.length-1]|0),r=26*(n.length-o.length);if(s){var f=h.shln(r);n.sign?s.isub(f):s.iadd(f)}h=h.mul(o).ishln(r),n.sign?n.iadd(h):n.isub(h)}return n.sign&&(s&&s.isubn(1),n.iadd(o)),{div:s?s:null,mod:n}},i.prototype.divmod=function(t,e){if(r(0!==t.cmpn(0)),this.sign&&!t.sign){var n,o,s=this.neg().divmod(t,e);return"mod"!==e&&(n=s.div.neg()),"div"!==e&&(o=0===s.mod.cmpn(0)?s.mod:t.sub(s.mod)),{div:n,mod:o}}if(!this.sign&&t.sign){var n,s=this.divmod(t.neg(),e);return"mod"!==e&&(n=s.div.neg()),{div:n,mod:s.mod}}return this.sign&&t.sign?this.neg().divmod(t.neg(),e):t.length>this.length||this.cmp(t)<0?{div:new i(0),mod:this}:1===t.length?"div"===e?{div:this.divn(t.words[0]),mod:null}:"mod"===e?{div:null,mod:new i(this.modn(t.words[0]))}:{div:this.divn(t.words[0]),mod:new i(this.modn(t.words[0]))}:this._wordDiv(t,e)},i.prototype.div=function(t){return this.divmod(t,"div").div},i.prototype.mod=function(t){return this.divmod(t,"mod").mod},i.prototype.divRound=function(t){var e=this.divmod(t);if(0===e.mod.cmpn(0))return e.div;var r=e.div.sign?e.mod.isub(t):e.mod,n=t.shrn(1),i=t.andln(1),o=r.cmp(n);return 0>o||1===i&&0===o?e.div:e.div.sign?e.div.isubn(1):e.div.iaddn(1)},i.prototype.modn=function(t){r(67108863>=t);for(var e=(1<<26)%t,n=0,i=this.length-1;i>=0;i--)n=(e*n+this.words[i])%t;return n},i.prototype.idivn=function(t){r(67108863>=t);for(var e=0,n=this.length-1;n>=0;n--){var i=this.words[n]+67108864*e;this.words[n]=i/t|0,e=i%t}return this.strip()},i.prototype.divn=function(t){return this.clone().idivn(t)},i.prototype._egcd=function(t,e){r(!e.sign),r(0!==e.cmpn(0));var n=this,o=e.clone();n=n.sign?n.mod(e):n.clone();for(var s=new i(0);o.isEven();)o.ishrn(1);for(var a=o.clone();n.cmpn(1)>0&&o.cmpn(1)>0;){for(;n.isEven();)n.ishrn(1),t.isEven()?t.ishrn(1):t.iadd(a).ishrn(1);for(;o.isEven();)o.ishrn(1),s.isEven()?s.ishrn(1):s.iadd(a).ishrn(1);n.cmp(o)>=0?(n.isub(o),t.isub(s)):(o.isub(n),s.isub(t))}return 0===n.cmpn(1)?t:s},i.prototype.gcd=function(t){if(0===this.cmpn(0))return t.clone();if(0===t.cmpn(0))return this.clone();var e=this.clone(),r=t.clone();e.sign=!1,r.sign=!1;for(var n=0;e.isEven()&&r.isEven();n++)e.ishrn(1),r.ishrn(1);for(;e.isEven();)e.ishrn(1);do{for(;r.isEven();)r.ishrn(1);if(e.cmp(r)<0){var i=e;e=r,r=i}e.isub(e.div(r).mul(r))}while(0!==e.cmpn(0)&&0!==r.cmpn(0));return 0===e.cmpn(0)?r.ishln(n):e.ishln(n)},i.prototype.invm=function(t){return this._egcd(new i(1),t).mod(t)},i.prototype.isEven=function(){return 0===(1&this.words[0])},i.prototype.isOdd=function(){return 1===(1&this.words[0])},i.prototype.andln=function(t){return this.words[0]&t},i.prototype.bincn=function(t){r("number"==typeof t);var e=t%26,n=(t-e)/26,i=1<<e;if(this.length<=n){for(var o=this.length;n+1>o;o++)this.words[o]=0;return this.words[n]|=i,this.length=n+1,this}for(var s=i,o=n;0!==s&&o<this.length;o++){var a=this.words[o];a+=s,s=a>>>26,a&=67108863,this.words[o]=a}return 0!==s&&(this.words[o]=s,this.length++),this},i.prototype.cmpn=function(t){var e=0>t;if(e&&(t=-t),this.sign&&!e)return-1;if(!this.sign&&e)return 1;t&=67108863,this.strip();var r;if(this.length>1)r=1;else{var n=this.words[0];r=n===t?0:t>n?-1:1}return this.sign&&(r=-r),r},i.prototype.cmp=function(t){if(this.sign&&!t.sign)return-1;if(!this.sign&&t.sign)return 1;var e=this.ucmp(t);return this.sign?-e:e},i.prototype.ucmp=function(t){if(this.length>t.length)return 1;if(this.length<t.length)return-1;for(var e=0,r=this.length-1;r>=0;r--){var n=this.words[r],i=t.words[r];if(n!==i){i>n?e=-1:n>i&&(e=1);break}}return e},i.red=function(t){return new u(t)},i.prototype.toRed=function(t){return r(!this.red,"Already a number in reduction context"),r(!this.sign,"red works only with positives"),t.convertTo(this)._forceRed(t)},i.prototype.fromRed=function(){return r(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},i.prototype._forceRed=function(t){return this.red=t,this},i.prototype.forceRed=function(t){return r(!this.red,"Already a number in reduction context"),this._forceRed(t)},i.prototype.redAdd=function(t){return r(this.red,"redAdd works only with red numbers"),this.red.add(this,t)},i.prototype.redIAdd=function(t){return r(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,t)},i.prototype.redSub=function(t){return r(this.red,"redSub works only with red numbers"),this.red.sub(this,t)},i.prototype.redISub=function(t){return r(this.red,"redISub works only with red numbers"),this.red.isub(this,t)},i.prototype.redShl=function(t){return r(this.red,"redShl works only with red numbers"),this.red.shl(this,t)},i.prototype.redMul=function(t){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,t),this.red.mul(this,t)},i.prototype.redIMul=function(t){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,t),this.red.imul(this,t)},i.prototype.redSqr=function(){return r(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},i.prototype.redISqr=function(){return r(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},i.prototype.redSqrt=function(){return r(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},i.prototype.redInvm=function(){return r(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},i.prototype.redNeg=function(){return r(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},i.prototype.redPow=function(t){return r(this.red&&!t.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,t)};var v={k256:null,p224:null,p192:null,p25519:null};o.prototype._tmp=function(){var t=new i(null);return t.words=new Array(Math.ceil(this.n/13)),t},o.prototype.ireduce=function(t){var e,r=t;do{var n=r.ishrn(this.n,0,this.tmp);r=this.imulK(n.hi),r=r.iadd(n.lo),e=r.bitLength()}while(e>this.n);var i=e<this.n?-1:r.cmp(this.p);return 0===i?(r.words[0]=0,r.length=1):i>0?r.isub(this.p):r.strip(),r},o.prototype.imulK=function(t){return t.imul(this.k)},n(s,o),s.prototype.imulK=function(t){t.words[t.length]=0,t.words[t.length+1]=0,t.length+=2;for(var e=0,r=0,n=0,i=0;i<t.length;i++){var o=t.words[i];r+=64*o,n+=977*o,r+=n/67108864|0,e+=r/67108864|0,r&=67108863,n&=67108863,t.words[i]=n,n=r,r=e,e=0}return 0===t.words[t.length-1]&&t.length--,0===t.words[t.length-1]&&t.length--,t},n(a,o),n(h,o),n(c,o),c.prototype.imulK=function(t){for(var e=0,r=0;r<t.length;r++){var n=19*t.words[r]+e,i=67108863&n;n>>>=26,t.words[r]=i,e=n}return 0!==e&&(t.words[t.length++]=e),t},i._prime=function t(e){if(v[e])return v[e];var t;if("k256"===e)t=new s;else if("p224"===e)t=new a;else if("p192"===e)t=new h;else{if("p25519"!==e)throw new Error("Unknown prime "+e);t=new c}return v[e]=t,t},u.prototype._verify1=function(t){r(!t.sign,"red works only with positives"),r(t.red,"red works only with red numbers")},u.prototype._verify2=function(t,e){r(!t.sign&&!e.sign,"red works only with positives"),r(t.red&&t.red===e.red,"red works only with red numbers")},u.prototype.imod=function(t){return this.prime?this.prime.ireduce(t)._forceRed(this):t.mod(this.m)._forceRed(this)},u.prototype.neg=function(t){var e=t.clone();return e.sign=!e.sign,e.iadd(this.m)._forceRed(this)},u.prototype.add=function(t,e){this._verify2(t,e);var r=t.add(e);return r.cmp(this.m)>=0&&r.isub(this.m),r._forceRed(this)},u.prototype.iadd=function(t,e){this._verify2(t,e);var r=t.iadd(e);return r.cmp(this.m)>=0&&r.isub(this.m),r},u.prototype.sub=function(t,e){this._verify2(t,e);var r=t.sub(e);return r.cmpn(0)<0&&r.iadd(this.m),r._forceRed(this)},u.prototype.isub=function(t,e){this._verify2(t,e);var r=t.isub(e);return r.cmpn(0)<0&&r.iadd(this.m),r},u.prototype.shl=function(t,e){return this._verify1(t),this.imod(t.shln(e))},u.prototype.imul=function(t,e){return this._verify2(t,e),this.imod(t.imul(e))},u.prototype.mul=function(t,e){return this._verify2(t,e),this.imod(t.mul(e))},u.prototype.isqr=function(t){return this.imul(t,t)},u.prototype.sqr=function(t){return this.mul(t,t)},u.prototype.sqrt=function(t){if(0===t.cmpn(0))return t.clone();var e=this.m.andln(3);if(r(e%2===1),3===e){var n=this.m.add(new i(1)).ishrn(2),o=this.pow(t,n);return o}for(var s=this.m.subn(1),a=0;0!==s.cmpn(0)&&0===s.andln(1);)a++,s.ishrn(1);r(0!==s.cmpn(0));var h=new i(1).toRed(this),c=h.redNeg(),u=this.m.subn(1).ishrn(1),f=this.m.bitLength();for(f=new i(2*f*f).toRed(this);0!==this.pow(f,u).cmp(c);)f.redIAdd(c);for(var d=this.pow(f,s),o=this.pow(t,s.addn(1).ishrn(1)),l=this.pow(t,s),p=a;0!==l.cmp(h);){for(var v=l,b=0;0!==v.cmp(h);b++)v=v.redSqr();r(p>b);var g=this.pow(d,new i(1).ishln(p-b-1));o=o.redMul(g),d=g.redSqr(),l=l.redMul(d),p=b}return o},u.prototype.invm=function(t){var e=t._egcd(new i(1),this.m);return e.sign?(e.sign=!1,this.imod(e).redNeg()):this.imod(e)},u.prototype.pow=function(t,e){for(var r=[],n=e.clone();0!==n.cmpn(0);)r.push(n.andln(1)),n.ishrn(1);for(var i=t,o=0;o<r.length&&0===r[o];o++,i=this.sqr(i));if(++o<r.length)for(var n=this.sqr(i);o<r.length;o++,n=this.sqr(n))0!==r[o]&&(i=this.mul(i,n));return i},u.prototype.convertTo=function(t){return t.clone()},u.prototype.convertFrom=function(t){var e=t.clone();return e.red=null,e},i.mont=function(t){return new f(t)},n(f,u),f.prototype.convertTo=function(t){return this.imod(t.shln(this.shift))},f.prototype.convertFrom=function(t){var e=this.imod(t.mul(this.rinv));return e.red=null,e},f.prototype.imul=function(t,e){if(0===t.cmpn(0)||0===e.cmpn(0))return t.words[0]=0,t.length=1,t;var r=t.imul(e),n=r.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),i=r.isub(n).ishrn(this.shift),o=i;return i.cmp(this.m)>=0?o=i.isub(this.m):i.cmpn(0)<0&&(o=i.iadd(this.m)),o._forceRed(this)},f.prototype.mul=function(t,e){if(0===t.cmpn(0)||0===e.cmpn(0))return new i(0)._forceRed(this);var r=t.mul(e),n=r.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),o=r.isub(n).ishrn(this.shift),s=o;return o.cmp(this.m)>=0?s=o.isub(this.m):o.cmpn(0)<0&&(s=o.iadd(this.m)),s._forceRed(this)},f.prototype.invm=function(t){var e=this.imod(t.invm(this.m).mul(this.r2));return e._forceRed(this)}},{}],93:[function(t,e){(function(r){function n(t,e){var r=o(t,e),n=r.toRed(s.mont(t.modulus)).redPow(new s(t.publicExponent)).fromRed();return{blinder:n,unblinder:r.invm(t.modulus)}}function i(t,e,i){var o=n(e,i),a=e.modulus.byteLength(),h=(s.mont(e.modulus),new s(t).mul(o.blinder).mod(e.modulus)),c=h.toRed(s.mont(e.prime1)),u=h.toRed(s.mont(e.prime2)),f=e.coefficient,d=e.prime1,l=e.prime2,p=c.redPow(e.exponent1),v=u.redPow(e.exponent2);p=p.fromRed(),v=v.fromRed();var b=p.isub(v).imul(f).mod(d);b.imul(l),v.iadd(b);var g=new r(v.imul(o.unblinder).mod(e.modulus).toArray());if(g.length<a){var y=new r(a-g.length);y.fill(0),g=r.concat([y,g],a)}return g}function o(t,e){for(var r=t.modulus.byteLength(),n=new s(e.randomBytes(r));n.cmp(t.modulus)>=0||!n.mod(t.prime1)||!n.mod(t.prime2);)n=new s(e.randomBytes(r));return n}var s=t(92);e.exports=i,i.getr=o}).call(this,t(63).Buffer)},{}],94:[function(t,e,r){var n=r;n.version=t(113).version,n.utils=t(105),n.rand=t(106),n.hmacDRBG=t(104),n.curve=t(97),n.curves=t(100),n.ec=t(101)},{}],95:[function(t,e){function r(t,e){this.type=t,this.p=new i(e.p,16),this.red=e.prime?i.red(e.prime):i.mont(this.p),this.zero=new i(0).toRed(this.red),this.one=new i(1).toRed(this.red),this.two=new i(2).toRed(this.red),this.n=e.n&&new i(e.n,16),this.g=e.g&&this.pointFromJSON(e.g,e.gRed),this._wnafT1=new Array(4),this._wnafT2=new Array(4),this._wnafT3=new Array(4),this._wnafT4=new Array(4)}function n(t,e){this.curve=t,this.type=e,this.precomputed=null}var i=t(92),o=t(94),s=o.utils.getNAF,a=o.utils.getJSF,h=o.utils.assert;e.exports=r,r.prototype.point=function(){throw new Error("Not implemented")},r.prototype.validate=function(){throw new Error("Not implemented")},r.prototype._fixedNafMul=function(t,e){var r=t._getDoubles(),n=s(e,1),i=(1<<r.step+1)-(r.step%2===0?2:1);i/=3;for(var o=[],a=0;a<n.length;a+=r.step){for(var h=0,e=a+r.step-1;e>=a;e--)h=(h<<1)+n[e];o.push(h)}for(var c=this.jpoint(null,null,null),u=this.jpoint(null,null,null),f=i;f>0;f--){for(var a=0;a<o.length;a++){var h=o[a];h===f?u=u.mixedAdd(r.points[a]):h===-f&&(u=u.mixedAdd(r.points[a].neg()))}c=c.add(u)}return c.toP()},r.prototype._wnafMul=function(t,e){var r=4,n=t._getNAFPoints(r);r=n.wnd;for(var i=n.points,o=s(e,r),a=this.jpoint(null,null,null),c=o.length-1;c>=0;c--){for(var e=0;c>=0&&0===o[c];c--)e++;if(c>=0&&e++,a=a.dblp(e),0>c)break;var u=o[c];h(0!==u),a="affine"===t.type?a.mixedAdd(u>0?i[u-1>>1]:i[-u-1>>1].neg()):a.add(u>0?i[u-1>>1]:i[-u-1>>1].neg())}return"affine"===t.type?a.toP():a},r.prototype._wnafMulAdd=function(t,e,r,n){for(var i=this._wnafT1,o=this._wnafT2,h=this._wnafT3,c=0,u=0;n>u;u++){var f=e[u],d=f._getNAFPoints(t);i[u]=d.wnd,o[u]=d.points}for(var u=n-1;u>=1;u-=2){var l=u-1,p=u;if(1===i[l]&&1===i[p]){var v=[e[l],null,null,e[p]];0===e[l].y.cmp(e[p].y)?(v[1]=e[l].add(e[p]),v[2]=e[l].toJ().mixedAdd(e[p].neg())):0===e[l].y.cmp(e[p].y.redNeg())?(v[1]=e[l].toJ().mixedAdd(e[p]),v[2]=e[l].add(e[p].neg())):(v[1]=e[l].toJ().mixedAdd(e[p]),v[2]=e[l].toJ().mixedAdd(e[p].neg()));var b=[-3,-1,-5,-7,0,7,5,1,3],g=a(r[l],r[p]);c=Math.max(g[0].length,c),h[l]=new Array(c),h[p]=new Array(c);for(var y=0;c>y;y++){var m=0|g[0][y],w=0|g[1][y];h[l][y]=b[3*(m+1)+(w+1)],h[p][y]=0,o[l]=v}}else h[l]=s(r[l],i[l]),h[p]=s(r[p],i[p]),c=Math.max(h[l].length,c),c=Math.max(h[p].length,c)}for(var x=this.jpoint(null,null,null),_=this._wnafT4,u=c;u>=0;u--){for(var S=0;u>=0;){for(var T=!0,y=0;n>y;y++)_[y]=0|h[y][u],0!==_[y]&&(T=!1);if(!T)break;S++,u--}if(u>=0&&S++,x=x.dblp(S),0>u)break;for(var y=0;n>y;y++){var f,A=_[y];0!==A&&(A>0?f=o[y][A-1>>1]:0>A&&(f=o[y][-A-1>>1].neg()),x="affine"===f.type?x.mixedAdd(f):x.add(f))}}for(var u=0;n>u;u++)o[u]=null;return x.toP()},r.BasePoint=n,n.prototype.validate=function(){return this.curve.validate(this)},n.prototype.precompute=function(t){if(this.precomputed)return this;var e={doubles:null,naf:null,beta:null};return e.naf=this._getNAFPoints(8),e.doubles=this._getDoubles(4,t),e.beta=this._getBeta(),this.precomputed=e,this},n.prototype._getDoubles=function(t,e){if(this.precomputed&&this.precomputed.doubles)return this.precomputed.doubles;for(var r=[this],n=this,i=0;e>i;i+=t){for(var o=0;t>o;o++)n=n.dbl();r.push(n)}return{step:t,points:r}},n.prototype._getNAFPoints=function(t){if(this.precomputed&&this.precomputed.naf)return this.precomputed.naf;for(var e=[this],r=(1<<t)-1,n=1===r?null:this.dbl(),i=1;r>i;i++)e[i]=e[i-1].add(n);return{wnd:t,points:e}},n.prototype._getBeta=function(){return null},n.prototype.dblp=function(t){for(var e=this,r=0;t>r;r++)e=e.dbl();return e}},{}],96:[function(t,e){function r(t){this.twisted=1!=t.a,this.mOneA=this.twisted&&-1==t.a,this.extended=this.mOneA,h.call(this,"mont",t),this.a=new s(t.a,16).mod(this.red.m).toRed(this.red),this.c=new s(t.c,16).toRed(this.red),this.c2=this.c.redSqr(),this.d=new s(t.d,16).toRed(this.red),this.dd=this.d.redAdd(this.d),c(!this.twisted||0===this.c.fromRed().cmpn(1)),this.oneC=1==t.c}function n(t,e,r,n,i){h.BasePoint.call(this,t,"projective"),null===e&&null===r&&null===n?(this.x=this.curve.zero,this.y=this.curve.one,this.z=this.curve.one,this.t=this.curve.zero,this.zOne=!0):(this.x=new s(e,16),this.y=new s(r,16),this.z=n?new s(n,16):this.curve.one,this.t=i&&new s(i,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.t&&!this.t.red&&(this.t=this.t.toRed(this.curve.red)),this.zOne=this.z===this.curve.one,this.curve.extended&&!this.t&&(this.t=this.x.redMul(this.y),this.zOne||(this.t=this.t.redMul(this.z.redInvm()))))}var i=t(97),o=t(94),s=t(92),a=t(206),h=i.base,c=(o.utils.getNAF,o.utils.assert);a(r,h),e.exports=r,r.prototype._mulA=function(t){return this.mOneA?t.redNeg():this.a.redMul(t)},r.prototype._mulC=function(t){return this.oneC?t:this.c.redMul(t)},r.prototype.point=function(t,e,r,i){return new n(this,t,e,r,i)},r.prototype.jpoint=function(t,e,r,n){return this.point(t,e,r,n)},r.prototype.pointFromJSON=function(t){return n.fromJSON(this,t)},r.prototype.pointFromX=function(t,e){e=new s(e,16),e.red||(e=e.toRed(this.red));var r=e.redSqr(),n=this.c2.redSub(this.a.redMul(r)),o=this.one.redSub(this.c2.redMul(this.d).redMul(r)),a=n.redMul(o.redInvm()).redSqrt(),h=a.fromRed().isOdd();return(t&&!h||!t&&h)&&(a=a.redNeg()),this.point(e,a,i.one)},r.prototype.validate=function(t){if(t.isInfinity())return!0;t.normalize();var e=t.x.redSqr(),r=t.y.redSqr(),n=e.redMul(this.a).redAdd(r),i=this.c2.redMul(this.one.redAdd(this.d.redMul(e).redMul(r)));return 0===n.cmp(i)},a(n,h.BasePoint),n.fromJSON=function(t,e){return new n(t,e[0],e[1],e[2])},n.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"},n.prototype.isInfinity=function(){return 0===this.x.cmpn(0)&&0===this.y.cmp(this.z)},n.prototype._extDbl=function(){var t=this.x.redSqr(),e=this.y.redSqr(),r=this.z.redSqr();r=r.redIAdd(r);var n=this.curve._mulA(t),i=this.x.redAdd(this.y).redSqr().redISub(t).redISub(e),o=n.redAdd(e),s=o.redSub(r),a=n.redSub(e),h=i.redMul(s),c=o.redMul(a),u=i.redMul(a),f=s.redMul(o);return this.curve.point(h,c,f,u)},n.prototype._projDbl=function(){var t=this.x.redAdd(this.y).redSqr(),e=this.x.redSqr(),r=this.y.redSqr();if(this.curve.twisted){var n=this.curve._mulA(e),i=n.redAdd(r);if(this.zOne)var o=t.redSub(e).redSub(r).redMul(i.redSub(this.curve.two)),s=i.redMul(n.redSub(r)),a=i.redSqr().redSub(i).redSub(i);else var h=this.z.redSqr(),c=i.redSub(h).redISub(h),o=t.redSub(e).redISub(r).redMul(c),s=i.redMul(n.redSub(r)),a=i.redMul(c)}else var n=e.redAdd(r),h=this.curve._mulC(redMul(this.z)).redSqr(),c=n.redSub(h).redSub(h),o=this.curve._mulC(t.redISub(n)).redMul(c),s=this.curve._mulC(n).redMul(e.redISub(r)),a=n.redMul(c);return this.curve.point(o,s,a)},n.prototype.dbl=function(){return this.isInfinity()?this:this.curve.extended?this._extDbl():this._projDbl()},n.prototype._extAdd=function(t){var e=this.y.redSub(this.x).redMul(t.y.redSub(t.x)),r=this.y.redAdd(this.x).redMul(t.y.redAdd(t.x)),n=this.t.redMul(this.curve.dd).redMul(t.t),i=this.z.redMul(t.z.redAdd(t.z)),o=r.redSub(e),s=i.redSub(n),a=i.redAdd(n),h=r.redAdd(e),c=o.redMul(s),u=a.redMul(h),f=o.redMul(h),d=s.redMul(a);return this.curve.point(c,u,d,f)},n.prototype._projAdd=function(t){var e=this.z.redMul(t.z),r=e.redSqr(),n=this.x.redMul(t.x),i=this.y.redMul(t.y),o=this.curve.d.redMul(n).redMul(i),s=r.redSub(o),a=r.redAdd(o),h=this.x.redAdd(this.y).redMul(t.x.redAdd(t.y)).redISub(n).redISub(i),c=e.redMul(s).redMul(h);if(this.curve.twisted)var u=e.redMul(a).redMul(i.redSub(this.curve._mulA(n))),f=s.redMul(a);else var u=e.redMul(a).redMul(i.redSub(n)),f=this.curve._mulC(s).redMul(a);return this.curve.point(c,u,f)},n.prototype.add=function(t){return this.isInfinity()?t:t.isInfinity()?this:this.curve.extended?this._extAdd(t):this._projAdd(t)},n.prototype.mul=function(t){return this.precomputed&&this.precomputed.doubles?this.curve._fixedNafMul(this,t):this.curve._wnafMul(this,t)},n.prototype.mulAdd=function(t,e,r){return this.curve._wnafMulAdd(1,[this,e],[t,r],2)},n.prototype.normalize=function(){if(this.zOne)return this;var t=this.z.redInvm();return this.x=this.x.redMul(t),this.y=this.y.redMul(t),this.t&&(this.t=this.t.redMul(t)),this.z=this.curve.one,this.zOne=!0,this},n.prototype.neg=function(){return this.curve.point(this.x.redNeg(),this.y,this.z,this.t&&this.t.redNeg())},n.prototype.getX=function(){return this.normalize(),this.x.fromRed()},n.prototype.getY=function(){return this.normalize(),this.y.fromRed()},n.prototype.toP=n.prototype.normalize,n.prototype.mixedAdd=n.prototype.add},{}],97:[function(t,e,r){var n=r;n.base=t(95),n.short=t(99),n.mont=t(98),n.edwards=t(96)},{}],98:[function(t,e){function r(t){h.call(this,"mont",t),this.a=new s(t.a,16).toRed(this.red),this.b=new s(t.b,16).toRed(this.red),this.i4=new s(4).toRed(this.red).redInvm(),this.two=new s(2).toRed(this.red),this.a24=this.i4.redMul(this.a.redAdd(this.two))}function n(t,e,r){h.BasePoint.call(this,t,"projective"),null===e&&null===r?(this.x=this.curve.one,this.z=this.curve.zero):(this.x=new s(e,16),this.z=new s(r,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)))}{var i=t(97),o=t(94),s=t(92),a=t(206),h=i.base;o.utils.getNAF,o.utils.assert}a(r,h),e.exports=r,r.prototype.point=function(t,e){return new n(this,t,e)},r.prototype.pointFromJSON=function(t){return n.fromJSON(this,t)},r.prototype.validate=function(t){var e=t.normalize().x,r=e.redSqr(),n=r.redMul(e).redAdd(r.redMul(this.a)).redAdd(e),i=n.redSqrt();return 0===i.redSqr().cmp(n)},a(n,h.BasePoint),n.prototype.precompute=function(){},n.fromJSON=function(t,e){return new n(t,e[0],e[1]||t.one)},n.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"},n.prototype.isInfinity=function(){return 0===this.z.cmpn(0)},n.prototype.dbl=function(){var t=this.x.redAdd(this.z),e=t.redSqr(),r=this.x.redSub(this.z),n=r.redSqr(),i=e.redSub(n),o=e.redMul(n),s=i.redMul(n.redAdd(this.curve.a24.redMul(i)));return this.curve.point(o,s)},n.prototype.add=function(){throw new Error("Not supported on Montgomery curve")},n.prototype.diffAdd=function(t,e){var r=this.x.redAdd(this.z),n=this.x.redSub(this.z),i=t.x.redAdd(t.z),o=t.x.redSub(t.z),s=o.redMul(r),a=i.redMul(n),h=e.z.redMul(s.redAdd(a).redSqr()),c=e.x.redMul(s.redISub(a).redSqr());return this.curve.point(h,c)},n.prototype.mul=function(t){for(var e=t.clone(),r=this,n=this.curve.point(null,null),i=this,o=[];0!==e.cmpn(0);e.ishrn(1))o.push(e.andln(1));for(var s=o.length-1;s>=0;s--)0===o[s]?(r=r.diffAdd(n,i),n=n.dbl()):(n=r.diffAdd(n,i),r=r.dbl());return n},n.prototype.mulAdd=function(){throw new Error("Not supported on Montgomery curve")},n.prototype.normalize=function(){return this.x=this.x.redMul(this.z.redInvm()),this.z=this.curve.one,this},n.prototype.getX=function(){return this.normalize(),this.x.fromRed()}},{}],99:[function(t,e){function r(t){c.call(this,"short",t),this.a=new a(t.a,16).toRed(this.red),this.b=new a(t.b,16).toRed(this.red),this.tinv=this.two.redInvm(),this.zeroA=0===this.a.fromRed().cmpn(0),this.threeA=0===this.a.fromRed().sub(this.p).cmpn(-3),this.endo=this._getEndomorphism(t),this._endoWnafT1=new Array(4),this._endoWnafT2=new Array(4)
}function n(t,e,r,n){c.BasePoint.call(this,t,"affine"),null===e&&null===r?(this.x=null,this.y=null,this.inf=!0):(this.x=new a(e,16),this.y=new a(r,16),n&&(this.x.forceRed(this.curve.red),this.y.forceRed(this.curve.red)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.inf=!1)}function i(t,e,r,n){c.BasePoint.call(this,t,"jacobian"),null===e&&null===r&&null===n?(this.x=this.curve.one,this.y=this.curve.one,this.z=new a(0)):(this.x=new a(e,16),this.y=new a(r,16),this.z=new a(n,16)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.zOne=this.z===this.curve.one}var o=t(97),s=t(94),a=t(92),h=t(206),c=o.base,u=(s.utils.getNAF,s.utils.assert);h(r,c),e.exports=r,r.prototype._getEndomorphism=function(t){if(this.zeroA&&this.g&&this.n&&1===this.p.modn(3)){var e,r;if(t.beta)e=new a(t.beta,16).toRed(this.red);else{var n=this._getEndoRoots(this.p);e=n[0].cmp(n[1])<0?n[0]:n[1],e=e.toRed(this.red)}if(t.lambda)r=new a(t.lambda,16);else{var i=this._getEndoRoots(this.n);0===this.g.mul(i[0]).x.cmp(this.g.x.redMul(e))?r=i[0]:(r=i[1],u(0===this.g.mul(r).x.cmp(this.g.x.redMul(e))))}var o;return o=t.basis?t.basis.map(function(t){return{a:new a(t.a,16),b:new a(t.b,16)}}):this._getEndoBasis(r),{beta:e,lambda:r,basis:o}}},r.prototype._getEndoRoots=function(t){var e=t===this.p?this.red:a.mont(t),r=new a(2).toRed(e).redInvm(),n=r.redNeg(),i=(new a(1).toRed(e),new a(3).toRed(e).redNeg().redSqrt().redMul(r)),o=n.redAdd(i).fromRed(),s=n.redSub(i).fromRed();return[o,s]},r.prototype._getEndoBasis=function(t){for(var e,r,n,i,o,s,h,c=this.n.shrn(Math.floor(this.n.bitLength()/2)),u=t,f=this.n.clone(),d=new a(1),l=new a(0),p=new a(0),v=new a(1),b=0;0!==u.cmpn(0);){var g=f.div(u),y=f.sub(g.mul(u)),m=p.sub(g.mul(d)),w=v.sub(g.mul(l));if(!n&&y.cmp(c)<0)e=h.neg(),r=d,n=y.neg(),i=m;else if(n&&2===++b)break;h=y,f=u,u=y,p=d,d=m,v=l,l=w}o=y.neg(),s=m;var x=n.sqr().add(i.sqr()),_=o.sqr().add(s.sqr());return _.cmp(x)>=0&&(o=e,s=r),n.sign&&(n=n.neg(),i=i.neg()),o.sign&&(o=o.neg(),s=s.neg()),[{a:n,b:i},{a:o,b:s}]},r.prototype._endoSplit=function(t){var e=this.endo.basis,r=e[0],n=e[1],i=n.b.mul(t).divRound(this.n),o=r.b.neg().mul(t).divRound(this.n),s=i.mul(r.a),a=o.mul(n.a),h=i.mul(r.b),c=o.mul(n.b),u=t.sub(s).sub(a),f=h.add(c).neg();return{k1:u,k2:f}},r.prototype.point=function(t,e,r){return new n(this,t,e,r)},r.prototype.pointFromX=function(t,e){e=new a(e,16),e.red||(e=e.toRed(this.red));var r=e.redSqr().redMul(e).redIAdd(e.redMul(this.a)).redIAdd(this.b),n=r.redSqrt(),i=n.fromRed().isOdd();return(t&&!i||!t&&i)&&(n=n.redNeg()),this.point(e,n)},r.prototype.jpoint=function(t,e,r){return new i(this,t,e,r)},r.prototype.pointFromJSON=function(t,e){return n.fromJSON(this,t,e)},r.prototype.validate=function(t){if(t.inf)return!0;var e=t.x,r=t.y,n=this.a.redMul(e),i=e.redSqr().redMul(e).redIAdd(n).redIAdd(this.b);return 0===r.redSqr().redISub(i).cmpn(0)},r.prototype._endoWnafMulAdd=function(t,e){for(var r=this._endoWnafT1,n=this._endoWnafT2,i=0;i<t.length;i++){var o=this._endoSplit(e[i]),s=t[i],a=s._getBeta();o.k1.sign&&(o.k1.sign=!o.k1.sign,s=s.neg(!0)),o.k2.sign&&(o.k2.sign=!o.k2.sign,a=a.neg(!0)),r[2*i]=s,r[2*i+1]=a,n[2*i]=o.k1,n[2*i+1]=o.k2}for(var h=this._wnafMulAdd(1,r,n,2*i),c=0;2*i>c;c++)r[c]=null,n[c]=null;return h},h(n,c.BasePoint),n.prototype._getBeta=function(){function t(t){return n.point(t.x.redMul(n.endo.beta),t.y)}if(this.curve.endo){var e=this.precomputed;if(e&&e.beta)return e.beta;var r=this.curve.point(this.x.redMul(this.curve.endo.beta),this.y);if(e){var n=this.curve;e.beta=r,r.precomputed={beta:null,naf:e.naf&&{wnd:e.naf.wnd,points:e.naf.points.map(t)},doubles:e.doubles&&{step:e.doubles.step,points:e.doubles.points.map(t)}}}return r}},n.prototype.toJSON=function(){return this.precomputed?[this.x,this.y,this.precomputed&&{doubles:this.precomputed.doubles&&{step:this.precomputed.doubles.step,points:this.precomputed.doubles.points.slice(1)},naf:this.precomputed.naf&&{wnd:this.precomputed.naf.wnd,points:this.precomputed.naf.points.slice(1)}}]:[this.x,this.y]},n.fromJSON=function(t,e,r){function n(e){return t.point(e[0],e[1],r)}"string"==typeof e&&(e=JSON.parse(e));var i=t.point(e[0],e[1],r);if(!e[2])return i;var o=e[2];return i.precomputed={beta:null,doubles:o.doubles&&{step:o.doubles.step,points:[i].concat(o.doubles.points.map(n))},naf:o.naf&&{wnd:o.naf.wnd,points:[i].concat(o.naf.points.map(n))}},i},n.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+">"},n.prototype.isInfinity=function(){return this.inf},n.prototype.add=function(t){if(this.inf)return t;if(t.inf)return this;if(this.eq(t))return this.dbl();if(this.neg().eq(t))return this.curve.point(null,null);if(0===this.x.cmp(t.x))return this.curve.point(null,null);var e=this.y.redSub(t.y);0!==e.cmpn(0)&&(e=e.redMul(this.x.redSub(t.x).redInvm()));var r=e.redSqr().redISub(this.x).redISub(t.x),n=e.redMul(this.x.redSub(r)).redISub(this.y);return this.curve.point(r,n)},n.prototype.dbl=function(){if(this.inf)return this;var t=this.y.redAdd(this.y);if(0===t.cmpn(0))return this.curve.point(null,null);var e=this.curve.a,r=this.x.redSqr(),n=t.redInvm(),i=r.redAdd(r).redIAdd(r).redIAdd(e).redMul(n),o=i.redSqr().redISub(this.x.redAdd(this.x)),s=i.redMul(this.x.redSub(o)).redISub(this.y);return this.curve.point(o,s)},n.prototype.getX=function(){return this.x.fromRed()},n.prototype.getY=function(){return this.y.fromRed()},n.prototype.mul=function(t){return t=new a(t,16),this.precomputed&&this.precomputed.doubles?this.curve._fixedNafMul(this,t):this.curve.endo?this.curve._endoWnafMulAdd([this],[t]):this.curve._wnafMul(this,t)},n.prototype.mulAdd=function(t,e,r){var n=[this,e],i=[t,r];return this.curve.endo?this.curve._endoWnafMulAdd(n,i):this.curve._wnafMulAdd(1,n,i,2)},n.prototype.eq=function(t){return this===t||this.inf===t.inf&&(this.inf||0===this.x.cmp(t.x)&&0===this.y.cmp(t.y))},n.prototype.neg=function(t){function e(t){return t.neg()}if(this.inf)return this;var r=this.curve.point(this.x,this.y.redNeg());if(t&&this.precomputed){var n=this.precomputed;r.precomputed={naf:n.naf&&{wnd:n.naf.wnd,points:n.naf.points.map(e)},doubles:n.doubles&&{step:n.doubles.step,points:n.doubles.points.map(e)}}}return r},n.prototype.toJ=function(){if(this.inf)return this.curve.jpoint(null,null,null);var t=this.curve.jpoint(this.x,this.y,this.curve.one);return t},h(i,c.BasePoint),i.prototype.toP=function(){if(this.isInfinity())return this.curve.point(null,null);var t=this.z.redInvm(),e=t.redSqr(),r=this.x.redMul(e),n=this.y.redMul(e).redMul(t);return this.curve.point(r,n)},i.prototype.neg=function(){return this.curve.jpoint(this.x,this.y.redNeg(),this.z)},i.prototype.add=function(t){if(this.isInfinity())return t;if(t.isInfinity())return this;var e=t.z.redSqr(),r=this.z.redSqr(),n=this.x.redMul(e),i=t.x.redMul(r),o=this.y.redMul(e.redMul(t.z)),s=t.y.redMul(r.redMul(this.z)),a=n.redSub(i),h=o.redSub(s);if(0===a.cmpn(0))return 0!==h.cmpn(0)?this.curve.jpoint(null,null,null):this.dbl();var c=a.redSqr(),u=c.redMul(a),f=n.redMul(c),d=h.redSqr().redIAdd(u).redISub(f).redISub(f),l=h.redMul(f.redISub(d)).redISub(o.redMul(u)),p=this.z.redMul(t.z).redMul(a);return this.curve.jpoint(d,l,p)},i.prototype.mixedAdd=function(t){if(this.isInfinity())return t.toJ();if(t.isInfinity())return this;var e=this.z.redSqr(),r=this.x,n=t.x.redMul(e),i=this.y,o=t.y.redMul(e).redMul(this.z),s=r.redSub(n),a=i.redSub(o);if(0===s.cmpn(0))return 0!==a.cmpn(0)?this.curve.jpoint(null,null,null):this.dbl();var h=s.redSqr(),c=h.redMul(s),u=r.redMul(h),f=a.redSqr().redIAdd(c).redISub(u).redISub(u),d=a.redMul(u.redISub(f)).redISub(i.redMul(c)),l=this.z.redMul(s);return this.curve.jpoint(f,d,l)},i.prototype.dblp=function(t){if(0===t)return this;if(this.isInfinity())return this;if(!t)return this.dbl();if(this.curve.zeroA||this.curve.threeA){for(var e=this,r=0;t>r;r++)e=e.dbl();return e}for(var n=this.curve.a,i=this.curve.tinv,o=this.x,s=this.y,a=this.z,h=a.redSqr().redSqr(),c=s.redAdd(s),r=0;t>r;r++){var u=o.redSqr(),f=c.redSqr(),d=f.redSqr(),l=u.redAdd(u).redIAdd(u).redIAdd(n.redMul(h)),p=o.redMul(f),v=l.redSqr().redISub(p.redAdd(p)),b=p.redISub(v),g=l.redMul(b);g=g.redIAdd(g).redISub(d);var y=c.redMul(a);t>r+1&&(h=h.redMul(d)),o=v,a=y,c=g}return this.curve.jpoint(o,c.redMul(i),a)},i.prototype.dbl=function(){return this.isInfinity()?this:this.curve.zeroA?this._zeroDbl():this.curve.threeA?this._threeDbl():this._dbl()},i.prototype._zeroDbl=function(){if(this.zOne){var t=this.x.redSqr(),e=this.y.redSqr(),r=e.redSqr(),n=this.x.redAdd(e).redSqr().redISub(t).redISub(r);n=n.redIAdd(n);var i=t.redAdd(t).redIAdd(t),o=i.redSqr().redISub(n).redISub(n),s=r.redIAdd(r);s=s.redIAdd(s),s=s.redIAdd(s);var a=o,h=i.redMul(n.redISub(o)).redISub(s),c=this.y.redAdd(this.y)}else{var u=this.x.redSqr(),f=this.y.redSqr(),d=f.redSqr(),l=this.x.redAdd(f).redSqr().redISub(u).redISub(d);l=l.redIAdd(l);var p=u.redAdd(u).redIAdd(u),v=p.redSqr(),b=d.redIAdd(d);b=b.redIAdd(b),b=b.redIAdd(b);var a=v.redISub(l).redISub(l),h=p.redMul(l.redISub(a)).redISub(b),c=this.y.redMul(this.z);c=c.redIAdd(c)}return this.curve.jpoint(a,h,c)},i.prototype._threeDbl=function(){if(this.zOne){var t=this.x.redSqr(),e=this.y.redSqr(),r=e.redSqr(),n=this.x.redAdd(e).redSqr().redISub(t).redISub(r);n=n.redIAdd(n);var i=t.redAdd(t).redIAdd(t).redIAdd(this.curve.a),o=i.redSqr().redISub(n).redISub(n),s=o,a=r.redIAdd(r);a=a.redIAdd(a),a=a.redIAdd(a);var h=i.redMul(n.redISub(o)).redISub(a),c=this.y.redAdd(this.y)}else{var u=this.z.redSqr(),f=this.y.redSqr(),d=this.x.redMul(f),l=this.x.redSub(u).redMul(this.x.redAdd(u));l=l.redAdd(l).redIAdd(l);var p=d.redIAdd(d);p=p.redIAdd(p);var v=p.redAdd(p),s=l.redSqr().redISub(v),c=this.y.redAdd(this.z).redSqr().redISub(f).redISub(u),b=f.redSqr();b=b.redIAdd(b),b=b.redIAdd(b),b=b.redIAdd(b);var h=l.redMul(p.redISub(s)).redISub(b)}return this.curve.jpoint(s,h,c)},i.prototype._dbl=function(){var t=this.curve.a,e=(this.curve.tinv,this.x),r=this.y,n=this.z,i=n.redSqr().redSqr(),o=e.redSqr(),s=r.redSqr(),a=o.redAdd(o).redIAdd(o).redIAdd(t.redMul(i)),h=e.redAdd(e);h=h.redIAdd(h);var c=h.redMul(s),u=a.redSqr().redISub(c.redAdd(c)),f=c.redISub(u),d=s.redSqr();d=d.redIAdd(d),d=d.redIAdd(d),d=d.redIAdd(d);var l=a.redMul(f).redISub(d),p=r.redAdd(r).redMul(n);return this.curve.jpoint(u,l,p)},i.prototype.trpl=function(){if(!this.curve.zeroA)return this.dbl().add(this);var t=this.x.redSqr(),e=this.y.redSqr(),r=this.z.redSqr(),n=e.redSqr(),i=t.redAdd(t).redIAdd(t),o=i.redSqr(),s=this.x.redAdd(e).redSqr().redISub(t).redISub(n);s=s.redIAdd(s),s=s.redAdd(s).redIAdd(s),s=s.redISub(o);var a=s.redSqr(),h=n.redIAdd(n);h=h.redIAdd(h),h=h.redIAdd(h),h=h.redIAdd(h);var c=i.redIAdd(s).redSqr().redISub(o).redISub(a).redISub(h),u=e.redMul(c);u=u.redIAdd(u),u=u.redIAdd(u);var f=this.x.redMul(a).redISub(u);f=f.redIAdd(f),f=f.redIAdd(f);var d=this.y.redMul(c.redMul(h.redISub(c)).redISub(s.redMul(a)));d=d.redIAdd(d),d=d.redIAdd(d),d=d.redIAdd(d);var l=this.z.redAdd(s).redSqr().redISub(r).redISub(a);return this.curve.jpoint(f,d,l)},i.prototype.mul=function(t,e){return t=new a(t,e),this.curve._wnafMul(this,t)},i.prototype.eq=function(t){if("affine"===t.type)return this.eq(t.toJ());if(this===t)return!0;var e=this.z.redSqr(),r=t.z.redSqr();if(0!==this.x.redMul(r).redISub(t.x.redMul(e)).cmpn(0))return!1;var n=e.redMul(this.z),i=r.redMul(t.z);return 0===this.y.redMul(i).redISub(t.y.redMul(n)).cmpn(0)},i.prototype.inspect=function(){return this.isInfinity()?"<EC JPoint Infinity>":"<EC JPoint x: "+this.x.toString(16,2)+" y: "+this.y.toString(16,2)+" z: "+this.z.toString(16,2)+">"},i.prototype.isInfinity=function(){return 0===this.z.cmpn(0)}},{}],100:[function(t,e,r){function n(t){this.curve="short"===t.type?new a.curve.short(t):"edwards"===t.type?new a.curve.edwards(t):new a.curve.mont(t),this.g=this.curve.g,this.n=this.curve.n,this.hash=t.hash,h(this.g.validate(),"Invalid curve"),h(this.g.mul(this.n).isInfinity(),"Invalid curve, G*N != O")}function i(t,e){Object.defineProperty(o,t,{configurable:!0,enumerable:!0,get:function(){var r=new n(e);return Object.defineProperty(o,t,{configurable:!0,enumerable:!0,value:r}),r}})}var o=r,s=t(107),a=(t(92),t(94)),h=a.utils.assert;o.PresetCurve=n,i("p192",{type:"short",prime:"p192",p:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff",a:"ffffffff ffffffff ffffffff fffffffe ffffffff fffffffc",b:"64210519 e59c80e7 0fa7e9ab 72243049 feb8deec c146b9b1",n:"ffffffff ffffffff ffffffff 99def836 146bc9b1 b4d22831",hash:s.sha256,gRed:!1,g:["188da80e b03090f6 7cbf20eb 43a18800 f4ff0afd 82ff1012","07192b95 ffc8da78 631011ed 6b24cdd5 73f977a1 1e794811"]}),i("p224",{type:"short",prime:"p224",p:"ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001",a:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff fffffffe",b:"b4050a85 0c04b3ab f5413256 5044b0b7 d7bfd8ba 270b3943 2355ffb4",n:"ffffffff ffffffff ffffffff ffff16a2 e0b8f03e 13dd2945 5c5c2a3d",hash:s.sha256,gRed:!1,g:["b70e0cbd 6bb4bf7f 321390b9 4a03c1d3 56c21122 343280d6 115c1d21","bd376388 b5f723fb 4c22dfe6 cd4375a0 5a074764 44d58199 85007e34"]}),i("p256",{type:"short",prime:null,p:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff ffffffff",a:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff fffffffc",b:"5ac635d8 aa3a93e7 b3ebbd55 769886bc 651d06b0 cc53b0f6 3bce3c3e 27d2604b",n:"ffffffff 00000000 ffffffff ffffffff bce6faad a7179e84 f3b9cac2 fc632551",hash:s.sha256,gRed:!1,g:["6b17d1f2 e12c4247 f8bce6e5 63a440f2 77037d81 2deb33a0 f4a13945 d898c296","4fe342e2 fe1a7f9b 8ee7eb4a 7c0f9e16 2bce3357 6b315ece cbb64068 37bf51f5"]}),i("curve25519",{type:"mont",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"76d06",b:"0",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:s.sha256,gRed:!1,g:["9"]}),i("ed25519",{type:"edwards",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"-1",c:"1",d:"52036cee2b6ffe73 8cc740797779e898 00700a4d4141d8ab 75eb4dca135978a3",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:s.sha256,gRed:!1,g:["216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a","6666666666666666666666666666666666666666666666666666666666666658"]}),i("secp256k1",{type:"short",prime:"k256",p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f",a:"0",b:"7",n:"ffffffff ffffffff ffffffff fffffffe baaedce6 af48a03b bfd25e8c d0364141",h:"1",hash:s.sha256,beta:"7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee",lambda:"5363ad4cc05c30e0a5261c028812645a122e22ea20816678df02967c1b23bd72",basis:[{a:"3086d221a7d46bcde86c90e49284eb15",b:"-e4437ed6010e88286f547fa90abfe4c3"},{a:"114ca50f7a8e2f3f657c1108d9d44cfd8",b:"3086d221a7d46bcde86c90e49284eb15"}],gRed:!1,g:["79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798","483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8",{doubles:{step:4,points:[["e60fce93b59e9ec53011aabc21c23e97b2a31369b87a5ae9c44ee89e2a6dec0a","f7e3507399e595929db99f34f57937101296891e44d23f0be1f32cce69616821"],["8282263212c609d9ea2a6e3e172de238d8c39cabd5ac1ca10646e23fd5f51508","11f8a8098557dfe45e8256e830b60ace62d613ac2f7b17bed31b6eaff6e26caf"],["175e159f728b865a72f99cc6c6fc846de0b93833fd2222ed73fce5b551e5b739","d3506e0d9e3c79eba4ef97a51ff71f5eacb5955add24345c6efa6ffee9fed695"],["363d90d447b00c9c99ceac05b6262ee053441c7e55552ffe526bad8f83ff4640","4e273adfc732221953b445397f3363145b9a89008199ecb62003c7f3bee9de9"],["8b4b5f165df3c2be8c6244b5b745638843e4a781a15bcd1b69f79a55dffdf80c","4aad0a6f68d308b4b3fbd7813ab0da04f9e336546162ee56b3eff0c65fd4fd36"],["723cbaa6e5db996d6bf771c00bd548c7b700dbffa6c0e77bcb6115925232fcda","96e867b5595cc498a921137488824d6e2660a0653779494801dc069d9eb39f5f"],["eebfa4d493bebf98ba5feec812c2d3b50947961237a919839a533eca0e7dd7fa","5d9a8ca3970ef0f269ee7edaf178089d9ae4cdc3a711f712ddfd4fdae1de8999"],["100f44da696e71672791d0a09b7bde459f1215a29b3c03bfefd7835b39a48db0","cdd9e13192a00b772ec8f3300c090666b7ff4a18ff5195ac0fbd5cd62bc65a09"],["e1031be262c7ed1b1dc9227a4a04c017a77f8d4464f3b3852c8acde6e534fd2d","9d7061928940405e6bb6a4176597535af292dd419e1ced79a44f18f29456a00d"],["feea6cae46d55b530ac2839f143bd7ec5cf8b266a41d6af52d5e688d9094696d","e57c6b6c97dce1bab06e4e12bf3ecd5c981c8957cc41442d3155debf18090088"],["da67a91d91049cdcb367be4be6ffca3cfeed657d808583de33fa978bc1ec6cb1","9bacaa35481642bc41f463f7ec9780e5dec7adc508f740a17e9ea8e27a68be1d"],["53904faa0b334cdda6e000935ef22151ec08d0f7bb11069f57545ccc1a37b7c0","5bc087d0bc80106d88c9eccac20d3c1c13999981e14434699dcb096b022771c8"],["8e7bcd0bd35983a7719cca7764ca906779b53a043a9b8bcaeff959f43ad86047","10b7770b2a3da4b3940310420ca9514579e88e2e47fd68b3ea10047e8460372a"],["385eed34c1cdff21e6d0818689b81bde71a7f4f18397e6690a841e1599c43862","283bebc3e8ea23f56701de19e9ebf4576b304eec2086dc8cc0458fe5542e5453"],["6f9d9b803ecf191637c73a4413dfa180fddf84a5947fbc9c606ed86c3fac3a7","7c80c68e603059ba69b8e2a30e45c4d47ea4dd2f5c281002d86890603a842160"],["3322d401243c4e2582a2147c104d6ecbf774d163db0f5e5313b7e0e742d0e6bd","56e70797e9664ef5bfb019bc4ddaf9b72805f63ea2873af624f3a2e96c28b2a0"],["85672c7d2de0b7da2bd1770d89665868741b3f9af7643397721d74d28134ab83","7c481b9b5b43b2eb6374049bfa62c2e5e77f17fcc5298f44c8e3094f790313a6"],["948bf809b1988a46b06c9f1919413b10f9226c60f668832ffd959af60c82a0a","53a562856dcb6646dc6b74c5d1c3418c6d4dff08c97cd2bed4cb7f88d8c8e589"],["6260ce7f461801c34f067ce0f02873a8f1b0e44dfc69752accecd819f38fd8e8","bc2da82b6fa5b571a7f09049776a1ef7ecd292238051c198c1a84e95b2b4ae17"],["e5037de0afc1d8d43d8348414bbf4103043ec8f575bfdc432953cc8d2037fa2d","4571534baa94d3b5f9f98d09fb990bddbd5f5b03ec481f10e0e5dc841d755bda"],["e06372b0f4a207adf5ea905e8f1771b4e7e8dbd1c6a6c5b725866a0ae4fce725","7a908974bce18cfe12a27bb2ad5a488cd7484a7787104870b27034f94eee31dd"],["213c7a715cd5d45358d0bbf9dc0ce02204b10bdde2a3f58540ad6908d0559754","4b6dad0b5ae462507013ad06245ba190bb4850f5f36a7eeddff2c27534b458f2"],["4e7c272a7af4b34e8dbb9352a5419a87e2838c70adc62cddf0cc3a3b08fbd53c","17749c766c9d0b18e16fd09f6def681b530b9614bff7dd33e0b3941817dcaae6"],["fea74e3dbe778b1b10f238ad61686aa5c76e3db2be43057632427e2840fb27b6","6e0568db9b0b13297cf674deccb6af93126b596b973f7b77701d3db7f23cb96f"],["76e64113f677cf0e10a2570d599968d31544e179b760432952c02a4417bdde39","c90ddf8dee4e95cf577066d70681f0d35e2a33d2b56d2032b4b1752d1901ac01"],["c738c56b03b2abe1e8281baa743f8f9a8f7cc643df26cbee3ab150242bcbb891","893fb578951ad2537f718f2eacbfbbbb82314eef7880cfe917e735d9699a84c3"],["d895626548b65b81e264c7637c972877d1d72e5f3a925014372e9f6588f6c14b","febfaa38f2bc7eae728ec60818c340eb03428d632bb067e179363ed75d7d991f"],["b8da94032a957518eb0f6433571e8761ceffc73693e84edd49150a564f676e03","2804dfa44805a1e4d7c99cc9762808b092cc584d95ff3b511488e4e74efdf6e7"],["e80fea14441fb33a7d8adab9475d7fab2019effb5156a792f1a11778e3c0df5d","eed1de7f638e00771e89768ca3ca94472d155e80af322ea9fcb4291b6ac9ec78"],["a301697bdfcd704313ba48e51d567543f2a182031efd6915ddc07bbcc4e16070","7370f91cfb67e4f5081809fa25d40f9b1735dbf7c0a11a130c0d1a041e177ea1"],["90ad85b389d6b936463f9d0512678de208cc330b11307fffab7ac63e3fb04ed4","e507a3620a38261affdcbd9427222b839aefabe1582894d991d4d48cb6ef150"],["8f68b9d2f63b5f339239c1ad981f162ee88c5678723ea3351b7b444c9ec4c0da","662a9f2dba063986de1d90c2b6be215dbbea2cfe95510bfdf23cbf79501fff82"],["e4f3fb0176af85d65ff99ff9198c36091f48e86503681e3e6686fd5053231e11","1e63633ad0ef4f1c1661a6d0ea02b7286cc7e74ec951d1c9822c38576feb73bc"],["8c00fa9b18ebf331eb961537a45a4266c7034f2f0d4e1d0716fb6eae20eae29e","efa47267fea521a1a9dc343a3736c974c2fadafa81e36c54e7d2a4c66702414b"],["e7a26ce69dd4829f3e10cec0a9e98ed3143d084f308b92c0997fddfc60cb3e41","2a758e300fa7984b471b006a1aafbb18d0a6b2c0420e83e20e8a9421cf2cfd51"],["b6459e0ee3662ec8d23540c223bcbdc571cbcb967d79424f3cf29eb3de6b80ef","67c876d06f3e06de1dadf16e5661db3c4b3ae6d48e35b2ff30bf0b61a71ba45"],["d68a80c8280bb840793234aa118f06231d6f1fc67e73c5a5deda0f5b496943e8","db8ba9fff4b586d00c4b1f9177b0e28b5b0e7b8f7845295a294c84266b133120"],["324aed7df65c804252dc0270907a30b09612aeb973449cea4095980fc28d3d5d","648a365774b61f2ff130c0c35aec1f4f19213b0c7e332843967224af96ab7c84"],["4df9c14919cde61f6d51dfdbe5fee5dceec4143ba8d1ca888e8bd373fd054c96","35ec51092d8728050974c23a1d85d4b5d506cdc288490192ebac06cad10d5d"],["9c3919a84a474870faed8a9c1cc66021523489054d7f0308cbfc99c8ac1f98cd","ddb84f0f4a4ddd57584f044bf260e641905326f76c64c8e6be7e5e03d4fc599d"],["6057170b1dd12fdf8de05f281d8e06bb91e1493a8b91d4cc5a21382120a959e5","9a1af0b26a6a4807add9a2daf71df262465152bc3ee24c65e899be932385a2a8"],["a576df8e23a08411421439a4518da31880cef0fba7d4df12b1a6973eecb94266","40a6bf20e76640b2c92b97afe58cd82c432e10a7f514d9f3ee8be11ae1b28ec8"],["7778a78c28dec3e30a05fe9629de8c38bb30d1f5cf9a3a208f763889be58ad71","34626d9ab5a5b22ff7098e12f2ff580087b38411ff24ac563b513fc1fd9f43ac"],["928955ee637a84463729fd30e7afd2ed5f96274e5ad7e5cb09eda9c06d903ac","c25621003d3f42a827b78a13093a95eeac3d26efa8a8d83fc5180e935bcd091f"],["85d0fef3ec6db109399064f3a0e3b2855645b4a907ad354527aae75163d82751","1f03648413a38c0be29d496e582cf5663e8751e96877331582c237a24eb1f962"],["ff2b0dce97eece97c1c9b6041798b85dfdfb6d8882da20308f5404824526087e","493d13fef524ba188af4c4dc54d07936c7b7ed6fb90e2ceb2c951e01f0c29907"],["827fbbe4b1e880ea9ed2b2e6301b212b57f1ee148cd6dd28780e5e2cf856e241","c60f9c923c727b0b71bef2c67d1d12687ff7a63186903166d605b68baec293ec"],["eaa649f21f51bdbae7be4ae34ce6e5217a58fdce7f47f9aa7f3b58fa2120e2b3","be3279ed5bbbb03ac69a80f89879aa5a01a6b965f13f7e59d47a5305ba5ad93d"],["e4a42d43c5cf169d9391df6decf42ee541b6d8f0c9a137401e23632dda34d24f","4d9f92e716d1c73526fc99ccfb8ad34ce886eedfa8d8e4f13a7f7131deba9414"],["1ec80fef360cbdd954160fadab352b6b92b53576a88fea4947173b9d4300bf19","aeefe93756b5340d2f3a4958a7abbf5e0146e77f6295a07b671cdc1cc107cefd"],["146a778c04670c2f91b00af4680dfa8bce3490717d58ba889ddb5928366642be","b318e0ec3354028add669827f9d4b2870aaa971d2f7e5ed1d0b297483d83efd0"],["fa50c0f61d22e5f07e3acebb1aa07b128d0012209a28b9776d76a8793180eef9","6b84c6922397eba9b72cd2872281a68a5e683293a57a213b38cd8d7d3f4f2811"],["da1d61d0ca721a11b1a5bf6b7d88e8421a288ab5d5bba5220e53d32b5f067ec2","8157f55a7c99306c79c0766161c91e2966a73899d279b48a655fba0f1ad836f1"],["a8e282ff0c9706907215ff98e8fd416615311de0446f1e062a73b0610d064e13","7f97355b8db81c09abfb7f3c5b2515888b679a3e50dd6bd6cef7c73111f4cc0c"],["174a53b9c9a285872d39e56e6913cab15d59b1fa512508c022f382de8319497c","ccc9dc37abfc9c1657b4155f2c47f9e6646b3a1d8cb9854383da13ac079afa73"],["959396981943785c3d3e57edf5018cdbe039e730e4918b3d884fdff09475b7ba","2e7e552888c331dd8ba0386a4b9cd6849c653f64c8709385e9b8abf87524f2fd"],["d2a63a50ae401e56d645a1153b109a8fcca0a43d561fba2dbb51340c9d82b151","e82d86fb6443fcb7565aee58b2948220a70f750af484ca52d4142174dcf89405"],["64587e2335471eb890ee7896d7cfdc866bacbdbd3839317b3436f9b45617e073","d99fcdd5bf6902e2ae96dd6447c299a185b90a39133aeab358299e5e9faf6589"],["8481bde0e4e4d885b3a546d3e549de042f0aa6cea250e7fd358d6c86dd45e458","38ee7b8cba5404dd84a25bf39cecb2ca900a79c42b262e556d64b1b59779057e"],["13464a57a78102aa62b6979ae817f4637ffcfed3c4b1ce30bcd6303f6caf666b","69be159004614580ef7e433453ccb0ca48f300a81d0942e13f495a907f6ecc27"],["bc4a9df5b713fe2e9aef430bcc1dc97a0cd9ccede2f28588cada3a0d2d83f366","d3a81ca6e785c06383937adf4b798caa6e8a9fbfa547b16d758d666581f33c1"],["8c28a97bf8298bc0d23d8c749452a32e694b65e30a9472a3954ab30fe5324caa","40a30463a3305193378fedf31f7cc0eb7ae784f0451cb9459e71dc73cbef9482"],["8ea9666139527a8c1dd94ce4f071fd23c8b350c5a4bb33748c4ba111faccae0","620efabbc8ee2782e24e7c0cfb95c5d735b783be9cf0f8e955af34a30e62b945"],["dd3625faef5ba06074669716bbd3788d89bdde815959968092f76cc4eb9a9787","7a188fa3520e30d461da2501045731ca941461982883395937f68d00c644a573"],["f710d79d9eb962297e4f6232b40e8f7feb2bc63814614d692c12de752408221e","ea98e67232d3b3295d3b535532115ccac8612c721851617526ae47a9c77bfc82"]]},naf:{wnd:7,points:[["f9308a019258c31049344f85f89d5229b531c845836f99b08601f113bce036f9","388f7b0f632de8140fe337e62a37f3566500a99934c2231b6cb9fd7584b8e672"],["2f8bde4d1a07209355b4a7250a5c5128e88b84bddc619ab7cba8d569b240efe4","d8ac222636e5e3d6d4dba9dda6c9c426f788271bab0d6840dca87d3aa6ac62d6"],["5cbdf0646e5db4eaa398f365f2ea7a0e3d419b7e0330e39ce92bddedcac4f9bc","6aebca40ba255960a3178d6d861a54dba813d0b813fde7b5a5082628087264da"],["acd484e2f0c7f65309ad178a9f559abde09796974c57e714c35f110dfc27ccbe","cc338921b0a7d9fd64380971763b61e9add888a4375f8e0f05cc262ac64f9c37"],["774ae7f858a9411e5ef4246b70c65aac5649980be5c17891bbec17895da008cb","d984a032eb6b5e190243dd56d7b7b365372db1e2dff9d6a8301d74c9c953c61b"],["f28773c2d975288bc7d1d205c3748651b075fbc6610e58cddeeddf8f19405aa8","ab0902e8d880a89758212eb65cdaf473a1a06da521fa91f29b5cb52db03ed81"],["d7924d4f7d43ea965a465ae3095ff41131e5946f3c85f79e44adbcf8e27e080e","581e2872a86c72a683842ec228cc6defea40af2bd896d3a5c504dc9ff6a26b58"],["defdea4cdb677750a420fee807eacf21eb9898ae79b9768766e4faa04a2d4a34","4211ab0694635168e997b0ead2a93daeced1f4a04a95c0f6cfb199f69e56eb77"],["2b4ea0a797a443d293ef5cff444f4979f06acfebd7e86d277475656138385b6c","85e89bc037945d93b343083b5a1c86131a01f60c50269763b570c854e5c09b7a"],["352bbf4a4cdd12564f93fa332ce333301d9ad40271f8107181340aef25be59d5","321eb4075348f534d59c18259dda3e1f4a1b3b2e71b1039c67bd3d8bcf81998c"],["2fa2104d6b38d11b0230010559879124e42ab8dfeff5ff29dc9cdadd4ecacc3f","2de1068295dd865b64569335bd5dd80181d70ecfc882648423ba76b532b7d67"],["9248279b09b4d68dab21a9b066edda83263c3d84e09572e269ca0cd7f5453714","73016f7bf234aade5d1aa71bdea2b1ff3fc0de2a887912ffe54a32ce97cb3402"],["daed4f2be3a8bf278e70132fb0beb7522f570e144bf615c07e996d443dee8729","a69dce4a7d6c98e8d4a1aca87ef8d7003f83c230f3afa726ab40e52290be1c55"],["c44d12c7065d812e8acf28d7cbb19f9011ecd9e9fdf281b0e6a3b5e87d22e7db","2119a460ce326cdc76c45926c982fdac0e106e861edf61c5a039063f0e0e6482"],["6a245bf6dc698504c89a20cfded60853152b695336c28063b61c65cbd269e6b4","e022cf42c2bd4a708b3f5126f16a24ad8b33ba48d0423b6efd5e6348100d8a82"],["1697ffa6fd9de627c077e3d2fe541084ce13300b0bec1146f95ae57f0d0bd6a5","b9c398f186806f5d27561506e4557433a2cf15009e498ae7adee9d63d01b2396"],["605bdb019981718b986d0f07e834cb0d9deb8360ffb7f61df982345ef27a7479","2972d2de4f8d20681a78d93ec96fe23c26bfae84fb14db43b01e1e9056b8c49"],["62d14dab4150bf497402fdc45a215e10dcb01c354959b10cfe31c7e9d87ff33d","80fc06bd8cc5b01098088a1950eed0db01aa132967ab472235f5642483b25eaf"],["80c60ad0040f27dade5b4b06c408e56b2c50e9f56b9b8b425e555c2f86308b6f","1c38303f1cc5c30f26e66bad7fe72f70a65eed4cbe7024eb1aa01f56430bd57a"],["7a9375ad6167ad54aa74c6348cc54d344cc5dc9487d847049d5eabb0fa03c8fb","d0e3fa9eca8726909559e0d79269046bdc59ea10c70ce2b02d499ec224dc7f7"],["d528ecd9b696b54c907a9ed045447a79bb408ec39b68df504bb51f459bc3ffc9","eecf41253136e5f99966f21881fd656ebc4345405c520dbc063465b521409933"],["49370a4b5f43412ea25f514e8ecdad05266115e4a7ecb1387231808f8b45963","758f3f41afd6ed428b3081b0512fd62a54c3f3afbb5b6764b653052a12949c9a"],["77f230936ee88cbbd73df930d64702ef881d811e0e1498e2f1c13eb1fc345d74","958ef42a7886b6400a08266e9ba1b37896c95330d97077cbbe8eb3c7671c60d6"],["f2dac991cc4ce4b9ea44887e5c7c0bce58c80074ab9d4dbaeb28531b7739f530","e0dedc9b3b2f8dad4da1f32dec2531df9eb5fbeb0598e4fd1a117dba703a3c37"],["463b3d9f662621fb1b4be8fbbe2520125a216cdfc9dae3debcba4850c690d45b","5ed430d78c296c3543114306dd8622d7c622e27c970a1de31cb377b01af7307e"],["f16f804244e46e2a09232d4aff3b59976b98fac14328a2d1a32496b49998f247","cedabd9b82203f7e13d206fcdf4e33d92a6c53c26e5cce26d6579962c4e31df6"],["caf754272dc84563b0352b7a14311af55d245315ace27c65369e15f7151d41d1","cb474660ef35f5f2a41b643fa5e460575f4fa9b7962232a5c32f908318a04476"],["2600ca4b282cb986f85d0f1709979d8b44a09c07cb86d7c124497bc86f082120","4119b88753c15bd6a693b03fcddbb45d5ac6be74ab5f0ef44b0be9475a7e4b40"],["7635ca72d7e8432c338ec53cd12220bc01c48685e24f7dc8c602a7746998e435","91b649609489d613d1d5e590f78e6d74ecfc061d57048bad9e76f302c5b9c61"],["754e3239f325570cdbbf4a87deee8a66b7f2b33479d468fbc1a50743bf56cc18","673fb86e5bda30fb3cd0ed304ea49a023ee33d0197a695d0c5d98093c536683"],["e3e6bd1071a1e96aff57859c82d570f0330800661d1c952f9fe2694691d9b9e8","59c9e0bba394e76f40c0aa58379a3cb6a5a2283993e90c4167002af4920e37f5"],["186b483d056a033826ae73d88f732985c4ccb1f32ba35f4b4cc47fdcf04aa6eb","3b952d32c67cf77e2e17446e204180ab21fb8090895138b4a4a797f86e80888b"],["df9d70a6b9876ce544c98561f4be4f725442e6d2b737d9c91a8321724ce0963f","55eb2dafd84d6ccd5f862b785dc39d4ab157222720ef9da217b8c45cf2ba2417"],["5edd5cc23c51e87a497ca815d5dce0f8ab52554f849ed8995de64c5f34ce7143","efae9c8dbc14130661e8cec030c89ad0c13c66c0d17a2905cdc706ab7399a868"],["290798c2b6476830da12fe02287e9e777aa3fba1c355b17a722d362f84614fba","e38da76dcd440621988d00bcf79af25d5b29c094db2a23146d003afd41943e7a"],["af3c423a95d9f5b3054754efa150ac39cd29552fe360257362dfdecef4053b45","f98a3fd831eb2b749a93b0e6f35cfb40c8cd5aa667a15581bc2feded498fd9c6"],["766dbb24d134e745cccaa28c99bf274906bb66b26dcf98df8d2fed50d884249a","744b1152eacbe5e38dcc887980da38b897584a65fa06cedd2c924f97cbac5996"],["59dbf46f8c94759ba21277c33784f41645f7b44f6c596a58ce92e666191abe3e","c534ad44175fbc300f4ea6ce648309a042ce739a7919798cd85e216c4a307f6e"],["f13ada95103c4537305e691e74e9a4a8dd647e711a95e73cb62dc6018cfd87b8","e13817b44ee14de663bf4bc808341f326949e21a6a75c2570778419bdaf5733d"],["7754b4fa0e8aced06d4167a2c59cca4cda1869c06ebadfb6488550015a88522c","30e93e864e669d82224b967c3020b8fa8d1e4e350b6cbcc537a48b57841163a2"],["948dcadf5990e048aa3874d46abef9d701858f95de8041d2a6828c99e2262519","e491a42537f6e597d5d28a3224b1bc25df9154efbd2ef1d2cbba2cae5347d57e"],["7962414450c76c1689c7b48f8202ec37fb224cf5ac0bfa1570328a8a3d7c77ab","100b610ec4ffb4760d5c1fc133ef6f6b12507a051f04ac5760afa5b29db83437"],["3514087834964b54b15b160644d915485a16977225b8847bb0dd085137ec47ca","ef0afbb2056205448e1652c48e8127fc6039e77c15c2378b7e7d15a0de293311"],["d3cc30ad6b483e4bc79ce2c9dd8bc54993e947eb8df787b442943d3f7b527eaf","8b378a22d827278d89c5e9be8f9508ae3c2ad46290358630afb34db04eede0a4"],["1624d84780732860ce1c78fcbfefe08b2b29823db913f6493975ba0ff4847610","68651cf9b6da903e0914448c6cd9d4ca896878f5282be4c8cc06e2a404078575"],["733ce80da955a8a26902c95633e62a985192474b5af207da6df7b4fd5fc61cd4","f5435a2bd2badf7d485a4d8b8db9fcce3e1ef8e0201e4578c54673bc1dc5ea1d"],["15d9441254945064cf1a1c33bbd3b49f8966c5092171e699ef258dfab81c045c","d56eb30b69463e7234f5137b73b84177434800bacebfc685fc37bbe9efe4070d"],["a1d0fcf2ec9de675b612136e5ce70d271c21417c9d2b8aaaac138599d0717940","edd77f50bcb5a3cab2e90737309667f2641462a54070f3d519212d39c197a629"],["e22fbe15c0af8ccc5780c0735f84dbe9a790badee8245c06c7ca37331cb36980","a855babad5cd60c88b430a69f53a1a7a38289154964799be43d06d77d31da06"],["311091dd9860e8e20ee13473c1155f5f69635e394704eaa74009452246cfa9b3","66db656f87d1f04fffd1f04788c06830871ec5a64feee685bd80f0b1286d8374"],["34c1fd04d301be89b31c0442d3e6ac24883928b45a9340781867d4232ec2dbdf","9414685e97b1b5954bd46f730174136d57f1ceeb487443dc5321857ba73abee"],["f219ea5d6b54701c1c14de5b557eb42a8d13f3abbcd08affcc2a5e6b049b8d63","4cb95957e83d40b0f73af4544cccf6b1f4b08d3c07b27fb8d8c2962a400766d1"],["d7b8740f74a8fbaab1f683db8f45de26543a5490bca627087236912469a0b448","fa77968128d9c92ee1010f337ad4717eff15db5ed3c049b3411e0315eaa4593b"],["32d31c222f8f6f0ef86f7c98d3a3335ead5bcd32abdd94289fe4d3091aa824bf","5f3032f5892156e39ccd3d7915b9e1da2e6dac9e6f26e961118d14b8462e1661"],["7461f371914ab32671045a155d9831ea8793d77cd59592c4340f86cbc18347b5","8ec0ba238b96bec0cbdddcae0aa442542eee1ff50c986ea6b39847b3cc092ff6"],["ee079adb1df1860074356a25aa38206a6d716b2c3e67453d287698bad7b2b2d6","8dc2412aafe3be5c4c5f37e0ecc5f9f6a446989af04c4e25ebaac479ec1c8c1e"],["16ec93e447ec83f0467b18302ee620f7e65de331874c9dc72bfd8616ba9da6b5","5e4631150e62fb40d0e8c2a7ca5804a39d58186a50e497139626778e25b0674d"],["eaa5f980c245f6f038978290afa70b6bd8855897f98b6aa485b96065d537bd99","f65f5d3e292c2e0819a528391c994624d784869d7e6ea67fb18041024edc07dc"],["78c9407544ac132692ee1910a02439958ae04877151342ea96c4b6b35a49f51","f3e0319169eb9b85d5404795539a5e68fa1fbd583c064d2462b675f194a3ddb4"],["494f4be219a1a77016dcd838431aea0001cdc8ae7a6fc688726578d9702857a5","42242a969283a5f339ba7f075e36ba2af925ce30d767ed6e55f4b031880d562c"],["a598a8030da6d86c6bc7f2f5144ea549d28211ea58faa70ebf4c1e665c1fe9b5","204b5d6f84822c307e4b4a7140737aec23fc63b65b35f86a10026dbd2d864e6b"],["c41916365abb2b5d09192f5f2dbeafec208f020f12570a184dbadc3e58595997","4f14351d0087efa49d245b328984989d5caf9450f34bfc0ed16e96b58fa9913"],["841d6063a586fa475a724604da03bc5b92a2e0d2e0a36acfe4c73a5514742881","73867f59c0659e81904f9a1c7543698e62562d6744c169ce7a36de01a8d6154"],["5e95bb399a6971d376026947f89bde2f282b33810928be4ded112ac4d70e20d5","39f23f366809085beebfc71181313775a99c9aed7d8ba38b161384c746012865"],["36e4641a53948fd476c39f8a99fd974e5ec07564b5315d8bf99471bca0ef2f66","d2424b1b1abe4eb8164227b085c9aa9456ea13493fd563e06fd51cf5694c78fc"],["336581ea7bfbbb290c191a2f507a41cf5643842170e914faeab27c2c579f726","ead12168595fe1be99252129b6e56b3391f7ab1410cd1e0ef3dcdcabd2fda224"],["8ab89816dadfd6b6a1f2634fcf00ec8403781025ed6890c4849742706bd43ede","6fdcef09f2f6d0a044e654aef624136f503d459c3e89845858a47a9129cdd24e"],["1e33f1a746c9c5778133344d9299fcaa20b0938e8acff2544bb40284b8c5fb94","60660257dd11b3aa9c8ed618d24edff2306d320f1d03010e33a7d2057f3b3b6"],["85b7c1dcb3cec1b7ee7f30ded79dd20a0ed1f4cc18cbcfcfa410361fd8f08f31","3d98a9cdd026dd43f39048f25a8847f4fcafad1895d7a633c6fed3c35e999511"],["29df9fbd8d9e46509275f4b125d6d45d7fbe9a3b878a7af872a2800661ac5f51","b4c4fe99c775a606e2d8862179139ffda61dc861c019e55cd2876eb2a27d84b"],["a0b1cae06b0a847a3fea6e671aaf8adfdfe58ca2f768105c8082b2e449fce252","ae434102edde0958ec4b19d917a6a28e6b72da1834aff0e650f049503a296cf2"],["4e8ceafb9b3e9a136dc7ff67e840295b499dfb3b2133e4ba113f2e4c0e121e5","cf2174118c8b6d7a4b48f6d534ce5c79422c086a63460502b827ce62a326683c"],["d24a44e047e19b6f5afb81c7ca2f69080a5076689a010919f42725c2b789a33b","6fb8d5591b466f8fc63db50f1c0f1c69013f996887b8244d2cdec417afea8fa3"],["ea01606a7a6c9cdd249fdfcfacb99584001edd28abbab77b5104e98e8e3b35d4","322af4908c7312b0cfbfe369f7a7b3cdb7d4494bc2823700cfd652188a3ea98d"],["af8addbf2b661c8a6c6328655eb96651252007d8c5ea31be4ad196de8ce2131f","6749e67c029b85f52a034eafd096836b2520818680e26ac8f3dfbcdb71749700"],["e3ae1974566ca06cc516d47e0fb165a674a3dabcfca15e722f0e3450f45889","2aeabe7e4531510116217f07bf4d07300de97e4874f81f533420a72eeb0bd6a4"],["591ee355313d99721cf6993ffed1e3e301993ff3ed258802075ea8ced397e246","b0ea558a113c30bea60fc4775460c7901ff0b053d25ca2bdeee98f1a4be5d196"],["11396d55fda54c49f19aa97318d8da61fa8584e47b084945077cf03255b52984","998c74a8cd45ac01289d5833a7beb4744ff536b01b257be4c5767bea93ea57a4"],["3c5d2a1ba39c5a1790000738c9e0c40b8dcdfd5468754b6405540157e017aa7a","b2284279995a34e2f9d4de7396fc18b80f9b8b9fdd270f6661f79ca4c81bd257"],["cc8704b8a60a0defa3a99a7299f2e9c3fbc395afb04ac078425ef8a1793cc030","bdd46039feed17881d1e0862db347f8cf395b74fc4bcdc4e940b74e3ac1f1b13"],["c533e4f7ea8555aacd9777ac5cad29b97dd4defccc53ee7ea204119b2889b197","6f0a256bc5efdf429a2fb6242f1a43a2d9b925bb4a4b3a26bb8e0f45eb596096"],["c14f8f2ccb27d6f109f6d08d03cc96a69ba8c34eec07bbcf566d48e33da6593","c359d6923bb398f7fd4473e16fe1c28475b740dd098075e6c0e8649113dc3a38"],["a6cbc3046bc6a450bac24789fa17115a4c9739ed75f8f21ce441f72e0b90e6ef","21ae7f4680e889bb130619e2c0f95a360ceb573c70603139862afd617fa9b9f"],["347d6d9a02c48927ebfb86c1359b1caf130a3c0267d11ce6344b39f99d43cc38","60ea7f61a353524d1c987f6ecec92f086d565ab687870cb12689ff1e31c74448"],["da6545d2181db8d983f7dcb375ef5866d47c67b1bf31c8cf855ef7437b72656a","49b96715ab6878a79e78f07ce5680c5d6673051b4935bd897fea824b77dc208a"],["c40747cc9d012cb1a13b8148309c6de7ec25d6945d657146b9d5994b8feb1111","5ca560753be2a12fc6de6caf2cb489565db936156b9514e1bb5e83037e0fa2d4"],["4e42c8ec82c99798ccf3a610be870e78338c7f713348bd34c8203ef4037f3502","7571d74ee5e0fb92a7a8b33a07783341a5492144cc54bcc40a94473693606437"],["3775ab7089bc6af823aba2e1af70b236d251cadb0c86743287522a1b3b0dedea","be52d107bcfa09d8bcb9736a828cfa7fac8db17bf7a76a2c42ad961409018cf7"],["cee31cbf7e34ec379d94fb814d3d775ad954595d1314ba8846959e3e82f74e26","8fd64a14c06b589c26b947ae2bcf6bfa0149ef0be14ed4d80f448a01c43b1c6d"],["b4f9eaea09b6917619f6ea6a4eb5464efddb58fd45b1ebefcdc1a01d08b47986","39e5c9925b5a54b07433a4f18c61726f8bb131c012ca542eb24a8ac07200682a"],["d4263dfc3d2df923a0179a48966d30ce84e2515afc3dccc1b77907792ebcc60e","62dfaf07a0f78feb30e30d6295853ce189e127760ad6cf7fae164e122a208d54"],["48457524820fa65a4f8d35eb6930857c0032acc0a4a2de422233eeda897612c4","25a748ab367979d98733c38a1fa1c2e7dc6cc07db2d60a9ae7a76aaa49bd0f77"],["dfeeef1881101f2cb11644f3a2afdfc2045e19919152923f367a1767c11cceda","ecfb7056cf1de042f9420bab396793c0c390bde74b4bbdff16a83ae09a9a7517"],["6d7ef6b17543f8373c573f44e1f389835d89bcbc6062ced36c82df83b8fae859","cd450ec335438986dfefa10c57fea9bcc521a0959b2d80bbf74b190dca712d10"],["e75605d59102a5a2684500d3b991f2e3f3c88b93225547035af25af66e04541f","f5c54754a8f71ee540b9b48728473e314f729ac5308b06938360990e2bfad125"],["eb98660f4c4dfaa06a2be453d5020bc99a0c2e60abe388457dd43fefb1ed620c","6cb9a8876d9cb8520609af3add26cd20a0a7cd8a9411131ce85f44100099223e"],["13e87b027d8514d35939f2e6892b19922154596941888336dc3563e3b8dba942","fef5a3c68059a6dec5d624114bf1e91aac2b9da568d6abeb2570d55646b8adf1"],["ee163026e9fd6fe017c38f06a5be6fc125424b371ce2708e7bf4491691e5764a","1acb250f255dd61c43d94ccc670d0f58f49ae3fa15b96623e5430da0ad6c62b2"],["b268f5ef9ad51e4d78de3a750c2dc89b1e626d43505867999932e5db33af3d80","5f310d4b3c99b9ebb19f77d41c1dee018cf0d34fd4191614003e945a1216e423"],["ff07f3118a9df035e9fad85eb6c7bfe42b02f01ca99ceea3bf7ffdba93c4750d","438136d603e858a3a5c440c38eccbaddc1d2942114e2eddd4740d098ced1f0d8"],["8d8b9855c7c052a34146fd20ffb658bea4b9f69e0d825ebec16e8c3ce2b526a1","cdb559eedc2d79f926baf44fb84ea4d44bcf50fee51d7ceb30e2e7f463036758"],["52db0b5384dfbf05bfa9d472d7ae26dfe4b851ceca91b1eba54263180da32b63","c3b997d050ee5d423ebaf66a6db9f57b3180c902875679de924b69d84a7b375"],["e62f9490d3d51da6395efd24e80919cc7d0f29c3f3fa48c6fff543becbd43352","6d89ad7ba4876b0b22c2ca280c682862f342c8591f1daf5170e07bfd9ccafa7d"],["7f30ea2476b399b4957509c88f77d0191afa2ff5cb7b14fd6d8e7d65aaab1193","ca5ef7d4b231c94c3b15389a5f6311e9daff7bb67b103e9880ef4bff637acaec"],["5098ff1e1d9f14fb46a210fada6c903fef0fb7b4a1dd1d9ac60a0361800b7a00","9731141d81fc8f8084d37c6e7542006b3ee1b40d60dfe5362a5b132fd17ddc0"],["32b78c7de9ee512a72895be6b9cbefa6e2f3c4ccce445c96b9f2c81e2778ad58","ee1849f513df71e32efc3896ee28260c73bb80547ae2275ba497237794c8753c"],["e2cb74fddc8e9fbcd076eef2a7c72b0ce37d50f08269dfc074b581550547a4f7","d3aa2ed71c9dd2247a62df062736eb0baddea9e36122d2be8641abcb005cc4a4"],["8438447566d4d7bedadc299496ab357426009a35f235cb141be0d99cd10ae3a8","c4e1020916980a4da5d01ac5e6ad330734ef0d7906631c4f2390426b2edd791f"],["4162d488b89402039b584c6fc6c308870587d9c46f660b878ab65c82c711d67e","67163e903236289f776f22c25fb8a3afc1732f2b84b4e95dbda47ae5a0852649"],["3fad3fa84caf0f34f0f89bfd2dcf54fc175d767aec3e50684f3ba4a4bf5f683d","cd1bc7cb6cc407bb2f0ca647c718a730cf71872e7d0d2a53fa20efcdfe61826"],["674f2600a3007a00568c1a7ce05d0816c1fb84bf1370798f1c69532faeb1a86b","299d21f9413f33b3edf43b257004580b70db57da0b182259e09eecc69e0d38a5"],["d32f4da54ade74abb81b815ad1fb3b263d82d6c692714bcff87d29bd5ee9f08f","f9429e738b8e53b968e99016c059707782e14f4535359d582fc416910b3eea87"],["30e4e670435385556e593657135845d36fbb6931f72b08cb1ed954f1e3ce3ff6","462f9bce619898638499350113bbc9b10a878d35da70740dc695a559eb88db7b"],["be2062003c51cc3004682904330e4dee7f3dcd10b01e580bf1971b04d4cad297","62188bc49d61e5428573d48a74e1c655b1c61090905682a0d5558ed72dccb9bc"],["93144423ace3451ed29e0fb9ac2af211cb6e84a601df5993c419859fff5df04a","7c10dfb164c3425f5c71a3f9d7992038f1065224f72bb9d1d902a6d13037b47c"],["b015f8044f5fcbdcf21ca26d6c34fb8197829205c7b7d2a7cb66418c157b112c","ab8c1e086d04e813744a655b2df8d5f83b3cdc6faa3088c1d3aea1454e3a1d5f"],["d5e9e1da649d97d89e4868117a465a3a4f8a18de57a140d36b3f2af341a21b52","4cb04437f391ed73111a13cc1d4dd0db1693465c2240480d8955e8592f27447a"],["d3ae41047dd7ca065dbf8ed77b992439983005cd72e16d6f996a5316d36966bb","bd1aeb21ad22ebb22a10f0303417c6d964f8cdd7df0aca614b10dc14d125ac46"],["463e2763d885f958fc66cdd22800f0a487197d0a82e377b49f80af87c897b065","bfefacdb0e5d0fd7df3a311a94de062b26b80c61fbc97508b79992671ef7ca7f"],["7985fdfd127c0567c6f53ec1bb63ec3158e597c40bfe747c83cddfc910641917","603c12daf3d9862ef2b25fe1de289aed24ed291e0ec6708703a5bd567f32ed03"],["74a1ad6b5f76e39db2dd249410eac7f99e74c59cb83d2d0ed5ff1543da7703e9","cc6157ef18c9c63cd6193d83631bbea0093e0968942e8c33d5737fd790e0db08"],["30682a50703375f602d416664ba19b7fc9bab42c72747463a71d0896b22f6da3","553e04f6b018b4fa6c8f39e7f311d3176290d0e0f19ca73f17714d9977a22ff8"],["9e2158f0d7c0d5f26c3791efefa79597654e7a2b2464f52b1ee6c1347769ef57","712fcdd1b9053f09003a3481fa7762e9ffd7c8ef35a38509e2fbf2629008373"],["176e26989a43c9cfeba4029c202538c28172e566e3c4fce7322857f3be327d66","ed8cc9d04b29eb877d270b4878dc43c19aefd31f4eee09ee7b47834c1fa4b1c3"],["75d46efea3771e6e68abb89a13ad747ecf1892393dfc4f1b7004788c50374da8","9852390a99507679fd0b86fd2b39a868d7efc22151346e1a3ca4726586a6bed8"],["809a20c67d64900ffb698c4c825f6d5f2310fb0451c869345b7319f645605721","9e994980d9917e22b76b061927fa04143d096ccc54963e6a5ebfa5f3f8e286c1"],["1b38903a43f7f114ed4500b4eac7083fdefece1cf29c63528d563446f972c180","4036edc931a60ae889353f77fd53de4a2708b26b6f5da72ad3394119daf408f9"]]}}]})
},{}],101:[function(t,e){function r(t){return this instanceof r?("string"==typeof t&&(s(i.curves.hasOwnProperty(t),"Unknown curve "+t),t=i.curves[t]),t instanceof i.curves.PresetCurve&&(t={curve:t}),this.curve=t.curve.curve,this.n=this.curve.n,this.nh=this.n.shrn(1),this.g=this.curve.g,this.g=t.curve.g,this.g.precompute(t.curve.n.bitLength()+1),void(this.hash=t.hash||t.curve.hash)):new r(t)}var n=t(92),i=t(94),o=i.utils,s=o.assert,a=t(102),h=t(103);e.exports=r,r.prototype.keyPair=function(t,e){return new a(this,t,e)},r.prototype.genKeyPair=function(t){t||(t={});for(var e=new i.hmacDRBG({hash:this.hash,pers:t.pers,entropy:t.entropy||i.rand(this.hash.hmacStrength),nonce:this.n.toArray()}),r=this.n.byteLength(),o=this.n.sub(new n(2));;){var s=new n(e.generate(r));if(!(s.cmp(o)>0))return s.iaddn(1),this.keyPair(s)}},r.prototype._truncateToN=function(t,e){var r=8*t.byteLength()-this.n.bitLength();return r>0&&(t=t.shrn(r)),!e&&t.cmp(this.n)>=0?t.sub(this.n):t},r.prototype.sign=function(t,e,r){e=this.keyPair(e,"hex"),t=this._truncateToN(new n(t,16)),r||(r={});for(var o=this.n.byteLength(),s=e.getPrivate().toArray(),a=s.length;21>a;a++)s.unshift(0);for(var c=t.toArray(),a=c.length;o>a;a++)c.unshift(0);for(var u=new i.hmacDRBG({hash:this.hash,entropy:s,nonce:c}),f=this.n.sub(new n(1));;){var d=new n(u.generate(this.n.byteLength()));if(d=this._truncateToN(d,!0),!(d.cmpn(1)<=0||d.cmp(f)>=0)){var l=this.g.mul(d);if(!l.isInfinity()){var p=l.getX().mod(this.n);if(0!==p.cmpn(0)){var v=d.invm(this.n).mul(p.mul(e.getPrivate()).iadd(t)).mod(this.n);if(0!==v.cmpn(0))return r.canonical&&v.cmp(this.nh)>0&&(v=this.n.sub(v)),new h(p,v)}}}}},r.prototype.verify=function(t,e,r){t=this._truncateToN(new n(t,16)),r=this.keyPair(r,"hex"),e=new h(e,"hex");var i=e.r,o=e.s;if(i.cmpn(1)<0||i.cmp(this.n)>=0)return!1;if(o.cmpn(1)<0||o.cmp(this.n)>=0)return!1;var s=o.invm(this.n),a=s.mul(t).mod(this.n),c=s.mul(i).mod(this.n),u=this.g.mulAdd(a,r.getPublic(),c);return u.isInfinity()?!1:0===u.getX().mod(this.n).cmp(i)}},{}],102:[function(t,e){function r(t,e,n){return e instanceof r?e:n instanceof r?n:(e||(e=n,n=null),null!==e&&"object"==typeof e&&(e.x?(n=e,e=null):(e.priv||e.pub)&&(n=e.pub,e=e.priv)),this.ec=t,this.priv=null,this.pub=null,void(this._importPublicHex(e,n)||("hex"===n&&(n=null),e&&this._importPrivate(e),n&&this._importPublic(n))))}{var n=t(92),i=t(94),o=i.utils;o.assert}e.exports=r,r.prototype.validate=function(){var t=this.getPublic();return t.isInfinity()?{result:!1,reason:"Invalid public key"}:t.validate()?t.mul(this.ec.curve.n).isInfinity()?{result:!0,reason:null}:{result:!1,reason:"Public key * N != O"}:{result:!1,reason:"Public key is not a point"}},r.prototype.getPublic=function(t,e){if(this.pub||(this.pub=this.ec.g.mul(this.priv)),"string"==typeof t&&(e=t,t=null),!e)return this.pub;for(var r=this.ec.curve.p.byteLength(),n=this.pub.getX().toArray(),i=n.length;r>i;i++)n.unshift(0);if(t)var s=[this.pub.getY().isEven()?2:3].concat(n);else{for(var a=this.pub.getY().toArray(),i=a.length;r>i;i++)a.unshift(0);var s=[4].concat(n,a)}return o.encode(s,e)},r.prototype.getPrivate=function(t){return"hex"===t?this.priv.toString(16,2):this.priv},r.prototype._importPrivate=function(t){this.priv=new n(t,16),this.priv=this.priv.mod(this.ec.curve.n)},r.prototype._importPublic=function(t){this.pub=this.ec.curve.point(t.x,t.y)},r.prototype._importPublicHex=function(t,e){t=o.toArray(t,e);var r=this.ec.curve.p.byteLength();if(4===t[0]&&t.length-1===2*r)this.pub=this.ec.curve.point(t.slice(1,1+r),t.slice(1+r,1+2*r));else{if(2!==t[0]&&3!==t[0]||t.length-1!==r)return!1;this.pub=this.ec.curve.pointFromX(3===t[0],t.slice(1,1+r))}return!0},r.prototype.derive=function(t){return t.mul(this.priv).getX()},r.prototype.sign=function(t){return this.ec.sign(t,this)},r.prototype.verify=function(t,e){return this.ec.verify(t,e,this)},r.prototype.inspect=function(){return"<Key priv: "+(this.priv&&this.priv.toString(16,2))+" pub: "+(this.pub&&this.pub.inspect())+" >"}},{}],103:[function(t,e){function r(t,e){return t instanceof r?t:void(this._importDER(t,e)||(s(t&&e,"Signature without r or s"),this.r=new n(t,16),this.s=new n(e,16)))}var n=t(92),i=t(94),o=i.utils,s=o.assert;e.exports=r,r.prototype._importDER=function(t,e){if(t=o.toArray(t,e),t.length<6||48!==t[0]||2!==t[2])return!1;var r=t[1];if(1+r>t.length)return!1;var i=t[3];if(i>=128)return!1;if(4+i+2>=t.length)return!1;if(2!==t[4+i])return!1;var s=t[5+i];return s>=128?!1:4+i+2+s>t.length?!1:(this.r=new n(t.slice(4,4+i)),this.s=new n(t.slice(4+i+2,4+i+2+s)),!0)},r.prototype.toDER=function(t){var e=this.r.toArray(),r=this.s.toArray();128&e[0]&&(e=[0].concat(e)),128&r[0]&&(r=[0].concat(r));var n=e.length+r.length+4,i=[48,n,2,e.length];return i=i.concat(e,[2,r.length],r),o.encode(i,t)}},{}],104:[function(t,e){function r(t){if(!(this instanceof r))return new r(t);this.hash=t.hash,this.predResist=!!t.predResist,this.outLen=this.hash.outSize,this.minEntropy=t.minEntropy||this.hash.hmacStrength,this.reseed=null,this.reseedInterval=null,this.K=null,this.V=null;var e=o.toArray(t.entropy,t.entropyEnc),n=o.toArray(t.nonce,t.nonceEnc),i=o.toArray(t.pers,t.persEnc);s(e.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._init(e,n,i)}var n=t(107),i=t(94),o=i.utils,s=o.assert;e.exports=r,r.prototype._init=function(t,e,r){var n=t.concat(e).concat(r);this.K=new Array(this.outLen/8),this.V=new Array(this.outLen/8);for(var i=0;i<this.V.length;i++)this.K[i]=0,this.V[i]=1;this._update(n),this.reseed=1,this.reseedInterval=281474976710656},r.prototype._hmac=function(){return new n.hmac(this.hash,this.K)},r.prototype._update=function(t){var e=this._hmac().update(this.V).update([0]);t&&(e=e.update(t)),this.K=e.digest(),this.V=this._hmac().update(this.V).digest(),t&&(this.K=this._hmac().update(this.V).update([1]).update(t).digest(),this.V=this._hmac().update(this.V).digest())},r.prototype.reseed=function(t,e,r,n){"string"!=typeof e&&(n=r,r=e,e=null),t=o.toBuffer(t,e),r=o.toBuffer(r,n),s(t.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._update(t.concat(r||[])),this.reseed=1},r.prototype.generate=function(t,e,r,n){if(this.reseed>this.reseedInterval)throw new Error("Reseed is required");"string"!=typeof e&&(n=r,r=e,e=null),r&&(r=o.toArray(r,n),this._update(r));for(var i=[];i.length<t;)this.V=this._hmac().update(this.V).digest(),i=i.concat(this.V);var s=i.slice(0,t);return this._update(r),this.reseed++,o.encode(s,e)}},{}],105:[function(t,e,r){function n(t,e){if(Array.isArray(t))return t.slice();if(!t)return[];var r=[];if("string"==typeof t)if(e){if("hex"===e){t=t.replace(/[^a-z0-9]+/gi,""),t.length%2!==0&&(t="0"+t);for(var n=0;n<t.length;n+=2)r.push(parseInt(t[n]+t[n+1],16))}}else for(var n=0;n<t.length;n++){var i=t.charCodeAt(n),o=i>>8,s=255&i;o?r.push(o,s):r.push(s)}else for(var n=0;n<t.length;n++)r[n]=0|t[n];return r}function i(t){for(var e="",r=0;r<t.length;r++)e+=o(t[r].toString(16));return e}function o(t){return 1===t.length?"0"+t:t}function s(t,e){for(var r=[],n=1<<e+1,i=t.clone();i.cmpn(1)>=0;){var o;if(i.isOdd()){var s=i.andln(n-1);o=s>(n>>1)-1?(n>>1)-s:s,i.isubn(o)}else o=0;r.push(o);for(var a=0!==i.cmpn(0)&&0===i.andln(n-1)?e+1:1,h=1;a>h;h++)r.push(0);i.ishrn(a)}return r}function a(t,e){var r=[[],[]];t=t.clone(),e=e.clone();for(var n=0,i=0;t.cmpn(-n)>0||e.cmpn(-i)>0;){var o=t.andln(3)+n&3,s=e.andln(3)+i&3;3===o&&(o=-1),3===s&&(s=-1);var a;if(0===(1&o))a=0;else{var h=t.andln(7)+n&7;a=3!==h&&5!==h||2!==s?o:-o}r[0].push(a);var c;if(0===(1&s))c=0;else{var h=e.andln(7)+i&7;c=3!==h&&5!==h||2!==o?s:-s}r[1].push(c),2*n===a+1&&(n=1-n),2*i===c+1&&(i=1-i),t.ishrn(1),e.ishrn(1)}return r}var h=(t(92),r);h.assert=function(t,e){if(!t)throw new Error(e||"Assertion failed")},h.toArray=n,h.toHex=i,h.encode=function(t,e){return"hex"===e?i(t):t},h.zero2=o,h.getNAF=s,h.getJSF=a},{}],106:[function(t,e){function r(t){this.rand=t}var n;if(e.exports=function(t){return n||(n=new r(null)),n.generate(t)},e.exports.Rand=r,r.prototype.generate=function(t){return this._rand(t)},"object"==typeof window)r.prototype._rand=window.crypto&&window.crypto.getRandomValues?function(t){var e=new Uint8Array(t);return window.crypto.getRandomValues(e),e}:window.msCrypto&&window.msCrypto.getRandomValues?function(t){var e=new Uint8Array(t);return window.msCrypto.getRandomValues(e),e}:function(){throw new Error("Not implemented yet")};else try{var i=t("crypto");r.prototype._rand=function(t){return i.randomBytes(t)}}catch(t){r.prototype._rand=function(t){for(var e=new Uint8Array(t),r=0;r<e.length;r++)e[r]=this.rand.getByte();return e}}},{}],107:[function(t,e,r){var n=r;n.utils=t(112),n.common=t(108),n.sha=t(111),n.ripemd=t(110),n.hmac=t(109),n.sha1=n.sha.sha1,n.sha256=n.sha.sha256,n.sha224=n.sha.sha224,n.sha384=n.sha.sha384,n.sha512=n.sha.sha512,n.ripemd160=n.ripemd.ripemd160},{}],108:[function(t,e,r){function n(){this.pending=null,this.pendingTotal=0,this.blockSize=this.constructor.blockSize,this.outSize=this.constructor.outSize,this.hmacStrength=this.constructor.hmacStrength,this.padLength=this.constructor.padLength/8,this.endian="big",this._delta8=this.blockSize/8,this._delta32=this.blockSize/32}var i=t(107),o=i.utils,s=o.assert;r.BlockHash=n,n.prototype.update=function(t,e){if(t=o.toArray(t,e),this.pending=this.pending?this.pending.concat(t):t,this.pendingTotal+=t.length,this.pending.length>=this._delta8){t=this.pending;var r=t.length%this._delta8;this.pending=t.slice(t.length-r,t.length),0===this.pending.length&&(this.pending=null),t=o.join32(t,0,t.length-r,this.endian);for(var n=0;n<t.length;n+=this._delta32)this._update(t,n,n+this._delta32)}return this},n.prototype.digest=function(t){return this.update(this._pad()),s(null===this.pending),this._digest(t)},n.prototype._pad=function(){var t=this.pendingTotal,e=this._delta8,r=e-(t+this.padLength)%e,n=new Array(r+this.padLength);n[0]=128;for(var i=1;r>i;i++)n[i]=0;if(t<<=3,"big"===this.endian){for(var o=8;o<this.padLength;o++)n[i++]=0;n[i++]=0,n[i++]=0,n[i++]=0,n[i++]=0,n[i++]=t>>>24&255,n[i++]=t>>>16&255,n[i++]=t>>>8&255,n[i++]=255&t}else{n[i++]=255&t,n[i++]=t>>>8&255,n[i++]=t>>>16&255,n[i++]=t>>>24&255,n[i++]=0,n[i++]=0,n[i++]=0,n[i++]=0;for(var o=8;o<this.padLength;o++)n[i++]=0}return n}},{}],109:[function(t,e,r){function n(t,e,r){return this instanceof n?(this.Hash=t,this.blockSize=t.blockSize/8,this.outSize=t.outSize/8,this.inner=null,this.outer=null,void this._init(o.toArray(e,r))):new n(t,e,r)}var i=t(107),o=i.utils,s=o.assert;e.exports=n,n.prototype._init=function(t){t.length>this.blockSize&&(t=(new this.Hash).update(t).digest()),s(t.length<=this.blockSize);for(var e=t.length;e<this.blockSize;e++)t.push(0);for(var e=0;e<t.length;e++)t[e]^=54;this.inner=(new this.Hash).update(t);for(var e=0;e<t.length;e++)t[e]^=106;this.outer=(new this.Hash).update(t)},n.prototype.update=function(t,e){return this.inner.update(t,e),this},n.prototype.digest=function(t){return this.outer.update(this.inner.digest()),this.outer.digest(t)}},{}],110:[function(t,e,r){function n(){return this instanceof n?(l.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],void(this.endian="little")):new n}function i(t,e,r,n){return 15>=t?e^r^n:31>=t?e&r|~e&n:47>=t?(e|~r)^n:63>=t?e&n|r&~n:e^(r|~n)}function o(t){return 15>=t?0:31>=t?1518500249:47>=t?1859775393:63>=t?2400959708:2840853838}function s(t){return 15>=t?1352829926:31>=t?1548603684:47>=t?1836072691:63>=t?2053994217:0}var a=t(107),h=a.utils,c=h.rotl32,u=h.sum32,f=h.sum32_3,d=h.sum32_4,l=a.common.BlockHash;h.inherits(n,l),r.ripemd160=n,n.blockSize=512,n.outSize=160,n.hmacStrength=192,n.padLength=64,n.prototype._update=function(t,e){for(var r=this.h[0],n=this.h[1],a=this.h[2],h=this.h[3],l=this.h[4],y=r,m=n,w=a,x=h,_=l,S=0;80>S;S++){var T=u(c(d(r,i(S,n,a,h),t[p[S]+e],o(S)),b[S]),l);r=l,l=h,h=c(a,10),a=n,n=T,T=u(c(d(y,i(79-S,m,w,x),t[v[S]+e],s(S)),g[S]),_),y=_,_=x,x=c(w,10),w=m,m=T}T=f(this.h[1],a,x),this.h[1]=f(this.h[2],h,_),this.h[2]=f(this.h[3],l,y),this.h[3]=f(this.h[4],r,m),this.h[4]=f(this.h[0],n,w),this.h[0]=T},n.prototype._digest=function(t){return"hex"===t?h.toHex32(this.h,"little"):h.split32(this.h,"little")};var p=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],v=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],b=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],g=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]},{}],111:[function(t,e,r){function n(){return this instanceof n?(H.call(this),this.h=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],this.k=X,void(this.W=new Array(64))):new n}function i(){return this instanceof i?(n.call(this),void(this.h=[3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428])):new i}function o(){return this instanceof o?(H.call(this),this.h=[1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209],this.k=K,void(this.W=new Array(160))):new o}function s(){return this instanceof s?(o.call(this),void(this.h=[3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428])):new s}function a(){return this instanceof a?(H.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],void(this.W=new Array(80))):new a}function h(t,e,r){return t&e^~t&r}function c(t,e,r){return t&e^t&r^e&r}function u(t,e,r){return t^e^r}function f(t){return B(t,2)^B(t,13)^B(t,22)}function d(t){return B(t,6)^B(t,11)^B(t,25)}function l(t){return B(t,7)^B(t,18)^t>>>3}function p(t){return B(t,17)^B(t,19)^t>>>10}function v(t,e,r,n){return 0===t?h(e,r,n):1===t||3===t?u(e,r,n):2===t?c(e,r,n):void 0}function b(t,e,r,n,i){var o=t&r^~t&i;return 0>o&&(o+=4294967296),o}function g(t,e,r,n,i,o){var s=e&n^~e&o;return 0>s&&(s+=4294967296),s}function y(t,e,r,n,i){var o=t&r^t&i^r&i;return 0>o&&(o+=4294967296),o}function m(t,e,r,n,i,o){var s=e&n^e&o^n&o;return 0>s&&(s+=4294967296),s}function w(t,e){var r=D(t,e,28),n=D(e,t,2),i=D(e,t,7),o=r^n^i;return 0>o&&(o+=4294967296),o}function x(t,e){var r=j(t,e,28),n=j(e,t,2),i=j(e,t,7),o=r^n^i;return 0>o&&(o+=4294967296),o}function _(t,e){var r=D(t,e,14),n=D(t,e,18),i=D(e,t,9),o=r^n^i;return 0>o&&(o+=4294967296),o}function S(t,e){var r=j(t,e,14),n=j(t,e,18),i=j(e,t,9),o=r^n^i;return 0>o&&(o+=4294967296),o}function T(t,e){var r=D(t,e,1),n=D(t,e,8),i=F(t,e,7),o=r^n^i;return 0>o&&(o+=4294967296),o}function A(t,e){var r=j(t,e,1),n=j(t,e,8),i=U(t,e,7),o=r^n^i;return 0>o&&(o+=4294967296),o}function E(t,e){var r=D(t,e,19),n=D(e,t,29),i=F(t,e,6),o=r^n^i;return 0>o&&(o+=4294967296),o}function C(t,e){var r=j(t,e,19),n=j(e,t,29),i=U(t,e,6),o=r^n^i;return 0>o&&(o+=4294967296),o}var M=t(107),R=M.utils,k=R.assert,B=R.rotr32,I=R.rotl32,P=R.sum32,L=R.sum32_4,O=R.sum32_5,D=R.rotr64_hi,j=R.rotr64_lo,F=R.shr64_hi,U=R.shr64_lo,N=R.sum64,G=R.sum64_hi,W=R.sum64_lo,z=R.sum64_4_hi,q=R.sum64_4_lo,Y=R.sum64_5_hi,V=R.sum64_5_lo,H=M.common.BlockHash,X=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],K=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591],J=[1518500249,1859775393,2400959708,3395469782];R.inherits(n,H),r.sha256=n,n.blockSize=512,n.outSize=256,n.hmacStrength=192,n.padLength=64,n.prototype._update=function(t,e){for(var r=this.W,n=0;16>n;n++)r[n]=t[e+n];for(;n<r.length;n++)r[n]=L(p(r[n-2]),r[n-7],l(r[n-15]),r[n-16]);var i=this.h[0],o=this.h[1],s=this.h[2],a=this.h[3],u=this.h[4],v=this.h[5],b=this.h[6],g=this.h[7];k(this.k.length===r.length);for(var n=0;n<r.length;n++){var y=O(g,d(u),h(u,v,b),this.k[n],r[n]),m=P(f(i),c(i,o,s));g=b,b=v,v=u,u=P(a,y),a=s,s=o,o=i,i=P(y,m)}this.h[0]=P(this.h[0],i),this.h[1]=P(this.h[1],o),this.h[2]=P(this.h[2],s),this.h[3]=P(this.h[3],a),this.h[4]=P(this.h[4],u),this.h[5]=P(this.h[5],v),this.h[6]=P(this.h[6],b),this.h[7]=P(this.h[7],g)},n.prototype._digest=function(t){return"hex"===t?R.toHex32(this.h,"big"):R.split32(this.h,"big")},R.inherits(i,n),r.sha224=i,i.blockSize=512,i.outSize=224,i.hmacStrength=192,i.padLength=64,i.prototype._digest=function(t){return"hex"===t?R.toHex32(this.h.slice(0,7),"big"):R.split32(this.h.slice(0,7),"big")},R.inherits(o,H),r.sha512=o,o.blockSize=1024,o.outSize=512,o.hmacStrength=192,o.padLength=128,o.prototype._prepareBlock=function(t,e){for(var r=this.W,n=0;32>n;n++)r[n]=t[e+n];for(;n<r.length;n+=2){var i=E(r[n-4],r[n-3]),o=C(r[n-4],r[n-3]),s=r[n-14],a=r[n-13],h=T(r[n-30],r[n-29]),c=A(r[n-30],r[n-29]),u=r[n-32],f=r[n-31];r[n]=z(i,o,s,a,h,c,u,f),r[n+1]=q(i,o,s,a,h,c,u,f)}},o.prototype._update=function(t,e){this._prepareBlock(t,e);var r=this.W,n=this.h[0],i=this.h[1],o=this.h[2],s=this.h[3],a=this.h[4],h=this.h[5],c=this.h[6],u=this.h[7],f=this.h[8],d=this.h[9],l=this.h[10],p=this.h[11],v=this.h[12],T=this.h[13],A=this.h[14],E=this.h[15];k(this.k.length===r.length);for(var C=0;C<r.length;C+=2){var M=A,R=E,B=_(f,d),I=S(f,d),P=b(f,d,l,p,v,T),L=g(f,d,l,p,v,T),O=this.k[C],D=this.k[C+1],j=r[C],F=r[C+1],U=Y(M,R,B,I,P,L,O,D,j,F),z=V(M,R,B,I,P,L,O,D,j,F),M=w(n,i),R=x(n,i),B=y(n,i,o,s,a,h),I=m(n,i,o,s,a,h),q=G(M,R,B,I),H=W(M,R,B,I);A=v,E=T,v=l,T=p,l=f,p=d,f=G(c,u,U,z),d=W(u,u,U,z),c=a,u=h,a=o,h=s,o=n,s=i,n=G(U,z,q,H),i=W(U,z,q,H)}N(this.h,0,n,i),N(this.h,2,o,s),N(this.h,4,a,h),N(this.h,6,c,u),N(this.h,8,f,d),N(this.h,10,l,p),N(this.h,12,v,T),N(this.h,14,A,E)},o.prototype._digest=function(t){return"hex"===t?R.toHex32(this.h,"big"):R.split32(this.h,"big")},R.inherits(s,o),r.sha384=s,s.blockSize=1024,s.outSize=384,s.hmacStrength=192,s.padLength=128,s.prototype._digest=function(t){return"hex"===t?R.toHex32(this.h.slice(0,12),"big"):R.split32(this.h.slice(0,12),"big")},R.inherits(a,H),r.sha1=a,a.blockSize=512,a.outSize=160,a.hmacStrength=80,a.padLength=64,a.prototype._update=function(t,e){for(var r=this.W,n=0;16>n;n++)r[n]=t[e+n];for(;n<r.length;n++)r[n]=I(r[n-3]^r[n-8]^r[n-14]^r[n-16],1);for(var i=this.h[0],o=this.h[1],s=this.h[2],a=this.h[3],h=this.h[4],n=0;n<r.length;n++){var c=~~(n/20),u=O(I(i,5),v(c,o,s,a),h,r[n],J[c]);h=a,a=s,s=I(o,30),o=i,i=u}this.h[0]=P(this.h[0],i),this.h[1]=P(this.h[1],o),this.h[2]=P(this.h[2],s),this.h[3]=P(this.h[3],a),this.h[4]=P(this.h[4],h)},a.prototype._digest=function(t){return"hex"===t?R.toHex32(this.h,"big"):R.split32(this.h,"big")}},{}],112:[function(t,e,r){function n(t,e){if(Array.isArray(t))return t.slice();if(!t)return[];var r=[];if("string"==typeof t)if(e){if("hex"===e){t=t.replace(/[^a-z0-9]+/gi,""),t.length%2!==0&&(t="0"+t);for(var n=0;n<t.length;n+=2)r.push(parseInt(t[n]+t[n+1],16))}}else for(var n=0;n<t.length;n++){var i=t.charCodeAt(n),o=i>>8,s=255&i;o?r.push(o,s):r.push(s)}else for(var n=0;n<t.length;n++)r[n]=0|t[n];return r}function i(t){for(var e="",r=0;r<t.length;r++)e+=a(t[r].toString(16));return e}function o(t){var e=t>>>24|t>>>8&65280|t<<8&16711680|(255&t)<<24;return e>>>0}function s(t,e){for(var r="",n=0;n<t.length;n++){var i=t[n];"little"===e&&(i=o(i)),r+=h(i.toString(16))}return r}function a(t){return 1===t.length?"0"+t:t}function h(t){return 7===t.length?"0"+t:6===t.length?"00"+t:5===t.length?"000"+t:4===t.length?"0000"+t:3===t.length?"00000"+t:2===t.length?"000000"+t:1===t.length?"0000000"+t:t}function c(t,e,r,n){var i=r-e;g(i%4===0);for(var o=new Array(i/4),s=0,a=e;s<o.length;s++,a+=4){var h;h="big"===n?t[a]<<24|t[a+1]<<16|t[a+2]<<8|t[a+3]:t[a+3]<<24|t[a+2]<<16|t[a+1]<<8|t[a],o[s]=h>>>0}return o}function u(t,e){for(var r=new Array(4*t.length),n=0,i=0;n<t.length;n++,i+=4){var o=t[n];"big"===e?(r[i]=o>>>24,r[i+1]=o>>>16&255,r[i+2]=o>>>8&255,r[i+3]=255&o):(r[i+3]=o>>>24,r[i+2]=o>>>16&255,r[i+1]=o>>>8&255,r[i]=255&o)}return r}function f(t,e){return t>>>e|t<<32-e}function d(t,e){return t<<e|t>>>32-e}function l(t,e){return t+e>>>0}function p(t,e,r){return t+e+r>>>0}function v(t,e,r,n){return t+e+r+n>>>0}function b(t,e,r,n,i){return t+e+r+n+i>>>0}function g(t,e){if(!t)throw new Error(e||"Assertion failed")}function y(t,e,r,n){var i=t[e],o=t[e+1],s=n+o>>>0,a=(n>s?1:0)+r+i;t[e]=a>>>0,t[e+1]=s}function m(t,e,r,n){var i=e+n>>>0,o=(e>i?1:0)+t+r;return o>>>0}function w(t,e,r,n){var i=e+n;return i>>>0}function x(t,e,r,n,i,o,s,a){var h=0,c=e;c=c+n>>>0,h+=e>c?1:0,c=c+o>>>0,h+=o>c?1:0,c=c+a>>>0,h+=a>c?1:0;var u=t+r+i+s+h;return u>>>0}function _(t,e,r,n,i,o,s,a){var h=e+n+o+a;return h>>>0}function S(t,e,r,n,i,o,s,a,h,c){var u=0,f=e;f=f+n>>>0,u+=e>f?1:0,f=f+o>>>0,u+=o>f?1:0,f=f+a>>>0,u+=a>f?1:0,f=f+c>>>0,u+=c>f?1:0;var d=t+r+i+s+h+u;return d>>>0}function T(t,e,r,n,i,o,s,a,h,c){var u=e+n+o+a+c;return u>>>0}function A(t,e,r){var n=e<<32-r|t>>>r;return n>>>0}function E(t,e,r){var n=t<<32-r|e>>>r;return n>>>0}function C(t,e,r){return t>>>r}function M(t,e,r){var n=t<<32-r|e>>>r;return n>>>0}var R=r,k=t(206);R.toArray=n,R.toHex=i,R.htonl=o,R.toHex32=s,R.zero2=a,R.zero8=h,R.join32=c,R.split32=u,R.rotr32=f,R.rotl32=d,R.sum32=l,R.sum32_3=p,R.sum32_4=v,R.sum32_5=b,R.assert=g,R.inherits=k,r.sum64=y,r.sum64_hi=m,r.sum64_lo=w,r.sum64_4_hi=x,r.sum64_4_lo=_,r.sum64_5_hi=S,r.sum64_5_lo=T,r.rotr64_hi=A,r.rotr64_lo=E,r.shr64_hi=C,r.shr64_lo=M},{}],113:[function(t,e){e.exports={name:"elliptic",version:"1.0.1",description:"EC cryptography",main:"lib/elliptic.js",scripts:{test:"mocha --reporter=spec test/*-test.js"},repository:{type:"git",url:"git@github.com:indutny/elliptic"},keywords:["EC","Elliptic","curve","Cryptography"],author:{name:"Fedor Indutny",email:"fedor@indutny.com"},license:"MIT",bugs:{url:"https://github.com/indutny/elliptic/issues"},homepage:"https://github.com/indutny/elliptic",devDependencies:{browserify:"^3.44.2",mocha:"^1.18.2","uglify-js":"^2.4.13"},dependencies:{"bn.js":"^1.0.0",brorand:"^1.0.1","hash.js":"^1.0.0",inherits:"^2.0.1"},gitHead:"17dc013761dd1efcfb868e2b06b0b897627b40be",_id:"elliptic@1.0.1",_shasum:"d180376b66a17d74995c837796362ac4d22aefe3",_from:"elliptic@>=1.0.0 <2.0.0",_npmVersion:"1.4.28",_npmUser:{name:"indutny",email:"fedor@indutny.com"},maintainers:[{name:"indutny",email:"fedor@indutny.com"}],dist:{shasum:"d180376b66a17d74995c837796362ac4d22aefe3",tarball:"http://registry.npmjs.org/elliptic/-/elliptic-1.0.1.tgz"},directories:{},_resolved:"https://registry.npmjs.org/elliptic/-/elliptic-1.0.1.tgz",readme:"ERROR: No README data found!"}},{}],114:[function(t,e){(function(t){e.exports=function(e,r,n,i){i/=8;for(var o,s,a,h=0,c=new t(i),u=0;;){if(o=e.createHash("md5"),u++>0&&o.update(s),o.update(r),o.update(n),s=o.digest(),a=0,i>0)for(;;){if(0===i)break;if(a===s.length)break;c[h++]=s[a++],i--}if(0===i)break}for(a=0;a<s.length;a++)s[a]=0;return c}}).call(this,t(63).Buffer)},{}],115:[function(t,e){e.exports={"2.16.840.1.101.3.4.1.1":"aes-128-ecb","2.16.840.1.101.3.4.1.2":"aes-128-cbc","2.16.840.1.101.3.4.1.3":"aes-128-ofb","2.16.840.1.101.3.4.1.4":"aes-128-cfb","2.16.840.1.101.3.4.1.21":"aes-192-ecb","2.16.840.1.101.3.4.1.22":"aes-192-cbc","2.16.840.1.101.3.4.1.23":"aes-192-ofb","2.16.840.1.101.3.4.1.24":"aes-192-cfb","2.16.840.1.101.3.4.1.41":"aes-256-ecb","2.16.840.1.101.3.4.1.42":"aes-256-cbc","2.16.840.1.101.3.4.1.43":"aes-256-ofb","2.16.840.1.101.3.4.1.44":"aes-256-cfb"}},{}],116:[function(t,e,r){var n=t(120),i=t(119),o=n.define("RSAPrivateKey",function(){this.seq().obj(this.key("version").int(),this.key("modulus").int(),this.key("publicExponent").int(),this.key("privateExponent").int(),this.key("prime1").int(),this.key("prime2").int(),this.key("exponent1").int(),this.key("exponent2").int(),this.key("coefficient").int())});r.RSAPrivateKey=o;var s=n.define("RSAPublicKey",function(){this.seq().obj(this.key("modulus").int(),this.key("publicExponent").int())});r.RSAPublicKey=s;var a=i.SubjectPublicKeyInfo;r.PublicKey=a;var h=n.define("ECPublicKey",function(){this.seq().obj(this.key("algorithm").seq().obj(this.key("id").objid(),this.key("curve").objid()),this.key("subjectPrivateKey").bitstr())});r.ECPublicKey=h;var c=n.define("ECPrivateWrap",function(){this.seq().obj(this.key("version").int(),this.key("algorithm").seq().obj(this.key("id").objid(),this.key("curve").objid()),this.key("subjectPrivateKey").octstr())});r.ECPrivateWrap=c;var u=n.define("PrivateKeyInfo",function(){this.seq().obj(this.key("version").int(),this.key("algorithm").use(i.AlgorithmIdentifier),this.key("subjectPrivateKey").octstr())});r.PrivateKey=u;var f=n.define("EncryptedPrivateKeyInfo",function(){this.seq().obj(this.key("algorithm").seq().obj(this.key("id").objid(),this.key("decrypt").seq().obj(this.key("kde").seq().obj(this.key("id").objid(),this.key("kdeparams").seq().obj(this.key("salt").octstr(),this.key("iters").int())),this.key("cipher").seq().obj(this.key("algo").objid(),this.key("iv").octstr()))),this.key("subjectPrivateKey").octstr())}),d=n.define("dsaParams",function(){this.seq().obj(this.key("algorithm").objid(),this.key("parameters").seq().obj(this.key("p").int(),this.key("q").int(),this.key("g").int()))});r.EncryptedPrivateKey=f;var l=n.define("DSAPublicKey",function(){this.seq().obj(this.key("algorithm").use(d),this.key("subjectPublicKey").bitstr())});r.DSAPublicKey=l;var p=n.define("DSAPrivateWrap",function(){this.seq().obj(this.key("version").int(),this.key("algorithm").seq().obj(this.key("id").objid(),this.key("parameters").seq().obj(this.key("p").int(),this.key("q").int(),this.key("g").int())),this.key("subjectPrivateKey").octstr())});r.DSAPrivateWrap=p;var v=n.define("DSAPrivateKey",function(){this.seq().obj(this.key("version").int(),this.key("p").int(),this.key("q").int(),this.key("g").int(),this.key("pub_key").int(),this.key("priv_key").int())});r.DSAPrivateKey=v,r.DSAparam=n.define("DSAparam",function(){this.int()});var b=n.define("ECPrivateKey",function(){this.seq().obj(this.key("version").int(),this.key("privateKey").octstr(),this.key("parameters").optional().explicit(0).use(g),this.key("publicKey").optional().explicit(1).bitstr())});r.ECPrivateKey=b;var g=n.define("ECParameters",function(){this.choice({namedCurve:this.objid()})}),y=n.define("ECPrivateKey2",function(){this.seq().obj(this.key("version").int(),this.key("privateKey").octstr(),this.key("publicKey").seq().obj(this.key("key").bitstr()))});r.ECPrivateKey2=y,r.signature=n.define("signature",function(){this.seq().obj(this.key("r").int(),this.key("s").int())})},{}],117:[function(t,e){(function(r){function n(t){for(var e=[];t;){if(t.length<64){e.push(t);break}e.push(t.slice(0,64)),t=t.slice(64)}return e.join("\n")}var i=/Proc-Type: 4,ENCRYPTED\n\r?DEK-Info: AES-((?:128)|(?:192)|(?:256))-CBC,([0-9A-H]+)\n\r?\n\r?([0-9A-z\n\r\+\/\=]+)\n\r?/m,o=/^-----BEGIN (.*)-----\n/,s=t(114);e.exports=function(t,e,a){var h=t.toString(),c=h.match(i);if(!c)return t;var u="aes"+c[1],f=new r(c[2],"hex"),d=new r(c[3].replace(/\n\r?/g,""),"base64"),l=s(a,e,f.slice(0,8),parseInt(c[1])),p=[],v=a.createDecipheriv(u,l,f);p.push(v.update(d)),p.push(v.final());var b=r.concat(p).toString("base64"),g=h.match(o)[1];return"-----BEGIN "+g+"-----\n"+n(b)+"\n-----END "+g+"-----\n"}}).call(this,t(63).Buffer)},{}],118:[function(t,e){(function(r){function n(t,e){var n;"object"!=typeof t||r.isBuffer(t)||(n=t.passphrase,t=t.key),"string"==typeof t&&(t=new r(t)),n&&(t=h(t,n,e));var a,c,u=o.strip(t),f=u.tag,d=new r(u.base64,"base64");switch(f){case"PUBLIC KEY":switch(c=s.PublicKey.decode(d,"der"),a=c.algorithm.algorithm.join(".")){case"1.2.840.113549.1.1.1":return s.RSAPublicKey.decode(c.subjectPublicKey.data,"der");case"1.2.840.10045.2.1":return{type:"ec",data:s.ECPublicKey.decode(d,"der")};case"1.2.840.10040.4.1":return c=s.DSAPublicKey.decode(d,"der"),c.algorithm.parameters.pub_key=s.DSAparam.decode(c.subjectPublicKey.data,"der"),{type:"dsa",data:c.algorithm.parameters};default:throw new Error("unknown key id "+a)}throw new Error("unknown key type "+f);case"ENCRYPTED PRIVATE KEY":d=s.EncryptedPrivateKey.decode(d,"der"),d=i(e,d,n);case"PRIVATE KEY":switch(c=s.PrivateKey.decode(d,"der"),a=c.algorithm.algorithm.join(".")){case"1.2.840.113549.1.1.1":return s.RSAPrivateKey.decode(c.subjectPrivateKey,"der");case"1.2.840.10045.2.1":return c=s.ECPrivateWrap.decode(d,"der"),{curve:c.algorithm.curve,privateKey:s.ECPrivateKey.decode(c.subjectPrivateKey,"der").privateKey};case"1.2.840.10040.4.1":return c=s.DSAPrivateWrap.decode(d,"der"),c.algorithm.parameters.priv_key=s.DSAparam.decode(c.subjectPrivateKey,"der"),{type:"dsa",params:c.algorithm.parameters};default:throw new Error("unknown key id "+a)}throw new Error("unknown key type "+f);case"RSA PUBLIC KEY":return s.RSAPublicKey.decode(d,"der");case"RSA PRIVATE KEY":return s.RSAPrivateKey.decode(d,"der");case"DSA PRIVATE KEY":return{type:"dsa",params:s.DSAPrivateKey.decode(d,"der")};case"EC PRIVATE KEY":return d=s.ECPrivateKey.decode(d,"der"),{curve:d.parameters.value,privateKey:d.privateKey};default:throw new Error("unknown key type "+f)}}function i(t,e,n){var i=e.algorithm.decrypt.kde.kdeparams.salt,o=e.algorithm.decrypt.kde.kdeparams.iters,s=a[e.algorithm.decrypt.cipher.algo.join(".")],h=e.algorithm.decrypt.cipher.iv,c=e.subjectPrivateKey,u=parseInt(s.split("-")[1],10)/8,f=t.pbkdf2Sync(n,i,o,u),d=t.createDecipheriv(s,f,h),l=[];return l.push(d.update(c)),l.push(d.final()),r.concat(l)}var o=t(133),s=t(116),a=t(115),h=t(117);e.exports=n,n.signature=s.signature
}).call(this,t(63).Buffer)},{}],119:[function(t,e,r){try{var n=t(120)}catch(e){var n=t("../..")}var i=n.define("CRLReason",function(){this.enum({0:"unspecified",1:"keyCompromise",2:"CACompromise",3:"affiliationChanged",4:"superseded",5:"cessationOfOperation",6:"certificateHold",8:"removeFromCRL",9:"privilegeWithdrawn",10:"AACompromise"})});r.CRLReason=i;var o=n.define("AlgorithmIdentifier",function(){this.seq().obj(this.key("algorithm").objid(),this.key("parameters").optional().any())});r.AlgorithmIdentifier=o;var s=n.define("Certificate",function(){this.seq().obj(this.key("tbsCertificate").use(a),this.key("signatureAlgorithm").use(o),this.key("signature").bitstr())});r.Certificate=s;var a=n.define("TBSCertificate",function(){this.seq().obj(this.key("version").def("v1").explicit(0).use(h),this.key("serialNumber").use(c),this.key("signature").use(o),this.key("issuer").use(b),this.key("validity").use(u),this.key("subject").use(b),this.key("subjectPublicKeyInfo").use(l),this.key("issuerUniqueID").optional().explicit(1).use(d),this.key("subjectUniqueID").optional().explicit(2).use(d),this.key("extensions").optional().explicit(3).use(p))});r.TBSCertificate=a;var h=n.define("Version",function(){this.int({0:"v1",1:"v2",2:"v3"})});r.Version=h;var c=n.define("CertificateSerialNumber",function(){this.int()});r.CertificateSerialNumber=c;var u=n.define("Validity",function(){this.seq().obj(this.key("notBefore").use(f),this.key("notAfter").use(f))});r.Validity=u;var f=n.define("Time",function(){this.choice({utcTime:this.utctime(),genTime:this.gentime()})});r.Time=f;var d=n.define("UniqueIdentifier",function(){this.bitstr()});r.UniqueIdentifier=d;var l=n.define("SubjectPublicKeyInfo",function(){this.seq().obj(this.key("algorithm").use(o),this.key("subjectPublicKey").bitstr())});r.SubjectPublicKeyInfo=l;var p=n.define("Extensions",function(){this.seqof(v)});r.Extensions=p;var v=n.define("Extension",function(){this.seq().obj(this.key("extnID").objid(),this.key("critical").bool().def(!1),this.key("extnValue").octstr())});r.Extension=v;var b=n.define("Name",function(){this.choice({rdn:this.use(g)})});r.Name=b;var g=n.define("RDNSequence",function(){this.seqof(y)});r.RDNSequence=g;var y=n.define("RelativeDistinguishedName",function(){this.setof(m)});r.RelativeDistinguishedName=y;var m=n.define("AttributeTypeAndValue",function(){this.seq().obj(this.key("type").use(w),this.key("value").use(x))});r.AttributeTypeAndValue=m;var w=n.define("AttributeType",function(){this.objid()});r.AttributeType=w;var x=n.define("AttributeValue",function(){this.any()});r.AttributeValue=x},{}],120:[function(t,e,r){var n=r;n.bignum=t(92),n.define=t(121).define,n.base=t(123),n.constants=t(127),n.decoders=t(129),n.encoders=t(131)},{}],121:[function(t,e,r){function n(t,e){this.name=t,this.body=e,this.decoders={},this.encoders={}}var i=t(120),o=t(206),s=t(224),a=r;a.define=function(t,e){return new n(t,e)},n.prototype._createNamed=function(t){var e=s.runInThisContext("(function "+this.name+"(entity) {\n  this._initNamed(entity);\n})");return o(e,t),e.prototype._initNamed=function(e){t.call(this,e)},new e(this)},n.prototype._getDecoder=function(t){return this.decoders.hasOwnProperty(t)||(this.decoders[t]=this._createNamed(i.decoders[t])),this.decoders[t]},n.prototype.decode=function(t,e,r){return this._getDecoder(e).decode(t,r)},n.prototype._getEncoder=function(t){return this.encoders.hasOwnProperty(t)||(this.encoders[t]=this._createNamed(i.encoders[t])),this.encoders[t]},n.prototype.encode=function(t,e,r){return this._getEncoder(e).encode(t,r)}},{}],122:[function(t,e,r){function n(t,e){return s.call(this,e),a.isBuffer(t)?(this.base=t,this.offset=0,void(this.length=t.length)):void this.error("Input not Buffer")}function i(t,e){if(Array.isArray(t))this.length=0,this.value=t.map(function(t){return t instanceof i||(t=new i(t,e)),this.length+=t.length,t},this);else if("number"==typeof t){if(!(t>=0&&255>=t))return e.error("non-byte EncoderBuffer value");this.value=t,this.length=1}else if("string"==typeof t)this.value=t,this.length=a.byteLength(t);else{if(!a.isBuffer(t))return e.error("Unsupported type: "+typeof t);this.value=t,this.length=t.length}}var o=t(206),s=t(123).Reporter,a=t(63).Buffer;o(n,s),r.DecoderBuffer=n,n.prototype.save=function(){return{offset:this.offset}},n.prototype.restore=function(t){var e=new n(this.base);return e.offset=t.offset,e.length=this.offset,this.offset=t.offset,e},n.prototype.isEmpty=function(){return this.offset===this.length},n.prototype.readUInt8=function(t){return this.offset+1<=this.length?this.base.readUInt8(this.offset++,!0):this.error(t||"DecoderBuffer overrun")},n.prototype.skip=function(t,e){if(!(this.offset+t<=this.length))return this.error(e||"DecoderBuffer overrun");var r=new n(this.base);return r._reporterState=this._reporterState,r.offset=this.offset,r.length=this.offset+t,this.offset+=t,r},n.prototype.raw=function(t){return this.base.slice(t?t.offset:this.offset,this.length)},r.EncoderBuffer=i,i.prototype.join=function(t,e){return t||(t=new a(this.length)),e||(e=0),0===this.length?t:(Array.isArray(this.value)?this.value.forEach(function(r){r.join(t,e),e+=r.length}):("number"==typeof this.value?t[e]=this.value:"string"==typeof this.value?t.write(this.value,e):a.isBuffer(this.value)&&this.value.copy(t,e),e+=this.length),t)}},{}],123:[function(t,e,r){var n=r;n.Reporter=t(125).Reporter,n.DecoderBuffer=t(122).DecoderBuffer,n.EncoderBuffer=t(122).EncoderBuffer,n.Node=t(124)},{}],124:[function(t,e){function r(t,e){var r={};this._baseState=r,r.enc=t,r.parent=e||null,r.children=null,r.tag=null,r.args=null,r.reverseArgs=null,r.choice=null,r.optional=!1,r.any=!1,r.obj=!1,r.use=null,r.useDecoder=null,r.key=null,r.default=null,r.explicit=null,r.implicit=null,r.parent||(r.children=[],this._wrap())}var n=t(123).Reporter,i=t(123).EncoderBuffer,o=t(132),s=["seq","seqof","set","setof","octstr","bitstr","objid","bool","gentime","utctime","null_","enum","int","ia5str"],a=["key","obj","use","optional","explicit","implicit","def","choice","any"].concat(s),h=["_peekTag","_decodeTag","_use","_decodeStr","_decodeObjid","_decodeTime","_decodeNull","_decodeInt","_decodeBool","_decodeList","_encodeComposite","_encodeStr","_encodeObjid","_encodeTime","_encodeNull","_encodeInt","_encodeBool"];e.exports=r;var c=["enc","parent","children","tag","args","reverseArgs","choice","optional","any","obj","use","alteredUse","key","default","explicit","implicit"];r.prototype.clone=function(){var t=this._baseState,e={};c.forEach(function(r){e[r]=t[r]});var r=new this.constructor(e.parent);return r._baseState=e,r},r.prototype._wrap=function(){var t=this._baseState;a.forEach(function(e){this[e]=function(){var r=new this.constructor(this);return t.children.push(r),r[e].apply(r,arguments)}},this)},r.prototype._init=function(t){var e=this._baseState;o(null===e.parent),t.call(this),e.children=e.children.filter(function(t){return t._baseState.parent===this},this),o.equal(e.children.length,1,"Root node can have only one child")},r.prototype._useArgs=function(t){var e=this._baseState,r=t.filter(function(t){return t instanceof this.constructor},this);t=t.filter(function(t){return!(t instanceof this.constructor)},this),0!==r.length&&(o(null===e.children),e.children=r,r.forEach(function(t){t._baseState.parent=this},this)),0!==t.length&&(o(null===e.args),e.args=t,e.reverseArgs=t.map(function(t){if("object"!=typeof t||t.constructor!==Object)return t;var e={};return Object.keys(t).forEach(function(r){r==(0|r)&&(r|=0);var n=t[r];e[n]=r}),e}))},h.forEach(function(t){r.prototype[t]=function(){var e=this._baseState;throw new Error(t+" not implemented for encoding: "+e.enc)}}),s.forEach(function(t){r.prototype[t]=function(){var e=this._baseState,r=Array.prototype.slice.call(arguments);return o(null===e.tag),e.tag=t,this._useArgs(r),this}}),r.prototype.use=function(t){var e=this._baseState;return o(null===e.use),e.use=t,this},r.prototype.optional=function(){var t=this._baseState;return t.optional=!0,this},r.prototype.def=function(t){var e=this._baseState;return o(null===e.default),e.default=t,e.optional=!0,this},r.prototype.explicit=function(t){var e=this._baseState;return o(null===e.explicit&&null===e.implicit),e.explicit=t,this},r.prototype.implicit=function(t){var e=this._baseState;return o(null===e.explicit&&null===e.implicit),e.implicit=t,this},r.prototype.obj=function(){var t=this._baseState,e=Array.prototype.slice.call(arguments);return t.obj=!0,0!==e.length&&this._useArgs(e),this},r.prototype.key=function t(t){var e=this._baseState;return o(null===e.key),e.key=t,this},r.prototype.any=function(){var t=this._baseState;return t.any=!0,this},r.prototype.choice=function(t){var e=this._baseState;return o(null===e.choice),e.choice=t,this._useArgs(Object.keys(t).map(function(e){return t[e]})),this},r.prototype._decode=function(t){var e=this._baseState;if(null===e.parent)return t.wrapResult(e.children[0]._decode(t));var r,n=e.default,i=!0;if(null!==e.key&&(r=t.enterKey(e.key)),e.optional&&(i=this._peekTag(t,null!==e.explicit?e.explicit:null!==e.implicit?e.implicit:e.tag||0),t.isError(i)))return i;var o;if(e.obj&&i&&(o=t.enterObject()),i){if(null!==e.explicit){var s=this._decodeTag(t,e.explicit);if(t.isError(s))return s;t=s}if(null===e.use&&null===e.choice){if(e.any)var a=t.save();var h=this._decodeTag(t,null!==e.implicit?e.implicit:e.tag,e.any);if(t.isError(h))return h;e.any?n=t.raw(a):t=h}if(n=e.any?n:null===e.choice?this._decodeGeneric(e.tag,t):this._decodeChoice(t),t.isError(n))return n;if(!e.any&&null===e.choice&&null!==e.children){var c=e.children.some(function(e){e._decode(t)});if(c)return err}}return e.obj&&i&&(n=t.leaveObject(o)),null===e.key||null===n&&i!==!0||t.leaveKey(r,e.key,n),n},r.prototype._decodeGeneric=function(t,e){var r=this._baseState;return"seq"===t||"set"===t?null:"seqof"===t||"setof"===t?this._decodeList(e,t,r.args[0]):"octstr"===t||"bitstr"===t||"ia5str"===t?this._decodeStr(e,t):"objid"===t&&r.args?this._decodeObjid(e,r.args[0],r.args[1]):"objid"===t?this._decodeObjid(e,null,null):"gentime"===t||"utctime"===t?this._decodeTime(e,t):"null_"===t?this._decodeNull(e):"bool"===t?this._decodeBool(e):"int"===t||"enum"===t?this._decodeInt(e,r.args&&r.args[0]):null!==r.use?this._getUse(r.use,e._reporterState.obj)._decode(e):e.error("unknown tag: "+t)},r.prototype._getUse=function(t,e){var r=this._baseState;return r.useDecoder=this._use(t,e),o(null===r.useDecoder._baseState.parent),r.useDecoder=r.useDecoder._baseState.children[0],r.implicit!==r.useDecoder._baseState.implicit&&(r.useDecoder=r.useDecoder.clone(),r.useDecoder._baseState.implicit=r.implicit),r.useDecoder},r.prototype._decodeChoice=function(t){var e=this._baseState,r=null,n=!1;return Object.keys(e.choice).some(function(i){var o=t.save(),s=e.choice[i];try{var a=s._decode(t);if(t.isError(a))return!1;r={type:i,value:a},n=!0}catch(e){return t.restore(o),!1}return!0},this),n?r:t.error("Choice not matched")},r.prototype._createEncoderBuffer=function(t){return new i(t,this.reporter)},r.prototype._encode=function(t,e,r){var n=this._baseState;if(null===n.default||n.default!==t){var i=this._encodeValue(t,e,r);if(void 0!==i&&!this._skipDefault(i,e,r))return i}},r.prototype._encodeValue=function(t,e,r){var i=this._baseState;if(null===i.parent)return i.children[0]._encode(t,e||new n);var o=null;if(this.reporter=e,i.optional&&void 0===t){if(null===i.default)return;t=i.default}var s=null,a=!1;if(i.any)o=this._createEncoderBuffer(t);else if(i.choice)o=this._encodeChoice(t,e);else if(i.children)s=i.children.map(function(r){if("null_"===r._baseState.tag)return r._encode(null,e,t);if(null===r._baseState.key)return e.error("Child should have a key");var n=e.enterKey(r._baseState.key);if("object"!=typeof t)return e.error("Child expected, but input is not object");var i=r._encode(t[r._baseState.key],e,t);return e.leaveKey(n),i},this).filter(function(t){return t}),s=this._createEncoderBuffer(s);else if("seqof"===i.tag||"setof"===i.tag){if(!i.args||1!==i.args.length)return e.error("Too many args for : "+i.tag);if(!Array.isArray(t))return e.error("seqof/setof, but data is not Array");var h=this.clone();h._baseState.implicit=null,s=this._createEncoderBuffer(t.map(function(r){var n=this._baseState;return this._getUse(n.args[0],t)._encode(r,e)},h))}else null!==i.use?o=this._getUse(i.use,r)._encode(t,e):(s=this._encodePrimitive(i.tag,t),a=!0);var o;if(!i.any&&null===i.choice){var c=null!==i.implicit?i.implicit:i.tag,u=null===i.implicit?"universal":"context";null===c?null===i.use&&e.error("Tag could be ommited only for .use()"):null===i.use&&(o=this._encodeComposite(c,a,u,s))}return null!==i.explicit&&(o=this._encodeComposite(i.explicit,!1,"context",o)),o},r.prototype._encodeChoice=function(t,e){var r=this._baseState,n=r.choice[t.type];return n||o(!1,t.type+" not found in "+JSON.stringify(Object.keys(r.choice))),n._encode(t.value,e)},r.prototype._encodePrimitive=function(t,e){var r=this._baseState;if("octstr"===t||"bitstr"===t||"ia5str"===t)return this._encodeStr(e,t);if("objid"===t&&r.args)return this._encodeObjid(e,r.reverseArgs[0],r.args[1]);if("objid"===t)return this._encodeObjid(e,null,null);if("gentime"===t||"utctime"===t)return this._encodeTime(e,t);if("null_"===t)return this._encodeNull();if("int"===t||"enum"===t)return this._encodeInt(e,r.args&&r.reverseArgs[0]);if("bool"===t)return this._encodeBool(e);throw new Error("Unsupported tag: "+t)}},{}],125:[function(t,e,r){function n(t){this._reporterState={obj:null,path:[],options:t||{},errors:[]}}function i(t,e){this.path=t,this.rethrow(e)}var o=t(206);r.Reporter=n,n.prototype.isError=function(t){return t instanceof i},n.prototype.enterKey=function(t){return this._reporterState.path.push(t)},n.prototype.leaveKey=function(t,e,r){var n=this._reporterState;n.path=n.path.slice(0,t-1),null!==n.obj&&(n.obj[e]=r)},n.prototype.enterObject=function(){var t=this._reporterState,e=t.obj;return t.obj={},e},n.prototype.leaveObject=function(t){var e=this._reporterState,r=e.obj;return e.obj=t,r},n.prototype.error=function(t){var e,r=this._reporterState,n=t instanceof i;if(e=n?t:new i(r.path.map(function(t){return"["+JSON.stringify(t)+"]"}).join(""),t.message||t,t.stack),!r.options.partial)throw e;return n||r.errors.push(e),e},n.prototype.wrapResult=function(t){var e=this._reporterState;return e.options.partial?{result:this.isError(t)?null:t,errors:e.errors}:t},o(i,Error),i.prototype.rethrow=function(t){return this.message=t+" at: "+(this.path||"(shallow)"),Error.captureStackTrace(this,i),this}},{}],126:[function(t,e,r){var n=t(127);r.tagClass={0:"universal",1:"application",2:"context",3:"private"},r.tagClassByName=n._reverse(r.tagClass),r.tag={0:"end",1:"bool",2:"int",3:"bitstr",4:"octstr",5:"null_",6:"objid",7:"objDesc",8:"external",9:"real",10:"enum",11:"embed",12:"utf8str",13:"relativeOid",16:"seq",17:"set",18:"numstr",19:"printstr",20:"t61str",21:"videostr",22:"ia5str",23:"utctime",24:"gentime",25:"graphstr",26:"iso646str",27:"genstr",28:"unistr",29:"charstr",30:"bmpstr"},r.tagByName=n._reverse(r.tag)},{}],127:[function(t,e,r){var n=r;n._reverse=function(t){var e={};return Object.keys(t).forEach(function(r){(0|r)==r&&(r=0|r);var n=t[r];e[n]=r}),e},n.der=t(126)},{}],128:[function(t,e){function r(t){this.enc="der",this.name=t.name,this.entity=t,this.tree=new n,this.tree._init(t.body)}function n(t){h.Node.call(this,"der",t)}function i(t,e){var r=t.readUInt8(e);if(t.isError(r))return r;var n=u.tagClass[r>>6],i=0===(32&r);if(31===(31&r)){var o=r;for(r=0;128===(128&o);){if(o=t.readUInt8(e),t.isError(o))return o;r<<=7,r|=127&o}}else r&=31;var s=u.tag[r];return{cls:n,primitive:i,tag:r,tagStr:s}}function o(t,e,r){var n=t.readUInt8(r);if(t.isError(n))return n;if(!e&&128===n)return null;if(0===(128&n))return n;var i=127&n;if(i>=4)return t.error("length octect is too long");n=0;for(var o=0;i>o;o++){n<<=8;var s=t.readUInt8(r);if(t.isError(s))return s;n|=s}return n}var s=t(206),a=t(120),h=a.base,c=a.bignum,u=a.constants.der;e.exports=r,r.prototype.decode=function(t,e){return t instanceof h.DecoderBuffer||(t=new h.DecoderBuffer(t,e)),this.tree._decode(t,e)},s(n,h.Node),n.prototype._peekTag=function(t,e){if(t.isEmpty())return!1;var r=t.save(),n=i(t,'Failed to peek tag: "'+e+'"');return t.isError(n)?n:(t.restore(r),n.tag===e||n.tagStr===e)},n.prototype._decodeTag=function(t,e,r){var n=i(t,'Failed to decode tag of "'+e+'"');if(t.isError(n))return n;var s=o(t,n.primitive,'Failed to get length of "'+e+'"');if(t.isError(s))return s;if(!r&&n.tag!==e&&n.tagStr!==e&&n.tagStr+"of"!==e)return t.error('Failed to match tag: "'+e+'"');if(n.primitive||null!==s)return t.skip(s,'Failed to match body of: "'+e+'"');var a=t.start(),h=this._skipUntilEnd(t,'Failed to skip indefinite length body: "'+this.tag+'"');return t.isError(h)?h:t.cut(a)},n.prototype._skipUntilEnd=function(t,e){for(;;){var r=i(t,e);if(t.isError(r))return r;var n=o(t,r.primitive,e);if(t.isError(n))return n;var s;if(s=r.primitive||null!==n?t.skip(n):this._skipUntilEnd(t,e),t.isError(s))return s;if("end"===r.tagStr)break}},n.prototype._decodeList=function(t,e,r){for(var n=[];!t.isEmpty();){var i=this._peekTag(t,"end");if(t.isError(i))return i;var o=r.decode(t,"der");if(t.isError(o)&&i)break;n.push(o)}return n},n.prototype._decodeStr=function(t,e){if("octstr"===e)return t.raw();if("bitstr"===e){var r=t.readUInt8();return t.isError(r)?r:{unused:r,data:t.raw()}}return"ia5str"===e?t.raw().toString():this.error("Decoding of string type: "+e+" unsupported")},n.prototype._decodeObjid=function(t,e,r){for(var n=[],i=0;!t.isEmpty();){var o=t.readUInt8();i<<=7,i|=127&o,0===(128&o)&&(n.push(i),i=0)}128&o&&n.push(i);var s=n[0]/40|0,a=n[0]%40;return result=r?n:[s,a].concat(n.slice(1)),e&&(result=e[result.join(" ")]),result},n.prototype._decodeTime=function(t,e){var r=t.raw().toString();if("gentime"===e)var n=0|r.slice(0,4),i=0|r.slice(4,6),o=0|r.slice(6,8),s=0|r.slice(8,10),a=0|r.slice(10,12),h=0|r.slice(12,14);else{if("utctime"!==e)return this.error("Decoding "+e+" time is not supported yet");var n=0|r.slice(0,2),i=0|r.slice(2,4),o=0|r.slice(4,6),s=0|r.slice(6,8),a=0|r.slice(8,10),h=0|r.slice(10,12);n=70>n?2e3+n:1900+n}return Date.UTC(n,i-1,o,s,a,h,0)},n.prototype._decodeNull=function(){return null},n.prototype._decodeBool=function(t){var e=t.readUInt8();return t.isError(e)?e:0!==e},n.prototype._decodeInt=function(t,e){var r=0,n=t.raw();if(n.length>3)return new c(n);for(;!t.isEmpty();){r<<=8;var i=t.readUInt8();if(t.isError(i))return i;r|=i}return e&&(r=e[r]||r),r},n.prototype._use=function(t,e){return"function"==typeof t&&(t=t(e)),t._getDecoder("der").tree}},{}],129:[function(t,e,r){var n=r;n.der=t(128)},{}],130:[function(t,e){function r(t){this.enc="der",this.name=t.name,this.entity=t,this.tree=new n,this.tree._init(t.body)}function n(t){c.Node.call(this,"der",t)}function i(t){return 10>=t?"0"+t:t}function o(t,e,r,n){var i;if("seqof"===t?t="seq":"setof"===t&&(t="set"),f.tagByName.hasOwnProperty(t))i=f.tagByName[t];else{if("number"!=typeof t||(0|t)!==t)return n.error("Unknown tag: "+t);i=t}return i>=31?n.error("Multi-octet tag encoding unsupported"):(e||(i|=32),i|=f.tagClassByName[r||"universal"]<<6)}var s=t(206),a=t(63).Buffer,h=t(120),c=h.base,u=h.bignum,f=h.constants.der;e.exports=r,r.prototype.encode=function(t,e){return this.tree._encode(t,e).join()},s(n,c.Node),n.prototype._encodeComposite=function(t,e,r,n){var i=o(t,e,r,this.reporter);if(n.length<128){var s=new a(2);return s[0]=i,s[1]=n.length,this._createEncoderBuffer([s,n])}for(var h=1,c=n.length;c>=256;c>>=8)h++;var s=new a(2+h);s[0]=i,s[1]=128|h;for(var c=1+h,u=n.length;u>0;c--,u>>=8)s[c]=255&u;return this._createEncoderBuffer([s,n])},n.prototype._encodeStr=function(t,e){return"octstr"===e?this._createEncoderBuffer(t):"bitstr"===e?this._createEncoderBuffer([0|t.unused,t.data]):"ia5str"===e?this._createEncoderBuffer(t):this.reporter.error("Encoding of string type: "+e+" unsupported")},n.prototype._encodeObjid=function(t,e,r){if("string"==typeof t){if(!e)return this.reporter.error("string objid given, but no values map found");if(!e.hasOwnProperty(t))return this.reporter.error("objid not found in values map");t=e[t].split(/\s+/g);for(var n=0;n<t.length;n++)t[n]|=0}else Array.isArray(t)&&(t=t.slice());if(!Array.isArray(t))return this.reporter.error("objid() should be either array or string, got: "+JSON.stringify(t));if(!r){if(t[1]>=40)return this.reporter.error("Second objid identifier OOB");t.splice(0,2,40*t[0]+t[1])}for(var i=0,n=0;n<t.length;n++){var o=t[n];for(i++;o>=128;o>>=7)i++}for(var s=new a(i),h=s.length-1,n=t.length-1;n>=0;n--){var o=t[n];for(s[h--]=127&o;(o>>=7)>0;)s[h--]=128|127&o}return this._createEncoderBuffer(s)},n.prototype._encodeTime=function(t,e){var r,n=new Date(t);return"gentime"===e?r=[n.getFullYear(),i(n.getUTCMonth()+1),i(n.getUTCDate()),i(n.getUTCHours()),i(n.getUTCMinutes()),i(n.getUTCSeconds()),"Z"].join(""):"utctime"===e?r=[n.getFullYear()%100,i(n.getUTCMonth()+1),i(n.getUTCDate()),i(n.getUTCHours()),i(n.getUTCMinutes()),i(n.getUTCSeconds()),"Z"].join(""):this.reporter.error("Encoding "+e+" time is not supported yet"),this._encodeStr(r,"octstr")},n.prototype._encodeNull=function(){return this._createEncoderBuffer("")},n.prototype._encodeInt=function(t,e){if("string"==typeof t){if(!e)return this.reporter.error("String int or enum given, but no values map");if(!e.hasOwnProperty(t))return this.reporter.error("Values map doesn't contain: "+JSON.stringify(t));t=e[t]}if(null!==u&&t instanceof u){var r=t.toArray();t.sign===!1&&128&r[0]&&r.unshift(0),t=new a(r)}if(a.isBuffer(t)){var n=t.length;0===t.length&&n++;var i=new a(n);return t.copy(i),0===t.length&&(i[0]=0),this._createEncoderBuffer(i)}if(128>t)return this._createEncoderBuffer(t);if(256>t)return this._createEncoderBuffer([0,t]);for(var n=1,o=t;o>=256;o>>=8)n++;for(var i=new Array(n),o=i.length-1;o>=0;o--)i[o]=255&t,t>>=8;return 128&i[0]&&i.unshift(0),this._createEncoderBuffer(new a(i))},n.prototype._encodeBool=function(t){return this._createEncoderBuffer(t?255:0)},n.prototype._use=function(t,e){return"function"==typeof t&&(t=t(e)),t._getEncoder("der").tree},n.prototype._skipDefault=function(t,e,r){var n,i=this._baseState;if(null===i.default)return!1;var o=t.join();if(void 0===i.defaultBuffer&&(i.defaultBuffer=this._encodeValue(i.default,e,r).join()),o.length!==i.defaultBuffer.length)return!1;for(n=0;n<o.length;n++)if(o[n]!==i.defaultBuffer[n])return!1;return!0}},{}],131:[function(t,e,r){var n=r;n.der=t(130)},{}],132:[function(t,e){function r(t,e){if(!t)throw new Error(e||"Assertion failed")}e.exports=r,r.equal=function(t,e,r){if(t!=e)throw new Error(r||"Assertion failed: "+t+" != "+e)}},{}],133:[function(t,e,r){r.strip=function(t){t=t.toString();var e=/^-----BEGIN (.*)-----\n/,r=e.exec(t),n=r[1],i=new RegExp("\n-----END "+n+"-----(\n*)$"),o=t.slice(r[0].length).replace(i,"").replace(/\n/g,"");return{tag:n,base64:o}};var n=function(t,e){for(var r=[];t;){if(t.length<e){r.push(t);break}r.push(t.substr(0,e)),t=t.substr(e)}return r.join("\n")};r.assemble=function(t){var e=t.tag,r=t.base64,i="-----BEGIN "+e+"-----",o="-----END "+e+"-----";return i+"\n"+n(r,64)+"\n"+o+"\n"}},{}],134:[function(t,e){(function(r){function n(t,e,r,n){var s=d(e,n);if(s.curve)return i(t,s,n);if("dsa"===s.type)return o(t,s,r,n);for(var a=s.modulus.byteLength(),h=[0,1];t.length+h.length+1<a;)h.push(255);h.push(0);for(var c=-1;++c<t.length;)h.push(t[c]);var u=v(h,s,n);return u}function i(t,e,n){p.rand=n.randomBytes;var i;"1.3.132.0.10"===e.curve.join(".")&&(i=new p.ec("secp256k1"));var o=i.genKeyPair();o._importPrivate(e.privateKey);var s=o.sign(t);return new r(s.toDER())}function o(t,e,r,n){for(var i,o=e.params.priv_key,c=e.params.p,d=e.params.q,p=(l.mont(d),e.params.g),v=new l(0),b=h(t,d).mod(d),g=!1,y=a(o,d,t,r,n);g===!1;)i=u(d,y,r,n),v=f(p,i,c,d),g=i.invm(d).imul(b.add(o.mul(v))).mod(d),g.cmpn(0)||(g=!1,v=new l(0));return s(v,g)}function s(t,e){t=t.toArray(),e=e.toArray(),128&t[0]&&(t=[0].concat(t)),128&e[0]&&(e=[0].concat(e));var n=t.length+e.length+4,i=[48,n,2,t.length];return i=i.concat(t,[2,e.length],e),new r(i)}function a(t,e,n,i,o){if(t=new r(t.toArray()),t.length<e.byteLength()){var s=new r(e.byteLength()-t.length);s.fill(0),t=r.concat([s,t])}var a=n.length,h=c(n,e),u=new r(a);u.fill(1);var f=new r(a);return f.fill(0),f=o.createHmac(i,f).update(u).update(new r([0])).update(t).update(h).digest(),u=o.createHmac(i,f).update(u).digest(),f=o.createHmac(i,f).update(u).update(new r([1])).update(t).update(h).digest(),u=o.createHmac(i,f).update(u).digest(),{k:f,v:u}}function h(t,e){bits=new l(t);var r=8*t.length-e.bitLength();return r>0&&bits.ishrn(r),bits}function c(t,e){t=h(t,e),t=t.mod(e);var n=new r(t.toArray());if(n.length<e.byteLength()){var i=new r(e.byteLength()-n.length);i.fill(0),n=r.concat([i,n])}return n}function u(t,e,n,i){for(var o,s;;){for(o=new r("");8*o.length<t.bitLength();)e.v=i.createHmac(n,e.k).update(e.v).digest(),o=r.concat([o,e.v]);if(s=h(o,t),e.k=i.createHmac(n,e.k).update(e.v).update(new r([0])).digest(),e.v=i.createHmac(n,e.k).update(e.v).digest(),-1===s.cmp(t))return s}}function f(t,e,r,n){return t.toRed(l.mont(r)).redPow(e).fromRed().mod(n)}var d=t(118),l=t(92),p=t(94),v=t(93);e.exports=n,e.exports.getKay=a,e.exports.makeKey=u}).call(this,t(63).Buffer)},{}],135:[function(t,e){(function(r){function n(t,e,n){var s=a(n);if("ec"===s.type)return i(t,e,s);if("dsa"===s.type)return o(t,e,s);for(var h=s.modulus.byteLength(),u=[0,1];e.length+u.length+1<h;)u.push(255);u.push(0);for(var f=-1;++f<e.length;)u.push(e[f]);u=e;var d=c.mont(s.modulus);t=new c(t).toRed(d),t=t.redPow(new c(s.publicExponent)),t=new r(t.fromRed().toArray()),t=t.slice(t.length-e.length);var l=0;for(h=t.length,f=-1;++f<h;)l+=t[f]^e[f];return!l}function i(t,e,r){var n;"1.3.132.0.10"===r.data.algorithm.curve.join(".")&&(n=new h.ec("secp256k1"));var i=r.data.subjectPrivateKey.data;return n.verify(e.toString("hex"),t.toString("hex"),i.toString("hex"))}function o(t,e,r){var n=r.data.p,i=r.data.q,o=r.data.g,h=r.data.pub_key,u=a.signature.decode(t,"der"),f=u.s,d=u.r;s(f,i),s(d,i);var l=(c.mont(i),c.mont(n)),p=f.invm(i),v=o.toRed(l).redPow(new c(e).mul(p).mod(i)).fromRed().mul(h.toRed(l).redPow(d.mul(p).mod(i)).fromRed()).mod(n).mod(i);return!v.cmp(d)}function s(t,e){if(t.cmpn(0)<=0)throw new Error("invalid sig");if(t.cmp(e)>=e)throw new Error("invalid sig")}var a=t(118),h=t(94),c=t(92);e.exports=n}).call(this,t(63).Buffer)},{}],136:[function(t,e){(function(r){function n(t,e){o.rand=e.randomBytes,this.curve=new o.ec(t),this.keys=void 0}function i(t,e){Array.isArray(t)||(t=t.toArray());var n=new r(t);return e?n.toString(e):n}var o=t(139),s=t(138);e.exports=n,n.prototype.generateKeys=function(t,e){return this.keys=this.curve.genKeyPair(),this.getPublicKey(t,e)},n.prototype.computeSecret=function(t,e,n){e=e||"utf8",r.isBuffer(t)||(t=new r(t,e)),t=new s(t),t=t.toString(16);var o=this.curve.keyPair(t,"hex").getPublic(),a=o.mul(this.keys.getPrivate()).getX();return i(a,n)},n.prototype.getPublicKey=function(t,e){var r=this.keys.getPublic("compressed"===e,!0);return"hybrid"===e&&(r[0]=r[r.length-1]%2?7:6),i(r,t)},n.prototype.getPrivateKey=function(t){return i(this.keys.getPrivate(),t)},n.prototype.setPublicKey=function(t,e){e=e||"utf8",r.isBuffer(t)||(t=new r(t,e));var n=new s(t);n=n.toArray(),this.keys._importPublicHex(n)},n.prototype.setPrivateKey=function(t,e){e=e||"utf8",r.isBuffer(t)||(t=new r(t,e));var n=new s(t);n=n.toString(16),this.keys._importPrivate(n)}}).call(this,t(63).Buffer)},{}],137:[function(t,e){var r=t(136);e.exports=function(t,e){e.createECDH=function(e){return new r(e,t)}}},{}],138:[function(t,e){e.exports=t(92)},{}],139:[function(t,e){e.exports=t(94)},{}],140:[function(t,e){e.exports=t(95)},{}],141:[function(t,e){e.exports=t(96)},{}],142:[function(t,e){e.exports=t(97)},{}],143:[function(t,e){e.exports=t(98)},{}],144:[function(t,e){e.exports=t(99)},{}],145:[function(t,e){e.exports=t(100)},{}],146:[function(t,e){e.exports=t(101)},{}],147:[function(t,e){e.exports=t(102)},{}],148:[function(t,e){e.exports=t(103)},{}],149:[function(t,e){e.exports=t(104)},{}],150:[function(t,e){e.exports=t(105)},{}],151:[function(t,e){e.exports=t(106)},{}],152:[function(t,e){e.exports=t(107)},{}],153:[function(t,e){e.exports=t(108)},{}],154:[function(t,e){e.exports=t(109)},{}],155:[function(t,e){e.exports=t(110)},{}],156:[function(t,e){e.exports=t(111)},{}],157:[function(t,e){e.exports=t(112)},{}],158:[function(t,e){e.exports=t(113)},{}],159:[function(t,e){(function(r){function n(t,e){e=e||"utf8",r.isBuffer(t)||(t=new r(t,e)),this._pub=new c(t)}function i(t,e){e=e||"utf8",r.isBuffer(t)||(t=new r(t,e)),this._priv=new c(t)}function o(t,e){var r=e.toString("hex"),n=[r,t.toString(16)].join("_");if(n in y)return y[n];var i=0;if(t.isEven()||!g.simpleSieve||!g.fermatTest(t)||!f.test(t))return i+=1,i+="02"===r||"05"===r?8:4,y[n]=i,i;f.test(t.shrn(1))||(i+=2);var o,r=e.toString("hex");switch(r){case"02":t.mod(d).cmp(l)&&(i+=8);break;case"05":o=t.mod(p),o.cmp(v)&&o.cmp(b)&&(i+=8);break;default:i+=4}return y[n]=i,i}function s(t,e){try{Object.defineProperty(t,"verifyError",{enumerable:!0,value:e,writable:!1})}catch(r){t.verifyError=e}}function a(t,e,r,a){this.setGenerator(e),this.__prime=new c(t),this._prime=c.mont(this.__prime),this._pub=void 0,this._priv=void 0,a?(this.setPublicKey=n,this.setPrivateKey=i,s(this,o(this.__prime,e))):s(this,8),this._makeNum=function(){return r.randomBytes(t.length)}}function h(t,e){var n=new r(t.toArray());return e?n.toString(e):n}var c=t(162),u=t(163),f=new u,d=new c(24),l=new c(11),p=new c(10),v=new c(3),b=new c(7),g=t(160);e.exports=a;var y={};a.prototype.generateKeys=function(){return this._priv||(this._priv=new c(this._makeNum())),this._pub=this._gen.toRed(this._prime).redPow(this._priv).fromRed(),this.getPublicKey()},a.prototype.computeSecret=function(t){t=new c(t),t=t.toRed(this._prime);var e=t.redPow(this._priv).fromRed(),n=new r(e.toArray()),i=this.getPrime();if(n.length<i.length){var o=new r(i.length-n.length);o.fill(0),n=r.concat([o,n])}return n},a.prototype.getPublicKey=function(t){return h(this._pub,t)},a.prototype.getPrivateKey=function(t){return h(this._priv,t)},a.prototype.getPrime=function(t){return h(this.__prime,t)},a.prototype.getGenerator=function(t){return h(this._gen,t)},a.prototype.setGenerator=function(t,e){e=e||"utf8",r.isBuffer(t)||(t=new r(t,e)),this._gen=new c(t)}}).call(this,t(63).Buffer)},{}],160:[function(t,e){function r(){if(null!==w)return w;var t=1048576,e=[];e[0]=2;for(var r=1,n=3;t>n;n+=2){for(var i=Math.ceil(Math.sqrt(n)),o=0;r>o&&e[o]<=i&&n%e[o]!==0;o++);r!==o&&e[o]<=i||(e[r++]=n)}return w=e,e}function n(t){for(var e=r(),n=0;n<e.length;n++)if(0===t.modn(e[n]))return 0===t.cmpn(e[n])?!0:!1;return!0}function i(t){var e=s.mont(t);return 0===f.toRed(e).redPow(t.subn(1)).fromRed().cmpn(1)}function o(t,e,r){function o(t){h=-1;for(var n=new s(r.randomBytes(Math.ceil(t/8)));n.bitLength()>t;)n.ishrn(1);if(n.isEven()&&n.iadd(u),n.testn(1)||n.iadd(f),e.cmp(f))if(e.cmp(d))w={major:[y],minor:[f]};else{for(rem=n.mod(v);rem.cmp(b);)n.iadd(y),rem=n.mod(v);w={major:[y,l],minor:[f,p]}}else{for(;n.mod(a).cmp(g);)n.iadd(y);w={major:[a],minor:[m]}}return n}if(16>t)return new s(2===e||5===e?[140,123]:[140,39]);e=new s(e);for(var h,w,x=o(t),_=x.shrn(1);;){for(;x.bitLength()>t;)x=o(t),_=x.shrn(1);if(h++,n(_)&&n(x)&&i(_)&&i(x)&&c.test(_)&&c.test(x))return x;x.iadd(w.major[h%w.major.length]),_.iadd(w.minor[h%w.minor.length])}}e.exports=o,o.simpleSieve=n,o.fermatTest=i;var s=t(162),a=new s(24),h=t(163),c=new h,u=new s(1),f=new s(2),d=new s(5),l=new s(16),p=new s(8),v=new s(10),b=new s(3),g=(new s(7),new s(11)),y=new s(4),m=new s(12),w=null},{}],161:[function(t,e){(function(r){var n=t(165),i=t(159),o=t(160);e.exports=function(t,e){function s(e){return new i(new r(n[e].prime,"hex"),new r(n[e].gen,"hex"),t)}function a(e,n,s,a){return(r.isBuffer(n)||"string"==typeof n&&-1===["hex","binary","base64"].indexOf(n))&&(a=s,s=n,n=void 0),n=n||"binary",a=a||"binary",s=s||new r([2]),r.isBuffer(s)||(s=new r(s,a)),"number"==typeof e?new i(o(e,s,t),s,t,!0):(r.isBuffer(e)||(e=new r(e,n)),new i(e,s,t,!0))
}e.DiffieHellmanGroup=e.createDiffieHellmanGroup=e.getDiffieHellman=s,e.createDiffieHellman=e.DiffieHellman=a}}).call(this,t(63).Buffer)},{}],162:[function(t,e){e.exports=t(92)},{}],163:[function(t,e){function r(t){this.rand=t||new i.Rand}var n=t(162),i=t(164);e.exports=r,r.create=function(t){return new r(t)},r.prototype._rand=function(t){var e=t.bitLength(),r=this.rand.generate(Math.ceil(e/8));r[0]|=3;var i=7&e;return 0!==i&&(r[r.length-1]>>=7-i),new n(r)},r.prototype.test=function(t,e,r){var i=t.bitLength(),o=n.mont(t),s=new n(1).toRed(o);e||(e=Math.max(1,i/48|0));for(var a=t.subn(1),h=a.subn(1),c=0;!a.testn(c);c++);for(var u=t.shrn(c),f=a.toRed(o),d=!0;e>0;e--){var l=this._rand(h);r&&r(l);var p=l.toRed(o).redPow(u);if(0!==p.cmp(s)&&0!==p.cmp(f)){for(var v=1;c>v;v++){if(p=p.redSqr(),0===p.cmp(s))return!1;if(0===p.cmp(f))break}if(v===c)return!1}}return d},r.prototype.getDivisor=function(t,e){var r=t.bitLength(),i=n.mont(t),o=new n(1).toRed(i);e||(e=Math.max(1,r/48|0));for(var s=t.subn(1),a=s.subn(1),h=0;!s.testn(h);h++);for(var c=t.shrn(h),u=s.toRed(i),f=!0;e>0;e--){var d=this._rand(a),l=t.gcd(d);if(0!==l.cmpn(1))return l;var p=d.toRed(i).redPow(c);if(0!==p.cmp(o)&&0!==p.cmp(u)){for(var v=1;h>v;v++){if(p=p.redSqr(),0===p.cmp(o))return p.fromRed().subn(1).gcd(t);if(0===p.cmp(u))break}if(v===h)return p=p.redSqr(),p.fromRed().subn(1).gcd(t)}}return f}},{}],164:[function(t,e){e.exports=t(106)},{}],165:[function(t,e){e.exports={modp1:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a63a3620ffffffffffffffff"},modp2:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece65381ffffffffffffffff"},modp5:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca237327ffffffffffffffff"},modp14:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aacaa68ffffffffffffffff"},modp15:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a93ad2caffffffffffffffff"},modp16:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c934063199ffffffffffffffff"},modp17:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c93402849236c3fab4d27c7026c1d4dcb2602646dec9751e763dba37bdf8ff9406ad9e530ee5db382f413001aeb06a53ed9027d831179727b0865a8918da3edbebcf9b14ed44ce6cbaced4bb1bdb7f1447e6cc254b332051512bd7af426fb8f401378cd2bf5983ca01c64b92ecf032ea15d1721d03f482d7ce6e74fef6d55e702f46980c82b5a84031900b1c9e59e7c97fbec7e8f323a97a7e36cc88be0f1d45b7ff585ac54bd407b22b4154aacc8f6d7ebf48e1d814cc5ed20f8037e0a79715eef29be32806a1d58bb7c5da76f550aa3d8a1fbff0eb19ccb1a313d55cda56c9ec2ef29632387fe8d76e3c0468043e8f663f4860ee12bf2d5b0b7474d6e694f91e6dcc4024ffffffffffffffff"},modp18:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c93402849236c3fab4d27c7026c1d4dcb2602646dec9751e763dba37bdf8ff9406ad9e530ee5db382f413001aeb06a53ed9027d831179727b0865a8918da3edbebcf9b14ed44ce6cbaced4bb1bdb7f1447e6cc254b332051512bd7af426fb8f401378cd2bf5983ca01c64b92ecf032ea15d1721d03f482d7ce6e74fef6d55e702f46980c82b5a84031900b1c9e59e7c97fbec7e8f323a97a7e36cc88be0f1d45b7ff585ac54bd407b22b4154aacc8f6d7ebf48e1d814cc5ed20f8037e0a79715eef29be32806a1d58bb7c5da76f550aa3d8a1fbff0eb19ccb1a313d55cda56c9ec2ef29632387fe8d76e3c0468043e8f663f4860ee12bf2d5b0b7474d6e694f91e6dbe115974a3926f12fee5e438777cb6a932df8cd8bec4d073b931ba3bc832b68d9dd300741fa7bf8afc47ed2576f6936ba424663aab639c5ae4f5683423b4742bf1c978238f16cbe39d652de3fdb8befc848ad922222e04a4037c0713eb57a81a23f0c73473fc646cea306b4bcbc8862f8385ddfa9d4b7fa2c087e879683303ed5bdd3a062b3cf5b3a278a66d2a13f83f44f82ddf310ee074ab6a364597e899a0255dc164f31cc50846851df9ab48195ded7ea1b1d510bd7ee74d73faf36bc31ecfa268359046f4eb879f924009438b481c6cd7889a002ed5ee382bc9190da6fc026e479558e4475677e9aa9e3050e2765694dfc81f56e880b96e7160c980dd98edd3dfffffffffffffffff"}}},{}],166:[function(t,e){(function(t){e.exports=function(e){function r(t,e,r,i,o,s){if("function"==typeof o&&(s=o,o=void 0),"function"!=typeof s)throw new Error("No callback provided to pbkdf2");setTimeout(function(){var a;try{a=n(t,e,r,i,o)}catch(t){return s(t)}s(void 0,a)})}function n(r,n,i,o,s){if("number"!=typeof i)throw new TypeError("Iterations not a number");if(0>i)throw new TypeError("Bad iterations");if("number"!=typeof o)throw new TypeError("Key length not a number");if(0>o)throw new TypeError("Bad key length");s=s||"sha1",t.isBuffer(r)||(r=new t(r)),t.isBuffer(n)||(n=new t(n));var a,h,c,u=1,f=new t(o),d=new t(n.length+4);n.copy(d,0,0,n.length);for(var l=1;u>=l;l++){d.writeUInt32BE(l,n.length);var p=e.createHmac(s,r).update(d).digest();if(!a&&(a=p.length,c=new t(a),u=Math.ceil(o/a),h=o-(u-1)*a,o>(Math.pow(2,32)-1)*a))throw new TypeError("keylen exceeds maximum length");p.copy(c,0,0,a);for(var v=1;i>v;v++){p=e.createHmac(s,r).update(p).digest();for(var b=0;a>b;b++)c[b]^=p[b]}var g=(l-1)*a,y=l==u?h:a;c.copy(f,g,0,y)}return f}return{pbkdf2:r,pbkdf2Sync:n}}}).call(this,t(63).Buffer)},{}],167:[function(t,e){e.exports=function(e,r){e.publicEncrypt=t(192)(r),e.privateDecrypt=t(191)(r)}},{}],168:[function(t,e){(function(t){function r(e){var r=new t(4);return r.writeUInt32BE(e,0),r}e.exports=function(e,n,i){for(var o,s=new t(""),a=0;s.length<n;)o=r(a++),s=t.concat([s,i.createHash("sha1").update(e).update(o).digest()]);return s.slice(0,n)}}).call(this,t(63).Buffer)},{}],169:[function(t,e){e.exports=t(92)},{}],170:[function(t,e){e.exports=t(93)},{}],171:[function(t,e){e.exports=t(114)},{}],172:[function(t,e){e.exports=t(115)},{}],173:[function(t,e){e.exports=t(116)},{}],174:[function(t,e){e.exports=t(117)},{}],175:[function(t,e){e.exports=t(118)},{}],176:[function(t,e){e.exports=t(119)},{}],177:[function(t,e){e.exports=t(120)},{}],178:[function(t,e){e.exports=t(121)},{}],179:[function(t,e){e.exports=t(122)},{}],180:[function(t,e){e.exports=t(123)},{}],181:[function(t,e){e.exports=t(124)},{}],182:[function(t,e){e.exports=t(125)},{}],183:[function(t,e){e.exports=t(126)},{}],184:[function(t,e){e.exports=t(127)},{}],185:[function(t,e){e.exports=t(128)},{}],186:[function(t,e){e.exports=t(129)},{}],187:[function(t,e){e.exports=t(130)},{}],188:[function(t,e){e.exports=t(131)},{}],189:[function(t,e){e.exports=t(132)},{}],190:[function(t,e){e.exports=t(133)},{}],191:[function(t,e){(function(r){function n(t,e,n){var i=(t.modulus,t.modulus.byteLength()),s=(e.length,n.createHash("sha1").update(new r("")).digest()),c=s.length;if(0!==e[0])throw new Error("decryption error");var u=e.slice(1,c+1),f=e.slice(c+1),d=h(u,a(f,c,n)),l=h(f,a(d,i-c-1,n));if(o(s,l.slice(0,c)))throw new Error("decryption error");for(var p=c;0===l[p];)p++;if(1!==l[p++])throw new Error("decryption error");return l.slice(p)}function i(t,e){for(var r=e.slice(0,2),n=2,i=0;0!==e[n++];)if(n>=e.length){i++;break}{var o=e.slice(2,n-1);e.slice(n-1,n)}return"0002"!==r.toString("hex")&&i++,o.length<8&&i++,e.slice(n)}function o(t,e){var r=0,n=t.length;t.length!==e.length&&(r++,n=Math.min(t.length,e.length));for(var i=-1;++i<n;)r+=t[i]^e[i];return r}var s=t(175),a=t(168),h=t(193),c=t(169),u=t(170);e.exports=function(t){function e(e,o){var a;a=e.padding?e.padding:4;var h=s(e,t),f=h.modulus.byteLength();if(o.length>f||new c(o).cmp(h.modulus)>=0)throw new Error("decryption error");var d=u(o,h,t),l=new r(f-d.length);if(l.fill(0),d=r.concat([l,d],f),4===a)return n(h,d,t);if(1===a)return i(h,d,t);if(3===a)return d;throw new Error("unknown padding")}return e}}).call(this,t(63).Buffer)},{}],192:[function(t,e){(function(r){function n(t,e,n){var i=t.modulus.byteLength(),o=e.length,s=n.createHash("sha1").update(new r("")).digest(),u=s.length,f=2*u;if(o>i-f-2)throw new Error("message too long");var d=new r(i-o-f-2);d.fill(0);var l=i-u-1,p=n.randomBytes(u),v=h(r.concat([s,d,new r([1]),e],l),a(p,l,n)),b=h(p,a(v,u,n));return new c(r.concat([new r([0]),b,v],i))}function i(t,e,n){var i=e.length,s=t.modulus.byteLength();if(i>s-11)throw new Error("message too long");var a=o(s-i-3,n);return new c(r.concat([new r([0,2]),a,new r([0]),e],s))}function o(t,e){for(var n,i=new r(t),o=0,s=e.randomBytes(2*t),a=0;t>o;)a===s.length&&(s=e.randomBytes(2*t),a=0),n=s[a++],n&&(i[o++]=n);return i}var s=t(175),a=t(168),h=t(193),c=t(169);e.exports=function(t){function e(e,o){var a;a=e.padding?e.padding:4;var h,u=s(e);if(4===a)h=n(u,o,t);else if(1===a)h=i(u,o,t);else{if(3!==a)throw new Error("unknown padding");if(h=new c(o),h.cmp(u.modulus)>=0)throw new Error("data too long for modulus")}var f=h.toRed(c.mont(u.modulus)).redPow(new c(u.publicExponent)).fromRed().toArray();return new r(f)}return e}}).call(this,t(63).Buffer)},{}],193:[function(t,e){e.exports=function(t,e){for(var r=t.length,n=-1;++n<r;)t[n]^=e[n];return t}},{}],194:[function(t,e){(function(t){function r(t,e,r){return t^e^r}function n(t,e,r){return t&e|~t&r}function i(t,e,r){return(t|~e)^r}function o(t,e,r){return t&r|e&~r}function s(t,e,r){return t^(e|~r)}function a(t,e){return t<<e|t>>>32-e}function h(e){var r=[1732584193,4023233417,2562383102,271733878,3285377520];"string"==typeof e&&(e=new t(e,"utf8"));var n=v(e),i=8*e.length,o=8*e.length;n[i>>>5]|=128<<24-i%32,n[(i+64>>>9<<4)+14]=16711935&(o<<8|o>>>24)|4278255360&(o<<24|o>>>8);for(var s=0;s<n.length;s+=16)g(r,n,s);for(var s=0;5>s;s++){var a=r[s];r[s]=16711935&(a<<8|a>>>24)|4278255360&(a<<24|a>>>8)}var h=b(r);return new t(h)}e.exports=h;var c=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],u=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],f=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],d=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11],l=[0,1518500249,1859775393,2400959708,2840853838],p=[1352829926,1548603684,1836072691,2053994217,0],v=function(t){for(var e=[],r=0,n=0;r<t.length;r++,n+=8)e[n>>>5]|=t[r]<<24-n%32;return e},b=function(t){for(var e=[],r=0;r<32*t.length;r+=8)e.push(t[r>>>5]>>>24-r%32&255);return e},g=function(t,e,h){for(var v=0;16>v;v++){var b=h+v,g=e[b];e[b]=16711935&(g<<8|g>>>24)|4278255360&(g<<24|g>>>8)}var y,m,w,x,_,S,T,A,E,C;S=y=t[0],T=m=t[1],A=w=t[2],E=x=t[3],C=_=t[4];for(var M,v=0;80>v;v+=1)M=y+e[h+c[v]]|0,M+=16>v?r(m,w,x)+l[0]:32>v?n(m,w,x)+l[1]:48>v?i(m,w,x)+l[2]:64>v?o(m,w,x)+l[3]:s(m,w,x)+l[4],M=0|M,M=a(M,f[v]),M=M+_|0,y=_,_=x,x=a(w,10),w=m,m=M,M=S+e[h+u[v]]|0,M+=16>v?s(T,A,E)+p[0]:32>v?o(T,A,E)+p[1]:48>v?i(T,A,E)+p[2]:64>v?n(T,A,E)+p[3]:r(T,A,E)+p[4],M=0|M,M=a(M,d[v]),M=M+C|0,S=C,C=E,E=a(A,10),A=T,T=M;M=t[1]+w+E|0,t[1]=t[2]+x+C|0,t[2]=t[3]+_+S|0,t[3]=t[4]+y+T|0,t[4]=t[0]+m+A|0,t[0]=M}}).call(this,t(63).Buffer)},{}],195:[function(t,e){(function(t){function r(e,r){this._block=new t(e),this._finalSize=r,this._blockSize=e,this._len=0,this._s=0}r.prototype.update=function(e,r){"string"==typeof e&&(r=r||"utf8",e=new t(e,r));for(var n=this._len+=e.length,i=this._s||0,o=0,s=this._block;n>i;){for(var a=Math.min(e.length,o+this._blockSize-i%this._blockSize),h=a-o,c=0;h>c;c++)s[i%this._blockSize+c]=e[c+o];i+=h,o+=h,i%this._blockSize===0&&this._update(s)}return this._s=i,this},r.prototype.digest=function(t){var e=8*this._len;this._block[this._len%this._blockSize]=128,this._block.fill(0,this._len%this._blockSize+1),e%(8*this._blockSize)>=8*this._finalSize&&(this._update(this._block),this._block.fill(0)),this._block.writeInt32BE(e,this._blockSize-4);var r=this._update(this._block)||this._hash();return t?r.toString(t):r},r.prototype._update=function(){throw new Error("_update must be implemented by subclass")},e.exports=r}).call(this,t(63).Buffer)},{}],196:[function(t,e,r){var r=e.exports=function(t){var e=r[t.toLowerCase()];if(!e)throw new Error(t+" is not supported (we accept pull requests)");return new e};r.sha1=t(197),r.sha224=t(198),r.sha256=t(199),r.sha384=t(200),r.sha512=t(201)},{}],197:[function(t,e){(function(r){function n(){this.init(),this._w=a,s.call(this,64,56)}function i(t,e){return t<<e|t>>>32-e}var o=t(206),s=t(195),a=new Array(80);o(n,s),n.prototype.init=function(){return this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520,this},n.prototype._update=function(t){function e(){return i(o[f-3]^o[f-8]^o[f-14]^o[f-16],1)}function r(t,e){o[f]=t;var r=i(s,5)+e+u+t+n;u=c,c=h,h=i(a,30),a=s,s=r,f++}var n,o=this._w,s=this._a,a=this._b,h=this._c,c=this._d,u=this._e,f=0;for(n=1518500249;16>f;)r(t.readInt32BE(4*f),a&h|~a&c);for(;20>f;)r(e(),a&h|~a&c);for(n=1859775393;40>f;)r(e(),a^h^c);for(n=-1894007588;60>f;)r(e(),a&h|a&c|h&c);for(n=-899497514;80>f;)r(e(),a^h^c);this._a=s+this._a|0,this._b=a+this._b|0,this._c=h+this._c|0,this._d=c+this._d|0,this._e=u+this._e|0},n.prototype._hash=function(){var t=new r(20);return t.writeInt32BE(0|this._a,0),t.writeInt32BE(0|this._b,4),t.writeInt32BE(0|this._c,8),t.writeInt32BE(0|this._d,12),t.writeInt32BE(0|this._e,16),t},e.exports=n}).call(this,t(63).Buffer)},{}],198:[function(t,e){(function(r){function n(){this.init(),this._w=a,s.call(this,64,56)}var i=t(206),o=t(199),s=t(195),a=new Array(64);i(n,o),n.prototype.init=function(){return this._a=-1056596264,this._b=914150663,this._c=812702999,this._d=-150054599,this._e=-4191439,this._f=1750603025,this._g=1694076839,this._h=-1090891868,this},n.prototype._hash=function(){var t=new r(28);return t.writeInt32BE(this._a,0),t.writeInt32BE(this._b,4),t.writeInt32BE(this._c,8),t.writeInt32BE(this._d,12),t.writeInt32BE(this._e,16),t.writeInt32BE(this._f,20),t.writeInt32BE(this._g,24),t},e.exports=n}).call(this,t(63).Buffer)},{}],199:[function(t,e){(function(r){function n(){this.init(),this._w=v,l.call(this,64,56)}function i(t,e){return t>>>e|t<<32-e}function o(t,e){return t>>>e}function s(t,e,r){return t&e^~t&r}function a(t,e,r){return t&e^t&r^e&r}function h(t){return i(t,2)^i(t,13)^i(t,22)}function c(t){return i(t,6)^i(t,11)^i(t,25)}function u(t){return i(t,7)^i(t,18)^o(t,3)}function f(t){return i(t,17)^i(t,19)^o(t,10)}var d=t(206),l=t(195),p=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],v=new Array(64);d(n,l),n.prototype.init=function(){return this._a=1779033703,this._b=-1150833019,this._c=1013904242,this._d=-1521486534,this._e=1359893119,this._f=-1694144372,this._g=528734635,this._h=1541459225,this},n.prototype._update=function(t){for(var e,r,n=this._w,i=0|this._a,o=0|this._b,d=0|this._c,l=0|this._d,v=0|this._e,b=0|this._f,g=0|this._g,y=0|this._h,m=0;64>m;m++){var w=n[m]=16>m?t.readInt32BE(4*m):f(n[m-2])+n[m-7]+u(n[m-15])+n[m-16];e=y+c(v)+s(v,b,g)+p[m]+w,r=h(i)+a(i,o,d),y=g,g=b,b=v,v=l+e,l=d,d=o,o=i,i=e+r}this._a=i+this._a|0,this._b=o+this._b|0,this._c=d+this._c|0,this._d=l+this._d|0,this._e=v+this._e|0,this._f=b+this._f|0,this._g=g+this._g|0,this._h=y+this._h|0},n.prototype._hash=function(){var t=new r(32);return t.writeInt32BE(this._a,0),t.writeInt32BE(this._b,4),t.writeInt32BE(this._c,8),t.writeInt32BE(this._d,12),t.writeInt32BE(this._e,16),t.writeInt32BE(this._f,20),t.writeInt32BE(this._g,24),t.writeInt32BE(this._h,28),t},e.exports=n}).call(this,t(63).Buffer)},{}],200:[function(t,e){(function(r){function n(){this.init(),this._w=a,s.call(this,128,112)}var i=t(206),o=t(201),s=t(195),a=new Array(160);i(n,o),n.prototype.init=function(){return this._a=-876896931,this._b=1654270250,this._c=-1856437926,this._d=355462360,this._e=1731405415,this._f=-1900787065,this._g=-619958771,this._h=1203062813,this._al=-1056596264,this._bl=914150663,this._cl=812702999,this._dl=-150054599,this._el=-4191439,this._fl=1750603025,this._gl=1694076839,this._hl=-1090891868,this},n.prototype._hash=function(){function t(t,r,n){e.writeInt32BE(t,n),e.writeInt32BE(r,n+4)}var e=new r(48);return t(this._a,this._al,0),t(this._b,this._bl,8),t(this._c,this._cl,16),t(this._d,this._dl,24),t(this._e,this._el,32),t(this._f,this._fl,40),e},e.exports=n}).call(this,t(63).Buffer)},{}],201:[function(t,e){(function(r){function n(){this.init(),this._w=u,h.call(this,128,112)}function i(t,e,r){return t>>>r|e<<32-r}function o(t,e,r){return t&e^~t&r}function s(t,e,r){return t&e^t&r^e&r}var a=t(206),h=t(195),c=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591],u=new Array(160);a(n,h),n.prototype.init=function(){return this._a=1779033703,this._b=-1150833019,this._c=1013904242,this._d=-1521486534,this._e=1359893119,this._f=-1694144372,this._g=528734635,this._h=1541459225,this._al=-205731576,this._bl=-2067093701,this._cl=-23791573,this._dl=1595750129,this._el=-1377402159,this._fl=725511199,this._gl=-79577749,this._hl=327033209,this},n.prototype._update=function(t){for(var e=this._w,r=0|this._a,n=0|this._b,a=0|this._c,h=0|this._d,u=0|this._e,f=0|this._f,d=0|this._g,l=0|this._h,p=0|this._al,v=0|this._bl,b=0|this._cl,g=0|this._dl,y=0|this._el,m=0|this._fl,w=0|this._gl,x=0|this._hl,_=0;80>_;_++){var S,T,A=2*_;if(16>_)S=e[A]=t.readInt32BE(4*A),T=e[A+1]=t.readInt32BE(4*A+4);else{var E=e[A-30],C=e[A-30+1],M=i(E,C,1)^i(E,C,8)^E>>>7,R=i(C,E,1)^i(C,E,8)^i(C,E,7);E=e[A-4],C=e[A-4+1];var k=i(E,C,19)^i(C,E,29)^E>>>6,B=i(C,E,19)^i(E,C,29)^i(C,E,6),I=e[A-14],P=e[A-14+1],L=e[A-32],O=e[A-32+1];T=R+P,S=M+I+(R>>>0>T>>>0?1:0),T+=B,S=S+k+(B>>>0>T>>>0?1:0),T+=O,S=S+L+(O>>>0>T>>>0?1:0),e[A]=S,e[A+1]=T}var D=s(r,n,a),j=s(p,v,b),F=i(r,p,28)^i(p,r,2)^i(p,r,7),U=i(p,r,28)^i(r,p,2)^i(r,p,7),N=i(u,y,14)^i(u,y,18)^i(y,u,9),G=i(y,u,14)^i(y,u,18)^i(u,y,9),W=c[A],z=c[A+1],q=o(u,f,d),Y=o(y,m,w),V=x+G,H=l+N+(x>>>0>V>>>0?1:0);V+=Y,H=H+q+(Y>>>0>V>>>0?1:0),V+=z,H=H+W+(z>>>0>V>>>0?1:0),V+=T,H=H+S+(T>>>0>V>>>0?1:0);var X=U+j,K=F+D+(U>>>0>X>>>0?1:0);l=d,x=w,d=f,w=m,f=u,m=y,y=g+V|0,u=h+H+(g>>>0>y>>>0?1:0)|0,h=a,g=b,a=n,b=v,n=r,v=p,p=V+X|0,r=H+K+(V>>>0>p>>>0?1:0)|0}this._al=this._al+p|0,this._bl=this._bl+v|0,this._cl=this._cl+b|0,this._dl=this._dl+g|0,this._el=this._el+y|0,this._fl=this._fl+m|0,this._gl=this._gl+w|0,this._hl=this._hl+x|0,this._a=this._a+r+(this._al>>>0<p>>>0?1:0)|0,this._b=this._b+n+(this._bl>>>0<v>>>0?1:0)|0,this._c=this._c+a+(this._cl>>>0<b>>>0?1:0)|0,this._d=this._d+h+(this._dl>>>0<g>>>0?1:0)|0,this._e=this._e+u+(this._el>>>0<y>>>0?1:0)|0,this._f=this._f+f+(this._fl>>>0<m>>>0?1:0)|0,this._g=this._g+d+(this._gl>>>0<w>>>0?1:0)|0,this._h=this._h+l+(this._hl>>>0<x>>>0?1:0)|0},n.prototype._hash=function(){function t(t,r,n){e.writeInt32BE(t,n),e.writeInt32BE(r,n+4)}var e=new r(64);return t(this._a,this._al,0),t(this._b,this._bl,8),t(this._c,this._cl,16),t(this._d,this._dl,24),t(this._e,this._el,32),t(this._f,this._fl,40),t(this._g,this._gl,48),t(this._h,this._hl,56),e},e.exports=n}).call(this,t(63).Buffer)},{}],202:[function(t,e){"use strict";var r=t(166);e.exports=function(t,e){e=e||{};var n=r(t);return e.pbkdf2=n.pbkdf2,e.pbkdf2Sync=n.pbkdf2Sync,e}},{}],203:[function(t,e){(function(r,n){"use strict";!function(){var i=("undefined"==typeof window?r:window)||{},o=i.crypto||i.msCrypto||t(62);e.exports=function(t){if(o.getRandomValues){var e=new n(t);return o.getRandomValues(e),e}if(o.pseudoRandomBytes)return o.pseudoRandomBytes(t);throw new Error("pseudo random number generation not yet implemented for this browser\nuse chrome, FireFox or Internet Explorer 11")}}()}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},t(63).Buffer)},{}],204:[function(t,e){(function(r,n){"use strict";!function(){var i=("undefined"==typeof window?r:window)||{},o=i.crypto||i.msCrypto||t(62);e.exports=function(t){if(o.getRandomValues){var e=new n(t);return o.getRandomValues(e),e}if(o.randomBytes)return o.randomBytes(t);throw new Error("secure random number generation not supported by this browser\nuse chrome, FireFox or Internet Explorer 11")}}()}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},t(63).Buffer)},{}],205:[function(t,e){function r(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function n(t){return"function"==typeof t}function i(t){return"number"==typeof t}function o(t){return"object"==typeof t&&null!==t}function s(t){return void 0===t}e.exports=r,r.EventEmitter=r,r.prototype._events=void 0,r.prototype._maxListeners=void 0,r.defaultMaxListeners=10,r.prototype.setMaxListeners=function(t){if(!i(t)||0>t||isNaN(t))throw TypeError("n must be a positive number");return this._maxListeners=t,this},r.prototype.emit=function(t){var e,r,i,a,h,c;if(this._events||(this._events={}),"error"===t&&(!this._events.error||o(this._events.error)&&!this._events.error.length)){if(e=arguments[1],e instanceof Error)throw e;throw TypeError('Uncaught, unspecified "error" event.')}if(r=this._events[t],s(r))return!1;if(n(r))switch(arguments.length){case 1:r.call(this);break;case 2:r.call(this,arguments[1]);break;case 3:r.call(this,arguments[1],arguments[2]);break;default:for(i=arguments.length,a=new Array(i-1),h=1;i>h;h++)a[h-1]=arguments[h];r.apply(this,a)}else if(o(r)){for(i=arguments.length,a=new Array(i-1),h=1;i>h;h++)a[h-1]=arguments[h];for(c=r.slice(),i=c.length,h=0;i>h;h++)c[h].apply(this,a)}return!0},r.prototype.addListener=function(t,e){var i;if(!n(e))throw TypeError("listener must be a function");if(this._events||(this._events={}),this._events.newListener&&this.emit("newListener",t,n(e.listener)?e.listener:e),this._events[t]?o(this._events[t])?this._events[t].push(e):this._events[t]=[this._events[t],e]:this._events[t]=e,o(this._events[t])&&!this._events[t].warned){var i;i=s(this._maxListeners)?r.defaultMaxListeners:this._maxListeners,i&&i>0&&this._events[t].length>i&&(this._events[t].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[t].length),"function"==typeof console.trace&&console.trace())}return this},r.prototype.on=r.prototype.addListener,r.prototype.once=function(t,e){function r(){this.removeListener(t,r),i||(i=!0,e.apply(this,arguments))}if(!n(e))throw TypeError("listener must be a function");var i=!1;return r.listener=e,this.on(t,r),this},r.prototype.removeListener=function(t,e){var r,i,s,a;if(!n(e))throw TypeError("listener must be a function");if(!this._events||!this._events[t])return this;if(r=this._events[t],s=r.length,i=-1,r===e||n(r.listener)&&r.listener===e)delete this._events[t],this._events.removeListener&&this.emit("removeListener",t,e);else if(o(r)){for(a=s;a-->0;)if(r[a]===e||r[a].listener&&r[a].listener===e){i=a;break}if(0>i)return this;1===r.length?(r.length=0,delete this._events[t]):r.splice(i,1),this._events.removeListener&&this.emit("removeListener",t,e)}return this},r.prototype.removeAllListeners=function(t){var e,r;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[t]&&delete this._events[t],this;if(0===arguments.length){for(e in this._events)"removeListener"!==e&&this.removeAllListeners(e);return this.removeAllListeners("removeListener"),this._events={},this}if(r=this._events[t],n(r))this.removeListener(t,r);else for(;r.length;)this.removeListener(t,r[r.length-1]);return delete this._events[t],this},r.prototype.listeners=function(t){var e;return e=this._events&&this._events[t]?n(this._events[t])?[this._events[t]]:this._events[t].slice():[]},r.listenerCount=function(t,e){var r;return r=t._events&&t._events[e]?n(t._events[e])?1:t._events[e].length:0}},{}],206:[function(t,e){e.exports="function"==typeof Object.create?function(t,e){t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}:function(t,e){t.super_=e;var r=function(){};r.prototype=e.prototype,t.prototype=new r,t.prototype.constructor=t}},{}],207:[function(t,e){e.exports=Array.isArray||function(t){return"[object Array]"==Object.prototype.toString.call(t)}},{}],208:[function(t,e){function r(){}var n=e.exports={};n.nextTick=function(){var t="undefined"!=typeof window&&window.setImmediate,e="undefined"!=typeof window&&window.MutationObserver,r="undefined"!=typeof window&&window.postMessage&&window.addEventListener;if(t)return function(t){return window.setImmediate(t)};var n=[];if(e){var i=document.createElement("div"),o=new MutationObserver(function(){var t=n.slice();n.length=0,t.forEach(function(t){t()})});return o.observe(i,{attributes:!0}),function(t){n.length||i.setAttribute("yes","no"),n.push(t)}}return r?(window.addEventListener("message",function(t){var e=t.source;if((e===window||null===e)&&"process-tick"===t.data&&(t.stopPropagation(),n.length>0)){var r=n.shift();r()}},!0),function(t){n.push(t),window.postMessage("process-tick","*")}):function(t){setTimeout(t,0)}}(),n.title="browser",n.browser=!0,n.env={},n.argv=[],n.on=r,n.addListener=r,n.once=r,n.off=r,n.removeListener=r,n.removeAllListeners=r,n.emit=r,n.binding=function(){throw new Error("process.binding is not supported")},n.cwd=function(){return"/"},n.chdir=function(){throw new Error("process.chdir is not supported")}},{}],209:[function(t,e){e.exports=t(210)
},{}],210:[function(t,e){(function(r){function n(t){return this instanceof n?(h.call(this,t),c.call(this,t),t&&t.readable===!1&&(this.readable=!1),t&&t.writable===!1&&(this.writable=!1),this.allowHalfOpen=!0,t&&t.allowHalfOpen===!1&&(this.allowHalfOpen=!1),void this.once("end",i)):new n(t)}function i(){this.allowHalfOpen||this._writableState.ended||r.nextTick(this.end.bind(this))}function o(t,e){for(var r=0,n=t.length;n>r;r++)e(t[r],r)}e.exports=n;var s=Object.keys||function(t){var e=[];for(var r in t)e.push(r);return e},a=t(215);a.inherits=t(206);var h=t(212),c=t(214);a.inherits(n,h),o(s(c.prototype),function(t){n.prototype[t]||(n.prototype[t]=c.prototype[t])})}).call(this,t(208))},{}],211:[function(t,e){function r(t){return this instanceof r?void n.call(this,t):new r(t)}e.exports=r;var n=t(213),i=t(215);i.inherits=t(206),i.inherits(r,n),r.prototype._transform=function(t,e,r){r(null,t)}},{}],212:[function(t,e){(function(r){function n(e){e=e||{};var r=e.highWaterMark;this.highWaterMark=r||0===r?r:16384,this.highWaterMark=~~this.highWaterMark,this.buffer=[],this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=!1,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.calledRead=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.objectMode=!!e.objectMode,this.defaultEncoding=e.defaultEncoding||"utf8",this.ranOut=!1,this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,e.encoding&&(M||(M=t(221).StringDecoder),this.decoder=new M(e.encoding),this.encoding=e.encoding)}function i(t){return this instanceof i?(this._readableState=new n(t,this),this.readable=!0,void E.call(this)):new i(t)}function o(t,e,r,n,i){var o=c(e,r);if(o)t.emit("error",o);else if(null===r||void 0===r)e.reading=!1,e.ended||u(t,e);else if(e.objectMode||r&&r.length>0)if(e.ended&&!i){var a=new Error("stream.push() after EOF");t.emit("error",a)}else if(e.endEmitted&&i){var a=new Error("stream.unshift() after end event");t.emit("error",a)}else!e.decoder||i||n||(r=e.decoder.write(r)),e.length+=e.objectMode?1:r.length,i?e.buffer.unshift(r):(e.reading=!1,e.buffer.push(r)),e.needReadable&&f(t),l(t,e);else i||(e.reading=!1);return s(e)}function s(t){return!t.ended&&(t.needReadable||t.length<t.highWaterMark||0===t.length)}function a(t){if(t>=R)t=R;else{t--;for(var e=1;32>e;e<<=1)t|=t>>e;t++}return t}function h(t,e){return 0===e.length&&e.ended?0:e.objectMode?0===t?0:1:null===t||isNaN(t)?e.flowing&&e.buffer.length?e.buffer[0].length:e.length:0>=t?0:(t>e.highWaterMark&&(e.highWaterMark=a(t)),t>e.length?e.ended?e.length:(e.needReadable=!0,0):t)}function c(t,e){var r=null;return T.isBuffer(e)||"string"==typeof e||null===e||void 0===e||t.objectMode||(r=new TypeError("Invalid non-string/buffer chunk")),r}function u(t,e){if(e.decoder&&!e.ended){var r=e.decoder.end();r&&r.length&&(e.buffer.push(r),e.length+=e.objectMode?1:r.length)}e.ended=!0,e.length>0?f(t):w(t)}function f(t){var e=t._readableState;e.needReadable=!1,e.emittedReadable||(e.emittedReadable=!0,e.sync?r.nextTick(function(){d(t)}):d(t))}function d(t){t.emit("readable")}function l(t,e){e.readingMore||(e.readingMore=!0,r.nextTick(function(){p(t,e)}))}function p(t,e){for(var r=e.length;!e.reading&&!e.flowing&&!e.ended&&e.length<e.highWaterMark&&(t.read(0),r!==e.length);)r=e.length;e.readingMore=!1}function v(t){return function(){var e=t._readableState;e.awaitDrain--,0===e.awaitDrain&&b(t)}}function b(t){function e(t){var e=t.write(r);!1===e&&n.awaitDrain++}var r,n=t._readableState;for(n.awaitDrain=0;n.pipesCount&&null!==(r=t.read());)if(1===n.pipesCount?e(n.pipes,0,null):x(n.pipes,e),t.emit("data",r),n.awaitDrain>0)return;return 0===n.pipesCount?(n.flowing=!1,void(A.listenerCount(t,"data")>0&&y(t))):void(n.ranOut=!0)}function g(){this._readableState.ranOut&&(this._readableState.ranOut=!1,b(this))}function y(t,e){var n=t._readableState;if(n.flowing)throw new Error("Cannot switch to old mode now.");var i=e||!1,o=!1;t.readable=!0,t.pipe=E.prototype.pipe,t.on=t.addListener=E.prototype.on,t.on("readable",function(){o=!0;for(var e;!i&&null!==(e=t.read());)t.emit("data",e);null===e&&(o=!1,t._readableState.needReadable=!0)}),t.pause=function(){i=!0,this.emit("pause")},t.resume=function(){i=!1,o?r.nextTick(function(){t.emit("readable")}):this.read(0),this.emit("resume")},t.emit("readable")}function m(t,e){var r,n=e.buffer,i=e.length,o=!!e.decoder,s=!!e.objectMode;if(0===n.length)return null;if(0===i)r=null;else if(s)r=n.shift();else if(!t||t>=i)r=o?n.join(""):T.concat(n,i),n.length=0;else if(t<n[0].length){var a=n[0];r=a.slice(0,t),n[0]=a.slice(t)}else if(t===n[0].length)r=n.shift();else{r=o?"":new T(t);for(var h=0,c=0,u=n.length;u>c&&t>h;c++){var a=n[0],f=Math.min(t-h,a.length);o?r+=a.slice(0,f):a.copy(r,h,0,f),f<a.length?n[0]=a.slice(f):n.shift(),h+=f}}return r}function w(t){var e=t._readableState;if(e.length>0)throw new Error("endReadable called on non-empty stream");!e.endEmitted&&e.calledRead&&(e.ended=!0,r.nextTick(function(){e.endEmitted||0!==e.length||(e.endEmitted=!0,t.readable=!1,t.emit("end"))}))}function x(t,e){for(var r=0,n=t.length;n>r;r++)e(t[r],r)}function _(t,e){for(var r=0,n=t.length;n>r;r++)if(t[r]===e)return r;return-1}e.exports=i;var S=t(207),T=t(63).Buffer;i.ReadableState=n;var A=t(205).EventEmitter;A.listenerCount||(A.listenerCount=function(t,e){return t.listeners(e).length});var E=t(220),C=t(215);C.inherits=t(206);var M;C.inherits(i,E),i.prototype.push=function(t,e){var r=this._readableState;return"string"!=typeof t||r.objectMode||(e=e||r.defaultEncoding,e!==r.encoding&&(t=new T(t,e),e="")),o(this,r,t,e,!1)},i.prototype.unshift=function(t){var e=this._readableState;return o(this,e,t,"",!0)},i.prototype.setEncoding=function(e){M||(M=t(221).StringDecoder),this._readableState.decoder=new M(e),this._readableState.encoding=e};var R=8388608;i.prototype.read=function(t){var e=this._readableState;e.calledRead=!0;var r,n=t;if(("number"!=typeof t||t>0)&&(e.emittedReadable=!1),0===t&&e.needReadable&&(e.length>=e.highWaterMark||e.ended))return f(this),null;if(t=h(t,e),0===t&&e.ended)return r=null,e.length>0&&e.decoder&&(r=m(t,e),e.length-=r.length),0===e.length&&w(this),r;var i=e.needReadable;return e.length-t<=e.highWaterMark&&(i=!0),(e.ended||e.reading)&&(i=!1),i&&(e.reading=!0,e.sync=!0,0===e.length&&(e.needReadable=!0),this._read(e.highWaterMark),e.sync=!1),i&&!e.reading&&(t=h(n,e)),r=t>0?m(t,e):null,null===r&&(e.needReadable=!0,t=0),e.length-=t,0!==e.length||e.ended||(e.needReadable=!0),e.ended&&!e.endEmitted&&0===e.length&&w(this),r},i.prototype._read=function(){this.emit("error",new Error("not implemented"))},i.prototype.pipe=function(t,e){function n(t){t===u&&o()}function i(){t.end()}function o(){t.removeListener("close",a),t.removeListener("finish",h),t.removeListener("drain",p),t.removeListener("error",s),t.removeListener("unpipe",n),u.removeListener("end",i),u.removeListener("end",o),(!t._writableState||t._writableState.needDrain)&&p()}function s(e){c(),t.removeListener("error",s),0===A.listenerCount(t,"error")&&t.emit("error",e)}function a(){t.removeListener("finish",h),c()}function h(){t.removeListener("close",a),c()}function c(){u.unpipe(t)}var u=this,f=this._readableState;switch(f.pipesCount){case 0:f.pipes=t;break;case 1:f.pipes=[f.pipes,t];break;default:f.pipes.push(t)}f.pipesCount+=1;var d=(!e||e.end!==!1)&&t!==r.stdout&&t!==r.stderr,l=d?i:o;f.endEmitted?r.nextTick(l):u.once("end",l),t.on("unpipe",n);var p=v(u);return t.on("drain",p),t._events&&t._events.error?S(t._events.error)?t._events.error.unshift(s):t._events.error=[s,t._events.error]:t.on("error",s),t.once("close",a),t.once("finish",h),t.emit("pipe",u),f.flowing||(this.on("readable",g),f.flowing=!0,r.nextTick(function(){b(u)})),t},i.prototype.unpipe=function(t){var e=this._readableState;if(0===e.pipesCount)return this;if(1===e.pipesCount)return t&&t!==e.pipes?this:(t||(t=e.pipes),e.pipes=null,e.pipesCount=0,this.removeListener("readable",g),e.flowing=!1,t&&t.emit("unpipe",this),this);if(!t){var r=e.pipes,n=e.pipesCount;e.pipes=null,e.pipesCount=0,this.removeListener("readable",g),e.flowing=!1;for(var i=0;n>i;i++)r[i].emit("unpipe",this);return this}var i=_(e.pipes,t);return-1===i?this:(e.pipes.splice(i,1),e.pipesCount-=1,1===e.pipesCount&&(e.pipes=e.pipes[0]),t.emit("unpipe",this),this)},i.prototype.on=function(t,e){var r=E.prototype.on.call(this,t,e);if("data"!==t||this._readableState.flowing||y(this),"readable"===t&&this.readable){var n=this._readableState;n.readableListening||(n.readableListening=!0,n.emittedReadable=!1,n.needReadable=!0,n.reading?n.length&&f(this,n):this.read(0))}return r},i.prototype.addListener=i.prototype.on,i.prototype.resume=function(){y(this),this.read(0),this.emit("resume")},i.prototype.pause=function(){y(this,!0),this.emit("pause")},i.prototype.wrap=function(t){var e=this._readableState,r=!1,n=this;t.on("end",function(){if(e.decoder&&!e.ended){var t=e.decoder.end();t&&t.length&&n.push(t)}n.push(null)}),t.on("data",function(i){if(e.decoder&&(i=e.decoder.write(i)),(!e.objectMode||null!==i&&void 0!==i)&&(e.objectMode||i&&i.length)){var o=n.push(i);o||(r=!0,t.pause())}});for(var i in t)"function"==typeof t[i]&&"undefined"==typeof this[i]&&(this[i]=function(e){return function(){return t[e].apply(t,arguments)}}(i));var o=["error","close","destroy","pause","resume"];return x(o,function(e){t.on(e,n.emit.bind(n,e))}),n._read=function(){r&&(r=!1,t.resume())},n},i._fromList=m}).call(this,t(208))},{}],213:[function(t,e){function r(t,e){this.afterTransform=function(t,r){return n(e,t,r)},this.needTransform=!1,this.transforming=!1,this.writecb=null,this.writechunk=null}function n(t,e,r){var n=t._transformState;n.transforming=!1;var i=n.writecb;if(!i)return t.emit("error",new Error("no writecb in Transform class"));n.writechunk=null,n.writecb=null,null!==r&&void 0!==r&&t.push(r),i&&i(e);var o=t._readableState;o.reading=!1,(o.needReadable||o.length<o.highWaterMark)&&t._read(o.highWaterMark)}function i(t){if(!(this instanceof i))return new i(t);s.call(this,t);var e=(this._transformState=new r(t,this),this);this._readableState.needReadable=!0,this._readableState.sync=!1,this.once("finish",function(){"function"==typeof this._flush?this._flush(function(t){o(e,t)}):o(e)})}function o(t,e){if(e)return t.emit("error",e);var r=t._writableState,n=(t._readableState,t._transformState);if(r.length)throw new Error("calling transform done when ws.length != 0");if(n.transforming)throw new Error("calling transform done when still transforming");return t.push(null)}e.exports=i;var s=t(210),a=t(215);a.inherits=t(206),a.inherits(i,s),i.prototype.push=function(t,e){return this._transformState.needTransform=!1,s.prototype.push.call(this,t,e)},i.prototype._transform=function(){throw new Error("not implemented")},i.prototype._write=function(t,e,r){var n=this._transformState;if(n.writecb=r,n.writechunk=t,n.writeencoding=e,!n.transforming){var i=this._readableState;(n.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}},i.prototype._read=function(){var t=this._transformState;null!==t.writechunk&&t.writecb&&!t.transforming?(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform)):t.needTransform=!0}},{}],214:[function(t,e){(function(r){function n(t,e,r){this.chunk=t,this.encoding=e,this.callback=r}function i(t,e){t=t||{};var r=t.highWaterMark;this.highWaterMark=r||0===r?r:16384,this.objectMode=!!t.objectMode,this.highWaterMark=~~this.highWaterMark,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1;var n=t.decodeStrings===!1;this.decodeStrings=!n,this.defaultEncoding=t.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(t){l(e,t)},this.writecb=null,this.writelen=0,this.buffer=[],this.errorEmitted=!1}function o(e){var r=t(210);return this instanceof o||this instanceof r?(this._writableState=new i(e,this),this.writable=!0,void _.call(this)):new o(e)}function s(t,e,n){var i=new Error("write after end");t.emit("error",i),r.nextTick(function(){n(i)})}function a(t,e,n,i){var o=!0;if(!w.isBuffer(n)&&"string"!=typeof n&&null!==n&&void 0!==n&&!e.objectMode){var s=new TypeError("Invalid non-string/buffer chunk");t.emit("error",s),r.nextTick(function(){i(s)}),o=!1}return o}function h(t,e,r){return t.objectMode||t.decodeStrings===!1||"string"!=typeof e||(e=new w(e,r)),e}function c(t,e,r,i,o){r=h(e,r,i),w.isBuffer(r)&&(i="buffer");var s=e.objectMode?1:r.length;e.length+=s;var a=e.length<e.highWaterMark;return a||(e.needDrain=!0),e.writing?e.buffer.push(new n(r,i,o)):u(t,e,s,r,i,o),a}function u(t,e,r,n,i,o){e.writelen=r,e.writecb=o,e.writing=!0,e.sync=!0,t._write(n,i,e.onwrite),e.sync=!1}function f(t,e,n,i,o){n?r.nextTick(function(){o(i)}):o(i),t._writableState.errorEmitted=!0,t.emit("error",i)}function d(t){t.writing=!1,t.writecb=null,t.length-=t.writelen,t.writelen=0}function l(t,e){var n=t._writableState,i=n.sync,o=n.writecb;if(d(n),e)f(t,n,i,e,o);else{var s=g(t,n);s||n.bufferProcessing||!n.buffer.length||b(t,n),i?r.nextTick(function(){p(t,n,s,o)}):p(t,n,s,o)}}function p(t,e,r,n){r||v(t,e),n(),r&&y(t,e)}function v(t,e){0===e.length&&e.needDrain&&(e.needDrain=!1,t.emit("drain"))}function b(t,e){e.bufferProcessing=!0;for(var r=0;r<e.buffer.length;r++){var n=e.buffer[r],i=n.chunk,o=n.encoding,s=n.callback,a=e.objectMode?1:i.length;if(u(t,e,a,i,o,s),e.writing){r++;break}}e.bufferProcessing=!1,r<e.buffer.length?e.buffer=e.buffer.slice(r):e.buffer.length=0}function g(t,e){return e.ending&&0===e.length&&!e.finished&&!e.writing}function y(t,e){var r=g(t,e);return r&&(e.finished=!0,t.emit("finish")),r}function m(t,e,n){e.ending=!0,y(t,e),n&&(e.finished?r.nextTick(n):t.once("finish",n)),e.ended=!0}e.exports=o;var w=t(63).Buffer;o.WritableState=i;var x=t(215);x.inherits=t(206);var _=t(220);x.inherits(o,_),o.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe. Not readable."))},o.prototype.write=function(t,e,r){var n=this._writableState,i=!1;return"function"==typeof e&&(r=e,e=null),w.isBuffer(t)?e="buffer":e||(e=n.defaultEncoding),"function"!=typeof r&&(r=function(){}),n.ended?s(this,n,r):a(this,n,t,r)&&(i=c(this,n,t,e,r)),i},o.prototype._write=function(t,e,r){r(new Error("not implemented"))},o.prototype.end=function(t,e,r){var n=this._writableState;"function"==typeof t?(r=t,t=null,e=null):"function"==typeof e&&(r=e,e=null),"undefined"!=typeof t&&null!==t&&this.write(t,e),n.ending||n.finished||m(this,n,r)}}).call(this,t(208))},{}],215:[function(t,e,r){(function(t){function e(t){return Array.isArray(t)}function n(t){return"boolean"==typeof t}function i(t){return null===t}function o(t){return null==t}function s(t){return"number"==typeof t}function a(t){return"string"==typeof t}function h(t){return"symbol"==typeof t}function c(t){return void 0===t}function u(t){return f(t)&&"[object RegExp]"===g(t)}function f(t){return"object"==typeof t&&null!==t}function d(t){return f(t)&&"[object Date]"===g(t)}function l(t){return f(t)&&("[object Error]"===g(t)||t instanceof Error)}function p(t){return"function"==typeof t}function v(t){return null===t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||"symbol"==typeof t||"undefined"==typeof t}function b(e){return t.isBuffer(e)}function g(t){return Object.prototype.toString.call(t)}r.isArray=e,r.isBoolean=n,r.isNull=i,r.isNullOrUndefined=o,r.isNumber=s,r.isString=a,r.isSymbol=h,r.isUndefined=c,r.isRegExp=u,r.isObject=f,r.isDate=d,r.isError=l,r.isFunction=p,r.isPrimitive=v,r.isBuffer=b}).call(this,t(63).Buffer)},{}],216:[function(t,e){e.exports=t(211)},{}],217:[function(t,e,r){var n=t(220);r=e.exports=t(212),r.Stream=n,r.Readable=r,r.Writable=t(214),r.Duplex=t(210),r.Transform=t(213),r.PassThrough=t(211)},{}],218:[function(t,e){e.exports=t(213)},{}],219:[function(t,e){e.exports=t(214)},{}],220:[function(t,e){function r(){n.call(this)}e.exports=r;var n=t(205).EventEmitter,i=t(206);i(r,n),r.Readable=t(217),r.Writable=t(219),r.Duplex=t(209),r.Transform=t(218),r.PassThrough=t(216),r.Stream=r,r.prototype.pipe=function(t,e){function r(e){t.writable&&!1===t.write(e)&&c.pause&&c.pause()}function i(){c.readable&&c.resume&&c.resume()}function o(){u||(u=!0,t.end())}function s(){u||(u=!0,"function"==typeof t.destroy&&t.destroy())}function a(t){if(h(),0===n.listenerCount(this,"error"))throw t}function h(){c.removeListener("data",r),t.removeListener("drain",i),c.removeListener("end",o),c.removeListener("close",s),c.removeListener("error",a),t.removeListener("error",a),c.removeListener("end",h),c.removeListener("close",h),t.removeListener("close",h)}var c=this;c.on("data",r),t.on("drain",i),t._isStdio||e&&e.end===!1||(c.on("end",o),c.on("close",s));var u=!1;return c.on("error",a),t.on("error",a),c.on("end",h),c.on("close",h),t.on("close",h),t.emit("pipe",c),t}},{}],221:[function(t,e,r){function n(t){if(t&&!h(t))throw new Error("Unknown encoding: "+t)}function i(t){return t.toString(this.encoding)}function o(t){this.charReceived=t.length%2,this.charLength=this.charReceived?2:0}function s(t){this.charReceived=t.length%3,this.charLength=this.charReceived?3:0}var a=t(63).Buffer,h=a.isEncoding||function(t){switch(t&&t.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}},c=r.StringDecoder=function(t){switch(this.encoding=(t||"utf8").toLowerCase().replace(/[-_]/,""),n(t),this.encoding){case"utf8":this.surrogateSize=3;break;case"ucs2":case"utf16le":this.surrogateSize=2,this.detectIncompleteChar=o;break;case"base64":this.surrogateSize=3,this.detectIncompleteChar=s;break;default:return void(this.write=i)}this.charBuffer=new a(6),this.charReceived=0,this.charLength=0};c.prototype.write=function(t){for(var e="";this.charLength;){var r=t.length>=this.charLength-this.charReceived?this.charLength-this.charReceived:t.length;if(t.copy(this.charBuffer,this.charReceived,0,r),this.charReceived+=r,this.charReceived<this.charLength)return"";t=t.slice(r,t.length),e=this.charBuffer.slice(0,this.charLength).toString(this.encoding);var n=e.charCodeAt(e.length-1);if(!(n>=55296&&56319>=n)){if(this.charReceived=this.charLength=0,0===t.length)return e;break}this.charLength+=this.surrogateSize,e=""}this.detectIncompleteChar(t);var i=t.length;this.charLength&&(t.copy(this.charBuffer,0,t.length-this.charReceived,i),i-=this.charReceived),e+=t.toString(this.encoding,0,i);var i=e.length-1,n=e.charCodeAt(i);if(n>=55296&&56319>=n){var o=this.surrogateSize;return this.charLength+=o,this.charReceived+=o,this.charBuffer.copy(this.charBuffer,o,0,o),t.copy(this.charBuffer,0,0,o),e.substring(0,i)}return e},c.prototype.detectIncompleteChar=function(t){for(var e=t.length>=3?3:t.length;e>0;e--){var r=t[t.length-e];if(1==e&&r>>5==6){this.charLength=2;break}if(2>=e&&r>>4==14){this.charLength=3;break}if(3>=e&&r>>3==30){this.charLength=4;break}}this.charReceived=e},c.prototype.end=function(t){var e="";if(t&&t.length&&(e=this.write(t)),this.charReceived){var r=this.charReceived,n=this.charBuffer,i=this.encoding;e+=n.slice(0,r).toString(i)}return e}},{}],222:[function(t,e){e.exports=function(t){return t&&"object"==typeof t&&"function"==typeof t.copy&&"function"==typeof t.fill&&"function"==typeof t.readUInt8}},{}],223:[function(t,e,r){(function(e,n){function i(t,e){var n={seen:[],stylize:s};return arguments.length>=3&&(n.depth=arguments[2]),arguments.length>=4&&(n.colors=arguments[3]),v(e)?n.showHidden=e:e&&r._extend(n,e),x(n.showHidden)&&(n.showHidden=!1),x(n.depth)&&(n.depth=2),x(n.colors)&&(n.colors=!1),x(n.customInspect)&&(n.customInspect=!0),n.colors&&(n.stylize=o),h(n,t,n.depth)}function o(t,e){var r=i.styles[e];return r?"["+i.colors[r][0]+"m"+t+"["+i.colors[r][1]+"m":t}function s(t){return t}function a(t){var e={};return t.forEach(function(t){e[t]=!0}),e}function h(t,e,n){if(t.customInspect&&e&&E(e.inspect)&&e.inspect!==r.inspect&&(!e.constructor||e.constructor.prototype!==e)){var i=e.inspect(n,t);return m(i)||(i=h(t,i,n)),i}var o=c(t,e);if(o)return o;var s=Object.keys(e),v=a(s);if(t.showHidden&&(s=Object.getOwnPropertyNames(e)),A(e)&&(s.indexOf("message")>=0||s.indexOf("description")>=0))return u(e);if(0===s.length){if(E(e)){var b=e.name?": "+e.name:"";return t.stylize("[Function"+b+"]","special")}if(_(e))return t.stylize(RegExp.prototype.toString.call(e),"regexp");if(T(e))return t.stylize(Date.prototype.toString.call(e),"date");if(A(e))return u(e)}var g="",y=!1,w=["{","}"];if(p(e)&&(y=!0,w=["[","]"]),E(e)){var x=e.name?": "+e.name:"";g=" [Function"+x+"]"}if(_(e)&&(g=" "+RegExp.prototype.toString.call(e)),T(e)&&(g=" "+Date.prototype.toUTCString.call(e)),A(e)&&(g=" "+u(e)),0===s.length&&(!y||0==e.length))return w[0]+g+w[1];if(0>n)return _(e)?t.stylize(RegExp.prototype.toString.call(e),"regexp"):t.stylize("[Object]","special");t.seen.push(e);var S;return S=y?f(t,e,n,v,s):s.map(function(r){return d(t,e,n,v,r,y)}),t.seen.pop(),l(S,g,w)}function c(t,e){if(x(e))return t.stylize("undefined","undefined");if(m(e)){var r="'"+JSON.stringify(e).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return t.stylize(r,"string")}return y(e)?t.stylize(""+e,"number"):v(e)?t.stylize(""+e,"boolean"):b(e)?t.stylize("null","null"):void 0}function u(t){return"["+Error.prototype.toString.call(t)+"]"}function f(t,e,r,n,i){for(var o=[],s=0,a=e.length;a>s;++s)o.push(B(e,String(s))?d(t,e,r,n,String(s),!0):"");return i.forEach(function(i){i.match(/^\d+$/)||o.push(d(t,e,r,n,i,!0))}),o}function d(t,e,r,n,i,o){var s,a,c;if(c=Object.getOwnPropertyDescriptor(e,i)||{value:e[i]},c.get?a=c.set?t.stylize("[Getter/Setter]","special"):t.stylize("[Getter]","special"):c.set&&(a=t.stylize("[Setter]","special")),B(n,i)||(s="["+i+"]"),a||(t.seen.indexOf(c.value)<0?(a=b(r)?h(t,c.value,null):h(t,c.value,r-1),a.indexOf("\n")>-1&&(a=o?a.split("\n").map(function(t){return"  "+t}).join("\n").substr(2):"\n"+a.split("\n").map(function(t){return"   "+t}).join("\n"))):a=t.stylize("[Circular]","special")),x(s)){if(o&&i.match(/^\d+$/))return a;s=JSON.stringify(""+i),s.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(s=s.substr(1,s.length-2),s=t.stylize(s,"name")):(s=s.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),s=t.stylize(s,"string"))}return s+": "+a}function l(t,e,r){var n=0,i=t.reduce(function(t,e){return n++,e.indexOf("\n")>=0&&n++,t+e.replace(/\u001b\[\d\d?m/g,"").length+1},0);return i>60?r[0]+(""===e?"":e+"\n ")+" "+t.join(",\n  ")+" "+r[1]:r[0]+e+" "+t.join(", ")+" "+r[1]}function p(t){return Array.isArray(t)}function v(t){return"boolean"==typeof t}function b(t){return null===t}function g(t){return null==t}function y(t){return"number"==typeof t}function m(t){return"string"==typeof t}function w(t){return"symbol"==typeof t}function x(t){return void 0===t}function _(t){return S(t)&&"[object RegExp]"===M(t)}function S(t){return"object"==typeof t&&null!==t}function T(t){return S(t)&&"[object Date]"===M(t)}function A(t){return S(t)&&("[object Error]"===M(t)||t instanceof Error)}function E(t){return"function"==typeof t}function C(t){return null===t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||"symbol"==typeof t||"undefined"==typeof t}function M(t){return Object.prototype.toString.call(t)}function R(t){return 10>t?"0"+t.toString(10):t.toString(10)}function k(){var t=new Date,e=[R(t.getHours()),R(t.getMinutes()),R(t.getSeconds())].join(":");return[t.getDate(),O[t.getMonth()],e].join(" ")}function B(t,e){return Object.prototype.hasOwnProperty.call(t,e)}var I=/%[sdj%]/g;r.format=function(t){if(!m(t)){for(var e=[],r=0;r<arguments.length;r++)e.push(i(arguments[r]));return e.join(" ")}for(var r=1,n=arguments,o=n.length,s=String(t).replace(I,function(t){if("%%"===t)return"%";if(r>=o)return t;switch(t){case"%s":return String(n[r++]);case"%d":return Number(n[r++]);case"%j":try{return JSON.stringify(n[r++])}catch(t){return"[Circular]"}default:return t}}),a=n[r];o>r;a=n[++r])s+=b(a)||!S(a)?" "+a:" "+i(a);return s},r.deprecate=function(t,i){function o(){if(!s){if(e.throwDeprecation)throw new Error(i);e.traceDeprecation?console.trace(i):console.error(i),s=!0}return t.apply(this,arguments)}if(x(n.process))return function(){return r.deprecate(t,i).apply(this,arguments)};if(e.noDeprecation===!0)return t;var s=!1;return o};var P,L={};r.debuglog=function(t){if(x(P)&&(P=e.env.NODE_DEBUG||""),t=t.toUpperCase(),!L[t])if(new RegExp("\\b"+t+"\\b","i").test(P)){var n=e.pid;L[t]=function(){var e=r.format.apply(r,arguments);console.error("%s %d: %s",t,n,e)}}else L[t]=function(){};return L[t]},r.inspect=i,i.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},i.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},r.isArray=p,r.isBoolean=v,r.isNull=b,r.isNullOrUndefined=g,r.isNumber=y,r.isString=m,r.isSymbol=w,r.isUndefined=x,r.isRegExp=_,r.isObject=S,r.isDate=T,r.isError=A,r.isFunction=E,r.isPrimitive=C,r.isBuffer=t(222);var O=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];r.log=function(){console.log("%s - %s",k(),r.format.apply(r,arguments))},r.inherits=t(206),r._extend=function(t,e){if(!e||!S(e))return t;for(var r=Object.keys(e),n=r.length;n--;)t[r[n]]=e[r[n]];return t}}).call(this,t(208),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],224:[function(require,module,exports){function Context(){}var indexOf=require(225),Object_keys=function(t){if(Object.keys)return Object.keys(t);var e=[];for(var r in t)e.push(r);return e},forEach=function(t,e){if(t.forEach)return t.forEach(e);for(var r=0;r<t.length;r++)e(t[r],r,t)},defineProp=function(){try{return Object.defineProperty({},"_",{}),function(t,e,r){Object.defineProperty(t,e,{writable:!0,enumerable:!1,configurable:!0,value:r})}}catch(t){return function(t,e,r){t[e]=r}}}(),globals=["Array","Boolean","Date","Error","EvalError","Function","Infinity","JSON","Math","NaN","Number","Object","RangeError","ReferenceError","RegExp","String","SyntaxError","TypeError","URIError","decodeURI","decodeURIComponent","encodeURI","encodeURIComponent","escape","eval","isFinite","isNaN","parseFloat","parseInt","undefined","unescape"];Context.prototype={};var Script=exports.Script=function(t){return this instanceof Script?void(this.code=t):new Script(t)};Script.prototype.runInContext=function(t){if(!(t instanceof Context))throw new TypeError("needs a 'context' argument.");var e=document.createElement("iframe");e.style||(e.style={}),e.style.display="none",document.body.appendChild(e);var r=e.contentWindow,n=r.eval,i=r.execScript;!n&&i&&(i.call(r,"null"),n=r.eval),forEach(Object_keys(t),function(e){r[e]=t[e]}),forEach(globals,function(e){t[e]&&(r[e]=t[e])});var o=Object_keys(r),s=n.call(r,this.code);return forEach(Object_keys(r),function(e){(e in t||-1===indexOf(o,e))&&(t[e]=r[e])}),forEach(globals,function(e){e in t||defineProp(t,e,r[e])}),document.body.removeChild(e),s},Script.prototype.runInThisContext=function(){return eval(this.code)},Script.prototype.runInNewContext=function(t){var e=Script.createContext(t),r=this.runInContext(e);return forEach(Object_keys(e),function(r){t[r]=e[r]}),r},forEach(Object_keys(Script.prototype),function(t){exports[t]=Script[t]=function(e){var r=Script(e);return r[t].apply(r,[].slice.call(arguments,1))}}),exports.createScript=function(t){return exports.Script(t)},exports.createContext=Script.createContext=function(t){var e=new Context;return"object"==typeof t&&forEach(Object_keys(t),function(r){e[r]=t[r]}),e}},{}],225:[function(t,e){var r=[].indexOf;e.exports=function(t,e){if(r)return t.indexOf(e);for(var n=0;n<t.length;++n)if(t[n]===e)return n;return-1}},{}],226:[function(t,e){function r(t){var e;return function(){return e||(e=i(t)),e()}}function n(t){for(var e in t)this[e]=t[e];if(this.speed<=0)throw new Error("speed must be non null positive.");if("function"!=typeof this.spawn)throw new Error("spawn must be a function.");this.lastti=null}var i=t(240),o=2*Math.PI;n.prototype={spawn:function(t){console.log("NOT IMPLEMENTED: Spawner#spawn",t)},speed:1e3,count:1,rot:0,pos:[0,0],ang:0,vel:0,front:0,pattern:null,patternMask:null,initialTime:0,randPos:0,randAng:0,randVel:0,seed:"",maxCatchup:1e3,maxPerLoop:100},Object.defineProperty(n.prototype,"pattern",{set:function(t){if(this._pattern=t,t){for(var e=t.reduce(function(t,e){return t+Math.abs(e)},0),r=new Uint8Array(e),n=0,i=0;i<t.length;++i)for(var o=t[i],s=o>0?1:0,a=Math.abs(o),h=0;a>h;++h)r[n++]=s;this.patternMask=r}},get:function(){return this._pattern}}),n.prototype.init=function(t){var e=Math.floor((t-this.initialTime)/this.speed);if(this.patternMask){var r=e*this.count%this.patternMask.length;this._ip=r}this.lastti=e},n.prototype.getHeads=function(t){var e,r=(t-this.initialTime)/this.speed,n=Math.floor(r),i=r-n;this._cacheHeads&&this._cacheHeads.tifrom===n?e=this._cacheHeads:this._cacheHeads=e=[];for(var s=0;s<this.count;++s){var a=e[s];if(!a){var h=this.count*n+s,c=h+this.count,u=!this.patternMask||0!==this.patternMask[h%this.patternMask.length],f=(this.rot*h+this.ang+o)%o,d=(this.rot*c+this.ang+o)%o;f>d+Math.PI&&(f-=o),d>f+Math.PI&&(d-=o),a={trigger:u,angleFrom:f,angleTo:d,tifrom:n,p:i}}a.angle=a.angleFrom*(1-i)+a.angleTo*i,e[s]=a}return e},n.prototype.update=function(t){null===this.lastti&&this.init(t);var e=Math.floor((t-this.initialTime)/this.speed),n=e-this.lastti;n>this.maxCatchup&&(console.log("Spawner: "+n+" entities to catchup. maximized to "+this.maxCatchup+" and lost some."),this.lastti=e-this.maxCatchup);for(var i=0;this.lastti<e&&i<this.maxPerLoop;++i)for(var o=++this.lastti,s=t-o*this.speed,a=r(this.seed+"@"+o),h=0;h<this.count;++h){if(this.patternMask){var c=0===this.patternMask[this._ip];if(this._ip=this._ip>=this.patternMask.length-1?0:this._ip+1,c)continue}var u=this.ang+this.randAng*(a()-.5)+this.rot*(this.count*o+h)%(2*Math.PI),f=[Math.cos(u),Math.sin(u)],d=this.vel+this.randVel*(a()-.5),l=[d*f[0],d*f[1]],p=[this.pos[0]+this.randPos*(a()-.5)+l[0]*s+this.front*f[0],this.pos[1]+this.randPos*(a()-.5)+l[1]*s+this.front*f[1]];this.spawn({random:a,timeIndex:o,countIndex:h,angle:u,position:p,velocity:l,direction:f})}},e.exports=n},{}],227:[function(t,e,r){!function(){"use strict";function t(){try{"undefined"!=typeof AudioContext?e=new AudioContext:"undefined"!=typeof webkitAudioContext?e=new webkitAudioContext:n=!1}catch(t){n=!1}if(!n)if("undefined"!=typeof Audio)try{new Audio}catch(t){i=!0}else i=!0}var e=null,n=!0,i=!1;if(t(),n){var o="undefined"==typeof e.createGain?e.createGainNode():e.createGain();o.gain.value=1,o.connect(e.destination)}var s=function(){this.init()};s.prototype={init:function(){var t=this||a;return t._codecs={},t._howls=[],t._muted=!1,t._volume=1,t.iOSAutoEnable=!0,t.noAudio=i,t.usingWebAudio=n,t.ctx=e,i||t._setupCodecs(),t},volume:function(t){var e=this||a;if(t=parseFloat(t),"undefined"!=typeof t&&t>=0&&1>=t){e._volume=t,n&&(o.gain.value=t);for(var r=0;r<e._howls.length;r++)if(!e._howls[r]._webAudio)for(var i=e._howls[r]._getSoundIds(),s=0;s<i.length;s++){var h=e._howls[r]._soundById(i[s]);h&&h._node&&(h._node.volume=h._volume*t)}return e}return e._volume},mute:function(t){var e=this||a;e._muted=t,n&&(o.gain.value=t?0:e._volume);for(var r=0;r<e._howls.length;r++)if(!e._howls[r]._webAudio)for(var i=e._howls[r]._getSoundIds(),s=0;s<i.length;s++){var h=e._howls[r]._soundById(i[s]);h&&h._node&&(h._node.muted=t?!0:h._muted)}return e},codecs:function(t){return(this||a)._codecs[t]},_setupCodecs:function(){var t=this||a,e=new Audio,r=e.canPlayType("audio/mpeg;").replace(/^no$/,"");return t._codecs={mp3:!(!r&&!e.canPlayType("audio/mp3;").replace(/^no$/,"")),mpeg:!!r,opus:!!e.canPlayType('audio/ogg; codecs="opus"').replace(/^no$/,""),ogg:!!e.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),wav:!!e.canPlayType('audio/wav; codecs="1"').replace(/^no$/,""),aac:!!e.canPlayType("audio/aac;").replace(/^no$/,""),m4a:!!(e.canPlayType("audio/x-m4a;")||e.canPlayType("audio/m4a;")||e.canPlayType("audio/aac;")).replace(/^no$/,""),mp4:!!(e.canPlayType("audio/x-mp4;")||e.canPlayType("audio/mp4;")||e.canPlayType("audio/aac;")).replace(/^no$/,""),weba:!!e.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,""),webm:!!e.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")},t
},_enableiOSAudio:function(){var t=this||a;if(!e||!t._iOSEnabled&&/iPhone|iPad|iPod/i.test(navigator.userAgent)){t._iOSEnabled=!1;var r=function(){var n=e.createBuffer(1,1,22050),i=e.createBufferSource();i.buffer=n,i.connect(e.destination),"undefined"==typeof i.start?i.noteOn(0):i.start(0),setTimeout(function(){(i.playbackState===i.PLAYING_STATE||i.playbackState===i.FINISHED_STATE)&&(t._iOSEnabled=!0,t.iOSAutoEnable=!1,window.removeEventListener("touchstart",r,!1))},0)};return window.addEventListener("touchstart",r,!1),t}}};var a=new s,h=function(t){var e=this;return t.src?void e.init(t):void console.error("An array of source files must be passed with any new Howl.")};h.prototype={init:function(t){var r=this;return r._autoplay=t.autoplay||!1,r._ext=t.ext||null,r._html5=t.html5||!1,r._muted=t.mute||!1,r._loop=t.loop||!1,r._pool=t.pool||5,r._preload="boolean"==typeof t.preload?t.preload:!0,r._rate=t.rate||1,r._sprite=t.sprite||{},r._src="string"!=typeof t.src?t.src:[t.src],r._volume=void 0!==t.volume?t.volume:1,r._duration=0,r._loaded=!1,r._sounds=[],r._endTimers={},r._onend=t.onend?[{fn:t.onend}]:[],r._onfaded=t.onfaded?[{fn:t.onfaded}]:[],r._onload=t.onload?[{fn:t.onload}]:[],r._onloaderror=t.onloaderror?[{fn:t.onloaderror}]:[],r._onpause=t.onpause?[{fn:t.onpause}]:[],r._onplay=t.onplay?[{fn:t.onplay}]:[],r._webAudio=n&&!r._html5,"undefined"!=typeof e&&e&&a.iOSAutoEnable&&a._enableiOSAudio(),a._howls.push(r),r._preload&&r.load(),r},load:function(){var t=this,e=null;if(i)return void t._emit("loaderror");"string"==typeof t._src&&(t._src=[t._src]);for(var r=0;r<t._src.length;r++){var n,o;if(t._ext&&t._ext[r]?n=t._ext[r]:(o=t._src[r],n=/^data:audio\/([^;,]+);/i.exec(o),n||(n=/\.([^.]+)$/.exec(o.split("?",1)[0])),n&&(n=n[1].toLowerCase())),a.codecs(n)){e=t._src[r];break}}return e?(t._src=e,new c(t),t._webAudio&&f(t),t):void t._emit("loaderror")},play:function(t){var r=this,n=null;if("number"==typeof t)n=t,t=null;else if("undefined"==typeof t){t="__default";for(var i=0,o=0;o<r._sounds.length;o++)r._sounds[o]._paused&&!r._sounds[o]._ended&&(i++,n=r._sounds[o]._id);1===i?t=null:n=null}var s=n?r._soundById(n):r._inactiveSound();if(!s)return null;if(n&&!t&&(t=s._sprite||"__default"),!r._loaded&&!r._sprite[t])return r.once("load",function(){r.play(r._soundById(s._id)?s._id:void 0)}),s._id;if(n&&!s._paused)return s._id;var h=s._seek>0?s._seek:r._sprite[t][0]/1e3,c=(r._sprite[t][0]+r._sprite[t][1])/1e3-h,u=!(!s._loop&&!r._sprite[t][2]),f=function(){r._emit("end",s._id),!r._webAudio&&u&&r.stop(s._id).play(s._id),r._webAudio&&u&&(r._emit("play",s._id),s._seek=s._start||0,s._playStart=e.currentTime,r._endTimers[s._id]=setTimeout(f,1e3*(s._stop-s._start)/Math.abs(r._rate))),r._webAudio&&!u&&(s._paused=!0,s._ended=!0,s._seek=s._start||0,r._clearTimer(s._id),s._node.bufferSource=null),r._webAudio||u||r.stop(s._id)};r._endTimers[s._id]=setTimeout(f,1e3*c/Math.abs(r._rate)),s._paused=!1,s._ended=!1,s._sprite=t,s._seek=h,s._start=r._sprite[t][0]/1e3,s._stop=(r._sprite[t][0]+r._sprite[t][1])/1e3,s._loop=u;var d=s._node;if(r._webAudio){var l=function(){r._refreshBuffer(s);var t=s._muted||r._muted?0:s._volume*a.volume();d.gain.setValueAtTime(t,e.currentTime),s._playStart=e.currentTime,"undefined"==typeof d.bufferSource.start?d.bufferSource.noteGrainOn(0,h,c):d.bufferSource.start(0,h,c),r._endTimers[s._id]||(r._endTimers[s._id]=setTimeout(f,1e3*c/Math.abs(r._rate))),setTimeout(function(){r._emit("play",s._id)},0)};r._loaded?l():(r.once("load",l),r._clearTimer(s._id))}else{var p=function(){d.currentTime=h,d.muted=s._muted||r._muted||a._muted||d.muted,d.volume=s._volume*a.volume(),d.playbackRate=r._rate,setTimeout(function(){d.play(),r._emit("play",s._id)},0)};if(4===d.readyState||!d.readyState&&navigator.isCocoonJS)p();else{var v=function(){r._endTimers[s._id]=setTimeout(f,1e3*c/Math.abs(r._rate)),p(),d.removeEventListener("canplaythrough",v,!1)};d.addEventListener("canplaythrough",v,!1),r._clearTimer(s._id)}}return s._id},pause:function(t){var e=this;if(!e._loaded)return e.once("play",function(){e.pause(t)}),e;for(var r=e._getSoundIds(t),n=0;n<r.length;n++){e._clearTimer(r[n]);var i=e._soundById(r[n]);if(i&&!i._paused){if(i._seek=e.seek(r[n]),i._paused=!0,e._webAudio){if(!i._node.bufferSource)return e;"undefined"==typeof i._node.bufferSource.stop?i._node.bufferSource.noteOff(0):i._node.bufferSource.stop(0),i._node.bufferSource=null}else isNaN(i._node.duration)||i._node.pause();arguments[1]||e._emit("pause",i._id)}}return e},stop:function(t){var e=this;if(!e._loaded)return"undefined"!=typeof e._sounds[0]._sprite&&e.once("play",function(){e.stop(t)}),e;for(var r=e._getSoundIds(t),n=0;n<r.length;n++){e._clearTimer(r[n]);var i=e._soundById(r[n]);if(i&&!i._paused)if(i._seek=i._start||0,i._paused=!0,i._ended=!0,e._webAudio&&i._node){if(!i._node.bufferSource)return e;"undefined"==typeof i._node.bufferSource.stop?i._node.bufferSource.noteOff(0):i._node.bufferSource.stop(0),i._node.bufferSource=null}else i._node&&!isNaN(i._node.duration)&&(i._node.pause(),i._node.currentTime=i._start||0)}return e},mute:function(t,r){var n=this;if(!n._loaded)return n.once("play",function(){n.mute(t,r)}),n;if("undefined"==typeof r){if("boolean"!=typeof t)return n._muted;n._muted=t}for(var i=n._getSoundIds(r),o=0;o<i.length;o++){var s=n._soundById(i[o]);s&&(s._muted=t,n._webAudio&&s._node?s._node.gain.setValueAtTime(t?0:s._volume*a.volume(),e.currentTime):s._node&&(s._node.muted=a._muted?!0:t))}return n},volume:function(){var t,r,n=this,i=arguments;if(0===i.length)return n._volume;if(1===i.length){var o=n._getSoundIds(),s=o.indexOf(i[0]);s>=0?r=parseInt(i[0],10):t=parseFloat(i[0])}else 2===i.length&&(t=parseFloat(i[0]),r=parseInt(i[1],10));var h;if(!("undefined"!=typeof t&&t>=0&&1>=t))return h=r?n._soundById(r):n._sounds[0],h?h._volume:0;if(!n._loaded)return n.once("play",function(){n.volume.apply(n,i)}),n;"undefined"==typeof r&&(n._volume=t),r=n._getSoundIds(r);for(var c=0;c<r.length;c++)h=n._soundById(r[c]),h&&(h._volume=t,n._webAudio&&h._node?h._node.gain.setValueAtTime(t*a.volume(),e.currentTime):h._node&&(h._node.volume=t*a.volume()));return n},fade:function(t,r,n,i){var o=this;if(!o._loaded)return o.once("play",function(){o.fade(t,r,n,i)}),o;o.volume(t,i);for(var s=o._getSoundIds(i),a=0;a<s.length;a++){var h=o._soundById(s[a]);if(h)if(o._webAudio){var c=e.currentTime,u=c+n/1e3;h._volume=t,h._node.gain.setValueAtTime(t,c),h._node.gain.linearRampToValueAtTime(r,u),setTimeout(function(t,n){setTimeout(function(){n._volume=r,o._emit("faded",t)},u-e.currentTime>0?Math.ceil(1e3*(u-e.currentTime)):0)}.bind(o,s[a],h),n)}else{var f=Math.abs(t-r),d=t>r?"out":"in",l=f/.01,p=n/l;!function(){var e=t,n=setInterval(function(t){e+="in"===d?.01:-.01,e=Math.max(0,e),e=Math.min(1,e),e=Math.round(100*e)/100,o.volume(e,t),e===r&&(clearInterval(n),o._emit("faded",t))}.bind(o,s[a]),p)}()}}return o},loop:function(){var t,e,r,n=this,i=arguments;if(0===i.length)return n._loop;if(1===i.length){if("boolean"!=typeof i[0])return r=n._soundById(parseInt(i[0],10)),r?r._loop:!1;t=i[0],n._loop=t}else 2===i.length&&(t=i[0],e=parseInt(i[1],10));for(var o=n._getSoundIds(e),s=0;s<o.length;s++)r=n._soundById(o[s]),r&&(r._loop=t);return n},seek:function(){var t,r,n=this,i=arguments;if(0===i.length)r=n._sounds[0]._id;else if(1===i.length){var o=n._getSoundIds(),s=o.indexOf(i[0]);s>=0?r=parseInt(i[0],10):(r=n._sounds[0]._id,t=parseFloat(i[0]))}else 2===i.length&&(t=parseFloat(i[0]),r=parseInt(i[1],10));if("undefined"==typeof r)return n;if(!n._loaded)return n.once("load",function(){n.seek.apply(n,i)}),n;var a=n._soundById(r);if(a){if(!(t>=0))return n._webAudio?a._seek+(e.currentTime-a._playStart):a._node.currentTime;var h=n.playing(r);h&&n.pause(r,!0),a._seek=t,n._clearTimer(r),h&&n.play(r)}return n},playing:function(t){var e=this,r=e._soundById(t)||e._sounds[0];return r?!r._paused:!1},duration:function(){return this._duration},unload:function(){for(var t=this,e=t._sounds,r=0;r<e.length;r++){e[r]._paused||(t.stop(e[r]._id),t._emit("end",e[r]._id)),t._webAudio||(e[r]._node.src="",e[r]._node.removeEventListener("error",e[r]._errorFn,!1),e[r]._node.removeEventListener("canplaythrough",e[r]._loadFn,!1)),delete e[r]._node,t._clearTimer(e[r]._id);var n=a._howls.indexOf(t);n>=0&&a._howls.splice(n,1)}return u&&delete u[t._src],t=null,null},on:function(t,e,r){var n=this,i=n["_on"+t];return"function"==typeof e&&i.push({id:r,fn:e}),n},off:function(t,e,r){var n=this,i=n["_on"+t];if(e){for(var o=0;o<i.length;o++)if(e===i[o].fn&&r===i[o].id){i.splice(o,1);break}}else i=[];return n},once:function(t,e,r){var n=this,i=function(){e.apply(n,arguments),n.off(t,i,r)};return n.on(t,i,r),n},_emit:function(t,e,r){for(var n=this,i=n["_on"+t],o=0;o<i.length;o++)i[o].id&&i[o].id!==e||setTimeout(function(t){t.call(this,e,r)}.bind(n,i[o].fn),0);return n},_clearTimer:function(t){var e=this;return e._endTimers[t]&&(clearTimeout(e._endTimers[t]),delete e._endTimers[t]),e},_soundById:function(t){for(var e=this,r=0;r<e._sounds.length;r++)if(t===e._sounds[r]._id)return e._sounds[r];return null},_inactiveSound:function(){var t=this;t._drain();for(var e=0;e<t._sounds.length;e++)if(t._sounds[e]._ended)return t._sounds[e].reset();return new c(t)},_drain:function(){var t=this,e=t._pool,r=0,n=0;if(!(t._sounds.length<e)){for(n=0;n<t._sounds.length;n++)t._sounds[n]._ended&&r++;for(n=t._sounds.length-1;n>=0;n--){if(e>=r)return;t._sounds[n]._ended&&(t._webAudio&&t._sounds[n]._node&&t._sounds[n]._node.disconnect(0),t._sounds.splice(n,1),r--)}}},_getSoundIds:function(t){var e=this;if("undefined"==typeof t){for(var r=[],n=0;n<e._sounds.length;n++)r.push(e._sounds[n]._id);return r}return[t]},_refreshBuffer:function(t){var r=this;return t._node.bufferSource=e.createBufferSource(),t._node.bufferSource.buffer=u[r._src],t._node.bufferSource.connect(t._panner?t._panner:t._node),t._node.bufferSource.loop=t._loop,t._loop&&(t._node.bufferSource.loopStart=t._start||0,t._node.bufferSource.loopEnd=t._stop),t._node.bufferSource.playbackRate.value=r._rate,r}};var c=function(t){this._parent=t,this.init()};if(c.prototype={init:function(){var t=this,e=t._parent;return t._muted=e._muted,t._loop=e._loop,t._volume=e._volume,t._muted=e._muted,t._seek=0,t._paused=!0,t._ended=!0,t._id=Math.round(Date.now()*Math.random()),e._sounds.push(t),t.create(),t},create:function(){var t=this,r=t._parent,n=a._muted||t._muted||t._parent._muted?0:t._volume*a.volume();return r._webAudio?(t._node="undefined"==typeof e.createGain?e.createGainNode():e.createGain(),t._node.gain.setValueAtTime(n,e.currentTime),t._node.paused=!0,t._node.connect(o)):(t._node=new Audio,t._errorFn=t._errorListener.bind(t),t._node.addEventListener("error",t._errorFn,!1),t._loadFn=t._loadListener.bind(t),t._node.addEventListener("canplaythrough",t._loadFn,!1),t._node.src=r._src,t._node.preload="auto",t._node.volume=n,t._node.load()),t},reset:function(){var t=this,e=t._parent;return t._muted=e._muted,t._loop=e._loop,t._volume=e._volume,t._muted=e._muted,t._seek=0,t._paused=!0,t._ended=!0,t._sprite=null,t._id=Math.round(Date.now()*Math.random()),t},_errorListener:function(){var t=this;t._node.error&&4===t._node.error.code&&(a.noAudio=!0),t._parent._emit("loaderror",t._id,t._node.error?t._node.error.code:0),t._node.removeEventListener("error",t._errorListener,!1)},_loadListener:function(){var t=this,e=t._parent;e._duration=Math.ceil(10*t._node.duration)/10,0===Object.keys(e._sprite).length&&(e._sprite={__default:[0,1e3*e._duration]}),e._loaded||(e._loaded=!0,e._emit("load")),e._autoplay&&e.play(),t._node.removeEventListener("canplaythrough",t._loadListener,!1)}},n)var u={},f=function(t){var e=t._src;if(u[e])return t._duration=u[e].duration,void p(t);if(/^data:[^;]+;base64,/.test(e)){window.atob=window.atob||function(t){for(var e,r,n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",i=String(t).replace(/=+$/,""),o=0,s=0,a="";r=i.charAt(s++);~r&&(e=o%4?64*e+r:r,o++%4)?a+=String.fromCharCode(255&e>>(-2*o&6)):0)r=n.indexOf(r);return a};for(var r=atob(e.split(",")[1]),n=new Uint8Array(r.length),i=0;i<r.length;++i)n[i]=r.charCodeAt(i);l(n.buffer,t)}else{var o=new XMLHttpRequest;o.open("GET",e,!0),o.responseType="arraybuffer",o.onload=function(){l(o.response,t)},o.onerror=function(){t._webAudio&&(t._html5=!0,t._webAudio=!1,t._sounds=[],delete u[e],t.load())},d(o)}},d=function(t){try{t.send()}catch(e){t.onerror()}},l=function(t,r){e.decodeAudioData(t,function(t){t&&(u[r._src]=t,p(r,t))},function(){r._emit("loaderror")})},p=function(t,e){e&&!t._duration&&(t._duration=e.duration),0===Object.keys(t._sprite).length&&(t._sprite={__default:[0,1e3*t._duration]}),t._loaded||(t._loaded=!0,t._emit("load")),t._autoplay&&t.play()};"function"==typeof define&&define.amd&&define("howler",function(){return{Howler:a,Howl:h}}),"undefined"!=typeof r&&(r.Howler=a,r.Howl=h),"undefined"!=typeof window&&(window.HowlerGlobal=s,window.Howler=a,window.Howl=h,window.Sound=c)}(),function(){"use strict";HowlerGlobal.prototype.init=function(t){return function(){var e=this;return e._pos=[0,0,0],e._orientation=[0,0,-1,0,1,0],e._velocity=[0,0,0],e._listenerAttr={dopplerFactor:1,speedOfSound:343.3},t.call(this,o)}}(HowlerGlobal.prototype.init),HowlerGlobal.prototype.pos=function(t,e,r){var n=this;return n.ctx&&n.ctx.listener?(e="number"!=typeof e?n._pos[1]:e,r="number"!=typeof r?n._pos[2]:r,"number"!=typeof t?n._pos:(n._pos=[t,e,r],n.ctx.listener.setPosition(n._pos[0],n._pos[1],n._pos[2]),n)):n},HowlerGlobal.prototype.orientation=function(t,e,r,n,i,o){var s=this;if(!s.ctx||!s.ctx.listener)return s;var a=s._orientation;return e="number"!=typeof e?a[1]:e,r="number"!=typeof r?a[2]:r,n="number"!=typeof n?a[3]:n,i="number"!=typeof i?a[4]:i,o="number"!=typeof o?a[5]:o,"number"!=typeof t?a:(s._orientation=[t,e,r,n,i,o],s.ctx.listener.setOrientation(a[0],a[1],a[2],a[3],a[4],a[5]),s)},HowlerGlobal.prototype.velocity=function(t,e,r){var n=this;return n.ctx&&n.ctx.listener?(e="number"!=typeof e?n._velocity[1]:e,r="number"!=typeof r?n._velocity[2]:r,"number"!=typeof t?n._velocity:(n._velocity=[t,e,r],n.ctx.listener.setVelocity(n._velocity[0],n._velocity[1],n._velocity[2]),n)):n},HowlerGlobal.prototype.listenerAttr=function(t){var e=this;if(!e.ctx||!e.ctx.listener)return e;var r=e._listenerAttr;return t?(e._listenerAttr={dopplerFactor:"undefined"!=typeof t.dopplerFactor?t.dopplerFactor:r.dopplerFactor,speedOfSound:"undefined"!=typeof t.speedOfSound?t.speedOfSound:r.speedOfSound},e.ctx.listener.dopplerFactor=r.dopplerFactor,e.ctx.listener.speedOfSound=r.speedOfSound,e):r},Howl.prototype.init=function(t){return function(e){var r=this;return r._orientation=e.orientation||[1,0,0],r._pos=e.pos||null,r._velocity=e.velocity||[0,0,0],r._pannerAttr={coneInnerAngle:"undefined"!=typeof e.coneInnerAngle?e.coneInnerAngle:360,coneOUterAngle:"undefined"!=typeof e.coneOUterAngle?e.coneOUterAngle:360,coneOuterGain:"undefined"!=typeof e.coneOuterGain?e.coneOuterGain:0,distanceModel:"undefined"!=typeof e.distanceModel?e.distanceModel:"inverse",maxDistance:"undefined"!=typeof e.maxDistance?e.maxDistance:1e4,panningModel:"undefined"!=typeof e.panningModel?e.panningModel:"HRTF",refDistance:"undefined"!=typeof e.refDistance?e.refDistance:1,rolloffFactor:"undefined"!=typeof e.rolloffFactor?e.rolloffFactor:1},t.call(this,e)}}(Howl.prototype.init),Howl.prototype.pos=function(e,r,n,i){var o=this;if(!o._webAudio)return o;if(!o._loaded)return o.once("play",function(){o.pos(e,r,n,i)}),o;if(r="number"!=typeof r?0:r,n="number"!=typeof n?-.5:n,"undefined"==typeof i){if("number"!=typeof e)return o._pos;o._pos=[e,r,n]}for(var s=o._getSoundIds(i),a=0;a<s.length;a++){var h=o._soundById(s[a]);if(h){if("number"!=typeof e)return h._pos;h._pos=[e,r,n],h._node&&(h._panner||t(h),h._panner.setPosition(e,r,n))}}return o},Howl.prototype.orientation=function(e,r,n,i){var o=this;if(!o._webAudio)return o;if(!o._loaded)return o.once("play",function(){o.orientation(e,r,n,i)}),o;if(r="number"!=typeof r?o._orientation[1]:r,n="number"!=typeof n?o._orientation[1]:n,"undefined"==typeof i){if("number"!=typeof e)return o._orientation;o._orientation=[e,r,n]}for(var s=o._getSoundIds(i),a=0;a<s.length;a++){var h=o._soundById(s[a]);if(h){if("number"!=typeof e)return h._orientation;h._orientation=[e,r,n],h._node&&(h._panner||t(h),h._panner.setOrientation(e,r,n))}}return o},Howl.prototype.velocity=function(e,r,n,i){var o=this;if(!o._webAudio)return o;if(!o._loaded)return o.once("play",function(){o.velocity(e,r,n,i)}),o;if(r="number"!=typeof r?o._velocity[1]:r,n="number"!=typeof n?o._velocity[1]:n,"undefined"==typeof i){if("number"!=typeof e)return o._velocity;o._velocity=[e,r,n]}for(var s=o._getSoundIds(i),a=0;a<s.length;a++){var h=o._soundById(s[a]);if(h){if("number"!=typeof e)return h._velocity;h._velocity=[e,r,n],h._node&&(h._panner||t(h),h._panner.setVelocity(e,r,n))}}return o},Howl.prototype.pannerAttr=function(){var e,r,n,i=this,o=arguments;if(!i._webAudio)return i;if(0===o.length)return i._pannerAttr;if(1===o.length){if("object"!=typeof o[0])return n=i._soundById(parseInt(o[0],10)),n?n._pannerAttr:i._pannerAttr;e=o[0],"undefined"==typeof r&&(i._pannerAttr={coneInnerAngle:"undefined"!=typeof e.coneInnerAngle?e.coneInnerAngle:i._coneInnerAngle,coneOUterAngle:"undefined"!=typeof e.coneOUterAngle?e.coneOUterAngle:i._coneOUterAngle,coneOuterGain:"undefined"!=typeof e.coneOuterGain?e.coneOuterGain:i._coneOuterGain,distanceModel:"undefined"!=typeof e.distanceModel?e.distanceModel:i._distanceModel,maxDistance:"undefined"!=typeof e.maxDistance?e.maxDistance:i._maxDistance,panningModel:"undefined"!=typeof e.panningModel?e.panningModel:i._panningModel,refDistance:"undefined"!=typeof e.refDistance?e.refDistance:i._refDistance,rolloffFactor:"undefined"!=typeof e.rolloffFactor?e.rolloffFactor:i._rolloffFactor})}else 2===o.length&&(e=o[0],r=parseInt(o[1],10));for(var s=i._getSoundIds(r),a=0;a<s.length;a++)if(n=i._soundById(s[a])){var h=n._pannerAttr;h={coneInnerAngle:"undefined"!=typeof e.coneInnerAngle?e.coneInnerAngle:h.coneInnerAngle,coneOUterAngle:"undefined"!=typeof e.coneOUterAngle?e.coneOUterAngle:h.coneOUterAngle,coneOuterGain:"undefined"!=typeof e.coneOuterGain?e.coneOuterGain:h.coneOuterGain,distanceModel:"undefined"!=typeof e.distanceModel?e.distanceModel:h.distanceModel,maxDistance:"undefined"!=typeof e.maxDistance?e.maxDistance:h.maxDistance,panningModel:"undefined"!=typeof e.panningModel?e.panningModel:h.panningModel,refDistance:"undefined"!=typeof e.refDistance?e.refDistance:h.refDistance,rolloffFactor:"undefined"!=typeof e.rolloffFactor?e.rolloffFactor:h.rolloffFactor};var c=n._panner;c?(c.coneInnerAngle=h.coneInnerAngle,c.coneOUterAngle=h.coneOUterAngle,c.coneOuterGain=h.coneOuterGain,c.distanceModel=h.distanceModel,c.maxDistance=h.maxDistance,c.panningModel=h.panningModel,c.refDistance=h.refDistance,c.rolloffFactor=h.rolloffFactor):(n._pos||(n._pos=i._pos||[0,0,-.5]),t(n))}return i},Sound.prototype.init=function(t){return function(){var e=this,r=e._parent;e._orientation=r._orientation,e._pos=r._pos,e._velocity=r._velocity,e._pannerAttr=r._pannerAttr,t.call(this),e._pos&&r.pos(e._pos[0],e._pos[1],e._pos[2],e._id)}}(Sound.prototype.init),Sound.prototype.reset=function(t){return function(){var e=this,r=e._parent;return e._orientation=r._orientation,e._pos=r._pos,e._velocity=r._velocity,e._pannerAttr=r._pannerAttr,t.call(this)}}(Sound.prototype.reset);var t=function(t){t._panner=Howler.ctx.createPanner(),t._panner.coneInnerAngle=t._pannerAttr.coneInnerAngle,t._panner.coneOUterAngle=t._pannerAttr.coneOUterAngle,t._panner.coneOuterGain=t._pannerAttr.coneOuterGain,t._panner.distanceModel=t._pannerAttr.distanceModel,t._panner.maxDistance=t._pannerAttr.maxDistance,t._panner.panningModel=t._pannerAttr.panningModel,t._panner.refDistance=t._pannerAttr.refDistance,t._panner.rolloffFactor=t._pannerAttr.rolloffFactor,t._panner.setPosition(t._pos[0],t._pos[1],t._pos[2]),t._panner.setOrientation(t._orientation[0],t._orientation[1],t._orientation[2]),t._panner.setVelocity(t._velocity[0],t._velocity[1],t._velocity[2]),t._panner.connect(t._node),t._paused||t._parent.pause(t._id).play(t._id)}}()},{}],228:[function(t,e){function r(){this.setSettings=function(t){for(var e=0;24>e;e++)this[String.fromCharCode(97+e)]=t[e]||0;this.c<.01&&(this.c=.01);var r=this.b+this.c+this.e;if(.18>r){var n=.18/r;this.b*=n,this.c*=n,this.e*=n}}}function n(){this._params=new r;var t,e,n,i,o,s,a,h,c,u,f,d;this.reset=function(){var t=this._params;i=100/(t.f*t.f+.001),o=100/(t.g*t.g+.001),s=1-t.h*t.h*t.h*.01,a=-t.i*t.i*t.i*1e-6,t.a||(f=.5-t.n/2,d=5e-5*-t.o),h=1+t.l*t.l*(t.l>0?-.9:10),c=0,u=1==t.m?0:(1-t.m)*(1-t.m)*2e4+32},this.totalReset=function(){this.reset();var r=this._params;return t=r.b*r.b*1e5,e=r.c*r.c*1e5,n=r.e*r.e*1e5+12,3*((t+e+n)/3|0)},this.synthWave=function(r,l){var p=this._params,v=1!=p.s||p.v,b=p.v*p.v*.1,g=1+3e-4*p.w,y=p.s*p.s*p.s*.1,m=1+1e-4*p.t,w=1!=p.s,x=p.x*p.x,_=p.g,S=p.q||p.r,T=p.r*p.r*p.r*.2,A=p.q*p.q*(p.q<0?-1020:1020),E=p.p?((1-p.p)*(1-p.p)*2e4|0)+32:0,C=p.d,M=p.j/2,R=p.k*p.k*.01,k=p.a,B=t,I=1/t,P=1/e,L=1/n,O=5/(1+p.u*p.u*20)*(.01+y);O>.8&&(O=.8),O=1-O;for(var D,j,F,U,N,G,W=!1,z=0,q=0,Y=0,V=0,H=0,X=0,K=0,J=0,$=0,Q=0,Z=new Array(1024),te=new Array(32),ee=Z.length;ee--;)Z[ee]=0;for(var ee=te.length;ee--;)te[ee]=2*Math.random()-1;for(var ee=0;l>ee;ee++){if(W)return ee;if(E&&++$>=E&&($=0,this.reset()),u&&++c>=u&&(u=0,i*=h),s+=a,i*=s,i>o&&(i=o,_>0&&(W=!0)),j=i,M>0&&(Q+=R,j*=1+Math.sin(Q)*M),j|=0,8>j&&(j=8),k||(f+=d,0>f?f=0:f>.5&&(f=.5)),++q>B)switch(q=0,++z){case 1:B=e;break;case 2:B=n}switch(z){case 0:Y=q*I;break;case 1:Y=1+2*(1-q*P)*C;break;case 2:Y=1-q*L;break;case 3:Y=0,W=!0}S&&(A+=T,F=0|A,0>F?F=-F:F>1023&&(F=1023)),v&&g&&(b*=g,1e-5>b?b=1e-5:b>.1&&(b=.1)),G=0;for(var re=8;re--;){if(K++,K>=j&&(K%=j,3==k))for(var ne=te.length;ne--;)te[ne]=2*Math.random()-1;switch(k){case 0:N=f>K/j?.5:-.5;break;case 1:N=1-K/j*2;break;case 2:U=K/j,U=6.28318531*(U>.5?U-1:U),N=1.27323954*U+.405284735*U*U*(0>U?1:-1),N=.225*((0>N?-1:1)*N*N-N)+N;break;case 3:N=te[Math.abs(32*K/j|0)]}v&&(D=X,y*=m,0>y?y=0:y>.1&&(y=.1),w?(H+=(N-X)*y,H*=O):(X=N,H=0),X+=H,V+=X-D,V*=1-b,N=V),S&&(Z[J%1024]=N,N+=Z[(J-F+1024)%1024],J++),G+=N}G*=.125*Y*x,r[ee]=G>=1?32767:-1>=G?-32768:32767*G|0}return l}}var i=new n,o=function(t){i._params.setSettings(t);var e=i.totalReset(),r=new Uint8Array(4*((e+1)/2|0)+44),n=2*i.synthWave(new Uint16Array(r.buffer,44),e),o=new Uint32Array(r.buffer,0,44);o[0]=1179011410,o[1]=n+36,o[2]=1163280727,o[3]=544501094,o[4]=16,o[5]=65537,o[6]=44100,o[7]=88200,o[8]=1048578,o[9]=1635017060,o[10]=n,n+=44;for(var s=0,a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",h="data:audio/wav;base64,";n>s;s+=3){var c=r[s]<<16|r[s+1]<<8|r[s+2];h+=a[c>>18]+a[c>>12&63]+a[c>>6&63]+a[63&c]}return h};"function"==typeof t?e.exports=o:this.jsfxr=o},{}],229:[function(t,e,r){(function(t){(function(){function n(t,e,r){for(var n=(r||0)-1,i=t?t.length:0;++n<i;)if(t[n]===e)return n;return-1}function i(t,e){var r=typeof e;if(t=t.cache,"boolean"==r||null==e)return t[e]?0:-1;"number"!=r&&"string"!=r&&(r="object");var i="number"==r?e:w+e;return t=(t=t[r])&&t[i],"object"==r?t&&n(t,e)>-1?0:-1:t?0:-1}function o(t){var e=this.cache,r=typeof t;if("boolean"==r||null==t)e[t]=!0;else{"number"!=r&&"string"!=r&&(r="object");var n="number"==r?t:w+t,i=e[r]||(e[r]={});"object"==r?(i[n]||(i[n]=[])).push(t):i[n]=!0}}function s(t){return t.charCodeAt(0)}function a(t,e){for(var r=t.criteria,n=e.criteria,i=-1,o=r.length;++i<o;){var s=r[i],a=n[i];if(s!==a){if(s>a||"undefined"==typeof s)return 1;if(a>s||"undefined"==typeof a)return-1}}return t.index-e.index}function h(t){var e=-1,r=t.length,n=t[0],i=t[r/2|0],s=t[r-1];if(n&&"object"==typeof n&&i&&"object"==typeof i&&s&&"object"==typeof s)return!1;var a=f();a.false=a.null=a.true=a.undefined=!1;var h=f();for(h.array=t,h.cache=a,h.push=o;++e<r;)h.push(t[e]);return h}function c(t){return"\\"+J[t]}function u(){return g.pop()||[]}function f(){return y.pop()||{array:null,cache:null,criteria:null,false:!1,index:0,null:!1,number:null,object:null,push:null,string:null,true:!1,undefined:!1,value:null}}function d(t){t.length=0,g.length<_&&g.push(t)}function l(t){var e=t.cache;e&&l(e),t.array=t.cache=t.criteria=t.object=t.number=t.string=t.value=null,y.length<_&&y.push(t)}function p(t,e,r){e||(e=0),"undefined"==typeof r&&(r=t?t.length:0);for(var n=-1,i=r-e||0,o=Array(0>i?0:i);++n<i;)o[n]=t[e+n];return o}function v(t){function e(t){return t&&"object"==typeof t&&!Qn(t)&&Ln.call(t,"__wrapped__")?t:new r(t)}function r(t,e){this.__chain__=!!e,this.__wrapped__=t}function o(t){function e(){if(n){var t=p(n);On.apply(t,arguments)}if(this instanceof e){var o=y(r.prototype),s=r.apply(o,t||arguments);return ke(s)?s:o}return r.apply(i,t||arguments)}var r=t[0],n=t[2],i=t[4];return $n(e,t),e}function g(t,e,r,n,i){if(r){var o=r(t);if("undefined"!=typeof o)return o}var s=ke(t);if(!s)return t;var a=Cn.call(t);if(!V[a])return t;var h=Kn[a];switch(a){case U:case N:return new h(+t);case W:case Y:return new h(t);case q:return o=h(t.source,M.exec(t)),o.lastIndex=t.lastIndex,o}var c=Qn(t);if(e){var f=!n;n||(n=u()),i||(i=u());for(var l=n.length;l--;)if(n[l]==t)return i[l];o=c?h(t.length):{}}else o=c?p(t):oi({},t);return c&&(Ln.call(t,"index")&&(o.index=t.index),Ln.call(t,"input")&&(o.input=t.input)),e?(n.push(t),i.push(o),(c?Je:hi)(t,function(t,s){o[s]=g(t,e,r,n,i)}),f&&(d(n),d(i)),o):o}function y(t){return ke(t)?Nn(t):{}}function _(t,e,r){if("function"!=typeof t)return $r;if("undefined"==typeof e||!("prototype"in t))return t;var n=t.__bindData__;if("undefined"==typeof n&&(Jn.funcNames&&(n=!t.name),n=n||!Jn.funcDecomp,!n)){var i=In.call(t);Jn.funcNames||(n=!R.test(i)),n||(n=P.test(i),$n(t,n))}if(n===!1||n!==!0&&1&n[1])return t;switch(r){case 1:return function(r){return t.call(e,r)};case 2:return function(r,n){return t.call(e,r,n)};case 3:return function(r,n,i){return t.call(e,r,n,i)};case 4:return function(r,n,i,o){return t.call(e,r,n,i,o)}}return Lr(t,e)}function J(t){function e(){var t=h?s:this;if(i){var l=p(i);On.apply(l,arguments)}if((o||u)&&(l||(l=p(arguments)),o&&On.apply(l,o),u&&l.length<a))return n|=16,J([r,f?n:-4&n,l,null,s,a]);if(l||(l=arguments),c&&(r=t[d]),this instanceof e){t=y(r.prototype);var v=r.apply(t,l);return ke(v)?v:t}return r.apply(t,l)}var r=t[0],n=t[1],i=t[2],o=t[3],s=t[4],a=t[5],h=1&n,c=2&n,u=4&n,f=8&n,d=r;return $n(e,t),e}function Q(t,e){var r=-1,o=he(),s=t?t.length:0,a=s>=x&&o===n,c=[];if(a){var u=h(e);u?(o=i,e=u):a=!1}for(;++r<s;){var f=t[r];o(e,f)<0&&c.push(f)}return a&&l(e),c}function Z(t,e,r,n){for(var i=(n||0)-1,o=t?t.length:0,s=[];++i<o;){var a=t[i];if(a&&"object"==typeof a&&"number"==typeof a.length&&(Qn(a)||de(a))){e||(a=Z(a,e,r));var h=-1,c=a.length,u=s.length;for(s.length+=c;++h<c;)s[u++]=a[h]}else r||s.push(a)}return s}function te(t,e,r,n,i,o){if(r){var s=r(t,e);if("undefined"!=typeof s)return!!s}if(t===e)return 0!==t||1/t==1/e;var a=typeof t,h=typeof e;if(!(t!==t||t&&K[a]||e&&K[h]))return!1;if(null==t||null==e)return t===e;var c=Cn.call(t),f=Cn.call(e);if(c==j&&(c=z),f==j&&(f=z),c!=f)return!1;switch(c){case U:case N:return+t==+e;case W:return t!=+t?e!=+e:0==t?1/t==1/e:t==+e;case q:case Y:return t==_n(e)}var l=c==F;if(!l){var p=Ln.call(t,"__wrapped__"),v=Ln.call(e,"__wrapped__");if(p||v)return te(p?t.__wrapped__:t,v?e.__wrapped__:e,r,n,i,o);if(c!=z)return!1;var b=t.constructor,g=e.constructor;if(b!=g&&!(Re(b)&&b instanceof b&&Re(g)&&g instanceof g)&&"constructor"in t&&"constructor"in e)return!1}var y=!i;i||(i=u()),o||(o=u());for(var m=i.length;m--;)if(i[m]==t)return o[m]==e;var w=0;if(s=!0,i.push(t),o.push(e),l){if(m=t.length,w=e.length,s=w==m,s||n)for(;w--;){var x=m,_=e[w];if(n)for(;x--&&!(s=te(t[x],_,r,n,i,o)););else if(!(s=te(t[w],_,r,n,i,o)))break}}else ai(e,function(e,a,h){return Ln.call(h,a)?(w++,s=Ln.call(t,a)&&te(t[a],e,r,n,i,o)):void 0}),s&&!n&&ai(t,function(t,e,r){return Ln.call(r,e)?s=--w>-1:void 0});return i.pop(),o.pop(),y&&(d(i),d(o)),s}function ee(t,e,r,n,i){(Qn(e)?Je:hi)(e,function(e,o){var s,a,h=e,c=t[o];if(e&&((a=Qn(e))||ci(e))){for(var u=n.length;u--;)if(s=n[u]==e){c=i[u];break}if(!s){var f;r&&(h=r(c,e),(f="undefined"!=typeof h)&&(c=h)),f||(c=a?Qn(c)?c:[]:ci(c)?c:{}),n.push(e),i.push(c),f||ee(c,e,r,n,i)}}else r&&(h=r(c,e),"undefined"==typeof h&&(h=e)),"undefined"!=typeof h&&(c=h);t[o]=c})}function ne(t,e){return t+Bn(Xn()*(e-t+1))}function ie(t,e,r){var o=-1,s=he(),a=t?t.length:0,c=[],f=!e&&a>=x&&s===n,p=r||f?u():c;if(f){var v=h(p);s=i,p=v}for(;++o<a;){var b=t[o],g=r?r(b,o,t):b;(e?!o||p[p.length-1]!==g:s(p,g)<0)&&((r||f)&&p.push(g),c.push(b))}return f?(d(p.array),l(p)):r&&d(p),c}function oe(t){return function(r,n,i){var o={};n=e.createCallback(n,i,3);var s=-1,a=r?r.length:0;if("number"==typeof a)for(;++s<a;){var h=r[s];t(o,h,n(h,s,r),r)}else hi(r,function(e,r,i){t(o,e,n(e,r,i),i)});return o}}function se(t,e,r,n,i,s){var a=1&e,h=2&e,c=4&e,u=16&e,f=32&e;if(!h&&!Re(t))throw new Sn;u&&!r.length&&(e&=-17,u=r=!1),f&&!n.length&&(e&=-33,f=n=!1);var d=t&&t.__bindData__;if(d&&d!==!0)return d=p(d),d[2]&&(d[2]=p(d[2])),d[3]&&(d[3]=p(d[3])),!a||1&d[1]||(d[4]=i),!a&&1&d[1]&&(e|=8),!c||4&d[1]||(d[5]=s),u&&On.apply(d[2]||(d[2]=[]),r),f&&Fn.apply(d[3]||(d[3]=[]),n),d[1]|=e,se.apply(null,d);var l=1==e||17===e?o:J;return l([t,e,r,n,i,s])}function ae(t){return ei[t]}function he(){var t=(t=e.indexOf)===gr?n:t;return t}function ce(t){return"function"==typeof t&&Mn.test(t)}function ue(t){var e,r;return t&&Cn.call(t)==z&&(e=t.constructor,!Re(e)||e instanceof e)?(ai(t,function(t,e){r=e}),"undefined"==typeof r||Ln.call(t,r)):!1}function fe(t){return ri[t]}function de(t){return t&&"object"==typeof t&&"number"==typeof t.length&&Cn.call(t)==j||!1}function le(t,e,r,n){return"boolean"!=typeof e&&null!=e&&(n=r,r=e,e=!1),g(t,e,"function"==typeof r&&_(r,n,1))}function pe(t,e,r){return g(t,!0,"function"==typeof e&&_(e,r,1))}function ve(t,e){var r=y(t);return e?oi(r,e):r}function be(t,r,n){var i;return r=e.createCallback(r,n,3),hi(t,function(t,e,n){return r(t,e,n)?(i=e,!1):void 0}),i}function ge(t,r,n){var i;return r=e.createCallback(r,n,3),me(t,function(t,e,n){return r(t,e,n)?(i=e,!1):void 0}),i}function ye(t,e,r){var n=[];ai(t,function(t,e){n.push(e,t)});var i=n.length;for(e=_(e,r,3);i--&&e(n[i--],n[i],t)!==!1;);return t}function me(t,e,r){var n=ti(t),i=n.length;for(e=_(e,r,3);i--;){var o=n[i];if(e(t[o],o,t)===!1)break}return t}function we(t){var e=[];return ai(t,function(t,r){Re(t)&&e.push(r)}),e.sort()}function xe(t,e){return t?Ln.call(t,e):!1}function _e(t){for(var e=-1,r=ti(t),n=r.length,i={};++e<n;){var o=r[e];i[t[o]]=o}return i}function Se(t){return t===!0||t===!1||t&&"object"==typeof t&&Cn.call(t)==U||!1}function Te(t){return t&&"object"==typeof t&&Cn.call(t)==N||!1}function Ae(t){return t&&1===t.nodeType||!1}function Ee(t){var e=!0;if(!t)return e;var r=Cn.call(t),n=t.length;return r==F||r==Y||r==j||r==z&&"number"==typeof n&&Re(t.splice)?!n:(hi(t,function(){return e=!1}),e)}function Ce(t,e,r,n){return te(t,e,"function"==typeof r&&_(r,n,2))}function Me(t){return Wn(t)&&!zn(parseFloat(t))}function Re(t){return"function"==typeof t}function ke(t){return!(!t||!K[typeof t])}function Be(t){return Pe(t)&&t!=+t}function Ie(t){return null===t}function Pe(t){return"number"==typeof t||t&&"object"==typeof t&&Cn.call(t)==W||!1}function Le(t){return t&&"object"==typeof t&&Cn.call(t)==q||!1}function Oe(t){return"string"==typeof t||t&&"object"==typeof t&&Cn.call(t)==Y||!1}function De(t){return"undefined"==typeof t}function je(t,r,n){var i={};return r=e.createCallback(r,n,3),hi(t,function(t,e,n){i[e]=r(t,e,n)}),i}function Fe(t){var e=arguments,r=2;if(!ke(t))return t;if("number"!=typeof e[2]&&(r=e.length),r>3&&"function"==typeof e[r-2])var n=_(e[--r-1],e[r--],2);else r>2&&"function"==typeof e[r-1]&&(n=e[--r]);for(var i=p(arguments,1,r),o=-1,s=u(),a=u();++o<r;)ee(t,i[o],n,s,a);return d(s),d(a),t}function Ue(t,r,n){var i={};if("function"!=typeof r){var o=[];ai(t,function(t,e){o.push(e)}),o=Q(o,Z(arguments,!0,!1,1));for(var s=-1,a=o.length;++s<a;){var h=o[s];i[h]=t[h]}}else r=e.createCallback(r,n,3),ai(t,function(t,e,n){r(t,e,n)||(i[e]=t)
});return i}function Ne(t){for(var e=-1,r=ti(t),n=r.length,i=pn(n);++e<n;){var o=r[e];i[e]=[o,t[o]]}return i}function Ge(t,r,n){var i={};if("function"!=typeof r)for(var o=-1,s=Z(arguments,!0,!1,1),a=ke(t)?s.length:0;++o<a;){var h=s[o];h in t&&(i[h]=t[h])}else r=e.createCallback(r,n,3),ai(t,function(t,e,n){r(t,e,n)&&(i[e]=t)});return i}function We(t,r,n,i){var o=Qn(t);if(null==n)if(o)n=[];else{var s=t&&t.constructor,a=s&&s.prototype;n=y(a)}return r&&(r=e.createCallback(r,i,4),(o?Je:hi)(t,function(t,e,i){return r(n,t,e,i)})),n}function ze(t){for(var e=-1,r=ti(t),n=r.length,i=pn(n);++e<n;)i[e]=t[r[e]];return i}function qe(t){for(var e=arguments,r=-1,n=Z(e,!0,!1,1),i=e[2]&&e[2][e[1]]===t?1:n.length,o=pn(i);++r<i;)o[r]=t[n[r]];return o}function Ye(t,e,r){var n=-1,i=he(),o=t?t.length:0,s=!1;return r=(0>r?Yn(0,o+r):r)||0,Qn(t)?s=i(t,e,r)>-1:"number"==typeof o?s=(Oe(t)?t.indexOf(e,r):i(t,e,r))>-1:hi(t,function(t){return++n>=r?!(s=t===e):void 0}),s}function Ve(t,r,n){var i=!0;r=e.createCallback(r,n,3);var o=-1,s=t?t.length:0;if("number"==typeof s)for(;++o<s&&(i=!!r(t[o],o,t)););else hi(t,function(t,e,n){return i=!!r(t,e,n)});return i}function He(t,r,n){var i=[];r=e.createCallback(r,n,3);var o=-1,s=t?t.length:0;if("number"==typeof s)for(;++o<s;){var a=t[o];r(a,o,t)&&i.push(a)}else hi(t,function(t,e,n){r(t,e,n)&&i.push(t)});return i}function Xe(t,r,n){r=e.createCallback(r,n,3);var i=-1,o=t?t.length:0;if("number"!=typeof o){var s;return hi(t,function(t,e,n){return r(t,e,n)?(s=t,!1):void 0}),s}for(;++i<o;){var a=t[i];if(r(a,i,t))return a}}function Ke(t,r,n){var i;return r=e.createCallback(r,n,3),$e(t,function(t,e,n){return r(t,e,n)?(i=t,!1):void 0}),i}function Je(t,e,r){var n=-1,i=t?t.length:0;if(e=e&&"undefined"==typeof r?e:_(e,r,3),"number"==typeof i)for(;++n<i&&e(t[n],n,t)!==!1;);else hi(t,e);return t}function $e(t,e,r){var n=t?t.length:0;if(e=e&&"undefined"==typeof r?e:_(e,r,3),"number"==typeof n)for(;n--&&e(t[n],n,t)!==!1;);else{var i=ti(t);n=i.length,hi(t,function(t,r,o){return r=i?i[--n]:--n,e(o[r],r,o)})}return t}function Qe(t,e){var r=p(arguments,2),n=-1,i="function"==typeof e,o=t?t.length:0,s=pn("number"==typeof o?o:0);return Je(t,function(t){s[++n]=(i?e:t[e]).apply(t,r)}),s}function Ze(t,r,n){var i=-1,o=t?t.length:0;if(r=e.createCallback(r,n,3),"number"==typeof o)for(var s=pn(o);++i<o;)s[i]=r(t[i],i,t);else s=[],hi(t,function(t,e,n){s[++i]=r(t,e,n)});return s}function tr(t,r,n){var i=-1/0,o=i;if("function"!=typeof r&&n&&n[r]===t&&(r=null),null==r&&Qn(t))for(var a=-1,h=t.length;++a<h;){var c=t[a];c>o&&(o=c)}else r=null==r&&Oe(t)?s:e.createCallback(r,n,3),Je(t,function(t,e,n){var s=r(t,e,n);s>i&&(i=s,o=t)});return o}function er(t,r,n){var i=1/0,o=i;if("function"!=typeof r&&n&&n[r]===t&&(r=null),null==r&&Qn(t))for(var a=-1,h=t.length;++a<h;){var c=t[a];o>c&&(o=c)}else r=null==r&&Oe(t)?s:e.createCallback(r,n,3),Je(t,function(t,e,n){var s=r(t,e,n);i>s&&(i=s,o=t)});return o}function rr(t,r,n,i){if(!t)return n;var o=arguments.length<3;r=e.createCallback(r,i,4);var s=-1,a=t.length;if("number"==typeof a)for(o&&(n=t[++s]);++s<a;)n=r(n,t[s],s,t);else hi(t,function(t,e,i){n=o?(o=!1,t):r(n,t,e,i)});return n}function nr(t,r,n,i){var o=arguments.length<3;return r=e.createCallback(r,i,4),$e(t,function(t,e,i){n=o?(o=!1,t):r(n,t,e,i)}),n}function ir(t,r,n){return r=e.createCallback(r,n,3),He(t,function(t,e,n){return!r(t,e,n)})}function or(t,e,r){if(t&&"number"!=typeof t.length&&(t=ze(t)),null==e||r)return t?t[ne(0,t.length-1)]:b;var n=sr(t);return n.length=Vn(Yn(0,e),n.length),n}function sr(t){var e=-1,r=t?t.length:0,n=pn("number"==typeof r?r:0);return Je(t,function(t){var r=ne(0,++e);n[e]=n[r],n[r]=t}),n}function ar(t){var e=t?t.length:0;return"number"==typeof e?e:ti(t).length}function hr(t,r,n){var i;r=e.createCallback(r,n,3);var o=-1,s=t?t.length:0;if("number"==typeof s)for(;++o<s&&!(i=r(t[o],o,t)););else hi(t,function(t,e,n){return!(i=r(t,e,n))});return!!i}function cr(t,r,n){var i=-1,o=Qn(r),s=t?t.length:0,h=pn("number"==typeof s?s:0);for(o||(r=e.createCallback(r,n,3)),Je(t,function(t,e,n){var s=h[++i]=f();o?s.criteria=Ze(r,function(e){return t[e]}):(s.criteria=u())[0]=r(t,e,n),s.index=i,s.value=t}),s=h.length,h.sort(a);s--;){var c=h[s];h[s]=c.value,o||d(c.criteria),l(c)}return h}function ur(t){return t&&"number"==typeof t.length?p(t):ze(t)}function fr(t){for(var e=-1,r=t?t.length:0,n=[];++e<r;){var i=t[e];i&&n.push(i)}return n}function dr(t){return Q(t,Z(arguments,!0,!0,1))}function lr(t,r,n){var i=-1,o=t?t.length:0;for(r=e.createCallback(r,n,3);++i<o;)if(r(t[i],i,t))return i;return-1}function pr(t,r,n){var i=t?t.length:0;for(r=e.createCallback(r,n,3);i--;)if(r(t[i],i,t))return i;return-1}function vr(t,r,n){var i=0,o=t?t.length:0;if("number"!=typeof r&&null!=r){var s=-1;for(r=e.createCallback(r,n,3);++s<o&&r(t[s],s,t);)i++}else if(i=r,null==i||n)return t?t[0]:b;return p(t,0,Vn(Yn(0,i),o))}function br(t,e,r,n){return"boolean"!=typeof e&&null!=e&&(n=r,r="function"!=typeof e&&n&&n[e]===t?null:e,e=!1),null!=r&&(t=Ze(t,r,n)),Z(t,e)}function gr(t,e,r){if("number"==typeof r){var i=t?t.length:0;r=0>r?Yn(0,i+r):r||0}else if(r){var o=Er(t,e);return t[o]===e?o:-1}return n(t,e,r)}function yr(t,r,n){var i=0,o=t?t.length:0;if("number"!=typeof r&&null!=r){var s=o;for(r=e.createCallback(r,n,3);s--&&r(t[s],s,t);)i++}else i=null==r||n?1:r||i;return p(t,0,Vn(Yn(0,o-i),o))}function mr(){for(var t=[],e=-1,r=arguments.length,o=u(),s=he(),a=s===n,c=u();++e<r;){var f=arguments[e];(Qn(f)||de(f))&&(t.push(f),o.push(a&&f.length>=x&&h(e?t[e]:c)))}var p=t[0],v=-1,b=p?p.length:0,g=[];t:for(;++v<b;){var y=o[0];if(f=p[v],(y?i(y,f):s(c,f))<0){for(e=r,(y||c).push(f);--e;)if(y=o[e],(y?i(y,f):s(t[e],f))<0)continue t;g.push(f)}}for(;r--;)y=o[r],y&&l(y);return d(o),d(c),g}function wr(t,r,n){var i=0,o=t?t.length:0;if("number"!=typeof r&&null!=r){var s=o;for(r=e.createCallback(r,n,3);s--&&r(t[s],s,t);)i++}else if(i=r,null==i||n)return t?t[o-1]:b;return p(t,Yn(0,o-i))}function xr(t,e,r){var n=t?t.length:0;for("number"==typeof r&&(n=(0>r?Yn(0,n+r):Vn(r,n-1))+1);n--;)if(t[n]===e)return n;return-1}function _r(t){for(var e=arguments,r=0,n=e.length,i=t?t.length:0;++r<n;)for(var o=-1,s=e[r];++o<i;)t[o]===s&&(jn.call(t,o--,1),i--);return t}function Sr(t,e,r){t=+t||0,r="number"==typeof r?r:+r||1,null==e&&(e=t,t=0);for(var n=-1,i=Yn(0,Rn((e-t)/(r||1))),o=pn(i);++n<i;)o[n]=t,t+=r;return o}function Tr(t,r,n){var i=-1,o=t?t.length:0,s=[];for(r=e.createCallback(r,n,3);++i<o;){var a=t[i];r(a,i,t)&&(s.push(a),jn.call(t,i--,1),o--)}return s}function Ar(t,r,n){if("number"!=typeof r&&null!=r){var i=0,o=-1,s=t?t.length:0;for(r=e.createCallback(r,n,3);++o<s&&r(t[o],o,t);)i++}else i=null==r||n?1:Yn(0,r);return p(t,i)}function Er(t,r,n,i){var o=0,s=t?t.length:o;for(n=n?e.createCallback(n,i,1):$r,r=n(r);s>o;){var a=o+s>>>1;n(t[a])<r?o=a+1:s=a}return o}function Cr(){return ie(Z(arguments,!0,!0))}function Mr(t,r,n,i){return"boolean"!=typeof r&&null!=r&&(i=n,n="function"!=typeof r&&i&&i[r]===t?null:r,r=!1),null!=n&&(n=e.createCallback(n,i,3)),ie(t,r,n)}function Rr(t){return Q(t,p(arguments,1))}function kr(){for(var t=-1,e=arguments.length;++t<e;){var r=arguments[t];if(Qn(r)||de(r))var n=n?ie(Q(n,r).concat(Q(r,n))):r}return n||[]}function Br(){for(var t=arguments.length>1?arguments:arguments[0],e=-1,r=t?tr(li(t,"length")):0,n=pn(0>r?0:r);++e<r;)n[e]=li(t,e);return n}function Ir(t,e){var r=-1,n=t?t.length:0,i={};for(e||!n||Qn(t[0])||(e=[]);++r<n;){var o=t[r];e?i[o]=e[r]:o&&(i[o[0]]=o[1])}return i}function Pr(t,e){if(!Re(e))throw new Sn;return function(){return--t<1?e.apply(this,arguments):void 0}}function Lr(t,e){return arguments.length>2?se(t,17,p(arguments,2),null,e):se(t,1,null,null,e)}function Or(t){for(var e=arguments.length>1?Z(arguments,!0,!1,1):we(t),r=-1,n=e.length;++r<n;){var i=e[r];t[i]=se(t[i],1,null,null,t)}return t}function Dr(t,e){return arguments.length>2?se(e,19,p(arguments,2),null,t):se(e,3,null,null,t)}function jr(){for(var t=arguments,e=t.length;e--;)if(!Re(t[e]))throw new Sn;return function(){for(var e=arguments,r=t.length;r--;)e=[t[r].apply(this,e)];return e[0]}}function Fr(t,e){return e="number"==typeof e?e:+e||t.length,se(t,4,null,null,null,e)}function Ur(t,e,r){var n,i,o,s,a,h,c,u=0,f=!1,d=!0;if(!Re(t))throw new Sn;if(e=Yn(0,e)||0,r===!0){var l=!0;d=!1}else ke(r)&&(l=r.leading,f="maxWait"in r&&(Yn(e,r.maxWait)||0),d="trailing"in r?r.trailing:d);var p=function(){var r=e-(vi()-s);if(0>=r){i&&kn(i);var f=c;i=h=c=b,f&&(u=vi(),o=t.apply(a,n),h||i||(n=a=null))}else h=Dn(p,r)},v=function(){h&&kn(h),i=h=c=b,(d||f!==e)&&(u=vi(),o=t.apply(a,n),h||i||(n=a=null))};return function(){if(n=arguments,s=vi(),a=this,c=d&&(h||!l),f===!1)var r=l&&!h;else{i||l||(u=s);var b=f-(s-u),g=0>=b;g?(i&&(i=kn(i)),u=s,o=t.apply(a,n)):i||(i=Dn(v,b))}return g&&h?h=kn(h):h||e===f||(h=Dn(p,e)),r&&(g=!0,o=t.apply(a,n)),!g||h||i||(n=a=null),o}}function Nr(t){if(!Re(t))throw new Sn;var e=p(arguments,1);return Dn(function(){t.apply(b,e)},1)}function Gr(t,e){if(!Re(t))throw new Sn;var r=p(arguments,2);return Dn(function(){t.apply(b,r)},e)}function Wr(t,e){if(!Re(t))throw new Sn;var r=function(){var n=r.cache,i=e?e.apply(this,arguments):w+arguments[0];return Ln.call(n,i)?n[i]:n[i]=t.apply(this,arguments)};return r.cache={},r}function zr(t){var e,r;if(!Re(t))throw new Sn;return function(){return e?r:(e=!0,r=t.apply(this,arguments),t=null,r)}}function qr(t){return se(t,16,p(arguments,1))}function Yr(t){return se(t,32,null,p(arguments,1))}function Vr(t,e,r){var n=!0,i=!0;if(!Re(t))throw new Sn;return r===!1?n=!1:ke(r)&&(n="leading"in r?r.leading:n,i="trailing"in r?r.trailing:i),H.leading=n,H.maxWait=e,H.trailing=i,Ur(t,e,H)}function Hr(t,e){return se(e,16,[t])}function Xr(t){return function(){return t}}function Kr(t,e,r){var n=typeof t;if(null==t||"function"==n)return _(t,e,r);if("object"!=n)return en(t);var i=ti(t),o=i[0],s=t[o];return 1!=i.length||s!==s||ke(s)?function(e){for(var r=i.length,n=!1;r--&&(n=te(e[i[r]],t[i[r]],null,!0)););return n}:function(t){var e=t[o];return s===e&&(0!==s||1/s==1/e)}}function Jr(t){return null==t?"":_n(t).replace(ii,ae)}function $r(t){return t}function Qr(t,n,i){var o=!0,s=n&&we(n);n&&(i||s.length)||(null==i&&(i=n),a=r,n=t,t=e,s=we(n)),i===!1?o=!1:ke(i)&&"chain"in i&&(o=i.chain);var a=t,h=Re(a);Je(s,function(e){var r=t[e]=n[e];h&&(a.prototype[e]=function(){var e=this.__chain__,n=this.__wrapped__,i=[n];On.apply(i,arguments);var s=r.apply(t,i);if(o||e){if(n===s&&ke(s))return this;s=new a(s),s.__chain__=e}return s})})}function Zr(){return t._=En,this}function tn(){}function en(t){return function(e){return e[t]}}function rn(t,e,r){var n=null==t,i=null==e;if(null==r&&("boolean"==typeof t&&i?(r=t,t=1):i||"boolean"!=typeof e||(r=e,i=!0)),n&&i&&(e=1),t=+t||0,i?(e=t,t=0):e=+e||0,r||t%1||e%1){var o=Xn();return Vn(t+o*(e-t+parseFloat("1e-"+((o+"").length-1))),e)}return ne(t,e)}function nn(t,e){if(t){var r=t[e];return Re(r)?t[e]():r}}function on(t,r,n){var i=e.templateSettings;t=_n(t||""),n=si({},n,i);var o,s=si({},n.imports,i.imports),a=ti(s),h=ze(s),u=0,f=n.interpolate||I,d="__p += '",l=xn((n.escape||I).source+"|"+f.source+"|"+(f===k?C:I).source+"|"+(n.evaluate||I).source+"|$","g");t.replace(l,function(e,r,n,i,s,a){return n||(n=i),d+=t.slice(u,a).replace(L,c),r&&(d+="' +\n__e("+r+") +\n'"),s&&(o=!0,d+="';\n"+s+";\n__p += '"),n&&(d+="' +\n((__t = ("+n+")) == null ? '' : __t) +\n'"),u=a+e.length,e}),d+="';\n";var p=n.variable,v=p;v||(p="obj",d="with ("+p+") {\n"+d+"\n}\n"),d=(o?d.replace(T,""):d).replace(A,"$1").replace(E,"$1;"),d="function("+p+") {\n"+(v?"":p+" || ("+p+" = {});\n")+"var __t, __p = '', __e = _.escape"+(o?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+d+"return __p\n}";var g="\n/*\n//# sourceURL="+(n.sourceURL||"/lodash/template/source["+D++ +"]")+"\n*/";try{var y=gn(a,"return "+d+g).apply(b,h)}catch(t){throw t.source=d,t}return r?y(r):(y.source=d,y)}function sn(t,e,r){t=(t=+t)>-1?t:0;var n=-1,i=pn(t);for(e=_(e,r,1);++n<t;)i[n]=e(n);return i}function an(t){return null==t?"":_n(t).replace(ni,fe)}function hn(t){var e=++m;return _n(null==t?"":t)+e}function cn(t){return t=new r(t),t.__chain__=!0,t}function un(t,e){return e(t),t}function fn(){return this.__chain__=!0,this}function dn(){return _n(this.__wrapped__)}function ln(){return this.__wrapped__}t=t?re.defaults($.Object(),t,re.pick($,O)):$;var pn=t.Array,vn=t.Boolean,bn=t.Date,gn=t.Function,yn=t.Math,mn=t.Number,wn=t.Object,xn=t.RegExp,_n=t.String,Sn=t.TypeError,Tn=[],An=wn.prototype,En=t._,Cn=An.toString,Mn=xn("^"+_n(Cn).replace(/[.*+?^${}()|[\]\\]/g,"\\$&").replace(/toString| for [^\]]+/g,".*?")+"$"),Rn=yn.ceil,kn=t.clearTimeout,Bn=yn.floor,In=gn.prototype.toString,Pn=ce(Pn=wn.getPrototypeOf)&&Pn,Ln=An.hasOwnProperty,On=Tn.push,Dn=t.setTimeout,jn=Tn.splice,Fn=Tn.unshift,Un=function(){try{var t={},e=ce(e=wn.defineProperty)&&e,r=e(t,t,t)&&e}catch(t){}return r}(),Nn=ce(Nn=wn.create)&&Nn,Gn=ce(Gn=pn.isArray)&&Gn,Wn=t.isFinite,zn=t.isNaN,qn=ce(qn=wn.keys)&&qn,Yn=yn.max,Vn=yn.min,Hn=t.parseInt,Xn=yn.random,Kn={};Kn[F]=pn,Kn[U]=vn,Kn[N]=bn,Kn[G]=gn,Kn[z]=wn,Kn[W]=mn,Kn[q]=xn,Kn[Y]=_n,r.prototype=e.prototype;var Jn=e.support={};Jn.funcDecomp=!ce(t.WinRTError)&&P.test(v),Jn.funcNames="string"==typeof gn.name,e.templateSettings={escape:/<%-([\s\S]+?)%>/g,evaluate:/<%([\s\S]+?)%>/g,interpolate:k,variable:"",imports:{_:e}},Nn||(y=function(){function e(){}return function(r){if(ke(r)){e.prototype=r;var n=new e;e.prototype=null}return n||t.Object()}}());var $n=Un?function(t,e){X.value=e,Un(t,"__bindData__",X)}:tn,Qn=Gn||function(t){return t&&"object"==typeof t&&"number"==typeof t.length&&Cn.call(t)==F||!1},Zn=function(t){var e,r=t,n=[];if(!r)return n;if(!K[typeof t])return n;for(e in r)Ln.call(r,e)&&n.push(e);return n},ti=qn?function(t){return ke(t)?qn(t):[]}:Zn,ei={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},ri=_e(ei),ni=xn("("+ti(ri).join("|")+")","g"),ii=xn("["+ti(ei).join("")+"]","g"),oi=function(t,e,r){var n,i=t,o=i;if(!i)return o;var s=arguments,a=0,h="number"==typeof r?2:s.length;if(h>3&&"function"==typeof s[h-2])var c=_(s[--h-1],s[h--],2);else h>2&&"function"==typeof s[h-1]&&(c=s[--h]);for(;++a<h;)if(i=s[a],i&&K[typeof i])for(var u=-1,f=K[typeof i]&&ti(i),d=f?f.length:0;++u<d;)n=f[u],o[n]=c?c(o[n],i[n]):i[n];return o},si=function(t,e,r){var n,i=t,o=i;if(!i)return o;for(var s=arguments,a=0,h="number"==typeof r?2:s.length;++a<h;)if(i=s[a],i&&K[typeof i])for(var c=-1,u=K[typeof i]&&ti(i),f=u?u.length:0;++c<f;)n=u[c],"undefined"==typeof o[n]&&(o[n]=i[n]);return o},ai=function(t,e,r){var n,i=t,o=i;if(!i)return o;if(!K[typeof i])return o;e=e&&"undefined"==typeof r?e:_(e,r,3);for(n in i)if(e(i[n],n,t)===!1)return o;return o},hi=function(t,e,r){var n,i=t,o=i;if(!i)return o;if(!K[typeof i])return o;e=e&&"undefined"==typeof r?e:_(e,r,3);for(var s=-1,a=K[typeof i]&&ti(i),h=a?a.length:0;++s<h;)if(n=a[s],e(i[n],n,t)===!1)return o;return o},ci=Pn?function(t){if(!t||Cn.call(t)!=z)return!1;var e=t.valueOf,r=ce(e)&&(r=Pn(e))&&Pn(r);return r?t==r||Pn(t)==r:ue(t)}:ue,ui=oe(function(t,e,r){Ln.call(t,r)?t[r]++:t[r]=1}),fi=oe(function(t,e,r){(Ln.call(t,r)?t[r]:t[r]=[]).push(e)}),di=oe(function(t,e,r){t[r]=e}),li=Ze,pi=He,vi=ce(vi=bn.now)&&vi||function(){return(new bn).getTime()},bi=8==Hn(S+"08")?Hn:function(t,e){return Hn(Oe(t)?t.replace(B,""):t,e||0)};return e.after=Pr,e.assign=oi,e.at=qe,e.bind=Lr,e.bindAll=Or,e.bindKey=Dr,e.chain=cn,e.compact=fr,e.compose=jr,e.constant=Xr,e.countBy=ui,e.create=ve,e.createCallback=Kr,e.curry=Fr,e.debounce=Ur,e.defaults=si,e.defer=Nr,e.delay=Gr,e.difference=dr,e.filter=He,e.flatten=br,e.forEach=Je,e.forEachRight=$e,e.forIn=ai,e.forInRight=ye,e.forOwn=hi,e.forOwnRight=me,e.functions=we,e.groupBy=fi,e.indexBy=di,e.initial=yr,e.intersection=mr,e.invert=_e,e.invoke=Qe,e.keys=ti,e.map=Ze,e.mapValues=je,e.max=tr,e.memoize=Wr,e.merge=Fe,e.min=er,e.omit=Ue,e.once=zr,e.pairs=Ne,e.partial=qr,e.partialRight=Yr,e.pick=Ge,e.pluck=li,e.property=en,e.pull=_r,e.range=Sr,e.reject=ir,e.remove=Tr,e.rest=Ar,e.shuffle=sr,e.sortBy=cr,e.tap=un,e.throttle=Vr,e.times=sn,e.toArray=ur,e.transform=We,e.union=Cr,e.uniq=Mr,e.values=ze,e.where=pi,e.without=Rr,e.wrap=Hr,e.xor=kr,e.zip=Br,e.zipObject=Ir,e.collect=Ze,e.drop=Ar,e.each=Je,e.eachRight=$e,e.extend=oi,e.methods=we,e.object=Ir,e.select=He,e.tail=Ar,e.unique=Mr,e.unzip=Br,Qr(e),e.clone=le,e.cloneDeep=pe,e.contains=Ye,e.escape=Jr,e.every=Ve,e.find=Xe,e.findIndex=lr,e.findKey=be,e.findLast=Ke,e.findLastIndex=pr,e.findLastKey=ge,e.has=xe,e.identity=$r,e.indexOf=gr,e.isArguments=de,e.isArray=Qn,e.isBoolean=Se,e.isDate=Te,e.isElement=Ae,e.isEmpty=Ee,e.isEqual=Ce,e.isFinite=Me,e.isFunction=Re,e.isNaN=Be,e.isNull=Ie,e.isNumber=Pe,e.isObject=ke,e.isPlainObject=ci,e.isRegExp=Le,e.isString=Oe,e.isUndefined=De,e.lastIndexOf=xr,e.mixin=Qr,e.noConflict=Zr,e.noop=tn,e.now=vi,e.parseInt=bi,e.random=rn,e.reduce=rr,e.reduceRight=nr,e.result=nn,e.runInContext=v,e.size=ar,e.some=hr,e.sortedIndex=Er,e.template=on,e.unescape=an,e.uniqueId=hn,e.all=Ve,e.any=hr,e.detect=Xe,e.findWhere=Xe,e.foldl=rr,e.foldr=nr,e.include=Ye,e.inject=rr,Qr(function(){var t={};return hi(e,function(r,n){e.prototype[n]||(t[n]=r)}),t}(),!1),e.first=vr,e.last=wr,e.sample=or,e.take=vr,e.head=vr,hi(e,function(t,n){var i="sample"!==n;e.prototype[n]||(e.prototype[n]=function(e,n){var o=this.__chain__,s=t(this.__wrapped__,e,n);return o||null!=e&&(!n||i&&"function"==typeof e)?new r(s,o):s})}),e.VERSION="2.4.1",e.prototype.chain=fn,e.prototype.toString=dn,e.prototype.value=ln,e.prototype.valueOf=ln,Je(["join","pop","shift"],function(t){var n=Tn[t];e.prototype[t]=function(){var t=this.__chain__,e=n.apply(this.__wrapped__,arguments);return t?new r(e,t):e}}),Je(["push","reverse","sort","unshift"],function(t){var r=Tn[t];e.prototype[t]=function(){return r.apply(this.__wrapped__,arguments),this}}),Je(["concat","slice","splice"],function(t){var n=Tn[t];e.prototype[t]=function(){return new r(n.apply(this.__wrapped__,arguments),this.__chain__)}}),e}var b,g=[],y=[],m=0,w=+new Date+"",x=75,_=40,S=" 	\f\n\r\u2028\u2029",T=/\b__p \+= '';/g,A=/\b(__p \+=) '' \+/g,E=/(__e\(.*?\)|\b__t\)) \+\n'';/g,C=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,M=/\w*$/,R=/^\s*function[ \n\r\t]+\w/,k=/<%=([\s\S]+?)%>/g,B=RegExp("^["+S+"]*0+(?=.$)"),I=/($^)/,P=/\bthis\b/,L=/['\n\r\t\u2028\u2029\\]/g,O=["Array","Boolean","Date","Function","Math","Number","Object","RegExp","String","_","attachEvent","clearTimeout","isFinite","isNaN","parseInt","setTimeout"],D=0,j="[object Arguments]",F="[object Array]",U="[object Boolean]",N="[object Date]",G="[object Function]",W="[object Number]",z="[object Object]",q="[object RegExp]",Y="[object String]",V={};V[G]=!1,V[j]=V[F]=V[U]=V[N]=V[W]=V[z]=V[q]=V[Y]=!0;var H={leading:!1,maxWait:0,trailing:!1},X={configurable:!1,enumerable:!1,value:null,writable:!1},K={boolean:!1,function:!0,object:!0,number:!1,string:!1,undefined:!1},J={"\\":"\\","'":"'","\n":"n","\r":"r","	":"t","\u2028":"u2028","\u2029":"u2029"},$=K[typeof window]&&window||this,Q=K[typeof r]&&r&&!r.nodeType&&r,Z=K[typeof e]&&e&&!e.nodeType&&e,te=Z&&Z.exports===Q&&Q,ee=K[typeof t]&&t;!ee||ee.global!==ee&&ee.window!==ee||($=ee);var re=v();"function"==typeof define&&"object"==typeof define.amd&&define.amd?($._=re,define(function(){return re})):Q&&Z?te?(Z.exports=re)._=re:Q._=re:$._=re}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],230:[function(t,e){(function(t){(function(){var r,n,i;"undefined"!=typeof performance&&null!==performance&&performance.now?e.exports=function(){return performance.now()}:"undefined"!=typeof t&&null!==t&&t.hrtime?(e.exports=function(){return(r()-i)/1e6},n=t.hrtime,r=function(){var t;return t=n(),1e9*t[0]+t[1]},i=r()):Date.now?(e.exports=function(){return Date.now()-i},i=Date.now()):(e.exports=function(){return(new Date).getTime()-i},i=(new Date).getTime())}).call(this)}).call(this,t(208))},{}],231:[function(t,e,r){(function(){var t=this,n=n||{};n.WEBGL_RENDERER=0,n.CANVAS_RENDERER=1,n.VERSION="v2.2.3",n.blendModes={NORMAL:0,ADD:1,MULTIPLY:2,SCREEN:3,OVERLAY:4,DARKEN:5,LIGHTEN:6,COLOR_DODGE:7,COLOR_BURN:8,HARD_LIGHT:9,SOFT_LIGHT:10,DIFFERENCE:11,EXCLUSION:12,HUE:13,SATURATION:14,COLOR:15,LUMINOSITY:16},n.scaleModes={DEFAULT:0,LINEAR:0,NEAREST:1},n._UID=0,"undefined"!=typeof Float32Array?(n.Float32Array=Float32Array,n.Uint16Array=Uint16Array,n.Uint32Array=Uint32Array,n.ArrayBuffer=ArrayBuffer):(n.Float32Array=Array,n.Uint16Array=Array),n.INTERACTION_FREQUENCY=30,n.AUTO_PREVENT_DEFAULT=!0,n.PI_2=2*Math.PI,n.RAD_TO_DEG=180/Math.PI,n.DEG_TO_RAD=Math.PI/180,n.RETINA_PREFIX="@2x",n.dontSayHello=!1,n.defaultRenderOptions={view:null,transparent:!1,antialias:!1,preserveDrawingBuffer:!1,resolution:1,clearBeforeRender:!0,autoResize:!1},n.sayHello=function(t){if(!n.dontSayHello){if(navigator.userAgent.toLowerCase().indexOf("chrome")>-1){var e=["%c %c %c Pixi.js "+n.VERSION+" - "+t+"  %c  %c  http://www.pixijs.com/  %c %c %c%c ","background: #ff66a5","background: #ff66a5","color: #ff66a5; background: #030307;","background: #ff66a5","background: #ffc3dc","background: #ff66a5","color: #ff2424; background: #fff","color: #ff2424; background: #fff","color: #ff2424; background: #fff"];console.log.apply(console,e)}else window.console&&console.log("Pixi.js "+n.VERSION+" - http://www.pixijs.com/");n.dontSayHello=!0}},n.Point=function(t,e){this.x=t||0,this.y=e||0},n.Point.prototype.clone=function(){return new n.Point(this.x,this.y)},n.Point.prototype.set=function(t,e){this.x=t||0,this.y=e||(0!==e?this.x:0)},n.Point.prototype.constructor=n.Point,n.Rectangle=function(t,e,r,n){this.x=t||0,this.y=e||0,this.width=r||0,this.height=n||0},n.Rectangle.prototype.clone=function(){return new n.Rectangle(this.x,this.y,this.width,this.height)},n.Rectangle.prototype.contains=function(t,e){if(this.width<=0||this.height<=0)return!1;var r=this.x;if(t>=r&&t<=r+this.width){var n=this.y;if(e>=n&&e<=n+this.height)return!0}return!1},n.Rectangle.prototype.constructor=n.Rectangle,n.EmptyRectangle=new n.Rectangle(0,0,0,0),n.Polygon=function(t){if(t instanceof Array||(t=Array.prototype.slice.call(arguments)),t[0]instanceof n.Point){for(var e=[],r=0,i=t.length;i>r;r++)e.push(t[r].x,t[r].y);t=e}this.closed=!0,this.points=t},n.Polygon.prototype.clone=function(){var t=this.points.slice();return new n.Polygon(t)},n.Polygon.prototype.contains=function(t,e){for(var r=!1,n=this.points.length/2,i=0,o=n-1;n>i;o=i++){var s=this.points[2*i],a=this.points[2*i+1],h=this.points[2*o],c=this.points[2*o+1],u=a>e!=c>e&&(h-s)*(e-a)/(c-a)+s>t;u&&(r=!r)}return r},n.Polygon.prototype.constructor=n.Polygon,n.Circle=function(t,e,r){this.x=t||0,this.y=e||0,this.radius=r||0},n.Circle.prototype.clone=function(){return new n.Circle(this.x,this.y,this.radius)},n.Circle.prototype.contains=function(t,e){if(this.radius<=0)return!1;var r=this.x-t,n=this.y-e,i=this.radius*this.radius;return r*=r,n*=n,i>=r+n},n.Circle.prototype.getBounds=function(){return new n.Rectangle(this.x-this.radius,this.y-this.radius,2*this.radius,2*this.radius)},n.Circle.prototype.constructor=n.Circle,n.Ellipse=function(t,e,r,n){this.x=t||0,this.y=e||0,this.width=r||0,this.height=n||0},n.Ellipse.prototype.clone=function(){return new n.Ellipse(this.x,this.y,this.width,this.height)},n.Ellipse.prototype.contains=function(t,e){if(this.width<=0||this.height<=0)return!1;var r=(t-this.x)/this.width,n=(e-this.y)/this.height;return r*=r,n*=n,1>=r+n},n.Ellipse.prototype.getBounds=function(){return new n.Rectangle(this.x-this.width,this.y-this.height,this.width,this.height)},n.Ellipse.prototype.constructor=n.Ellipse,n.RoundedRectangle=function(t,e,r,n,i){this.x=t||0,this.y=e||0,this.width=r||0,this.height=n||0,this.radius=i||20},n.RoundedRectangle.prototype.clone=function(){return new n.RoundedRectangle(this.x,this.y,this.width,this.height,this.radius)},n.RoundedRectangle.prototype.contains=function(t,e){if(this.width<=0||this.height<=0)return!1;var r=this.x;if(t>=r&&t<=r+this.width){var n=this.y;if(e>=n&&e<=n+this.height)return!0}return!1},n.RoundedRectangle.prototype.constructor=n.RoundedRectangle,n.Matrix=function(){this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0},n.Matrix.prototype.fromArray=function(t){this.a=t[0],this.b=t[1],this.c=t[3],this.d=t[4],this.tx=t[2],this.ty=t[5]},n.Matrix.prototype.toArray=function(t){this.array||(this.array=new n.Float32Array(9));var e=this.array;return t?(e[0]=this.a,e[1]=this.b,e[2]=0,e[3]=this.c,e[4]=this.d,e[5]=0,e[6]=this.tx,e[7]=this.ty,e[8]=1):(e[0]=this.a,e[1]=this.c,e[2]=this.tx,e[3]=this.b,e[4]=this.d,e[5]=this.ty,e[6]=0,e[7]=0,e[8]=1),e},n.Matrix.prototype.apply=function(t,e){return e=e||new n.Point,e.x=this.a*t.x+this.c*t.y+this.tx,e.y=this.b*t.x+this.d*t.y+this.ty,e},n.Matrix.prototype.applyInverse=function(t,e){e=e||new n.Point;var r=1/(this.a*this.d+this.c*-this.b);return e.x=this.d*r*t.x+-this.c*r*t.y+(this.ty*this.c-this.tx*this.d)*r,e.y=this.a*r*t.y+-this.b*r*t.x+(-this.ty*this.a+this.tx*this.b)*r,e},n.Matrix.prototype.translate=function(t,e){return this.tx+=t,this.ty+=e,this},n.Matrix.prototype.scale=function(t,e){return this.a*=t,this.d*=e,this.c*=t,this.b*=e,this.tx*=t,this.ty*=e,this},n.Matrix.prototype.rotate=function(t){var e=Math.cos(t),r=Math.sin(t),n=this.a,i=this.c,o=this.tx;return this.a=n*e-this.b*r,this.b=n*r+this.b*e,this.c=i*e-this.d*r,this.d=i*r+this.d*e,this.tx=o*e-this.ty*r,this.ty=o*r+this.ty*e,this},n.Matrix.prototype.append=function(t){var e=this.a,r=this.b,n=this.c,i=this.d;return this.a=t.a*e+t.b*n,this.b=t.a*r+t.b*i,this.c=t.c*e+t.d*n,this.d=t.c*r+t.d*i,this.tx=t.tx*e+t.ty*n+this.tx,this.ty=t.tx*r+t.ty*i+this.ty,this},n.Matrix.prototype.identity=function(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this},n.identityMatrix=new n.Matrix,n.DisplayObject=function(){this.position=new n.Point,this.scale=new n.Point(1,1),this.pivot=new n.Point(0,0),this.rotation=0,this.alpha=1,this.visible=!0,this.hitArea=null,this.buttonMode=!1,this.renderable=!1,this.parent=null,this.stage=null,this.worldAlpha=1,this._interactive=!1,this.defaultCursor="pointer",this.worldTransform=new n.Matrix,this._sr=0,this._cr=1,this.filterArea=null,this._bounds=new n.Rectangle(0,0,1,1),this._currentBounds=null,this._mask=null,this._cacheAsBitmap=!1,this._cacheIsDirty=!1},n.DisplayObject.prototype.constructor=n.DisplayObject,Object.defineProperty(n.DisplayObject.prototype,"interactive",{get:function(){return this._interactive},set:function(t){this._interactive=t,this.stage&&(this.stage.dirty=!0)}}),Object.defineProperty(n.DisplayObject.prototype,"worldVisible",{get:function(){var t=this;do{if(!t.visible)return!1;t=t.parent}while(t);return!0}}),Object.defineProperty(n.DisplayObject.prototype,"mask",{get:function(){return this._mask},set:function(t){this._mask&&(this._mask.isMask=!1),this._mask=t,this._mask&&(this._mask.isMask=!0)}}),Object.defineProperty(n.DisplayObject.prototype,"filters",{get:function(){return this._filters},set:function(t){if(t){for(var e=[],r=0;r<t.length;r++)for(var n=t[r].passes,i=0;i<n.length;i++)e.push(n[i]);this._filterBlock={target:this,filterPasses:e}}this._filters=t}}),Object.defineProperty(n.DisplayObject.prototype,"cacheAsBitmap",{get:function(){return this._cacheAsBitmap},set:function(t){this._cacheAsBitmap!==t&&(t?this._generateCachedSprite():this._destroyCachedSprite(),this._cacheAsBitmap=t)}}),n.DisplayObject.prototype.updateTransform=function(){var t,e,r,i,o,s,a=this.parent.worldTransform,h=this.worldTransform;this.rotation%n.PI_2?(this.rotation!==this.rotationCache&&(this.rotationCache=this.rotation,this._sr=Math.sin(this.rotation),this._cr=Math.cos(this.rotation)),t=this._cr*this.scale.x,e=this._sr*this.scale.x,r=-this._sr*this.scale.y,i=this._cr*this.scale.y,o=this.position.x,s=this.position.y,(this.pivot.x||this.pivot.y)&&(o-=this.pivot.x*t+this.pivot.y*r,s-=this.pivot.x*e+this.pivot.y*i),h.a=t*a.a+e*a.c,h.b=t*a.b+e*a.d,h.c=r*a.a+i*a.c,h.d=r*a.b+i*a.d,h.tx=o*a.a+s*a.c+a.tx,h.ty=o*a.b+s*a.d+a.ty):(t=this.scale.x,i=this.scale.y,o=this.position.x-this.pivot.x*t,s=this.position.y-this.pivot.y*i,h.a=t*a.a,h.b=t*a.b,h.c=i*a.c,h.d=i*a.d,h.tx=o*a.a+s*a.c+a.tx,h.ty=o*a.b+s*a.d+a.ty),this.worldAlpha=this.alpha*this.parent.worldAlpha},n.DisplayObject.prototype.displayObjectUpdateTransform=n.DisplayObject.prototype.updateTransform,n.DisplayObject.prototype.getBounds=function(t){return t=t,n.EmptyRectangle},n.DisplayObject.prototype.getLocalBounds=function(){return this.getBounds(n.identityMatrix)},n.DisplayObject.prototype.setStageReference=function(t){this.stage=t,this._interactive&&(this.stage.dirty=!0)},n.DisplayObject.prototype.generateTexture=function(t,e,r){var i=this.getLocalBounds(),o=new n.RenderTexture(0|i.width,0|i.height,r,e,t);return n.DisplayObject._tempMatrix.tx=-i.x,n.DisplayObject._tempMatrix.ty=-i.y,o.render(this,n.DisplayObject._tempMatrix),o},n.DisplayObject.prototype.updateCache=function(){this._generateCachedSprite()},n.DisplayObject.prototype.toGlobal=function(t){return this.displayObjectUpdateTransform(),this.worldTransform.apply(t)},n.DisplayObject.prototype.toLocal=function(t,e){return e&&(t=e.toGlobal(t)),this.displayObjectUpdateTransform(),this.worldTransform.applyInverse(t)},n.DisplayObject.prototype._renderCachedSprite=function(t){this._cachedSprite.worldAlpha=this.worldAlpha,t.gl?n.Sprite.prototype._renderWebGL.call(this._cachedSprite,t):n.Sprite.prototype._renderCanvas.call(this._cachedSprite,t)},n.DisplayObject.prototype._generateCachedSprite=function(){this._cacheAsBitmap=!1;var t=this.getLocalBounds();if(this._cachedSprite)this._cachedSprite.texture.resize(0|t.width,0|t.height);else{var e=new n.RenderTexture(0|t.width,0|t.height);this._cachedSprite=new n.Sprite(e),this._cachedSprite.worldTransform=this.worldTransform}var r=this._filters;this._filters=null,this._cachedSprite.filters=r,n.DisplayObject._tempMatrix.tx=-t.x,n.DisplayObject._tempMatrix.ty=-t.y,this._cachedSprite.texture.render(this,n.DisplayObject._tempMatrix,!0),this._cachedSprite.anchor.x=-(t.x/t.width),this._cachedSprite.anchor.y=-(t.y/t.height),this._filters=r,this._cacheAsBitmap=!0},n.DisplayObject.prototype._destroyCachedSprite=function(){this._cachedSprite&&(this._cachedSprite.texture.destroy(!0),this._cachedSprite=null)},n.DisplayObject.prototype._renderWebGL=function(t){t=t},n.DisplayObject.prototype._renderCanvas=function(t){t=t},n.DisplayObject._tempMatrix=new n.Matrix,Object.defineProperty(n.DisplayObject.prototype,"x",{get:function(){return this.position.x},set:function(t){this.position.x=t}}),Object.defineProperty(n.DisplayObject.prototype,"y",{get:function(){return this.position.y},set:function(t){this.position.y=t}}),n.DisplayObjectContainer=function(){n.DisplayObject.call(this),this.children=[]},n.DisplayObjectContainer.prototype=Object.create(n.DisplayObject.prototype),n.DisplayObjectContainer.prototype.constructor=n.DisplayObjectContainer,Object.defineProperty(n.DisplayObjectContainer.prototype,"width",{get:function(){return this.scale.x*this.getLocalBounds().width},set:function(t){var e=this.getLocalBounds().width;this.scale.x=0!==e?t/e:1,this._width=t}}),Object.defineProperty(n.DisplayObjectContainer.prototype,"height",{get:function(){return this.scale.y*this.getLocalBounds().height},set:function(t){var e=this.getLocalBounds().height;this.scale.y=0!==e?t/e:1,this._height=t}}),n.DisplayObjectContainer.prototype.addChild=function(t){return this.addChildAt(t,this.children.length)},n.DisplayObjectContainer.prototype.addChildAt=function(t,e){if(e>=0&&e<=this.children.length)return t.parent&&t.parent.removeChild(t),t.parent=this,this.children.splice(e,0,t),this.stage&&t.setStageReference(this.stage),t;throw new Error(t+"addChildAt: The index "+e+" supplied is out of bounds "+this.children.length)},n.DisplayObjectContainer.prototype.swapChildren=function(t,e){if(t!==e){var r=this.getChildIndex(t),n=this.getChildIndex(e);if(0>r||0>n)throw new Error("swapChildren: Both the supplied DisplayObjects must be a child of the caller.");this.children[r]=e,this.children[n]=t}},n.DisplayObjectContainer.prototype.getChildIndex=function(t){var e=this.children.indexOf(t);
if(-1===e)throw new Error("The supplied DisplayObject must be a child of the caller");return e},n.DisplayObjectContainer.prototype.setChildIndex=function(t,e){if(0>e||e>=this.children.length)throw new Error("The supplied index is out of bounds");var r=this.getChildIndex(t);this.children.splice(r,1),this.children.splice(e,0,t)},n.DisplayObjectContainer.prototype.getChildAt=function(t){if(0>t||t>=this.children.length)throw new Error("getChildAt: Supplied index "+t+" does not exist in the child list, or the supplied DisplayObject must be a child of the caller");return this.children[t]},n.DisplayObjectContainer.prototype.removeChild=function(t){var e=this.children.indexOf(t);return-1!==e?this.removeChildAt(e):void 0},n.DisplayObjectContainer.prototype.removeChildAt=function(t){var e=this.getChildAt(t);return this.stage&&e.removeStageReference(),e.parent=void 0,this.children.splice(t,1),e},n.DisplayObjectContainer.prototype.removeChildren=function(t,e){var r=t||0,n="number"==typeof e?e:this.children.length,i=n-r;if(i>0&&n>=i){for(var o=this.children.splice(r,i),s=0;s<o.length;s++){var a=o[s];this.stage&&a.removeStageReference(),a.parent=void 0}return o}if(0===i&&0===this.children.length)return[];throw new Error("removeChildren: Range Error, numeric values are outside the acceptable range")},n.DisplayObjectContainer.prototype.updateTransform=function(){if(this.visible&&(this.displayObjectUpdateTransform(),!this._cacheAsBitmap))for(var t=0,e=this.children.length;e>t;t++)this.children[t].updateTransform()},n.DisplayObjectContainer.prototype.displayObjectContainerUpdateTransform=n.DisplayObjectContainer.prototype.updateTransform,n.DisplayObjectContainer.prototype.getBounds=function(){if(0===this.children.length)return n.EmptyRectangle;for(var t,e,r,i=1/0,o=1/0,s=-1/0,a=-1/0,h=!1,c=0,u=this.children.length;u>c;c++){var f=this.children[c];f.visible&&(h=!0,t=this.children[c].getBounds(),i=i<t.x?i:t.x,o=o<t.y?o:t.y,e=t.width+t.x,r=t.height+t.y,s=s>e?s:e,a=a>r?a:r)}if(!h)return n.EmptyRectangle;var d=this._bounds;return d.x=i,d.y=o,d.width=s-i,d.height=a-o,d},n.DisplayObjectContainer.prototype.getLocalBounds=function(){var t=this.worldTransform;this.worldTransform=n.identityMatrix;for(var e=0,r=this.children.length;r>e;e++)this.children[e].updateTransform();var i=this.getBounds();return this.worldTransform=t,i},n.DisplayObjectContainer.prototype.setStageReference=function(t){this.stage=t,this._interactive&&(this.stage.dirty=!0);for(var e=0,r=this.children.length;r>e;e++){var n=this.children[e];n.setStageReference(t)}},n.DisplayObjectContainer.prototype.removeStageReference=function(){for(var t=0,e=this.children.length;e>t;t++){var r=this.children[t];r.removeStageReference()}this._interactive&&(this.stage.dirty=!0),this.stage=null},n.DisplayObjectContainer.prototype._renderWebGL=function(t){if(this.visible&&!(this.alpha<=0)){if(this._cacheAsBitmap)return void this._renderCachedSprite(t);var e,r;if(this._mask||this._filters){for(this._filters&&(t.spriteBatch.flush(),t.filterManager.pushFilter(this._filterBlock)),this._mask&&(t.spriteBatch.stop(),t.maskManager.pushMask(this.mask,t),t.spriteBatch.start()),e=0,r=this.children.length;r>e;e++)this.children[e]._renderWebGL(t);t.spriteBatch.stop(),this._mask&&t.maskManager.popMask(this._mask,t),this._filters&&t.filterManager.popFilter(),t.spriteBatch.start()}else for(e=0,r=this.children.length;r>e;e++)this.children[e]._renderWebGL(t)}},n.DisplayObjectContainer.prototype._renderCanvas=function(t){if(this.visible!==!1&&0!==this.alpha){if(this._cacheAsBitmap)return void this._renderCachedSprite(t);this._mask&&t.maskManager.pushMask(this._mask,t);for(var e=0,r=this.children.length;r>e;e++){var n=this.children[e];n._renderCanvas(t)}this._mask&&t.maskManager.popMask(t)}},n.Sprite=function(t){n.DisplayObjectContainer.call(this),this.anchor=new n.Point,this.texture=t||n.Texture.emptyTexture,this._width=0,this._height=0,this.tint=16777215,this.blendMode=n.blendModes.NORMAL,this.shader=null,this.texture.baseTexture.hasLoaded?this.onTextureUpdate():this.texture.on("update",this.onTextureUpdate.bind(this)),this.renderable=!0},n.Sprite.prototype=Object.create(n.DisplayObjectContainer.prototype),n.Sprite.prototype.constructor=n.Sprite,Object.defineProperty(n.Sprite.prototype,"width",{get:function(){return this.scale.x*this.texture.frame.width},set:function(t){this.scale.x=t/this.texture.frame.width,this._width=t}}),Object.defineProperty(n.Sprite.prototype,"height",{get:function(){return this.scale.y*this.texture.frame.height},set:function(t){this.scale.y=t/this.texture.frame.height,this._height=t}}),n.Sprite.prototype.setTexture=function(t){this.texture=t,this.cachedTint=16777215},n.Sprite.prototype.onTextureUpdate=function(){this._width&&(this.scale.x=this._width/this.texture.frame.width),this._height&&(this.scale.y=this._height/this.texture.frame.height)},n.Sprite.prototype.getBounds=function(t){var e=this.texture.frame.width,r=this.texture.frame.height,n=e*(1-this.anchor.x),i=e*-this.anchor.x,o=r*(1-this.anchor.y),s=r*-this.anchor.y,a=t||this.worldTransform,h=a.a,c=a.b,u=a.c,f=a.d,d=a.tx,l=a.ty,p=-1/0,v=-1/0,b=1/0,g=1/0;if(0===c&&0===u)0>h&&(h*=-1),0>f&&(f*=-1),b=h*i+d,p=h*n+d,g=f*s+l,v=f*o+l;else{var y=h*i+u*s+d,m=f*s+c*i+l,w=h*n+u*s+d,x=f*s+c*n+l,_=h*n+u*o+d,S=f*o+c*n+l,T=h*i+u*o+d,A=f*o+c*i+l;b=b>y?y:b,b=b>w?w:b,b=b>_?_:b,b=b>T?T:b,g=g>m?m:g,g=g>x?x:g,g=g>S?S:g,g=g>A?A:g,p=y>p?y:p,p=w>p?w:p,p=_>p?_:p,p=T>p?T:p,v=m>v?m:v,v=x>v?x:v,v=S>v?S:v,v=A>v?A:v}var E=this._bounds;return E.x=b,E.width=p-b,E.y=g,E.height=v-g,this._currentBounds=E,E},n.Sprite.prototype._renderWebGL=function(t){if(this.visible&&!(this.alpha<=0)){var e,r;if(this._mask||this._filters){var n=t.spriteBatch;for(this._filters&&(n.flush(),t.filterManager.pushFilter(this._filterBlock)),this._mask&&(n.stop(),t.maskManager.pushMask(this.mask,t),n.start()),n.render(this),e=0,r=this.children.length;r>e;e++)this.children[e]._renderWebGL(t);n.stop(),this._mask&&t.maskManager.popMask(this._mask,t),this._filters&&t.filterManager.popFilter(),n.start()}else for(t.spriteBatch.render(this),e=0,r=this.children.length;r>e;e++)this.children[e]._renderWebGL(t)}},n.Sprite.prototype._renderCanvas=function(t){if(!(this.visible===!1||0===this.alpha||this.texture.crop.width<=0||this.texture.crop.height<=0)){if(this.blendMode!==t.currentBlendMode&&(t.currentBlendMode=this.blendMode,t.context.globalCompositeOperation=n.blendModesCanvas[t.currentBlendMode]),this._mask&&t.maskManager.pushMask(this._mask,t),this.texture.valid){var e=this.texture.baseTexture.resolution/t.resolution;t.context.globalAlpha=this.worldAlpha,t.smoothProperty&&t.scaleMode!==this.texture.baseTexture.scaleMode&&(t.scaleMode=this.texture.baseTexture.scaleMode,t.context[t.smoothProperty]=t.scaleMode===n.scaleModes.LINEAR);var r=this.texture.trim?this.texture.trim.x-this.anchor.x*this.texture.trim.width:this.anchor.x*-this.texture.frame.width,i=this.texture.trim?this.texture.trim.y-this.anchor.y*this.texture.trim.height:this.anchor.y*-this.texture.frame.height;t.roundPixels?(t.context.setTransform(this.worldTransform.a,this.worldTransform.b,this.worldTransform.c,this.worldTransform.d,this.worldTransform.tx*t.resolution|0,this.worldTransform.ty*t.resolution|0),r=0|r,i=0|i):t.context.setTransform(this.worldTransform.a,this.worldTransform.b,this.worldTransform.c,this.worldTransform.d,this.worldTransform.tx*t.resolution,this.worldTransform.ty*t.resolution),16777215!==this.tint?(this.cachedTint!==this.tint&&(this.cachedTint=this.tint,this.tintedTexture=n.CanvasTinter.getTintedTexture(this,this.tint)),t.context.drawImage(this.tintedTexture,0,0,this.texture.crop.width,this.texture.crop.height,r/e,i/e,this.texture.crop.width/e,this.texture.crop.height/e)):t.context.drawImage(this.texture.baseTexture.source,this.texture.crop.x,this.texture.crop.y,this.texture.crop.width,this.texture.crop.height,r/e,i/e,this.texture.crop.width/e,this.texture.crop.height/e)}for(var o=0,s=this.children.length;s>o;o++)this.children[o]._renderCanvas(t);this._mask&&t.maskManager.popMask(t)}},n.Sprite.fromFrame=function(t){var e=n.TextureCache[t];if(!e)throw new Error('The frameId "'+t+'" does not exist in the texture cache'+this);return new n.Sprite(e)},n.Sprite.fromImage=function(t,e,r){var i=n.Texture.fromImage(t,e,r);return new n.Sprite(i)},n.SpriteBatch=function(t){n.DisplayObjectContainer.call(this),this.textureThing=t,this.ready=!1},n.SpriteBatch.prototype=Object.create(n.DisplayObjectContainer.prototype),n.SpriteBatch.prototype.constructor=n.SpriteBatch,n.SpriteBatch.prototype.initWebGL=function(t){this.fastSpriteBatch=new n.WebGLFastSpriteBatch(t),this.ready=!0},n.SpriteBatch.prototype.updateTransform=function(){this.displayObjectUpdateTransform()},n.SpriteBatch.prototype._renderWebGL=function(t){!this.visible||this.alpha<=0||!this.children.length||(this.ready||this.initWebGL(t.gl),t.spriteBatch.stop(),t.shaderManager.setShader(t.shaderManager.fastShader),this.fastSpriteBatch.begin(this,t),this.fastSpriteBatch.render(this),t.spriteBatch.start())},n.SpriteBatch.prototype._renderCanvas=function(t){if(this.visible&&!(this.alpha<=0)&&this.children.length){var e=t.context;e.globalAlpha=this.worldAlpha,this.displayObjectUpdateTransform();for(var r=this.worldTransform,n=!0,i=0;i<this.children.length;i++){var o=this.children[i];if(o.visible){var s=o.texture,a=s.frame;if(e.globalAlpha=this.worldAlpha*o.alpha,o.rotation%(2*Math.PI)===0)n&&(e.setTransform(r.a,r.b,r.c,r.d,r.tx,r.ty),n=!1),e.drawImage(s.baseTexture.source,a.x,a.y,a.width,a.height,o.anchor.x*-a.width*o.scale.x+o.position.x+.5|0,o.anchor.y*-a.height*o.scale.y+o.position.y+.5|0,a.width*o.scale.x,a.height*o.scale.y);else{n||(n=!0),o.displayObjectUpdateTransform();var h=o.worldTransform;t.roundPixels?e.setTransform(h.a,h.b,h.c,h.d,0|h.tx,0|h.ty):e.setTransform(h.a,h.b,h.c,h.d,h.tx,h.ty),e.drawImage(s.baseTexture.source,a.x,a.y,a.width,a.height,o.anchor.x*-a.width+.5|0,o.anchor.y*-a.height+.5|0,a.width,a.height)}}}}},n.MovieClip=function(t){n.Sprite.call(this,t[0]),this.textures=t,this.animationSpeed=1,this.loop=!0,this.onComplete=null,this.currentFrame=0,this.playing=!1},n.MovieClip.prototype=Object.create(n.Sprite.prototype),n.MovieClip.prototype.constructor=n.MovieClip,Object.defineProperty(n.MovieClip.prototype,"totalFrames",{get:function(){return this.textures.length}}),n.MovieClip.prototype.stop=function(){this.playing=!1},n.MovieClip.prototype.play=function(){this.playing=!0},n.MovieClip.prototype.gotoAndStop=function(t){this.playing=!1,this.currentFrame=t;var e=this.currentFrame+.5|0;this.setTexture(this.textures[e%this.textures.length])},n.MovieClip.prototype.gotoAndPlay=function(t){this.currentFrame=t,this.playing=!0},n.MovieClip.prototype.updateTransform=function(){if(this.displayObjectContainerUpdateTransform(),this.playing){this.currentFrame+=this.animationSpeed;var t=this.currentFrame+.5|0;this.currentFrame=this.currentFrame%this.textures.length,this.loop||t<this.textures.length?this.setTexture(this.textures[t%this.textures.length]):t>=this.textures.length&&(this.gotoAndStop(this.textures.length-1),this.onComplete&&this.onComplete())}},n.MovieClip.fromFrames=function(t){for(var e=[],r=0;r<t.length;r++)e.push(new n.Texture.fromFrame(t[r]));return new n.MovieClip(e)},n.MovieClip.fromImages=function(t){for(var e=[],r=0;r<t.length;r++)e.push(new n.Texture.fromImage(t[r]));return new n.MovieClip(e)},n.FilterBlock=function(){this.visible=!0,this.renderable=!0},n.FilterBlock.prototype.constructor=n.FilterBlock,n.Text=function(t,e){this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d"),this.resolution=1,n.Sprite.call(this,n.Texture.fromCanvas(this.canvas)),this.setText(t),this.setStyle(e)},n.Text.prototype=Object.create(n.Sprite.prototype),n.Text.prototype.constructor=n.Text,Object.defineProperty(n.Text.prototype,"width",{get:function(){return this.dirty&&(this.updateText(),this.dirty=!1),this.scale.x*this.texture.frame.width},set:function(t){this.scale.x=t/this.texture.frame.width,this._width=t}}),Object.defineProperty(n.Text.prototype,"height",{get:function(){return this.dirty&&(this.updateText(),this.dirty=!1),this.scale.y*this.texture.frame.height},set:function(t){this.scale.y=t/this.texture.frame.height,this._height=t}}),n.Text.prototype.setStyle=function(t){t=t||{},t.font=t.font||"bold 20pt Arial",t.fill=t.fill||"black",t.align=t.align||"left",t.stroke=t.stroke||"black",t.strokeThickness=t.strokeThickness||0,t.wordWrap=t.wordWrap||!1,t.wordWrapWidth=t.wordWrapWidth||100,t.dropShadow=t.dropShadow||!1,t.dropShadowAngle=t.dropShadowAngle||Math.PI/6,t.dropShadowDistance=t.dropShadowDistance||4,t.dropShadowColor=t.dropShadowColor||"black",this.style=t,this.dirty=!0},n.Text.prototype.setText=function(t){this.text=t.toString()||" ",this.dirty=!0},n.Text.prototype.updateText=function(){this.texture.baseTexture.resolution=this.resolution,this.context.font=this.style.font;var t=this.text;this.style.wordWrap&&(t=this.wordWrap(this.text));for(var e=t.split(/(?:\r\n|\r|\n)/),r=[],n=0,i=this.determineFontProperties(this.style.font),o=0;o<e.length;o++){var s=this.context.measureText(e[o]).width;r[o]=s,n=Math.max(n,s)}var a=n+this.style.strokeThickness;this.style.dropShadow&&(a+=this.style.dropShadowDistance),this.canvas.width=(a+this.context.lineWidth)*this.resolution;var h=i.fontSize+this.style.strokeThickness,c=h*e.length;this.style.dropShadow&&(c+=this.style.dropShadowDistance),this.canvas.height=c*this.resolution,this.context.scale(this.resolution,this.resolution),navigator.isCocoonJS&&this.context.clearRect(0,0,this.canvas.width,this.canvas.height),this.context.font=this.style.font,this.context.strokeStyle=this.style.stroke,this.context.lineWidth=this.style.strokeThickness,this.context.textBaseline="alphabetic";var u,f;if(this.style.dropShadow){this.context.fillStyle=this.style.dropShadowColor;var d=Math.sin(this.style.dropShadowAngle)*this.style.dropShadowDistance,l=Math.cos(this.style.dropShadowAngle)*this.style.dropShadowDistance;for(o=0;o<e.length;o++)u=this.style.strokeThickness/2,f=this.style.strokeThickness/2+o*h+i.ascent,"right"===this.style.align?u+=n-r[o]:"center"===this.style.align&&(u+=(n-r[o])/2),this.style.fill&&this.context.fillText(e[o],u+d,f+l)}for(this.context.fillStyle=this.style.fill,o=0;o<e.length;o++)u=this.style.strokeThickness/2,f=this.style.strokeThickness/2+o*h+i.ascent,"right"===this.style.align?u+=n-r[o]:"center"===this.style.align&&(u+=(n-r[o])/2),this.style.stroke&&this.style.strokeThickness&&this.context.strokeText(e[o],u,f),this.style.fill&&this.context.fillText(e[o],u,f);this.updateTexture()},n.Text.prototype.updateTexture=function(){this.texture.baseTexture.width=this.canvas.width,this.texture.baseTexture.height=this.canvas.height,this.texture.crop.width=this.texture.frame.width=this.canvas.width,this.texture.crop.height=this.texture.frame.height=this.canvas.height,this._width=this.canvas.width,this._height=this.canvas.height,this.texture.baseTexture.dirty()},n.Text.prototype._renderWebGL=function(t){this.dirty&&(this.resolution=t.resolution,this.updateText(),this.dirty=!1),n.Sprite.prototype._renderWebGL.call(this,t)},n.Text.prototype._renderCanvas=function(t){this.dirty&&(this.resolution=t.resolution,this.updateText(),this.dirty=!1),n.Sprite.prototype._renderCanvas.call(this,t)},n.Text.prototype.determineFontProperties=function(t){var e=n.Text.fontPropertiesCache[t];if(!e){e={};var r=n.Text.fontPropertiesCanvas,i=n.Text.fontPropertiesContext;i.font=t;var o=Math.ceil(i.measureText("|Mq").width),s=Math.ceil(i.measureText("M").width),a=2*s;s=1.4*s|0,r.width=o,r.height=a,i.fillStyle="#f00",i.fillRect(0,0,o,a),i.font=t,i.textBaseline="alphabetic",i.fillStyle="#000",i.fillText("|Mq",0,s);var h,c,u=i.getImageData(0,0,o,a).data,f=u.length,d=4*o,l=0,p=!1;for(h=0;s>h;h++){for(c=0;d>c;c+=4)if(255!==u[l+c]){p=!0;break}if(p)break;l+=d}for(e.ascent=s-h,l=f-d,p=!1,h=a;h>s;h--){for(c=0;d>c;c+=4)if(255!==u[l+c]){p=!0;break}if(p)break;l-=d}e.descent=h-s,e.descent+=6,e.fontSize=e.ascent+e.descent,n.Text.fontPropertiesCache[t]=e}return e},n.Text.prototype.wordWrap=function(t){for(var e="",r=t.split("\n"),n=0;n<r.length;n++){for(var i=this.style.wordWrapWidth,o=r[n].split(" "),s=0;s<o.length;s++){var a=this.context.measureText(o[s]).width,h=a+this.context.measureText(" ").width;0===s||h>i?(s>0&&(e+="\n"),e+=o[s],i=this.style.wordWrapWidth-a):(i-=h,e+=" "+o[s])}n<r.length-1&&(e+="\n")}return e},n.Text.prototype.getBounds=function(t){return this.dirty&&(this.updateText(),this.dirty=!1),n.Sprite.prototype.getBounds.call(this,t)},n.Text.prototype.destroy=function(t){this.context=null,this.canvas=null,this.texture.destroy(void 0===t?!0:t)},n.Text.fontPropertiesCache={},n.Text.fontPropertiesCanvas=document.createElement("canvas"),n.Text.fontPropertiesContext=n.Text.fontPropertiesCanvas.getContext("2d"),n.BitmapText=function(t,e){n.DisplayObjectContainer.call(this),this.textWidth=0,this.textHeight=0,this._pool=[],this.setText(t),this.setStyle(e),this.updateText(),this.dirty=!1},n.BitmapText.prototype=Object.create(n.DisplayObjectContainer.prototype),n.BitmapText.prototype.constructor=n.BitmapText,n.BitmapText.prototype.setText=function(t){this.text=t||" ",this.dirty=!0},n.BitmapText.prototype.setStyle=function(t){t=t||{},t.align=t.align||"left",this.style=t;var e=t.font.split(" ");this.fontName=e[e.length-1],this.fontSize=e.length>=2?parseInt(e[e.length-2],10):n.BitmapText.fonts[this.fontName].size,this.dirty=!0,this.tint=t.tint},n.BitmapText.prototype.updateText=function(){for(var t=n.BitmapText.fonts[this.fontName],e=new n.Point,r=null,i=[],o=0,s=[],a=0,h=this.fontSize/t.size,c=0;c<this.text.length;c++){var u=this.text.charCodeAt(c);if(/(?:\r\n|\r|\n)/.test(this.text.charAt(c)))s.push(e.x),o=Math.max(o,e.x),a++,e.x=0,e.y+=t.lineHeight,r=null;else{var f=t.chars[u];f&&(r&&f.kerning[r]&&(e.x+=f.kerning[r]),i.push({texture:f.texture,line:a,charCode:u,position:new n.Point(e.x+f.xOffset,e.y+f.yOffset)}),e.x+=f.xAdvance,r=u)}}s.push(e.x),o=Math.max(o,e.x);var d=[];for(c=0;a>=c;c++){var l=0;"right"===this.style.align?l=o-s[c]:"center"===this.style.align&&(l=(o-s[c])/2),d.push(l)}var p=this.children.length,v=i.length,b=this.tint||16777215;for(c=0;v>c;c++){var g=p>c?this.children[c]:this._pool.pop();g?g.setTexture(i[c].texture):g=new n.Sprite(i[c].texture),g.position.x=(i[c].position.x+d[i[c].line])*h,g.position.y=i[c].position.y*h,g.scale.x=g.scale.y=h,g.tint=b,g.parent||this.addChild(g)}for(;this.children.length>v;){var y=this.getChildAt(this.children.length-1);this._pool.push(y),this.removeChild(y)}this.textWidth=o*h,this.textHeight=(e.y+t.lineHeight)*h},n.BitmapText.prototype.updateTransform=function(){this.dirty&&(this.updateText(),this.dirty=!1),n.DisplayObjectContainer.prototype.updateTransform.call(this)},n.BitmapText.fonts={},n.InteractionData=function(){this.global=new n.Point,this.target=null,this.originalEvent=null},n.InteractionData.prototype.getLocalPosition=function(t,e){var r=t.worldTransform,i=this.global,o=r.a,s=r.c,a=r.tx,h=r.b,c=r.d,u=r.ty,f=1/(o*c+s*-h);return e=e||new n.Point,e.x=c*f*i.x+-s*f*i.y+(u*s-a*c)*f,e.y=o*f*i.y+-h*f*i.x+(-u*o+a*h)*f,e},n.InteractionData.prototype.constructor=n.InteractionData,n.InteractionManager=function(t){this.stage=t,this.mouse=new n.InteractionData,this.touches={},this.tempPoint=new n.Point,this.mouseoverEnabled=!0,this.pool=[],this.interactiveItems=[],this.interactionDOMElement=null,this.onMouseMove=this.onMouseMove.bind(this),this.onMouseDown=this.onMouseDown.bind(this),this.onMouseOut=this.onMouseOut.bind(this),this.onMouseUp=this.onMouseUp.bind(this),this.onTouchStart=this.onTouchStart.bind(this),this.onTouchEnd=this.onTouchEnd.bind(this),this.onTouchMove=this.onTouchMove.bind(this),this.last=0,this.currentCursorStyle="inherit",this.mouseOut=!1,this.resolution=1,this._tempPoint=new n.Point},n.InteractionManager.prototype.constructor=n.InteractionManager,n.InteractionManager.prototype.collectInteractiveSprite=function(t,e){for(var r=t.children,n=r.length,i=n-1;i>=0;i--){var o=r[i];o._interactive?(e.interactiveChildren=!0,this.interactiveItems.push(o),o.children.length>0&&this.collectInteractiveSprite(o,o)):(o.__iParent=null,o.children.length>0&&this.collectInteractiveSprite(o,e))}},n.InteractionManager.prototype.setTarget=function(t){this.target=t,this.resolution=t.resolution,null===this.interactionDOMElement&&this.setTargetDomElement(t.view)},n.InteractionManager.prototype.setTargetDomElement=function(t){this.removeEvents(),window.navigator.msPointerEnabled&&(t.style["-ms-content-zooming"]="none",t.style["-ms-touch-action"]="none"),this.interactionDOMElement=t,t.addEventListener("mousemove",this.onMouseMove,!0),t.addEventListener("mousedown",this.onMouseDown,!0),t.addEventListener("mouseout",this.onMouseOut,!0),t.addEventListener("touchstart",this.onTouchStart,!0),t.addEventListener("touchend",this.onTouchEnd,!0),t.addEventListener("touchmove",this.onTouchMove,!0),window.addEventListener("mouseup",this.onMouseUp,!0)},n.InteractionManager.prototype.removeEvents=function(){this.interactionDOMElement&&(this.interactionDOMElement.style["-ms-content-zooming"]="",this.interactionDOMElement.style["-ms-touch-action"]="",this.interactionDOMElement.removeEventListener("mousemove",this.onMouseMove,!0),this.interactionDOMElement.removeEventListener("mousedown",this.onMouseDown,!0),this.interactionDOMElement.removeEventListener("mouseout",this.onMouseOut,!0),this.interactionDOMElement.removeEventListener("touchstart",this.onTouchStart,!0),this.interactionDOMElement.removeEventListener("touchend",this.onTouchEnd,!0),this.interactionDOMElement.removeEventListener("touchmove",this.onTouchMove,!0),this.interactionDOMElement=null,window.removeEventListener("mouseup",this.onMouseUp,!0))},n.InteractionManager.prototype.update=function(){if(this.target){var t=Date.now(),e=t-this.last;if(e=e*n.INTERACTION_FREQUENCY/1e3,!(1>e)){this.last=t;var r=0;this.dirty&&this.rebuildInteractiveGraph();var i=this.interactiveItems.length,o="inherit",s=!1;for(r=0;i>r;r++){var a=this.interactiveItems[r];a.__hit=this.hitTest(a,this.mouse),this.mouse.target=a,a.__hit&&!s?(a.buttonMode&&(o=a.defaultCursor),a.interactiveChildren||(s=!0),a.__isOver||(a.mouseover&&a.mouseover(this.mouse),a.__isOver=!0)):a.__isOver&&(a.mouseout&&a.mouseout(this.mouse),a.__isOver=!1)}this.currentCursorStyle!==o&&(this.currentCursorStyle=o,this.interactionDOMElement.style.cursor=o)}}},n.InteractionManager.prototype.rebuildInteractiveGraph=function(){this.dirty=!1;for(var t=this.interactiveItems.length,e=0;t>e;e++)this.interactiveItems[e].interactiveChildren=!1;this.interactiveItems=[],this.stage.interactive&&this.interactiveItems.push(this.stage),this.collectInteractiveSprite(this.stage,this.stage)},n.InteractionManager.prototype.onMouseMove=function(t){this.dirty&&this.rebuildInteractiveGraph(),this.mouse.originalEvent=t;var e=this.interactionDOMElement.getBoundingClientRect();this.mouse.global.x=(t.clientX-e.left)*(this.target.width/e.width)/this.resolution,this.mouse.global.y=(t.clientY-e.top)*(this.target.height/e.height)/this.resolution;for(var r=this.interactiveItems.length,n=0;r>n;n++){var i=this.interactiveItems[n];i.mousemove&&i.mousemove(this.mouse)}},n.InteractionManager.prototype.onMouseDown=function(t){this.dirty&&this.rebuildInteractiveGraph(),this.mouse.originalEvent=t,n.AUTO_PREVENT_DEFAULT&&this.mouse.originalEvent.preventDefault();for(var e=this.interactiveItems.length,r=this.mouse.originalEvent,i=2===r.button||3===r.which,o=i?"rightdown":"mousedown",s=i?"rightclick":"click",a=i?"__rightIsDown":"__mouseIsDown",h=i?"__isRightDown":"__isDown",c=0;e>c;c++){var u=this.interactiveItems[c];if((u[o]||u[s])&&(u[a]=!0,u.__hit=this.hitTest(u,this.mouse),u.__hit&&(u[o]&&u[o](this.mouse),u[h]=!0,!u.interactiveChildren)))break}},n.InteractionManager.prototype.onMouseOut=function(t){this.dirty&&this.rebuildInteractiveGraph(),this.mouse.originalEvent=t;var e=this.interactiveItems.length;this.interactionDOMElement.style.cursor="inherit";for(var r=0;e>r;r++){var n=this.interactiveItems[r];n.__isOver&&(this.mouse.target=n,n.mouseout&&n.mouseout(this.mouse),n.__isOver=!1)}this.mouseOut=!0,this.mouse.global.x=-1e4,this.mouse.global.y=-1e4},n.InteractionManager.prototype.onMouseUp=function(t){this.dirty&&this.rebuildInteractiveGraph(),this.mouse.originalEvent=t;for(var e=this.interactiveItems.length,r=!1,n=this.mouse.originalEvent,i=2===n.button||3===n.which,o=i?"rightup":"mouseup",s=i?"rightclick":"click",a=i?"rightupoutside":"mouseupoutside",h=i?"__isRightDown":"__isDown",c=0;e>c;c++){var u=this.interactiveItems[c];(u[s]||u[o]||u[a])&&(u.__hit=this.hitTest(u,this.mouse),u.__hit&&!r?(u[o]&&u[o](this.mouse),u[h]&&u[s]&&u[s](this.mouse),u.interactiveChildren||(r=!0)):u[h]&&u[a]&&u[a](this.mouse),u[h]=!1)}},n.InteractionManager.prototype.hitTest=function(t,e){var r=e.global;if(!t.worldVisible)return!1;t.worldTransform.applyInverse(r,this._tempPoint);var i,o=this._tempPoint.x,s=this._tempPoint.y;if(e.target=t,t.hitArea&&t.hitArea.contains)return t.hitArea.contains(o,s);if(t instanceof n.Sprite){var a,h=t.texture.frame.width,c=t.texture.frame.height,u=-h*t.anchor.x;if(o>u&&u+h>o&&(a=-c*t.anchor.y,s>a&&a+c>s))return!0}else if(t instanceof n.Graphics){var f=t.graphicsData;for(i=0;i<f.length;i++){var d=f[i];if(d.fill&&d.shape&&d.shape.contains(o,s))return!0}}var l=t.children.length;for(i=0;l>i;i++){var p=t.children[i],v=this.hitTest(p,e);if(v)return e.target=t,!0}return!1},n.InteractionManager.prototype.onTouchMove=function(t){this.dirty&&this.rebuildInteractiveGraph();var e,r=this.interactionDOMElement.getBoundingClientRect(),n=t.changedTouches,i=0;for(i=0;i<n.length;i++){var o=n[i];e=this.touches[o.identifier],e.originalEvent=t,e.global.x=(o.clientX-r.left)*(this.target.width/r.width)/this.resolution,e.global.y=(o.clientY-r.top)*(this.target.height/r.height)/this.resolution,!navigator.isCocoonJS||r.left||r.top||t.target.style.width||t.target.style.height||(e.global.x=o.clientX,e.global.y=o.clientY);for(var s=0;s<this.interactiveItems.length;s++){var a=this.interactiveItems[s];a.touchmove&&a.__touchData&&a.__touchData[o.identifier]&&a.touchmove(e)}}},n.InteractionManager.prototype.onTouchStart=function(t){this.dirty&&this.rebuildInteractiveGraph();var e=this.interactionDOMElement.getBoundingClientRect();n.AUTO_PREVENT_DEFAULT&&t.preventDefault();for(var r=t.changedTouches,i=0;i<r.length;i++){var o=r[i],s=this.pool.pop();s||(s=new n.InteractionData),s.originalEvent=t,this.touches[o.identifier]=s,s.global.x=(o.clientX-e.left)*(this.target.width/e.width)/this.resolution,s.global.y=(o.clientY-e.top)*(this.target.height/e.height)/this.resolution,!navigator.isCocoonJS||e.left||e.top||t.target.style.width||t.target.style.height||(s.global.x=o.clientX,s.global.y=o.clientY);for(var a=this.interactiveItems.length,h=0;a>h;h++){var c=this.interactiveItems[h];if((c.touchstart||c.tap)&&(c.__hit=this.hitTest(c,s),c.__hit&&(c.touchstart&&c.touchstart(s),c.__isDown=!0,c.__touchData=c.__touchData||{},c.__touchData[o.identifier]=s,!c.interactiveChildren)))break}}},n.InteractionManager.prototype.onTouchEnd=function(t){this.dirty&&this.rebuildInteractiveGraph();for(var e=this.interactionDOMElement.getBoundingClientRect(),r=t.changedTouches,n=0;n<r.length;n++){var i=r[n],o=this.touches[i.identifier],s=!1;o.global.x=(i.clientX-e.left)*(this.target.width/e.width)/this.resolution,o.global.y=(i.clientY-e.top)*(this.target.height/e.height)/this.resolution,!navigator.isCocoonJS||e.left||e.top||t.target.style.width||t.target.style.height||(o.global.x=i.clientX,o.global.y=i.clientY);for(var a=this.interactiveItems.length,h=0;a>h;h++){var c=this.interactiveItems[h];c.__touchData&&c.__touchData[i.identifier]&&(c.__hit=this.hitTest(c,c.__touchData[i.identifier]),o.originalEvent=t,(c.touchend||c.tap)&&(c.__hit&&!s?(c.touchend&&c.touchend(o),c.__isDown&&c.tap&&c.tap(o),c.interactiveChildren||(s=!0)):c.__isDown&&c.touchendoutside&&c.touchendoutside(o),c.__isDown=!1),c.__touchData[i.identifier]=null)}this.pool.push(o),this.touches[i.identifier]=null}},n.Stage=function(t){n.DisplayObjectContainer.call(this),this.worldTransform=new n.Matrix,this.interactive=!0,this.interactionManager=new n.InteractionManager(this),this.dirty=!0,this.stage=this,this.stage.hitArea=new n.Rectangle(0,0,1e5,1e5),this.setBackgroundColor(t)},n.Stage.prototype=Object.create(n.DisplayObjectContainer.prototype),n.Stage.prototype.constructor=n.Stage,n.Stage.prototype.setInteractionDelegate=function(t){this.interactionManager.setTargetDomElement(t)},n.Stage.prototype.updateTransform=function(){this.worldAlpha=1;for(var t=0,e=this.children.length;e>t;t++)this.children[t].updateTransform();this.dirty&&(this.dirty=!1,this.interactionManager.dirty=!0),this.interactive&&this.interactionManager.update()},n.Stage.prototype.setBackgroundColor=function(t){this.backgroundColor=t||0,this.backgroundColorSplit=n.hex2rgb(this.backgroundColor);var e=this.backgroundColor.toString(16);e="000000".substr(0,6-e.length)+e,this.backgroundColorString="#"+e},n.Stage.prototype.getMousePosition=function(){return this.interactionManager.mouse.global},function(t){for(var e=0,r=["ms","moz","webkit","o"],n=0;n<r.length&&!t.requestAnimationFrame;++n)t.requestAnimationFrame=t[r[n]+"RequestAnimationFrame"],t.cancelAnimationFrame=t[r[n]+"CancelAnimationFrame"]||t[r[n]+"CancelRequestAnimationFrame"];t.requestAnimationFrame||(t.requestAnimationFrame=function(r){var n=(new Date).getTime(),i=Math.max(0,16-(n-e)),o=t.setTimeout(function(){r(n+i)},i);return e=n+i,o}),t.cancelAnimationFrame||(t.cancelAnimationFrame=function(t){clearTimeout(t)}),t.requestAnimFrame=t.requestAnimationFrame}(this),n.hex2rgb=function(t){return[(t>>16&255)/255,(t>>8&255)/255,(255&t)/255]},n.rgb2hex=function(t){return(255*t[0]<<16)+(255*t[1]<<8)+255*t[2]},"function"!=typeof Function.prototype.bind&&(Function.prototype.bind=function(){return function(t){function e(){for(var n=arguments.length,o=new Array(n);n--;)o[n]=arguments[n];return o=i.concat(o),r.apply(this instanceof e?this:t,o)}var r=this,n=arguments.length-1,i=[];if(n>0)for(i.length=n;n--;)i[n]=arguments[n+1];if("function"!=typeof r)throw new TypeError;return e.prototype=function t(e){return e&&(t.prototype=e),this instanceof t?void 0:new t}(r.prototype),e}}()),n.AjaxRequest=function(){var t=["Msxml2.XMLHTTP.6.0","Msxml2.XMLHTTP.3.0","Microsoft.XMLHTTP"];if(!window.ActiveXObject)return window.XMLHttpRequest?new window.XMLHttpRequest:!1;for(var e=0;e<t.length;e++)try{return new window.ActiveXObject(t[e])}catch(t){}},n.canUseNewCanvasBlendModes=function(){if("undefined"==typeof document)return!1;var t=document.createElement("canvas");t.width=1,t.height=1;var e=t.getContext("2d");return e.fillStyle="#000",e.fillRect(0,0,1,1),e.globalCompositeOperation="multiply",e.fillStyle="#fff",e.fillRect(0,0,1,1),0===e.getImageData(0,0,1,1).data[0]},n.getNextPowerOfTwo=function(t){if(t>0&&0===(t&t-1))return t;for(var e=1;t>e;)e<<=1;return e},n.isPowerOfTwo=function(t,e){return t>0&&0===(t&t-1)&&e>0&&0===(e&e-1)},n.EventTarget={call:function(t){t&&(t=t.prototype||t,n.EventTarget.mixin(t))},mixin:function(t){t.listeners=function(t){return this._listeners=this._listeners||{},this._listeners[t]?this._listeners[t].slice():[]},t.emit=t.dispatchEvent=function(t,e){if(this._listeners=this._listeners||{},"object"==typeof t&&(e=t,t=t.type),e&&e.__isEventObject===!0||(e=new n.Event(this,t,e)),this._listeners&&this._listeners[t]){var r,i=this._listeners[t].slice(0),o=i.length,s=i[0];for(r=0;o>r;s=i[++r])if(s.call(this,e),e.stoppedImmediate)return this;if(e.stopped)return this}return this.parent&&this.parent.emit&&this.parent.emit.call(this.parent,t,e),this},t.on=t.addEventListener=function(t,e){return this._listeners=this._listeners||{},(this._listeners[t]=this._listeners[t]||[]).push(e),this},t.once=function(t,e){function r(){e.apply(n.off(t,r),arguments)}this._listeners=this._listeners||{};var n=this;return r._originalHandler=e,this.on(t,r)},t.off=t.removeEventListener=function(t,e){if(this._listeners=this._listeners||{},!this._listeners[t])return this;
for(var r=this._listeners[t],n=e?r.length:0;n-->0;)(r[n]===e||r[n]._originalHandler===e)&&r.splice(n,1);return 0===r.length&&delete this._listeners[t],this},t.removeAllListeners=function(t){return this._listeners=this._listeners||{},this._listeners[t]?(delete this._listeners[t],this):this}}},n.Event=function(t,e,r){this.__isEventObject=!0,this.stopped=!1,this.stoppedImmediate=!1,this.target=t,this.type=e,this.data=r,this.content=r,this.timeStamp=Date.now()},n.Event.prototype.stopPropagation=function(){this.stopped=!0},n.Event.prototype.stopImmediatePropagation=function(){this.stoppedImmediate=!0},n.autoDetectRenderer=function(t,e,r){t||(t=800),e||(e=600);var i=function(){try{var t=document.createElement("canvas");return!!window.WebGLRenderingContext&&(t.getContext("webgl")||t.getContext("experimental-webgl"))}catch(t){return!1}}();return i?new n.WebGLRenderer(t,e,r):new n.CanvasRenderer(t,e,r)},n.autoDetectRecommendedRenderer=function(t,e,r){t||(t=800),e||(e=600);var i=function(){try{var t=document.createElement("canvas");return!!window.WebGLRenderingContext&&(t.getContext("webgl")||t.getContext("experimental-webgl"))}catch(t){return!1}}(),o=/Android/i.test(navigator.userAgent);return i&&!o?new n.WebGLRenderer(t,e,r):new n.CanvasRenderer(t,e,r)},n.PolyK={},n.PolyK.Triangulate=function(t){var e=!0,r=t.length>>1;if(3>r)return[];for(var i=[],o=[],s=0;r>s;s++)o.push(s);s=0;for(var a=r;a>3;){var h=o[(s+0)%a],c=o[(s+1)%a],u=o[(s+2)%a],f=t[2*h],d=t[2*h+1],l=t[2*c],p=t[2*c+1],v=t[2*u],b=t[2*u+1],g=!1;if(n.PolyK._convex(f,d,l,p,v,b,e)){g=!0;for(var y=0;a>y;y++){var m=o[y];if(m!==h&&m!==c&&m!==u&&n.PolyK._PointInTriangle(t[2*m],t[2*m+1],f,d,l,p,v,b)){g=!1;break}}}if(g)i.push(h,c,u),o.splice((s+1)%a,1),a--,s=0;else if(s++>3*a){if(!e)return null;for(i=[],o=[],s=0;r>s;s++)o.push(s);s=0,a=r,e=!1}}return i.push(o[0],o[1],o[2]),i},n.PolyK._PointInTriangle=function(t,e,r,n,i,o,s,a){var h=s-r,c=a-n,u=i-r,f=o-n,d=t-r,l=e-n,p=h*h+c*c,v=h*u+c*f,b=h*d+c*l,g=u*u+f*f,y=u*d+f*l,m=1/(p*g-v*v),w=(g*b-v*y)*m,x=(p*y-v*b)*m;return w>=0&&x>=0&&1>w+x},n.PolyK._convex=function(t,e,r,n,i,o,s){return(e-n)*(i-r)+(r-t)*(o-n)>=0===s},n.initDefaultShaders=function(){},n.CompileVertexShader=function(t,e){return n._CompileShader(t,e,t.VERTEX_SHADER)},n.CompileFragmentShader=function(t,e){return n._CompileShader(t,e,t.FRAGMENT_SHADER)},n._CompileShader=function(t,e,r){var n=e.join("\n"),i=t.createShader(r);return t.shaderSource(i,n),t.compileShader(i),t.getShaderParameter(i,t.COMPILE_STATUS)?i:(window.console.log(t.getShaderInfoLog(i)),null)},n.compileProgram=function(t,e,r){var i=n.CompileFragmentShader(t,r),o=n.CompileVertexShader(t,e),s=t.createProgram();return t.attachShader(s,o),t.attachShader(s,i),t.linkProgram(s),t.getProgramParameter(s,t.LINK_STATUS)||window.console.log("Could not initialise shaders"),s},n.PixiShader=function(t){this._UID=n._UID++,this.gl=t,this.program=null,this.fragmentSrc=["precision lowp float;","varying vec2 vTextureCoord;","varying vec4 vColor;","uniform sampler2D uSampler;","void main(void) {","   gl_FragColor = texture2D(uSampler, vTextureCoord) * vColor ;","}"],this.textureCount=0,this.firstRun=!0,this.dirty=!0,this.attributes=[],this.init()},n.PixiShader.prototype.constructor=n.PixiShader,n.PixiShader.prototype.init=function(){var t=this.gl,e=n.compileProgram(t,this.vertexSrc||n.PixiShader.defaultVertexSrc,this.fragmentSrc);t.useProgram(e),this.uSampler=t.getUniformLocation(e,"uSampler"),this.projectionVector=t.getUniformLocation(e,"projectionVector"),this.offsetVector=t.getUniformLocation(e,"offsetVector"),this.dimensions=t.getUniformLocation(e,"dimensions"),this.aVertexPosition=t.getAttribLocation(e,"aVertexPosition"),this.aTextureCoord=t.getAttribLocation(e,"aTextureCoord"),this.colorAttribute=t.getAttribLocation(e,"aColor"),-1===this.colorAttribute&&(this.colorAttribute=2),this.attributes=[this.aVertexPosition,this.aTextureCoord,this.colorAttribute];for(var r in this.uniforms)this.uniforms[r].uniformLocation=t.getUniformLocation(e,r);this.initUniforms(),this.program=e},n.PixiShader.prototype.initUniforms=function(){this.textureCount=1;var t,e=this.gl;for(var r in this.uniforms){t=this.uniforms[r];var n=t.type;"sampler2D"===n?(t._init=!1,null!==t.value&&this.initSampler2D(t)):"mat2"===n||"mat3"===n||"mat4"===n?(t.glMatrix=!0,t.glValueLength=1,"mat2"===n?t.glFunc=e.uniformMatrix2fv:"mat3"===n?t.glFunc=e.uniformMatrix3fv:"mat4"===n&&(t.glFunc=e.uniformMatrix4fv)):(t.glFunc=e["uniform"+n],t.glValueLength="2f"===n||"2i"===n?2:"3f"===n||"3i"===n?3:"4f"===n||"4i"===n?4:1)}},n.PixiShader.prototype.initSampler2D=function(t){if(t.value&&t.value.baseTexture&&t.value.baseTexture.hasLoaded){var e=this.gl;if(e.activeTexture(e["TEXTURE"+this.textureCount]),e.bindTexture(e.TEXTURE_2D,t.value.baseTexture._glTextures[e.id]),t.textureData){var r=t.textureData,n=r.magFilter?r.magFilter:e.LINEAR,i=r.minFilter?r.minFilter:e.LINEAR,o=r.wrapS?r.wrapS:e.CLAMP_TO_EDGE,s=r.wrapT?r.wrapT:e.CLAMP_TO_EDGE,a=r.luminance?e.LUMINANCE:e.RGBA;if(r.repeat&&(o=e.REPEAT,s=e.REPEAT),e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,!!r.flipY),r.width){var h=r.width?r.width:512,c=r.height?r.height:2,u=r.border?r.border:0;e.texImage2D(e.TEXTURE_2D,0,a,h,c,u,a,e.UNSIGNED_BYTE,null)}else e.texImage2D(e.TEXTURE_2D,0,a,e.RGBA,e.UNSIGNED_BYTE,t.value.baseTexture.source);e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,n),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,i),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,o),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,s)}e.uniform1i(t.uniformLocation,this.textureCount),t._init=!0,this.textureCount++}},n.PixiShader.prototype.syncUniforms=function(){this.textureCount=1;var t,e=this.gl;for(var r in this.uniforms)t=this.uniforms[r],1===t.glValueLength?t.glMatrix===!0?t.glFunc.call(e,t.uniformLocation,t.transpose,t.value):t.glFunc.call(e,t.uniformLocation,t.value):2===t.glValueLength?t.glFunc.call(e,t.uniformLocation,t.value.x,t.value.y):3===t.glValueLength?t.glFunc.call(e,t.uniformLocation,t.value.x,t.value.y,t.value.z):4===t.glValueLength?t.glFunc.call(e,t.uniformLocation,t.value.x,t.value.y,t.value.z,t.value.w):"sampler2D"===t.type&&(t._init?(e.activeTexture(e["TEXTURE"+this.textureCount]),t.value.baseTexture._dirty[e.id]?n.instances[e.id].updateTexture(t.value.baseTexture):e.bindTexture(e.TEXTURE_2D,t.value.baseTexture._glTextures[e.id]),e.uniform1i(t.uniformLocation,this.textureCount),this.textureCount++):this.initSampler2D(t))},n.PixiShader.prototype.destroy=function(){this.gl.deleteProgram(this.program),this.uniforms=null,this.gl=null,this.attributes=null},n.PixiShader.defaultVertexSrc=["attribute vec2 aVertexPosition;","attribute vec2 aTextureCoord;","attribute vec4 aColor;","uniform vec2 projectionVector;","uniform vec2 offsetVector;","varying vec2 vTextureCoord;","varying vec4 vColor;","const vec2 center = vec2(-1.0, 1.0);","void main(void) {","   gl_Position = vec4( ((aVertexPosition + offsetVector) / projectionVector) + center , 0.0, 1.0);","   vTextureCoord = aTextureCoord;","   vColor = vec4(aColor.rgb * aColor.a, aColor.a);","}"],n.PixiFastShader=function(t){this._UID=n._UID++,this.gl=t,this.program=null,this.fragmentSrc=["precision lowp float;","varying vec2 vTextureCoord;","varying float vColor;","uniform sampler2D uSampler;","void main(void) {","   gl_FragColor = texture2D(uSampler, vTextureCoord) * vColor ;","}"],this.vertexSrc=["attribute vec2 aVertexPosition;","attribute vec2 aPositionCoord;","attribute vec2 aScale;","attribute float aRotation;","attribute vec2 aTextureCoord;","attribute float aColor;","uniform vec2 projectionVector;","uniform vec2 offsetVector;","uniform mat3 uMatrix;","varying vec2 vTextureCoord;","varying float vColor;","const vec2 center = vec2(-1.0, 1.0);","void main(void) {","   vec2 v;","   vec2 sv = aVertexPosition * aScale;","   v.x = (sv.x) * cos(aRotation) - (sv.y) * sin(aRotation);","   v.y = (sv.x) * sin(aRotation) + (sv.y) * cos(aRotation);","   v = ( uMatrix * vec3(v + aPositionCoord , 1.0) ).xy ;","   gl_Position = vec4( ( v / projectionVector) + center , 0.0, 1.0);","   vTextureCoord = aTextureCoord;","   vColor = aColor;","}"],this.textureCount=0,this.init()},n.PixiFastShader.prototype.constructor=n.PixiFastShader,n.PixiFastShader.prototype.init=function(){var t=this.gl,e=n.compileProgram(t,this.vertexSrc,this.fragmentSrc);t.useProgram(e),this.uSampler=t.getUniformLocation(e,"uSampler"),this.projectionVector=t.getUniformLocation(e,"projectionVector"),this.offsetVector=t.getUniformLocation(e,"offsetVector"),this.dimensions=t.getUniformLocation(e,"dimensions"),this.uMatrix=t.getUniformLocation(e,"uMatrix"),this.aVertexPosition=t.getAttribLocation(e,"aVertexPosition"),this.aPositionCoord=t.getAttribLocation(e,"aPositionCoord"),this.aScale=t.getAttribLocation(e,"aScale"),this.aRotation=t.getAttribLocation(e,"aRotation"),this.aTextureCoord=t.getAttribLocation(e,"aTextureCoord"),this.colorAttribute=t.getAttribLocation(e,"aColor"),-1===this.colorAttribute&&(this.colorAttribute=2),this.attributes=[this.aVertexPosition,this.aPositionCoord,this.aScale,this.aRotation,this.aTextureCoord,this.colorAttribute],this.program=e},n.PixiFastShader.prototype.destroy=function(){this.gl.deleteProgram(this.program),this.uniforms=null,this.gl=null,this.attributes=null},n.StripShader=function(t){this._UID=n._UID++,this.gl=t,this.program=null,this.fragmentSrc=["precision mediump float;","varying vec2 vTextureCoord;","uniform float alpha;","uniform sampler2D uSampler;","void main(void) {","   gl_FragColor = texture2D(uSampler, vec2(vTextureCoord.x, vTextureCoord.y)) * alpha;","}"],this.vertexSrc=["attribute vec2 aVertexPosition;","attribute vec2 aTextureCoord;","uniform mat3 translationMatrix;","uniform vec2 projectionVector;","uniform vec2 offsetVector;","varying vec2 vTextureCoord;","void main(void) {","   vec3 v = translationMatrix * vec3(aVertexPosition , 1.0);","   v -= offsetVector.xyx;","   gl_Position = vec4( v.x / projectionVector.x -1.0, v.y / -projectionVector.y + 1.0 , 0.0, 1.0);","   vTextureCoord = aTextureCoord;","}"],this.init()},n.StripShader.prototype.constructor=n.StripShader,n.StripShader.prototype.init=function(){var t=this.gl,e=n.compileProgram(t,this.vertexSrc,this.fragmentSrc);t.useProgram(e),this.uSampler=t.getUniformLocation(e,"uSampler"),this.projectionVector=t.getUniformLocation(e,"projectionVector"),this.offsetVector=t.getUniformLocation(e,"offsetVector"),this.colorAttribute=t.getAttribLocation(e,"aColor"),this.aVertexPosition=t.getAttribLocation(e,"aVertexPosition"),this.aTextureCoord=t.getAttribLocation(e,"aTextureCoord"),this.attributes=[this.aVertexPosition,this.aTextureCoord],this.translationMatrix=t.getUniformLocation(e,"translationMatrix"),this.alpha=t.getUniformLocation(e,"alpha"),this.program=e},n.StripShader.prototype.destroy=function(){this.gl.deleteProgram(this.program),this.uniforms=null,this.gl=null,this.attribute=null},n.PrimitiveShader=function(t){this._UID=n._UID++,this.gl=t,this.program=null,this.fragmentSrc=["precision mediump float;","varying vec4 vColor;","void main(void) {","   gl_FragColor = vColor;","}"],this.vertexSrc=["attribute vec2 aVertexPosition;","attribute vec4 aColor;","uniform mat3 translationMatrix;","uniform vec2 projectionVector;","uniform vec2 offsetVector;","uniform float alpha;","uniform float flipY;","uniform vec3 tint;","varying vec4 vColor;","void main(void) {","   vec3 v = translationMatrix * vec3(aVertexPosition , 1.0);","   v -= offsetVector.xyx;","   gl_Position = vec4( v.x / projectionVector.x -1.0, (v.y / projectionVector.y * -flipY) + flipY , 0.0, 1.0);","   vColor = aColor * vec4(tint * alpha, alpha);","}"],this.init()},n.PrimitiveShader.prototype.constructor=n.PrimitiveShader,n.PrimitiveShader.prototype.init=function(){var t=this.gl,e=n.compileProgram(t,this.vertexSrc,this.fragmentSrc);t.useProgram(e),this.projectionVector=t.getUniformLocation(e,"projectionVector"),this.offsetVector=t.getUniformLocation(e,"offsetVector"),this.tintColor=t.getUniformLocation(e,"tint"),this.flipY=t.getUniformLocation(e,"flipY"),this.aVertexPosition=t.getAttribLocation(e,"aVertexPosition"),this.colorAttribute=t.getAttribLocation(e,"aColor"),this.attributes=[this.aVertexPosition,this.colorAttribute],this.translationMatrix=t.getUniformLocation(e,"translationMatrix"),this.alpha=t.getUniformLocation(e,"alpha"),this.program=e},n.PrimitiveShader.prototype.destroy=function(){this.gl.deleteProgram(this.program),this.uniforms=null,this.gl=null,this.attributes=null},n.ComplexPrimitiveShader=function(t){this._UID=n._UID++,this.gl=t,this.program=null,this.fragmentSrc=["precision mediump float;","varying vec4 vColor;","void main(void) {","   gl_FragColor = vColor;","}"],this.vertexSrc=["attribute vec2 aVertexPosition;","uniform mat3 translationMatrix;","uniform vec2 projectionVector;","uniform vec2 offsetVector;","uniform vec3 tint;","uniform float alpha;","uniform vec3 color;","uniform float flipY;","varying vec4 vColor;","void main(void) {","   vec3 v = translationMatrix * vec3(aVertexPosition , 1.0);","   v -= offsetVector.xyx;","   gl_Position = vec4( v.x / projectionVector.x -1.0, (v.y / projectionVector.y * -flipY) + flipY , 0.0, 1.0);","   vColor = vec4(color * alpha * tint, alpha);","}"],this.init()},n.ComplexPrimitiveShader.prototype.constructor=n.ComplexPrimitiveShader,n.ComplexPrimitiveShader.prototype.init=function(){var t=this.gl,e=n.compileProgram(t,this.vertexSrc,this.fragmentSrc);t.useProgram(e),this.projectionVector=t.getUniformLocation(e,"projectionVector"),this.offsetVector=t.getUniformLocation(e,"offsetVector"),this.tintColor=t.getUniformLocation(e,"tint"),this.color=t.getUniformLocation(e,"color"),this.flipY=t.getUniformLocation(e,"flipY"),this.aVertexPosition=t.getAttribLocation(e,"aVertexPosition"),this.attributes=[this.aVertexPosition,this.colorAttribute],this.translationMatrix=t.getUniformLocation(e,"translationMatrix"),this.alpha=t.getUniformLocation(e,"alpha"),this.program=e},n.ComplexPrimitiveShader.prototype.destroy=function(){this.gl.deleteProgram(this.program),this.uniforms=null,this.gl=null,this.attribute=null},n.WebGLGraphics=function(){},n.WebGLGraphics.renderGraphics=function(t,e){var r,i=e.gl,o=e.projection,s=e.offset,a=e.shaderManager.primitiveShader;t.dirty&&n.WebGLGraphics.updateGraphics(t,i);for(var h=t._webGL[i.id],c=0;c<h.data.length;c++)1===h.data[c].mode?(r=h.data[c],e.stencilManager.pushStencil(t,r,e),i.drawElements(i.TRIANGLE_FAN,4,i.UNSIGNED_SHORT,2*(r.indices.length-4)),e.stencilManager.popStencil(t,r,e)):(r=h.data[c],e.shaderManager.setShader(a),a=e.shaderManager.primitiveShader,i.uniformMatrix3fv(a.translationMatrix,!1,t.worldTransform.toArray(!0)),i.uniform1f(a.flipY,1),i.uniform2f(a.projectionVector,o.x,-o.y),i.uniform2f(a.offsetVector,-s.x,-s.y),i.uniform3fv(a.tintColor,n.hex2rgb(t.tint)),i.uniform1f(a.alpha,t.worldAlpha),i.bindBuffer(i.ARRAY_BUFFER,r.buffer),i.vertexAttribPointer(a.aVertexPosition,2,i.FLOAT,!1,24,0),i.vertexAttribPointer(a.colorAttribute,4,i.FLOAT,!1,24,8),i.bindBuffer(i.ELEMENT_ARRAY_BUFFER,r.indexBuffer),i.drawElements(i.TRIANGLE_STRIP,r.indices.length,i.UNSIGNED_SHORT,0))},n.WebGLGraphics.updateGraphics=function(t,e){var r=t._webGL[e.id];r||(r=t._webGL[e.id]={lastIndex:0,data:[],gl:e}),t.dirty=!1;var i;if(t.clearDirty){for(t.clearDirty=!1,i=0;i<r.data.length;i++){var o=r.data[i];o.reset(),n.WebGLGraphics.graphicsDataPool.push(o)}r.data=[],r.lastIndex=0}var s;for(i=r.lastIndex;i<t.graphicsData.length;i++){var a=t.graphicsData[i];if(a.type===n.Graphics.POLY){if(a.points=a.shape.points.slice(),a.shape.closed&&(a.points[0]!==a.points[a.points.length-2]||a.points[1]!==a.points[a.points.length-1])&&a.points.push(a.points[0],a.points[1]),a.fill&&a.points.length>=6)if(a.points.length<12){s=n.WebGLGraphics.switchMode(r,0);var h=n.WebGLGraphics.buildPoly(a,s);h||(s=n.WebGLGraphics.switchMode(r,1),n.WebGLGraphics.buildComplexPoly(a,s))}else s=n.WebGLGraphics.switchMode(r,1),n.WebGLGraphics.buildComplexPoly(a,s);a.lineWidth>0&&(s=n.WebGLGraphics.switchMode(r,0),n.WebGLGraphics.buildLine(a,s))}else s=n.WebGLGraphics.switchMode(r,0),a.type===n.Graphics.RECT?n.WebGLGraphics.buildRectangle(a,s):a.type===n.Graphics.CIRC||a.type===n.Graphics.ELIP?n.WebGLGraphics.buildCircle(a,s):a.type===n.Graphics.RREC&&n.WebGLGraphics.buildRoundedRectangle(a,s);r.lastIndex++}for(i=0;i<r.data.length;i++)s=r.data[i],s.dirty&&s.upload()},n.WebGLGraphics.switchMode=function(t,e){var r;return t.data.length?(r=t.data[t.data.length-1],(r.mode!==e||1===e)&&(r=n.WebGLGraphics.graphicsDataPool.pop()||new n.WebGLGraphicsData(t.gl),r.mode=e,t.data.push(r))):(r=n.WebGLGraphics.graphicsDataPool.pop()||new n.WebGLGraphicsData(t.gl),r.mode=e,t.data.push(r)),r.dirty=!0,r},n.WebGLGraphics.buildRectangle=function(t,e){var r=t.shape,i=r.x,o=r.y,s=r.width,a=r.height;if(t.fill){var h=n.hex2rgb(t.fillColor),c=t.fillAlpha,u=h[0]*c,f=h[1]*c,d=h[2]*c,l=e.points,p=e.indices,v=l.length/6;l.push(i,o),l.push(u,f,d,c),l.push(i+s,o),l.push(u,f,d,c),l.push(i,o+a),l.push(u,f,d,c),l.push(i+s,o+a),l.push(u,f,d,c),p.push(v,v,v+1,v+2,v+3,v+3)}if(t.lineWidth){var b=t.points;t.points=[i,o,i+s,o,i+s,o+a,i,o+a,i,o],n.WebGLGraphics.buildLine(t,e),t.points=b}},n.WebGLGraphics.buildRoundedRectangle=function(t,e){var r=t.shape,i=r.x,o=r.y,s=r.width,a=r.height,h=r.radius,c=[];if(c.push(i,o+h),c=c.concat(n.WebGLGraphics.quadraticBezierCurve(i,o+a-h,i,o+a,i+h,o+a)),c=c.concat(n.WebGLGraphics.quadraticBezierCurve(i+s-h,o+a,i+s,o+a,i+s,o+a-h)),c=c.concat(n.WebGLGraphics.quadraticBezierCurve(i+s,o+h,i+s,o,i+s-h,o)),c=c.concat(n.WebGLGraphics.quadraticBezierCurve(i+h,o,i,o,i,o+h)),t.fill){var u=n.hex2rgb(t.fillColor),f=t.fillAlpha,d=u[0]*f,l=u[1]*f,p=u[2]*f,v=e.points,b=e.indices,g=v.length/6,y=n.PolyK.Triangulate(c),m=0;for(m=0;m<y.length;m+=3)b.push(y[m]+g),b.push(y[m]+g),b.push(y[m+1]+g),b.push(y[m+2]+g),b.push(y[m+2]+g);for(m=0;m<c.length;m++)v.push(c[m],c[++m],d,l,p,f)}if(t.lineWidth){var w=t.points;t.points=c,n.WebGLGraphics.buildLine(t,e),t.points=w}},n.WebGLGraphics.quadraticBezierCurve=function(t,e,r,n,i,o){function s(t,e,r){var n=e-t;return t+n*r}for(var a,h,c,u,f,d,l=20,p=[],v=0,b=0;l>=b;b++)v=b/l,a=s(t,r,v),h=s(e,n,v),c=s(r,i,v),u=s(n,o,v),f=s(a,c,v),d=s(h,u,v),p.push(f,d);return p},n.WebGLGraphics.buildCircle=function(t,e){var r,i,o=t.shape,s=o.x,a=o.y;t.type===n.Graphics.CIRC?(r=o.radius,i=o.radius):(r=o.width,i=o.height);var h=40,c=2*Math.PI/h,u=0;if(t.fill){var f=n.hex2rgb(t.fillColor),d=t.fillAlpha,l=f[0]*d,p=f[1]*d,v=f[2]*d,b=e.points,g=e.indices,y=b.length/6;for(g.push(y),u=0;h+1>u;u++)b.push(s,a,l,p,v,d),b.push(s+Math.sin(c*u)*r,a+Math.cos(c*u)*i,l,p,v,d),g.push(y++,y++);g.push(y-1)}if(t.lineWidth){var m=t.points;for(t.points=[],u=0;h+1>u;u++)t.points.push(s+Math.sin(c*u)*r,a+Math.cos(c*u)*i);n.WebGLGraphics.buildLine(t,e),t.points=m}},n.WebGLGraphics.buildLine=function(t,e){var r=0,i=t.points;if(0!==i.length){if(t.lineWidth%2)for(r=0;r<i.length;r++)i[r]+=.5;var o=new n.Point(i[0],i[1]),s=new n.Point(i[i.length-2],i[i.length-1]);if(o.x===s.x&&o.y===s.y){i=i.slice(),i.pop(),i.pop(),s=new n.Point(i[i.length-2],i[i.length-1]);var a=s.x+.5*(o.x-s.x),h=s.y+.5*(o.y-s.y);i.unshift(a,h),i.push(a,h)}var c,u,f,d,l,p,v,b,g,y,m,w,x,_,S,T,A,E,C,M,R,k,B,I=e.points,P=e.indices,L=i.length/2,O=i.length,D=I.length/6,j=t.lineWidth/2,F=n.hex2rgb(t.lineColor),U=t.lineAlpha,N=F[0]*U,G=F[1]*U,W=F[2]*U;for(f=i[0],d=i[1],l=i[2],p=i[3],g=-(d-p),y=f-l,B=Math.sqrt(g*g+y*y),g/=B,y/=B,g*=j,y*=j,I.push(f-g,d-y,N,G,W,U),I.push(f+g,d+y,N,G,W,U),r=1;L-1>r;r++)f=i[2*(r-1)],d=i[2*(r-1)+1],l=i[2*r],p=i[2*r+1],v=i[2*(r+1)],b=i[2*(r+1)+1],g=-(d-p),y=f-l,B=Math.sqrt(g*g+y*y),g/=B,y/=B,g*=j,y*=j,m=-(p-b),w=l-v,B=Math.sqrt(m*m+w*w),m/=B,w/=B,m*=j,w*=j,S=-y+d-(-y+p),T=-g+l-(-g+f),A=(-g+f)*(-y+p)-(-g+l)*(-y+d),E=-w+b-(-w+p),C=-m+l-(-m+v),M=(-m+v)*(-w+p)-(-m+l)*(-w+b),R=S*C-E*T,Math.abs(R)<.1?(R+=10.1,I.push(l-g,p-y,N,G,W,U),I.push(l+g,p+y,N,G,W,U)):(c=(T*M-C*A)/R,u=(E*A-S*M)/R,k=(c-l)*(c-l)+(u-p)+(u-p),k>19600?(x=g-m,_=y-w,B=Math.sqrt(x*x+_*_),x/=B,_/=B,x*=j,_*=j,I.push(l-x,p-_),I.push(N,G,W,U),I.push(l+x,p+_),I.push(N,G,W,U),I.push(l-x,p-_),I.push(N,G,W,U),O++):(I.push(c,u),I.push(N,G,W,U),I.push(l-(c-l),p-(u-p)),I.push(N,G,W,U)));for(f=i[2*(L-2)],d=i[2*(L-2)+1],l=i[2*(L-1)],p=i[2*(L-1)+1],g=-(d-p),y=f-l,B=Math.sqrt(g*g+y*y),g/=B,y/=B,g*=j,y*=j,I.push(l-g,p-y),I.push(N,G,W,U),I.push(l+g,p+y),I.push(N,G,W,U),P.push(D),r=0;O>r;r++)P.push(D++);P.push(D-1)}},n.WebGLGraphics.buildComplexPoly=function(t,e){var r=t.points.slice();if(!(r.length<6)){var i=e.indices;e.points=r,e.alpha=t.fillAlpha,e.color=n.hex2rgb(t.fillColor);for(var o,s,a=1/0,h=-1/0,c=1/0,u=-1/0,f=0;f<r.length;f+=2)o=r[f],s=r[f+1],a=a>o?o:a,h=o>h?o:h,c=c>s?s:c,u=s>u?s:u;r.push(a,c,h,c,h,u,a,u);var d=r.length/2;for(f=0;d>f;f++)i.push(f)}},n.WebGLGraphics.buildPoly=function(t,e){var r=t.points;if(!(r.length<6)){var i=e.points,o=e.indices,s=r.length/2,a=n.hex2rgb(t.fillColor),h=t.fillAlpha,c=a[0]*h,u=a[1]*h,f=a[2]*h,d=n.PolyK.Triangulate(r);if(!d)return!1;var l=i.length/6,p=0;for(p=0;p<d.length;p+=3)o.push(d[p]+l),o.push(d[p]+l),o.push(d[p+1]+l),o.push(d[p+2]+l),o.push(d[p+2]+l);for(p=0;s>p;p++)i.push(r[2*p],r[2*p+1],c,u,f,h);return!0}},n.WebGLGraphics.graphicsDataPool=[],n.WebGLGraphicsData=function(t){this.gl=t,this.color=[0,0,0],this.points=[],this.indices=[],this.buffer=t.createBuffer(),this.indexBuffer=t.createBuffer(),this.mode=1,this.alpha=1,this.dirty=!0},n.WebGLGraphicsData.prototype.reset=function(){this.points=[],this.indices=[]},n.WebGLGraphicsData.prototype.upload=function(){var t=this.gl;this.glPoints=new n.Float32Array(this.points),t.bindBuffer(t.ARRAY_BUFFER,this.buffer),t.bufferData(t.ARRAY_BUFFER,this.glPoints,t.STATIC_DRAW),this.glIndicies=new n.Uint16Array(this.indices),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this.indexBuffer),t.bufferData(t.ELEMENT_ARRAY_BUFFER,this.glIndicies,t.STATIC_DRAW),this.dirty=!1},n.glContexts=[],n.instances=[],n.WebGLRenderer=function(t,e,r){if(r)for(var i in n.defaultRenderOptions)"undefined"==typeof r[i]&&(r[i]=n.defaultRenderOptions[i]);else r=n.defaultRenderOptions;n.defaultRenderer||(n.sayHello("webGL"),n.defaultRenderer=this),this.type=n.WEBGL_RENDERER,this.resolution=r.resolution,this.transparent=r.transparent,this.autoResize=r.autoResize||!1,this.preserveDrawingBuffer=r.preserveDrawingBuffer,this.clearBeforeRender=r.clearBeforeRender,this.width=t||800,this.height=e||600,this.view=r.view||document.createElement("canvas"),this.contextLostBound=this.handleContextLost.bind(this),this.contextRestoredBound=this.handleContextRestored.bind(this),this.view.addEventListener("webglcontextlost",this.contextLostBound,!1),this.view.addEventListener("webglcontextrestored",this.contextRestoredBound,!1),this._contextOptions={alpha:this.transparent,antialias:r.antialias,premultipliedAlpha:this.transparent&&"notMultiplied"!==this.transparent,stencil:!0,preserveDrawingBuffer:r.preserveDrawingBuffer},this.projection=new n.Point,this.offset=new n.Point(0,0),this.shaderManager=new n.WebGLShaderManager,this.spriteBatch=new n.WebGLSpriteBatch,this.maskManager=new n.WebGLMaskManager,this.filterManager=new n.WebGLFilterManager,this.stencilManager=new n.WebGLStencilManager,this.blendModeManager=new n.WebGLBlendModeManager,this.renderSession={},this.renderSession.gl=this.gl,this.renderSession.drawCount=0,this.renderSession.shaderManager=this.shaderManager,this.renderSession.maskManager=this.maskManager,this.renderSession.filterManager=this.filterManager,this.renderSession.blendModeManager=this.blendModeManager,this.renderSession.spriteBatch=this.spriteBatch,this.renderSession.stencilManager=this.stencilManager,this.renderSession.renderer=this,this.renderSession.resolution=this.resolution,this.initContext(),this.mapBlendModes()},n.WebGLRenderer.prototype.constructor=n.WebGLRenderer,n.WebGLRenderer.prototype.initContext=function(){var t=this.view.getContext("webgl",this._contextOptions)||this.view.getContext("experimental-webgl",this._contextOptions);if(this.gl=t,!t)throw new Error("This browser does not support webGL. Try using the canvas renderer");this.glContextId=t.id=n.WebGLRenderer.glContextId++,n.glContexts[this.glContextId]=t,n.instances[this.glContextId]=this,t.disable(t.DEPTH_TEST),t.disable(t.CULL_FACE),t.enable(t.BLEND),this.shaderManager.setContext(t),this.spriteBatch.setContext(t),this.maskManager.setContext(t),this.filterManager.setContext(t),this.blendModeManager.setContext(t),this.stencilManager.setContext(t),this.renderSession.gl=this.gl,this.resize(this.width,this.height)},n.WebGLRenderer.prototype.render=function(t){if(!this.contextLost){this.__stage!==t&&(t.interactive&&t.interactionManager.removeEvents(),this.__stage=t),t.updateTransform();var e=this.gl;t._interactive?t._interactiveEventsAdded||(t._interactiveEventsAdded=!0,t.interactionManager.setTarget(this)):t._interactiveEventsAdded&&(t._interactiveEventsAdded=!1,t.interactionManager.setTarget(this)),e.viewport(0,0,this.width,this.height),e.bindFramebuffer(e.FRAMEBUFFER,null),this.clearBeforeRender&&(this.transparent?e.clearColor(0,0,0,0):e.clearColor(t.backgroundColorSplit[0],t.backgroundColorSplit[1],t.backgroundColorSplit[2],1),e.clear(e.COLOR_BUFFER_BIT)),this.renderDisplayObject(t,this.projection)}},n.WebGLRenderer.prototype.renderDisplayObject=function(t,e,r){this.renderSession.blendModeManager.setBlendMode(n.blendModes.NORMAL),this.renderSession.drawCount=0,this.renderSession.flipY=r?-1:1,this.renderSession.projection=e,this.renderSession.offset=this.offset,this.spriteBatch.begin(this.renderSession),this.filterManager.begin(this.renderSession,r),t._renderWebGL(this.renderSession),this.spriteBatch.end()},n.WebGLRenderer.prototype.resize=function(t,e){this.width=t*this.resolution,this.height=e*this.resolution,this.view.width=this.width,this.view.height=this.height,this.autoResize&&(this.view.style.width=this.width/this.resolution+"px",this.view.style.height=this.height/this.resolution+"px"),this.gl.viewport(0,0,this.width,this.height),this.projection.x=this.width/2/this.resolution,this.projection.y=-this.height/2/this.resolution},n.WebGLRenderer.prototype.updateTexture=function(t){if(t.hasLoaded){var e=this.gl;return t._glTextures[e.id]||(t._glTextures[e.id]=e.createTexture()),e.bindTexture(e.TEXTURE_2D,t._glTextures[e.id]),e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,t.premultipliedAlpha),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,t.source),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,t.scaleMode===n.scaleModes.LINEAR?e.LINEAR:e.NEAREST),t.mipmap&&n.isPowerOfTwo(t.width,t.height)?(e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,t.scaleMode===n.scaleModes.LINEAR?e.LINEAR_MIPMAP_LINEAR:e.NEAREST_MIPMAP_NEAREST),e.generateMipmap(e.TEXTURE_2D)):e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,t.scaleMode===n.scaleModes.LINEAR?e.LINEAR:e.NEAREST),t._powerOf2?(e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.REPEAT),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.REPEAT)):(e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE)),t._dirty[e.id]=!1,t._glTextures[e.id]}},n.WebGLRenderer.prototype.handleContextLost=function(t){t.preventDefault(),this.contextLost=!0},n.WebGLRenderer.prototype.handleContextRestored=function(){this.initContext();for(var t in n.TextureCache){var e=n.TextureCache[t].baseTexture;e._glTextures=[]}this.contextLost=!1},n.WebGLRenderer.prototype.destroy=function(){this.view.removeEventListener("webglcontextlost",this.contextLostBound),this.view.removeEventListener("webglcontextrestored",this.contextRestoredBound),n.glContexts[this.glContextId]=null,this.projection=null,this.offset=null,this.shaderManager.destroy(),this.spriteBatch.destroy(),this.maskManager.destroy(),this.filterManager.destroy(),this.shaderManager=null,this.spriteBatch=null,this.maskManager=null,this.filterManager=null,this.gl=null,this.renderSession=null},n.WebGLRenderer.prototype.mapBlendModes=function(){var t=this.gl;n.blendModesWebGL||(n.blendModesWebGL=[],n.blendModesWebGL[n.blendModes.NORMAL]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],n.blendModesWebGL[n.blendModes.ADD]=[t.SRC_ALPHA,t.DST_ALPHA],n.blendModesWebGL[n.blendModes.MULTIPLY]=[t.DST_COLOR,t.ONE_MINUS_SRC_ALPHA],n.blendModesWebGL[n.blendModes.SCREEN]=[t.SRC_ALPHA,t.ONE],n.blendModesWebGL[n.blendModes.OVERLAY]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],n.blendModesWebGL[n.blendModes.DARKEN]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],n.blendModesWebGL[n.blendModes.LIGHTEN]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],n.blendModesWebGL[n.blendModes.COLOR_DODGE]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],n.blendModesWebGL[n.blendModes.COLOR_BURN]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],n.blendModesWebGL[n.blendModes.HARD_LIGHT]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],n.blendModesWebGL[n.blendModes.SOFT_LIGHT]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],n.blendModesWebGL[n.blendModes.DIFFERENCE]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],n.blendModesWebGL[n.blendModes.EXCLUSION]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],n.blendModesWebGL[n.blendModes.HUE]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],n.blendModesWebGL[n.blendModes.SATURATION]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],n.blendModesWebGL[n.blendModes.COLOR]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],n.blendModesWebGL[n.blendModes.LUMINOSITY]=[t.ONE,t.ONE_MINUS_SRC_ALPHA])},n.WebGLRenderer.glContextId=0,n.WebGLBlendModeManager=function(){this.currentBlendMode=99999},n.WebGLBlendModeManager.prototype.constructor=n.WebGLBlendModeManager,n.WebGLBlendModeManager.prototype.setContext=function(t){this.gl=t},n.WebGLBlendModeManager.prototype.setBlendMode=function(t){if(this.currentBlendMode===t)return!1;this.currentBlendMode=t;var e=n.blendModesWebGL[this.currentBlendMode];return this.gl.blendFunc(e[0],e[1]),!0},n.WebGLBlendModeManager.prototype.destroy=function(){this.gl=null},n.WebGLMaskManager=function(){},n.WebGLMaskManager.prototype.constructor=n.WebGLMaskManager,n.WebGLMaskManager.prototype.setContext=function(t){this.gl=t},n.WebGLMaskManager.prototype.pushMask=function(t,e){var r=e.gl;t.dirty&&n.WebGLGraphics.updateGraphics(t,r),t._webGL[r.id].data.length&&e.stencilManager.pushStencil(t,t._webGL[r.id].data[0],e)},n.WebGLMaskManager.prototype.popMask=function(t,e){var r=this.gl;e.stencilManager.popStencil(t,t._webGL[r.id].data[0],e)},n.WebGLMaskManager.prototype.destroy=function(){this.gl=null},n.WebGLStencilManager=function(){this.stencilStack=[],this.reverse=!0,this.count=0},n.WebGLStencilManager.prototype.setContext=function(t){this.gl=t},n.WebGLStencilManager.prototype.pushStencil=function(t,e,r){var n=this.gl;this.bindGraphics(t,e,r),0===this.stencilStack.length&&(n.enable(n.STENCIL_TEST),n.clear(n.STENCIL_BUFFER_BIT),this.reverse=!0,this.count=0),this.stencilStack.push(e);var i=this.count;n.colorMask(!1,!1,!1,!1),n.stencilFunc(n.ALWAYS,0,255),n.stencilOp(n.KEEP,n.KEEP,n.INVERT),1===e.mode?(n.drawElements(n.TRIANGLE_FAN,e.indices.length-4,n.UNSIGNED_SHORT,0),this.reverse?(n.stencilFunc(n.EQUAL,255-i,255),n.stencilOp(n.KEEP,n.KEEP,n.DECR)):(n.stencilFunc(n.EQUAL,i,255),n.stencilOp(n.KEEP,n.KEEP,n.INCR)),n.drawElements(n.TRIANGLE_FAN,4,n.UNSIGNED_SHORT,2*(e.indices.length-4)),this.reverse?n.stencilFunc(n.EQUAL,255-(i+1),255):n.stencilFunc(n.EQUAL,i+1,255),this.reverse=!this.reverse):(this.reverse?(n.stencilFunc(n.EQUAL,i,255),n.stencilOp(n.KEEP,n.KEEP,n.INCR)):(n.stencilFunc(n.EQUAL,255-i,255),n.stencilOp(n.KEEP,n.KEEP,n.DECR)),n.drawElements(n.TRIANGLE_STRIP,e.indices.length,n.UNSIGNED_SHORT,0),this.reverse?n.stencilFunc(n.EQUAL,i+1,255):n.stencilFunc(n.EQUAL,255-(i+1),255)),n.colorMask(!0,!0,!0,!0),n.stencilOp(n.KEEP,n.KEEP,n.KEEP),this.count++},n.WebGLStencilManager.prototype.bindGraphics=function(t,e,r){this._currentGraphics=t;var i,o=this.gl,s=r.projection,a=r.offset;1===e.mode?(i=r.shaderManager.complexPrimitiveShader,r.shaderManager.setShader(i),o.uniform1f(i.flipY,r.flipY),o.uniformMatrix3fv(i.translationMatrix,!1,t.worldTransform.toArray(!0)),o.uniform2f(i.projectionVector,s.x,-s.y),o.uniform2f(i.offsetVector,-a.x,-a.y),o.uniform3fv(i.tintColor,n.hex2rgb(t.tint)),o.uniform3fv(i.color,e.color),o.uniform1f(i.alpha,t.worldAlpha*e.alpha),o.bindBuffer(o.ARRAY_BUFFER,e.buffer),o.vertexAttribPointer(i.aVertexPosition,2,o.FLOAT,!1,8,0),o.bindBuffer(o.ELEMENT_ARRAY_BUFFER,e.indexBuffer)):(i=r.shaderManager.primitiveShader,r.shaderManager.setShader(i),o.uniformMatrix3fv(i.translationMatrix,!1,t.worldTransform.toArray(!0)),o.uniform1f(i.flipY,r.flipY),o.uniform2f(i.projectionVector,s.x,-s.y),o.uniform2f(i.offsetVector,-a.x,-a.y),o.uniform3fv(i.tintColor,n.hex2rgb(t.tint)),o.uniform1f(i.alpha,t.worldAlpha),o.bindBuffer(o.ARRAY_BUFFER,e.buffer),o.vertexAttribPointer(i.aVertexPosition,2,o.FLOAT,!1,24,0),o.vertexAttribPointer(i.colorAttribute,4,o.FLOAT,!1,24,8),o.bindBuffer(o.ELEMENT_ARRAY_BUFFER,e.indexBuffer))
},n.WebGLStencilManager.prototype.popStencil=function(t,e,r){var n=this.gl;if(this.stencilStack.pop(),this.count--,0===this.stencilStack.length)n.disable(n.STENCIL_TEST);else{var i=this.count;this.bindGraphics(t,e,r),n.colorMask(!1,!1,!1,!1),1===e.mode?(this.reverse=!this.reverse,this.reverse?(n.stencilFunc(n.EQUAL,255-(i+1),255),n.stencilOp(n.KEEP,n.KEEP,n.INCR)):(n.stencilFunc(n.EQUAL,i+1,255),n.stencilOp(n.KEEP,n.KEEP,n.DECR)),n.drawElements(n.TRIANGLE_FAN,4,n.UNSIGNED_SHORT,2*(e.indices.length-4)),n.stencilFunc(n.ALWAYS,0,255),n.stencilOp(n.KEEP,n.KEEP,n.INVERT),n.drawElements(n.TRIANGLE_FAN,e.indices.length-4,n.UNSIGNED_SHORT,0),this.reverse?n.stencilFunc(n.EQUAL,i,255):n.stencilFunc(n.EQUAL,255-i,255)):(this.reverse?(n.stencilFunc(n.EQUAL,i+1,255),n.stencilOp(n.KEEP,n.KEEP,n.DECR)):(n.stencilFunc(n.EQUAL,255-(i+1),255),n.stencilOp(n.KEEP,n.KEEP,n.INCR)),n.drawElements(n.TRIANGLE_STRIP,e.indices.length,n.UNSIGNED_SHORT,0),this.reverse?n.stencilFunc(n.EQUAL,i,255):n.stencilFunc(n.EQUAL,255-i,255)),n.colorMask(!0,!0,!0,!0),n.stencilOp(n.KEEP,n.KEEP,n.KEEP)}},n.WebGLStencilManager.prototype.destroy=function(){this.stencilStack=null,this.gl=null},n.WebGLShaderManager=function(){this.maxAttibs=10,this.attribState=[],this.tempAttribState=[];for(var t=0;t<this.maxAttibs;t++)this.attribState[t]=!1;this.stack=[]},n.WebGLShaderManager.prototype.constructor=n.WebGLShaderManager,n.WebGLShaderManager.prototype.setContext=function(t){this.gl=t,this.primitiveShader=new n.PrimitiveShader(t),this.complexPrimitiveShader=new n.ComplexPrimitiveShader(t),this.defaultShader=new n.PixiShader(t),this.fastShader=new n.PixiFastShader(t),this.stripShader=new n.StripShader(t),this.setShader(this.defaultShader)},n.WebGLShaderManager.prototype.setAttribs=function(t){var e;for(e=0;e<this.tempAttribState.length;e++)this.tempAttribState[e]=!1;for(e=0;e<t.length;e++){var r=t[e];this.tempAttribState[r]=!0}var n=this.gl;for(e=0;e<this.attribState.length;e++)this.attribState[e]!==this.tempAttribState[e]&&(this.attribState[e]=this.tempAttribState[e],this.tempAttribState[e]?n.enableVertexAttribArray(e):n.disableVertexAttribArray(e))},n.WebGLShaderManager.prototype.setShader=function(t){return this._currentId===t._UID?!1:(this._currentId=t._UID,this.currentShader=t,this.gl.useProgram(t.program),this.setAttribs(t.attributes),!0)},n.WebGLShaderManager.prototype.destroy=function(){this.attribState=null,this.tempAttribState=null,this.primitiveShader.destroy(),this.complexPrimitiveShader.destroy(),this.defaultShader.destroy(),this.fastShader.destroy(),this.stripShader.destroy(),this.gl=null},n.WebGLSpriteBatch=function(){this.vertSize=5,this.size=2e3;var t=4*this.size*4*this.vertSize,e=6*this.size;this.vertices=new n.ArrayBuffer(t),this.positions=new n.Float32Array(this.vertices),this.colors=new n.Uint32Array(this.vertices),this.indices=new n.Uint16Array(e),this.lastIndexCount=0;for(var r=0,i=0;e>r;r+=6,i+=4)this.indices[r+0]=i+0,this.indices[r+1]=i+1,this.indices[r+2]=i+2,this.indices[r+3]=i+0,this.indices[r+4]=i+2,this.indices[r+5]=i+3;this.drawing=!1,this.currentBatchSize=0,this.currentBaseTexture=null,this.dirty=!0,this.textures=[],this.blendModes=[],this.shaders=[],this.sprites=[],this.defaultShader=new n.AbstractFilter(["precision lowp float;","varying vec2 vTextureCoord;","varying vec4 vColor;","uniform sampler2D uSampler;","void main(void) {","   gl_FragColor = texture2D(uSampler, vTextureCoord) * vColor ;","}"])},n.WebGLSpriteBatch.prototype.setContext=function(t){this.gl=t,this.vertexBuffer=t.createBuffer(),this.indexBuffer=t.createBuffer(),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this.indexBuffer),t.bufferData(t.ELEMENT_ARRAY_BUFFER,this.indices,t.STATIC_DRAW),t.bindBuffer(t.ARRAY_BUFFER,this.vertexBuffer),t.bufferData(t.ARRAY_BUFFER,this.vertices,t.DYNAMIC_DRAW),this.currentBlendMode=99999;var e=new n.PixiShader(t);e.fragmentSrc=this.defaultShader.fragmentSrc,e.uniforms={},e.init(),this.defaultShader.shaders[t.id]=e},n.WebGLSpriteBatch.prototype.begin=function(t){this.renderSession=t,this.shader=this.renderSession.shaderManager.defaultShader,this.start()},n.WebGLSpriteBatch.prototype.end=function(){this.flush()},n.WebGLSpriteBatch.prototype.render=function(t){var e=t.texture;this.currentBatchSize>=this.size&&(this.flush(),this.currentBaseTexture=e.baseTexture);var r=e._uvs;if(r){var n,i,o,s,a=t.anchor.x,h=t.anchor.y;if(e.trim){var c=e.trim;i=c.x-a*c.width,n=i+e.crop.width,s=c.y-h*c.height,o=s+e.crop.height}else n=e.frame.width*(1-a),i=e.frame.width*-a,o=e.frame.height*(1-h),s=e.frame.height*-h;var u=4*this.currentBatchSize*this.vertSize,f=e.baseTexture.resolution,d=t.worldTransform,l=d.a/f,p=d.b/f,v=d.c/f,b=d.d/f,g=d.tx,y=d.ty,m=this.colors,w=this.positions;this.renderSession.roundPixels?(w[u]=l*i+v*s+g|0,w[u+1]=b*s+p*i+y|0,w[u+5]=l*n+v*s+g|0,w[u+6]=b*s+p*n+y|0,w[u+10]=l*n+v*o+g|0,w[u+11]=b*o+p*n+y|0,w[u+15]=l*i+v*o+g|0,w[u+16]=b*o+p*i+y|0):(w[u]=l*i+v*s+g,w[u+1]=b*s+p*i+y,w[u+5]=l*n+v*s+g,w[u+6]=b*s+p*n+y,w[u+10]=l*n+v*o+g,w[u+11]=b*o+p*n+y,w[u+15]=l*i+v*o+g,w[u+16]=b*o+p*i+y),w[u+2]=r.x0,w[u+3]=r.y0,w[u+7]=r.x1,w[u+8]=r.y1,w[u+12]=r.x2,w[u+13]=r.y2,w[u+17]=r.x3,w[u+18]=r.y3;var x=t.tint;m[u+4]=m[u+9]=m[u+14]=m[u+19]=(x>>16)+(65280&x)+((255&x)<<16)+(255*t.worldAlpha<<24),this.sprites[this.currentBatchSize++]=t}},n.WebGLSpriteBatch.prototype.renderTilingSprite=function(t){var e=t.tilingTexture;this.currentBatchSize>=this.size&&(this.flush(),this.currentBaseTexture=e.baseTexture),t._uvs||(t._uvs=new n.TextureUvs);var r=t._uvs;t.tilePosition.x%=e.baseTexture.width*t.tileScaleOffset.x,t.tilePosition.y%=e.baseTexture.height*t.tileScaleOffset.y;var i=t.tilePosition.x/(e.baseTexture.width*t.tileScaleOffset.x),o=t.tilePosition.y/(e.baseTexture.height*t.tileScaleOffset.y),s=t.width/e.baseTexture.width/(t.tileScale.x*t.tileScaleOffset.x),a=t.height/e.baseTexture.height/(t.tileScale.y*t.tileScaleOffset.y);r.x0=0-i,r.y0=0-o,r.x1=1*s-i,r.y1=0-o,r.x2=1*s-i,r.y2=1*a-o,r.x3=0-i,r.y3=1*a-o;var h=t.tint,c=(h>>16)+(65280&h)+((255&h)<<16)+(255*t.alpha<<24),u=this.positions,f=this.colors,d=t.width,l=t.height,p=t.anchor.x,v=t.anchor.y,b=d*(1-p),g=d*-p,y=l*(1-v),m=l*-v,w=4*this.currentBatchSize*this.vertSize,x=e.baseTexture.resolution,_=t.worldTransform,S=_.a/x,T=_.b/x,A=_.c/x,E=_.d/x,C=_.tx,M=_.ty;u[w++]=S*g+A*m+C,u[w++]=E*m+T*g+M,u[w++]=r.x0,u[w++]=r.y0,f[w++]=c,u[w++]=S*b+A*m+C,u[w++]=E*m+T*b+M,u[w++]=r.x1,u[w++]=r.y1,f[w++]=c,u[w++]=S*b+A*y+C,u[w++]=E*y+T*b+M,u[w++]=r.x2,u[w++]=r.y2,f[w++]=c,u[w++]=S*g+A*y+C,u[w++]=E*y+T*g+M,u[w++]=r.x3,u[w++]=r.y3,f[w++]=c,this.sprites[this.currentBatchSize++]=t},n.WebGLSpriteBatch.prototype.flush=function(){if(0!==this.currentBatchSize){var t,e=this.gl;if(this.dirty){this.dirty=!1,e.activeTexture(e.TEXTURE0),e.bindBuffer(e.ARRAY_BUFFER,this.vertexBuffer),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,this.indexBuffer),t=this.defaultShader.shaders[e.id];var r=4*this.vertSize;e.vertexAttribPointer(t.aVertexPosition,2,e.FLOAT,!1,r,0),e.vertexAttribPointer(t.aTextureCoord,2,e.FLOAT,!1,r,8),e.vertexAttribPointer(t.colorAttribute,4,e.UNSIGNED_BYTE,!0,r,16)}if(this.currentBatchSize>.5*this.size)e.bufferSubData(e.ARRAY_BUFFER,0,this.vertices);else{var i=this.positions.subarray(0,4*this.currentBatchSize*this.vertSize);e.bufferSubData(e.ARRAY_BUFFER,0,i)}for(var o,s,a,h,c=0,u=0,f=null,d=this.renderSession.blendModeManager.currentBlendMode,l=null,p=!1,v=!1,b=0,g=this.currentBatchSize;g>b;b++){if(h=this.sprites[b],o=h.texture.baseTexture,s=h.blendMode,a=h.shader||this.defaultShader,p=d!==s,v=l!==a,(f!==o||p||v)&&(this.renderBatch(f,c,u),u=b,c=0,f=o,p&&(d=s,this.renderSession.blendModeManager.setBlendMode(d)),v)){l=a,t=l.shaders[e.id],t||(t=new n.PixiShader(e),t.fragmentSrc=l.fragmentSrc,t.uniforms=l.uniforms,t.init(),l.shaders[e.id]=t),this.renderSession.shaderManager.setShader(t),t.dirty&&t.syncUniforms();var y=this.renderSession.projection;e.uniform2f(t.projectionVector,y.x,y.y);var m=this.renderSession.offset;e.uniform2f(t.offsetVector,m.x,m.y)}c++}this.renderBatch(f,c,u),this.currentBatchSize=0}},n.WebGLSpriteBatch.prototype.renderBatch=function(t,e,r){if(0!==e){var n=this.gl;t._dirty[n.id]?this.renderSession.renderer.updateTexture(t):n.bindTexture(n.TEXTURE_2D,t._glTextures[n.id]),n.drawElements(n.TRIANGLES,6*e,n.UNSIGNED_SHORT,6*r*2),this.renderSession.drawCount++}},n.WebGLSpriteBatch.prototype.stop=function(){this.flush(),this.dirty=!0},n.WebGLSpriteBatch.prototype.start=function(){this.dirty=!0},n.WebGLSpriteBatch.prototype.destroy=function(){this.vertices=null,this.indices=null,this.gl.deleteBuffer(this.vertexBuffer),this.gl.deleteBuffer(this.indexBuffer),this.currentBaseTexture=null,this.gl=null},n.WebGLFastSpriteBatch=function(t){this.vertSize=10,this.maxSize=6e3,this.size=this.maxSize;var e=4*this.size*this.vertSize,r=6*this.maxSize;this.vertices=new n.Float32Array(e),this.indices=new n.Uint16Array(r),this.vertexBuffer=null,this.indexBuffer=null,this.lastIndexCount=0;for(var i=0,o=0;r>i;i+=6,o+=4)this.indices[i+0]=o+0,this.indices[i+1]=o+1,this.indices[i+2]=o+2,this.indices[i+3]=o+0,this.indices[i+4]=o+2,this.indices[i+5]=o+3;this.drawing=!1,this.currentBatchSize=0,this.currentBaseTexture=null,this.currentBlendMode=0,this.renderSession=null,this.shader=null,this.matrix=null,this.setContext(t)},n.WebGLFastSpriteBatch.prototype.constructor=n.WebGLFastSpriteBatch,n.WebGLFastSpriteBatch.prototype.setContext=function(t){this.gl=t,this.vertexBuffer=t.createBuffer(),this.indexBuffer=t.createBuffer(),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this.indexBuffer),t.bufferData(t.ELEMENT_ARRAY_BUFFER,this.indices,t.STATIC_DRAW),t.bindBuffer(t.ARRAY_BUFFER,this.vertexBuffer),t.bufferData(t.ARRAY_BUFFER,this.vertices,t.DYNAMIC_DRAW)},n.WebGLFastSpriteBatch.prototype.begin=function(t,e){this.renderSession=e,this.shader=this.renderSession.shaderManager.fastShader,this.matrix=t.worldTransform.toArray(!0),this.start()},n.WebGLFastSpriteBatch.prototype.end=function(){this.flush()},n.WebGLFastSpriteBatch.prototype.render=function(t){var e=t.children,r=e[0];if(r.texture._uvs){this.currentBaseTexture=r.texture.baseTexture,r.blendMode!==this.renderSession.blendModeManager.currentBlendMode&&(this.flush(),this.renderSession.blendModeManager.setBlendMode(r.blendMode));for(var n=0,i=e.length;i>n;n++)this.renderSprite(e[n]);this.flush()}},n.WebGLFastSpriteBatch.prototype.renderSprite=function(t){if(t.visible&&(t.texture.baseTexture===this.currentBaseTexture||(this.flush(),this.currentBaseTexture=t.texture.baseTexture,t.texture._uvs))){var e,r,n,i,o,s,a,h,c=this.vertices;if(e=t.texture._uvs,r=t.texture.frame.width,n=t.texture.frame.height,t.texture.trim){var u=t.texture.trim;o=u.x-t.anchor.x*u.width,i=o+t.texture.crop.width,a=u.y-t.anchor.y*u.height,s=a+t.texture.crop.height}else i=t.texture.frame.width*(1-t.anchor.x),o=t.texture.frame.width*-t.anchor.x,s=t.texture.frame.height*(1-t.anchor.y),a=t.texture.frame.height*-t.anchor.y;h=4*this.currentBatchSize*this.vertSize,c[h++]=o,c[h++]=a,c[h++]=t.position.x,c[h++]=t.position.y,c[h++]=t.scale.x,c[h++]=t.scale.y,c[h++]=t.rotation,c[h++]=e.x0,c[h++]=e.y1,c[h++]=t.alpha,c[h++]=i,c[h++]=a,c[h++]=t.position.x,c[h++]=t.position.y,c[h++]=t.scale.x,c[h++]=t.scale.y,c[h++]=t.rotation,c[h++]=e.x1,c[h++]=e.y1,c[h++]=t.alpha,c[h++]=i,c[h++]=s,c[h++]=t.position.x,c[h++]=t.position.y,c[h++]=t.scale.x,c[h++]=t.scale.y,c[h++]=t.rotation,c[h++]=e.x2,c[h++]=e.y2,c[h++]=t.alpha,c[h++]=o,c[h++]=s,c[h++]=t.position.x,c[h++]=t.position.y,c[h++]=t.scale.x,c[h++]=t.scale.y,c[h++]=t.rotation,c[h++]=e.x3,c[h++]=e.y3,c[h++]=t.alpha,this.currentBatchSize++,this.currentBatchSize>=this.size&&this.flush()}},n.WebGLFastSpriteBatch.prototype.flush=function(){if(0!==this.currentBatchSize){var t=this.gl;if(this.currentBaseTexture._glTextures[t.id]||this.renderSession.renderer.updateTexture(this.currentBaseTexture,t),t.bindTexture(t.TEXTURE_2D,this.currentBaseTexture._glTextures[t.id]),this.currentBatchSize>.5*this.size)t.bufferSubData(t.ARRAY_BUFFER,0,this.vertices);else{var e=this.vertices.subarray(0,4*this.currentBatchSize*this.vertSize);t.bufferSubData(t.ARRAY_BUFFER,0,e)}t.drawElements(t.TRIANGLES,6*this.currentBatchSize,t.UNSIGNED_SHORT,0),this.currentBatchSize=0,this.renderSession.drawCount++}},n.WebGLFastSpriteBatch.prototype.stop=function(){this.flush()},n.WebGLFastSpriteBatch.prototype.start=function(){var t=this.gl;t.activeTexture(t.TEXTURE0),t.bindBuffer(t.ARRAY_BUFFER,this.vertexBuffer),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this.indexBuffer);var e=this.renderSession.projection;t.uniform2f(this.shader.projectionVector,e.x,e.y),t.uniformMatrix3fv(this.shader.uMatrix,!1,this.matrix);var r=4*this.vertSize;t.vertexAttribPointer(this.shader.aVertexPosition,2,t.FLOAT,!1,r,0),t.vertexAttribPointer(this.shader.aPositionCoord,2,t.FLOAT,!1,r,8),t.vertexAttribPointer(this.shader.aScale,2,t.FLOAT,!1,r,16),t.vertexAttribPointer(this.shader.aRotation,1,t.FLOAT,!1,r,24),t.vertexAttribPointer(this.shader.aTextureCoord,2,t.FLOAT,!1,r,28),t.vertexAttribPointer(this.shader.colorAttribute,1,t.FLOAT,!1,r,36)},n.WebGLFilterManager=function(){this.filterStack=[],this.offsetX=0,this.offsetY=0},n.WebGLFilterManager.prototype.constructor=n.WebGLFilterManager,n.WebGLFilterManager.prototype.setContext=function(t){this.gl=t,this.texturePool=[],this.initShaderBuffers()},n.WebGLFilterManager.prototype.begin=function(t,e){this.renderSession=t,this.defaultShader=t.shaderManager.defaultShader;var r=this.renderSession.projection;this.width=2*r.x,this.height=2*-r.y,this.buffer=e},n.WebGLFilterManager.prototype.pushFilter=function(t){var e=this.gl,r=this.renderSession.projection,i=this.renderSession.offset;t._filterArea=t.target.filterArea||t.target.getBounds(),this.filterStack.push(t);var o=t.filterPasses[0];this.offsetX+=t._filterArea.x,this.offsetY+=t._filterArea.y;var s=this.texturePool.pop();s?s.resize(this.width,this.height):s=new n.FilterTexture(this.gl,this.width,this.height),e.bindTexture(e.TEXTURE_2D,s.texture);var a=t._filterArea,h=o.padding;a.x-=h,a.y-=h,a.width+=2*h,a.height+=2*h,a.x<0&&(a.x=0),a.width>this.width&&(a.width=this.width),a.y<0&&(a.y=0),a.height>this.height&&(a.height=this.height),e.bindFramebuffer(e.FRAMEBUFFER,s.frameBuffer),e.viewport(0,0,a.width,a.height),r.x=a.width/2,r.y=-a.height/2,i.x=-a.x,i.y=-a.y,e.colorMask(!0,!0,!0,!0),e.clearColor(0,0,0,0),e.clear(e.COLOR_BUFFER_BIT),t._glFilterTexture=s},n.WebGLFilterManager.prototype.popFilter=function(){var t=this.gl,e=this.filterStack.pop(),r=e._filterArea,i=e._glFilterTexture,o=this.renderSession.projection,s=this.renderSession.offset;if(e.filterPasses.length>1){t.viewport(0,0,r.width,r.height),t.bindBuffer(t.ARRAY_BUFFER,this.vertexBuffer),this.vertexArray[0]=0,this.vertexArray[1]=r.height,this.vertexArray[2]=r.width,this.vertexArray[3]=r.height,this.vertexArray[4]=0,this.vertexArray[5]=0,this.vertexArray[6]=r.width,this.vertexArray[7]=0,t.bufferSubData(t.ARRAY_BUFFER,0,this.vertexArray),t.bindBuffer(t.ARRAY_BUFFER,this.uvBuffer),this.uvArray[2]=r.width/this.width,this.uvArray[5]=r.height/this.height,this.uvArray[6]=r.width/this.width,this.uvArray[7]=r.height/this.height,t.bufferSubData(t.ARRAY_BUFFER,0,this.uvArray);var a=i,h=this.texturePool.pop();h||(h=new n.FilterTexture(this.gl,this.width,this.height)),h.resize(this.width,this.height),t.bindFramebuffer(t.FRAMEBUFFER,h.frameBuffer),t.clear(t.COLOR_BUFFER_BIT),t.disable(t.BLEND);for(var c=0;c<e.filterPasses.length-1;c++){var u=e.filterPasses[c];t.bindFramebuffer(t.FRAMEBUFFER,h.frameBuffer),t.activeTexture(t.TEXTURE0),t.bindTexture(t.TEXTURE_2D,a.texture),this.applyFilterPass(u,r,r.width,r.height);var f=a;a=h,h=f}t.enable(t.BLEND),i=a,this.texturePool.push(h)}var d=e.filterPasses[e.filterPasses.length-1];this.offsetX-=r.x,this.offsetY-=r.y;var l=this.width,p=this.height,v=0,b=0,g=this.buffer;if(0===this.filterStack.length)t.colorMask(!0,!0,!0,!0);else{var y=this.filterStack[this.filterStack.length-1];r=y._filterArea,l=r.width,p=r.height,v=r.x,b=r.y,g=y._glFilterTexture.frameBuffer}o.x=l/2,o.y=-p/2,s.x=v,s.y=b,r=e._filterArea;var m=r.x-v,w=r.y-b;t.bindBuffer(t.ARRAY_BUFFER,this.vertexBuffer),this.vertexArray[0]=m,this.vertexArray[1]=w+r.height,this.vertexArray[2]=m+r.width,this.vertexArray[3]=w+r.height,this.vertexArray[4]=m,this.vertexArray[5]=w,this.vertexArray[6]=m+r.width,this.vertexArray[7]=w,t.bufferSubData(t.ARRAY_BUFFER,0,this.vertexArray),t.bindBuffer(t.ARRAY_BUFFER,this.uvBuffer),this.uvArray[2]=r.width/this.width,this.uvArray[5]=r.height/this.height,this.uvArray[6]=r.width/this.width,this.uvArray[7]=r.height/this.height,t.bufferSubData(t.ARRAY_BUFFER,0,this.uvArray),t.viewport(0,0,l,p),t.bindFramebuffer(t.FRAMEBUFFER,g),t.activeTexture(t.TEXTURE0),t.bindTexture(t.TEXTURE_2D,i.texture),this.applyFilterPass(d,r,l,p),this.texturePool.push(i),e._glFilterTexture=null},n.WebGLFilterManager.prototype.applyFilterPass=function(t,e,r,i){var o=this.gl,s=t.shaders[o.id];s||(s=new n.PixiShader(o),s.fragmentSrc=t.fragmentSrc,s.uniforms=t.uniforms,s.init(),t.shaders[o.id]=s),this.renderSession.shaderManager.setShader(s),o.uniform2f(s.projectionVector,r/2,-i/2),o.uniform2f(s.offsetVector,0,0),t.uniforms.dimensions&&(t.uniforms.dimensions.value[0]=this.width,t.uniforms.dimensions.value[1]=this.height,t.uniforms.dimensions.value[2]=this.vertexArray[0],t.uniforms.dimensions.value[3]=this.vertexArray[5]),s.syncUniforms(),o.bindBuffer(o.ARRAY_BUFFER,this.vertexBuffer),o.vertexAttribPointer(s.aVertexPosition,2,o.FLOAT,!1,0,0),o.bindBuffer(o.ARRAY_BUFFER,this.uvBuffer),o.vertexAttribPointer(s.aTextureCoord,2,o.FLOAT,!1,0,0),o.bindBuffer(o.ARRAY_BUFFER,this.colorBuffer),o.vertexAttribPointer(s.colorAttribute,2,o.FLOAT,!1,0,0),o.bindBuffer(o.ELEMENT_ARRAY_BUFFER,this.indexBuffer),o.drawElements(o.TRIANGLES,6,o.UNSIGNED_SHORT,0),this.renderSession.drawCount++},n.WebGLFilterManager.prototype.initShaderBuffers=function(){var t=this.gl;this.vertexBuffer=t.createBuffer(),this.uvBuffer=t.createBuffer(),this.colorBuffer=t.createBuffer(),this.indexBuffer=t.createBuffer(),this.vertexArray=new n.Float32Array([0,0,1,0,0,1,1,1]),t.bindBuffer(t.ARRAY_BUFFER,this.vertexBuffer),t.bufferData(t.ARRAY_BUFFER,this.vertexArray,t.STATIC_DRAW),this.uvArray=new n.Float32Array([0,0,1,0,0,1,1,1]),t.bindBuffer(t.ARRAY_BUFFER,this.uvBuffer),t.bufferData(t.ARRAY_BUFFER,this.uvArray,t.STATIC_DRAW),this.colorArray=new n.Float32Array([1,16777215,1,16777215,1,16777215,1,16777215]),t.bindBuffer(t.ARRAY_BUFFER,this.colorBuffer),t.bufferData(t.ARRAY_BUFFER,this.colorArray,t.STATIC_DRAW),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this.indexBuffer),t.bufferData(t.ELEMENT_ARRAY_BUFFER,new Uint16Array([0,1,2,1,3,2]),t.STATIC_DRAW)},n.WebGLFilterManager.prototype.destroy=function(){var t=this.gl;this.filterStack=null,this.offsetX=0,this.offsetY=0;for(var e=0;e<this.texturePool.length;e++)this.texturePool[e].destroy();this.texturePool=null,t.deleteBuffer(this.vertexBuffer),t.deleteBuffer(this.uvBuffer),t.deleteBuffer(this.colorBuffer),t.deleteBuffer(this.indexBuffer)},n.FilterTexture=function(t,e,r,i){this.gl=t,this.frameBuffer=t.createFramebuffer(),this.texture=t.createTexture(),i=i||n.scaleModes.DEFAULT,t.bindTexture(t.TEXTURE_2D,this.texture),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,i===n.scaleModes.LINEAR?t.LINEAR:t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,i===n.scaleModes.LINEAR?t.LINEAR:t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.bindFramebuffer(t.FRAMEBUFFER,this.frameBuffer),t.bindFramebuffer(t.FRAMEBUFFER,this.frameBuffer),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,this.texture,0),this.renderBuffer=t.createRenderbuffer(),t.bindRenderbuffer(t.RENDERBUFFER,this.renderBuffer),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.DEPTH_STENCIL_ATTACHMENT,t.RENDERBUFFER,this.renderBuffer),this.resize(e,r)},n.FilterTexture.prototype.constructor=n.FilterTexture,n.FilterTexture.prototype.clear=function(){var t=this.gl;t.clearColor(0,0,0,0),t.clear(t.COLOR_BUFFER_BIT)},n.FilterTexture.prototype.resize=function(t,e){if(this.width!==t||this.height!==e){this.width=t,this.height=e;var r=this.gl;r.bindTexture(r.TEXTURE_2D,this.texture),r.texImage2D(r.TEXTURE_2D,0,r.RGBA,t,e,0,r.RGBA,r.UNSIGNED_BYTE,null),r.bindRenderbuffer(r.RENDERBUFFER,this.renderBuffer),r.renderbufferStorage(r.RENDERBUFFER,r.DEPTH_STENCIL,t,e)}},n.FilterTexture.prototype.destroy=function(){var t=this.gl;t.deleteFramebuffer(this.frameBuffer),t.deleteTexture(this.texture),this.frameBuffer=null,this.texture=null},n.CanvasBuffer=function(t,e){this.width=t,this.height=e,this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d"),this.canvas.width=t,this.canvas.height=e},n.CanvasBuffer.prototype.constructor=n.CanvasBuffer,n.CanvasBuffer.prototype.clear=function(){this.context.setTransform(1,0,0,1,0,0),this.context.clearRect(0,0,this.width,this.height)},n.CanvasBuffer.prototype.resize=function(t,e){this.width=this.canvas.width=t,this.height=this.canvas.height=e},n.CanvasMaskManager=function(){},n.CanvasMaskManager.prototype.constructor=n.CanvasMaskManager,n.CanvasMaskManager.prototype.pushMask=function(t,e){var r=e.context;r.save();var i=t.alpha,o=t.worldTransform,s=e.resolution;r.setTransform(o.a*s,o.b*s,o.c*s,o.d*s,o.tx*s,o.ty*s),n.CanvasGraphics.renderGraphicsMask(t,r),r.clip(),t.worldAlpha=i},n.CanvasMaskManager.prototype.popMask=function(t){t.context.restore()},n.CanvasTinter=function(){},n.CanvasTinter.getTintedTexture=function(t,e){var r=t.texture;e=n.CanvasTinter.roundColor(e);var i="#"+("00000"+(0|e).toString(16)).substr(-6);if(r.tintCache=r.tintCache||{},r.tintCache[i])return r.tintCache[i];var o=n.CanvasTinter.canvas||document.createElement("canvas");if(n.CanvasTinter.tintMethod(r,e,o),n.CanvasTinter.convertTintToImage){var s=new Image;s.src=o.toDataURL(),r.tintCache[i]=s}else r.tintCache[i]=o,n.CanvasTinter.canvas=null;return o},n.CanvasTinter.tintWithMultiply=function(t,e,r){var n=r.getContext("2d"),i=t.crop;r.width=i.width,r.height=i.height,n.fillStyle="#"+("00000"+(0|e).toString(16)).substr(-6),n.fillRect(0,0,i.width,i.height),n.globalCompositeOperation="multiply",n.drawImage(t.baseTexture.source,i.x,i.y,i.width,i.height,0,0,i.width,i.height),n.globalCompositeOperation="destination-atop",n.drawImage(t.baseTexture.source,i.x,i.y,i.width,i.height,0,0,i.width,i.height)},n.CanvasTinter.tintWithOverlay=function(t,e,r){var n=r.getContext("2d"),i=t.crop;r.width=i.width,r.height=i.height,n.globalCompositeOperation="copy",n.fillStyle="#"+("00000"+(0|e).toString(16)).substr(-6),n.fillRect(0,0,i.width,i.height),n.globalCompositeOperation="destination-atop",n.drawImage(t.baseTexture.source,i.x,i.y,i.width,i.height,0,0,i.width,i.height)},n.CanvasTinter.tintWithPerPixel=function(t,e,r){var i=r.getContext("2d"),o=t.crop;r.width=o.width,r.height=o.height,i.globalCompositeOperation="copy",i.drawImage(t.baseTexture.source,o.x,o.y,o.width,o.height,0,0,o.width,o.height);for(var s=n.hex2rgb(e),a=s[0],h=s[1],c=s[2],u=i.getImageData(0,0,o.width,o.height),f=u.data,d=0;d<f.length;d+=4)f[d+0]*=a,f[d+1]*=h,f[d+2]*=c;i.putImageData(u,0,0)},n.CanvasTinter.roundColor=function(t){var e=n.CanvasTinter.cacheStepsPerColorChannel,r=n.hex2rgb(t);return r[0]=Math.min(255,r[0]/e*e),r[1]=Math.min(255,r[1]/e*e),r[2]=Math.min(255,r[2]/e*e),n.rgb2hex(r)},n.CanvasTinter.cacheStepsPerColorChannel=8,n.CanvasTinter.convertTintToImage=!1,n.CanvasTinter.canUseMultiply=n.canUseNewCanvasBlendModes(),n.CanvasTinter.tintMethod=n.CanvasTinter.canUseMultiply?n.CanvasTinter.tintWithMultiply:n.CanvasTinter.tintWithPerPixel,n.CanvasRenderer=function(t,e,r){if(r)for(var i in n.defaultRenderOptions)"undefined"==typeof r[i]&&(r[i]=n.defaultRenderOptions[i]);else r=n.defaultRenderOptions;n.defaultRenderer||(n.sayHello("Canvas"),n.defaultRenderer=this),this.type=n.CANVAS_RENDERER,this.resolution=r.resolution,this.clearBeforeRender=r.clearBeforeRender,this.transparent=r.transparent,this.autoResize=r.autoResize||!1,this.width=t||800,this.height=e||600,this.width*=this.resolution,this.height*=this.resolution,this.view=r.view||document.createElement("canvas"),this.context=this.view.getContext("2d",{alpha:this.transparent}),this.refresh=!0,this.view.width=this.width*this.resolution,this.view.height=this.height*this.resolution,this.count=0,this.maskManager=new n.CanvasMaskManager,this.renderSession={context:this.context,maskManager:this.maskManager,scaleMode:null,smoothProperty:null,roundPixels:!1},this.mapBlendModes(),this.resize(t,e),"imageSmoothingEnabled"in this.context?this.renderSession.smoothProperty="imageSmoothingEnabled":"webkitImageSmoothingEnabled"in this.context?this.renderSession.smoothProperty="webkitImageSmoothingEnabled":"mozImageSmoothingEnabled"in this.context?this.renderSession.smoothProperty="mozImageSmoothingEnabled":"oImageSmoothingEnabled"in this.context?this.renderSession.smoothProperty="oImageSmoothingEnabled":"msImageSmoothingEnabled"in this.context&&(this.renderSession.smoothProperty="msImageSmoothingEnabled")},n.CanvasRenderer.prototype.constructor=n.CanvasRenderer,n.CanvasRenderer.prototype.render=function(t){t.updateTransform(),this.context.setTransform(1,0,0,1,0,0),this.context.globalAlpha=1,this.renderSession.currentBlendMode=n.blendModes.NORMAL,this.context.globalCompositeOperation=n.blendModesCanvas[n.blendModes.NORMAL],navigator.isCocoonJS&&this.view.screencanvas&&(this.context.fillStyle="black",this.context.clear()),this.clearBeforeRender&&(this.transparent?this.context.clearRect(0,0,this.width,this.height):(this.context.fillStyle=t.backgroundColorString,this.context.fillRect(0,0,this.width,this.height))),this.renderDisplayObject(t),t.interactive&&(t._interactiveEventsAdded||(t._interactiveEventsAdded=!0,t.interactionManager.setTarget(this)))},n.CanvasRenderer.prototype.destroy=function(t){"undefined"==typeof t&&(t=!0),t&&this.view.parent&&this.view.parent.removeChild(this.view),this.view=null,this.context=null,this.maskManager=null,this.renderSession=null},n.CanvasRenderer.prototype.resize=function(t,e){this.width=t*this.resolution,this.height=e*this.resolution,this.view.width=this.width,this.view.height=this.height,this.autoResize&&(this.view.style.width=this.width/this.resolution+"px",this.view.style.height=this.height/this.resolution+"px")},n.CanvasRenderer.prototype.renderDisplayObject=function(t,e){this.renderSession.context=e||this.context,this.renderSession.resolution=this.resolution,t._renderCanvas(this.renderSession)},n.CanvasRenderer.prototype.mapBlendModes=function(){n.blendModesCanvas||(n.blendModesCanvas=[],n.canUseNewCanvasBlendModes()?(n.blendModesCanvas[n.blendModes.NORMAL]="source-over",n.blendModesCanvas[n.blendModes.ADD]="lighter",n.blendModesCanvas[n.blendModes.MULTIPLY]="multiply",n.blendModesCanvas[n.blendModes.SCREEN]="screen",n.blendModesCanvas[n.blendModes.OVERLAY]="overlay",n.blendModesCanvas[n.blendModes.DARKEN]="darken",n.blendModesCanvas[n.blendModes.LIGHTEN]="lighten",n.blendModesCanvas[n.blendModes.COLOR_DODGE]="color-dodge",n.blendModesCanvas[n.blendModes.COLOR_BURN]="color-burn",n.blendModesCanvas[n.blendModes.HARD_LIGHT]="hard-light",n.blendModesCanvas[n.blendModes.SOFT_LIGHT]="soft-light",n.blendModesCanvas[n.blendModes.DIFFERENCE]="difference",n.blendModesCanvas[n.blendModes.EXCLUSION]="exclusion",n.blendModesCanvas[n.blendModes.HUE]="hue",n.blendModesCanvas[n.blendModes.SATURATION]="saturation",n.blendModesCanvas[n.blendModes.COLOR]="color",n.blendModesCanvas[n.blendModes.LUMINOSITY]="luminosity"):(n.blendModesCanvas[n.blendModes.NORMAL]="source-over",n.blendModesCanvas[n.blendModes.ADD]="lighter",n.blendModesCanvas[n.blendModes.MULTIPLY]="source-over",n.blendModesCanvas[n.blendModes.SCREEN]="source-over",n.blendModesCanvas[n.blendModes.OVERLAY]="source-over",n.blendModesCanvas[n.blendModes.DARKEN]="source-over",n.blendModesCanvas[n.blendModes.LIGHTEN]="source-over",n.blendModesCanvas[n.blendModes.COLOR_DODGE]="source-over",n.blendModesCanvas[n.blendModes.COLOR_BURN]="source-over",n.blendModesCanvas[n.blendModes.HARD_LIGHT]="source-over",n.blendModesCanvas[n.blendModes.SOFT_LIGHT]="source-over",n.blendModesCanvas[n.blendModes.DIFFERENCE]="source-over",n.blendModesCanvas[n.blendModes.EXCLUSION]="source-over",n.blendModesCanvas[n.blendModes.HUE]="source-over",n.blendModesCanvas[n.blendModes.SATURATION]="source-over",n.blendModesCanvas[n.blendModes.COLOR]="source-over",n.blendModesCanvas[n.blendModes.LUMINOSITY]="source-over"))},n.CanvasGraphics=function(){},n.CanvasGraphics.renderGraphics=function(t,e){var r=t.worldAlpha;t.dirty&&(this.updateGraphicsTint(t),t.dirty=!1);for(var i=0;i<t.graphicsData.length;i++){var o=t.graphicsData[i],s=o.shape,a=o._fillTint,h=o._lineTint;if(e.lineWidth=o.lineWidth,o.type===n.Graphics.POLY){e.beginPath();var c=s.points;e.moveTo(c[0],c[1]);for(var u=1;u<c.length/2;u++)e.lineTo(c[2*u],c[2*u+1]);s.closed&&e.lineTo(c[0],c[1]),c[0]===c[c.length-2]&&c[1]===c[c.length-1]&&e.closePath(),o.fill&&(e.globalAlpha=o.fillAlpha*r,e.fillStyle="#"+("00000"+(0|a).toString(16)).substr(-6),e.fill()),o.lineWidth&&(e.globalAlpha=o.lineAlpha*r,e.strokeStyle="#"+("00000"+(0|h).toString(16)).substr(-6),e.stroke())}else if(o.type===n.Graphics.RECT)(o.fillColor||0===o.fillColor)&&(e.globalAlpha=o.fillAlpha*r,e.fillStyle="#"+("00000"+(0|a).toString(16)).substr(-6),e.fillRect(s.x,s.y,s.width,s.height)),o.lineWidth&&(e.globalAlpha=o.lineAlpha*r,e.strokeStyle="#"+("00000"+(0|h).toString(16)).substr(-6),e.strokeRect(s.x,s.y,s.width,s.height));else if(o.type===n.Graphics.CIRC)e.beginPath(),e.arc(s.x,s.y,s.radius,0,2*Math.PI),e.closePath(),o.fill&&(e.globalAlpha=o.fillAlpha*r,e.fillStyle="#"+("00000"+(0|a).toString(16)).substr(-6),e.fill()),o.lineWidth&&(e.globalAlpha=o.lineAlpha*r,e.strokeStyle="#"+("00000"+(0|h).toString(16)).substr(-6),e.stroke());else if(o.type===n.Graphics.ELIP){var f=2*s.width,d=2*s.height,l=s.x-f/2,p=s.y-d/2;e.beginPath();var v=.5522848,b=f/2*v,g=d/2*v,y=l+f,m=p+d,w=l+f/2,x=p+d/2;e.moveTo(l,x),e.bezierCurveTo(l,x-g,w-b,p,w,p),e.bezierCurveTo(w+b,p,y,x-g,y,x),e.bezierCurveTo(y,x+g,w+b,m,w,m),e.bezierCurveTo(w-b,m,l,x+g,l,x),e.closePath(),o.fill&&(e.globalAlpha=o.fillAlpha*r,e.fillStyle="#"+("00000"+(0|a).toString(16)).substr(-6),e.fill()),o.lineWidth&&(e.globalAlpha=o.lineAlpha*r,e.strokeStyle="#"+("00000"+(0|h).toString(16)).substr(-6),e.stroke())}else if(o.type===n.Graphics.RREC){var _=s.x,S=s.y,T=s.width,A=s.height,E=s.radius,C=Math.min(T,A)/2|0;E=E>C?C:E,e.beginPath(),e.moveTo(_,S+E),e.lineTo(_,S+A-E),e.quadraticCurveTo(_,S+A,_+E,S+A),e.lineTo(_+T-E,S+A),e.quadraticCurveTo(_+T,S+A,_+T,S+A-E),e.lineTo(_+T,S+E),e.quadraticCurveTo(_+T,S,_+T-E,S),e.lineTo(_+E,S),e.quadraticCurveTo(_,S,_,S+E),e.closePath(),(o.fillColor||0===o.fillColor)&&(e.globalAlpha=o.fillAlpha*r,e.fillStyle="#"+("00000"+(0|a).toString(16)).substr(-6),e.fill()),o.lineWidth&&(e.globalAlpha=o.lineAlpha*r,e.strokeStyle="#"+("00000"+(0|h).toString(16)).substr(-6),e.stroke())}}},n.CanvasGraphics.renderGraphicsMask=function(t,e){var r=t.graphicsData.length;if(0!==r){r>1&&(r=1,window.console.log("Pixi.js warning: masks in canvas can only mask using the first path in the graphics object"));for(var i=0;1>i;i++){var o=t.graphicsData[i],s=o.shape;if(o.type===n.Graphics.POLY){e.beginPath();var a=s.points;e.moveTo(a[0],a[1]);for(var h=1;h<a.length/2;h++)e.lineTo(a[2*h],a[2*h+1]);a[0]===a[a.length-2]&&a[1]===a[a.length-1]&&e.closePath()}else if(o.type===n.Graphics.RECT)e.beginPath(),e.rect(s.x,s.y,s.width,s.height),e.closePath();else if(o.type===n.Graphics.CIRC)e.beginPath(),e.arc(s.x,s.y,s.radius,0,2*Math.PI),e.closePath();else if(o.type===n.Graphics.ELIP){var c=2*s.width,u=2*s.height,f=s.x-c/2,d=s.y-u/2;e.beginPath();var l=.5522848,p=c/2*l,v=u/2*l,b=f+c,g=d+u,y=f+c/2,m=d+u/2;e.moveTo(f,m),e.bezierCurveTo(f,m-v,y-p,d,y,d),e.bezierCurveTo(y+p,d,b,m-v,b,m),e.bezierCurveTo(b,m+v,y+p,g,y,g),e.bezierCurveTo(y-p,g,f,m+v,f,m),e.closePath()}else if(o.type===n.Graphics.RREC){var w=s.points,x=w[0],_=w[1],S=w[2],T=w[3],A=w[4],E=Math.min(S,T)/2|0;A=A>E?E:A,e.beginPath(),e.moveTo(x,_+A),e.lineTo(x,_+T-A),e.quadraticCurveTo(x,_+T,x+A,_+T),e.lineTo(x+S-A,_+T),e.quadraticCurveTo(x+S,_+T,x+S,_+T-A),e.lineTo(x+S,_+A),e.quadraticCurveTo(x+S,_,x+S-A,_),e.lineTo(x+A,_),e.quadraticCurveTo(x,_,x,_+A),e.closePath()
}}}},n.CanvasGraphics.updateGraphicsTint=function(t){if(16777215!==t.tint)for(var e=(t.tint>>16&255)/255,r=(t.tint>>8&255)/255,n=(255&t.tint)/255,i=0;i<t.graphicsData.length;i++){var o=t.graphicsData[i],s=0|o.fillColor,a=0|o.lineColor;o._fillTint=((s>>16&255)/255*e*255<<16)+((s>>8&255)/255*r*255<<8)+(255&s)/255*n*255,o._lineTint=((a>>16&255)/255*e*255<<16)+((a>>8&255)/255*r*255<<8)+(255&a)/255*n*255}},n.Graphics=function(){n.DisplayObjectContainer.call(this),this.renderable=!0,this.fillAlpha=1,this.lineWidth=0,this.lineColor=0,this.graphicsData=[],this.tint=16777215,this.blendMode=n.blendModes.NORMAL,this.currentPath=null,this._webGL=[],this.isMask=!1,this.boundsPadding=0,this._localBounds=new n.Rectangle(0,0,1,1),this.dirty=!0,this.webGLDirty=!1,this.cachedSpriteDirty=!1},n.Graphics.prototype=Object.create(n.DisplayObjectContainer.prototype),n.Graphics.prototype.constructor=n.Graphics,Object.defineProperty(n.Graphics.prototype,"cacheAsBitmap",{get:function(){return this._cacheAsBitmap},set:function(t){this._cacheAsBitmap=t,this._cacheAsBitmap?this._generateCachedSprite():(this.destroyCachedSprite(),this.dirty=!0)}}),n.Graphics.prototype.lineStyle=function(t,e,r){if(this.lineWidth=t||0,this.lineColor=e||0,this.lineAlpha=arguments.length<3?1:r,this.currentPath){if(this.currentPath.shape.points.length)return this.drawShape(new n.Polygon(this.currentPath.shape.points.slice(-2))),this;this.currentPath.lineWidth=this.lineWidth,this.currentPath.lineColor=this.lineColor,this.currentPath.lineAlpha=this.lineAlpha}return this},n.Graphics.prototype.moveTo=function(t,e){return this.drawShape(new n.Polygon([t,e])),this},n.Graphics.prototype.lineTo=function(t,e){return this.currentPath.shape.points.push(t,e),this.dirty=!0,this},n.Graphics.prototype.quadraticCurveTo=function(t,e,r,n){this.currentPath?0===this.currentPath.shape.points.length&&(this.currentPath.shape.points=[0,0]):this.moveTo(0,0);var i,o,s=20,a=this.currentPath.shape.points;0===a.length&&this.moveTo(0,0);for(var h=a[a.length-2],c=a[a.length-1],u=0,f=1;s>=f;f++)u=f/s,i=h+(t-h)*u,o=c+(e-c)*u,a.push(i+(t+(r-t)*u-i)*u,o+(e+(n-e)*u-o)*u);return this.dirty=!0,this},n.Graphics.prototype.bezierCurveTo=function(t,e,r,n,i,o){this.currentPath?0===this.currentPath.shape.points.length&&(this.currentPath.shape.points=[0,0]):this.moveTo(0,0);for(var s,a,h,c,u,f=20,d=this.currentPath.shape.points,l=d[d.length-2],p=d[d.length-1],v=0,b=1;f>=b;b++)v=b/f,s=1-v,a=s*s,h=a*s,c=v*v,u=c*v,d.push(h*l+3*a*v*t+3*s*c*r+u*i,h*p+3*a*v*e+3*s*c*n+u*o);return this.dirty=!0,this},n.Graphics.prototype.arcTo=function(t,e,r,n,i){this.currentPath?0===this.currentPath.shape.points.length&&this.currentPath.shape.points.push(t,e):this.moveTo(t,e);var o=this.currentPath.shape.points,s=o[o.length-2],a=o[o.length-1],h=a-e,c=s-t,u=n-e,f=r-t,d=Math.abs(h*f-c*u);if(1e-8>d||0===i)(o[o.length-2]!==t||o[o.length-1]!==e)&&o.push(t,e);else{var l=h*h+c*c,p=u*u+f*f,v=h*u+c*f,b=i*Math.sqrt(l)/d,g=i*Math.sqrt(p)/d,y=b*v/l,m=g*v/p,w=b*f+g*c,x=b*u+g*h,_=c*(g+y),S=h*(g+y),T=f*(b+m),A=u*(b+m),E=Math.atan2(S-x,_-w),C=Math.atan2(A-x,T-w);this.arc(w+t,x+e,i,E,C,c*u>f*h)}return this.dirty=!0,this},n.Graphics.prototype.arc=function(t,e,r,n,i,o){var s,a=t+Math.cos(n)*r,h=e+Math.sin(n)*r;if(this.currentPath?(s=this.currentPath.shape.points,0===s.length?s.push(a,h):(s[s.length-2]!==a||s[s.length-1]!==h)&&s.push(a,h)):(this.moveTo(a,h),s=this.currentPath.shape.points),n===i)return this;!o&&n>=i?i+=2*Math.PI:o&&i>=n&&(n+=2*Math.PI);var c=o?-1*(n-i):i-n,u=Math.abs(c)/(2*Math.PI)*40;if(0===c)return this;for(var f=c/(2*u),d=2*f,l=Math.cos(f),p=Math.sin(f),v=u-1,b=v%1/v,g=0;v>=g;g++){var y=g+b*g,m=f+n+d*y,w=Math.cos(m),x=-Math.sin(m);s.push((l*w+p*x)*r+t,(l*-x+p*w)*r+e)}return this.dirty=!0,this},n.Graphics.prototype.beginFill=function(t,e){return this.filling=!0,this.fillColor=t||0,this.fillAlpha=void 0===e?1:e,this.currentPath&&this.currentPath.shape.points.length<=2&&(this.currentPath.fill=this.filling,this.currentPath.fillColor=this.fillColor,this.currentPath.fillAlpha=this.fillAlpha),this},n.Graphics.prototype.endFill=function(){return this.filling=!1,this.fillColor=null,this.fillAlpha=1,this},n.Graphics.prototype.drawRect=function(t,e,r,i){return this.drawShape(new n.Rectangle(t,e,r,i)),this},n.Graphics.prototype.drawRoundedRect=function(t,e,r,i,o){return this.drawShape(new n.RoundedRectangle(t,e,r,i,o)),this},n.Graphics.prototype.drawCircle=function(t,e,r){return this.drawShape(new n.Circle(t,e,r)),this},n.Graphics.prototype.drawEllipse=function(t,e,r,i){return this.drawShape(new n.Ellipse(t,e,r,i)),this},n.Graphics.prototype.drawPolygon=function(t){return t instanceof Array||(t=Array.prototype.slice.call(arguments)),this.drawShape(new n.Polygon(t)),this},n.Graphics.prototype.clear=function(){return this.lineWidth=0,this.filling=!1,this.dirty=!0,this.clearDirty=!0,this.graphicsData=[],this},n.Graphics.prototype.generateTexture=function(t,e){t=t||1;var r=this.getBounds(),i=new n.CanvasBuffer(r.width*t,r.height*t),o=n.Texture.fromCanvas(i.canvas,e);return o.baseTexture.resolution=t,i.context.scale(t,t),i.context.translate(-r.x,-r.y),n.CanvasGraphics.renderGraphics(this,i.context),o},n.Graphics.prototype._renderWebGL=function(t){if(this.visible!==!1&&0!==this.alpha&&this.isMask!==!0){if(this._cacheAsBitmap)return(this.dirty||this.cachedSpriteDirty)&&(this._generateCachedSprite(),this.updateCachedSpriteTexture(),this.cachedSpriteDirty=!1,this.dirty=!1),this._cachedSprite.worldAlpha=this.worldAlpha,void n.Sprite.prototype._renderWebGL.call(this._cachedSprite,t);if(t.spriteBatch.stop(),t.blendModeManager.setBlendMode(this.blendMode),this._mask&&t.maskManager.pushMask(this._mask,t),this._filters&&t.filterManager.pushFilter(this._filterBlock),this.blendMode!==t.spriteBatch.currentBlendMode){t.spriteBatch.currentBlendMode=this.blendMode;var e=n.blendModesWebGL[t.spriteBatch.currentBlendMode];t.spriteBatch.gl.blendFunc(e[0],e[1])}if(this.webGLDirty&&(this.dirty=!0,this.webGLDirty=!1),n.WebGLGraphics.renderGraphics(this,t),this.children.length){t.spriteBatch.start();for(var r=0,i=this.children.length;i>r;r++)this.children[r]._renderWebGL(t);t.spriteBatch.stop()}this._filters&&t.filterManager.popFilter(),this._mask&&t.maskManager.popMask(this.mask,t),t.drawCount++,t.spriteBatch.start()}},n.Graphics.prototype._renderCanvas=function(t){if(this.visible!==!1&&0!==this.alpha&&this.isMask!==!0){if(this._cacheAsBitmap)return(this.dirty||this.cachedSpriteDirty)&&(this._generateCachedSprite(),this.updateCachedSpriteTexture(),this.cachedSpriteDirty=!1,this.dirty=!1),this._cachedSprite.alpha=this.alpha,void n.Sprite.prototype._renderCanvas.call(this._cachedSprite,t);var e=t.context,r=this.worldTransform;this.blendMode!==t.currentBlendMode&&(t.currentBlendMode=this.blendMode,e.globalCompositeOperation=n.blendModesCanvas[t.currentBlendMode]),this._mask&&t.maskManager.pushMask(this._mask,t);var i=t.resolution;e.setTransform(r.a*i,r.b*i,r.c*i,r.d*i,r.tx*i,r.ty*i),n.CanvasGraphics.renderGraphics(this,e);for(var o=0,s=this.children.length;s>o;o++)this.children[o]._renderCanvas(t);this._mask&&t.maskManager.popMask(t)}},n.Graphics.prototype.getBounds=function(t){if(this.isMask)return n.EmptyRectangle;this.dirty&&(this.updateLocalBounds(),this.webGLDirty=!0,this.cachedSpriteDirty=!0,this.dirty=!1);var e=this._localBounds,r=e.x,i=e.width+e.x,o=e.y,s=e.height+e.y,a=t||this.worldTransform,h=a.a,c=a.b,u=a.c,f=a.d,d=a.tx,l=a.ty,p=h*i+u*s+d,v=f*s+c*i+l,b=h*r+u*s+d,g=f*s+c*r+l,y=h*r+u*o+d,m=f*o+c*r+l,w=h*i+u*o+d,x=f*o+c*i+l,_=p,S=v,T=p,A=v;return T=T>b?b:T,T=T>y?y:T,T=T>w?w:T,A=A>g?g:A,A=A>m?m:A,A=A>x?x:A,_=b>_?b:_,_=y>_?y:_,_=w>_?w:_,S=g>S?g:S,S=m>S?m:S,S=x>S?x:S,this._bounds.x=T,this._bounds.width=_-T,this._bounds.y=A,this._bounds.height=S-A,this._bounds},n.Graphics.prototype.updateLocalBounds=function(){var t=1/0,e=-1/0,r=1/0,i=-1/0;if(this.graphicsData.length)for(var o,s,a,h,c,u,f=0;f<this.graphicsData.length;f++){var d=this.graphicsData[f],l=d.type,p=d.lineWidth;if(o=d.shape,l===n.Graphics.RECT||l===n.Graphics.RREC)a=o.x-p/2,h=o.y-p/2,c=o.width+p,u=o.height+p,t=t>a?a:t,e=a+c>e?a+c:e,r=r>h?h:r,i=h+u>i?h+u:i;else if(l===n.Graphics.CIRC)a=o.x,h=o.y,c=o.radius+p/2,u=o.radius+p/2,t=t>a-c?a-c:t,e=a+c>e?a+c:e,r=r>h-u?h-u:r,i=h+u>i?h+u:i;else if(l===n.Graphics.ELIP)a=o.x,h=o.y,c=o.width+p/2,u=o.height+p/2,t=t>a-c?a-c:t,e=a+c>e?a+c:e,r=r>h-u?h-u:r,i=h+u>i?h+u:i;else{s=o.points;for(var v=0;v<s.length;v+=2)a=s[v],h=s[v+1],t=t>a-p?a-p:t,e=a+p>e?a+p:e,r=r>h-p?h-p:r,i=h+p>i?h+p:i}}else t=0,e=0,r=0,i=0;var b=this.boundsPadding;this._localBounds.x=t-b,this._localBounds.width=e-t+2*b,this._localBounds.y=r-b,this._localBounds.height=i-r+2*b},n.Graphics.prototype._generateCachedSprite=function(){var t=this.getLocalBounds();if(this._cachedSprite)this._cachedSprite.buffer.resize(t.width,t.height);else{var e=new n.CanvasBuffer(t.width,t.height),r=n.Texture.fromCanvas(e.canvas);this._cachedSprite=new n.Sprite(r),this._cachedSprite.buffer=e,this._cachedSprite.worldTransform=this.worldTransform}this._cachedSprite.anchor.x=-(t.x/t.width),this._cachedSprite.anchor.y=-(t.y/t.height),this._cachedSprite.buffer.context.translate(-t.x,-t.y),this.worldAlpha=1,n.CanvasGraphics.renderGraphics(this,this._cachedSprite.buffer.context),this._cachedSprite.alpha=this.alpha},n.Graphics.prototype.updateCachedSpriteTexture=function(){var t=this._cachedSprite,e=t.texture,r=t.buffer.canvas;e.baseTexture.width=r.width,e.baseTexture.height=r.height,e.crop.width=e.frame.width=r.width,e.crop.height=e.frame.height=r.height,t._width=r.width,t._height=r.height,e.baseTexture.dirty()},n.Graphics.prototype.destroyCachedSprite=function(){this._cachedSprite.texture.destroy(!0),this._cachedSprite=null},n.Graphics.prototype.drawShape=function(t){this.currentPath&&this.currentPath.shape.points.length<=2&&this.graphicsData.pop(),this.currentPath=null;var e=new n.GraphicsData(this.lineWidth,this.lineColor,this.lineAlpha,this.fillColor,this.fillAlpha,this.filling,t);return this.graphicsData.push(e),e.type===n.Graphics.POLY&&(e.shape.closed=this.filling,this.currentPath=e),this.dirty=!0,e},n.GraphicsData=function(t,e,r,n,i,o,s){this.lineWidth=t,this.lineColor=e,this.lineAlpha=r,this._lineTint=e,this.fillColor=n,this.fillAlpha=i,this._fillTint=n,this.fill=o,this.shape=s,this.type=s.type},n.Graphics.POLY=0,n.Graphics.RECT=1,n.Graphics.CIRC=2,n.Graphics.ELIP=3,n.Graphics.RREC=4,n.Polygon.prototype.type=n.Graphics.POLY,n.Rectangle.prototype.type=n.Graphics.RECT,n.Circle.prototype.type=n.Graphics.CIRC,n.Ellipse.prototype.type=n.Graphics.ELIP,n.RoundedRectangle.prototype.type=n.Graphics.RREC,n.Strip=function(t){n.DisplayObjectContainer.call(this),this.texture=t,this.uvs=new n.Float32Array([0,1,1,1,1,0,0,1]),this.vertices=new n.Float32Array([0,0,100,0,100,100,0,100]),this.colors=new n.Float32Array([1,1,1,1]),this.indices=new n.Uint16Array([0,1,2,3]),this.dirty=!0,this.blendMode=n.blendModes.NORMAL,this.canvasPadding=0,this.drawMode=n.Strip.DrawModes.TRIANGLE_STRIP},n.Strip.prototype=Object.create(n.DisplayObjectContainer.prototype),n.Strip.prototype.constructor=n.Strip,n.Strip.prototype._renderWebGL=function(t){!this.visible||this.alpha<=0||(t.spriteBatch.stop(),this._vertexBuffer||this._initWebGL(t),t.shaderManager.setShader(t.shaderManager.stripShader),this._renderStrip(t),t.spriteBatch.start())},n.Strip.prototype._initWebGL=function(t){var e=t.gl;this._vertexBuffer=e.createBuffer(),this._indexBuffer=e.createBuffer(),this._uvBuffer=e.createBuffer(),this._colorBuffer=e.createBuffer(),e.bindBuffer(e.ARRAY_BUFFER,this._vertexBuffer),e.bufferData(e.ARRAY_BUFFER,this.vertices,e.DYNAMIC_DRAW),e.bindBuffer(e.ARRAY_BUFFER,this._uvBuffer),e.bufferData(e.ARRAY_BUFFER,this.uvs,e.STATIC_DRAW),e.bindBuffer(e.ARRAY_BUFFER,this._colorBuffer),e.bufferData(e.ARRAY_BUFFER,this.colors,e.STATIC_DRAW),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,this._indexBuffer),e.bufferData(e.ELEMENT_ARRAY_BUFFER,this.indices,e.STATIC_DRAW)},n.Strip.prototype._renderStrip=function(t){var e=t.gl,r=t.projection,i=t.offset,o=t.shaderManager.stripShader,s=this.drawMode===n.Strip.DrawModes.TRIANGLE_STRIP?e.TRIANGLE_STRIP:e.TRIANGLES;t.blendModeManager.setBlendMode(this.blendMode),e.uniformMatrix3fv(o.translationMatrix,!1,this.worldTransform.toArray(!0)),e.uniform2f(o.projectionVector,r.x,-r.y),e.uniform2f(o.offsetVector,-i.x,-i.y),e.uniform1f(o.alpha,this.worldAlpha),this.dirty?(this.dirty=!1,e.bindBuffer(e.ARRAY_BUFFER,this._vertexBuffer),e.bufferData(e.ARRAY_BUFFER,this.vertices,e.STATIC_DRAW),e.vertexAttribPointer(o.aVertexPosition,2,e.FLOAT,!1,0,0),e.bindBuffer(e.ARRAY_BUFFER,this._uvBuffer),e.bufferData(e.ARRAY_BUFFER,this.uvs,e.STATIC_DRAW),e.vertexAttribPointer(o.aTextureCoord,2,e.FLOAT,!1,0,0),e.activeTexture(e.TEXTURE0),this.texture.baseTexture._dirty[e.id]?t.renderer.updateTexture(this.texture.baseTexture):e.bindTexture(e.TEXTURE_2D,this.texture.baseTexture._glTextures[e.id]),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,this._indexBuffer),e.bufferData(e.ELEMENT_ARRAY_BUFFER,this.indices,e.STATIC_DRAW)):(e.bindBuffer(e.ARRAY_BUFFER,this._vertexBuffer),e.bufferSubData(e.ARRAY_BUFFER,0,this.vertices),e.vertexAttribPointer(o.aVertexPosition,2,e.FLOAT,!1,0,0),e.bindBuffer(e.ARRAY_BUFFER,this._uvBuffer),e.vertexAttribPointer(o.aTextureCoord,2,e.FLOAT,!1,0,0),e.activeTexture(e.TEXTURE0),this.texture.baseTexture._dirty[e.id]?t.renderer.updateTexture(this.texture.baseTexture):e.bindTexture(e.TEXTURE_2D,this.texture.baseTexture._glTextures[e.id]),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,this._indexBuffer)),e.drawElements(s,this.indices.length,e.UNSIGNED_SHORT,0)},n.Strip.prototype._renderCanvas=function(t){var e=t.context,r=this.worldTransform;t.roundPixels?e.setTransform(r.a,r.b,r.c,r.d,0|r.tx,0|r.ty):e.setTransform(r.a,r.b,r.c,r.d,r.tx,r.ty),this.drawMode===n.Strip.DrawModes.TRIANGLE_STRIP?this._renderCanvasTriangleStrip(e):this._renderCanvasTriangles(e)},n.Strip.prototype._renderCanvasTriangleStrip=function(t){var e=this.vertices,r=this.uvs,n=e.length/2;this.count++;for(var i=0;n-2>i;i++){var o=2*i;this._renderCanvasDrawTriangle(t,e,r,o,o+2,o+4)}},n.Strip.prototype._renderCanvasTriangles=function(t){var e=this.vertices,r=this.uvs,n=this.indices,i=n.length;this.count++;for(var o=0;i>o;o+=3){var s=2*n[o],a=2*n[o+1],h=2*n[o+2];this._renderCanvasDrawTriangle(t,e,r,s,a,h)}},n.Strip.prototype._renderCanvasDrawTriangle=function(t,e,r,n,i,o){var s=this.texture.baseTexture.source,a=this.texture.width,h=this.texture.height,c=e[n],u=e[i],f=e[o],d=e[n+1],l=e[i+1],p=e[o+1],v=r[n]*a,b=r[i]*a,g=r[o]*a,y=r[n+1]*h,m=r[i+1]*h,w=r[o+1]*h;if(this.canvasPadding>0){var x=this.canvasPadding/this.worldTransform.a,_=this.canvasPadding/this.worldTransform.d,S=(c+u+f)/3,T=(d+l+p)/3,A=c-S,E=d-T,C=Math.sqrt(A*A+E*E);c=S+A/C*(C+x),d=T+E/C*(C+_),A=u-S,E=l-T,C=Math.sqrt(A*A+E*E),u=S+A/C*(C+x),l=T+E/C*(C+_),A=f-S,E=p-T,C=Math.sqrt(A*A+E*E),f=S+A/C*(C+x),p=T+E/C*(C+_)}t.save(),t.beginPath(),t.moveTo(c,d),t.lineTo(u,l),t.lineTo(f,p),t.closePath(),t.clip();var M=v*m+y*g+b*w-m*g-y*b-v*w,R=c*m+y*f+u*w-m*f-y*u-c*w,k=v*u+c*g+b*f-u*g-c*b-v*f,B=v*m*f+y*u*g+c*b*w-c*m*g-y*b*f-v*u*w,I=d*m+y*p+l*w-m*p-y*l-d*w,P=v*l+d*g+b*p-l*g-d*b-v*p,L=v*m*p+y*l*g+d*b*w-d*m*g-y*b*p-v*l*w;t.transform(R/M,I/M,k/M,P/M,B/M,L/M),t.drawImage(s,0,0),t.restore()},n.Strip.prototype.renderStripFlat=function(t){var e=this.context,r=t.vertices,n=r.length/2;this.count++,e.beginPath();for(var i=1;n-2>i;i++){var o=2*i,s=r[o],a=r[o+2],h=r[o+4],c=r[o+1],u=r[o+3],f=r[o+5];e.moveTo(s,c),e.lineTo(a,u),e.lineTo(h,f)}e.fillStyle="#FF0000",e.fill(),e.closePath()},n.Strip.prototype.onTextureUpdate=function(){this.updateFrame=!0},n.Strip.prototype.getBounds=function(t){for(var e=t||this.worldTransform,r=e.a,i=e.b,o=e.c,s=e.d,a=e.tx,h=e.ty,c=-1/0,u=-1/0,f=1/0,d=1/0,l=this.vertices,p=0,v=l.length;v>p;p+=2){var b=l[p],g=l[p+1],y=r*b+o*g+a,m=s*g+i*b+h;f=f>y?y:f,d=d>m?m:d,c=y>c?y:c,u=m>u?m:u}if(f===-1/0||1/0===u)return n.EmptyRectangle;var w=this._bounds;return w.x=f,w.width=c-f,w.y=d,w.height=u-d,this._currentBounds=w,w},n.Strip.DrawModes={TRIANGLE_STRIP:0,TRIANGLES:1},n.Rope=function(t,e){n.Strip.call(this,t),this.points=e,this.vertices=new n.Float32Array(4*e.length),this.uvs=new n.Float32Array(4*e.length),this.colors=new n.Float32Array(2*e.length),this.indices=new n.Uint16Array(2*e.length),this.refresh()},n.Rope.prototype=Object.create(n.Strip.prototype),n.Rope.prototype.constructor=n.Rope,n.Rope.prototype.refresh=function(){var t=this.points;if(!(t.length<1)){var e=this.uvs,r=t[0],n=this.indices,i=this.colors;this.count-=.2,e[0]=0,e[1]=0,e[2]=0,e[3]=1,i[0]=1,i[1]=1,n[0]=0,n[1]=1;for(var o,s,a,h=t.length,c=1;h>c;c++)o=t[c],s=4*c,a=c/(h-1),c%2?(e[s]=a,e[s+1]=0,e[s+2]=a,e[s+3]=1):(e[s]=a,e[s+1]=0,e[s+2]=a,e[s+3]=1),s=2*c,i[s]=1,i[s+1]=1,s=2*c,n[s]=s,n[s+1]=s+1,r=o}},n.Rope.prototype.updateTransform=function(){var t=this.points;if(!(t.length<1)){var e,r=t[0],i={x:0,y:0};this.count-=.2;for(var o,s,a,h,c,u=this.vertices,f=t.length,d=0;f>d;d++)o=t[d],s=4*d,e=d<t.length-1?t[d+1]:o,i.y=-(e.x-r.x),i.x=e.y-r.y,a=10*(1-d/(f-1)),a>1&&(a=1),h=Math.sqrt(i.x*i.x+i.y*i.y),c=this.texture.height/2,i.x/=h,i.y/=h,i.x*=c,i.y*=c,u[s]=o.x+i.x,u[s+1]=o.y+i.y,u[s+2]=o.x-i.x,u[s+3]=o.y-i.y,r=o;n.DisplayObjectContainer.prototype.updateTransform.call(this)}},n.Rope.prototype.setTexture=function(t){this.texture=t},n.TilingSprite=function(t,e,r){n.Sprite.call(this,t),this._width=e||100,this._height=r||100,this.tileScale=new n.Point(1,1),this.tileScaleOffset=new n.Point(1,1),this.tilePosition=new n.Point(0,0),this.renderable=!0,this.tint=16777215,this.blendMode=n.blendModes.NORMAL},n.TilingSprite.prototype=Object.create(n.Sprite.prototype),n.TilingSprite.prototype.constructor=n.TilingSprite,Object.defineProperty(n.TilingSprite.prototype,"width",{get:function(){return this._width},set:function(t){this._width=t}}),Object.defineProperty(n.TilingSprite.prototype,"height",{get:function(){return this._height},set:function(t){this._height=t}}),n.TilingSprite.prototype.setTexture=function(t){this.texture!==t&&(this.texture=t,this.refreshTexture=!0,this.cachedTint=16777215)},n.TilingSprite.prototype._renderWebGL=function(t){if(this.visible!==!1&&0!==this.alpha){var e,r;for(this._mask&&(t.spriteBatch.stop(),t.maskManager.pushMask(this.mask,t),t.spriteBatch.start()),this._filters&&(t.spriteBatch.flush(),t.filterManager.pushFilter(this._filterBlock)),!this.tilingTexture||this.refreshTexture?(this.generateTilingTexture(!0),this.tilingTexture&&this.tilingTexture.needsUpdate&&(t.renderer.updateTexture(this.tilingTexture.baseTexture),this.tilingTexture.needsUpdate=!1)):t.spriteBatch.renderTilingSprite(this),e=0,r=this.children.length;r>e;e++)this.children[e]._renderWebGL(t);t.spriteBatch.stop(),this._filters&&t.filterManager.popFilter(),this._mask&&t.maskManager.popMask(this._mask,t),t.spriteBatch.start()}},n.TilingSprite.prototype._renderCanvas=function(t){if(this.visible!==!1&&0!==this.alpha){var e=t.context;this._mask&&t.maskManager.pushMask(this._mask,e),e.globalAlpha=this.worldAlpha;var r,i,o=this.worldTransform,s=t.resolution;if(e.setTransform(o.a*s,o.b*s,o.c*s,o.d*s,o.tx*s,o.ty*s),!this.__tilePattern||this.refreshTexture){if(this.generateTilingTexture(!1),!this.tilingTexture)return;this.__tilePattern=e.createPattern(this.tilingTexture.baseTexture.source,"repeat")}this.blendMode!==t.currentBlendMode&&(t.currentBlendMode=this.blendMode,e.globalCompositeOperation=n.blendModesCanvas[t.currentBlendMode]);var a=this.tilePosition,h=this.tileScale;for(a.x%=this.tilingTexture.baseTexture.width,a.y%=this.tilingTexture.baseTexture.height,e.scale(h.x,h.y),e.translate(a.x+this.anchor.x*-this._width,a.y+this.anchor.y*-this._height),e.fillStyle=this.__tilePattern,e.fillRect(-a.x,-a.y,this._width/h.x,this._height/h.y),e.scale(1/h.x,1/h.y),e.translate(-a.x+this.anchor.x*this._width,-a.y+this.anchor.y*this._height),this._mask&&t.maskManager.popMask(t.context),r=0,i=this.children.length;i>r;r++)this.children[r]._renderCanvas(t)}},n.TilingSprite.prototype.getBounds=function(){var t=this._width,e=this._height,r=t*(1-this.anchor.x),n=t*-this.anchor.x,i=e*(1-this.anchor.y),o=e*-this.anchor.y,s=this.worldTransform,a=s.a,h=s.b,c=s.c,u=s.d,f=s.tx,d=s.ty,l=a*n+c*o+f,p=u*o+h*n+d,v=a*r+c*o+f,b=u*o+h*r+d,g=a*r+c*i+f,y=u*i+h*r+d,m=a*n+c*i+f,w=u*i+h*n+d,x=-1/0,_=-1/0,S=1/0,T=1/0;S=S>l?l:S,S=S>v?v:S,S=S>g?g:S,S=S>m?m:S,T=T>p?p:T,T=T>b?b:T,T=T>y?y:T,T=T>w?w:T,x=l>x?l:x,x=v>x?v:x,x=g>x?g:x,x=m>x?m:x,_=p>_?p:_,_=b>_?b:_,_=y>_?y:_,_=w>_?w:_;var A=this._bounds;return A.x=S,A.width=x-S,A.y=T,A.height=_-T,this._currentBounds=A,A},n.TilingSprite.prototype.onTextureUpdate=function(){},n.TilingSprite.prototype.generateTilingTexture=function(t){if(this.texture.baseTexture.hasLoaded){var e,r,i=this.originalTexture||this.texture,o=i.frame,s=o.width!==i.baseTexture.width||o.height!==i.baseTexture.height,a=!1;if(t?(e=n.getNextPowerOfTwo(o.width),r=n.getNextPowerOfTwo(o.height),(o.width!==e||o.height!==r||i.baseTexture.width!==e||i.baseTexture.height||r)&&(a=!0)):s&&(e=o.width,r=o.height,a=!0),a){var h;this.tilingTexture&&this.tilingTexture.isTiling?(h=this.tilingTexture.canvasBuffer,h.resize(e,r),this.tilingTexture.baseTexture.width=e,this.tilingTexture.baseTexture.height=r,this.tilingTexture.needsUpdate=!0):(h=new n.CanvasBuffer(e,r),this.tilingTexture=n.Texture.fromCanvas(h.canvas),this.tilingTexture.canvasBuffer=h,this.tilingTexture.isTiling=!0),h.context.drawImage(i.baseTexture.source,i.crop.x,i.crop.y,i.crop.width,i.crop.height,0,0,e,r),this.tileScaleOffset.x=o.width/e,this.tileScaleOffset.y=o.height/r}else this.tilingTexture&&this.tilingTexture.isTiling&&this.tilingTexture.destroy(!0),this.tileScaleOffset.x=1,this.tileScaleOffset.y=1,this.tilingTexture=i;this.refreshTexture=!1,this.originalTexture=this.texture,this.texture=this.tilingTexture,this.tilingTexture.baseTexture._powerOf2=!0}};var i={radDeg:180/Math.PI,degRad:Math.PI/180,temp:[],Float32Array:"undefined"==typeof Float32Array?Array:Float32Array,Uint16Array:"undefined"==typeof Uint16Array?Array:Uint16Array};i.BoneData=function(t,e){this.name=t,this.parent=e},i.BoneData.prototype={length:0,x:0,y:0,rotation:0,scaleX:1,scaleY:1,inheritScale:!0,inheritRotation:!0,flipX:!1,flipY:!1},i.SlotData=function(t,e){this.name=t,this.boneData=e},i.SlotData.prototype={r:1,g:1,b:1,a:1,attachmentName:null,additiveBlending:!1},i.IkConstraintData=function(t){this.name=t,this.bones=[]},i.IkConstraintData.prototype={target:null,bendDirection:1,mix:1},i.Bone=function(t,e,r){this.data=t,this.skeleton=e,this.parent=r,this.setToSetupPose()},i.Bone.yDown=!1,i.Bone.prototype={x:0,y:0,rotation:0,rotationIK:0,scaleX:1,scaleY:1,flipX:!1,flipY:!1,m00:0,m01:0,worldX:0,m10:0,m11:0,worldY:0,worldRotation:0,worldScaleX:1,worldScaleY:1,worldFlipX:!1,worldFlipY:!1,updateWorldTransform:function(){var t=this.parent;if(t)this.worldX=this.x*t.m00+this.y*t.m01+t.worldX,this.worldY=this.x*t.m10+this.y*t.m11+t.worldY,this.data.inheritScale?(this.worldScaleX=t.worldScaleX*this.scaleX,this.worldScaleY=t.worldScaleY*this.scaleY):(this.worldScaleX=this.scaleX,this.worldScaleY=this.scaleY),this.worldRotation=this.data.inheritRotation?t.worldRotation+this.rotationIK:this.rotationIK,this.worldFlipX=t.worldFlipX!=this.flipX,this.worldFlipY=t.worldFlipY!=this.flipY;else{var e=this.skeleton.flipX,r=this.skeleton.flipY;this.worldX=e?-this.x:this.x,this.worldY=r!=i.Bone.yDown?-this.y:this.y,this.worldScaleX=this.scaleX,this.worldScaleY=this.scaleY,this.worldRotation=this.rotationIK,this.worldFlipX=e!=this.flipX,this.worldFlipY=r!=this.flipY}var n=this.worldRotation*i.degRad,o=Math.cos(n),s=Math.sin(n);this.worldFlipX?(this.m00=-o*this.worldScaleX,this.m01=s*this.worldScaleY):(this.m00=o*this.worldScaleX,this.m01=-s*this.worldScaleY),this.worldFlipY!=i.Bone.yDown?(this.m10=-s*this.worldScaleX,this.m11=-o*this.worldScaleY):(this.m10=s*this.worldScaleX,this.m11=o*this.worldScaleY)},setToSetupPose:function(){var t=this.data;this.x=t.x,this.y=t.y,this.rotation=t.rotation,this.rotationIK=this.rotation,this.scaleX=t.scaleX,this.scaleY=t.scaleY,this.flipX=t.flipX,this.flipY=t.flipY},worldToLocal:function(t){var e=t[0]-this.worldX,r=t[1]-this.worldY,n=this.m00,o=this.m10,s=this.m01,a=this.m11;this.worldFlipX!=(this.worldFlipY!=i.Bone.yDown)&&(n=-n,a=-a);var h=1/(n*a-s*o);t[0]=e*n*h-r*s*h,t[1]=r*a*h-e*o*h},localToWorld:function(t){var e=t[0],r=t[1];t[0]=e*this.m00+r*this.m01+this.worldX,t[1]=e*this.m10+r*this.m11+this.worldY}},i.Slot=function(t,e){this.data=t,this.bone=e,this.setToSetupPose()},i.Slot.prototype={r:1,g:1,b:1,a:1,_attachmentTime:0,attachment:null,attachmentVertices:[],setAttachment:function(t){this.attachment=t,this._attachmentTime=this.bone.skeleton.time,this.attachmentVertices.length=0},setAttachmentTime:function(t){this._attachmentTime=this.bone.skeleton.time-t},getAttachmentTime:function(){return this.bone.skeleton.time-this._attachmentTime},setToSetupPose:function(){var t=this.data;this.r=t.r,this.g=t.g,this.b=t.b,this.a=t.a;for(var e=this.bone.skeleton.data.slots,r=0,n=e.length;n>r;r++)if(e[r]==t){this.setAttachment(t.attachmentName?this.bone.skeleton.getAttachmentBySlotIndex(r,t.attachmentName):null);break}}},i.IkConstraint=function(t,e){this.data=t,this.mix=t.mix,this.bendDirection=t.bendDirection,this.bones=[];for(var r=0,n=t.bones.length;n>r;r++)this.bones.push(e.findBone(t.bones[r].name));this.target=e.findBone(t.target.name)},i.IkConstraint.prototype={apply:function(){var t=this.target,e=this.bones;switch(e.length){case 1:i.IkConstraint.apply1(e[0],t.worldX,t.worldY,this.mix);break;case 2:i.IkConstraint.apply2(e[0],e[1],t.worldX,t.worldY,this.bendDirection,this.mix)}}},i.IkConstraint.apply1=function(t,e,r,n){var o=t.data.inheritRotation&&t.parent?t.parent.worldRotation:0,s=t.rotation,a=Math.atan2(r-t.worldY,e-t.worldX)*i.radDeg-o;t.rotationIK=s+(a-s)*n},i.IkConstraint.apply2=function(t,e,r,n,o,s){var a=e.rotation,h=t.rotation;if(!s)return e.rotationIK=a,void(t.rotationIK=h);var c,u,f=i.temp,d=t.parent;d?(f[0]=r,f[1]=n,d.worldToLocal(f),r=(f[0]-t.x)*d.worldScaleX,n=(f[1]-t.y)*d.worldScaleY):(r-=t.x,n-=t.y),e.parent==t?(c=e.x,u=e.y):(f[0]=e.x,f[1]=e.y,e.parent.localToWorld(f),t.worldToLocal(f),c=f[0],u=f[1]);var l=c*t.worldScaleX,p=u*t.worldScaleY,v=Math.atan2(p,l),b=Math.sqrt(l*l+p*p),g=e.data.length*e.worldScaleX,y=2*b*g;if(1e-4>y)return void(e.rotationIK=a+(Math.atan2(n,r)*i.radDeg-h-a)*s);var m=(r*r+n*n-b*b-g*g)/y;-1>m?m=-1:m>1&&(m=1);var w=Math.acos(m)*o,x=b+g*m,_=g*Math.sin(w),S=Math.atan2(n*x-r*_,r*x+n*_),T=(S-v)*i.radDeg-h;T>180?T-=360:-180>T&&(T+=360),t.rotationIK=h+T*s,T=(w+v)*i.radDeg-a,T>180?T-=360:-180>T&&(T+=360),e.rotationIK=a+(T+t.worldRotation-e.parent.worldRotation)*s},i.Skin=function(t){this.name=t,this.attachments={}},i.Skin.prototype={addAttachment:function(t,e,r){this.attachments[t+":"+e]=r},getAttachment:function(t,e){return this.attachments[t+":"+e]},_attachAll:function(t,e){for(var r in e.attachments){var n=r.indexOf(":"),i=parseInt(r.substring(0,n)),o=r.substring(n+1),s=t.slots[i];if(s.attachment&&s.attachment.name==o){var a=this.getAttachment(i,o);a&&s.setAttachment(a)}}}},i.Animation=function(t,e,r){this.name=t,this.timelines=e,this.duration=r},i.Animation.prototype={apply:function(t,e,r,n,i){n&&0!=this.duration&&(r%=this.duration,e%=this.duration);for(var o=this.timelines,s=0,a=o.length;a>s;s++)o[s].apply(t,e,r,i,1)},mix:function(t,e,r,n,i,o){n&&0!=this.duration&&(r%=this.duration,e%=this.duration);for(var s=this.timelines,a=0,h=s.length;h>a;a++)s[a].apply(t,e,r,i,o)}},i.Animation.binarySearch=function(t,e,r){var n=0,i=Math.floor(t.length/r)-2;if(!i)return r;for(var o=i>>>1;;){if(t[(o+1)*r]<=e?n=o+1:i=o,n==i)return(n+1)*r;o=n+i>>>1}},i.Animation.binarySearch1=function(t,e){var r=0,n=t.length-2;if(!n)return 1;for(var i=n>>>1;;){if(t[i+1]<=e?r=i+1:n=i,r==n)return r+1;i=r+n>>>1}},i.Animation.linearSearch=function(t,e,r){for(var n=0,i=t.length-r;i>=n;n+=r)if(t[n]>e)return n;return-1},i.Curves=function(){this.curves=[]},i.Curves.prototype={setLinear:function(t){this.curves[19*t]=0},setStepped:function(t){this.curves[19*t]=1},setCurve:function(t,e,r,n,i){var o=.1,s=o*o,a=s*o,h=3*o,c=3*s,u=6*s,f=6*a,d=2*-e+n,l=2*-r+i,p=3*(e-n)+1,v=3*(r-i)+1,b=e*h+d*c+p*a,g=r*h+l*c+v*a,y=d*u+p*f,m=l*u+v*f,w=p*f,x=v*f,_=19*t,S=this.curves;S[_++]=2;for(var T=b,A=g,E=_+19-1;E>_;_+=2)S[_]=T,S[_+1]=A,b+=y,g+=m,y+=w,m+=x,T+=b,A+=g},getCurvePercent:function(t,e){e=0>e?0:e>1?1:e;var r=this.curves,n=19*t,i=r[n];if(0===i)return e;if(1==i)return 0;n++;for(var o=0,s=n,a=n+19-1;a>n;n+=2)if(o=r[n],o>=e){var h,c;return n==s?(h=0,c=0):(h=r[n-2],c=r[n-1]),c+(r[n+1]-c)*(e-h)/(o-h)}var u=r[n-1];return u+(1-u)*(e-o)/(1-o)}},i.RotateTimeline=function(t){this.curves=new i.Curves(t),this.frames=[],this.frames.length=2*t},i.RotateTimeline.prototype={boneIndex:0,getFrameCount:function(){return this.frames.length/2},setFrame:function(t,e,r){t*=2,this.frames[t]=e,this.frames[t+1]=r},apply:function(t,e,r,n,o){var s=this.frames;if(!(r<s[0])){var a=t.bones[this.boneIndex];if(r>=s[s.length-2]){for(var h=a.data.rotation+s[s.length-1]-a.rotation;h>180;)h-=360;for(;-180>h;)h+=360;return void(a.rotation+=h*o)}var c=i.Animation.binarySearch(s,r,2),u=s[c-1],f=s[c],d=1-(r-f)/(s[c-2]-f);d=this.curves.getCurvePercent(c/2-1,d);for(var h=s[c+1]-u;h>180;)h-=360;for(;-180>h;)h+=360;for(h=a.data.rotation+(u+h*d)-a.rotation;h>180;)h-=360;for(;-180>h;)h+=360;a.rotation+=h*o}}},i.TranslateTimeline=function(t){this.curves=new i.Curves(t),this.frames=[],this.frames.length=3*t},i.TranslateTimeline.prototype={boneIndex:0,getFrameCount:function(){return this.frames.length/3},setFrame:function(t,e,r,n){t*=3,this.frames[t]=e,this.frames[t+1]=r,this.frames[t+2]=n},apply:function(t,e,r,n,o){var s=this.frames;if(!(r<s[0])){var a=t.bones[this.boneIndex];if(r>=s[s.length-3])return a.x+=(a.data.x+s[s.length-2]-a.x)*o,void(a.y+=(a.data.y+s[s.length-1]-a.y)*o);var h=i.Animation.binarySearch(s,r,3),c=s[h-2],u=s[h-1],f=s[h],d=1-(r-f)/(s[h+-3]-f);d=this.curves.getCurvePercent(h/3-1,d),a.x+=(a.data.x+c+(s[h+1]-c)*d-a.x)*o,a.y+=(a.data.y+u+(s[h+2]-u)*d-a.y)*o}}},i.ScaleTimeline=function(t){this.curves=new i.Curves(t),this.frames=[],this.frames.length=3*t},i.ScaleTimeline.prototype={boneIndex:0,getFrameCount:function(){return this.frames.length/3},setFrame:function(t,e,r,n){t*=3,this.frames[t]=e,this.frames[t+1]=r,this.frames[t+2]=n},apply:function(t,e,r,n,o){var s=this.frames;if(!(r<s[0])){var a=t.bones[this.boneIndex];if(r>=s[s.length-3])return a.scaleX+=(a.data.scaleX*s[s.length-2]-a.scaleX)*o,void(a.scaleY+=(a.data.scaleY*s[s.length-1]-a.scaleY)*o);var h=i.Animation.binarySearch(s,r,3),c=s[h-2],u=s[h-1],f=s[h],d=1-(r-f)/(s[h+-3]-f);d=this.curves.getCurvePercent(h/3-1,d),a.scaleX+=(a.data.scaleX*(c+(s[h+1]-c)*d)-a.scaleX)*o,a.scaleY+=(a.data.scaleY*(u+(s[h+2]-u)*d)-a.scaleY)*o}}},i.ColorTimeline=function(t){this.curves=new i.Curves(t),this.frames=[],this.frames.length=5*t},i.ColorTimeline.prototype={slotIndex:0,getFrameCount:function(){return this.frames.length/5},setFrame:function(t,e,r,n,i,o){t*=5,this.frames[t]=e,this.frames[t+1]=r,this.frames[t+2]=n,this.frames[t+3]=i,this.frames[t+4]=o},apply:function(t,e,r,n,o){var s=this.frames;if(!(r<s[0])){var a,h,c,u;if(r>=s[s.length-5]){var f=s.length-1;a=s[f-3],h=s[f-2],c=s[f-1],u=s[f]}else{var d=i.Animation.binarySearch(s,r,5),l=s[d-4],p=s[d-3],v=s[d-2],b=s[d-1],g=s[d],y=1-(r-g)/(s[d-5]-g);y=this.curves.getCurvePercent(d/5-1,y),a=l+(s[d+1]-l)*y,h=p+(s[d+2]-p)*y,c=v+(s[d+3]-v)*y,u=b+(s[d+4]-b)*y}var m=t.slots[this.slotIndex];1>o?(m.r+=(a-m.r)*o,m.g+=(h-m.g)*o,m.b+=(c-m.b)*o,m.a+=(u-m.a)*o):(m.r=a,m.g=h,m.b=c,m.a=u)}}},i.AttachmentTimeline=function(t){this.curves=new i.Curves(t),this.frames=[],this.frames.length=t,this.attachmentNames=[],this.attachmentNames.length=t},i.AttachmentTimeline.prototype={slotIndex:0,getFrameCount:function(){return this.frames.length},setFrame:function(t,e,r){this.frames[t]=e,this.attachmentNames[t]=r},apply:function(t,e,r){var n=this.frames;if(r<n[0])return void(e>r&&this.apply(t,e,Number.MAX_VALUE,null,0));e>r&&(e=-1);var o=r>=n[n.length-1]?n.length-1:i.Animation.binarySearch1(n,r)-1;if(!(n[o]<e)){var s=this.attachmentNames[o];
t.slots[this.slotIndex].setAttachment(s?t.getAttachmentBySlotIndex(this.slotIndex,s):null)}}},i.EventTimeline=function(t){this.frames=[],this.frames.length=t,this.events=[],this.events.length=t},i.EventTimeline.prototype={getFrameCount:function(){return this.frames.length},setFrame:function(t,e,r){this.frames[t]=e,this.events[t]=r},apply:function(t,e,r,n,o){if(n){var s=this.frames,a=s.length;if(e>r)this.apply(t,e,Number.MAX_VALUE,n,o),e=-1;else if(e>=s[a-1])return;if(!(r<s[0])){var h;if(e<s[0])h=0;else{h=i.Animation.binarySearch1(s,e);for(var c=s[h];h>0&&s[h-1]==c;)h--}for(var u=this.events;a>h&&r>=s[h];h++)n.push(u[h])}}}},i.DrawOrderTimeline=function(t){this.frames=[],this.frames.length=t,this.drawOrders=[],this.drawOrders.length=t},i.DrawOrderTimeline.prototype={getFrameCount:function(){return this.frames.length},setFrame:function(t,e,r){this.frames[t]=e,this.drawOrders[t]=r},apply:function(t,e,r){var n=this.frames;if(!(r<n[0])){var o;o=r>=n[n.length-1]?n.length-1:i.Animation.binarySearch1(n,r)-1;var s=t.drawOrder,a=t.slots,h=this.drawOrders[o];if(h)for(var c=0,u=h.length;u>c;c++)s[c]=t.slots[h[c]];else for(var c=0,u=a.length;u>c;c++)s[c]=a[c]}}},i.FfdTimeline=function(t){this.curves=new i.Curves(t),this.frames=[],this.frames.length=t,this.frameVertices=[],this.frameVertices.length=t},i.FfdTimeline.prototype={slotIndex:0,attachment:0,getFrameCount:function(){return this.frames.length},setFrame:function(t,e,r){this.frames[t]=e,this.frameVertices[t]=r},apply:function(t,e,r,n,o){var s=t.slots[this.slotIndex];if(s.attachment==this.attachment){var a=this.frames;if(!(r<a[0])){var h=this.frameVertices,c=h[0].length,u=s.attachmentVertices;if(u.length!=c&&(o=1),u.length=c,r>=a[a.length-1]){var f=h[a.length-1];if(1>o)for(var d=0;c>d;d++)u[d]+=(f[d]-u[d])*o;else for(var d=0;c>d;d++)u[d]=f[d]}else{var l=i.Animation.binarySearch1(a,r),p=a[l],v=1-(r-p)/(a[l-1]-p);v=this.curves.getCurvePercent(l-1,0>v?0:v>1?1:v);var b=h[l-1],g=h[l];if(1>o)for(var d=0;c>d;d++){var y=b[d];u[d]+=(y+(g[d]-y)*v-u[d])*o}else for(var d=0;c>d;d++){var y=b[d];u[d]=y+(g[d]-y)*v}}}}}},i.IkConstraintTimeline=function(t){this.curves=new i.Curves(t),this.frames=[],this.frames.length=3*t},i.IkConstraintTimeline.prototype={ikConstraintIndex:0,getFrameCount:function(){return this.frames.length/3},setFrame:function(t,e,r,n){t*=3,this.frames[t]=e,this.frames[t+1]=r,this.frames[t+2]=n},apply:function(t,e,r,n,o){var s=this.frames;if(!(r<s[0])){var a=t.ikConstraints[this.ikConstraintIndex];if(r>=s[s.length-3])return a.mix+=(s[s.length-2]-a.mix)*o,void(a.bendDirection=s[s.length-1]);var h=i.Animation.binarySearch(s,r,3),c=s[h+-2],u=s[h],f=1-(r-u)/(s[h+-3]-u);f=this.curves.getCurvePercent(h/3-1,f);var d=c+(s[h+1]-c)*f;a.mix+=(d-a.mix)*o,a.bendDirection=s[h+-1]}}},i.FlipXTimeline=function(t){this.curves=new i.Curves(t),this.frames=[],this.frames.length=2*t},i.FlipXTimeline.prototype={boneIndex:0,getFrameCount:function(){return this.frames.length/2},setFrame:function(t,e,r){t*=2,this.frames[t]=e,this.frames[t+1]=r?1:0},apply:function(t,e,r){var n=this.frames;if(r<n[0])return void(e>r&&this.apply(t,e,Number.MAX_VALUE,null,0));e>r&&(e=-1);var o=(r>=n[n.length-2]?n.length:i.Animation.binarySearch(n,r,2))-2;n[o]<e||(t.bones[boneIndex].flipX=0!=n[o+1])}},i.FlipYTimeline=function(t){this.curves=new i.Curves(t),this.frames=[],this.frames.length=2*t},i.FlipYTimeline.prototype={boneIndex:0,getFrameCount:function(){return this.frames.length/2},setFrame:function(t,e,r){t*=2,this.frames[t]=e,this.frames[t+1]=r?1:0},apply:function(t,e,r){var n=this.frames;if(r<n[0])return void(e>r&&this.apply(t,e,Number.MAX_VALUE,null,0));e>r&&(e=-1);var o=(r>=n[n.length-2]?n.length:i.Animation.binarySearch(n,r,2))-2;n[o]<e||(t.bones[boneIndex].flipY=0!=n[o+1])}},i.SkeletonData=function(){this.bones=[],this.slots=[],this.skins=[],this.events=[],this.animations=[],this.ikConstraints=[]},i.SkeletonData.prototype={name:null,defaultSkin:null,width:0,height:0,version:null,hash:null,findBone:function(t){for(var e=this.bones,r=0,n=e.length;n>r;r++)if(e[r].name==t)return e[r];return null},findBoneIndex:function(t){for(var e=this.bones,r=0,n=e.length;n>r;r++)if(e[r].name==t)return r;return-1},findSlot:function(t){for(var e=this.slots,r=0,n=e.length;n>r;r++)if(e[r].name==t)return slot[r];return null},findSlotIndex:function(t){for(var e=this.slots,r=0,n=e.length;n>r;r++)if(e[r].name==t)return r;return-1},findSkin:function(t){for(var e=this.skins,r=0,n=e.length;n>r;r++)if(e[r].name==t)return e[r];return null},findEvent:function(t){for(var e=this.events,r=0,n=e.length;n>r;r++)if(e[r].name==t)return e[r];return null},findAnimation:function(t){for(var e=this.animations,r=0,n=e.length;n>r;r++)if(e[r].name==t)return e[r];return null},findIkConstraint:function(t){for(var e=this.ikConstraints,r=0,n=e.length;n>r;r++)if(e[r].name==t)return e[r];return null}},i.Skeleton=function(t){this.data=t,this.bones=[];for(var e=0,r=t.bones.length;r>e;e++){var n=t.bones[e],o=n.parent?this.bones[t.bones.indexOf(n.parent)]:null;this.bones.push(new i.Bone(n,this,o))}this.slots=[],this.drawOrder=[];for(var e=0,r=t.slots.length;r>e;e++){var s=t.slots[e],a=this.bones[t.bones.indexOf(s.boneData)],h=new i.Slot(s,a);this.slots.push(h),this.drawOrder.push(h)}this.ikConstraints=[];for(var e=0,r=t.ikConstraints.length;r>e;e++)this.ikConstraints.push(new i.IkConstraint(t.ikConstraints[e],this));this.boneCache=[],this.updateCache()},i.Skeleton.prototype={x:0,y:0,skin:null,r:1,g:1,b:1,a:1,time:0,flipX:!1,flipY:!1,updateCache:function(){var t=this.ikConstraints,e=t.length,r=e+1,n=this.boneCache;n.length>r&&(n.length=r);for(var i=0,o=n.length;o>i;i++)n[i].length=0;for(;n.length<r;)n[n.length]=[];var s=n[0],a=this.bones;t:for(var i=0,o=a.length;o>i;i++){var h=a[i],c=h;do{for(var u=0;e>u;u++)for(var f=t[u],d=f.bones[0],l=f.bones[f.bones.length-1];;){if(c==l){n[u].push(h),n[u+1].push(h);continue t}if(l==d)break;l=l.parent}c=c.parent}while(c);s[s.length]=h}},updateWorldTransform:function(){for(var t=this.bones,e=0,r=t.length;r>e;e++){var n=t[e];n.rotationIK=n.rotation}for(var e=0,i=this.boneCache.length-1;;){for(var o=this.boneCache[e],s=0,a=o.length;a>s;s++)o[s].updateWorldTransform();if(e==i)break;this.ikConstraints[e].apply(),e++}},setToSetupPose:function(){this.setBonesToSetupPose(),this.setSlotsToSetupPose()},setBonesToSetupPose:function(){for(var t=this.bones,e=0,r=t.length;r>e;e++)t[e].setToSetupPose();for(var n=this.ikConstraints,e=0,r=n.length;r>e;e++){var i=n[e];i.bendDirection=i.data.bendDirection,i.mix=i.data.mix}},setSlotsToSetupPose:function(){for(var t=this.slots,e=this.drawOrder,r=0,n=t.length;n>r;r++)e[r]=t[r],t[r].setToSetupPose(r)},getRootBone:function(){return this.bones.length?this.bones[0]:null},findBone:function(t){for(var e=this.bones,r=0,n=e.length;n>r;r++)if(e[r].data.name==t)return e[r];return null},findBoneIndex:function(t){for(var e=this.bones,r=0,n=e.length;n>r;r++)if(e[r].data.name==t)return r;return-1},findSlot:function(t){for(var e=this.slots,r=0,n=e.length;n>r;r++)if(e[r].data.name==t)return e[r];return null},findSlotIndex:function(t){for(var e=this.slots,r=0,n=e.length;n>r;r++)if(e[r].data.name==t)return r;return-1},setSkinByName:function(t){var e=this.data.findSkin(t);if(!e)throw"Skin not found: "+t;this.setSkin(e)},setSkin:function(t){if(t)if(this.skin)t._attachAll(this,this.skin);else for(var e=this.slots,r=0,n=e.length;n>r;r++){var i=e[r],o=i.data.attachmentName;if(o){var s=t.getAttachment(r,o);s&&i.setAttachment(s)}}this.skin=t},getAttachmentBySlotName:function(t,e){return this.getAttachmentBySlotIndex(this.data.findSlotIndex(t),e)},getAttachmentBySlotIndex:function(t,e){if(this.skin){var r=this.skin.getAttachment(t,e);if(r)return r}return this.data.defaultSkin?this.data.defaultSkin.getAttachment(t,e):null},setAttachment:function(t,e){for(var r=this.slots,n=0,i=r.length;i>n;n++){var o=r[n];if(o.data.name==t){var s=null;if(e&&(s=this.getAttachmentBySlotIndex(n,e),!s))throw"Attachment not found: "+e+", for slot: "+t;return void o.setAttachment(s)}}throw"Slot not found: "+t},findIkConstraint:function(t){for(var e=this.ikConstraints,r=0,n=e.length;n>r;r++)if(e[r].data.name==t)return e[r];return null},update:function(t){this.time+=t}},i.EventData=function(t){this.name=t},i.EventData.prototype={intValue:0,floatValue:0,stringValue:null},i.Event=function(t){this.data=t},i.Event.prototype={intValue:0,floatValue:0,stringValue:null},i.AttachmentType={region:0,boundingbox:1,mesh:2,skinnedmesh:3},i.RegionAttachment=function(t){this.name=t,this.offset=[],this.offset.length=8,this.uvs=[],this.uvs.length=8},i.RegionAttachment.prototype={type:i.AttachmentType.region,x:0,y:0,rotation:0,scaleX:1,scaleY:1,width:0,height:0,r:1,g:1,b:1,a:1,path:null,rendererObject:null,regionOffsetX:0,regionOffsetY:0,regionWidth:0,regionHeight:0,regionOriginalWidth:0,regionOriginalHeight:0,setUVs:function(t,e,r,n,i){var o=this.uvs;i?(o[2]=t,o[3]=n,o[4]=t,o[5]=e,o[6]=r,o[7]=e,o[0]=r,o[1]=n):(o[0]=t,o[1]=n,o[2]=t,o[3]=e,o[4]=r,o[5]=e,o[6]=r,o[7]=n)},updateOffset:function(){var t=this.width/this.regionOriginalWidth*this.scaleX,e=this.height/this.regionOriginalHeight*this.scaleY,r=-this.width/2*this.scaleX+this.regionOffsetX*t,n=-this.height/2*this.scaleY+this.regionOffsetY*e,o=r+this.regionWidth*t,s=n+this.regionHeight*e,a=this.rotation*i.degRad,h=Math.cos(a),c=Math.sin(a),u=r*h+this.x,f=r*c,d=n*h+this.y,l=n*c,p=o*h+this.x,v=o*c,b=s*h+this.y,g=s*c,y=this.offset;y[0]=u-l,y[1]=d+f,y[2]=u-g,y[3]=b+f,y[4]=p-g,y[5]=b+v,y[6]=p-l,y[7]=d+v},computeVertices:function(t,e,r,n){t+=r.worldX,e+=r.worldY;var i=r.m00,o=r.m01,s=r.m10,a=r.m11,h=this.offset;n[0]=h[0]*i+h[1]*o+t,n[1]=h[0]*s+h[1]*a+e,n[2]=h[2]*i+h[3]*o+t,n[3]=h[2]*s+h[3]*a+e,n[4]=h[4]*i+h[5]*o+t,n[5]=h[4]*s+h[5]*a+e,n[6]=h[6]*i+h[7]*o+t,n[7]=h[6]*s+h[7]*a+e}},i.MeshAttachment=function(t){this.name=t},i.MeshAttachment.prototype={type:i.AttachmentType.mesh,vertices:null,uvs:null,regionUVs:null,triangles:null,hullLength:0,r:1,g:1,b:1,a:1,path:null,rendererObject:null,regionU:0,regionV:0,regionU2:0,regionV2:0,regionRotate:!1,regionOffsetX:0,regionOffsetY:0,regionWidth:0,regionHeight:0,regionOriginalWidth:0,regionOriginalHeight:0,edges:null,width:0,height:0,updateUVs:function(){var t=this.regionU2-this.regionU,e=this.regionV2-this.regionV,r=this.regionUVs.length;if(this.uvs&&this.uvs.length==r||(this.uvs=new i.Float32Array(r)),this.regionRotate)for(var n=0;r>n;n+=2)this.uvs[n]=this.regionU+this.regionUVs[n+1]*t,this.uvs[n+1]=this.regionV+e-this.regionUVs[n]*e;else for(var n=0;r>n;n+=2)this.uvs[n]=this.regionU+this.regionUVs[n]*t,this.uvs[n+1]=this.regionV+this.regionUVs[n+1]*e},computeWorldVertices:function(t,e,r,n){var i=r.bone;t+=i.worldX,e+=i.worldY;var o=i.m00,s=i.m01,a=i.m10,h=i.m11,c=this.vertices,u=c.length;r.attachmentVertices.length==u&&(c=r.attachmentVertices);for(var f=0;u>f;f+=2){var d=c[f],l=c[f+1];n[f]=d*o+l*s+t,n[f+1]=d*a+l*h+e}}},i.SkinnedMeshAttachment=function(t){this.name=t},i.SkinnedMeshAttachment.prototype={type:i.AttachmentType.skinnedmesh,bones:null,weights:null,uvs:null,regionUVs:null,triangles:null,hullLength:0,r:1,g:1,b:1,a:1,path:null,rendererObject:null,regionU:0,regionV:0,regionU2:0,regionV2:0,regionRotate:!1,regionOffsetX:0,regionOffsetY:0,regionWidth:0,regionHeight:0,regionOriginalWidth:0,regionOriginalHeight:0,edges:null,width:0,height:0,updateUVs:function(){var t=this.regionU2-this.regionU,e=this.regionV2-this.regionV,r=this.regionUVs.length;if(this.uvs&&this.uvs.length==r||(this.uvs=new i.Float32Array(r)),this.regionRotate)for(var n=0;r>n;n+=2)this.uvs[n]=this.regionU+this.regionUVs[n+1]*t,this.uvs[n+1]=this.regionV+e-this.regionUVs[n]*e;else for(var n=0;r>n;n+=2)this.uvs[n]=this.regionU+this.regionUVs[n]*t,this.uvs[n+1]=this.regionV+this.regionUVs[n+1]*e},computeWorldVertices:function(t,e,r,n){var i,o,s,a,h,c,u,f=r.bone.skeleton.bones,d=this.weights,l=this.bones,p=0,v=0,b=0,g=0,y=l.length;if(r.attachmentVertices.length)for(var m=r.attachmentVertices;y>v;p+=2){for(o=0,s=0,i=l[v++]+v;i>v;v++,b+=3,g+=2)a=f[l[v]],h=d[b]+m[g],c=d[b+1]+m[g+1],u=d[b+2],o+=(h*a.m00+c*a.m01+a.worldX)*u,s+=(h*a.m10+c*a.m11+a.worldY)*u;n[p]=o+t,n[p+1]=s+e}else for(;y>v;p+=2){for(o=0,s=0,i=l[v++]+v;i>v;v++,b+=3)a=f[l[v]],h=d[b],c=d[b+1],u=d[b+2],o+=(h*a.m00+c*a.m01+a.worldX)*u,s+=(h*a.m10+c*a.m11+a.worldY)*u;n[p]=o+t,n[p+1]=s+e}}},i.BoundingBoxAttachment=function(t){this.name=t,this.vertices=[]},i.BoundingBoxAttachment.prototype={type:i.AttachmentType.boundingbox,computeWorldVertices:function(t,e,r,n){t+=r.worldX,e+=r.worldY;for(var i=r.m00,o=r.m01,s=r.m10,a=r.m11,h=this.vertices,c=0,u=h.length;u>c;c+=2){var f=h[c],d=h[c+1];n[c]=f*i+d*o+t,n[c+1]=f*s+d*a+e}}},i.AnimationStateData=function(t){this.skeletonData=t,this.animationToMixTime={}},i.AnimationStateData.prototype={defaultMix:0,setMixByName:function(t,e,r){var n=this.skeletonData.findAnimation(t);if(!n)throw"Animation not found: "+t;var i=this.skeletonData.findAnimation(e);if(!i)throw"Animation not found: "+e;this.setMix(n,i,r)},setMix:function(t,e,r){this.animationToMixTime[t.name+":"+e.name]=r},getMix:function(t,e){var r=t.name+":"+e.name;return this.animationToMixTime.hasOwnProperty(r)?this.animationToMixTime[r]:this.defaultMix}},i.TrackEntry=function(){},i.TrackEntry.prototype={next:null,previous:null,animation:null,loop:!1,delay:0,time:0,lastTime:-1,endTime:0,timeScale:1,mixTime:0,mixDuration:0,mix:1,onStart:null,onEnd:null,onComplete:null,onEvent:null},i.AnimationState=function(t){this.data=t,this.tracks=[],this.events=[]},i.AnimationState.prototype={onStart:null,onEnd:null,onComplete:null,onEvent:null,timeScale:1,update:function(t){t*=this.timeScale;for(var e=0;e<this.tracks.length;e++){var r=this.tracks[e];if(r){if(r.time+=t*r.timeScale,r.previous){var n=t*r.previous.timeScale;r.previous.time+=n,r.mixTime+=n}var i=r.next;i?(i.time=r.lastTime-i.delay,i.time>=0&&this.setCurrent(e,i)):!r.loop&&r.lastTime>=r.endTime&&this.clearTrack(e)}}},apply:function(t){for(var e=0;e<this.tracks.length;e++){var r=this.tracks[e];if(r){this.events.length=0;var n=r.time,i=r.lastTime,o=r.endTime,s=r.loop;!s&&n>o&&(n=o);var a=r.previous;if(a){var h=a.time;!a.loop&&h>a.endTime&&(h=a.endTime),a.animation.apply(t,h,h,a.loop,null);var c=r.mixTime/r.mixDuration*r.mix;c>=1&&(c=1,r.previous=null),r.animation.mix(t,r.lastTime,n,s,this.events,c)}else 1==r.mix?r.animation.apply(t,r.lastTime,n,s,this.events):r.animation.mix(t,r.lastTime,n,s,this.events,r.mix);for(var u=0,f=this.events.length;f>u;u++){var d=this.events[u];r.onEvent&&r.onEvent(e,d),this.onEvent&&this.onEvent(e,d)}if(s?i%o>n%o:o>i&&n>=o){var l=Math.floor(n/o);r.onComplete&&r.onComplete(e,l),this.onComplete&&this.onComplete(e,l)}r.lastTime=r.time}}},clearTracks:function(){for(var t=0,e=this.tracks.length;e>t;t++)this.clearTrack(t);this.tracks.length=0},clearTrack:function(t){if(!(t>=this.tracks.length)){var e=this.tracks[t];e&&(e.onEnd&&e.onEnd(t),this.onEnd&&this.onEnd(t),this.tracks[t]=null)}},_expandToIndex:function(t){if(t<this.tracks.length)return this.tracks[t];for(;t>=this.tracks.length;)this.tracks.push(null);return null},setCurrent:function(t,e){var r=this._expandToIndex(t);if(r){var n=r.previous;r.previous=null,r.onEnd&&r.onEnd(t),this.onEnd&&this.onEnd(t),e.mixDuration=this.data.getMix(r.animation,e.animation),e.mixDuration>0&&(e.mixTime=0,e.previous=n&&r.mixTime/r.mixDuration<.5?n:r)}this.tracks[t]=e,e.onStart&&e.onStart(t),this.onStart&&this.onStart(t)},setAnimationByName:function(t,e,r){var n=this.data.skeletonData.findAnimation(e);if(!n)throw"Animation not found: "+e;return this.setAnimation(t,n,r)},setAnimation:function(t,e,r){var n=new i.TrackEntry;return n.animation=e,n.loop=r,n.endTime=e.duration,this.setCurrent(t,n),n},addAnimationByName:function(t,e,r,n){var i=this.data.skeletonData.findAnimation(e);if(!i)throw"Animation not found: "+e;return this.addAnimation(t,i,r,n)},addAnimation:function(t,e,r,n){var o=new i.TrackEntry;o.animation=e,o.loop=r,o.endTime=e.duration;var s=this._expandToIndex(t);if(s){for(;s.next;)s=s.next;s.next=o}else this.tracks[t]=o;return 0>=n&&(s?n+=s.endTime-this.data.getMix(s.animation,e):n=0),o.delay=n,o},getCurrent:function(t){return t>=this.tracks.length?null:this.tracks[t]}},i.SkeletonJson=function(t){this.attachmentLoader=t},i.SkeletonJson.prototype={scale:1,readSkeletonData:function(t,e){var r=new i.SkeletonData;r.name=e;var n=t.skeleton;n&&(r.hash=n.hash,r.version=n.spine,r.width=n.width||0,r.height=n.height||0);for(var o=t.bones,s=0,a=o.length;a>s;s++){var h=o[s],c=null;if(h.parent&&(c=r.findBone(h.parent),!c))throw"Parent bone not found: "+h.parent;var u=new i.BoneData(h.name,c);u.length=(h.length||0)*this.scale,u.x=(h.x||0)*this.scale,u.y=(h.y||0)*this.scale,u.rotation=h.rotation||0,u.scaleX=h.hasOwnProperty("scaleX")?h.scaleX:1,u.scaleY=h.hasOwnProperty("scaleY")?h.scaleY:1,u.inheritScale=h.hasOwnProperty("inheritScale")?h.inheritScale:!0,u.inheritRotation=h.hasOwnProperty("inheritRotation")?h.inheritRotation:!0,r.bones.push(u)}var f=t.ik;if(f)for(var s=0,a=f.length;a>s;s++){for(var d=f[s],l=new i.IkConstraintData(d.name),o=d.bones,p=0,v=o.length;v>p;p++){var b=r.findBone(o[p]);if(!b)throw"IK bone not found: "+o[p];l.bones.push(b)}if(l.target=r.findBone(d.target),!l.target)throw"Target bone not found: "+d.target;l.bendDirection=!d.hasOwnProperty("bendPositive")||d.bendPositive?1:-1,l.mix=d.hasOwnProperty("mix")?d.mix:1,r.ikConstraints.push(l)}for(var g=t.slots,s=0,a=g.length;a>s;s++){var y=g[s],u=r.findBone(y.bone);if(!u)throw"Slot bone not found: "+y.bone;var m=new i.SlotData(y.name,u),w=y.color;w&&(m.r=this.toColor(w,0),m.g=this.toColor(w,1),m.b=this.toColor(w,2),m.a=this.toColor(w,3)),m.attachmentName=y.attachment,m.additiveBlending=y.additive&&"true"==y.additive,r.slots.push(m)}var x=t.skins;for(var _ in x)if(x.hasOwnProperty(_)){var S=x[_],T=new i.Skin(_);for(var A in S)if(S.hasOwnProperty(A)){var E=r.findSlotIndex(A),C=S[A];for(var M in C)if(C.hasOwnProperty(M)){var R=this.readAttachment(T,M,C[M]);R&&T.addAttachment(E,M,R)}}r.skins.push(T),"default"==T.name&&(r.defaultSkin=T)}var k=t.events;for(var B in k)if(k.hasOwnProperty(B)){var I=k[B],P=new i.EventData(B);P.intValue=I.int||0,P.floatValue=I.float||0,P.stringValue=I.string||null,r.events.push(P)}var L=t.animations;for(var O in L)L.hasOwnProperty(O)&&this.readAnimation(O,L[O],r);return r},readAttachment:function(t,e,r){e=r.name||e;var n=i.AttachmentType[r.type||"region"],o=r.path||e,s=this.scale;if(n==i.AttachmentType.region){var a=this.attachmentLoader.newRegionAttachment(t,e,o);if(!a)return null;a.path=o,a.x=(r.x||0)*s,a.y=(r.y||0)*s,a.scaleX=r.hasOwnProperty("scaleX")?r.scaleX:1,a.scaleY=r.hasOwnProperty("scaleY")?r.scaleY:1,a.rotation=r.rotation||0,a.width=(r.width||0)*s,a.height=(r.height||0)*s;var h=r.color;return h&&(a.r=this.toColor(h,0),a.g=this.toColor(h,1),a.b=this.toColor(h,2),a.a=this.toColor(h,3)),a.updateOffset(),a}if(n==i.AttachmentType.mesh){var c=this.attachmentLoader.newMeshAttachment(t,e,o);return c?(c.path=o,c.vertices=this.getFloatArray(r,"vertices",s),c.triangles=this.getIntArray(r,"triangles"),c.regionUVs=this.getFloatArray(r,"uvs",1),c.updateUVs(),h=r.color,h&&(c.r=this.toColor(h,0),c.g=this.toColor(h,1),c.b=this.toColor(h,2),c.a=this.toColor(h,3)),c.hullLength=2*(r.hull||0),r.edges&&(c.edges=this.getIntArray(r,"edges")),c.width=(r.width||0)*s,c.height=(r.height||0)*s,c):null}if(n==i.AttachmentType.skinnedmesh){var c=this.attachmentLoader.newSkinnedMeshAttachment(t,e,o);if(!c)return null;c.path=o;for(var u=this.getFloatArray(r,"uvs",1),f=this.getFloatArray(r,"vertices",1),d=[],l=[],p=0,v=f.length;v>p;){var b=0|f[p++];l[l.length]=b;for(var g=p+4*b;g>p;)l[l.length]=f[p],d[d.length]=f[p+1]*s,d[d.length]=f[p+2]*s,d[d.length]=f[p+3],p+=4}return c.bones=l,c.weights=d,c.triangles=this.getIntArray(r,"triangles"),c.regionUVs=u,c.updateUVs(),h=r.color,h&&(c.r=this.toColor(h,0),c.g=this.toColor(h,1),c.b=this.toColor(h,2),c.a=this.toColor(h,3)),c.hullLength=2*(r.hull||0),r.edges&&(c.edges=this.getIntArray(r,"edges")),c.width=(r.width||0)*s,c.height=(r.height||0)*s,c}if(n==i.AttachmentType.boundingbox){for(var y=this.attachmentLoader.newBoundingBoxAttachment(t,e),f=r.vertices,p=0,v=f.length;v>p;p++)y.vertices.push(f[p]*s);return y}throw"Unknown attachment type: "+n},readAnimation:function(t,e,r){var n=[],o=0,s=e.slots;for(var a in s)if(s.hasOwnProperty(a)){var h=s[a],c=r.findSlotIndex(a);for(var u in h)if(h.hasOwnProperty(u)){var f=h[u];if("color"==u){var d=new i.ColorTimeline(f.length);d.slotIndex=c;for(var l=0,p=0,v=f.length;v>p;p++){var b=f[p],g=b.color,y=this.toColor(g,0),m=this.toColor(g,1),w=this.toColor(g,2),x=this.toColor(g,3);d.setFrame(l,b.time,y,m,w,x),this.readCurve(d,l,b),l++}n.push(d),o=Math.max(o,d.frames[5*d.getFrameCount()-5])}else{if("attachment"!=u)throw"Invalid timeline type for a slot: "+u+" ("+a+")";var d=new i.AttachmentTimeline(f.length);d.slotIndex=c;for(var l=0,p=0,v=f.length;v>p;p++){var b=f[p];d.setFrame(l++,b.time,b.name)}n.push(d),o=Math.max(o,d.frames[d.getFrameCount()-1])}}}var _=e.bones;for(var S in _)if(_.hasOwnProperty(S)){var T=r.findBoneIndex(S);if(-1==T)throw"Bone not found: "+S;var A=_[S];for(var u in A)if(A.hasOwnProperty(u)){var f=A[u];if("rotate"==u){var d=new i.RotateTimeline(f.length);d.boneIndex=T;for(var l=0,p=0,v=f.length;v>p;p++){var b=f[p];d.setFrame(l,b.time,b.angle),this.readCurve(d,l,b),l++}n.push(d),o=Math.max(o,d.frames[2*d.getFrameCount()-2])}else if("translate"==u||"scale"==u){var d,E=1;"scale"==u?d=new i.ScaleTimeline(f.length):(d=new i.TranslateTimeline(f.length),E=this.scale),d.boneIndex=T;for(var l=0,p=0,v=f.length;v>p;p++){var b=f[p],C=(b.x||0)*E,M=(b.y||0)*E;d.setFrame(l,b.time,C,M),this.readCurve(d,l,b),l++}n.push(d),o=Math.max(o,d.frames[3*d.getFrameCount()-3])}else{if("flipX"!=u&&"flipY"!=u)throw"Invalid timeline type for a bone: "+u+" ("+S+")";var C="flipX"==u,d=C?new i.FlipXTimeline(f.length):new i.FlipYTimeline(f.length);d.boneIndex=T;for(var R=C?"x":"y",l=0,p=0,v=f.length;v>p;p++){var b=f[p];d.setFrame(l,b.time,b[R]||!1),l++}n.push(d),o=Math.max(o,d.frames[2*d.getFrameCount()-2])}}}var k=e.ik;for(var B in k)if(k.hasOwnProperty(B)){var I=r.findIkConstraint(B),f=k[B],d=new i.IkConstraintTimeline(f.length);d.ikConstraintIndex=r.ikConstraints.indexOf(I);for(var l=0,p=0,v=f.length;v>p;p++){var b=f[p],P=b.hasOwnProperty("mix")?b.mix:1,L=!b.hasOwnProperty("bendPositive")||b.bendPositive?1:-1;d.setFrame(l,b.time,P,L),this.readCurve(d,l,b),l++}n.push(d),o=Math.max(o,d.frames[3*d.frameCount-3])}var O=e.ffd;for(var D in O){var j=r.findSkin(D),h=O[D];for(a in h){var c=r.findSlotIndex(a),F=h[a];for(var U in F){var f=F[U],d=new i.FfdTimeline(f.length),N=j.getAttachment(c,U);if(!N)throw"FFD attachment not found: "+U;d.slotIndex=c,d.attachment=N;var G,W=N.type==i.AttachmentType.mesh;G=W?N.vertices.length:N.weights.length/3*2;for(var l=0,p=0,v=f.length;v>p;p++){var z,b=f[p];if(b.vertices){var q=b.vertices,z=[];z.length=G;var Y=b.offset||0,V=q.length;if(1==this.scale)for(var H=0;V>H;H++)z[H+Y]=q[H];else for(var H=0;V>H;H++)z[H+Y]=q[H]*this.scale;if(W)for(var X=N.vertices,H=0,V=z.length;V>H;H++)z[H]+=X[H]}else W?z=N.vertices:(z=[],z.length=G);d.setFrame(l,b.time,z),this.readCurve(d,l,b),l++}n[n.length]=d,o=Math.max(o,d.frames[d.frameCount-1])}}}var K=e.drawOrder;if(K||(K=e.draworder),K){for(var d=new i.DrawOrderTimeline(K.length),J=r.slots.length,l=0,p=0,v=K.length;v>p;p++){var $=K[p],Q=null;if($.offsets){Q=[],Q.length=J;for(var H=J-1;H>=0;H--)Q[H]=-1;var Z=$.offsets,te=[];te.length=J-Z.length;for(var ee=0,re=0,H=0,V=Z.length;V>H;H++){var ne=Z[H],c=r.findSlotIndex(ne.slot);if(-1==c)throw"Slot not found: "+ne.slot;for(;ee!=c;)te[re++]=ee++;Q[ee+ne.offset]=ee++}for(;J>ee;)te[re++]=ee++;for(var H=J-1;H>=0;H--)-1==Q[H]&&(Q[H]=te[--re])}d.setFrame(l++,$.time,Q)}n.push(d),o=Math.max(o,d.frames[d.getFrameCount()-1])}var ie=e.events;if(ie){for(var d=new i.EventTimeline(ie.length),l=0,p=0,v=ie.length;v>p;p++){var oe=ie[p],se=r.findEvent(oe.name);if(!se)throw"Event not found: "+oe.name;var ae=new i.Event(se);ae.intValue=oe.hasOwnProperty("int")?oe.int:se.intValue,ae.floatValue=oe.hasOwnProperty("float")?oe.float:se.floatValue,ae.stringValue=oe.hasOwnProperty("string")?oe.string:se.stringValue,d.setFrame(l++,oe.time,ae)}n.push(d),o=Math.max(o,d.frames[d.getFrameCount()-1])}r.animations.push(new i.Animation(t,n,o))},readCurve:function(t,e,r){var n=r.curve;n?"stepped"==n?t.curves.setStepped(e):n instanceof Array&&t.curves.setCurve(e,n[0],n[1],n[2],n[3]):t.curves.setLinear(e)},toColor:function(t,e){if(8!=t.length)throw"Color hexidecimal length must be 8, recieved: "+t;return parseInt(t.substring(2*e,2*e+2),16)/255},getFloatArray:function(t,e,r){var n=t[e],o=new i.Float32Array(n.length),s=0,a=n.length;if(1==r)for(;a>s;s++)o[s]=n[s];else for(;a>s;s++)o[s]=n[s]*r;return o},getIntArray:function(t,e){for(var r=t[e],n=new i.Uint16Array(r.length),o=0,s=r.length;s>o;o++)n[o]=0|r[o];return n}},i.Atlas=function(t,e){this.textureLoader=e,this.pages=[],this.regions=[];var r=new i.AtlasReader(t),n=[];n.length=4;for(var o=null;;){var s=r.readLine();if(null===s)break;if(s=r.trim(s),s.length)if(o){var a=new i.AtlasRegion;a.name=s,a.page=o,a.rotate="true"==r.readValue(),r.readTuple(n);var h=parseInt(n[0]),c=parseInt(n[1]);r.readTuple(n);var u=parseInt(n[0]),f=parseInt(n[1]);a.u=h/o.width,a.v=c/o.height,a.rotate?(a.u2=(h+f)/o.width,a.v2=(c+u)/o.height):(a.u2=(h+u)/o.width,a.v2=(c+f)/o.height),a.x=h,a.y=c,a.width=Math.abs(u),a.height=Math.abs(f),4==r.readTuple(n)&&(a.splits=[parseInt(n[0]),parseInt(n[1]),parseInt(n[2]),parseInt(n[3])],4==r.readTuple(n)&&(a.pads=[parseInt(n[0]),parseInt(n[1]),parseInt(n[2]),parseInt(n[3])],r.readTuple(n))),a.originalWidth=parseInt(n[0]),a.originalHeight=parseInt(n[1]),r.readTuple(n),a.offsetX=parseInt(n[0]),a.offsetY=parseInt(n[1]),a.index=parseInt(r.readValue()),this.regions.push(a)}else{o=new i.AtlasPage,o.name=s,2==r.readTuple(n)&&(o.width=parseInt(n[0]),o.height=parseInt(n[1]),r.readTuple(n)),o.format=i.Atlas.Format[n[0]],r.readTuple(n),o.minFilter=i.Atlas.TextureFilter[n[0]],o.magFilter=i.Atlas.TextureFilter[n[1]];var d=r.readValue();o.uWrap=i.Atlas.TextureWrap.clampToEdge,o.vWrap=i.Atlas.TextureWrap.clampToEdge,"x"==d?o.uWrap=i.Atlas.TextureWrap.repeat:"y"==d?o.vWrap=i.Atlas.TextureWrap.repeat:"xy"==d&&(o.uWrap=o.vWrap=i.Atlas.TextureWrap.repeat),e.load(o,s,this),this.pages.push(o)}else o=null}},i.Atlas.prototype={findRegion:function(t){for(var e=this.regions,r=0,n=e.length;n>r;r++)if(e[r].name==t)return e[r];return null},dispose:function(){for(var t=this.pages,e=0,r=t.length;r>e;e++)this.textureLoader.unload(t[e].rendererObject)},updateUVs:function(t){for(var e=this.regions,r=0,n=e.length;n>r;r++){var i=e[r];i.page==t&&(i.u=i.x/t.width,i.v=i.y/t.height,i.rotate?(i.u2=(i.x+i.height)/t.width,i.v2=(i.y+i.width)/t.height):(i.u2=(i.x+i.width)/t.width,i.v2=(i.y+i.height)/t.height))}}},i.Atlas.Format={alpha:0,intensity:1,luminanceAlpha:2,rgb565:3,rgba4444:4,rgb888:5,rgba8888:6},i.Atlas.TextureFilter={nearest:0,linear:1,mipMap:2,mipMapNearestNearest:3,mipMapLinearNearest:4,mipMapNearestLinear:5,mipMapLinearLinear:6},i.Atlas.TextureWrap={mirroredRepeat:0,clampToEdge:1,repeat:2},i.AtlasPage=function(){},i.AtlasPage.prototype={name:null,format:null,minFilter:null,magFilter:null,uWrap:null,vWrap:null,rendererObject:null,width:0,height:0},i.AtlasRegion=function(){},i.AtlasRegion.prototype={page:null,name:null,x:0,y:0,width:0,height:0,u:0,v:0,u2:0,v2:0,offsetX:0,offsetY:0,originalWidth:0,originalHeight:0,index:0,rotate:!1,splits:null,pads:null},i.AtlasReader=function(t){this.lines=t.split(/\r\n|\r|\n/)},i.AtlasReader.prototype={index:0,trim:function(t){return t.replace(/^\s+|\s+$/g,"")},readLine:function(){return this.index>=this.lines.length?null:this.lines[this.index++]},readValue:function(){var t=this.readLine(),e=t.indexOf(":");if(-1==e)throw"Invalid line: "+t;return this.trim(t.substring(e+1))},readTuple:function(t){var e=this.readLine(),r=e.indexOf(":");if(-1==r)throw"Invalid line: "+e;for(var n=0,i=r+1;3>n;n++){var o=e.indexOf(",",i);if(-1==o)break;t[n]=this.trim(e.substr(i,o-i)),i=o+1}return t[n]=this.trim(e.substring(i)),n+1}},i.AtlasAttachmentLoader=function(t){this.atlas=t},i.AtlasAttachmentLoader.prototype={newRegionAttachment:function(t,e,r){var n=this.atlas.findRegion(r);if(!n)throw"Region not found in atlas: "+r+" (region attachment: "+e+")";var o=new i.RegionAttachment(e);return o.rendererObject=n,o.setUVs(n.u,n.v,n.u2,n.v2,n.rotate),o.regionOffsetX=n.offsetX,o.regionOffsetY=n.offsetY,o.regionWidth=n.width,o.regionHeight=n.height,o.regionOriginalWidth=n.originalWidth,o.regionOriginalHeight=n.originalHeight,o},newMeshAttachment:function(t,e,r){var n=this.atlas.findRegion(r);if(!n)throw"Region not found in atlas: "+r+" (mesh attachment: "+e+")";var o=new i.MeshAttachment(e);return o.rendererObject=n,o.regionU=n.u,o.regionV=n.v,o.regionU2=n.u2,o.regionV2=n.v2,o.regionRotate=n.rotate,o.regionOffsetX=n.offsetX,o.regionOffsetY=n.offsetY,o.regionWidth=n.width,o.regionHeight=n.height,o.regionOriginalWidth=n.originalWidth,o.regionOriginalHeight=n.originalHeight,o},newSkinnedMeshAttachment:function(t,e,r){var n=this.atlas.findRegion(r);if(!n)throw"Region not found in atlas: "+r+" (skinned mesh attachment: "+e+")";var o=new i.SkinnedMeshAttachment(e);return o.rendererObject=n,o.regionU=n.u,o.regionV=n.v,o.regionU2=n.u2,o.regionV2=n.v2,o.regionRotate=n.rotate,o.regionOffsetX=n.offsetX,o.regionOffsetY=n.offsetY,o.regionWidth=n.width,o.regionHeight=n.height,o.regionOriginalWidth=n.originalWidth,o.regionOriginalHeight=n.originalHeight,o},newBoundingBoxAttachment:function(t,e){return new i.BoundingBoxAttachment(e)}},i.SkeletonBounds=function(){this.polygonPool=[],this.polygons=[],this.boundingBoxes=[]},i.SkeletonBounds.prototype={minX:0,minY:0,maxX:0,maxY:0,update:function(t,e){var r=t.slots,n=r.length,o=t.x,s=t.y,a=this.boundingBoxes,h=this.polygonPool,c=this.polygons;a.length=0;for(var u=0,f=c.length;f>u;u++)h.push(c[u]);c.length=0;for(var u=0;n>u;u++){var d=r[u],l=d.attachment;if(l.type==i.AttachmentType.boundingbox){a.push(l);var p,v=h.length;v>0?(p=h[v-1],h.splice(v-1,1)):p=[],c.push(p),p.length=l.vertices.length,l.computeWorldVertices(o,s,d.bone,p)}}e&&this.aabbCompute()},aabbCompute:function(){for(var t=this.polygons,e=Number.MAX_VALUE,r=Number.MAX_VALUE,n=Number.MIN_VALUE,i=Number.MIN_VALUE,o=0,s=t.length;s>o;o++)for(var a=t[o],h=0,c=a.length;c>h;h+=2){var u=a[h],f=a[h+1];e=Math.min(e,u),r=Math.min(r,f),n=Math.max(n,u),i=Math.max(i,f)}this.minX=e,this.minY=r,this.maxX=n,this.maxY=i},aabbContainsPoint:function(t,e){return t>=this.minX&&t<=this.maxX&&e>=this.minY&&e<=this.maxY},aabbIntersectsSegment:function(t,e,r,n){var i=this.minX,o=this.minY,s=this.maxX,a=this.maxY;if(i>=t&&i>=r||o>=e&&o>=n||t>=s&&r>=s||e>=a&&n>=a)return!1;var h=(n-e)/(r-t),c=h*(i-t)+e;if(c>o&&a>c)return!0;if(c=h*(s-t)+e,c>o&&a>c)return!0;var u=(o-e)/h+t;return u>i&&s>u?!0:(u=(a-e)/h+t,u>i&&s>u?!0:!1)},aabbIntersectsSkeleton:function(t){return this.minX<t.maxX&&this.maxX>t.minX&&this.minY<t.maxY&&this.maxY>t.minY},containsPoint:function(t,e){for(var r=this.polygons,n=0,i=r.length;i>n;n++)if(this.polygonContainsPoint(r[n],t,e))return this.boundingBoxes[n];return null},intersectsSegment:function(t,e,r,n){for(var i=this.polygons,o=0,s=i.length;s>o;o++)if(i[o].intersectsSegment(t,e,r,n))return this.boundingBoxes[o];return null},polygonContainsPoint:function(t,e,r){for(var n=t.length,i=n-2,o=!1,s=0;n>s;s+=2){var a=t[s+1],h=t[i+1];if(r>a&&h>=r||r>h&&a>=r){var c=t[s];c+(r-a)/(h-a)*(t[i]-c)<e&&(o=!o)}i=s}return o},polygonIntersectsSegment:function(t,e,r,n,i){for(var o=t.length,s=e-n,a=r-i,h=e*i-r*n,c=t[o-2],u=t[o-1],f=0;o>f;f+=2){var d=t[f],l=t[f+1],p=c*l-u*d,v=c-d,b=u-l,g=s*b-a*v,y=(h*v-s*p)/g;if((y>=c&&d>=y||y>=d&&c>=y)&&(y>=e&&n>=y||y>=n&&e>=y)){var m=(h*b-a*p)/g;if((m>=u&&l>=m||m>=l&&u>=m)&&(m>=r&&i>=m||m>=i&&r>=m))return!0}c=d,u=l}return!1},getPolygon:function(t){var e=this.boundingBoxes.indexOf(t);return-1==e?null:this.polygons[e]},getWidth:function(){return this.maxX-this.minX},getHeight:function(){return this.maxY-this.minY}},i.Bone.yDown=!0,n.AnimCache={},n.SpineTextureLoader=function(t,e){n.EventTarget.call(this),this.basePath=t,this.crossorigin=e,this.loadingCount=0
},n.SpineTextureLoader.prototype=n.SpineTextureLoader,n.SpineTextureLoader.prototype.load=function(t,e){if(t.rendererObject=n.BaseTexture.fromImage(this.basePath+"/"+e,this.crossorigin),!t.rendererObject.hasLoaded){var r=this;++r.loadingCount,t.rendererObject.addEventListener("loaded",function(){--r.loadingCount,r.dispatchEvent({type:"loadedBaseTexture",content:r})})}},n.SpineTextureLoader.prototype.unload=function(t){t.destroy(!0)},n.Spine=function(t){if(n.DisplayObjectContainer.call(this),this.spineData=n.AnimCache[t],!this.spineData)throw new Error("Spine data must be preloaded using PIXI.SpineLoader or PIXI.AssetLoader: "+t);this.skeleton=new i.Skeleton(this.spineData),this.skeleton.updateWorldTransform(),this.stateData=new i.AnimationStateData(this.spineData),this.state=new i.AnimationState(this.stateData),this.slotContainers=[];for(var e=0,r=this.skeleton.drawOrder.length;r>e;e++){var o=this.skeleton.drawOrder[e],s=o.attachment,a=new n.DisplayObjectContainer;if(this.slotContainers.push(a),this.addChild(a),s instanceof i.RegionAttachment){var h=s.rendererObject.name,c=this.createSprite(o,s);o.currentSprite=c,o.currentSpriteName=h,a.addChild(c)}else{if(!(s instanceof i.MeshAttachment))continue;var u=this.createMesh(o,s);o.currentMesh=u,o.currentMeshName=s.name,a.addChild(u)}}this.autoUpdate=!0},n.Spine.prototype=Object.create(n.DisplayObjectContainer.prototype),n.Spine.prototype.constructor=n.Spine,Object.defineProperty(n.Spine.prototype,"autoUpdate",{get:function(){return this.updateTransform===n.Spine.prototype.autoUpdateTransform},set:function(t){this.updateTransform=t?n.Spine.prototype.autoUpdateTransform:n.DisplayObjectContainer.prototype.updateTransform}}),n.Spine.prototype.update=function(t){this.state.update(t),this.state.apply(this.skeleton),this.skeleton.updateWorldTransform();for(var e=this.skeleton.drawOrder,r=0,o=e.length;o>r;r++){var s=e[r],a=s.attachment,h=this.slotContainers[r];if(a){var c=a.type;if(c===i.AttachmentType.region){if(a.rendererObject&&(!s.currentSpriteName||s.currentSpriteName!==a.name)){var u=a.rendererObject.name;if(void 0!==s.currentSprite&&(s.currentSprite.visible=!1),s.sprites=s.sprites||{},void 0!==s.sprites[u])s.sprites[u].visible=!0;else{var f=this.createSprite(s,a);h.addChild(f)}s.currentSprite=s.sprites[u],s.currentSpriteName=u}var d=s.bone;h.position.x=d.worldX+a.x*d.m00+a.y*d.m01,h.position.y=d.worldY+a.x*d.m10+a.y*d.m11,h.scale.x=d.worldScaleX,h.scale.y=d.worldScaleY,h.rotation=-(s.bone.worldRotation*i.degRad),s.currentSprite.tint=n.rgb2hex([s.r,s.g,s.b])}else{if(c!==i.AttachmentType.skinnedmesh){h.visible=!1;continue}if(!s.currentMeshName||s.currentMeshName!==a.name){var l=a.name;if(void 0!==s.currentMesh&&(s.currentMesh.visible=!1),s.meshes=s.meshes||{},void 0!==s.meshes[l])s.meshes[l].visible=!0;else{var p=this.createMesh(s,a);h.addChild(p)}s.currentMesh=s.meshes[l],s.currentMeshName=l}a.computeWorldVertices(s.bone.skeleton.x,s.bone.skeleton.y,s,s.currentMesh.vertices)}h.visible=!0,h.alpha=s.a}else h.visible=!1}},n.Spine.prototype.autoUpdateTransform=function(){this.lastTime=this.lastTime||Date.now();var t=.001*(Date.now()-this.lastTime);this.lastTime=Date.now(),this.update(t),n.DisplayObjectContainer.prototype.updateTransform.call(this)},n.Spine.prototype.createSprite=function(t,e){var r=e.rendererObject,o=r.page.rendererObject,s=new n.Rectangle(r.x,r.y,r.rotate?r.height:r.width,r.rotate?r.width:r.height),a=new n.Texture(o,s),h=new n.Sprite(a),c=r.rotate?.5*Math.PI:0;return h.scale.set(r.width/r.originalWidth,r.height/r.originalHeight),h.rotation=c-e.rotation*i.degRad,h.anchor.x=h.anchor.y=.5,t.sprites=t.sprites||{},t.sprites[r.name]=h,h},n.Spine.prototype.createMesh=function(t,e){var r=e.rendererObject,i=r.page.rendererObject,o=new n.Texture(i),s=new n.Strip(o);return s.drawMode=n.Strip.DrawModes.TRIANGLES,s.canvasPadding=1.5,s.vertices=new n.Float32Array(e.uvs.length),s.uvs=e.uvs,s.indices=e.triangles,t.meshes=t.meshes||{},t.meshes[e.name]=s,s},n.BaseTextureCache={},n.BaseTextureCacheIdGenerator=0,n.BaseTexture=function(t,e){if(this.resolution=1,this.width=100,this.height=100,this.scaleMode=e||n.scaleModes.DEFAULT,this.hasLoaded=!1,this.source=t,this._UID=n._UID++,this.premultipliedAlpha=!0,this._glTextures=[],this.mipmap=!1,this._dirty=[!0,!0,!0,!0],t){if((this.source.complete||this.source.getContext)&&this.source.width&&this.source.height)this.hasLoaded=!0,this.width=this.source.naturalWidth||this.source.width,this.height=this.source.naturalHeight||this.source.height,this.dirty();else{var r=this;this.source.onload=function(){r.hasLoaded=!0,r.width=r.source.naturalWidth||r.source.width,r.height=r.source.naturalHeight||r.source.height,r.dirty(),r.dispatchEvent({type:"loaded",content:r})},this.source.onerror=function(){r.dispatchEvent({type:"error",content:r})}}this.imageUrl=null,this._powerOf2=!1}},n.BaseTexture.prototype.constructor=n.BaseTexture,n.EventTarget.mixin(n.BaseTexture.prototype),n.BaseTexture.prototype.destroy=function(){this.imageUrl?(delete n.BaseTextureCache[this.imageUrl],delete n.TextureCache[this.imageUrl],this.imageUrl=null,navigator.isCocoonJS||(this.source.src="")):this.source&&this.source._pixiId&&delete n.BaseTextureCache[this.source._pixiId],this.source=null,this.unloadFromGPU()},n.BaseTexture.prototype.updateSourceImage=function(t){this.hasLoaded=!1,this.source.src=null,this.source.src=t},n.BaseTexture.prototype.dirty=function(){for(var t=0;t<this._glTextures.length;t++)this._dirty[t]=!0},n.BaseTexture.prototype.unloadFromGPU=function(){this.dirty();for(var t=this._glTextures.length-1;t>=0;t--){var e=this._glTextures[t],r=n.glContexts[t];r&&e&&r.deleteTexture(e)}this._glTextures.length=0,this.dirty()},n.BaseTexture.fromImage=function(t,e,r){var i=n.BaseTextureCache[t];if(void 0===e&&-1===t.indexOf("data:")&&(e=!0),!i){var o=new Image;e&&(o.crossOrigin=""),o.src=t,i=new n.BaseTexture(o,r),i.imageUrl=t,n.BaseTextureCache[t]=i,-1!==t.indexOf(n.RETINA_PREFIX+".")&&(i.resolution=2)}return i},n.BaseTexture.fromCanvas=function(t,e){t._pixiId||(t._pixiId="canvas_"+n.TextureCacheIdGenerator++);var r=n.BaseTextureCache[t._pixiId];return r||(r=new n.BaseTexture(t,e),n.BaseTextureCache[t._pixiId]=r),r},n.TextureCache={},n.FrameCache={},n.TextureCacheIdGenerator=0,n.Texture=function(t,e,r,i){this.noFrame=!1,e||(this.noFrame=!0,e=new n.Rectangle(0,0,1,1)),t instanceof n.Texture&&(t=t.baseTexture),this.baseTexture=t,this.frame=e,this.trim=i,this.valid=!1,this.requiresUpdate=!1,this._uvs=null,this.width=0,this.height=0,this.crop=r||new n.Rectangle(0,0,1,1),t.hasLoaded?(this.noFrame&&(e=new n.Rectangle(0,0,t.width,t.height)),this.setFrame(e)):t.addEventListener("loaded",this.onBaseTextureLoaded.bind(this))},n.Texture.prototype.constructor=n.Texture,n.EventTarget.mixin(n.Texture.prototype),n.Texture.prototype.onBaseTextureLoaded=function(){var t=this.baseTexture;t.removeEventListener("loaded",this.onLoaded),this.noFrame&&(this.frame=new n.Rectangle(0,0,t.width,t.height)),this.setFrame(this.frame),this.dispatchEvent({type:"update",content:this})},n.Texture.prototype.destroy=function(t){t&&this.baseTexture.destroy(),this.valid=!1},n.Texture.prototype.setFrame=function(t){if(this.noFrame=!1,this.frame=t,this.width=t.width,this.height=t.height,this.crop.x=t.x,this.crop.y=t.y,this.crop.width=t.width,this.crop.height=t.height,!this.trim&&(t.x+t.width>this.baseTexture.width||t.y+t.height>this.baseTexture.height))throw new Error("Texture Error: frame does not fit inside the base Texture dimensions "+this);this.valid=t&&t.width&&t.height&&this.baseTexture.source&&this.baseTexture.hasLoaded,this.trim&&(this.width=this.trim.width,this.height=this.trim.height,this.frame.width=this.trim.width,this.frame.height=this.trim.height),this.valid&&this._updateUvs()},n.Texture.prototype._updateUvs=function(){this._uvs||(this._uvs=new n.TextureUvs);var t=this.crop,e=this.baseTexture.width,r=this.baseTexture.height;this._uvs.x0=t.x/e,this._uvs.y0=t.y/r,this._uvs.x1=(t.x+t.width)/e,this._uvs.y1=t.y/r,this._uvs.x2=(t.x+t.width)/e,this._uvs.y2=(t.y+t.height)/r,this._uvs.x3=t.x/e,this._uvs.y3=(t.y+t.height)/r},n.Texture.fromImage=function(t,e,r){var i=n.TextureCache[t];return i||(i=new n.Texture(n.BaseTexture.fromImage(t,e,r)),n.TextureCache[t]=i),i},n.Texture.fromFrame=function(t){var e=n.TextureCache[t];if(!e)throw new Error('The frameId "'+t+'" does not exist in the texture cache ');return e},n.Texture.fromCanvas=function(t,e){var r=n.BaseTexture.fromCanvas(t,e);return new n.Texture(r)},n.Texture.addTextureToCache=function(t,e){n.TextureCache[e]=t},n.Texture.removeTextureFromCache=function(t){var e=n.TextureCache[t];return delete n.TextureCache[t],delete n.BaseTextureCache[t],e},n.TextureUvs=function(){this.x0=0,this.y0=0,this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.x3=0,this.y3=0},n.Texture.emptyTexture=new n.Texture(new n.BaseTexture),n.RenderTexture=function(t,e,r,i,o){if(this.width=t||100,this.height=e||100,this.resolution=o||1,this.frame=new n.Rectangle(0,0,this.width*this.resolution,this.height*this.resolution),this.crop=new n.Rectangle(0,0,this.width*this.resolution,this.height*this.resolution),this.baseTexture=new n.BaseTexture,this.baseTexture.width=this.width*this.resolution,this.baseTexture.height=this.height*this.resolution,this.baseTexture._glTextures=[],this.baseTexture.resolution=this.resolution,this.baseTexture.scaleMode=i||n.scaleModes.DEFAULT,this.baseTexture.hasLoaded=!0,n.Texture.call(this,this.baseTexture,new n.Rectangle(0,0,this.width,this.height)),this.renderer=r||n.defaultRenderer,this.renderer.type===n.WEBGL_RENDERER){var s=this.renderer.gl;this.baseTexture._dirty[s.id]=!1,this.textureBuffer=new n.FilterTexture(s,this.width*this.resolution,this.height*this.resolution,this.baseTexture.scaleMode),this.baseTexture._glTextures[s.id]=this.textureBuffer.texture,this.render=this.renderWebGL,this.projection=new n.Point(.5*this.width,.5*-this.height)}else this.render=this.renderCanvas,this.textureBuffer=new n.CanvasBuffer(this.width*this.resolution,this.height*this.resolution),this.baseTexture.source=this.textureBuffer.canvas;this.valid=!0,this._updateUvs()},n.RenderTexture.prototype=Object.create(n.Texture.prototype),n.RenderTexture.prototype.constructor=n.RenderTexture,n.RenderTexture.prototype.resize=function(t,e,r){(t!==this.width||e!==this.height)&&(this.valid=t>0&&e>0,this.width=this.frame.width=this.crop.width=t,this.height=this.frame.height=this.crop.height=e,r&&(this.baseTexture.width=this.width,this.baseTexture.height=this.height),this.renderer.type===n.WEBGL_RENDERER&&(this.projection.x=this.width/2,this.projection.y=-this.height/2),this.valid&&this.textureBuffer.resize(this.width*this.resolution,this.height*this.resolution))},n.RenderTexture.prototype.clear=function(){this.valid&&(this.renderer.type===n.WEBGL_RENDERER&&this.renderer.gl.bindFramebuffer(this.renderer.gl.FRAMEBUFFER,this.textureBuffer.frameBuffer),this.textureBuffer.clear())},n.RenderTexture.prototype.renderWebGL=function(t,e,r){if(this.valid){var n=t.worldTransform;n.identity(),n.translate(0,2*this.projection.y),e&&n.append(e),n.scale(1,-1),t.worldAlpha=1;for(var i=t.children,o=0,s=i.length;s>o;o++)i[o].updateTransform();var a=this.renderer.gl;a.viewport(0,0,this.width*this.resolution,this.height*this.resolution),a.bindFramebuffer(a.FRAMEBUFFER,this.textureBuffer.frameBuffer),r&&this.textureBuffer.clear(),this.renderer.spriteBatch.dirty=!0,this.renderer.renderDisplayObject(t,this.projection,this.textureBuffer.frameBuffer),this.renderer.spriteBatch.dirty=!0}},n.RenderTexture.prototype.renderCanvas=function(t,e,r){if(this.valid){var n=t.worldTransform;n.identity(),e&&n.append(e),t.worldAlpha=1;for(var i=t.children,o=0,s=i.length;s>o;o++)i[o].updateTransform();r&&this.textureBuffer.clear();var a=this.textureBuffer.context,h=this.renderer.resolution;this.renderer.resolution=this.resolution,this.renderer.renderDisplayObject(t,a),this.renderer.resolution=h}},n.RenderTexture.prototype.getImage=function(){var t=new Image;return t.src=this.getBase64(),t},n.RenderTexture.prototype.getBase64=function(){return this.getCanvas().toDataURL()},n.RenderTexture.prototype.getCanvas=function(){if(this.renderer.type===n.WEBGL_RENDERER){var t=this.renderer.gl,e=this.textureBuffer.width,r=this.textureBuffer.height,i=new Uint8Array(4*e*r);t.bindFramebuffer(t.FRAMEBUFFER,this.textureBuffer.frameBuffer),t.readPixels(0,0,e,r,t.RGBA,t.UNSIGNED_BYTE,i),t.bindFramebuffer(t.FRAMEBUFFER,null);var o=new n.CanvasBuffer(e,r),s=o.context.getImageData(0,0,e,r);return s.data.set(i),o.context.putImageData(s,0,0),o.canvas}return this.textureBuffer.canvas},n.RenderTexture.tempMatrix=new n.Matrix,n.VideoTexture=function(t,e){if(!t)throw new Error("No video source element specified.");(t.readyState===t.HAVE_ENOUGH_DATA||t.readyState===t.HAVE_FUTURE_DATA)&&t.width&&t.height&&(t.complete=!0),n.BaseTexture.call(this,t,e),this.autoUpdate=!1,this.updateBound=this._onUpdate.bind(this),t.complete||(this._onCanPlay=this.onCanPlay.bind(this),t.addEventListener("canplay",this._onCanPlay),t.addEventListener("canplaythrough",this._onCanPlay),t.addEventListener("play",this.onPlayStart.bind(this)),t.addEventListener("pause",this.onPlayStop.bind(this)))},n.VideoTexture.prototype=Object.create(n.BaseTexture.prototype),n.VideoTexture.constructor=n.VideoTexture,n.VideoTexture.prototype._onUpdate=function(){this.autoUpdate&&(window.requestAnimationFrame(this.updateBound),this.dirty())},n.VideoTexture.prototype.onPlayStart=function(){this.autoUpdate||(window.requestAnimationFrame(this.updateBound),this.autoUpdate=!0)},n.VideoTexture.prototype.onPlayStop=function(){this.autoUpdate=!1},n.VideoTexture.prototype.onCanPlay=function(){"canplaythrough"===event.type&&(this.hasLoaded=!0,this.source&&(this.source.removeEventListener("canplay",this._onCanPlay),this.source.removeEventListener("canplaythrough",this._onCanPlay),this.width=this.source.videoWidth,this.height=this.source.videoHeight,this.__loaded||(this.__loaded=!0,this.dispatchEvent({type:"loaded",content:this}))))},n.VideoTexture.prototype.destroy=function(){this.source&&this.source._pixiId&&(n.BaseTextureCache[this.source._pixiId]=null,delete n.BaseTextureCache[this.source._pixiId],this.source._pixiId=null,delete this.source._pixiId),n.BaseTexture.prototype.destroy.call(this)},n.VideoTexture.baseTextureFromVideo=function(t,e){t._pixiId||(t._pixiId="video_"+n.TextureCacheIdGenerator++);var r=n.BaseTextureCache[t._pixiId];return r||(r=new n.VideoTexture(t,e),n.BaseTextureCache[t._pixiId]=r),r},n.VideoTexture.textureFromVideo=function(t,e){var r=n.VideoTexture.baseTextureFromVideo(t,e);return new n.Texture(r)},n.VideoTexture.fromUrl=function(t,e){var r=document.createElement("video");return r.src=t,r.autoPlay=!0,r.play(),n.VideoTexture.textureFromVideo(r,e)},n.AssetLoader=function(t,e){this.assetURLs=t,this.crossorigin=e,this.loadersByType={jpg:n.ImageLoader,jpeg:n.ImageLoader,png:n.ImageLoader,gif:n.ImageLoader,webp:n.ImageLoader,json:n.JsonLoader,atlas:n.AtlasLoader,anim:n.SpineLoader,xml:n.BitmapFontLoader,fnt:n.BitmapFontLoader}},n.EventTarget.mixin(n.AssetLoader.prototype),n.AssetLoader.prototype.constructor=n.AssetLoader,n.AssetLoader.prototype._getDataType=function(t){var e="data:",r=t.slice(0,e.length).toLowerCase();if(r===e){var n=t.slice(e.length),i=n.indexOf(",");if(-1===i)return null;var o=n.slice(0,i).split(";")[0];return o&&"text/plain"!==o.toLowerCase()?o.split("/").pop().toLowerCase():"txt"}return null},n.AssetLoader.prototype.load=function(){function t(t){e.onAssetLoaded(t.data.content)}var e=this;this.loadCount=this.assetURLs.length;for(var r=0;r<this.assetURLs.length;r++){var n=this.assetURLs[r],i=this._getDataType(n);i||(i=n.split("?").shift().split(".").pop().toLowerCase());var o=this.loadersByType[i];if(!o)throw new Error(i+" is an unsupported file type");var s=new o(n,this.crossorigin);s.on("loaded",t),s.load()}},n.AssetLoader.prototype.onAssetLoaded=function(t){this.loadCount--,this.emit("onProgress",{content:this,loader:t}),this.onProgress&&this.onProgress(t),this.loadCount||(this.emit("onComplete",{content:this}),this.onComplete&&this.onComplete())},n.JsonLoader=function(t,e){this.url=t,this.crossorigin=e,this.baseUrl=t.replace(/[^\/]*$/,""),this.loaded=!1},n.JsonLoader.prototype.constructor=n.JsonLoader,n.EventTarget.mixin(n.JsonLoader.prototype),n.JsonLoader.prototype.load=function(){window.XDomainRequest&&this.crossorigin?(this.ajaxRequest=new window.XDomainRequest,this.ajaxRequest.timeout=3e3,this.ajaxRequest.onerror=this.onError.bind(this),this.ajaxRequest.ontimeout=this.onError.bind(this),this.ajaxRequest.onprogress=function(){},this.ajaxRequest.onload=this.onJSONLoaded.bind(this)):(this.ajaxRequest=window.XMLHttpRequest?new window.XMLHttpRequest:new window.ActiveXObject("Microsoft.XMLHTTP"),this.ajaxRequest.onreadystatechange=this.onReadyStateChanged.bind(this)),this.ajaxRequest.open("GET",this.url,!0),this.ajaxRequest.send()},n.JsonLoader.prototype.onReadyStateChanged=function(){4!==this.ajaxRequest.readyState||200!==this.ajaxRequest.status&&-1!==window.location.href.indexOf("http")||this.onJSONLoaded()},n.JsonLoader.prototype.onJSONLoaded=function(){if(!this.ajaxRequest.responseText)return void this.onError();if(this.json=JSON.parse(this.ajaxRequest.responseText),this.json.frames&&this.json.meta&&this.json.meta.image){var t=this.baseUrl+this.json.meta.image,e=new n.ImageLoader(t,this.crossorigin),r=this.json.frames;this.texture=e.texture.baseTexture,e.addEventListener("loaded",this.onLoaded.bind(this));for(var o in r){var s=r[o].frame;if(s){var a=new n.Rectangle(s.x,s.y,s.w,s.h),h=a.clone(),c=null;if(r[o].trimmed){var u=r[o].sourceSize,f=r[o].spriteSourceSize;c=new n.Rectangle(f.x,f.y,u.w,u.h)}n.TextureCache[o]=new n.Texture(this.texture,a,h,c)}}e.load()}else if(this.json.bones)if(n.AnimCache[this.url])this.onLoaded();else{var d=this.url.substr(0,this.url.lastIndexOf("."))+".atlas",l=new n.JsonLoader(d,this.crossorigin),p=this;l.onJSONLoaded=function(){if(!this.ajaxRequest.responseText)return void this.onError();var t=new n.SpineTextureLoader(this.url.substring(0,this.url.lastIndexOf("/"))),e=new i.Atlas(this.ajaxRequest.responseText,t),r=new i.AtlasAttachmentLoader(e),o=new i.SkeletonJson(r),s=o.readSkeletonData(p.json);n.AnimCache[p.url]=s,p.spine=s,p.spineAtlas=e,p.spineAtlasLoader=l,t.loadingCount>0?t.addEventListener("loadedBaseTexture",function(t){t.content.content.loadingCount<=0&&p.onLoaded()}):p.onLoaded()},l.load()}else this.onLoaded()},n.JsonLoader.prototype.onLoaded=function(){this.loaded=!0,this.dispatchEvent({type:"loaded",content:this})},n.JsonLoader.prototype.onError=function(){this.dispatchEvent({type:"error",content:this})},n.AtlasLoader=function(t,e){this.url=t,this.baseUrl=t.replace(/[^\/]*$/,""),this.crossorigin=e,this.loaded=!1},n.AtlasLoader.constructor=n.AtlasLoader,n.EventTarget.mixin(n.AtlasLoader.prototype),n.AtlasLoader.prototype.load=function(){this.ajaxRequest=new n.AjaxRequest,this.ajaxRequest.onreadystatechange=this.onAtlasLoaded.bind(this),this.ajaxRequest.open("GET",this.url,!0),this.ajaxRequest.overrideMimeType&&this.ajaxRequest.overrideMimeType("application/json"),this.ajaxRequest.send(null)},n.AtlasLoader.prototype.onAtlasLoaded=function(){if(4===this.ajaxRequest.readyState)if(200===this.ajaxRequest.status||-1===window.location.href.indexOf("http")){this.atlas={meta:{image:[]},frames:[]};var t=this.ajaxRequest.responseText.split(/\r?\n/),e=-3,r=0,i=null,o=!1,s=0,a=0,h=this.onLoaded.bind(this);for(s=0;s<t.length;s++)if(t[s]=t[s].replace(/^\s+|\s+$/g,""),""===t[s]&&(o=s+1),t[s].length>0){if(o===s)this.atlas.meta.image.push(t[s]),r=this.atlas.meta.image.length-1,this.atlas.frames.push({}),e=-3;else if(e>0)if(e%7===1)null!=i&&(this.atlas.frames[r][i.name]=i),i={name:t[s],frame:{}};else{var c=t[s].split(" ");if(e%7===3)i.frame.x=Number(c[1].replace(",","")),i.frame.y=Number(c[2]);else if(e%7===4)i.frame.w=Number(c[1].replace(",","")),i.frame.h=Number(c[2]);else if(e%7===5){var u={x:0,y:0,w:Number(c[1].replace(",","")),h:Number(c[2])};u.w>i.frame.w||u.h>i.frame.h?(i.trimmed=!0,i.realSize=u):i.trimmed=!1}}e++}if(null!=i&&(this.atlas.frames[r][i.name]=i),this.atlas.meta.image.length>0){for(this.images=[],a=0;a<this.atlas.meta.image.length;a++){var f=this.baseUrl+this.atlas.meta.image[a],d=this.atlas.frames[a];this.images.push(new n.ImageLoader(f,this.crossorigin));for(s in d){var l=d[s].frame;l&&(n.TextureCache[s]=new n.Texture(this.images[a].texture.baseTexture,{x:l.x,y:l.y,width:l.w,height:l.h}),d[s].trimmed&&(n.TextureCache[s].realSize=d[s].realSize,n.TextureCache[s].trim.x=0,n.TextureCache[s].trim.y=0))}}for(this.currentImageId=0,a=0;a<this.images.length;a++)this.images[a].on("loaded",h);this.images[this.currentImageId].load()}else this.onLoaded()}else this.onError()},n.AtlasLoader.prototype.onLoaded=function(){this.images.length-1>this.currentImageId?(this.currentImageId++,this.images[this.currentImageId].load()):(this.loaded=!0,this.emit("loaded",{content:this}))},n.AtlasLoader.prototype.onError=function(){this.emit("error",{content:this})},n.SpriteSheetLoader=function(t,e){this.url=t,this.crossorigin=e,this.baseUrl=t.replace(/[^\/]*$/,""),this.texture=null,this.frames={}},n.SpriteSheetLoader.prototype.constructor=n.SpriteSheetLoader,n.EventTarget.mixin(n.SpriteSheetLoader.prototype),n.SpriteSheetLoader.prototype.load=function(){var t=this,e=new n.JsonLoader(this.url,this.crossorigin);e.on("loaded",function(e){t.json=e.data.content.json,t.onLoaded()}),e.load()},n.SpriteSheetLoader.prototype.onLoaded=function(){this.emit("loaded",{content:this})},n.ImageLoader=function(t,e){this.texture=n.Texture.fromImage(t,e),this.frames=[]},n.ImageLoader.prototype.constructor=n.ImageLoader,n.EventTarget.mixin(n.ImageLoader.prototype),n.ImageLoader.prototype.load=function(){this.texture.baseTexture.hasLoaded?this.onLoaded():this.texture.baseTexture.on("loaded",this.onLoaded.bind(this))},n.ImageLoader.prototype.onLoaded=function(){this.emit("loaded",{content:this})},n.ImageLoader.prototype.loadFramedSpriteSheet=function(t,e,r){this.frames=[];for(var i=Math.floor(this.texture.width/t),o=Math.floor(this.texture.height/e),s=0,a=0;o>a;a++)for(var h=0;i>h;h++,s++){var c=new n.Texture(this.texture.baseTexture,{x:h*t,y:a*e,width:t,height:e});this.frames.push(c),r&&(n.TextureCache[r+"-"+s]=c)}this.load()},n.BitmapFontLoader=function(t,e){this.url=t,this.crossorigin=e,this.baseUrl=t.replace(/[^\/]*$/,""),this.texture=null},n.BitmapFontLoader.prototype.constructor=n.BitmapFontLoader,n.EventTarget.mixin(n.BitmapFontLoader.prototype),n.BitmapFontLoader.prototype.load=function(){this.ajaxRequest=new n.AjaxRequest,this.ajaxRequest.onreadystatechange=this.onXMLLoaded.bind(this),this.ajaxRequest.open("GET",this.url,!0),this.ajaxRequest.overrideMimeType&&this.ajaxRequest.overrideMimeType("application/xml"),this.ajaxRequest.send(null)},n.BitmapFontLoader.prototype.onXMLLoaded=function(){if(4===this.ajaxRequest.readyState&&(200===this.ajaxRequest.status||-1===window.location.protocol.indexOf("http"))){var t=this.ajaxRequest.responseXML;if(!t||/MSIE 9/i.test(navigator.userAgent)||navigator.isCocoonJS)if("function"==typeof window.DOMParser){var e=new DOMParser;t=e.parseFromString(this.ajaxRequest.responseText,"text/xml")}else{var r=document.createElement("div");r.innerHTML=this.ajaxRequest.responseText,t=r}var i=this.baseUrl+t.getElementsByTagName("page")[0].getAttribute("file"),o=new n.ImageLoader(i,this.crossorigin);this.texture=o.texture.baseTexture;var s={},a=t.getElementsByTagName("info")[0],h=t.getElementsByTagName("common")[0];s.font=a.getAttribute("face"),s.size=parseInt(a.getAttribute("size"),10),s.lineHeight=parseInt(h.getAttribute("lineHeight"),10),s.chars={};for(var c=t.getElementsByTagName("char"),u=0;u<c.length;u++){var f=parseInt(c[u].getAttribute("id"),10),d=new n.Rectangle(parseInt(c[u].getAttribute("x"),10),parseInt(c[u].getAttribute("y"),10),parseInt(c[u].getAttribute("width"),10),parseInt(c[u].getAttribute("height"),10));s.chars[f]={xOffset:parseInt(c[u].getAttribute("xoffset"),10),yOffset:parseInt(c[u].getAttribute("yoffset"),10),xAdvance:parseInt(c[u].getAttribute("xadvance"),10),kerning:{},texture:n.TextureCache[f]=new n.Texture(this.texture,d)}}var l=t.getElementsByTagName("kerning");for(u=0;u<l.length;u++){var p=parseInt(l[u].getAttribute("first"),10),v=parseInt(l[u].getAttribute("second"),10),b=parseInt(l[u].getAttribute("amount"),10);s.chars[v].kerning[p]=b}n.BitmapText.fonts[s.font]=s,o.addEventListener("loaded",this.onLoaded.bind(this)),o.load()}},n.BitmapFontLoader.prototype.onLoaded=function(){this.emit("loaded",{content:this})},n.SpineLoader=function(t,e){this.url=t,this.crossorigin=e,this.loaded=!1},n.SpineLoader.prototype.constructor=n.SpineLoader,n.EventTarget.mixin(n.SpineLoader.prototype),n.SpineLoader.prototype.load=function(){var t=this,e=new n.JsonLoader(this.url,this.crossorigin);e.on("loaded",function(e){t.json=e.data.content.json,t.onLoaded()}),e.load()},n.SpineLoader.prototype.onLoaded=function(){this.loaded=!0,this.emit("loaded",{content:this})},n.AbstractFilter=function(t,e){this.passes=[this],this.shaders=[],this.dirty=!0,this.padding=0,this.uniforms=e||{},this.fragmentSrc=t||[]},n.AbstractFilter.prototype.constructor=n.AbstractFilter,n.AbstractFilter.prototype.syncUniforms=function(){for(var t=0,e=this.shaders.length;e>t;t++)this.shaders[t].dirty=!0},n.AlphaMaskFilter=function(t){n.AbstractFilter.call(this),this.passes=[this],t.baseTexture._powerOf2=!0,this.uniforms={mask:{type:"sampler2D",value:t},mapDimensions:{type:"2f",value:{x:1,y:5112}},dimensions:{type:"4fv",value:[0,0,0,0]}},t.baseTexture.hasLoaded?(this.uniforms.mask.value.x=t.width,this.uniforms.mask.value.y=t.height):(this.boundLoadedFunction=this.onTextureLoaded.bind(this),t.baseTexture.on("loaded",this.boundLoadedFunction)),this.fragmentSrc=["precision mediump float;","varying vec2 vTextureCoord;","varying vec4 vColor;","uniform sampler2D mask;","uniform sampler2D uSampler;","uniform vec2 offset;","uniform vec4 dimensions;","uniform vec2 mapDimensions;","void main(void) {","   vec2 mapCords = vTextureCoord.xy;","   mapCords += (dimensions.zw + offset)/ dimensions.xy ;","   mapCords.y *= -1.0;","   mapCords.y += 1.0;","   mapCords *= dimensions.xy / mapDimensions;","   vec4 original =  texture2D(uSampler, vTextureCoord);","   float maskAlpha =  texture2D(mask, mapCords).r;","   original *= maskAlpha;","   gl_FragColor =  original;","}"]},n.AlphaMaskFilter.prototype=Object.create(n.AbstractFilter.prototype),n.AlphaMaskFilter.prototype.constructor=n.AlphaMaskFilter,n.AlphaMaskFilter.prototype.onTextureLoaded=function(){this.uniforms.mapDimensions.value.x=this.uniforms.mask.value.width,this.uniforms.mapDimensions.value.y=this.uniforms.mask.value.height,this.uniforms.mask.value.baseTexture.off("loaded",this.boundLoadedFunction)},Object.defineProperty(n.AlphaMaskFilter.prototype,"map",{get:function(){return this.uniforms.mask.value},set:function(t){this.uniforms.mask.value=t}}),n.ColorMatrixFilter=function(){n.AbstractFilter.call(this),this.passes=[this],this.uniforms={matrix:{type:"mat4",value:[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}},this.fragmentSrc=["precision mediump float;","varying vec2 vTextureCoord;","varying vec4 vColor;","uniform float invert;","uniform mat4 matrix;","uniform sampler2D uSampler;","void main(void) {","   gl_FragColor = texture2D(uSampler, vTextureCoord) * matrix;","}"]},n.ColorMatrixFilter.prototype=Object.create(n.AbstractFilter.prototype),n.ColorMatrixFilter.prototype.constructor=n.ColorMatrixFilter,Object.defineProperty(n.ColorMatrixFilter.prototype,"matrix",{get:function(){return this.uniforms.matrix.value},set:function(t){this.uniforms.matrix.value=t}}),n.GrayFilter=function(){n.AbstractFilter.call(this),this.passes=[this],this.uniforms={gray:{type:"1f",value:1}},this.fragmentSrc=["precision mediump float;","varying vec2 vTextureCoord;","varying vec4 vColor;","uniform sampler2D uSampler;","uniform float gray;","void main(void) {","   gl_FragColor = texture2D(uSampler, vTextureCoord);","   gl_FragColor.rgb = mix(gl_FragColor.rgb, vec3(0.2126*gl_FragColor.r + 0.7152*gl_FragColor.g + 0.0722*gl_FragColor.b), gray);","}"]},n.GrayFilter.prototype=Object.create(n.AbstractFilter.prototype),n.GrayFilter.prototype.constructor=n.GrayFilter,Object.defineProperty(n.GrayFilter.prototype,"gray",{get:function(){return this.uniforms.gray.value},set:function(t){this.uniforms.gray.value=t}}),n.DisplacementFilter=function(t){n.AbstractFilter.call(this),this.passes=[this],t.baseTexture._powerOf2=!0,this.uniforms={displacementMap:{type:"sampler2D",value:t},scale:{type:"2f",value:{x:30,y:30}},offset:{type:"2f",value:{x:0,y:0}},mapDimensions:{type:"2f",value:{x:1,y:5112}},dimensions:{type:"4fv",value:[0,0,0,0]}},t.baseTexture.hasLoaded?(this.uniforms.mapDimensions.value.x=t.width,this.uniforms.mapDimensions.value.y=t.height):(this.boundLoadedFunction=this.onTextureLoaded.bind(this),t.baseTexture.on("loaded",this.boundLoadedFunction)),this.fragmentSrc=["precision mediump float;","varying vec2 vTextureCoord;","varying vec4 vColor;","uniform sampler2D displacementMap;","uniform sampler2D uSampler;","uniform vec2 scale;","uniform vec2 offset;","uniform vec4 dimensions;","uniform vec2 mapDimensions;","void main(void) {","   vec2 mapCords = vTextureCoord.xy;","   mapCords += (dimensions.zw + offset)/ dimensions.xy ;","   mapCords.y *= -1.0;","   mapCords.y += 1.0;","   vec2 matSample = texture2D(displacementMap, mapCords).xy;","   matSample -= 0.5;","   matSample *= scale;","   matSample /= mapDimensions;","   gl_FragColor = texture2D(uSampler, vec2(vTextureCoord.x + matSample.x, vTextureCoord.y + matSample.y));","   gl_FragColor.rgb = mix( gl_FragColor.rgb, gl_FragColor.rgb, 1.0);","   vec2 cord = vTextureCoord;","}"]},n.DisplacementFilter.prototype=Object.create(n.AbstractFilter.prototype),n.DisplacementFilter.prototype.constructor=n.DisplacementFilter,n.DisplacementFilter.prototype.onTextureLoaded=function(){this.uniforms.mapDimensions.value.x=this.uniforms.displacementMap.value.width,this.uniforms.mapDimensions.value.y=this.uniforms.displacementMap.value.height,this.uniforms.displacementMap.value.baseTexture.off("loaded",this.boundLoadedFunction)},Object.defineProperty(n.DisplacementFilter.prototype,"map",{get:function(){return this.uniforms.displacementMap.value},set:function(t){this.uniforms.displacementMap.value=t}}),Object.defineProperty(n.DisplacementFilter.prototype,"scale",{get:function(){return this.uniforms.scale.value},set:function(t){this.uniforms.scale.value=t}}),Object.defineProperty(n.DisplacementFilter.prototype,"offset",{get:function(){return this.uniforms.offset.value},set:function(t){this.uniforms.offset.value=t}}),n.PixelateFilter=function(){n.AbstractFilter.call(this),this.passes=[this],this.uniforms={invert:{type:"1f",value:0},dimensions:{type:"4fv",value:new n.Float32Array([1e4,100,10,10])},pixelSize:{type:"2f",value:{x:10,y:10}}},this.fragmentSrc=["precision mediump float;","varying vec2 vTextureCoord;","varying vec4 vColor;","uniform vec2 testDim;","uniform vec4 dimensions;","uniform vec2 pixelSize;","uniform sampler2D uSampler;","void main(void) {","   vec2 coord = vTextureCoord;","   vec2 size = dimensions.xy/pixelSize;","   vec2 color = floor( ( vTextureCoord * size ) ) / size + pixelSize/dimensions.xy * 0.5;","   gl_FragColor = texture2D(uSampler, color);","}"]},n.PixelateFilter.prototype=Object.create(n.AbstractFilter.prototype),n.PixelateFilter.prototype.constructor=n.PixelateFilter,Object.defineProperty(n.PixelateFilter.prototype,"size",{get:function(){return this.uniforms.pixelSize.value},set:function(t){this.dirty=!0,this.uniforms.pixelSize.value=t}}),n.BlurXFilter=function(){n.AbstractFilter.call(this),this.passes=[this],this.uniforms={blur:{type:"1f",value:1/512}},this.fragmentSrc=["precision mediump float;","varying vec2 vTextureCoord;","varying vec4 vColor;","uniform float blur;","uniform sampler2D uSampler;","void main(void) {","   vec4 sum = vec4(0.0);","   sum += texture2D(uSampler, vec2(vTextureCoord.x - 4.0*blur, vTextureCoord.y)) * 0.05;","   sum += texture2D(uSampler, vec2(vTextureCoord.x - 3.0*blur, vTextureCoord.y)) * 0.09;","   sum += texture2D(uSampler, vec2(vTextureCoord.x - 2.0*blur, vTextureCoord.y)) * 0.12;","   sum += texture2D(uSampler, vec2(vTextureCoord.x - blur, vTextureCoord.y)) * 0.15;","   sum += texture2D(uSampler, vec2(vTextureCoord.x, vTextureCoord.y)) * 0.16;","   sum += texture2D(uSampler, vec2(vTextureCoord.x + blur, vTextureCoord.y)) * 0.15;","   sum += texture2D(uSampler, vec2(vTextureCoord.x + 2.0*blur, vTextureCoord.y)) * 0.12;","   sum += texture2D(uSampler, vec2(vTextureCoord.x + 3.0*blur, vTextureCoord.y)) * 0.09;","   sum += texture2D(uSampler, vec2(vTextureCoord.x + 4.0*blur, vTextureCoord.y)) * 0.05;","   gl_FragColor = sum;","}"]
},n.BlurXFilter.prototype=Object.create(n.AbstractFilter.prototype),n.BlurXFilter.prototype.constructor=n.BlurXFilter,Object.defineProperty(n.BlurXFilter.prototype,"blur",{get:function(){return this.uniforms.blur.value/(1/7e3)},set:function(t){this.dirty=!0,this.uniforms.blur.value=1/7e3*t}}),n.BlurYFilter=function(){n.AbstractFilter.call(this),this.passes=[this],this.uniforms={blur:{type:"1f",value:1/512}},this.fragmentSrc=["precision mediump float;","varying vec2 vTextureCoord;","varying vec4 vColor;","uniform float blur;","uniform sampler2D uSampler;","void main(void) {","   vec4 sum = vec4(0.0);","   sum += texture2D(uSampler, vec2(vTextureCoord.x, vTextureCoord.y - 4.0*blur)) * 0.05;","   sum += texture2D(uSampler, vec2(vTextureCoord.x, vTextureCoord.y - 3.0*blur)) * 0.09;","   sum += texture2D(uSampler, vec2(vTextureCoord.x, vTextureCoord.y - 2.0*blur)) * 0.12;","   sum += texture2D(uSampler, vec2(vTextureCoord.x, vTextureCoord.y - blur)) * 0.15;","   sum += texture2D(uSampler, vec2(vTextureCoord.x, vTextureCoord.y)) * 0.16;","   sum += texture2D(uSampler, vec2(vTextureCoord.x, vTextureCoord.y + blur)) * 0.15;","   sum += texture2D(uSampler, vec2(vTextureCoord.x, vTextureCoord.y + 2.0*blur)) * 0.12;","   sum += texture2D(uSampler, vec2(vTextureCoord.x, vTextureCoord.y + 3.0*blur)) * 0.09;","   sum += texture2D(uSampler, vec2(vTextureCoord.x, vTextureCoord.y + 4.0*blur)) * 0.05;","   gl_FragColor = sum;","}"]},n.BlurYFilter.prototype=Object.create(n.AbstractFilter.prototype),n.BlurYFilter.prototype.constructor=n.BlurYFilter,Object.defineProperty(n.BlurYFilter.prototype,"blur",{get:function(){return this.uniforms.blur.value/(1/7e3)},set:function(t){this.uniforms.blur.value=1/7e3*t}}),n.BlurFilter=function(){this.blurXFilter=new n.BlurXFilter,this.blurYFilter=new n.BlurYFilter,this.passes=[this.blurXFilter,this.blurYFilter]},n.BlurFilter.prototype=Object.create(n.AbstractFilter.prototype),n.BlurFilter.prototype.constructor=n.BlurFilter,Object.defineProperty(n.BlurFilter.prototype,"blur",{get:function(){return this.blurXFilter.blur},set:function(t){this.blurXFilter.blur=this.blurYFilter.blur=t}}),Object.defineProperty(n.BlurFilter.prototype,"blurX",{get:function(){return this.blurXFilter.blur},set:function(t){this.blurXFilter.blur=t}}),Object.defineProperty(n.BlurFilter.prototype,"blurY",{get:function(){return this.blurYFilter.blur},set:function(t){this.blurYFilter.blur=t}}),n.InvertFilter=function(){n.AbstractFilter.call(this),this.passes=[this],this.uniforms={invert:{type:"1f",value:1}},this.fragmentSrc=["precision mediump float;","varying vec2 vTextureCoord;","varying vec4 vColor;","uniform float invert;","uniform sampler2D uSampler;","void main(void) {","   gl_FragColor = texture2D(uSampler, vTextureCoord);","   gl_FragColor.rgb = mix( (vec3(1)-gl_FragColor.rgb) * gl_FragColor.a, gl_FragColor.rgb, 1.0 - invert);","}"]},n.InvertFilter.prototype=Object.create(n.AbstractFilter.prototype),n.InvertFilter.prototype.constructor=n.InvertFilter,Object.defineProperty(n.InvertFilter.prototype,"invert",{get:function(){return this.uniforms.invert.value},set:function(t){this.uniforms.invert.value=t}}),n.SepiaFilter=function(){n.AbstractFilter.call(this),this.passes=[this],this.uniforms={sepia:{type:"1f",value:1}},this.fragmentSrc=["precision mediump float;","varying vec2 vTextureCoord;","varying vec4 vColor;","uniform float sepia;","uniform sampler2D uSampler;","const mat3 sepiaMatrix = mat3(0.3588, 0.7044, 0.1368, 0.2990, 0.5870, 0.1140, 0.2392, 0.4696, 0.0912);","void main(void) {","   gl_FragColor = texture2D(uSampler, vTextureCoord);","   gl_FragColor.rgb = mix( gl_FragColor.rgb, gl_FragColor.rgb * sepiaMatrix, sepia);","}"]},n.SepiaFilter.prototype=Object.create(n.AbstractFilter.prototype),n.SepiaFilter.prototype.constructor=n.SepiaFilter,Object.defineProperty(n.SepiaFilter.prototype,"sepia",{get:function(){return this.uniforms.sepia.value},set:function(t){this.uniforms.sepia.value=t}}),n.TwistFilter=function(){n.AbstractFilter.call(this),this.passes=[this],this.uniforms={radius:{type:"1f",value:.5},angle:{type:"1f",value:5},offset:{type:"2f",value:{x:.5,y:.5}}},this.fragmentSrc=["precision mediump float;","varying vec2 vTextureCoord;","varying vec4 vColor;","uniform vec4 dimensions;","uniform sampler2D uSampler;","uniform float radius;","uniform float angle;","uniform vec2 offset;","void main(void) {","   vec2 coord = vTextureCoord - offset;","   float distance = length(coord);","   if (distance < radius) {","       float ratio = (radius - distance) / radius;","       float angleMod = ratio * ratio * angle;","       float s = sin(angleMod);","       float c = cos(angleMod);","       coord = vec2(coord.x * c - coord.y * s, coord.x * s + coord.y * c);","   }","   gl_FragColor = texture2D(uSampler, coord+offset);","}"]},n.TwistFilter.prototype=Object.create(n.AbstractFilter.prototype),n.TwistFilter.prototype.constructor=n.TwistFilter,Object.defineProperty(n.TwistFilter.prototype,"offset",{get:function(){return this.uniforms.offset.value},set:function(t){this.dirty=!0,this.uniforms.offset.value=t}}),Object.defineProperty(n.TwistFilter.prototype,"radius",{get:function(){return this.uniforms.radius.value},set:function(t){this.dirty=!0,this.uniforms.radius.value=t}}),Object.defineProperty(n.TwistFilter.prototype,"angle",{get:function(){return this.uniforms.angle.value},set:function(t){this.dirty=!0,this.uniforms.angle.value=t}}),n.ColorStepFilter=function(){n.AbstractFilter.call(this),this.passes=[this],this.uniforms={step:{type:"1f",value:5}},this.fragmentSrc=["precision mediump float;","varying vec2 vTextureCoord;","varying vec4 vColor;","uniform sampler2D uSampler;","uniform float step;","void main(void) {","   vec4 color = texture2D(uSampler, vTextureCoord);","   color = floor(color * step) / step;","   gl_FragColor = color;","}"]},n.ColorStepFilter.prototype=Object.create(n.AbstractFilter.prototype),n.ColorStepFilter.prototype.constructor=n.ColorStepFilter,Object.defineProperty(n.ColorStepFilter.prototype,"step",{get:function(){return this.uniforms.step.value},set:function(t){this.uniforms.step.value=t}}),n.DotScreenFilter=function(){n.AbstractFilter.call(this),this.passes=[this],this.uniforms={scale:{type:"1f",value:1},angle:{type:"1f",value:5},dimensions:{type:"4fv",value:[0,0,0,0]}},this.fragmentSrc=["precision mediump float;","varying vec2 vTextureCoord;","varying vec4 vColor;","uniform vec4 dimensions;","uniform sampler2D uSampler;","uniform float angle;","uniform float scale;","float pattern() {","   float s = sin(angle), c = cos(angle);","   vec2 tex = vTextureCoord * dimensions.xy;","   vec2 point = vec2(","       c * tex.x - s * tex.y,","       s * tex.x + c * tex.y","   ) * scale;","   return (sin(point.x) * sin(point.y)) * 4.0;","}","void main() {","   vec4 color = texture2D(uSampler, vTextureCoord);","   float average = (color.r + color.g + color.b) / 3.0;","   gl_FragColor = vec4(vec3(average * 10.0 - 5.0 + pattern()), color.a);","}"]},n.DotScreenFilter.prototype=Object.create(n.AbstractFilter.prototype),n.DotScreenFilter.prototype.constructor=n.DotScreenFilter,Object.defineProperty(n.DotScreenFilter.prototype,"scale",{get:function(){return this.uniforms.scale.value},set:function(t){this.dirty=!0,this.uniforms.scale.value=t}}),Object.defineProperty(n.DotScreenFilter.prototype,"angle",{get:function(){return this.uniforms.angle.value},set:function(t){this.dirty=!0,this.uniforms.angle.value=t}}),n.CrossHatchFilter=function(){n.AbstractFilter.call(this),this.passes=[this],this.uniforms={blur:{type:"1f",value:1/512}},this.fragmentSrc=["precision mediump float;","varying vec2 vTextureCoord;","varying vec4 vColor;","uniform float blur;","uniform sampler2D uSampler;","void main(void) {","    float lum = length(texture2D(uSampler, vTextureCoord.xy).rgb);","    gl_FragColor = vec4(1.0, 1.0, 1.0, 1.0);","    if (lum < 1.00) {","        if (mod(gl_FragCoord.x + gl_FragCoord.y, 10.0) == 0.0) {","            gl_FragColor = vec4(0.0, 0.0, 0.0, 1.0);","        }","    }","    if (lum < 0.75) {","        if (mod(gl_FragCoord.x - gl_FragCoord.y, 10.0) == 0.0) {","            gl_FragColor = vec4(0.0, 0.0, 0.0, 1.0);","        }","    }","    if (lum < 0.50) {","        if (mod(gl_FragCoord.x + gl_FragCoord.y - 5.0, 10.0) == 0.0) {","            gl_FragColor = vec4(0.0, 0.0, 0.0, 1.0);","        }","    }","    if (lum < 0.3) {","        if (mod(gl_FragCoord.x - gl_FragCoord.y - 5.0, 10.0) == 0.0) {","            gl_FragColor = vec4(0.0, 0.0, 0.0, 1.0);","        }","    }","}"]},n.CrossHatchFilter.prototype=Object.create(n.AbstractFilter.prototype),n.CrossHatchFilter.prototype.constructor=n.CrossHatchFilter,Object.defineProperty(n.CrossHatchFilter.prototype,"blur",{get:function(){return this.uniforms.blur.value/(1/7e3)},set:function(t){this.uniforms.blur.value=1/7e3*t}}),n.RGBSplitFilter=function(){n.AbstractFilter.call(this),this.passes=[this],this.uniforms={red:{type:"2f",value:{x:20,y:20}},green:{type:"2f",value:{x:-20,y:20}},blue:{type:"2f",value:{x:20,y:-20}},dimensions:{type:"4fv",value:[0,0,0,0]}},this.fragmentSrc=["precision mediump float;","varying vec2 vTextureCoord;","varying vec4 vColor;","uniform vec2 red;","uniform vec2 green;","uniform vec2 blue;","uniform vec4 dimensions;","uniform sampler2D uSampler;","void main(void) {","   gl_FragColor.r = texture2D(uSampler, vTextureCoord + red/dimensions.xy).r;","   gl_FragColor.g = texture2D(uSampler, vTextureCoord + green/dimensions.xy).g;","   gl_FragColor.b = texture2D(uSampler, vTextureCoord + blue/dimensions.xy).b;","   gl_FragColor.a = texture2D(uSampler, vTextureCoord).a;","}"]},n.RGBSplitFilter.prototype=Object.create(n.AbstractFilter.prototype),n.RGBSplitFilter.prototype.constructor=n.RGBSplitFilter,Object.defineProperty(n.RGBSplitFilter.prototype,"red",{get:function(){return this.uniforms.red.value},set:function(t){this.uniforms.red.value=t}}),Object.defineProperty(n.RGBSplitFilter.prototype,"green",{get:function(){return this.uniforms.green.value},set:function(t){this.uniforms.green.value=t}}),Object.defineProperty(n.RGBSplitFilter.prototype,"blue",{get:function(){return this.uniforms.blue.value},set:function(t){this.uniforms.blue.value=t}}),"undefined"!=typeof r?("undefined"!=typeof e&&e.exports&&(r=e.exports=n),r.PIXI=n):"undefined"!=typeof define&&define.amd?define(n):t.PIXI=n}).call(this)},{}],232:[function(t,e,r){(function(t){!function(t){"use strict";if("function"==typeof bootstrap)bootstrap("promise",t);else if("object"==typeof r&&"object"==typeof e)e.exports=t();else if("function"==typeof define&&define.amd)define(t);else if("undefined"!=typeof ses){if(!ses.ok())return;ses.makeQ=t}else{if("undefined"==typeof self)throw new Error("This environment was not anticiapted by Q. Please file a bug.");self.Q=t()}}(function(){"use strict";function e(t){return function(){return H.apply(t,arguments)}}function r(t){return t===Object(t)}function n(t){return"[object StopIteration]"===ee(t)||t instanceof z}function i(t,e){if(G&&e.stack&&"object"==typeof t&&null!==t&&t.stack&&-1===t.stack.indexOf(re)){for(var r=[],n=e;n;n=n.source)n.stack&&r.unshift(n.stack);r.unshift(t.stack);var i=r.join("\n"+re+"\n");t.stack=o(i)}}function o(t){for(var e=t.split("\n"),r=[],n=0;n<e.length;++n){var i=e[n];h(i)||s(i)||!i||r.push(i)}return r.join("\n")}function s(t){return-1!==t.indexOf("(module.js:")||-1!==t.indexOf("(node.js:")}function a(t){var e=/at .+ \((.+):(\d+):(?:\d+)\)$/.exec(t);if(e)return[e[1],Number(e[2])];var r=/at ([^ ]+):(\d+):(?:\d+)$/.exec(t);if(r)return[r[1],Number(r[2])];var n=/.*@(.+):(\d+)$/.exec(t);return n?[n[1],Number(n[2])]:void 0}function h(t){var e=a(t);if(!e)return!1;var r=e[0],n=e[1];return r===W&&n>=q&&se>=n}function c(){if(G)try{throw new Error}catch(n){var t=n.stack.split("\n"),e=t[0].indexOf("@")>0?t[1]:t[2],r=a(e);if(!r)return;return W=r[0],r[1]}}function u(t,e,r){return function(){return"undefined"!=typeof console&&"function"==typeof console.warn&&console.warn(e+" is deprecated, use "+r+" instead.",new Error("").stack),t.apply(t,arguments)}}function f(t){return t instanceof v?t:m(t)?M(t):C(t)}function d(){function t(t){e=t,o.source=t,K(r,function(e,r){f.nextTick(function(){t.promiseDispatch.apply(t,r)})},void 0),r=void 0,n=void 0}var e,r=[],n=[],i=Q(d.prototype),o=Q(v.prototype);if(o.promiseDispatch=function(t,i,o){var s=X(arguments);r?(r.push(s),"when"===i&&o[1]&&n.push(o[1])):f.nextTick(function(){e.promiseDispatch.apply(e,s)})},o.valueOf=function(){if(r)return o;var t=g(e);return y(t)&&(e=t),t},o.inspect=function(){return e?e.inspect():{state:"pending"}},f.longStackSupport&&G)try{throw new Error}catch(t){o.stack=t.stack.substring(t.stack.indexOf("\n")+1)}return i.promise=o,i.resolve=function(r){e||t(f(r))},i.fulfill=function(r){e||t(C(r))},i.reject=function(r){e||t(E(r))},i.notify=function(t){e||K(n,function(e,r){f.nextTick(function(){r(t)})},void 0)},i}function l(t){if("function"!=typeof t)throw new TypeError("resolver must be a function.");var e=d();try{t(e.resolve,e.reject,e.notify)}catch(t){e.reject(t)}return e.promise}function p(t){return l(function(e,r){for(var n=0,i=t.length;i>n;n++)f(t[n]).then(e,r)})}function v(t,e,r){void 0===e&&(e=function(t){return E(new Error("Promise does not support operation: "+t))}),void 0===r&&(r=function(){return{state:"unknown"}});var n=Q(v.prototype);if(n.promiseDispatch=function(r,i,o){var s;try{s=t[i]?t[i].apply(n,o):e.call(n,i,o)}catch(t){s=E(t)}r&&r(s)},n.inspect=r,r){var i=r();"rejected"===i.state&&(n.exception=i.reason),n.valueOf=function(){var t=r();return"pending"===t.state||"rejected"===t.state?n:t.value}}return n}function b(t,e,r,n){return f(t).then(e,r,n)}function g(t){if(y(t)){var e=t.inspect();if("fulfilled"===e.state)return e.value}return t}function y(t){return t instanceof v}function m(t){return r(t)&&"function"==typeof t.then}function w(t){return y(t)&&"pending"===t.inspect().state}function x(t){return!y(t)||"fulfilled"===t.inspect().state}function _(t){return y(t)&&"rejected"===t.inspect().state}function S(){ne.length=0,ie.length=0,oe||(oe=!0)}function T(t,e){oe&&(ie.push(t),ne.push(e&&"undefined"!=typeof e.stack?e.stack:"(no stack) "+e))}function A(t){if(oe){var e=J(ie,t);-1!==e&&(ie.splice(e,1),ne.splice(e,1))}}function E(t){var e=v({when:function(e){return e&&A(this),e?e(t):this}},function(){return this},function(){return{state:"rejected",reason:t}});return T(e,t),e}function C(t){return v({when:function(){return t},get:function(e){return t[e]},set:function(e,r){t[e]=r},delete:function(e){delete t[e]},post:function(e,r){return null===e||void 0===e?t.apply(void 0,r):t[e].apply(t,r)},apply:function(e,r){return t.apply(e,r)},keys:function(){return te(t)}},void 0,function(){return{state:"fulfilled",value:t}})}function M(t){var e=d();return f.nextTick(function(){try{t.then(e.resolve,e.reject,e.notify)}catch(t){e.reject(t)}}),e.promise}function R(t){return v({isDef:function(){}},function(e,r){return O(t,e,r)},function(){return f(t).inspect()})}function k(t,e,r){return f(t).spread(e,r)}function B(t){return function(){function e(t,e){var s;if("undefined"==typeof StopIteration){try{s=r[t](e)}catch(t){return E(t)}return s.done?f(s.value):b(s.value,i,o)}try{s=r[t](e)}catch(t){return n(t)?f(t.value):E(t)}return b(s,i,o)}var r=t.apply(this,arguments),i=e.bind(e,"next"),o=e.bind(e,"throw");return i()}}function I(t){f.done(f.async(t)())}function P(t){throw new z(t)}function L(t){return function(){return k([this,D(arguments)],function(e,r){return t.apply(e,r)})}}function O(t,e,r){return f(t).dispatch(e,r)}function D(t){return b(t,function(t){var e=0,r=d();return K(t,function(n,i,o){var s;y(i)&&"fulfilled"===(s=i.inspect()).state?t[o]=s.value:(++e,b(i,function(n){t[o]=n,0===--e&&r.resolve(t)},r.reject,function(t){r.notify({index:o,value:t})}))},void 0),0===e&&r.resolve(t),r.promise})}function j(t){return b(t,function(t){return t=$(t,f),b(D($(t,function(t){return b(t,Y,Y)})),function(){return t})})}function F(t){return f(t).allSettled()}function U(t,e){return f(t).then(void 0,void 0,e)}function N(t,e){return f(t).nodeify(e)}var G=!1;try{throw new Error}catch(t){G=!!t.stack}var W,z,q=c(),Y=function(){},V=function(){function e(){for(;r.next;){r=r.next;var t=r.task;r.task=void 0;var n=r.domain;n&&(r.domain=void 0,n.enter());try{t()}catch(t){if(s)throw n&&n.exit(),setTimeout(e,0),n&&n.enter(),t;setTimeout(function(){throw t},0)}n&&n.exit()}i=!1}var r={task:void 0,next:null},n=r,i=!1,o=void 0,s=!1;if(V=function(e){n=n.next={task:e,domain:s&&t.domain,next:null},i||(i=!0,o())},"undefined"!=typeof t&&t.nextTick)s=!0,o=function(){t.nextTick(e)};else if("function"==typeof setImmediate)o="undefined"!=typeof window?setImmediate.bind(window,e):function(){setImmediate(e)};else if("undefined"!=typeof MessageChannel){var a=new MessageChannel;a.port1.onmessage=function(){o=h,a.port1.onmessage=e,e()};var h=function(){a.port2.postMessage(0)};o=function(){setTimeout(e,0),h()}}else o=function(){setTimeout(e,0)};return V}(),H=Function.call,X=e(Array.prototype.slice),K=e(Array.prototype.reduce||function(t,e){var r=0,n=this.length;if(1===arguments.length)for(;;){if(r in this){e=this[r++];break}if(++r>=n)throw new TypeError}for(;n>r;r++)r in this&&(e=t(e,this[r],r));return e}),J=e(Array.prototype.indexOf||function(t){for(var e=0;e<this.length;e++)if(this[e]===t)return e;return-1}),$=e(Array.prototype.map||function(t,e){var r=this,n=[];return K(r,function(i,o,s){n.push(t.call(e,o,s,r))},void 0),n}),Q=Object.create||function(t){function e(){}return e.prototype=t,new e},Z=e(Object.prototype.hasOwnProperty),te=Object.keys||function(t){var e=[];for(var r in t)Z(t,r)&&e.push(r);return e},ee=e(Object.prototype.toString);z="undefined"!=typeof ReturnValue?ReturnValue:function(t){this.value=t};var re="From previous event:";f.resolve=f,f.nextTick=V,f.longStackSupport=!1,"object"==typeof t&&t&&t.env&&t.env.Q_DEBUG&&(f.longStackSupport=!0),f.defer=d,d.prototype.makeNodeResolver=function(){var t=this;return function(e,r){e?t.reject(e):t.resolve(arguments.length>2?X(arguments,1):r)}},f.Promise=l,f.promise=l,l.race=p,l.all=D,l.reject=E,l.resolve=f,f.passByCopy=function(t){return t},v.prototype.passByCopy=function(){return this},f.join=function(t,e){return f(t).join(e)},v.prototype.join=function(t){return f([this,t]).spread(function(t,e){if(t===e)return t;throw new Error("Can't join: not the same: "+t+" "+e)})},f.race=p,v.prototype.race=function(){return this.then(f.race)},f.makePromise=v,v.prototype.toString=function(){return"[object Promise]"},v.prototype.then=function(t,e,r){function n(e){try{return"function"==typeof t?t(e):e}catch(t){return E(t)}}function o(t){if("function"==typeof e){i(t,a);try{return e(t)}catch(t){return E(t)}}return E(t)}function s(t){return"function"==typeof r?r(t):t}var a=this,h=d(),c=!1;return f.nextTick(function(){a.promiseDispatch(function(t){c||(c=!0,h.resolve(n(t)))},"when",[function(t){c||(c=!0,h.resolve(o(t)))}])}),a.promiseDispatch(void 0,"when",[void 0,function(t){var e,r=!1;try{e=s(t)}catch(t){if(r=!0,!f.onerror)throw t;f.onerror(t)}r||h.notify(e)}]),h.promise},f.tap=function(t,e){return f(t).tap(e)},v.prototype.tap=function(t){return t=f(t),this.then(function(e){return t.fcall(e).thenResolve(e)})},f.when=b,v.prototype.thenResolve=function(t){return this.then(function(){return t})},f.thenResolve=function(t,e){return f(t).thenResolve(e)},v.prototype.thenReject=function(t){return this.then(function(){throw t})},f.thenReject=function(t,e){return f(t).thenReject(e)},f.nearer=g,f.isPromise=y,f.isPromiseAlike=m,f.isPending=w,v.prototype.isPending=function(){return"pending"===this.inspect().state},f.isFulfilled=x,v.prototype.isFulfilled=function(){return"fulfilled"===this.inspect().state},f.isRejected=_,v.prototype.isRejected=function(){return"rejected"===this.inspect().state};var ne=[],ie=[],oe=!0;f.resetUnhandledRejections=S,f.getUnhandledReasons=function(){return ne.slice()},f.stopUnhandledRejectionTracking=function(){S(),oe=!1},S(),f.reject=E,f.fulfill=C,f.master=R,f.spread=k,v.prototype.spread=function(t,e){return this.all().then(function(e){return t.apply(void 0,e)},e)},f.async=B,f.spawn=I,f.return=P,f.promised=L,f.dispatch=O,v.prototype.dispatch=function(t,e){var r=this,n=d();return f.nextTick(function(){r.promiseDispatch(n.resolve,t,e)}),n.promise},f.get=function(t,e){return f(t).dispatch("get",[e])},v.prototype.get=function(t){return this.dispatch("get",[t])},f.set=function(t,e,r){return f(t).dispatch("set",[e,r])},v.prototype.set=function(t,e){return this.dispatch("set",[t,e])},f.del=f.delete=function(t,e){return f(t).dispatch("delete",[e])},v.prototype.del=v.prototype.delete=function(t){return this.dispatch("delete",[t])},f.mapply=f.post=function(t,e,r){return f(t).dispatch("post",[e,r])},v.prototype.mapply=v.prototype.post=function(t,e){return this.dispatch("post",[t,e])},f.send=f.mcall=f.invoke=function(t,e){return f(t).dispatch("post",[e,X(arguments,2)])},v.prototype.send=v.prototype.mcall=v.prototype.invoke=function(t){return this.dispatch("post",[t,X(arguments,1)])},f.fapply=function(t,e){return f(t).dispatch("apply",[void 0,e])},v.prototype.fapply=function(t){return this.dispatch("apply",[void 0,t])},f.try=f.fcall=function(t){return f(t).dispatch("apply",[void 0,X(arguments,1)])},v.prototype.fcall=function(){return this.dispatch("apply",[void 0,X(arguments)])},f.fbind=function(t){var e=f(t),r=X(arguments,1);return function(){return e.dispatch("apply",[this,r.concat(X(arguments))])}},v.prototype.fbind=function(){var t=this,e=X(arguments);return function(){return t.dispatch("apply",[this,e.concat(X(arguments))])}},f.keys=function(t){return f(t).dispatch("keys",[])},v.prototype.keys=function(){return this.dispatch("keys",[])},f.all=D,v.prototype.all=function(){return D(this)},f.allResolved=u(j,"allResolved","allSettled"),v.prototype.allResolved=function(){return j(this)},f.allSettled=F,v.prototype.allSettled=function(){return this.then(function(t){return D($(t,function(t){function e(){return t.inspect()}return t=f(t),t.then(e,e)}))})},f.fail=f.catch=function(t,e){return f(t).then(void 0,e)},v.prototype.fail=v.prototype.catch=function(t){return this.then(void 0,t)},f.progress=U,v.prototype.progress=function(t){return this.then(void 0,void 0,t)},f.fin=f.finally=function(t,e){return f(t).finally(e)},v.prototype.fin=v.prototype.finally=function(t){return t=f(t),this.then(function(e){return t.fcall().then(function(){return e})},function(e){return t.fcall().then(function(){throw e})})},f.done=function(t,e,r,n){return f(t).done(e,r,n)},v.prototype.done=function(e,r,n){var o=function(t){f.nextTick(function(){if(i(t,s),!f.onerror)throw t;f.onerror(t)})},s=e||r||n?this.then(e,r,n):this;"object"==typeof t&&t&&t.domain&&(o=t.domain.bind(o)),s.then(void 0,o)},f.timeout=function(t,e,r){return f(t).timeout(e,r)},v.prototype.timeout=function(t,e){var r=d(),n=setTimeout(function(){e&&"string"!=typeof e||(e=new Error(e||"Timed out after "+t+" ms"),e.code="ETIMEDOUT"),r.reject(e)},t);return this.then(function(t){clearTimeout(n),r.resolve(t)},function(t){clearTimeout(n),r.reject(t)},r.notify),r.promise},f.delay=function(t,e){return void 0===e&&(e=t,t=void 0),f(t).delay(e)},v.prototype.delay=function(t){return this.then(function(e){var r=d();return setTimeout(function(){r.resolve(e)},t),r.promise})},f.nfapply=function(t,e){return f(t).nfapply(e)},v.prototype.nfapply=function(t){var e=d(),r=X(t);return r.push(e.makeNodeResolver()),this.fapply(r).fail(e.reject),e.promise},f.nfcall=function(t){var e=X(arguments,1);return f(t).nfapply(e)},v.prototype.nfcall=function(){var t=X(arguments),e=d();return t.push(e.makeNodeResolver()),this.fapply(t).fail(e.reject),e.promise},f.nfbind=f.denodeify=function(t){var e=X(arguments,1);return function(){var r=e.concat(X(arguments)),n=d();return r.push(n.makeNodeResolver()),f(t).fapply(r).fail(n.reject),n.promise}},v.prototype.nfbind=v.prototype.denodeify=function(){var t=X(arguments);return t.unshift(this),f.denodeify.apply(void 0,t)},f.nbind=function(t,e){var r=X(arguments,2);return function(){function n(){return t.apply(e,arguments)}var i=r.concat(X(arguments)),o=d();return i.push(o.makeNodeResolver()),f(n).fapply(i).fail(o.reject),o.promise}},v.prototype.nbind=function(){var t=X(arguments,0);return t.unshift(this),f.nbind.apply(void 0,t)},f.nmapply=f.npost=function(t,e,r){return f(t).npost(e,r)},v.prototype.nmapply=v.prototype.npost=function(t,e){var r=X(e||[]),n=d();return r.push(n.makeNodeResolver()),this.dispatch("post",[t,r]).fail(n.reject),n.promise},f.nsend=f.nmcall=f.ninvoke=function(t,e){var r=X(arguments,2),n=d();return r.push(n.makeNodeResolver()),f(t).dispatch("post",[e,r]).fail(n.reject),n.promise},v.prototype.nsend=v.prototype.nmcall=v.prototype.ninvoke=function(t){var e=X(arguments,1),r=d();return e.push(r.makeNodeResolver()),this.dispatch("post",[t,e]).fail(r.reject),r.promise},f.nodeify=N,v.prototype.nodeify=function(t){return t?void this.then(function(e){f.nextTick(function(){t(null,e)})},function(e){f.nextTick(function(){t(e)})}):this};var se=c();return f})}).call(this,t(208))},{}],233:[function(t,e,r){(function(t){!function(t){if("function"==typeof bootstrap)bootstrap("promise",t);else if("object"==typeof r)e.exports=t();else if("function"==typeof define&&define.amd)define(t);else if("undefined"!=typeof ses){if(!ses.ok())return;ses.makeQ=t}else Q=t()}(function(){"use strict";function e(t){return function(){return H.apply(t,arguments)}}function r(t){return t===Object(t)}function n(t){return"[object StopIteration]"===ee(t)||t instanceof z}function i(t,e){if(G&&e.stack&&"object"==typeof t&&null!==t&&t.stack&&-1===t.stack.indexOf(re)){for(var r=[],n=e;n;n=n.source)n.stack&&r.unshift(n.stack);r.unshift(t.stack);var i=r.join("\n"+re+"\n");t.stack=o(i)}}function o(t){for(var e=t.split("\n"),r=[],n=0;n<e.length;++n){var i=e[n];h(i)||s(i)||!i||r.push(i)}return r.join("\n")}function s(t){return-1!==t.indexOf("(module.js:")||-1!==t.indexOf("(node.js:")}function a(t){var e=/at .+ \((.+):(\d+):(?:\d+)\)$/.exec(t);if(e)return[e[1],Number(e[2])];var r=/at ([^ ]+):(\d+):(?:\d+)$/.exec(t);if(r)return[r[1],Number(r[2])];var n=/.*@(.+):(\d+)$/.exec(t);return n?[n[1],Number(n[2])]:void 0}function h(t){var e=a(t);if(!e)return!1;var r=e[0],n=e[1];return r===W&&n>=q&&se>=n}function c(){if(G)try{throw new Error}catch(n){var t=n.stack.split("\n"),e=t[0].indexOf("@")>0?t[1]:t[2],r=a(e);if(!r)return;return W=r[0],r[1]}}function u(t,e,r){return function(){return"undefined"!=typeof console&&"function"==typeof console.warn&&console.warn(e+" is deprecated, use "+r+" instead.",new Error("").stack),t.apply(t,arguments)}}function f(t){return y(t)?t:m(t)?M(t):C(t)}function d(){function t(t){e=t,o.source=t,K(r,function(e,r){V(function(){t.promiseDispatch.apply(t,r)})},void 0),r=void 0,n=void 0}var e,r=[],n=[],i=Q(d.prototype),o=Q(v.prototype);if(o.promiseDispatch=function(t,i,o){var s=X(arguments);r?(r.push(s),"when"===i&&o[1]&&n.push(o[1])):V(function(){e.promiseDispatch.apply(e,s)})},o.valueOf=function(){if(r)return o;var t=g(e);return y(t)&&(e=t),t},o.inspect=function(){return e?e.inspect():{state:"pending"}},f.longStackSupport&&G)try{throw new Error}catch(t){o.stack=t.stack.substring(t.stack.indexOf("\n")+1)}return i.promise=o,i.resolve=function(r){e||t(f(r))},i.fulfill=function(r){e||t(C(r))},i.reject=function(r){e||t(E(r))},i.notify=function(t){e||K(n,function(e,r){V(function(){r(t)})},void 0)},i}function l(t){if("function"!=typeof t)throw new TypeError("resolver must be a function.");var e=d();try{t(e.resolve,e.reject,e.notify)}catch(t){e.reject(t)}return e.promise}function p(t){return l(function(e,r){for(var n=0,i=t.length;i>n;n++)f(t[n]).then(e,r)})}function v(t,e,r){void 0===e&&(e=function(t){return E(new Error("Promise does not support operation: "+t))}),void 0===r&&(r=function(){return{state:"unknown"}});var n=Q(v.prototype);if(n.promiseDispatch=function(r,i,o){var s;try{s=t[i]?t[i].apply(n,o):e.call(n,i,o)}catch(t){s=E(t)}r&&r(s)},n.inspect=r,r){var i=r();"rejected"===i.state&&(n.exception=i.reason),n.valueOf=function(){var t=r();return"pending"===t.state||"rejected"===t.state?n:t.value}}return n}function b(t,e,r,n){return f(t).then(e,r,n)}function g(t){if(y(t)){var e=t.inspect();if("fulfilled"===e.state)return e.value}return t}function y(t){return r(t)&&"function"==typeof t.promiseDispatch&&"function"==typeof t.inspect}function m(t){return r(t)&&"function"==typeof t.then}function w(t){return y(t)&&"pending"===t.inspect().state}function x(t){return!y(t)||"fulfilled"===t.inspect().state}function _(t){return y(t)&&"rejected"===t.inspect().state}function S(){ne.length=0,ie.length=0,oe||(oe=!0)}function T(t,e){oe&&(ie.push(t),ne.push(e&&"undefined"!=typeof e.stack?e.stack:"(no stack) "+e))}function A(t){if(oe){var e=J(ie,t);-1!==e&&(ie.splice(e,1),ne.splice(e,1))}}function E(t){var e=v({when:function(e){return e&&A(this),e?e(t):this}},function(){return this},function(){return{state:"rejected",reason:t}});return T(e,t),e}function C(t){return v({when:function(){return t},get:function(e){return t[e]},set:function(e,r){t[e]=r},delete:function(e){delete t[e]},post:function(e,r){return null===e||void 0===e?t.apply(void 0,r):t[e].apply(t,r)},apply:function(e,r){return t.apply(e,r)},keys:function(){return te(t)}},void 0,function(){return{state:"fulfilled",value:t}})}function M(t){var e=d();return V(function(){try{t.then(e.resolve,e.reject,e.notify)}catch(t){e.reject(t)}}),e.promise}function R(t){return v({isDef:function(){}},function(e,r){return O(t,e,r)},function(){return f(t).inspect()})}function k(t,e,r){return f(t).spread(e,r)}function B(t){return function(){function e(t,e){var s;if("undefined"==typeof StopIteration){try{s=r[t](e)}catch(t){return E(t)}return s.done?s.value:b(s.value,i,o)}try{s=r[t](e)}catch(t){return n(t)?t.value:E(t)}return b(s,i,o)}var r=t.apply(this,arguments),i=e.bind(e,"next"),o=e.bind(e,"throw");return i()}}function I(t){f.done(f.async(t)())}function P(t){throw new z(t)}function L(t){return function(){return k([this,D(arguments)],function(e,r){return t.apply(e,r)})}}function O(t,e,r){return f(t).dispatch(e,r)}function D(t){return b(t,function(t){var e=0,r=d();return K(t,function(n,i,o){var s;y(i)&&"fulfilled"===(s=i.inspect()).state?t[o]=s.value:(++e,b(i,function(n){t[o]=n,0===--e&&r.resolve(t)},r.reject,function(t){r.notify({index:o,value:t})}))},void 0),0===e&&r.resolve(t),r.promise})}function j(t){return b(t,function(t){return t=$(t,f),b(D($(t,function(t){return b(t,Y,Y)})),function(){return t})})}function F(t){return f(t).allSettled()}function U(t,e){return f(t).then(void 0,void 0,e)}function N(t,e){return f(t).nodeify(e)}var G=!1;try{throw new Error}catch(t){G=!!t.stack}var W,z,q=c(),Y=function(){},V=function(){function e(){for(;r.next;){r=r.next;var t=r.task;r.task=void 0;var n=r.domain;n&&(r.domain=void 0,n.enter());try{t()}catch(t){if(s)throw n&&n.exit(),setTimeout(e,0),n&&n.enter(),t;setTimeout(function(){throw t},0)}n&&n.exit()}i=!1}var r={task:void 0,next:null},n=r,i=!1,o=void 0,s=!1;if(V=function(e){n=n.next={task:e,domain:s&&t.domain,next:null},i||(i=!0,o())},"undefined"!=typeof t&&t.nextTick)s=!0,o=function(){t.nextTick(e)};else if("function"==typeof setImmediate)o="undefined"!=typeof window?setImmediate.bind(window,e):function(){setImmediate(e)};else if("undefined"!=typeof MessageChannel){var a=new MessageChannel;a.port1.onmessage=function(){o=h,a.port1.onmessage=e,e()};var h=function(){a.port2.postMessage(0)};o=function(){setTimeout(e,0),h()}}else o=function(){setTimeout(e,0)};return V}(),H=Function.call,X=e(Array.prototype.slice),K=e(Array.prototype.reduce||function(t,e){var r=0,n=this.length;if(1===arguments.length)for(;;){if(r in this){e=this[r++];break}if(++r>=n)throw new TypeError}for(;n>r;r++)r in this&&(e=t(e,this[r],r));return e}),J=e(Array.prototype.indexOf||function(t){for(var e=0;e<this.length;e++)if(this[e]===t)return e;return-1}),$=e(Array.prototype.map||function(t,e){var r=this,n=[];return K(r,function(i,o,s){n.push(t.call(e,o,s,r))},void 0),n}),Q=Object.create||function(t){function e(){}return e.prototype=t,new e},Z=e(Object.prototype.hasOwnProperty),te=Object.keys||function(t){var e=[];
for(var r in t)Z(t,r)&&e.push(r);return e},ee=e(Object.prototype.toString);z="undefined"!=typeof ReturnValue?ReturnValue:function(t){this.value=t};var re="From previous event:";f.resolve=f,f.nextTick=V,f.longStackSupport=!1,f.defer=d,d.prototype.makeNodeResolver=function(){var t=this;return function(e,r){e?t.reject(e):t.resolve(arguments.length>2?X(arguments,1):r)}},f.Promise=l,f.promise=l,l.race=p,l.all=D,l.reject=E,l.resolve=f,f.passByCopy=function(t){return t},v.prototype.passByCopy=function(){return this},f.join=function(t,e){return f(t).join(e)},v.prototype.join=function(t){return f([this,t]).spread(function(t,e){if(t===e)return t;throw new Error("Can't join: not the same: "+t+" "+e)})},f.race=p,v.prototype.race=function(){return this.then(f.race)},f.makePromise=v,v.prototype.toString=function(){return"[object Promise]"},v.prototype.then=function(t,e,r){function n(e){try{return"function"==typeof t?t(e):e}catch(t){return E(t)}}function o(t){if("function"==typeof e){i(t,a);try{return e(t)}catch(t){return E(t)}}return E(t)}function s(t){return"function"==typeof r?r(t):t}var a=this,h=d(),c=!1;return V(function(){a.promiseDispatch(function(t){c||(c=!0,h.resolve(n(t)))},"when",[function(t){c||(c=!0,h.resolve(o(t)))}])}),a.promiseDispatch(void 0,"when",[void 0,function(t){var e,r=!1;try{e=s(t)}catch(t){if(r=!0,!f.onerror)throw t;f.onerror(t)}r||h.notify(e)}]),h.promise},f.when=b,v.prototype.thenResolve=function(t){return this.then(function(){return t})},f.thenResolve=function(t,e){return f(t).thenResolve(e)},v.prototype.thenReject=function(t){return this.then(function(){throw t})},f.thenReject=function(t,e){return f(t).thenReject(e)},f.nearer=g,f.isPromise=y,f.isPromiseAlike=m,f.isPending=w,v.prototype.isPending=function(){return"pending"===this.inspect().state},f.isFulfilled=x,v.prototype.isFulfilled=function(){return"fulfilled"===this.inspect().state},f.isRejected=_,v.prototype.isRejected=function(){return"rejected"===this.inspect().state};var ne=[],ie=[],oe=!0;f.resetUnhandledRejections=S,f.getUnhandledReasons=function(){return ne.slice()},f.stopUnhandledRejectionTracking=function(){S(),oe=!1},S(),f.reject=E,f.fulfill=C,f.master=R,f.spread=k,v.prototype.spread=function(t,e){return this.all().then(function(e){return t.apply(void 0,e)},e)},f.async=B,f.spawn=I,f.return=P,f.promised=L,f.dispatch=O,v.prototype.dispatch=function(t,e){var r=this,n=d();return V(function(){r.promiseDispatch(n.resolve,t,e)}),n.promise},f.get=function(t,e){return f(t).dispatch("get",[e])},v.prototype.get=function(t){return this.dispatch("get",[t])},f.set=function(t,e,r){return f(t).dispatch("set",[e,r])},v.prototype.set=function(t,e){return this.dispatch("set",[t,e])},f.del=f.delete=function(t,e){return f(t).dispatch("delete",[e])},v.prototype.del=v.prototype.delete=function(t){return this.dispatch("delete",[t])},f.mapply=f.post=function(t,e,r){return f(t).dispatch("post",[e,r])},v.prototype.mapply=v.prototype.post=function(t,e){return this.dispatch("post",[t,e])},f.send=f.mcall=f.invoke=function(t,e){return f(t).dispatch("post",[e,X(arguments,2)])},v.prototype.send=v.prototype.mcall=v.prototype.invoke=function(t){return this.dispatch("post",[t,X(arguments,1)])},f.fapply=function(t,e){return f(t).dispatch("apply",[void 0,e])},v.prototype.fapply=function(t){return this.dispatch("apply",[void 0,t])},f.try=f.fcall=function(t){return f(t).dispatch("apply",[void 0,X(arguments,1)])},v.prototype.fcall=function(){return this.dispatch("apply",[void 0,X(arguments)])},f.fbind=function(t){var e=f(t),r=X(arguments,1);return function(){return e.dispatch("apply",[this,r.concat(X(arguments))])}},v.prototype.fbind=function(){var t=this,e=X(arguments);return function(){return t.dispatch("apply",[this,e.concat(X(arguments))])}},f.keys=function(t){return f(t).dispatch("keys",[])},v.prototype.keys=function(){return this.dispatch("keys",[])},f.all=D,v.prototype.all=function(){return D(this)},f.allResolved=u(j,"allResolved","allSettled"),v.prototype.allResolved=function(){return j(this)},f.allSettled=F,v.prototype.allSettled=function(){return this.then(function(t){return D($(t,function(t){function e(){return t.inspect()}return t=f(t),t.then(e,e)}))})},f.fail=f.catch=function(t,e){return f(t).then(void 0,e)},v.prototype.fail=v.prototype.catch=function(t){return this.then(void 0,t)},f.progress=U,v.prototype.progress=function(t){return this.then(void 0,void 0,t)},f.fin=f.finally=function(t,e){return f(t).finally(e)},v.prototype.fin=v.prototype.finally=function(t){return t=f(t),this.then(function(e){return t.fcall().then(function(){return e})},function(e){return t.fcall().then(function(){throw e})})},f.done=function(t,e,r,n){return f(t).done(e,r,n)},v.prototype.done=function(e,r,n){var o=function(t){V(function(){if(i(t,s),!f.onerror)throw t;f.onerror(t)})},s=e||r||n?this.then(e,r,n):this;"object"==typeof t&&t&&t.domain&&(o=t.domain.bind(o)),s.then(void 0,o)},f.timeout=function(t,e,r){return f(t).timeout(e,r)},v.prototype.timeout=function(t,e){var r=d(),n=setTimeout(function(){r.reject(new Error(e||"Timed out after "+t+" ms"))},t);return this.then(function(t){clearTimeout(n),r.resolve(t)},function(t){clearTimeout(n),r.reject(t)},r.notify),r.promise},f.delay=function(t,e){return void 0===e&&(e=t,t=void 0),f(t).delay(e)},v.prototype.delay=function(t){return this.then(function(e){var r=d();return setTimeout(function(){r.resolve(e)},t),r.promise})},f.nfapply=function(t,e){return f(t).nfapply(e)},v.prototype.nfapply=function(t){var e=d(),r=X(t);return r.push(e.makeNodeResolver()),this.fapply(r).fail(e.reject),e.promise},f.nfcall=function(t){var e=X(arguments,1);return f(t).nfapply(e)},v.prototype.nfcall=function(){var t=X(arguments),e=d();return t.push(e.makeNodeResolver()),this.fapply(t).fail(e.reject),e.promise},f.nfbind=f.denodeify=function(t){var e=X(arguments,1);return function(){var r=e.concat(X(arguments)),n=d();return r.push(n.makeNodeResolver()),f(t).fapply(r).fail(n.reject),n.promise}},v.prototype.nfbind=v.prototype.denodeify=function(){var t=X(arguments);return t.unshift(this),f.denodeify.apply(void 0,t)},f.nbind=function(t,e){var r=X(arguments,2);return function(){function n(){return t.apply(e,arguments)}var i=r.concat(X(arguments)),o=d();return i.push(o.makeNodeResolver()),f(n).fapply(i).fail(o.reject),o.promise}},v.prototype.nbind=function(){var t=X(arguments,0);return t.unshift(this),f.nbind.apply(void 0,t)},f.nmapply=f.npost=function(t,e,r){return f(t).npost(e,r)},v.prototype.nmapply=v.prototype.npost=function(t,e){var r=X(e||[]),n=d();return r.push(n.makeNodeResolver()),this.dispatch("post",[t,r]).fail(n.reject),n.promise},f.nsend=f.nmcall=f.ninvoke=function(t,e){var r=X(arguments,2),n=d();return r.push(n.makeNodeResolver()),f(t).dispatch("post",[e,r]).fail(n.reject),n.promise},v.prototype.nsend=v.prototype.nmcall=v.prototype.ninvoke=function(t){var e=X(arguments,1),r=d();return e.push(r.makeNodeResolver()),this.dispatch("post",[t,e]).fail(r.reject),r.promise},f.nodeify=N,v.prototype.nodeify=function(t){return t?void this.then(function(e){V(function(){t(null,e)})},function(e){V(function(){t(e)})}):this};var se=c();return f})}).call(this,t(208))},{}],234:[function(t,e,r){!function(n){"object"==typeof r?e.exports=n(t(233)):"function"==typeof define&&define.amd?define(["q"],n):Qajax=n(Q)}(function(t){"use strict";function e(t,e){return t in e?e[t]:s.defaults[t]}function r(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);return t}function n(t){var e,r=[];for(e in t)t.hasOwnProperty(e)&&r.push(encodeURIComponent(e)+"="+encodeURIComponent(t[e]));return r.join("&")}function i(t){return-1===t.indexOf("?")}function o(t){s.defaults.logs&&window.console&&console.log(t)}var s=function(){var s,h=arguments;if(!h.length)throw new Error("Qajax: settings are required");if("string"==typeof h[0])s="object"==typeof h[1]&&h[1]||{},s.url=h[0];else{if("object"!=typeof h[0])throw new Error("Qajax: settings must be an object");s=h[0]}if(!s.url)throw new Error("Qajax: settings.url is required");if("cancellation"in s&&!t.isPromiseAlike(s.cancellation))throw new Error("cancellation must be a Promise.");var c=new XMLHttpRequest,u=s.cancellation||t.defer().promise,f=e("method",s),d=e("base",s),l=s.url,p=s.data,v=s.responseType,b=s.params||{},g=t.defer(),y=e("timeout",s),m=r({},e("headers",s)),w=e("cache",s),x=e("withCredentials",s);w&&(b[w===!0?"_":w]=(new Date).getTime()),d&&(l=d+l);var _=n(b);return _&&(l=l+(i(l)?"?":"&")+_),null!==p&&"object"==typeof p&&(a in m||(m[a]="application/json"),p=JSON.stringify(p)),t.fcall(function(){c.onreadystatechange=function(){if(4===c.readyState)try{o(f+" "+l+" => "+c.status),c.status?g.resolve(c):g.reject(c)}catch(t){g.reject(c)}},c.onprogress=function(t){g.notify(t)},c.open(f,l,!0),v&&(c.responseType=v);for(var t in m)m.hasOwnProperty(t)&&c.setRequestHeader(t,m[t]);return x&&(c.withCredentials=!0),void 0!==p&&null!==p?c.send(p):c.send(),u.fin(function(){g.promise.isFulfilled()||(o("Qajax cancellation reached."),c.abort())}),y?g.promise.timeout(y).fail(function(t){throw t instanceof Error&&(o("Qajax request delay reach in "+f+" "+l),c.abort()),c}):g.promise})};s.TIMEOUT=void 0,s.defaults={logs:!1,timeout:6e4,cache:!!(window.ActiveXObject||"ActiveXObject"in window),method:"GET",headers:{},base:""},s.filterStatus=function(e){var r,n;if(n=typeof e,"function"===n)r=e;else{if("number"!==n)throw"validStatus type "+n+" unsupported";r=function(t){return t===e}}return function(e){var n=0;try{n=e.status}catch(t){o("Qajax: failed to read xhr.status")}return 1223===n&&(n=204),r(n)?t.resolve(e):t.reject(e)}},s.filterSuccess=s.filterStatus(function(t){return t>=200&&300>t||304===t}),s.toJSON=function(e){return t.fcall(function(){return JSON.parse(e.responseText)})},s.getJSON=function(t){return s({url:t,method:"GET"}).then(s.filterSuccess).then(s.toJSON)},s.serialize=n;var a="Content-Type";return s})},{}],235:[function(t,e){function r(t,e){var r,o,s=n(),a=!1;return function(){return r=this,o=arguments,s.isPending()?a=!0:s=n.delay(e).then(function e(){return a=!1,n.fapply(i.bind(t,r),o).then(function(t){return a?e():t},function(t){if(a)return e();throw t})}),s}}var n=t(236),i=t(229);e.exports=r},{}],236:[function(t,e){e.exports=t(233)},{}],237:[function(t,e){e.exports=t(233)},{}],238:[function(t,e,r){!function(t){"object"==typeof r?e.exports=t():Qstart=t()}(function(){var e=window.Q||t(237),r=e.defer(),n=function(){window.removeEventListener("error",i),r.resolve(window.document)},i=function(t){r.reject(t)};return window.addEventListener("error",i,!1),window.cordova?window.document.addEventListener("deviceready",n,!1):window.document.addEventListener("readystatechange",function(){"complete"==document.readyState&&n()},!1),r.promise})},{}],239:[function(t,e){for(var r=t(230),n="undefined"==typeof window?{}:window,i=["moz","webkit"],o="AnimationFrame",s=n["request"+o],a=n["cancel"+o]||n["cancelRequest"+o],h=!0,c=0;c<i.length&&!s;c++)s=n[i[c]+"Request"+o],a=n[i[c]+"Cancel"+o]||n[i[c]+"CancelRequest"+o];if(!s||!a){h=!1;var u=0,f=0,d=[],l=1e3/60;s=function(t){if(0===d.length){var e=r(),n=Math.max(0,l-(e-u));u=n+e,setTimeout(function(){var t=d.slice(0);d.length=0;for(var e=0;e<t.length;e++)if(!t[e].cancelled)try{t[e].callback(u)}catch(t){setTimeout(function(){throw t},0)}},Math.round(n))}return d.push({handle:++f,callback:t,cancelled:!1}),f},a=function(t){for(var e=0;e<d.length;e++)d[e].handle===t&&(d[e].cancelled=!0)}}e.exports=function(t){return h?s.call(n,function(){try{t.apply(this,arguments)}catch(t){setTimeout(function(){throw t},0)}}):s.call(n,t)},e.exports.cancel=function(){a.apply(n,arguments)}},{}],240:[function(t,e){!function(e,r,n,i,o,s,a,h,c){function u(t){var e,r=t.length,n=this,o=0,s=n.i=n.j=0,a=n.S=[];for(r||(t=[r++]);i>o;)a[o]=o++;for(o=0;i>o;o++)a[o]=a[s=w&s+t[o%r]+(e=a[o])],a[s]=e;(n.g=function(t){for(var e,r=0,o=n.i,s=n.j,a=n.S;t--;)e=a[o=w&o+1],r=r*i+a[w&(a[o]=a[s=w&s+e])+(a[s]=e)];return n.i=o,n.j=s,r})(i)}function f(t,e){return e.i=t.i,e.j=t.j,e.S=t.S.slice(),e}function d(t,e){var r,n=[],i=typeof t;if(e&&"object"==i)for(r in t)try{n.push(d(t[r],e-1))}catch(t){}return n.length?n:"string"==i?t:t+"\x00"}function l(t,e){for(var r,n=t+"",i=0;i<n.length;)e[w&i]=w&(r^=19*e[w&i])+n.charCodeAt(i++);return v(e)}function p(t){try{return b?v(b.randomBytes(i)):(e.crypto.getRandomValues(t=new Uint8Array(i)),v(t))}catch(n){return[+new Date,e,(t=e.navigator)&&t.plugins,e.screen,v(r)]}}function v(t){return String.fromCharCode.apply(0,t)}var b,g=n.pow(i,o),y=n.pow(2,s),m=2*y,w=i-1,x=n["seed"+c]=function(t,e,s){var a=[];e=1==e?{entropy:!0}:e||{};var h=l(d(e.entropy?[t,v(r)]:null==t?p():t,3),a),b=new u(a);return l(v(b.S),r),(e.pass||s||function(t,e,r,i){return i&&(i.S&&f(i,b),t.state=function(){return f(b,{})}),r?(n[c]=t,e):t})(function(){for(var t=b.g(o),e=g,r=0;y>t;)t=(t+r)*i,e*=i,r=b.g(1);for(;t>=m;)t/=2,e/=2,r>>>=1;return(t+r)/e},h,"global"in e?e.global:this==n,e.state)};if(l(n[c](),r),a&&a.exports){a.exports=x;try{b=t(70)}catch(t){}}else h&&h.amd&&h(function(){return x})}(this,[],Math,256,6,52,"object"==typeof e&&e,"function"==typeof define&&define,"random")},{}],241:[function(t,e){function r(t,e,r,n,i){function o(t){return t?"number"!=typeof t.x||"number"!=typeof t.y||"number"!=typeof t.w||"number"!=typeof t.h?!1:isNaN(t.x)||isNaN(t.y)||isNaN(t.w)||isNaN(t.h)?!1:!0:!1}function s(t,e){return t.x==e.x&&t.y==e.y&&t.w==e.w&&t.h==e.h?!0:!1}function a(t,e,r,n){return{x:t,y:e,w:r,h:n,c:[],l:[],n:[]}}function h(t,e,r,n){return Math.sqrt((r-t)*(r-t)+(n-e)*(n-e))}function c(t,e,r,n,i,o,s){s||(s=-1);var a=i*i+o*o;if(0==a)return null;if(a=(t*o-e*i-r*o+n*i)/a,Math.abs(i)>Math.abs(o))var c=(t-r-a*o)/i;else var c=(e-n+a*i)/o;if(c>=0&&s>=c||0>s)return{s:c,t:a,x:r+c*i,y:n+c*o,dist:Math.abs(a)};if(0>c){var u=h(t,e,r,n);return{s:c,dist:u}}var u=h(t,e,r+s*i,n+s*o);return{s:c,dist:u}}function u(t,e,r){if(!t||!e)return!0;var n=c(e.x+.5*e.w,e.y+.5*e.h,t.x,t.y,t.dx,t.dy,t.dist);if(n){if(n.dist-=r,n.dist<0)return!0;if(n.dist*n.dist<=e.w*e.w+e.h*e.h)return!0}return!1}function f(t,e,r){return t&&e&&(t.x+t.w<e.x-r||t.y+t.h<e.y-r||t.x-r>e.x+e.w||t.y-r>e.y+e.h)?!1:!0}function d(t,e){var r=!1;e.w*e.h>t.w*t.h*x&&(r=!0),(e.x<t.x||e.y<t.y||e.x+e.w>t.x+t.w||e.y+e.h>t.y+t.h)&&(r=!0);for(var n=null,i=0;i<t.n.length;i++)if(f(e,t.n[i],0)){if(n){r=!0;break}n=t.n[i]}return{leaf:r,childnode:n}}function l(t,e){var r=d(t,e);if(r)t.l.push(e);else{if(!r.childnode)return;v(r.childnode,e)}}function p(t,e,r){if(!o(e))return 0;r?"string"!=typeof r&&(r="id"):r=!1;for(var n=0,i=0;i<t.c.length;i++)(r&&t.c[i][r]==e[r]||!r&&s(t.c[i],e))&&(n++,t.c.splice(i,1),i--);for(var i=0;i<t.l.length;i++)(r&&t.l[i][r]==e[r]||!r&&s(t.l[i],e))&&(n++,t.l.splice(i,1),i--);var a=d(t,e);return!a.leaf&&a.childnode?n+p(a.childnode,e,r):n}function v(t,e){if(o(e))if(0==t.n.length){if(t.c.push(e),t.c.length>w){var r=t.w/2,n=t.h/2;t.n.push(a(t.x,t.y,r,n),a(t.x+r,t.y,r,n),a(t.x,t.y+n,r,n),a(t.x+r,t.y+n,r,n));for(var i=0;i<t.c.length;i++)l(t,t.c[i]);t.c=[]}}else l(t,e)}function b(t,e,r,n,i,o){for(var s=0;s<e.l.length;s++)if((!i||t(r,e.l[s],n))&&!o(e.l[s]))return!1;for(var s=0;s<e.c.length;s++)if((!i||t(r,e.c[s],n))&&!o(e.c[s]))return!1;for(var a=0;a<e.n.length;a++)if(t(r,e.n[a],n)&&!b(t,e.n[a],r,n,i,o))return!1;return!0}function g(t,e,r,n){return b(f,t,e,r,!0,n)}function y(t,e,r,n){return b(u,t,e,r,!1,n)}function m(t,e,r,n){"function"==typeof r&&"undefined"==typeof n&&(n=r,r=0),null==e?g(t,e,r,n):"number"!=typeof e.x||"number"!=typeof e.y||isNaN(e.x)||isNaN(e.y)||("number"!=typeof e.dx||"number"!=typeof e.dy||isNaN(e.dx)||isNaN(e.dy)?"number"!=typeof e.w||"number"!=typeof e.h||isNaN(e.w)||isNaN(e.h)||g(t,e,r,n):y(t,e,r,n))}("number"!=typeof t||isNaN(t))&&(t=0),("number"!=typeof e||isNaN(e))&&(e=0),("number"!=typeof r||isNaN(r))&&(r=10),("number"!=typeof n||isNaN(n))&&(n=10);var w=25,x=.5;i&&("number"==typeof i.maxchildren&&i.maxchildren>0&&(w=i.maxchildren),"number"==typeof i.leafratio&&i.leafratio>=0&&(x=i.leafratio));var _=a(t,e,r,n);return{get:function(t,e,r){m(_,t,e,r)},put:function(t){v(_,t)},remove:function(t,e){return p(_,t,e)},stringify:function(){var i={x:t,y:e,w:r,h:n,maxc:w,leafratio:x,root:_};try{return JSON.stringify(i)}catch(t){return null}},parse:function(i){"string"==typeof i&&(i=JSON.parse(i)),t=i.x,e=i.y,r=i.w,n=i.h,w=i.maxc,x=i.leafratio,_=i.root}}}"undefined"!=typeof e&&(e.exports=r)},{}],242:[function(t,e){function r(t,e,n){if(!(this instanceof r))return new r(t,e,n);if("function"!=typeof t)throw new Error("SlidingWindow(alloc, free, options): alloc function is mandatory");if("function"!=typeof e)throw new Error("SlidingWindow(alloc, free, options): free function is mandatory");if(n)for(var i in n)this[i]=n[i];this.alloc=t,this.free=e,this._chunks={},this._right=null,this._left=null}r.prototype={chunkSize:1,right:0,left:0,bounds:[-1/0,+1/0],reverseIndex:function(t){return t*this.chunkSize},chunkIndex:function(t){return Math.floor(t/this.chunkSize)},getChunk:function(t){return this._chunks[this.chunkIndex(t)]},getChunkByIndex:function(t){return this._chunks[t]},destroy:function(t){for(var e=this._left;e<=this._right;++e)this.free(e,this._chunks[e],t),delete this._chunks[e];this._chunks=null,this.alloc=null,this.free=null},move:function(t,e){var r,n;if("number"!=typeof t||isNaN(t)){if(r=t[0],n=t[1],"number"!=typeof r||isNaN(r)||!isFinite(r))throw new Error("tail is not a finite number: "+[r,n]);if("number"!=typeof n||isNaN(n)||!isFinite(n))throw new Error("head is not a finite number: "+[r,n]);if(r>n)throw new Error("tail shouldn't be greater than head")}else r=n=t;var i,o,s=Math.min(this.chunkIndex(n+this.right*this.chunkSize),this.bounds[1]),a=Math.max(this.chunkIndex(r-this.left*this.chunkSize),this.bounds[0]),h=this._chunks,c=[],u=[];for(null===this._right&&(this._left=a,this._right=a-1),i=this._right+1;s>=i;i++)c.push(i);for(i=this._left-1;i>=a;i--)c.push(i);for(i=this._left;a>i;i++)u.push(i);for(i=this._right;i>s;i--)u.push(i);for(this._right=s,this._left=a,i=0;i<u.length;++i)o=u[i],-1===c.indexOf(o)&&(this.free(o,h[o],e),delete h[o]);for(i=0;i<c.length;++i)o=c[i],-1===u.indexOf(o)&&(h[o]=this.alloc(o,e))}},e.exports=r},{}],243:[function(t,e){e.exports=function(t,e,r){var n=Math.max(0,Math.min(1,(r-t)/(e-t)));return n*n*(3-2*n)}},{}],244:[function(){!function(t){var e,r={},n=[];r.init=function(t,r){r=r||{},e=t,e.on("ntp:server_sync",i),setInterval(o,r.interval||1e3)};var i=function(t){var e=Date.now()-t.t1+(Date.now()-t.t0)/2;n.unshift(e),n.length>10&&n.pop()};r.offset=function(){for(var t=0,e=0;e<n.length;e++)t+=n[e];return t/=n.length};var o=function(){e.emit("ntp:client_sync",{t0:Date.now()})};"function"==typeof define&&define.amd?define("ntp",[],function(){return r}):t.ntp=r}(window)},{}],245:[function(t,e){e.exports=t(246)},{}],246:[function(t,e,r){function n(t,e){"object"==typeof t&&(e=t,t=void 0),e=e||{};var r,n=i(t),o=n.source,c=n.id;return e.forceNew||e["force new connection"]||!1===e.multiplex?(a("ignoring socket cache for %s",o),r=s(o,e)):(h[c]||(a("new io instance for %s",o),h[c]=s(o,e)),r=h[c]),r.socket(n.path)}var i=t(250),o=t(287),s=t(247),a=t(253)("socket.io-client");e.exports=r=n;var h=r.managers={};r.protocol=o.protocol,r.connect=n,r.Manager=t(247),r.Socket=t(249)},{}],247:[function(t,e){function r(t,e){return this instanceof r?(t&&"object"==typeof t&&(e=t,t=void 0),e=e||{},e.path=e.path||"/socket.io",this.nsps={},this.subs=[],this.opts=e,this.reconnection(e.reconnection!==!1),this.reconnectionAttempts(e.reconnectionAttempts||1/0),this.reconnectionDelay(e.reconnectionDelay||1e3),this.reconnectionDelayMax(e.reconnectionDelayMax||5e3),this.timeout(null==e.timeout?2e4:e.timeout),this.readyState="closed",this.uri=t,this.connected=[],this.attempts=0,this.encoding=!1,this.packetBuffer=[],this.encoder=new s.Encoder,this.decoder=new s.Decoder,this.autoConnect=e.autoConnect!==!1,void(this.autoConnect&&this.open())):new r(t,e)}var n=(t(250),t(254)),i=t(249),o=t(252),s=t(287),a=t(248),h=t(251),c=(t(284),t(253)("socket.io-client:manager")),u=t(283);e.exports=r,r.prototype.emitAll=function(){this.emit.apply(this,arguments);for(var t in this.nsps)this.nsps[t].emit.apply(this.nsps[t],arguments)},o(r.prototype),r.prototype.reconnection=function(t){return arguments.length?(this._reconnection=!!t,this):this._reconnection},r.prototype.reconnectionAttempts=function(t){return arguments.length?(this._reconnectionAttempts=t,this):this._reconnectionAttempts},r.prototype.reconnectionDelay=function(t){return arguments.length?(this._reconnectionDelay=t,this):this._reconnectionDelay},r.prototype.reconnectionDelayMax=function(t){return arguments.length?(this._reconnectionDelayMax=t,this):this._reconnectionDelayMax},r.prototype.timeout=function(t){return arguments.length?(this._timeout=t,this):this._timeout},r.prototype.maybeReconnectOnOpen=function(){this.openReconnect||this.reconnecting||!this._reconnection||0!==this.attempts||(this.openReconnect=!0,this.reconnect())},r.prototype.open=r.prototype.connect=function(t){if(c("readyState %s",this.readyState),~this.readyState.indexOf("open"))return this;c("opening %s",this.uri),this.engine=n(this.uri,this.opts);var e=this.engine,r=this;this.readyState="opening",this.skipReconnect=!1;var i=a(e,"open",function(){r.onopen(),t&&t()}),o=a(e,"error",function(e){if(c("connect_error"),r.cleanup(),r.readyState="closed",r.emitAll("connect_error",e),t){var n=new Error("Connection error");n.data=e,t(n)}r.maybeReconnectOnOpen()});if(!1!==this._timeout){var s=this._timeout;c("connect attempt will timeout after %d",s);var h=setTimeout(function(){c("connect attempt timed out after %d",s),i.destroy(),e.close(),e.emit("error","timeout"),r.emitAll("connect_timeout",s)},s);this.subs.push({destroy:function(){clearTimeout(h)}})}return this.subs.push(i),this.subs.push(o),this},r.prototype.onopen=function(){c("open"),this.cleanup(),this.readyState="open",this.emit("open");var t=this.engine;this.subs.push(a(t,"data",h(this,"ondata"))),this.subs.push(a(this.decoder,"decoded",h(this,"ondecoded"))),this.subs.push(a(t,"error",h(this,"onerror"))),this.subs.push(a(t,"close",h(this,"onclose")))},r.prototype.ondata=function(t){this.decoder.add(t)},r.prototype.ondecoded=function(t){this.emit("packet",t)},r.prototype.onerror=function(t){c("error",t),this.emitAll("error",t)},r.prototype.socket=function(t){var e=this.nsps[t];if(!e){e=new i(this,t),this.nsps[t]=e;var r=this;e.on("connect",function(){~u(r.connected,e)||r.connected.push(e)})}return e},r.prototype.destroy=function(t){var e=u(this.connected,t);~e&&this.connected.splice(e,1),this.connected.length||this.close()},r.prototype.packet=function(t){c("writing packet %j",t);var e=this;e.encoding?e.packetBuffer.push(t):(e.encoding=!0,this.encoder.encode(t,function(t){for(var r=0;r<t.length;r++)e.engine.write(t[r]);e.encoding=!1,e.processPacketQueue()}))},r.prototype.processPacketQueue=function(){if(this.packetBuffer.length>0&&!this.encoding){var t=this.packetBuffer.shift();this.packet(t)}},r.prototype.cleanup=function(){for(var t;t=this.subs.shift();)t.destroy();this.packetBuffer=[],this.encoding=!1,this.decoder.destroy()},r.prototype.close=r.prototype.disconnect=function(){this.skipReconnect=!0,this.readyState="closed",this.engine&&this.engine.close()},r.prototype.onclose=function(t){c("close"),this.cleanup(),this.readyState="closed",this.emit("close",t),this._reconnection&&!this.skipReconnect&&this.reconnect()},r.prototype.reconnect=function(){if(this.reconnecting||this.skipReconnect)return this;var t=this;if(this.attempts++,this.attempts>this._reconnectionAttempts)c("reconnect failed"),this.emitAll("reconnect_failed"),this.reconnecting=!1;else{var e=this.attempts*this.reconnectionDelay();e=Math.min(e,this.reconnectionDelayMax()),c("will wait %dms before reconnect attempt",e),this.reconnecting=!0;var r=setTimeout(function(){t.skipReconnect||(c("attempting reconnect"),t.emitAll("reconnect_attempt",t.attempts),t.emitAll("reconnecting",t.attempts),t.skipReconnect||t.open(function(e){e?(c("reconnect attempt error"),t.reconnecting=!1,t.reconnect(),t.emitAll("reconnect_error",e.data)):(c("reconnect success"),t.onreconnect())}))},e);this.subs.push({destroy:function(){clearTimeout(r)}})}},r.prototype.onreconnect=function(){var t=this.attempts;this.attempts=0,this.reconnecting=!1,this.emitAll("reconnect",t)}},{}],248:[function(t,e){function r(t,e,r){return t.on(e,r),{destroy:function(){t.removeListener(e,r)}}}e.exports=r},{}],249:[function(t,e,r){function n(t,e){this.io=t,this.nsp=e,this.json=this,this.ids=0,this.acks={},this.io.autoConnect&&this.open(),this.receiveBuffer=[],this.sendBuffer=[],this.connected=!1,this.disconnected=!0}var i=t(287),o=t(252),s=t(291),a=t(248),h=t(251),c=t(253)("socket.io-client:socket"),u=t(281);e.exports=r=n;var f={connect:1,connect_error:1,connect_timeout:1,disconnect:1,error:1,reconnect:1,reconnect_attempt:1,reconnect_failed:1,reconnect_error:1,reconnecting:1},d=o.prototype.emit;o(n.prototype),n.prototype.subEvents=function(){if(!this.subs){var t=this.io;this.subs=[a(t,"open",h(this,"onopen")),a(t,"packet",h(this,"onpacket")),a(t,"close",h(this,"onclose"))]}},n.prototype.open=n.prototype.connect=function(){return this.connected?this:(this.subEvents(),this.io.open(),"open"==this.io.readyState&&this.onopen(),this)},n.prototype.send=function(){var t=s(arguments);return t.unshift("message"),this.emit.apply(this,t),this},n.prototype.emit=function(t){if(f.hasOwnProperty(t))return d.apply(this,arguments),this;var e=s(arguments),r=i.EVENT;u(e)&&(r=i.BINARY_EVENT);var n={type:r,data:e};return"function"==typeof e[e.length-1]&&(c("emitting packet with ack id %d",this.ids),this.acks[this.ids]=e.pop(),n.id=this.ids++),this.connected?this.packet(n):this.sendBuffer.push(n),this},n.prototype.packet=function(t){t.nsp=this.nsp,this.io.packet(t)},n.prototype.onopen=function(){c("transport is open - connecting"),"/"!=this.nsp&&this.packet({type:i.CONNECT})},n.prototype.onclose=function(t){c("close (%s)",t),this.connected=!1,this.disconnected=!0,this.emit("disconnect",t)},n.prototype.onpacket=function(t){if(t.nsp==this.nsp)switch(t.type){case i.CONNECT:this.onconnect();break;case i.EVENT:this.onevent(t);break;case i.BINARY_EVENT:this.onevent(t);break;case i.ACK:this.onack(t);break;case i.BINARY_ACK:this.onack(t);break;case i.DISCONNECT:this.ondisconnect();break;case i.ERROR:this.emit("error",t.data)}},n.prototype.onevent=function(t){var e=t.data||[];c("emitting event %j",e),null!=t.id&&(c("attaching ack callback to event"),e.push(this.ack(t.id))),this.connected?d.apply(this,e):this.receiveBuffer.push(e)},n.prototype.ack=function(t){var e=this,r=!1;return function(){if(!r){r=!0;var n=s(arguments);c("sending ack %j",n);var o=u(n)?i.BINARY_ACK:i.ACK;e.packet({type:o,id:t,data:n})}}},n.prototype.onack=function(t){c("calling ack %s with %j",t.id,t.data);var e=this.acks[t.id];e.apply(this,t.data),delete this.acks[t.id]},n.prototype.onconnect=function(){this.connected=!0,this.disconnected=!1,this.emit("connect"),this.emitBuffered()},n.prototype.emitBuffered=function(){var t;for(t=0;t<this.receiveBuffer.length;t++)d.apply(this,this.receiveBuffer[t]);for(this.receiveBuffer=[],t=0;t<this.sendBuffer.length;t++)this.packet(this.sendBuffer[t]);this.sendBuffer=[]},n.prototype.ondisconnect=function(){c("server disconnect (%s)",this.nsp),this.destroy(),this.onclose("io server disconnect")},n.prototype.destroy=function(){if(this.subs){for(var t=0;t<this.subs.length;t++)this.subs[t].destroy();this.subs=null}this.io.destroy(this)},n.prototype.close=n.prototype.disconnect=function(){return this.connected&&(c("performing disconnect (%s)",this.nsp),this.packet({type:i.DISCONNECT})),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}},{}],250:[function(t,e){(function(r){function n(t,e){var n=t,e=e||r.location;return null==t&&(t=e.protocol+"//"+e.hostname),"string"==typeof t&&("/"==t.charAt(0)&&(t="/"==t.charAt(1)?e.protocol+t:e.hostname+t),/^(https?|wss?):\/\//.test(t)||(o("protocol-less url %s",t),t="undefined"!=typeof e?e.protocol+"//"+t:"https://"+t),o("parse %s",t),n=i(t)),n.port||(/^(http|ws)$/.test(n.protocol)?n.port="80":/^(http|ws)s$/.test(n.protocol)&&(n.port="443")),n.path=n.path||"/",n.id=n.protocol+"://"+n.host+":"+n.port,n.href=n.protocol+"://"+n.host+(e&&e.port==n.port?"":":"+n.port),n}var i=t(285),o=t(253)("socket.io-client:url");e.exports=n}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],251:[function(t,e){var r=[].slice;e.exports=function(t,e){if("string"==typeof e&&(e=t[e]),"function"!=typeof e)throw new Error("bind() requires a function");var n=r.call(arguments,2);return function(){return e.apply(t,n.concat(r.call(arguments)))}}},{}],252:[function(t,e){function r(t){return t?n(t):void 0}function n(t){for(var e in r.prototype)t[e]=r.prototype[e];return t}e.exports=r,r.prototype.on=r.prototype.addEventListener=function(t,e){return this._callbacks=this._callbacks||{},(this._callbacks[t]=this._callbacks[t]||[]).push(e),this},r.prototype.once=function(t,e){function r(){n.off(t,r),e.apply(this,arguments)}var n=this;return this._callbacks=this._callbacks||{},r.fn=e,this.on(t,r),this},r.prototype.off=r.prototype.removeListener=r.prototype.removeAllListeners=r.prototype.removeEventListener=function(t,e){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var r=this._callbacks[t];if(!r)return this;if(1==arguments.length)return delete this._callbacks[t],this;for(var n,i=0;i<r.length;i++)if(n=r[i],n===e||n.fn===e){r.splice(i,1);break}return this},r.prototype.emit=function(t){this._callbacks=this._callbacks||{};var e=[].slice.call(arguments,1),r=this._callbacks[t];if(r){r=r.slice(0);for(var n=0,i=r.length;i>n;++n)r[n].apply(this,e)}return this},r.prototype.listeners=function(t){return this._callbacks=this._callbacks||{},this._callbacks[t]||[]},r.prototype.hasListeners=function(t){return!!this.listeners(t).length}},{}],253:[function(t,e){function r(t){return r.enabled(t)?function(e){e=n(e);var i=new Date,o=i-(r[t]||i);r[t]=i,e=t+" "+e+" +"+r.humanize(o),window.console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)}:function(){}}function n(t){return t instanceof Error?t.stack||t.message:t}e.exports=r,r.names=[],r.skips=[],r.enable=function(t){try{localStorage.debug=t}catch(t){}for(var e=(t||"").split(/[\s,]+/),n=e.length,i=0;n>i;i++)t=e[i].replace("*",".*?"),"-"===t[0]?r.skips.push(new RegExp("^"+t.substr(1)+"$")):r.names.push(new RegExp("^"+t+"$"))},r.disable=function(){r.enable("")},r.humanize=function(t){var e=1e3,r=6e4,n=60*r;return t>=n?(t/n).toFixed(1)+"h":t>=r?(t/r).toFixed(1)+"m":t>=e?(t/e|0)+"s":t+"ms"},r.enabled=function(t){for(var e=0,n=r.skips.length;n>e;e++)if(r.skips[e].test(t))return!1;for(var e=0,n=r.names.length;n>e;e++)if(r.names[e].test(t))return!0;return!1};try{window.localStorage&&r.enable(localStorage.debug)}catch(t){}},{}],254:[function(t,e){e.exports=t(255)},{}],255:[function(t,e){e.exports=t(256),e.exports.parser=t(268)},{}],256:[function(t,e){(function(r){function n(t,e){if(!(this instanceof n))return new n(t,e);if(e=e||{},t&&"object"==typeof t&&(e=t,t=null),t&&(t=u(t),e.host=t.host,e.secure="https"==t.protocol||"wss"==t.protocol,e.port=t.port,t.query&&(e.query=t.query)),this.secure=null!=e.secure?e.secure:r.location&&"https:"==location.protocol,e.host){var i=e.host.split(":");e.hostname=i.shift(),i.length&&(e.port=i.pop())}this.agent=e.agent||!1,this.hostname=e.hostname||(r.location?location.hostname:"localhost"),this.port=e.port||(r.location&&location.port?location.port:this.secure?443:80),this.query=e.query||{},"string"==typeof this.query&&(this.query=d.decode(this.query)),this.upgrade=!1!==e.upgrade,this.path=(e.path||"/engine.io").replace(/\/$/,"")+"/",this.forceJSONP=!!e.forceJSONP,this.jsonp=!1!==e.jsonp,this.forceBase64=!!e.forceBase64,this.enablesXDR=!!e.enablesXDR,this.timestampParam=e.timestampParam||"t",this.timestampRequests=e.timestampRequests,this.transports=e.transports||["polling","websocket"],this.readyState="",this.writeBuffer=[],this.callbackBuffer=[],this.policyPort=e.policyPort||843,this.rememberUpgrade=e.rememberUpgrade||!1,this.open(),this.binaryType=null,this.onlyBinaryUpgrades=e.onlyBinaryUpgrades
}function i(t){var e={};for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);return e}var o=t(258),s=t(252),a=t(265)("engine.io-client:socket"),h=t(283),c=t(268),u=t(279),f=t(277),d=t(278);e.exports=n,n.priorWebsocketSuccess=!1,s(n.prototype),n.protocol=c.protocol,n.Socket=n,n.Transport=t(257),n.transports=t(258),n.parser=t(268),n.prototype.createTransport=function(t){a('creating transport "%s"',t);var e=i(this.query);e.EIO=c.protocol,e.transport=t,this.id&&(e.sid=this.id);var r=new o[t]({agent:this.agent,hostname:this.hostname,port:this.port,secure:this.secure,path:this.path,query:e,forceJSONP:this.forceJSONP,jsonp:this.jsonp,forceBase64:this.forceBase64,enablesXDR:this.enablesXDR,timestampRequests:this.timestampRequests,timestampParam:this.timestampParam,policyPort:this.policyPort,socket:this});return r},n.prototype.open=function(){var t;if(this.rememberUpgrade&&n.priorWebsocketSuccess&&-1!=this.transports.indexOf("websocket"))t="websocket";else{if(0==this.transports.length){var e=this;return void setTimeout(function(){e.emit("error","No transports available")},0)}t=this.transports[0]}this.readyState="opening";var t;try{t=this.createTransport(t)}catch(t){return this.transports.shift(),void this.open()}t.open(),this.setTransport(t)},n.prototype.setTransport=function(t){a("setting transport %s",t.name);var e=this;this.transport&&(a("clearing existing transport %s",this.transport.name),this.transport.removeAllListeners()),this.transport=t,t.on("drain",function(){e.onDrain()}).on("packet",function(t){e.onPacket(t)}).on("error",function(t){e.onError(t)}).on("close",function(){e.onClose("transport close")})},n.prototype.probe=function(t){function e(){if(d.onlyBinaryUpgrades){var e=!this.supportsBinary&&d.transport.supportsBinary;f=f||e}f||(a('probe transport "%s" opened',t),u.send([{type:"ping",data:"probe"}]),u.once("packet",function(e){if(!f)if("pong"==e.type&&"probe"==e.data){if(a('probe transport "%s" pong',t),d.upgrading=!0,d.emit("upgrading",u),!u)return;n.priorWebsocketSuccess="websocket"==u.name,a('pausing current transport "%s"',d.transport.name),d.transport.pause(function(){f||"closed"!=d.readyState&&(a("changing transport and sending upgrade packet"),c(),d.setTransport(u),u.send([{type:"upgrade"}]),d.emit("upgrade",u),u=null,d.upgrading=!1,d.flush())})}else{a('probe transport "%s" failed',t);var r=new Error("probe error");r.transport=u.name,d.emit("upgradeError",r)}}))}function r(){f||(f=!0,c(),u.close(),u=null)}function i(e){var n=new Error("probe error: "+e);n.transport=u.name,r(),a('probe transport "%s" failed because of error: %s',t,e),d.emit("upgradeError",n)}function o(){i("transport closed")}function s(){i("socket closed")}function h(t){u&&t.name!=u.name&&(a('"%s" works - aborting "%s"',t.name,u.name),r())}function c(){u.removeListener("open",e),u.removeListener("error",i),u.removeListener("close",o),d.removeListener("close",s),d.removeListener("upgrading",h)}a('probing transport "%s"',t);var u=this.createTransport(t,{probe:1}),f=!1,d=this;n.priorWebsocketSuccess=!1,u.once("open",e),u.once("error",i),u.once("close",o),this.once("close",s),this.once("upgrading",h),u.open()},n.prototype.onOpen=function(){if(a("socket open"),this.readyState="open",n.priorWebsocketSuccess="websocket"==this.transport.name,this.emit("open"),this.flush(),"open"==this.readyState&&this.upgrade&&this.transport.pause){a("starting upgrade probes");for(var t=0,e=this.upgrades.length;e>t;t++)this.probe(this.upgrades[t])}},n.prototype.onPacket=function(t){if("opening"==this.readyState||"open"==this.readyState)switch(a('socket receive: type "%s", data "%s"',t.type,t.data),this.emit("packet",t),this.emit("heartbeat"),t.type){case"open":this.onHandshake(f(t.data));break;case"pong":this.setPing();break;case"error":var e=new Error("server error");e.code=t.data,this.emit("error",e);break;case"message":this.emit("data",t.data),this.emit("message",t.data)}else a('packet received with socket readyState "%s"',this.readyState)},n.prototype.onHandshake=function(t){this.emit("handshake",t),this.id=t.sid,this.transport.query.sid=t.sid,this.upgrades=this.filterUpgrades(t.upgrades),this.pingInterval=t.pingInterval,this.pingTimeout=t.pingTimeout,this.onOpen(),"closed"!=this.readyState&&(this.setPing(),this.removeListener("heartbeat",this.onHeartbeat),this.on("heartbeat",this.onHeartbeat))},n.prototype.onHeartbeat=function(t){clearTimeout(this.pingTimeoutTimer);var e=this;e.pingTimeoutTimer=setTimeout(function(){"closed"!=e.readyState&&e.onClose("ping timeout")},t||e.pingInterval+e.pingTimeout)},n.prototype.setPing=function(){var t=this;clearTimeout(t.pingIntervalTimer),t.pingIntervalTimer=setTimeout(function(){a("writing ping packet - expecting pong within %sms",t.pingTimeout),t.ping(),t.onHeartbeat(t.pingTimeout)},t.pingInterval)},n.prototype.ping=function(){this.sendPacket("ping")},n.prototype.onDrain=function(){for(var t=0;t<this.prevBufferLen;t++)this.callbackBuffer[t]&&this.callbackBuffer[t]();this.writeBuffer.splice(0,this.prevBufferLen),this.callbackBuffer.splice(0,this.prevBufferLen),this.prevBufferLen=0,0==this.writeBuffer.length?this.emit("drain"):this.flush()},n.prototype.flush=function(){"closed"!=this.readyState&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length&&(a("flushing %d packets in socket",this.writeBuffer.length),this.transport.send(this.writeBuffer),this.prevBufferLen=this.writeBuffer.length,this.emit("flush"))},n.prototype.write=n.prototype.send=function(t,e){return this.sendPacket("message",t,e),this},n.prototype.sendPacket=function(t,e,r){if("closing"!=this.readyState&&"closed"!=this.readyState){var n={type:t,data:e};this.emit("packetCreate",n),this.writeBuffer.push(n),this.callbackBuffer.push(r),this.flush()}},n.prototype.close=function(){function t(){n.onClose("forced close"),a("socket closing - telling transport to close"),n.transport.close()}function e(){n.removeListener("upgrade",e),n.removeListener("upgradeError",e),t()}function r(){n.once("upgrade",e),n.once("upgradeError",e)}if("opening"==this.readyState||"open"==this.readyState){this.readyState="closing";var n=this;this.writeBuffer.length?this.once("drain",function(){this.upgrading?r():t()}):this.upgrading?r():t()}return this},n.prototype.onError=function(t){a("socket error %j",t),n.priorWebsocketSuccess=!1,this.emit("error",t),this.onClose("transport error",t)},n.prototype.onClose=function(t,e){if("opening"==this.readyState||"open"==this.readyState||"closing"==this.readyState){a('socket close with reason: "%s"',t);var r=this;clearTimeout(this.pingIntervalTimer),clearTimeout(this.pingTimeoutTimer),setTimeout(function(){r.writeBuffer=[],r.callbackBuffer=[],r.prevBufferLen=0},0),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),this.readyState="closed",this.id=null,this.emit("close",t,e)}},n.prototype.filterUpgrades=function(t){for(var e=[],r=0,n=t.length;n>r;r++)~h(this.transports,t[r])&&e.push(t[r]);return e}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],257:[function(t,e){function r(t){this.path=t.path,this.hostname=t.hostname,this.port=t.port,this.secure=t.secure,this.query=t.query,this.timestampParam=t.timestampParam,this.timestampRequests=t.timestampRequests,this.readyState="",this.agent=t.agent||!1,this.socket=t.socket,this.enablesXDR=t.enablesXDR}var n=t(268),i=t(252);e.exports=r,i(r.prototype),r.timestamps=0,r.prototype.onError=function(t,e){var r=new Error(t);return r.type="TransportError",r.description=e,this.emit("error",r),this},r.prototype.open=function(){return("closed"==this.readyState||""==this.readyState)&&(this.readyState="opening",this.doOpen()),this},r.prototype.close=function(){return("opening"==this.readyState||"open"==this.readyState)&&(this.doClose(),this.onClose()),this},r.prototype.send=function(t){if("open"!=this.readyState)throw new Error("Transport not open");this.write(t)},r.prototype.onOpen=function(){this.readyState="open",this.writable=!0,this.emit("open")},r.prototype.onData=function(t){var e=n.decodePacket(t,this.socket.binaryType);this.onPacket(e)},r.prototype.onPacket=function(t){this.emit("packet",t)},r.prototype.onClose=function(){this.readyState="closed",this.emit("close")}},{}],258:[function(t,e,r){(function(e){function n(t){var r,n=!1,a=!1,h=!1!==t.jsonp;if(e.location){var c="https:"==location.protocol,u=location.port;u||(u=c?443:80),n=t.hostname!=location.hostname||u!=t.port,a=t.secure!=c}if(t.xdomain=n,t.xscheme=a,r=new i(t),"open"in r&&!t.forceJSONP)return new o(t);if(!h)throw new Error("JSONP disabled");return new s(t)}var i=t(263),o=t(260),s=t(259),a=t(262);r.polling=n,r.websocket=a}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],259:[function(t,e){(function(r){function n(){}function i(t){o.call(this,t),this.query=this.query||{},a||(r.___eio||(r.___eio=[]),a=r.___eio),this.index=a.length;var e=this;a.push(function(t){e.onData(t)}),this.query.j=this.index,r.document&&r.addEventListener&&r.addEventListener("beforeunload",function(){e.script&&(e.script.onerror=n)},!1)}var o=t(261),s=t(264);e.exports=i;var a,h=/\n/g,c=/\\n/g;s(i,o),i.prototype.supportsBinary=!1,i.prototype.doClose=function(){this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),this.form&&(this.form.parentNode.removeChild(this.form),this.form=null,this.iframe=null),o.prototype.doClose.call(this)},i.prototype.doPoll=function(){var t=this,e=document.createElement("script");this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),e.async=!0,e.src=this.uri(),e.onerror=function(e){t.onError("jsonp poll error",e)};var r=document.getElementsByTagName("script")[0];r.parentNode.insertBefore(e,r),this.script=e;var n="undefined"!=typeof navigator&&/gecko/i.test(navigator.userAgent);n&&setTimeout(function(){var t=document.createElement("iframe");document.body.appendChild(t),document.body.removeChild(t)},100)},i.prototype.doWrite=function(t,e){function r(){n(),e()}function n(){if(i.iframe)try{i.form.removeChild(i.iframe)}catch(t){i.onError("jsonp polling iframe removal error",t)}try{var t='<iframe src="javascript:0" name="'+i.iframeId+'">';o=document.createElement(t)}catch(t){o=document.createElement("iframe"),o.name=i.iframeId,o.src="javascript:0"}o.id=i.iframeId,i.form.appendChild(o),i.iframe=o}var i=this;if(!this.form){var o,s=document.createElement("form"),a=document.createElement("textarea"),u=this.iframeId="eio_iframe_"+this.index;s.className="socketio",s.style.position="absolute",s.style.top="-1000px",s.style.left="-1000px",s.target=u,s.method="POST",s.setAttribute("accept-charset","utf-8"),a.name="d",s.appendChild(a),document.body.appendChild(s),this.form=s,this.area=a}this.form.action=this.uri(),n(),t=t.replace(c,"\\\n"),this.area.value=t.replace(h,"\\n");try{this.form.submit()}catch(t){}this.iframe.attachEvent?this.iframe.onreadystatechange=function(){"complete"==i.iframe.readyState&&r()}:this.iframe.onload=r}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],260:[function(t,e){(function(r){function n(){}function i(t){if(h.call(this,t),r.location){var e="https:"==location.protocol,n=location.port;n||(n=e?443:80),this.xd=t.hostname!=r.location.hostname||n!=t.port,this.xs=t.secure!=e}}function o(t){this.method=t.method||"GET",this.uri=t.uri,this.xd=!!t.xd,this.xs=!!t.xs,this.async=!1!==t.async,this.data=void 0!=t.data?t.data:null,this.agent=t.agent,this.isBinary=t.isBinary,this.supportsBinary=t.supportsBinary,this.enablesXDR=t.enablesXDR,this.create()}function s(){for(var t in o.requests)o.requests.hasOwnProperty(t)&&o.requests[t].abort()}var a=t(263),h=t(261),c=t(252),u=t(264),f=t(265)("engine.io-client:polling-xhr");e.exports=i,e.exports.Request=o,u(i,h),i.prototype.supportsBinary=!0,i.prototype.request=function(t){return t=t||{},t.uri=this.uri(),t.xd=this.xd,t.xs=this.xs,t.agent=this.agent||!1,t.supportsBinary=this.supportsBinary,t.enablesXDR=this.enablesXDR,new o(t)},i.prototype.doWrite=function(t,e){var r="string"!=typeof t&&void 0!==t,n=this.request({method:"POST",data:t,isBinary:r}),i=this;n.on("success",e),n.on("error",function(t){i.onError("xhr post error",t)}),this.sendXhr=n},i.prototype.doPoll=function(){f("xhr poll");var t=this.request(),e=this;t.on("data",function(t){e.onData(t)}),t.on("error",function(t){e.onError("xhr poll error",t)}),this.pollXhr=t},c(o.prototype),o.prototype.create=function(){var t=this.xhr=new a({agent:this.agent,xdomain:this.xd,xscheme:this.xs,enablesXDR:this.enablesXDR}),e=this;try{if(f("xhr open %s: %s",this.method,this.uri),t.open(this.method,this.uri,this.async),this.supportsBinary&&(t.responseType="arraybuffer"),"POST"==this.method)try{this.isBinary?t.setRequestHeader("Content-type","application/octet-stream"):t.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch(t){}"withCredentials"in t&&(t.withCredentials=!0),this.hasXDR()?(t.onload=function(){e.onLoad()},t.onerror=function(){e.onError(t.responseText)}):t.onreadystatechange=function(){4==t.readyState&&(200==t.status||1223==t.status?e.onLoad():setTimeout(function(){e.onError(t.status)},0))},f("xhr data %s",this.data),t.send(this.data)}catch(t){return void setTimeout(function(){e.onError(t)},0)}r.document&&(this.index=o.requestsCount++,o.requests[this.index]=this)},o.prototype.onSuccess=function(){this.emit("success"),this.cleanup()},o.prototype.onData=function(t){this.emit("data",t),this.onSuccess()},o.prototype.onError=function(t){this.emit("error",t),this.cleanup()},o.prototype.cleanup=function(){if("undefined"!=typeof this.xhr&&null!==this.xhr){this.hasXDR()?this.xhr.onload=this.xhr.onerror=n:this.xhr.onreadystatechange=n;try{this.xhr.abort()}catch(t){}r.document&&delete o.requests[this.index],this.xhr=null}},o.prototype.onLoad=function(){var t;try{var e;try{e=this.xhr.getResponseHeader("Content-Type").split(";")[0]}catch(t){}t="application/octet-stream"===e?this.xhr.response:this.supportsBinary?"ok":this.xhr.responseText}catch(t){this.onError(t)}null!=t&&this.onData(t)},o.prototype.hasXDR=function(){return"undefined"!=typeof r.XDomainRequest&&!this.xs&&this.enablesXDR},o.prototype.abort=function(){this.cleanup()},r.document&&(o.requestsCount=0,o.requests={},r.attachEvent?r.attachEvent("onunload",s):r.addEventListener&&r.addEventListener("beforeunload",s,!1))}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],261:[function(t,e){function r(t){var e=t&&t.forceBase64;(!h||e)&&(this.supportsBinary=!1),n.call(this,t)}var n=t(257),i=t(278),o=t(268),s=t(264),a=t(265)("engine.io-client:polling");e.exports=r;var h=function(){var e=t(263),r=new e({xdomain:!1});return null!=r.responseType}();s(r,n),r.prototype.name="polling",r.prototype.doOpen=function(){this.poll()},r.prototype.pause=function(t){function e(){a("paused"),r.readyState="paused",t()}var r=this;if(this.readyState="pausing",this.polling||!this.writable){var n=0;this.polling&&(a("we are currently polling - waiting to pause"),n++,this.once("pollComplete",function(){a("pre-pause polling complete"),--n||e()})),this.writable||(a("we are currently writing - waiting to pause"),n++,this.once("drain",function(){a("pre-pause writing complete"),--n||e()}))}else e()},r.prototype.poll=function(){a("polling"),this.polling=!0,this.doPoll(),this.emit("poll")},r.prototype.onData=function(t){var e=this;a("polling got data %s",t);var r=function(t){return"opening"==e.readyState&&e.onOpen(),"close"==t.type?(e.onClose(),!1):void e.onPacket(t)};o.decodePayload(t,this.socket.binaryType,r),"closed"!=this.readyState&&(this.polling=!1,this.emit("pollComplete"),"open"==this.readyState?this.poll():a('ignoring poll - transport state "%s"',this.readyState))},r.prototype.doClose=function(){function t(){a("writing close packet"),e.write([{type:"close"}])}var e=this;"open"==this.readyState?(a("transport open - closing"),t()):(a("transport not open - deferring close"),this.once("open",t))},r.prototype.write=function(t){var e=this;this.writable=!1;var r=function(){e.writable=!0,e.emit("drain")},e=this;o.encodePayload(t,this.supportsBinary,function(t){e.doWrite(t,r)})},r.prototype.uri=function(){var t=this.query||{},e=this.secure?"https":"http",r="";return!1!==this.timestampRequests&&(t[this.timestampParam]=+new Date+"-"+n.timestamps++),this.supportsBinary||t.sid||(t.b64=1),t=i.encode(t),this.port&&("https"==e&&443!=this.port||"http"==e&&80!=this.port)&&(r=":"+this.port),t.length&&(t="?"+t),e+"://"+this.hostname+r+this.path+t}},{}],262:[function(t,e){function r(t){var e=t&&t.forceBase64;e&&(this.supportsBinary=!1),n.call(this,t)}var n=t(257),i=t(268),o=t(278),s=t(264),a=t(265)("engine.io-client:websocket"),h=t(280);e.exports=r,s(r,n),r.prototype.name="websocket",r.prototype.supportsBinary=!0,r.prototype.doOpen=function(){if(this.check()){var t=this.uri(),e=void 0,r={agent:this.agent};this.ws=new h(t,e,r),void 0===this.ws.binaryType&&(this.supportsBinary=!1),this.ws.binaryType="arraybuffer",this.addEventListeners()}},r.prototype.addEventListeners=function(){var t=this;this.ws.onopen=function(){t.onOpen()},this.ws.onclose=function(){t.onClose()},this.ws.onmessage=function(e){t.onData(e.data)},this.ws.onerror=function(e){t.onError("websocket error",e)}},"undefined"!=typeof navigator&&/iPad|iPhone|iPod/i.test(navigator.userAgent)&&(r.prototype.onData=function(t){var e=this;setTimeout(function(){n.prototype.onData.call(e,t)},0)}),r.prototype.write=function(t){function e(){r.writable=!0,r.emit("drain")}var r=this;this.writable=!1;for(var n=0,o=t.length;o>n;n++)i.encodePacket(t[n],this.supportsBinary,function(t){try{r.ws.send(t)}catch(t){a("websocket closed before onclose event")}});setTimeout(e,0)},r.prototype.onClose=function(){n.prototype.onClose.call(this)},r.prototype.doClose=function(){"undefined"!=typeof this.ws&&this.ws.close()},r.prototype.uri=function(){var t=this.query||{},e=this.secure?"wss":"ws",r="";return this.port&&("wss"==e&&443!=this.port||"ws"==e&&80!=this.port)&&(r=":"+this.port),this.timestampRequests&&(t[this.timestampParam]=+new Date),this.supportsBinary||(t.b64=1),t=o.encode(t),t.length&&(t="?"+t),e+"://"+this.hostname+r+this.path+t},r.prototype.check=function(){return!(!h||"__initialize"in h&&this.name===r.prototype.name)}},{}],263:[function(t,e){var r=t(275);e.exports=function(t){var e=t.xdomain,n=t.xscheme,i=t.enablesXDR;try{if("undefined"!=typeof XMLHttpRequest&&(!e||r))return new XMLHttpRequest}catch(t){}try{if("undefined"!=typeof XDomainRequest&&!n&&i)return new XDomainRequest}catch(t){}if(!e)try{return new ActiveXObject("Microsoft.XMLHTTP")}catch(t){}}},{}],264:[function(t,e){e.exports=function(t,e){var r=function(){};r.prototype=e.prototype,t.prototype=new r,t.prototype.constructor=t}},{}],265:[function(t,e,r){function n(){return"WebkitAppearance"in document.documentElement.style||window.console&&(console.firebug||console.exception&&console.table)||navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31}function i(){var t=arguments,e=this.useColors;if(t[0]=(e?"%c":"")+this.namespace+(e?" %c":" ")+t[0]+(e?"%c ":" ")+"+"+r.humanize(this.diff),!e)return t;var n="color: "+this.color;t=[t[0],n,"color: inherit"].concat(Array.prototype.slice.call(t,1));var i=0,o=0;return t[0].replace(/%[a-z%]/g,function(t){"%%"!==t&&(i++,"%c"===t&&(o=i))}),t.splice(o,0,n),t}function o(){return"object"==typeof console&&"function"==typeof console.log&&Function.prototype.apply.call(console.log,console,arguments)}function s(t){try{null==t?localStorage.removeItem("debug"):localStorage.debug=t}catch(t){}}function a(){var t;try{t=localStorage.debug}catch(t){}return t}r=e.exports=t(266),r.log=o,r.formatArgs=i,r.save=s,r.load=a,r.useColors=n,r.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"],r.formatters.j=function(t){return JSON.stringify(t)},r.enable(a())},{}],266:[function(t,e,r){function n(){return r.colors[u++%r.colors.length]}function i(t){function e(){}function i(){var t=i,e=+new Date,o=e-(c||e);t.diff=o,t.prev=c,t.curr=e,c=e,null==t.useColors&&(t.useColors=r.useColors()),null==t.color&&t.useColors&&(t.color=n());var s=Array.prototype.slice.call(arguments);s[0]=r.coerce(s[0]),"string"!=typeof s[0]&&(s=["%o"].concat(s));var a=0;s[0]=s[0].replace(/%([a-z%])/g,function(e,n){if("%%"===e)return e;a++;var i=r.formatters[n];if("function"==typeof i){var o=s[a];e=i.call(t,o),s.splice(a,1),a--}return e}),"function"==typeof r.formatArgs&&(s=r.formatArgs.apply(t,s));var h=i.log||r.log||console.log.bind(console);h.apply(t,s)}e.enabled=!1,i.enabled=!0;var o=r.enabled(t)?i:e;return o.namespace=t,o}function o(t){r.save(t);for(var e=(t||"").split(/[\s,]+/),n=e.length,i=0;n>i;i++)e[i]&&(t=e[i].replace(/\*/g,".*?"),"-"===t[0]?r.skips.push(new RegExp("^"+t.substr(1)+"$")):r.names.push(new RegExp("^"+t+"$")))}function s(){r.enable("")}function a(t){var e,n;for(e=0,n=r.skips.length;n>e;e++)if(r.skips[e].test(t))return!1;for(e=0,n=r.names.length;n>e;e++)if(r.names[e].test(t))return!0;return!1}function h(t){return t instanceof Error?t.stack||t.message:t}r=e.exports=i,r.coerce=h,r.disable=s,r.enable=o,r.enabled=a,r.humanize=t(267),r.names=[],r.skips=[],r.formatters={};var c,u=0},{}],267:[function(t,e){function r(t){var e=/^((?:\d+)?\.?\d+) *(ms|seconds?|s|minutes?|m|hours?|h|days?|d|years?|y)?$/i.exec(t);if(e){var r=parseFloat(e[1]),n=(e[2]||"ms").toLowerCase();switch(n){case"years":case"year":case"y":return r*u;case"days":case"day":case"d":return r*c;case"hours":case"hour":case"h":return r*h;case"minutes":case"minute":case"m":return r*a;case"seconds":case"second":case"s":return r*s;case"ms":return r}}}function n(t){return t>=c?Math.round(t/c)+"d":t>=h?Math.round(t/h)+"h":t>=a?Math.round(t/a)+"m":t>=s?Math.round(t/s)+"s":t+"ms"}function i(t){return o(t,c,"day")||o(t,h,"hour")||o(t,a,"minute")||o(t,s,"second")||t+" ms"}function o(t,e,r){return e>t?void 0:1.5*e>t?Math.floor(t/e)+" "+r:Math.ceil(t/e)+" "+r+"s"}var s=1e3,a=60*s,h=60*a,c=24*h,u=365.25*c;e.exports=function(t,e){return e=e||{},"string"==typeof t?r(t):e.long?i(t):n(t)}},{}],268:[function(t,e,r){(function(e){function n(t,e,n){if(!e)return r.encodeBase64Packet(t,n);var i=t.data,o=new Uint8Array(i),s=new Uint8Array(1+i.byteLength);s[0]=l[t.type];for(var a=0;a<o.length;a++)s[a+1]=o[a];return n(s.buffer)}function i(t,e,n){if(!e)return r.encodeBase64Packet(t,n);var i=new FileReader;return i.onload=function(){t.data=i.result,r.encodePacket(t,e,!0,n)},i.readAsArrayBuffer(t.data)}function o(t,e,n){if(!e)return r.encodeBase64Packet(t,n);if(d)return i(t,e,n);var o=new Uint8Array(1);o[0]=l[t.type];var s=new b([o.buffer,t.data]);return n(s)}function s(t,e,r){for(var n=new Array(t.length),i=u(t.length,r),o=function(t,r,i){e(r,function(e,r){n[t]=r,i(e,n)})},s=0;s<t.length;s++)o(s,t[s],i)}var a=t(269),h=t(271),c=t(272),u=t(270),f=t(274),d=navigator.userAgent.match(/Android/i);r.protocol=3;var l=r.packets={open:0,close:1,ping:2,pong:3,message:4,upgrade:5,noop:6},p=a(l),v={type:"error",data:"parser error"},b=t(273);r.encodePacket=function(t,r,i,s){"function"==typeof r&&(s=r,r=!1),"function"==typeof i&&(s=i,i=null);var a=void 0===t.data?void 0:t.data.buffer||t.data;if(e.ArrayBuffer&&a instanceof ArrayBuffer)return n(t,r,s);if(b&&a instanceof e.Blob)return o(t,r,s);var h=l[t.type];return void 0!==t.data&&(h+=i?f.encode(String(t.data)):String(t.data)),s(""+h)},r.encodeBase64Packet=function(t,n){var i="b"+r.packets[t.type];if(b&&t.data instanceof b){var o=new FileReader;return o.onload=function(){var t=o.result.split(",")[1];n(i+t)},o.readAsDataURL(t.data)}var s;try{s=String.fromCharCode.apply(null,new Uint8Array(t.data))}catch(e){for(var a=new Uint8Array(t.data),h=new Array(a.length),c=0;c<a.length;c++)h[c]=a[c];s=String.fromCharCode.apply(null,h)}return i+=e.btoa(s),n(i)},r.decodePacket=function(t,e,n){if("string"==typeof t||void 0===t){if("b"==t.charAt(0))return r.decodeBase64Packet(t.substr(1),e);if(n)try{t=f.decode(t)}catch(t){return v}var i=t.charAt(0);return Number(i)==i&&p[i]?t.length>1?{type:p[i],data:t.substring(1)}:{type:p[i]}:v}var o=new Uint8Array(t),i=o[0],s=h(t,1);return b&&"blob"===e&&(s=new b([s])),{type:p[i],data:s}},r.decodeBase64Packet=function(t,r){var n=p[t.charAt(0)];if(!e.ArrayBuffer)return{type:n,data:{base64:!0,data:t.substr(1)}};var i=c.decode(t.substr(1));return"blob"===r&&b&&(i=new b([i])),{type:n,data:i}},r.encodePayload=function(t,e,n){function i(t){return t.length+":"+t}function o(t,n){r.encodePacket(t,e,!0,function(t){n(null,i(t))})}return"function"==typeof e&&(n=e,e=null),e?b&&!d?r.encodePayloadAsBlob(t,n):r.encodePayloadAsArrayBuffer(t,n):t.length?void s(t,o,function(t,e){return n(e.join(""))}):n("0:")},r.decodePayload=function(t,e,n){if("string"!=typeof t)return r.decodePayloadAsBinary(t,e,n);"function"==typeof e&&(n=e,e=null);var i;if(""==t)return n(v,0,1);for(var o,s,a="",h=0,c=t.length;c>h;h++){var u=t.charAt(h);if(":"!=u)a+=u;else{if(""==a||a!=(o=Number(a)))return n(v,0,1);if(s=t.substr(h+1,o),a!=s.length)return n(v,0,1);if(s.length){if(i=r.decodePacket(s,e,!0),v.type==i.type&&v.data==i.data)return n(v,0,1);var f=n(i,h+o,c);if(!1===f)return}h+=o,a=""}}return""!=a?n(v,0,1):void 0},r.encodePayloadAsArrayBuffer=function(t,e){function n(t,e){r.encodePacket(t,!0,!0,function(t){return e(null,t)})}return t.length?void s(t,n,function(t,r){var n=r.reduce(function(t,e){var r;return r="string"==typeof e?e.length:e.byteLength,t+r.toString().length+r+2},0),i=new Uint8Array(n),o=0;return r.forEach(function(t){var e="string"==typeof t,r=t;if(e){for(var n=new Uint8Array(t.length),s=0;s<t.length;s++)n[s]=t.charCodeAt(s);r=n.buffer}i[o++]=e?0:1;for(var a=r.byteLength.toString(),s=0;s<a.length;s++)i[o++]=parseInt(a[s]);i[o++]=255;for(var n=new Uint8Array(r),s=0;s<n.length;s++)i[o++]=n[s]}),e(i.buffer)}):e(new ArrayBuffer(0))},r.encodePayloadAsBlob=function(t,e){function n(t,e){r.encodePacket(t,!0,!0,function(t){var r=new Uint8Array(1);if(r[0]=1,"string"==typeof t){for(var n=new Uint8Array(t.length),i=0;i<t.length;i++)n[i]=t.charCodeAt(i);t=n.buffer,r[0]=0}for(var o=t instanceof ArrayBuffer?t.byteLength:t.size,s=o.toString(),a=new Uint8Array(s.length+1),i=0;i<s.length;i++)a[i]=parseInt(s[i]);if(a[s.length]=255,b){var h=new b([r.buffer,a.buffer,t]);e(null,h)}})}s(t,n,function(t,r){return e(new b(r))})},r.decodePayloadAsBinary=function(t,e,n){"function"==typeof e&&(n=e,e=null);for(var i=t,o=[],s=!1;i.byteLength>0;){for(var a=new Uint8Array(i),c=0===a[0],u="",f=1;255!=a[f];f++){if(u.length>310){s=!0;break}u+=a[f]}if(s)return n(v,0,1);i=h(i,2+u.length),u=parseInt(u);var d=h(i,0,u);if(c)try{d=String.fromCharCode.apply(null,new Uint8Array(d))}catch(t){var l=new Uint8Array(d);d="";for(var f=0;f<l.length;f++)d+=String.fromCharCode(l[f])}o.push(d),i=h(i,u)}var p=o.length;o.forEach(function(t,i){n(r.decodePacket(t,e,!0),i,p)})}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],269:[function(t,e){e.exports=Object.keys||function(t){var e=[],r=Object.prototype.hasOwnProperty;for(var n in t)r.call(t,n)&&e.push(n);return e}},{}],270:[function(t,e){function r(t,e,r){function i(t,n){if(i.count<=0)throw new Error("after called too many times");--i.count,t?(o=!0,e(t),e=r):0!==i.count||o||e(null,n)}var o=!1;return r=r||n,i.count=t,0===t?e():i}function n(){}e.exports=r},{}],271:[function(t,e){e.exports=function(t,e,r){var n=t.byteLength;if(e=e||0,r=r||n,t.slice)return t.slice(e,r);if(0>e&&(e+=n),0>r&&(r+=n),r>n&&(r=n),e>=n||e>=r||0===n)return new ArrayBuffer(0);for(var i=new Uint8Array(t),o=new Uint8Array(r-e),s=e,a=0;r>s;s++,a++)o[a]=i[s];return o.buffer}},{}],272:[function(t,e,r){!function(t){"use strict";r.encode=function(e){var r,n=new Uint8Array(e),i=n.length,o="";for(r=0;i>r;r+=3)o+=t[n[r]>>2],o+=t[(3&n[r])<<4|n[r+1]>>4],o+=t[(15&n[r+1])<<2|n[r+2]>>6],o+=t[63&n[r+2]];return i%3===2?o=o.substring(0,o.length-1)+"=":i%3===1&&(o=o.substring(0,o.length-2)+"=="),o},r.decode=function(e){var r,n,i,o,s,a=.75*e.length,h=e.length,c=0;"="===e[e.length-1]&&(a--,"="===e[e.length-2]&&a--);var u=new ArrayBuffer(a),f=new Uint8Array(u);for(r=0;h>r;r+=4)n=t.indexOf(e[r]),i=t.indexOf(e[r+1]),o=t.indexOf(e[r+2]),s=t.indexOf(e[r+3]),f[c++]=n<<2|i>>4,f[c++]=(15&i)<<4|o>>2,f[c++]=(3&o)<<6|63&s;return u}}("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/")},{}],273:[function(t,e){(function(t){function r(t,e){e=e||{};for(var r=new n,i=0;i<t.length;i++)r.append(t[i]);return e.type?r.getBlob(e.type):r.getBlob()}var n=t.BlobBuilder||t.WebKitBlobBuilder||t.MSBlobBuilder||t.MozBlobBuilder,i=function(){try{var t=new Blob(["hi"]);return 2==t.size}catch(t){return!1}}(),o=n&&n.prototype.append&&n.prototype.getBlob;e.exports=function(){return i?t.Blob:o?r:void 0}()}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],274:[function(t,e,r){(function(t){!function(n){function i(t){for(var e,r,n=[],i=0,o=t.length;o>i;)e=t.charCodeAt(i++),e>=55296&&56319>=e&&o>i?(r=t.charCodeAt(i++),56320==(64512&r)?n.push(((1023&e)<<10)+(1023&r)+65536):(n.push(e),i--)):n.push(e);return n}function o(t){for(var e,r=t.length,n=-1,i="";++n<r;)e=t[n],e>65535&&(e-=65536,i+=y(e>>>10&1023|55296),e=56320|1023&e),i+=y(e);return i}function s(t,e){return y(t>>e&63|128)}function a(t){if(0==(4294967168&t))return y(t);var e="";return 0==(4294965248&t)?e=y(t>>6&31|192):0==(4294901760&t)?(e=y(t>>12&15|224),e+=s(t,6)):0==(4292870144&t)&&(e=y(t>>18&7|240),e+=s(t,12),e+=s(t,6)),e+=y(63&t|128)}function h(t){for(var e,r=i(t),n=r.length,o=-1,s="";++o<n;)e=r[o],s+=a(e);return s}function c(){if(g>=b)throw Error("Invalid byte index");var t=255&v[g];if(g++,128==(192&t))return 63&t;throw Error("Invalid continuation byte")}function u(){var t,e,r,n,i;if(g>b)throw Error("Invalid byte index");if(g==b)return!1;if(t=255&v[g],g++,0==(128&t))return t;if(192==(224&t)){var e=c();if(i=(31&t)<<6|e,i>=128)return i;throw Error("Invalid continuation byte")}if(224==(240&t)){if(e=c(),r=c(),i=(15&t)<<12|e<<6|r,i>=2048)return i;throw Error("Invalid continuation byte")}if(240==(248&t)&&(e=c(),r=c(),n=c(),i=(15&t)<<18|e<<12|r<<6|n,i>=65536&&1114111>=i))return i;throw Error("Invalid UTF-8 detected")}function f(t){v=i(t),b=v.length,g=0;for(var e,r=[];(e=u())!==!1;)r.push(e);return o(r)}var d="object"==typeof r&&r,l="object"==typeof e&&e&&e.exports==d&&e,p="object"==typeof t&&t;(p.global===p||p.window===p)&&(n=p);var v,b,g,y=String.fromCharCode,m={version:"2.0.0",encode:h,decode:f};if("function"==typeof define&&"object"==typeof define.amd&&define.amd)define(function(){return m});else if(d&&!d.nodeType)if(l)l.exports=m;else{var w={},x=w.hasOwnProperty;for(var _ in m)x.call(m,_)&&(d[_]=m[_])}else n.utf8=m}(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],275:[function(t,e){var r=t(276);try{e.exports="XMLHttpRequest"in r&&"withCredentials"in new r.XMLHttpRequest}catch(t){e.exports=!1}},{}],276:[function(t,e){e.exports=function(){return this}()},{}],277:[function(t,e){(function(t){var r=/^[\],:{}\s]*$/,n=/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,i=/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,o=/(?:^|:|,)(?:\s*\[)+/g,s=/^\s+/,a=/\s+$/;e.exports=function(e){return"string"==typeof e&&e?(e=e.replace(s,"").replace(a,""),t.JSON&&JSON.parse?JSON.parse(e):r.test(e.replace(n,"@").replace(i,"]").replace(o,""))?new Function("return "+e)():void 0):null}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],278:[function(t,e,r){r.encode=function(t){var e="";for(var r in t)t.hasOwnProperty(r)&&(e.length&&(e+="&"),e+=encodeURIComponent(r)+"="+encodeURIComponent(t[r]));return e},r.decode=function(t){for(var e={},r=t.split("&"),n=0,i=r.length;i>n;n++){var o=r[n].split("=");e[decodeURIComponent(o[0])]=decodeURIComponent(o[1])}return e}},{}],279:[function(t,e){var r=/^(?:(?![^:@]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,n=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];
e.exports=function(t){var e=t,i=t.indexOf("["),o=t.indexOf("]");-1!=i&&-1!=o&&(t=t.substring(0,i)+t.substring(i,o).replace(/:/g,";")+t.substring(o,t.length));for(var s=r.exec(t||""),a={},h=14;h--;)a[n[h]]=s[h]||"";return-1!=i&&-1!=o&&(a.source=e,a.host=a.host.substring(1,a.host.length-1).replace(/;/g,":"),a.authority=a.authority.replace("[","").replace("]","").replace(/;/g,":"),a.ipv6uri=!0),a}},{}],280:[function(t,e){function r(t,e){var r;return r=e?new i(t,e):new i(t)}var n=function(){return this}(),i=n.WebSocket||n.MozWebSocket;e.exports=i?r:null,i&&(r.prototype=i.prototype)},{}],281:[function(t,e){(function(r){function n(t){function e(t){if(!t)return!1;if(r.Buffer&&r.Buffer.isBuffer(t)||r.ArrayBuffer&&t instanceof ArrayBuffer||r.Blob&&t instanceof Blob||r.File&&t instanceof File)return!0;if(i(t)){for(var n=0;n<t.length;n++)if(e(t[n]))return!0}else if(t&&"object"==typeof t){t.toJSON&&(t=t.toJSON());for(var o in t)if(t.hasOwnProperty(o)&&e(t[o]))return!0}return!1}return e(t)}var i=t(282);e.exports=n}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],282:[function(t,e){e.exports=t(207)},{}],283:[function(t,e){e.exports=t(225)},{}],284:[function(t,e,r){var n=Object.prototype.hasOwnProperty;r.keys=Object.keys||function(t){var e=[];for(var r in t)n.call(t,r)&&e.push(r);return e},r.values=function(t){var e=[];for(var r in t)n.call(t,r)&&e.push(t[r]);return e},r.merge=function(t,e){for(var r in e)n.call(e,r)&&(t[r]=e[r]);return t},r.length=function(t){return r.keys(t).length},r.isEmpty=function(t){return 0==r.length(t)}},{}],285:[function(t,e){var r=/^(?:(?![^:@]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,n=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];e.exports=function(t){for(var e=r.exec(t||""),i={},o=14;o--;)i[n[o]]=e[o]||"";return i}},{}],286:[function(t,e,r){(function(e){var n=t(289),i=t(288);r.deconstructPacket=function(t){function e(t){if(!t)return t;if(i(t)){var o={_placeholder:!0,num:r.length};return r.push(t),o}if(n(t)){for(var s=new Array(t.length),a=0;a<t.length;a++)s[a]=e(t[a]);return s}if("object"==typeof t&&!(t instanceof Date)){var s={};for(var h in t)s[h]=e(t[h]);return s}return t}var r=[],o=t.data,s=t;return s.data=e(o),s.attachments=r.length,{packet:s,buffers:r}},r.reconstructPacket=function(t,e){function r(t){if(t&&t._placeholder){var i=e[t.num];return i}if(n(t)){for(var o=0;o<t.length;o++)t[o]=r(t[o]);return t}if(t&&"object"==typeof t){for(var s in t)t[s]=r(t[s]);return t}return t}return t.data=r(t.data),t.attachments=void 0,t},r.removeBlobs=function(t,r){function o(t,h,c){if(!t)return t;if(e.Blob&&t instanceof Blob||e.File&&t instanceof File){s++;var u=new FileReader;u.onload=function(){c?c[h]=this.result:a=this.result,--s||r(a)},u.readAsArrayBuffer(t)}else if(n(t))for(var f=0;f<t.length;f++)o(t[f],f,t);else if(t&&"object"==typeof t&&!i(t))for(var d in t)o(t[d],d,t)}var s=0,a=t;o(a),s||r(a)}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],287:[function(t,e,r){function n(){}function i(t){var e="",n=!1;return e+=t.type,(r.BINARY_EVENT==t.type||r.BINARY_ACK==t.type)&&(e+=t.attachments,e+="-"),t.nsp&&"/"!=t.nsp&&(n=!0,e+=t.nsp),null!=t.id&&(n&&(e+=",",n=!1),e+=t.id),null!=t.data&&(n&&(e+=","),e+=f.stringify(t.data)),u("encoded %j as %s",t,e),e}function o(t,e){function r(t){var r=l.deconstructPacket(t),n=i(r.packet),o=r.buffers;o.unshift(n),e(o)}l.removeBlobs(t,r)}function s(){this.reconstructor=null}function a(t){var e={},n=0;if(e.type=Number(t.charAt(0)),null==r.types[e.type])return c();if(r.BINARY_EVENT==e.type||r.BINARY_ACK==e.type){for(e.attachments="";"-"!=t.charAt(++n);)e.attachments+=t.charAt(n);e.attachments=Number(e.attachments)}if("/"==t.charAt(n+1))for(e.nsp="";++n;){var i=t.charAt(n);if(","==i)break;if(e.nsp+=i,n+1==t.length)break}else e.nsp="/";var o=t.charAt(n+1);if(""!=o&&Number(o)==o){for(e.id="";++n;){var i=t.charAt(n);if(null==i||Number(i)!=i){--n;break}if(e.id+=t.charAt(n),n+1==t.length)break}e.id=Number(e.id)}if(t.charAt(++n))try{e.data=f.parse(t.substr(n))}catch(t){return c()}return u("decoded %s as %j",t,e),e}function h(t){this.reconPack=t,this.buffers=[]}function c(){return{type:r.ERROR,data:"parser error"}}var u=t(253)("socket.io-parser"),f=t(290),d=(t(289),t(252)),l=t(286),p=t(288);r.protocol=4,r.types=["CONNECT","DISCONNECT","EVENT","BINARY_EVENT","ACK","BINARY_ACK","ERROR"],r.CONNECT=0,r.DISCONNECT=1,r.EVENT=2,r.ACK=3,r.ERROR=4,r.BINARY_EVENT=5,r.BINARY_ACK=6,r.Encoder=n,r.Decoder=s,n.prototype.encode=function(t,e){if(u("encoding packet %j",t),r.BINARY_EVENT==t.type||r.BINARY_ACK==t.type)o(t,e);else{var n=i(t);e([n])}},d(s.prototype),s.prototype.add=function(t){var e;if("string"==typeof t)e=a(t),r.BINARY_EVENT==e.type||r.BINARY_ACK==e.type?(this.reconstructor=new h(e),0==this.reconstructor.reconPack.attachments&&this.emit("decoded",e)):this.emit("decoded",e);else{if(!p(t)&&!t.base64)throw new Error("Unknown type: "+t);if(!this.reconstructor)throw new Error("got binary data when not reconstructing a packet");e=this.reconstructor.takeBinaryData(t),e&&(this.reconstructor=null,this.emit("decoded",e))}},s.prototype.destroy=function(){this.reconstructor&&this.reconstructor.finishedReconstruction()},h.prototype.takeBinaryData=function(t){if(this.buffers.push(t),this.buffers.length==this.reconPack.attachments){var e=l.reconstructPacket(this.reconPack,this.buffers);return this.finishedReconstruction(),e}return null},h.prototype.finishedReconstruction=function(){this.reconPack=null,this.buffers=[]}},{}],288:[function(t,e){(function(t){function r(e){return t.Buffer&&t.Buffer.isBuffer(e)||t.ArrayBuffer&&e instanceof ArrayBuffer}e.exports=r}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],289:[function(t,e){e.exports=t(207)},{}],290:[function(t,e,r){!function(t){function e(t){if(e[t]!==o)return e[t];var r;if("bug-string-char-index"==t)r="a"!="a"[0];else if("json"==t)r=e("json-stringify")&&e("json-parse");else{var n,i='{"a":[1,true,false,null,"\\u0000\\b\\n\\f\\r\\t"]}';if("json-stringify"==t){var a=c.stringify,h="function"==typeof a&&u;if(h){(n=function(){return 1}).toJSON=n;try{h="0"===a(0)&&"0"===a(new Number)&&'""'==a(new String)&&a(s)===o&&a(o)===o&&a()===o&&"1"===a(n)&&"[1]"==a([n])&&"[null]"==a([o])&&"null"==a(null)&&"[null,null,null]"==a([o,s,null])&&a({a:[n,!0,!1,null,"\x00\b\n\f\r	"]})==i&&"1"===a(null,n)&&"[\n 1,\n 2\n]"==a([1,2],null,1)&&'"-271821-04-20T00:00:00.000Z"'==a(new Date(-864e13))&&'"+275760-09-13T00:00:00.000Z"'==a(new Date(864e13))&&'"-000001-01-01T00:00:00.000Z"'==a(new Date(-621987552e5))&&'"1969-12-31T23:59:59.999Z"'==a(new Date(-1))}catch(t){h=!1}}r=h}if("json-parse"==t){var f=c.parse;if("function"==typeof f)try{if(0===f("0")&&!f(!1)){n=f(i);var d=5==n.a.length&&1===n.a[0];if(d){try{d=!f('"	"')}catch(t){}if(d)try{d=1!==f("01")}catch(t){}if(d)try{d=1!==f("1.")}catch(t){}}}}catch(t){d=!1}r=d}}return e[t]=!!r}var n,i,o,s={}.toString,a="function"==typeof define&&define.amd,h="object"==typeof JSON&&JSON,c="object"==typeof r&&r&&!r.nodeType&&r;c&&h?(c.stringify=h.stringify,c.parse=h.parse):c=t.JSON=h||{};var u=new Date(-0xc782b5b800cec);try{u=-109252==u.getUTCFullYear()&&0===u.getUTCMonth()&&1===u.getUTCDate()&&10==u.getUTCHours()&&37==u.getUTCMinutes()&&6==u.getUTCSeconds()&&708==u.getUTCMilliseconds()}catch(t){}if(!e("json")){var f="[object Function]",d="[object Date]",l="[object Number]",p="[object String]",v="[object Array]",b="[object Boolean]",g=e("bug-string-char-index");if(!u)var y=Math.floor,m=[0,31,59,90,120,151,181,212,243,273,304,334],w=function(t,e){return m[e]+365*(t-1970)+y((t-1969+(e=+(e>1)))/4)-y((t-1901+e)/100)+y((t-1601+e)/400)};(n={}.hasOwnProperty)||(n=function(t){var e,r={};return(r.__proto__=null,r.__proto__={toString:1},r).toString!=s?n=function(t){var e=this.__proto__,r=t in(this.__proto__=null,this);return this.__proto__=e,r}:(e=r.constructor,n=function(t){var r=(this.constructor||e).prototype;return t in this&&!(t in r&&this[t]===r[t])}),r=null,n.call(this,t)});var x={boolean:1,number:1,string:1,undefined:1},_=function(t,e){var r=typeof t[e];return"object"==r?!!t[e]:!x[r]};if(i=function(t,e){var r,o,a,h=0;(r=function(){this.valueOf=0}).prototype.valueOf=0,o=new r;for(a in o)n.call(o,a)&&h++;return r=o=null,h?i=2==h?function(t,e){var r,i={},o=s.call(t)==f;for(r in t)o&&"prototype"==r||n.call(i,r)||!(i[r]=1)||!n.call(t,r)||e(r)}:function(t,e){var r,i,o=s.call(t)==f;for(r in t)o&&"prototype"==r||!n.call(t,r)||(i="constructor"===r)||e(r);(i||n.call(t,r="constructor"))&&e(r)}:(o=["valueOf","toString","toLocaleString","propertyIsEnumerable","isPrototypeOf","hasOwnProperty","constructor"],i=function(t,e){var r,i,a=s.call(t)==f,h=!a&&"function"!=typeof t.constructor&&_(t,"hasOwnProperty")?t.hasOwnProperty:n;for(r in t)a&&"prototype"==r||!h.call(t,r)||e(r);for(i=o.length;r=o[--i];h.call(t,r)&&e(r));}),i(t,e)},!e("json-stringify")){var S={92:"\\\\",34:'\\"',8:"\\b",12:"\\f",10:"\\n",13:"\\r",9:"\\t"},T="000000",A=function(t,e){return(T+(e||0)).slice(-t)},E="\\u00",C=function(t){var e,r='"',n=0,i=t.length,o=i>10&&g;for(o&&(e=t.split(""));i>n;n++){var s=t.charCodeAt(n);switch(s){case 8:case 9:case 10:case 12:case 13:case 34:case 92:r+=S[s];break;default:if(32>s){r+=E+A(2,s.toString(16));break}r+=o?e[n]:g?t.charAt(n):t[n]}}return r+'"'},M=function(t,e,r,a,h,c,u){var f,g,m,x,_,S,T,E,R,k,B,I,P,L,O,D;try{f=e[t]}catch(t){}if("object"==typeof f&&f)if(g=s.call(f),g!=d||n.call(f,"toJSON"))"function"==typeof f.toJSON&&(g!=l&&g!=p&&g!=v||n.call(f,"toJSON"))&&(f=f.toJSON(t));else if(f>-1/0&&1/0>f){if(w){for(_=y(f/864e5),m=y(_/365.2425)+1970-1;w(m+1,0)<=_;m++);for(x=y((_-w(m,0))/30.42);w(m,x+1)<=_;x++);_=1+_-w(m,x),S=(f%864e5+864e5)%864e5,T=y(S/36e5)%24,E=y(S/6e4)%60,R=y(S/1e3)%60,k=S%1e3}else m=f.getUTCFullYear(),x=f.getUTCMonth(),_=f.getUTCDate(),T=f.getUTCHours(),E=f.getUTCMinutes(),R=f.getUTCSeconds(),k=f.getUTCMilliseconds();f=(0>=m||m>=1e4?(0>m?"-":"+")+A(6,0>m?-m:m):A(4,m))+"-"+A(2,x+1)+"-"+A(2,_)+"T"+A(2,T)+":"+A(2,E)+":"+A(2,R)+"."+A(3,k)+"Z"}else f=null;if(r&&(f=r.call(e,t,f)),null===f)return"null";if(g=s.call(f),g==b)return""+f;if(g==l)return f>-1/0&&1/0>f?""+f:"null";if(g==p)return C(""+f);if("object"==typeof f){for(L=u.length;L--;)if(u[L]===f)throw TypeError();if(u.push(f),B=[],O=c,c+=h,g==v){for(P=0,L=f.length;L>P;P++)I=M(P,f,r,a,h,c,u),B.push(I===o?"null":I);D=B.length?h?"[\n"+c+B.join(",\n"+c)+"\n"+O+"]":"["+B.join(",")+"]":"[]"}else i(a||f,function(t){var e=M(t,f,r,a,h,c,u);e!==o&&B.push(C(t)+":"+(h?" ":"")+e)}),D=B.length?h?"{\n"+c+B.join(",\n"+c)+"\n"+O+"}":"{"+B.join(",")+"}":"{}";return u.pop(),D}};c.stringify=function(t,e,r){var n,i,o,a;if("function"==typeof e||"object"==typeof e&&e)if((a=s.call(e))==f)i=e;else if(a==v){o={};for(var h,c=0,u=e.length;u>c;h=e[c++],a=s.call(h),(a==p||a==l)&&(o[h]=1));}if(r)if((a=s.call(r))==l){if((r-=r%1)>0)for(n="",r>10&&(r=10);n.length<r;n+=" ");}else a==p&&(n=r.length<=10?r:r.slice(0,10));return M("",(h={},h[""]=t,h),i,o,n,"",[])}}if(!e("json-parse")){var R,k,B=String.fromCharCode,I={92:"\\",34:'"',47:"/",98:"\b",116:"	",110:"\n",102:"\f",114:"\r"},P=function(){throw R=k=null,SyntaxError()},L=function(){for(var t,e,r,n,i,o=k,s=o.length;s>R;)switch(i=o.charCodeAt(R)){case 9:case 10:case 13:case 32:R++;break;case 123:case 125:case 91:case 93:case 58:case 44:return t=g?o.charAt(R):o[R],R++,t;case 34:for(t="@",R++;s>R;)if(i=o.charCodeAt(R),32>i)P();else if(92==i)switch(i=o.charCodeAt(++R)){case 92:case 34:case 47:case 98:case 116:case 110:case 102:case 114:t+=I[i],R++;break;case 117:for(e=++R,r=R+4;r>R;R++)i=o.charCodeAt(R),i>=48&&57>=i||i>=97&&102>=i||i>=65&&70>=i||P();t+=B("0x"+o.slice(e,R));break;default:P()}else{if(34==i)break;for(i=o.charCodeAt(R),e=R;i>=32&&92!=i&&34!=i;)i=o.charCodeAt(++R);t+=o.slice(e,R)}if(34==o.charCodeAt(R))return R++,t;P();default:if(e=R,45==i&&(n=!0,i=o.charCodeAt(++R)),i>=48&&57>=i){for(48==i&&(i=o.charCodeAt(R+1),i>=48&&57>=i)&&P(),n=!1;s>R&&(i=o.charCodeAt(R),i>=48&&57>=i);R++);if(46==o.charCodeAt(R)){for(r=++R;s>r&&(i=o.charCodeAt(r),i>=48&&57>=i);r++);r==R&&P(),R=r}if(i=o.charCodeAt(R),101==i||69==i){for(i=o.charCodeAt(++R),(43==i||45==i)&&R++,r=R;s>r&&(i=o.charCodeAt(r),i>=48&&57>=i);r++);r==R&&P(),R=r}return+o.slice(e,R)}if(n&&P(),"true"==o.slice(R,R+4))return R+=4,!0;if("false"==o.slice(R,R+5))return R+=5,!1;if("null"==o.slice(R,R+4))return R+=4,null;P()}return"$"},O=function(t){var e,r;if("$"==t&&P(),"string"==typeof t){if("@"==(g?t.charAt(0):t[0]))return t.slice(1);if("["==t){for(e=[];t=L(),"]"!=t;r||(r=!0))r&&(","==t?(t=L(),"]"==t&&P()):P()),","==t&&P(),e.push(O(t));return e}if("{"==t){for(e={};t=L(),"}"!=t;r||(r=!0))r&&(","==t?(t=L(),"}"==t&&P()):P()),(","==t||"string"!=typeof t||"@"!=(g?t.charAt(0):t[0])||":"!=L())&&P(),e[t.slice(1)]=O(L());return e}P()}return t},D=function(t,e,r){var n=j(t,e,r);n===o?delete t[e]:t[e]=n},j=function(t,e,r){var n,o=t[e];if("object"==typeof o&&o)if(s.call(o)==v)for(n=o.length;n--;)D(o,n,r);else i(o,function(t){D(o,t,r)});return r.call(t,e,o)};c.parse=function(t,e){var r,n;return R=0,k=""+t,r=O(L()),"$"!=L()&&P(),R=k=null,e&&s.call(e)==f?j((n={},n[""]=r,n),"",e):r}}}a&&define(function(){return c})}(this)},{}],291:[function(t,e){function r(t,e){var r=[];e=e||0;for(var n=e||0;n<t.length;n++)r[n-e]=t[n];return r}e.exports=r},{}],292:[function(t,e){"use strict";function r(t){return t in c?c[t]:c[t]=n(t)}function n(t){var e,r=t.replace(/-([a-z])/g,function(t,e){return e.toUpperCase()}),n=a.length;if(void 0!==s[r])return r;for(r=i(t);n--;)if(e=a[n]+r,void 0!==s[e])return e;throw new Error("unable to prefix "+t)}function i(t){return t.charAt(0).toUpperCase()+t.slice(1)}function o(t){var e=r(t),n=/([A-Z])/g;return n.test(e)&&(e=(h.test(e)?"-":"")+e.replace(n,"-$1")),e.toLowerCase()}var s=document.createElement("p").style,a="O ms Moz webkit".split(" "),h=/^(o|ms|moz|webkit)/,c={};e.exports=r,e.exports.dash=o},{}],293:[function(t,e){e.exports="vibrate"in window.navigator?function(t){return window.navigator.vibrate(t)}:function(){return!1}},{}]},{},[20]);