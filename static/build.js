!function e(t,r,i){function n(s,a){if(!r[s]){if(!t[s]){var h="function"==typeof require&&require;if(!a&&h)return h(s,!0);if(o)return o(s,!0);var c=new Error("Cannot find module '"+s+"'");throw c.code="MODULE_NOT_FOUND",c}var u=r[s]={exports:{}};t[s][0].call(u.exports,function(e){var r=t[s][1][e];return n(r?r:e)},u,u.exports,e,t,r,i)}return r[s].exports}for(var o="function"==typeof require&&require,s=0;s<i.length;s++)n(i[s]);return n}({1:[function(e,t){function r(){i.BitmapText.apply(this,arguments),this._text=this.text}var i=e("pixi.js");r.prototype=Object.create(i.BitmapText.prototype),r.prototype.constructor=r,Object.defineProperty(r.prototype,"text",{set:function(e){this._text!==e&&this.setText(this._text=""+e)},get:function(){return this._text}}),t.exports=r},{"pixi.js":224}],2:[function(e,t){function r(e){i.DisplayObjectContainer.call(this);var t=n(e);this.addChild(t),this._bound={x:0,y:0,w:0,h:0,group:s.CAR,obj:this}}var i=e("pixi.js"),n=e("./generateCar"),o=e("./behavior/velUpdate"),s=e("./Groups"),a=84,h=48;r.prototype=Object.create(i.DisplayObjectContainer.prototype),r.prototype.constructor=r,r.prototype.destroy=function(){this.parent&&this.parent.removeChild(this)},r.prototype.update=function(e,t){this._init||(this._init=!0,this.width=this.vel[0]<0?-a:a,this.height=h,this._bound.w=.8*a,this._bound.h=h),o.call(this,e,t),this._bound.x=this.x+Math.min(this.width,0)+.1*a,this._bound.y=this.y},r.prototype.toQuadTreeObject=function(){return this._bound},t.exports=r},{"./Groups":9,"./behavior/velUpdate":38,"./generateCar":43,"pixi.js":224}],3:[function(e,t){function r(){i.DisplayObjectContainer.call(this)}var i=e("pixi.js"),n=e("./behavior/updateChildren");r.prototype=Object.create(i.DisplayObjectContainer.prototype),r.prototype.constructor=r,r.prototype.update=n,t.exports=r},{"./behavior/updateChildren":37,"pixi.js":224}],4:[function(e,t){function r(e,t,r,n){i.DisplayObjectContainer.call(this);var c=new i.Sprite(h);c.pivot.set(12,24);var u=new o(e.player,{align:"center",font:s.style(n||10)});u.tint=r?16729088:13386752,u.updateText(),u.position.set(-u.width/2,0),this.position.set(e.x,a.scoreToY(e.score)),this.addChild(c),this.addChild(u),this.alpha=e.opacity,this.animated=t,this.start=Date.now()}var i=e("pixi.js"),n=e("smoothstep"),o=e("./BitmapText"),s=e("./font"),a=e("./Player"),h=i.Texture.fromImage("./img/dead_carrot.png");r.prototype=Object.create(i.DisplayObjectContainer.prototype),r.prototype.constructor=r,r.prototype.update=function(){if(this.animated){var e=1+n(4e3,0,Date.now()-this.start);this.scale.set(e,e)}},t.exports=r},{"./BitmapText":1,"./Player":23,"./font":42,"pixi.js":224,smoothstep:236}],5:[function(e,t){function r(e,t){i.Sprite.call(this,h),this.pivot.set(16,16),this.growSpeed=.005,this.targetScale=e,this.scale.set(0,0),this.dieTimeout=t||6e3,this._bound={x:0,y:0,w:0,h:0,group:n.PARTICLE,obj:this}}var i=e("pixi.js"),n=e("./Groups"),o=e("./behavior/destroyOutOfMap"),s=e("./behavior/velUpdate"),a=e("./behavior/dieAfterTimeout"),h=i.Texture.fromImage("./img/fireball.png");r.prototype=Object.create(i.Sprite.prototype),r.prototype.constructor=r,r.prototype.update=function(e,t){if(s.call(this,e,t),this.startT||(this.startT=e),this.scale.x<this.targetScale){var r=Math.min((e-this.startT)*this.growSpeed,this.targetScale);this.scale.set(r,r)}o.call(this,e,t),a.call(this,e,t);var i=this.width,n=this.height;this._bound.x=this.x-this.pivot.x*this.scale.x+.2*i,this._bound.y=this.y-this.pivot.y*this.scale.y+.2*n,this._bound.w=.6*i,this._bound.h=.6*n},r.prototype.toQuadTreeObject=function(){return this._bound},r.prototype.playerLifeValue=function(){return-30*this.scale.x},r.prototype.explodeInWorld=function(e){e.fireballExplode(this),this.parent&&this.parent.removeChild(this)},r.prototype.hitPlayer=function(e){e.onFireball(this)},t.exports=r},{"./Groups":9,"./behavior/destroyOutOfMap":34,"./behavior/dieAfterTimeout":35,"./behavior/velUpdate":38,"pixi.js":224}],6:[function(e,t){function r(e){i.Sprite.call(this,s[~~(Math.random()*s.length)]),this.rotation=2*Math.random()*Math.PI,this.pivot.set(12,12),this.height=this.width=e}var i=e("pixi.js"),n=e("./utils/tilePIXI"),o=i.Texture.fromImage("./img/foots.png"),s=[0,1,2,3,4,5,6,7,8,9].map(function(e){return n.tile24(o,0,e)});r.prototype=Object.create(i.Sprite.prototype),r.prototype.constructor=r,t.exports=r},{"./utils/tilePIXI":53,"pixi.js":224}],7:[function(e,t){function r(){i.DisplayObjectContainer.call(this),this.containers=new n(this.alloc.bind(this),this.free.bind(this),{chunkSize:200,ahead:1,behind:1,bounds:[0,+1/0]})}var i=e("pixi.js"),n=e("sliding-window"),o=e("./conf"),s=e("./Foot");r.prototype=Object.create(i.DisplayObjectContainer.prototype),r.prototype.constructor=r,r.prototype.alloc=function(){var e=new i.DisplayObjectContainer;return this.addChild(e),e},r.prototype.free=function(e,t){this.removeChild(t)},r.prototype.watchWindow=function(e){this.containers.move(e)},r.prototype.walk=function(e,t){var r=new s(t);r.position.x=e.x,r.position.y=e.y;var i=this.containers.getChunk(o.HEIGHT-e.y);i&&i.addChild(r)},t.exports=r},{"./Foot":6,"./conf":39,"pixi.js":224,"sliding-window":235}],8:[function(e,t){function r(e,t,r){i.Stage.call(this,16777215),i.EventTarget.mixin(this);var n=new v,o=new v,s=new v,a=new i.DisplayObjectContainer,h=new p(e,n,o,a,g),b=new v,w=new i.DisplayObjectContainer,_=new m(r,w);_.controls=t;var x=new v,S=new i.DisplayObjectContainer,T=new i.DisplayObjectContainer,A=new d("",{font:f.style(20,!0)});A.tint=8947899,A.position.x=10,A.position.y=10;var E=new d("",{font:f.style(20,!0)});E.tint=12290184,E.position.x=10,E.position.y=40;var C=new d("",{font:f.style(20)});C.position.x=u.WIDTH-80,C.position.y=10;var k=new i.Sprite(y);k.scale.set(.5,.5),k.position.x=u.WIDTH-40,k.position.y=-2,k.alpha=0;var R=new l(o,s);R.addChild(h),R.addChild(b),R.addChild(w),R.addChild(a),R.addChild(x),R.addChild(S),R.addChild(_),R.addChild(n),R.addChild(o),R.addChild(s),T.addChild(A),T.addChild(E),T.addChild(k),T.addChild(C),this.addChild(R),this.addChild(T),this.world=R,this.map=h,this.cars=n,this.particles=o,this.spawners=a,this.deadCarrots=b,this.footprints=w,this.player=_,this.players=x,this.names=S,this.ui=T,this.rank=E,this.score=A,this.life=C,this.m2=k,this.controls=t,this.audio1=c.loop("/audio/1.ogg"),this.playerGhost=!0,c.play("start")}var i=e("pixi.js"),n=e("smoothstep"),o=e("lodash"),s=e("simple-quadtree"),a=e("./Groups"),h=e("./utils/dist"),c=e("./audio"),u=e("./conf"),f=e("./font"),d=e("./BitmapText"),l=e("./World"),p=e("./Map"),b=e("./DeadCarrot"),m=e("./Player"),v=e("./Container"),g="v2",y=i.Texture.fromImage("./img/m2.png");r.prototype=Object.create(i.Stage.prototype),r.prototype.constructor=r,r.prototype.destroy=function(){this.audio1.stop();for(var e in this)this[e]=null},r.prototype.handleCarCollides=function(e){e.group&a.PARTICLE&&e.obj.explodeInWorld(this.world)},r.prototype.update=function(e,t){function r(e){e.group&a.PARTICLE&&e.obj.explodeInWorld(l)}function i(e,t){if(!e.isDead()){if(t||!E){var r=e.toQuadTreeObject();w.get(r,function(r){if(r.group&a.CAR){var i=r.obj;e.onCarHit(i),l.carHitPlayerExplode(i,e)}else if(r.group&a.PARTICLE){var n=r.obj;n.explodeInWorld(l),n.hitPlayer(e),t&&A++}})}e.life<=0&&(e.die(),l.playerDied(e,t),t&&(l.removeChild(e),this.emit("GameOver",e.getScore())))}}var o,f,d,l=this.world,p=this.player,b=this.controls,v=this.map,g=b.x()||b.y(),y=0,w=s(0,0,u.WIDTH,100);for(o=0;o<this.particles.children.length;++o)for(d=this.particles.children[o],f=0;f<d.children.length;++f){var _=d.children[f];w.put(_.toQuadTreeObject())}for(o=0;o<this.cars.children.length;++o)for(d=this.cars.children[o],f=0;f<d.children.length;++f){var x=d.children[f],S=x.toQuadTreeObject();w.get(S,r),w.put(S);var T=h(x,p);y+=Math.pow(n(300,50,T),2),!x.neverSaw&&300>T&&(x.neverSaw=1,c.play("car",x))}var A=0,E=this.playerGhost;if(this.players.children.length){var C=this.players.children[0].children;for(o=0;o<C.length;++o)i.call(this,C[o],!1)}i.call(this,p,!0),A=Math.max(0,A-.001*t),this.audio1.setVolume(p.dead?0:g?.2+Math.min(.8,A+y/4):0);var k=m.getPlayerScore(p);if(k>0){if(this.scores){for(var R=0,M=this.scores.length;M>R&&k<this.scores[R].score;++R);++R,this.rank.text="#"+R}else this.rank.text="";this.score.text=""+k,p.life>0?(this.m2.tint=this.life.tint=p.life<50?16711680:p.life<=100?16750848:p.life<=200?10066329:6736998,this.life.text=""+(p.life/100).toFixed(2),this.m2.alpha=1):(this.life.text="",this.m2.alpha=0)}l.focusOn(p),c.micOn(p);var B=l.getWindow(),I=this.footprints.children;for(o=0;o<I.length;++o)I[o].watchWindow(B);v.watchWindow(B),l.update(e,t),c.update(e,t)},r.prototype.positionObfuscation=function(e){var t=this.player.width;return.9*n(40+t,t/2,h(this.player.position,e))},r.prototype.createDeadCarrot=function(e,t){if(e.opacity>0){var r=new b(e,t,e.player===this.player.name);this.deadCarrots.addChild(r)}},r.prototype.setScores=function(e,t){var r=this.scores||[],i=o.filter(e,function(e){return!o.any(r,function(t){return e.player===t.player&&e.x===t.x&&e.score===t.score})});e=[].concat(e),e.sort(function(e,t){return t.score-e.score}),this.map.setScores(e),i.forEach(function(e){this.createDeadCarrot(e,t)}.bind(this)),this.scores=e;var n=this.player.name,s=o.findIndex(e,function(e){return e.player===n}),a=e[s];a?(this.score.text=""+a.score,this.rank.text="#"+(s+1)):(this.score.text="no score",this.rank.text="no rank")},t.exports=r},{"./BitmapText":1,"./Container":3,"./DeadCarrot":4,"./Groups":9,"./Map":14,"./Player":23,"./World":30,"./audio":32,"./conf":39,"./font":42,"./utils/dist":48,lodash:222,"pixi.js":224,"simple-quadtree":234,smoothstep:236}],9:[function(e,t){t.exports={CAR:Math.pow(2,1),PARTICLE:Math.pow(2,2),PLAYER:Math.pow(2,3)}},{}],10:[function(e,t){function r(e,t){if(i.DisplayObjectContainer.call(this),s[t]){var r=new i.Sprite(s[t]);r.position.set(0,0),this.addChild(r)}var a=new n(e.player,{align:"center",font:o.style(10)});a.tint=13386752,a.updateText(),a.position.set(30,10),this.addChild(a);var h=new n(""+e.score,{align:"center",font:o.style(12,!0)});h.tint=13386752,h.updateText(),h.position.set(100,10),this.addChild(h)}var i=e("pixi.js"),n=e("./BitmapText"),o=e("./font"),s=[i.Texture.fromImage("./img/scoreIcon1.png"),i.Texture.fromImage("./img/scoreIcon2.png"),i.Texture.fromImage("./img/scoreIcon3.png")];r.prototype=Object.create(i.DisplayObjectContainer.prototype),r.prototype.constructor=r,t.exports=r},{"./BitmapText":1,"./font":42,"pixi.js":224}],11:[function(e,t){function r(){i.Sprite.call(this,h),this.logo=new i.Sprite(c),this.logo.scale.set(.5,.5),this.logo.position.set((a.WIDTH-200)/2,0),this.logo.tint=0,this.highscoresTitle=new o("Daily Highscores",{font:s.style(18,!0)}),this.highscoresTitle.position.set(10,200),this.highscoresTitle.tint=1118481,this.highscoresTitle.updateText(),this.highscores=new i.DisplayObjectContainer,this.addChild(this.logo),this.addChild(this.highscoresTitle),this.addChild(this.highscores)}var i=e("pixi.js"),n=e("./HighScore"),o=e("./BitmapText"),s=e("./font"),a=e("./conf"),h=i.Texture.fromImage("./img/map1.png"),c=i.Texture.fromImage("./img/logo.png");r.prototype=Object.create(i.Sprite.prototype),r.prototype.constructor=r,r.prototype.setScores=function(e){this.highscores.removeChildren();for(var t=0;t<e.length&&5>t;++t){var r=e[t],i=new n(r,t);i.position.set(40,240+30*t),this.highscores.addChild(i)}},t.exports=r},{"./BitmapText":1,"./HighScore":10,"./conf":39,"./font":42,"pixi.js":224}],12:[function(e,t){function r(){this._keys={},document.body.addEventListener("keydown",this._onDown.bind(this),!1),document.body.addEventListener("keyup",this._onUp.bind(this),!1),window.addEventListener("focus",this._onFocus.bind(this),!1),window.addEventListener("blur",this._onBlur.bind(this),!1)}r.prototype={_onFocus:function(){this._paused=0},_onBlur:function(){this._paused=1},_onDown:function(e){[37,38,39,40].indexOf(e.which)>=0&&e.preventDefault(),this._keys[e.which]=1},_onUp:function(e){this._keys[e.which]=0},paused:function(){return this._paused},x:function(){if(this._paused)return 0;var e=!!(this._keys[37]||this._keys[81]||this._keys[65]),t=!(!this._keys[39]&&!this._keys[68]);return-e+t},y:function(){if(this._paused)return 0;var e=!!(this._keys[38]||this._keys[90]||this._keys[87]),t=!(!this._keys[40]&&!this._keys[83]);return+e-t}},t.exports=r},{}],13:[function(e,t){function r(){i.Stage.call(this,6588614),this.layer=new i.DisplayObjectContainer,this.logo=new i.Sprite(o),this.logo.scale.set(.5,.5),this.logo.position.set((a.WIDTH-200)/2,100),this.loadbar=new i.Sprite(s),this.loadbar.alpha=.6,this.loadbar.scale.set(.5,.5),this.loadbar.position.set((a.WIDTH-200)/2,300),this.layer.addChild(this.logo),this.layer.addChild(this.loadbar),this.addChild(this.layer),this.setProgress(0)}var i=e("pixi.js"),n=e("smoothstep"),o=i.Texture.fromImage("./img/logo.png"),s=i.Texture.fromImage("./img/loadbar.png"),a=e("./conf");r.prototype=Object.create(i.Stage.prototype),r.prototype.constructor=r,r.prototype.setProgress=function(e){this.progress=e},r.prototype.update=function(e){this.layer.alpha=n(0,1e3,e-250);var t=new i.Graphics;t.beginFill(),t.drawRect(0,0,this.progress*a.WIDTH,a.HEIGHT),this.loadbar.mask=t},t.exports=r},{"./conf":39,"pixi.js":224,smoothstep:236}],14:[function(e,t){function r(e,t,r,i,s){if(n.DisplayObjectContainer.call(this),this.seed=e,this.cars=t,this.particles=r,this.spawners=i,this.generator=l[s],!this.generator)throw new Error("no such generator "+s);var c=480,u=this.homeTile=new a,f=new n.DisplayObjectContainer;this.addChild(f),this.generateMapTileWindow=new o(function(e){var t,r=-e*c;return t=0===e?u:new h(e),t.position.y=r,f.addChild(t),t},function(e,t){f.removeChild(t)},{chunkSize:c,ahead:1,behind:1,bounds:[0,+1/0]}),this.generateLevels=new o(this.allocChunk.bind(this),this.freeChunk.bind(this),{chunkSize:this.generator.chunkSize,ahead:1,behind:1,bounds:[1,+1/0]})}var i=e("seedrandom"),n=e("pixi.js"),o=e("sliding-window"),s=e("./conf"),a=e("./HomeTile"),h=e("./MapTile"),c=e("./Spawner"),u=e("./Car"),f=e("./Fireball"),d=e("./Snowball"),l=e("./generators"),p=n.Texture.fromImage("/img/road.png"),b=n.Texture.fromImage("/img/roadin.png"),m=n.Texture.fromImage("/img/roadout.png"),v=n.Texture.fromImage("/img/roadseparator.png"),g=n.Texture.fromImage("/img/firespawner.png"),y=n.Texture.fromImage("/img/snowspawner.png");r.prototype=Object.create(n.DisplayObjectContainer.prototype),r.prototype.constructor=r,r.prototype.setScores=function(e){this.homeTile.setScores(e)},r.prototype.watchWindow=function(e){this._win=e},r.prototype.update=function(e){var t=this._win;t&&(this.generateMapTileWindow.move(t,e),this.generateLevels.move(t,e))},r.prototype.freeChunk=function(e,t){t.destroy()},r.prototype.allocChunk=function(e,t){function r(e){return h.push(e),e}var o=i(this.seed+"-"+e),a=this.generator.generate(e,t,o),h=[],l=-e*this.generator.chunkSize,w=r(new n.DisplayObjectContainer),_=r(new n.DisplayObjectContainer);if(this.addChild(w),this.addChild(_),(a.roads||[]).forEach(function(e){var i=[e.leftToRight?-100:s.WIDTH+100,l+e.y],o=e.leftToRight?0:Math.PI,a=function(e,t){return new u(t)},h=new c({seed:l+e.y,pos:i,spawn:a,ang:o,speed:e.speed,vel:e.vel,seq:e.seq,livingBound:{x:-100,y:l+e.y,height:100,width:s.WIDTH+200}});h.init(t),this.cars.addChild(r(h));var f=new n.Sprite(p);if(f.position.set(0,l+e.y),w.addChild(f),e.last&&(f=new n.Sprite(m),f.position.set(0,l+e.y-20),w.addChild(f)),e.first&&(f=new n.Sprite(b),f.position.set(0,l+e.y+10),w.addChild(f)),!e.last){var d=new n.Sprite(v);d.position.set(-~~(100*Math.random()),l+e.y-8),_.addChild(d)}},this),(a.snowballs||[]).forEach(function(e){var r=[e.pos[0],e.pos[1]+l],i=e.scale;e.seed=""+r,e.pos=r,e.spawn=function(e,t){return new d(i(e,t))},e.front=10,delete e.scale;var o=new c(e);o.init(t);var s=new n.Sprite(y);s.pivot.set(40,40),s.scale.set(.5,.5),s.position.set.apply(s.position,r),this.spawners.addChild(s),this.particles.addChild(o)},this),(a.fireballs||[]).forEach(function(e){var r=[e.pos[0],e.pos[1]+l],i=e.scale;e.seed=""+r,e.pos=r,e.spawn=function(e,t){return new f(i(e,t))},e.front=10,delete e.scale;var o=new c(e);o.init(t);var s=new n.Sprite(g);s.pivot.set(40,40),s.scale.set(.5,.5),s.position.set.apply(s.position,r),this.spawners.addChild(s),this.particles.addChild(o)},this),this.debug){var x=r(new n.DisplayObjectContainer),S=this.generator.chunkSize;x.position.set(0,l),this.debug.addChild(x);var T=new n.Graphics;T.beginFill(16711680),T.drawRect(0,S-2,s.WIDTH,2),T.endFill();var A=new n.Text("chunk "+e,{fill:"#F00",font:"bold 32px monospace"});A.scale.set(.5,.5),A.position.set(s.WIDTH-A.width-4,S-4-A.height);var E=S-4;(a.logs||[]).forEach(function(e){var t=new n.Text(e,{fill:"#F00",font:"normal 16px monospace"});t.scale.set(.5,.5),E-=t.height,t.position.set(4,E),t.alpha=.7,x.addChild(t)}),x.addChild(T),x.addChild(A)}return a=null,{destroy:function(){h.forEach(function(e){e.parent.removeChild(e)}),h=null}}},t.exports=r},{"./Car":2,"./Fireball":5,"./HomeTile":11,"./MapTile":15,"./Snowball":27,"./Spawner":28,"./conf":39,"./generators":44,"pixi.js":224,seedrandom:233,"sliding-window":235}],15:[function(e,t){function r(e){i.Sprite.call(this,n[e%n.length])}var i=e("pixi.js"),n=[i.Texture.fromImage("./img/map1.png")];r.prototype=Object.create(i.Sprite.prototype),r.prototype.constructor=r,t.exports=r},{"pixi.js":224}],16:[function(e,t){function r(){this._x=0,this._y=0}r.prototype={setState:function(e){this._x=e.x,this._y=e.y},x:function(){return this._x},y:function(){return this._y}},t.exports=r},{}],17:[function(e,t){function r(e){this.socket=e,this.score=new o(e),this.playersByIds={},this.playersData={},this.players=new c,this.names=new i.DisplayObjectContainer,e.on(u.playermove,this.onPlayerMove.bind(this)),e.on(u.playerdie,this.onPlayerDie.bind(this)),e.on(u.playerenter,this.onPlayerEnter.bind(this)),e.on(u.playerleave,this.onPlayerLeave.bind(this)),e.on(u.players,this.onPlayers.bind(this)),this.playerGhost=!0;var t=this;this.env=this.playerGhost?{computeAlpha:function(e){return 1-t.game.positionObfuscation(e)}}:{},e.emit(u.ready,h)}var i=e("pixi.js"),n=e("./OtherPlayer"),o=e("./NetworkGameScore"),s=e("./NetworkPlayer"),a=e("./NetworkPlayerPlayback"),h=e("./conf"),c=e("./Container"),u=h.events;r.prototype={setGame:function(e){this.score.setGame(e),this.game=e,e.players.addChild(this.players),e.names.addChild(this.names),this.player&&this.player.destroy(),this.player=new s(e.player,this.socket)},onPlayers:function(e){for(var t in e)this.onNewPlayerData(e[t],t)},onPlayerDie:function(e,t,r){if(t in this.playersData){var i=this.playersByIds[t];i&&(i.onDie(e,r,this.game),i.destroy(),delete this.playersByIds[t])}},onPlayerMove:function(e,t){if(t in this.playersData){var r=this.playersByIds[t];if(!r){var i=this.playersData[t],o=new n(i.name,this.names,this.playerGhost?.6:1,this.env);o.position.x=-1e3,r=new a(o),this.playersByIds[t]=r,this.players.addChild(o)}r.onMove(e)}},onPlayerEnter:function(e,t){this.onNewPlayerData(e,t)},onPlayerLeave:function(e){var t=this.playersByIds[e];t&&(t.destroy(),delete this.playersByIds[e]),delete this.playersData[e]},onNewPlayerData:function(e,t){this.playersData[t]=e},update:function(e,t){if(this.game){this.player.update(e,t);for(var r in this.playersByIds)this.playersByIds[r].update(e,t)}}},t.exports=r},{"./Container":3,"./NetworkGameScore":18,"./NetworkPlayer":19,"./NetworkPlayerPlayback":20,"./OtherPlayer":21,"./conf":39,"pixi.js":224}],18:[function(e,t){function r(e){this.socket=e,this.scores=[],this.refreshScores=i(this._refreshScores.bind(this),800);var t=this;e.on(o.scores,function(e){t.scores=t.scores.concat(e),t.refreshScores(!1)}),e.on(o.newscore,this.addScore.bind(this))}var i=e("qdebounce"),n=e("./conf"),o=n.events;r.prototype={addScore:function(e){this.scores.push(e),this.refreshScores(!0)},_refreshScores:function(e){this.scores.sort(function(e,t){return e.score<t.score}),this.game&&this.game.setScores(this.scores,e)},setGame:function(e){var t=this;this.game=e,e.setScores(this.scores),e.on("GameOver",function(e){t.socket.emit(o.playerdie,e.data)})}},t.exports=r},{"./conf":39,qdebounce:228}],19:[function(e,t){function r(e,t,r){this.player=e,this.socket=t,this.rate=r||i.networkSendRate,this._lastSubmit=0,this.socket.emit(n.playerready,{name:e.name})}var i=e("./conf"),n=i.events,o=e("./PlayerMoveState");r.prototype={destroy:function(){this.player=null,this.socket=null},update:function(e){if(!(e-this._lastSubmit<this.rate||(this._lastSubmit=e,this.player.dead||this.player.controls.paused()))){var t=o.encodeFromPlayer(this.player,e);this.socket.emit(n.playermove,t)}}},t.exports=r},{"./PlayerMoveState":24,"./conf":39}],20:[function(e,t){function r(e,t){var r=new i;e.controls=r,this.player=e,this.controls=r,this.delay=t||n.networkPlaybackDelay,this.timeout=this.delay+100,this.evts=[]}var i=e("./NetworkControls"),n=e("./conf"),o=e("./PlayerMoveState");r.prototype={destroy:function(){this.player.destroy(),this.player=null,this.evts=null},onMove:function(e){var t=o.decode(e);this.evts.push(t)},onDie:function(e,t,r){r.world.playerDied(this.player,!1)},update:function(e){for(var t=0;t<this.evts.length;++t){var r=this.evts[t];r.time<e-this.delay&&(this.lastEvts=r.time,o.applyToPlayer(this.player,r),this.evts.splice(t--,1))}e>this.lastEvts+this.timeout&&this.controls.setState({x:0,y:0})}},t.exports=r},{"./NetworkControls":16,"./PlayerMoveState":24,"./conf":39}],21:[function(e,t){function r(e,t,r,s){this.nameSprite=new n("",{font:i.style(12)}),this.nameSprite.tint=13386752,o.call(this,e),t.addChild(this.nameSprite),this.maxAlpha=r||1,this.nameSprite.alpha=this.alpha=this.maxAlpha,this.env=s||{}}var i=e("./font"),n=e("./BitmapText"),o=e("./Player");r.prototype=Object.create(o.prototype),r.prototype.constructor=r,r.prototype.update=function(e,t){o.prototype.update.call(this,e,t),this.env.computeAlpha&&(this.nameSprite.alpha=this.alpha=this.maxAlpha*this.env.computeAlpha(this.position)),this.nameSprite.position.set(this.position.x-this.nameSprite.width/2,this.y+.4*this.height)},r.prototype.destroy=function(){this.nameSprite.parent.removeChild(this.nameSprite),this.parent.removeChild(this)},Object.defineProperty(r.prototype,"name",{set:function(e){this._name=e,this.nameSprite.text=e||""},get:function(){return this._name}}),t.exports=r},{"./BitmapText":1,"./Player":23,"./font":42}],22:[function(e,t){function r(e,t,r){i.DisplayObjectContainer.call(this),this.position.x=e.position.x,this.position.y=e.position.y,this.speed=r||150,this.alpha=e.alpha||1,this.width=e.width,this.height=e.width,this.rotation=2*Math.random()*Math.PI,this.pivot.set(32,32),this.nb=t.length,this.sprites=t.map(function(e){return new i.Sprite(e)})}var i=e("pixi.js");r.prototype=Object.create(i.DisplayObjectContainer.prototype),r.prototype.constructor=r,r.prototype.update=function(e){this.current||(this.start=e);var t=~~((e-this.start)/this.speed);if(t<this.nb){var r=this.sprites[t];r!==this.current&&(this.current&&this.removeChild(this.current),this.addChild(r),this.current=r)}else this.parent.removeChild(this)},t.exports=r},{"pixi.js":224}],23:[function(e,t){function r(e,t){this.name=e,i.Sprite.call(this,f),this.life=201,this.maxLife=999,this.meltingSpeed=.0025,this.moveSpeed=c.playerMoveSpeed,this.maxMoveBack=120,this.dead=!1,this.controls=null,this.vel=[0,0],this.position.x=c.WIDTH/2,this.position.y=c.HEIGHT-50,this.maxProgress=c.HEIGHT-this.maxMoveBack-25,this._m=0,this.pivot.set(80,80),t&&t.addChild(this.footprints=new u),this._bound={x:0,y:0,w:0,h:0,group:s.PLAYER,obj:this}}var i=e("pixi.js"),n=e("smoothstep"),o=e("./utils/mix"),s=e("./Groups"),a=e("./behavior/velUpdate"),h=e("./audio"),c=e("./conf"),u=e("./Footprints"),f=i.Texture.fromImage("./img/player.png"),d=[i.Texture.fromImage("./img/player1.png"),f,i.Texture.fromImage("./img/player2.png")];r.prototype=Object.create(i.Sprite.prototype),r.prototype.constructor=r,r.prototype.die=function(){this.dead=!0},r.prototype.isDead=function(){return this.dead},r.prototype.update=function(e,t){if(!this.dead){this.controls.update&&this.controls.update(e,t);var r=this.controls.x(),i=this.controls.y(),s=this.position.x,h=this.position.y,u=this._m;if(r||i){u||(this._m=u=e);var l=this.moveSpeed*o(.5,1,n(0,200,e-u));r&&i&&(l/=1.414),this.vel[0]=r*l,this.vel[1]=-i*l}else this._m=0,this.setTexture(f),this.vel[0]=0,this.vel[1]=0;a.call(this,e,t);var p=this.x,b=this.y;this.maxProgress=Math.min(this.maxProgress,b),this.maxProgress<0&&(this.life-=t*this.meltingSpeed),b=Math.min(b,this.maxProgress+this.maxMoveBack);var m=.6+this.life/150,v=this.width=40*m,g=this.height=40*m;0>i?this.rotation=Math.PI:i>0?this.rotation=0:r>0?this.rotation=Math.PI/2:0>r&&(this.rotation=-Math.PI/2);var y=this.width/2;p=Math.max(y,Math.min(p,c.WIDTH-y)),!r&&!i||p===s&&b===h||(this.setTexture(d[~~(e/150)%d.length]),this.footprints&&(!this._lastFoot||e-this._lastFoot>30)&&Math.random()<.7&&this.footprints.walk(this.position,this.width/2)),this.x=p,this.y=b,this._bound.x=p-this.pivot.x*this.scale.x+.25*v,this._bound.y=b-this.pivot.y*this.scale.y+.2*g,this._bound.w=.5*v,this._bound.h=.6*g}},r.prototype.toQuadTreeObject=function(){return this._bound},r.prototype.knock=function(e,t){this.x+=e,this.y+=t},r.prototype.onProjectile=function(e){var t=100*e.width/this.width;this.knock(t*e.vel[0],t*e.vel[1])},r.prototype.onSnowball=function(e){this.life=Math.min(this.life+e.playerLifeValue(),this.maxLife),this.onProjectile(e)},r.prototype.onFireball=function(e){this.life+=e.playerLifeValue(),this.onProjectile(e)},r.prototype.onCarHit=function(e){h.play("carHit",null,1),this.life-=100;var t=8e3/this.width;this.knock(t*e.vel[0],0)},r.prototype.getScore=function(){return{player:this.name,x:~~this.x,score:r.getPlayerScore(this)}},r.getPlayerScore=function(e){return~~Math.max(0,-e.y)},r.scoreToY=function(e){return-e},t.exports=r},{"./Footprints":7,"./Groups":9,"./audio":32,"./behavior/velUpdate":38,"./conf":39,"./utils/mix":50,"pixi.js":224,smoothstep:236}],24:[function(e,t){var r=e("./conf"),i=t.exports={encodeFromPlayer:function(e,t){return i.encode(i.getFromPlayer(e,t))},decodeToPlayer:function(e,t){return i.applyToPlayer(i.decode(t))},getFromPlayer:function(e,t){return{time:Math.floor(t),input:[e.controls.x(),e.controls.y()],pos:[Math.floor(e.x),Math.floor(e.y)],life:Math.floor(e.life)}},applyToPlayer:function(e,t){return e.controls.setState({x:t.input[0],y:t.input[1]}),e.position.set(t.pos[0],t.pos[1]),e.life=t.life,t.time},encode:function(e){return[e.time].concat(e.input).concat(e.pos).concat([e.life])},decode:function(e){return{time:e[0],input:e.slice(1,3),pos:e.slice(3,5),life:e[5]}},validatePos:function(e,t){return!(0>e||e>r.WIDTH)&&t<=r.HEIGHT},validateEncoded:function(e){return 6===e.length&&e.every(function(e){return"number"==typeof e&&!isNaN(e)&&isFinite(e)})&&e[5]<1e3&&this.validatePos.apply(this,e.slice(3,5))&&(-1===e[1]||0===e[1]||1===e[1])&&(-1===e[2]||0===e[2]||1===e[2])}}},{"./conf":39}],25:[function(e,t){var r=e("./KeyboardControls"),i=e("./TouchControls"),n=window.navigator.userAgent.match(/Android|webOS|iPhone|iPad|iPod|BlackBerry|Windows Phone/i);t.exports=n?i:r},{"./KeyboardControls":12,"./TouchControls":29}],26:[function(e,t){function r(e){if(i.DisplayObjectContainer.call(this),n.extend(this,e),"function"!=typeof this.spawn)throw new Error("spawn function must be implemented and return a PIXI object.");this._trigger()}var i=e("pixi.js"),n=e("lodash"),o=e("./behavior/updateChildren"),s=e("./behavior/dieWhenEmpty"),a={pos:[0,0],vel:.2,n:8,spawn:null,front:0,angleOffset:0};r.prototype=Object.create(i.DisplayObjectContainer.prototype),r.prototype.constructor=r,n.extend(r.prototype,a),r.prototype._trigger=function(){n.range(0,2*Math.PI,2*Math.PI/this.n).forEach(function(e){var t=this.spawn(),r=e+this.angleOffset;t.position.set(this.pos[0]+this.front*Math.cos(r),this.pos[1]+this.front*Math.sin(r)),t.vel=[this.vel*Math.cos(r),this.vel*Math.sin(r)],this.addChild(t)},this)},r.prototype.update=function(e,t){o.call(this,e,t),s.call(this)},t.exports=r},{"./behavior/dieWhenEmpty":36,"./behavior/updateChildren":37,lodash:222,"pixi.js":224}],27:[function(e,t){function r(e,t){i.Sprite.call(this,h),this.pivot.set(16,16),this.scale.set(e,e),this.dieTimeout=t||6e3,this._bound={x:0,y:0,w:0,h:0,group:s.PARTICLE,obj:this}}var i=e("pixi.js"),n=e("./behavior/destroyOutOfMap"),o=e("./behavior/velUpdate"),s=e("./Groups"),a=e("./behavior/dieAfterTimeout"),h=i.Texture.fromImage("./img/snowball.png");r.prototype=Object.create(i.Sprite.prototype),r.prototype.constructor=r,r.prototype.update=function(e,t){o.call(this,e,t),n.call(this,e,t),a.call(this,e,t);var r=this.width,i=this.height;this._bound.x=this.x-this.pivot.x*this.scale.x+.2*r,this._bound.y=this.y-this.pivot.y*this.scale.y+.2*i,this._bound.w=.6*r,this._bound.h=.6*i},r.prototype.toQuadTreeObject=function(){return this._bound},r.prototype.playerLifeValue=function(){return 10*this.scale.x},r.prototype.explodeInWorld=function(e){e.snowballExplode(this),this.parent&&this.parent.removeChild(this)},r.prototype.hitPlayer=function(e){e.onSnowball(this)},t.exports=r},{"./Groups":9,"./behavior/destroyOutOfMap":34,"./behavior/dieAfterTimeout":35,"./behavior/velUpdate":38,"pixi.js":224}],28:[function(e,t){function r(e){var t;return function(){return t||(t=s(e)),t()}}function i(e){if(n.DisplayObjectContainer.call(this),o.extend(this,e),this.maxCatchup=1e3,this.maxPerLoop=100,"function"!=typeof this.spawn)throw new Error("spawn function must be implemented and return a PIXI object.")}var n=e("pixi.js"),o=e("lodash"),s=e("seedrandom"),a=e("./behavior/updateChildren"),h=e("./behavior/destroyOutOfLivingBound"),c={initialTime:0,speed:1e3,rotate:0,pos:[0,0],ang:0,vel:.1,front:0,seq:null,spawn:null,livingBound:null,randPos:0,randAngle:0,randVel:0,seed:""};i.prototype=Object.create(n.DisplayObjectContainer.prototype),i.prototype.constructor=i,o.extend(i.prototype,c),Object.defineProperty(i.prototype,"seq",{set:function(e){if(this._seq=e,e){for(var t=e.reduce(function(e,t){return e+Math.abs(t)},0),r=new Uint8Array(t),i=0,n=0;n<e.length;++n)for(var o=e[n],s=Math.abs(o),a=0;s>a;++a)r[i++]=o>0?1:0;this.pattern=r}},get:function(){return this._seq}}),i.prototype.init=function(e){var t=e-this.initialTime,r=Math.floor(t/this.speed),i=t-r*this.speed;if(this.pattern){var n=r%this.pattern.length;this._ip=n}this.lastPop=t+i-this.speed,this.lastti=r},i.prototype.update=function(e,t){a.call(this,e,t),h.call(this,e,t);var i=this.maxCatchup,n=this.maxPerLoop,o=Math.floor((e-this.initialTime)/this.speed),s=o-this.lastti;s>i&&(console.log("Spawner: "+s+" particles to catchup. maximized to "+i+" and lost some."),this.lastti=o-100);for(var c=0;this.lastti<o&&n>c;++c){var u=++this.lastti;if(this.pattern){var f=0===this.pattern[this._ip];if(this._ip=this._ip>=this.pattern.length-1?0:this._ip+1,f)continue}var d=e-u*this.speed,l=r(this.seed+"@"+u),p=this.spawn(u,l),b=this.ang+this.randAngle*(l()-.5)+this.rotate*u%(2*Math.PI),m=this.vel+this.randVel*(l()-.5),v=Math.cos(b),g=-Math.sin(b);p.vel=[m*v,m*g],p.position.x=this.pos[0]+this.randPos*(l()-.5)+p.vel[0]*d+this.front*v,p.position.y=this.pos[1]+this.randPos*(l()-.5)+p.vel[1]*d+this.front*g,this.addChild(p)}},t.exports=i},{"./behavior/destroyOutOfLivingBound":33,"./behavior/updateChildren":37,lodash:222,"pixi.js":224,seedrandom:233}],29:[function(e,t){function r(){window.addEventListener("touchstart",this._onStart.bind(this),!1),window.addEventListener("touchend",this._onEnd.bind(this),!1),window.addEventListener("touchmove",this._onMove.bind(this),!1),window.addEventListener("touchcancel",this._onCancel.bind(this),!1),window.addEventListener("focus",this._onFocus.bind(this),!1),window.addEventListener("blur",this._onBlur.bind(this),!1),this._paused=!1,this.touchEventId=null}function i(e,t){if(null===t)return null;for(var r=e.length,i=0;r>i;++i)if(t===e[i].identifier)return e[i];return null}function n(e){return[e.screenX,e.screenY]}r.prototype={_onFocus:function(){this._paused=0},_onBlur:function(){this._paused=1},_onStart:function(e){if(e.preventDefault(),!this.startPos){var t=e.changedTouches[0];
this.touchEventId=t.identifier,this.startPos=n(t),this.movePos=this.startPos}},_onMove:function(e){e.preventDefault();var t=i(e.changedTouches,this.touchEventId);t&&(this.movePos=n(t))},_onEnd:function(e){e.preventDefault();var t=i(e.changedTouches,this.touchEventId);t&&(this.startPos=null,this.movePos=null)},_onCancel:function(e){e.preventDefault(),this.startPos=null,this.movePos=null},update:function(e,t){if(this.startPos){var r=this.movePos[0]-this.startPos[0],i=this.movePos[1]-this.startPos[1];this.startPos[0]=this.startPos[0]+.001*r*t,this.startPos[1]=this.startPos[1]+.001*i*t}},paused:function(){return this._paused},x:function(){if(this._paused)return 0;if(!this.startPos||!this.movePos)return 0;var e=this.movePos[0]-this.startPos[0];return Math.abs(e)<30?0:0>e?-1:1},y:function(){if(this._paused)return 0;if(!this.startPos||!this.movePos)return 0;var e=this.movePos[1]-this.startPos[1]-10;return Math.abs(e)<8?0:0>e?1:-1}},t.exports=r},{}],30:[function(e,t){function r(e,t){i.DisplayObjectContainer.call(this),this._focusY=0,this.shaking=0,this.particles=e,this.explosions=t}var i=e("pixi.js"),n=e("./audio"),o=e("./conf"),s=e("./vibrate"),a=e("./Snowball"),h=e("./ParticleExplosion"),c=e("./RingSpawner"),u=e("./behavior/updateChildren"),f=e("./utils/spriteIntersect"),d=e("./utils/tilePIXI"),l=d.tile64,p=i.Texture.fromImage("./img/fireexplosion.png"),b=[l(p,0,0),l(p,1,0),l(p,2,0)],m=i.Texture.fromImage("./img/snowexplosion.png"),v=[l(m,0,0),l(m,1,0),l(m,2,0)],g=i.Texture.fromImage("./img/playerexplosion.png"),y=[l(g,0,0),l(g,1,0),l(g,2,0)];r.prototype=Object.create(i.DisplayObjectContainer.prototype),r.prototype.constructor=r,r.prototype.update=function(e,t){if(u.call(this,e,t),this.position.set(0,this._focusY),this.shaking){var r=this.shaking*(Math.random()-.5),i=this.shaking*(Math.random()-.5);this.position.x+=r,this.position.y+=i,this.shaking=Math.max(0,this.shaking+this.shakingVel*t)}},r.prototype.playerDied=function(e,t){setTimeout(function(){t&&n.play("lose")},800),s(400);var r=new h(e,y,300);this.explosions.addChild(r)},r.prototype.snowballExplode=function(e){n.play("snowballHit",e,.6),this.explosions.addChild(new h(e,v))},r.prototype.carHitPlayerExplode=function(e,t){var r=f(e,t),i=r.from.x+(r.to.x-r.from.x)/2,n=r.from.y+(r.to.y-r.from.y)/2;if(this.shaking=10+(t.life<=0?10:0),this.shakingVel=-0.03,!(t.life<=0)&&(s(200),this.particles)){var o=.4+t.life/800,h=~~(10/o);this.particles.addChild(new c({pos:[i,n],n:h,spawn:function(){return new a(o)},vel:.1,front:4+t.width/2,angleOffset:Math.random()}))}},r.prototype.fireballExplode=function(e){n.play("burn",e,.3),this.explosions.addChild(new h(e,b))},r.prototype.getWindow=function(){return[this._focusY,this._focusY+o.HEIGHT]},r.prototype.focusOn=function(e){var t=o.HEIGHT-Math.max(e.y,e.maxProgress+e.maxMoveBack+e.height/2);t=Math.floor(Math.max(0,t)),this._focusY=this._focusY+.07*(t-this._focusY)},r.prototype.focusOnY=function(e){this._focusY=e},t.exports=r},{"./ParticleExplosion":22,"./RingSpawner":26,"./Snowball":27,"./audio":32,"./behavior/updateChildren":37,"./conf":39,"./utils/spriteIntersect":52,"./utils/tilePIXI":53,"./vibrate":54,"pixi.js":224}],31:[function(e,t){function r(){var e=i.defer();return e.resolve(),e.promise}var i=e("q");t.exports=r},{q:225}],32:[function(e,t){function r(e){return h([3,,.2597,.3427,.3548,.04+.03*e,,.1573,,,,,,,,,.3027,-.0823,1,,,,,.5])}function i(e){var t=.1+.2*e,r=.08;return h([3,.4,1,,.81,t,,,,.04,.45,,,,,,.58,,r,,.05,.05,,.8])}function n(e){var t=new u({src:[e],volume:0,loop:!0,autoplay:!0});return{setVolume:function(e){t.volume(e)},stop:function(){t.stop()}}}function o(e,t,r){f.usingWebAudio&&(e.pos(r.x,r.y,0,t),r.vel&&e.velocity(r.vel[0],r.vel[1],0,t))}function s(e,t,r){if(!(e in l))throw new Error(e+" is unknown");if(f.usingWebAudio){r=r||1;var i=l[e],n=1===i.length?i[0]:i[~~(Math.random()*i.length)],s=n.play();if(n.volume(r,s),t){var a=[n,s,t];o.apply(null,a),w.push(a),n.once("end",function(){var e=w.indexOf(a);-1!==e&&w.splice(e,1)},s)}}}function a(){for(var e=0,t=w.length;t>e;++e)o.apply(null,w[e])}var h=e("jsfxr"),c=e("howler"),u=c.Howl,f=c.Howler,d={burn:[r(0),r(.2),r(.4),r(.6),r(.8),r(1)],snowballHit:[h([3,.03,.1,.14,.28,.92,,-.02,,,,.0155,.8768,,,,,,.35,,,,,.5])],carHit:[h([3,,.0661,,.36,.3901,,-.5478,,,,-.0799,.29,,,,,-.2199,.22,-.26,,,.02,.5])],car:[i(0),i(.5),i(1)],start:[h([2,.44,.24,,.55,.2,,.02,.02,.12,.34,,.43,.66,-.14,,-.54,.56,.17,,,.28,,.6])],lose:[h([2,.08,.63,.11,.84,.24,,,-.06,.23,.77,,.43,.66,-.14,,-.6,.56,.32,-.06,,,,.6])]},l={};for(var p in d){for(var b=[],m=d[p],v=m.length,g=0;v>g;++g){var y=new u({src:[m[g]],refDistance:10,rolloffFactor:1});b.push(y)}l[p]=b}var w=[];t.exports={micOn:function(e){f.pos(e.x,e.y,0),e.vel&&f.velocity(e.vel[0],e.vel[1],0)},play:s,loop:n,update:a}},{howler:220,jsfxr:221}],33:[function(e,t){var r=e("../utils/spriteCollides");t.exports=function(){var e=this.livingBound;if(e)for(var t=this.children,i=0;i<t.length;++i){var n=t[i];r.call(n,e)||(n.parent&&n.parent.removeChild(n),n.destroy&&n.destroy())}}},{"../utils/spriteCollides":51}],34:[function(e,t){var r=e("../conf");t.exports=function(){var e=this.x,t=this.y,i=this.width;(t>0||-i>e||e>r.WIDTH+i)&&(this.parent.removeChild(this),this.destroy&&this.destroy())}},{"../conf":39}],35:[function(e,t){t.exports=function(e){var t=this._dieAfterTimeout;t||(t=this._dieAfterTimeout=e+(this.dieTimeout||0)),e>t&&this.parent&&this.parent.removeChild(this)}},{}],36:[function(e,t){t.exports=function(){0===this.children.length&&(this.parent.removeChild(this),this.destroy&&this.destroy())}},{}],37:[function(e,t){t.exports=function(e,t){for(var r=this.children,i=0;i<r.length;++i){var n=r[i];n.update&&n.update(e,t)}}},{}],38:[function(e,t){t.exports=function(e,t){var r=this.vel;if(r){var i=this.position;this.position.set(i.x+r[0]*t,i.y+r[1]*t)}}},{}],39:[function(e,t){t.exports={WIDTH:320,HEIGHT:480,networkPlaybackDelay:100,networkSendRate:50,playerMoveSpeed:.25,version:"2a",events:{playerenter:1,playerleave:2,playermove:3,playerdie:4,players:5,scores:6,newscore:7,playerready:8,ready:9}}},{}],40:[function(e,t){function r(){var e=document.createElement("div");e.style.overflow="hidden",e.style.position="absolute",e.style.zIndex=0,e.style.top="0",e.style.left="0",e.style.width="100%",e.style.height=n.HEIGHT+"px",this.gridwrap=e;var t=document.createElement("div");t.style.position="absolute",t.style.top="0",t.style.left="0",t.style.width="100%",t.style.height="2000px",t.style[s]="translate3D(0,-9999px,0)",t.style.background="url(./img/grid.png) repeat",this.grid=t,e.appendChild(t),document.body.appendChild(e)}var i=e("pixi.js"),n=e("../conf"),o=e("vendor-prefix"),s=o("transform");r.prototype={setViewportPos:function(e,t){this.gridwrap.style[s]="translate3D(0,"+t+"px,0)",this.canvas.style[s]="translate3D("+e+"px,"+t+"px,0)"},setGridY:function(e){e=Math.round(e)%1e3-1e3-(1e3>e?1e3:0),this._lastGridY!==e&&(this._lastGridY=e,this.grid.style[s]="translate3D(0,"+e+"px,0)")},setGame:function(e){this.game||(this.canvas.style.boxShadow="0px 0px 10px #fff"),this.game=e},createRenderer:function(){var e=i.autoDetectRenderer(n.WIDTH,n.HEIGHT,{resolution:window.devicePixelRatio}),t=e.view;return t.style.width=n.WIDTH+"px",t.style.height=n.HEIGHT+"px",t.style.zIndex=10,t.style[s]="translate3D(0,0,0)",this.canvas=t,document.body.appendChild(t),window.addEventListener("resize",this.onResize.bind(this),!1),this.onResize(),e},onResize:function(){var e=Math.max(0,Math.round((window.innerWidth-n.WIDTH)/2)),t=Math.max(0,Math.round((window.innerHeight-n.HEIGHT)/2));(e!==this._lastresizex||t!==this._lastresizey)&&(this._lastresizex=e,this._lastresizey=t,this.setViewportPos(e,t))},update:function(){this.game&&this.setGridY(this.game.world.y)}},t.exports=r},{"../conf":39,"pixi.js":224,"vendor-prefix":285}],41:[function(e,t){t.exports=e("./desktop")},{"./desktop":40}],42:[function(e,t){function r(e){var t=n.defer(),r=new i.BitmapFontLoader(e);return r.on("loaded",t.resolve),r.load(),t.promise}var i=e("pixi.js"),n=e("q");t.exports={ready:n.all([,r("./fonts/Monda.xml")]).delay(100),style:function(e){return"bold "+(e||12)+" Monda"}}},{"pixi.js":224,q:225}],43:[function(e,t){function r(e,t){var r=new o.DisplayObjectContainer,i=new o.Sprite(a),n=new o.Sprite(h);return i.tint=e,r.addChild(i),t.forEach(function(e){var t=new o.Sprite(c[e]);r.addChild(t)}),r.addChild(n),r.width=84,r.height=48,r}function i(e){var t=e(),r=e(),i=e(),n=e(),o=e(),a=e(),h=t*t,c=.6+-.5*r*h+Math.pow(n,3),u=.2*(o+a)+(1.2+.5*i)*(.5-Math.abs(h-.3));return.3>u?(u*=.5,c*=.3):u>.85?c*=.5:c>.5&&.7>u&&(c=1),s(~~(360*h),~~(100*Math.max(0,Math.min(c,1))),~~(100*Math.max(0,Math.min(u,1))))}function n(e){var t=i(e),n=e()<.25?[u[~~(e()*u.length)]]:[];return r(t,n)}var o=e("pixi.js"),s=e("./utils/hslToHexa"),a=o.Texture.fromImage("./img/car_chassis.png"),h=o.Texture.fromImage("./img/car_top.png"),c={racestripe1:o.Texture.fromImage("./img/car_racestripe1.png"),racestripe2:o.Texture.fromImage("./img/car_racestripe2.png"),racestripe3:o.Texture.fromImage("./img/car_racestripe3.png")},u=Object.keys(c);t.exports=n},{"./utils/hslToHexa":49,"pixi.js":224}],44:[function(e,t){t.exports={v1:e("./v1"),v2:e("./v2")}},{"./v1":45,"./v2":46}],45:[function(e,t){function r(e,t,r,i,n,o){for(var s=10,a=[],h=0;s>h;++h){var c=(h%2?-1:1)*~~(1+((h%2?n:i)-1)*Math.random());a.push(c)}return{y:e,leftToRight:t,vel:r,speed:80*(1+(o||0))/r,seq:a}}function i(e,t,r,i,n){return{scale:function(e,t){return.3+.3*t()+.3*t()*t()},pos:e,vel:r,rotate:t,speed:i,seq:n,life:6e3,angle:2*Math.random()*Math.PI}}function n(e,t,r,n){return i(e,r+2*Math.PI/t,.25,n/t)}function o(e,t,i){var o,h,u,d,l,p,b,m,v,g,y=0,w={roads:[],snowballs:[],fireballs:[]};if(e>0)for(h=~~Math.min(6,2*i()*i()+i()*(e/8)+1),d=0;h>d;++d){p=.05+.05*i()+.004*(e+10*i()+50*i()*i()),m=3+e/20*i()+6*i()*i(),v=8-5*a(s(0,20,e*i()),i(),.5)+i()/(e/5),g=.2+.3*i();var _=r(y-100-d*f,d%2===0,p,m,v,g);_.first=0===d,_.last=d===h-1,w.roads.push(_)}if(e>1&&i()<.9)for(h=3*i()*i()+2*i()*(10-e%10)/10+1,d=0;h>d;++d)o=[i()<.5?0:c,y-200*i()-280],u=1+~~(i()*(3*i()+e/8)),b=i()*(.3*i()+.1*(e%24)/24),l=1e3*(1-e%50/50)*(1-i()*i()),w.snowballs.push(n(o,u,b,l));if(e>4&&i()<.9)for(h=2*i()*i()+i()*(e/8)+e/30+.5,d=0;h>d;++d)o=[i()<.5?0:c,y-200*i()-280],u=1+~~(i()*(i()+e/10)),b=i()*(.3*i()+.1*((e+10)%24)/24),l=1e3*(1-e%50/50)*(1-i()*i()),w.fireballs.push(n(o,u,b,l));return w}var s=e("smoothstep"),a=e("../utils/mix"),h=e("../conf"),c=h.WIDTH,u=480,f=60;t.exports={chunkSize:u,generate:o}},{"../conf":39,"../utils/mix":50,smoothstep:236}],46:[function(e,t){function r(e){return function(t,r){return e.logs.push(t+": "+JSON.stringify(r)),r}}function i(e,t,r){var i,n=[];for(i=0;t>i;++i)n.push(1);var o=r-t;for(i=0;o>i;++i)n[~~(t*e())]++;return n}function n(e,t){for(var r=[],i=0,n=0,o=0;e>o;++o){var s=!g.contains(t,o);s&&n&&(r.push(n),n=0),!s&&i&&(r.push(i),i=0),s?i++:n--}return i&&r.push(i),n&&r.push(n),r}function o(e){return g.map(e,Math.floor.bind(Math))}function s(e,t){return g.map(e,function(e){return t*e})}function a(e,t){for(var r=[],i=0;i<t.length;++i){var n=t[i];if(0>n)r.push(n*e.length);else for(var o=0;n>o;++o)for(var s=0;s<e.length;++s)r.push(e[s])}return r}function h(e,t,r,i,n,o){return{scale:e,pos:t,vel:i,rotate:r,speed:n,seq:o,life:6e3,angle:0}}function c(e,t,r,i,n,o){return h(e,t,(i+2*Math.PI)/r,.25,n/r,o)}function u(e,t,r,i,n,o,s){for(var a=10,h=[],c=0;a>c;++c){var u=(c%2?-1:1)*~~(1+((c%2?o:n)-1)*e());h.push(u)}return{y:t,leftToRight:r,vel:i,speed:80*(1+(s||0))/i,seq:h}}function f(e,t){return g.map(g.range(0,e),function(r){var i=t(r*T,r);return i.first=r===e-1,i.last=0===r,i})}function d(e,t,r,i){var n=~~Math.min(.8+e()+5*r*e(),i);if(0>=n)return[];var o=1-1/n;return f(n,function(i,n){var s=.08+.5*w(e(),1-o,.8)*w(e(),r,.5),a=3+o*e()+6*e()*e(),h=8-5*w(y(0,20,r*o),e(),.5)+e(),c=.2+.2*e();return u(e,t+i,n%2===0,s,a,h,c)})}function l(e,t){function h(e,t){return.3+.8*t()}var u,f={roads:[],snowballs:[],fireballs:[],logs:[]},d=r(f),l=~~(1.8+4*t*e()),p=l*(1+2*e()*e()+4*t*e()),b=i(e,l,p);for(d("distribCols",b),u=0;l>u;++u){var m=b[u],v=[o([10+60*e(),-20*e()]),o(s([e(),-e(),e(),-e()],1+20*e())),[10,-2,10,-2,10,Math.floor(-40*(1-t))],[57,-78],s([10,-10],m)],y=[u%2?80:x-80,80+100*~~(u/2)],w=(e()<.5?1:-1)*(.01+.01*t)*e()*e(),_=60-40*e()-10*t,S=g.range(Math.min(m*(.2*(1-t)+.4*e()*e()),m-1)),T=v[~~(e()*v.length)];d("repeatPattern",T);var A=a(n(m,S),T),E=c(h,y,m,w,_,A);f.fireballs.push(E)}return f}function p(e,t){function o(e,t){return.4+.4*t()}var s,a={roads:[],snowballs:[],fireballs:[],logs:[]},h=r(a),u=w(t,e(),.5);h("more-cols",u);var f=~~(1.8+4*t*t*w(t,e(),.5)),d=20+40*u,l=i(e,f,d);for(s=0;f>s;++s){var p=[s%2?20:x-20,100+60*~~(s/2)],b=(e()<.5?1:-1)*(.1*e()+.3*e()*t),m=300-280*e()*t*u,v=l[s],y=g.range(Math.min(v*(.2*(1-t)+.4*e()*e()),v-1)),_=n(v,y);a.snowballs.push(c(o,p,v,b,m,_))}return a}function b(e,t){var r=e()<.5?[t/2,t]:[t,t/2],i=d(e,0,r[0],5),n=160-80*e()-60*t*e(),o=i.length*T,s=i.length*T+n,a=~~((S-s)/T),h=d(e,s,r[1],a),c=[];return e()>w(e(),t,.8)&&c.push({scale:function(){return.5},pos:[5,o+.5*n],vel:.1+.1*e(),angle:0,randAngle:.8*e(),speed:500+1e3*e(),life:6e3}),{roads:i.concat(h),snowballs:c,fireballs:[],logs:[]}}function m(e,t,i){function n(e,t){return.4+.4*t()}function o(e,t){return.5+.6*t()*t()}var s,a,h,u,f,l,p={roads:[],snowballs:[],fireballs:[],logs:[]},b=r(p),m=6;i>0&&(p.roads=d(e,0,t,m));var v=p.roads.length,y=T*v,_=g.max(g.pluck(p.roads,"vel")),A=v?Math.max(0,Math.min(Math.pow(v/m,2)+2*(_-.05),1)):0;b("road-difficulty",A);var E=6,C=5,k=y,R=S-y,M=g.range(1,E).map(function(e){return Math.floor(e*x/E)}),B=g.range(1,C).map(function(e){return Math.floor(k+e*R/C)}),I=[];if(M.forEach(function(e){B.forEach(function(t){I.push([e,t])})}),i>1&&e()<.9)for(a=2*e()*e(),f=0;a>f;++f)s=I.splice(~~(e()*I.length),1)[0],h=1+~~(e()*e()+5*e()*e()*e()),u=e()*(.3*e()+.1*(i%24)/24),l=(1.1-e()*e())*w(600,200,A),p.snowballs.push(c(o,s,h,u,l));if(i>4&&e()<.9)for(a=3*(1-A)*e()*e(),f=0;a>f;++f)s=I.splice(~~(e()*I.length),1)[0],h=1+~~(e()*e()+5*e()*e()*e()),u=e()*e()*.3,l=(1.1-e()*e())*w(100,600,A),p.fireballs.push(c(n,s,h,u,l));return p}function v(e,t,r){var i=.2*(e/16%1)+.5*(e/32%1)+.3*(e/64)+.8*r()*r()*r(),n="standard";r()<.1*y(0,8,e)&&(n="blizzard"),r()<.15*y(0,8,e)&&(n="hell"),r()<.2*y(0,4,e)&&(n="double");var o=A[n](r,i,e);return o.logs=["gen: "+n+", diff: "+i.toPrecision(3),""].concat(o.logs),o}var g=e("lodash"),y=e("smoothstep"),w=e("../utils/mix"),_=e("../conf"),x=_.WIDTH,S=500,T=60,A={hell:l,blizzard:p,standard:m,double:b};t.exports={chunkSize:S,generate:v}},{"../conf":39,"../utils/mix":50,lodash:222,smoothstep:236}],47:[function(e){function t(){var e=c.offset();return isNaN(e)||(E=e),Date.now()-E}function r(e){var i="grewebisawesome"+~~(t()/864e5),n=new l(i,T,e);n.on("GameOver",function(){o.delay(6e3).fin(function(){n.destroy(),r(e),n=null}).done()}),_=n,x&&x.setGame(_),S.setGame(_)}function i(e){function i(e){a(i);var r=Math.max(t(),o);o=r,n||(n=e);var s=Math.min(100,e-n);n=e,_.update(r,s),x&&x.update(r,s),w.render(_),S.update(r,s)}r(e);var n,o=0;a(i)}var n=e("qstart"),o=e("q"),s=e("qajax"),a=e("raf"),h=e("socket.io-client");e("socket-ntp/client/ntp");var c=window.ntp,u=e("./atlas"),f=e("./font"),d=e("./dom"),l=e("./Game"),p=e("./Loading"),b=e("./NetworkGame"),m=e("./ResponsiveControls"),v=h("/",{reconnection:!1}),g=o.defer(),y=g.promise;v.on("connect",g.resolve),v.on("connect_error",g.reject),c.init(v);var w,_,x,S,T,A=y.delay(2e3),E=0,C=o.delay(100).then(function e(){var t=window.localStorage.player||window.prompt("What's your name? (3 to 10 alphanum characters)");return t?/^[a-zA-Z0-9]{3,10}$/.exec(t)?window.localStorage.player=t:e():null});y.then(function(){x=new b(v),_&&x.setGame(_)}),n.then(function(){S=new d,T=new m,w=S.createRenderer();var e,t=u(),r=o.all([C,t,A,f.ready]),n=new p;return function t(i){e||(e=i),r.isPending()&&(a(t),n.setProgress((i-e)/2200),n.update(i-e),w.render(n))}(),r.spread(i)}).done(),window.onerror=function(e){var t=function(){try{var e=document.createElement("canvas");return!!window.WebGLRenderingContext&&(e.getContext("webgl")||e.getContext("experimental-webgl"))}catch(e){return!1}}();s("/report/error",{method:"POST",data:{userAgent:window.navigator.userAgent,e:""+e,message:e.message,stack:e.stack,supports:{webgl:t}}})}},{"./Game":8,"./Loading":13,"./NetworkGame":17,"./ResponsiveControls":25,"./atlas":31,"./dom":41,"./font":42,q:225,qajax:227,qstart:231,raf:232,"socket-ntp/client/ntp":237,"socket.io-client":238}],48:[function(e,t){t.exports=function(e,t){var r=e.x-t.x,i=e.y-t.y;return Math.sqrt(r*r+i*i)}},{}],49:[function(e,t){function r(e,t,r){return 0>r&&(r+=1),r>1&&(r-=1),1/6>r?e+6*(t-e)*r:.5>r?t:2/3>r?e+(t-e)*(2/3-r)*6:e}window.h=t.exports=function(e,t,i){var n,o,s;if(e/=360,t/=100,i/=100,e>1||0>e||t>1||0>t||i>1||0>i)return null;if(0===t)n=o=s=i;else{var a=.5>i?i*(1+t):i+t-i*t,h=2*i-a;n=r(h,a,e+1/3),s=r(h,a,e),o=r(h,a,e-1/3)}return~~(255*n)<<16|~~(255*s)<<8|~~(255*o)}},{}],50:[function(e,t){t.exports=function(e,t,r){return r*t+(1-r)*e}},{}],51:[function(e,t){function r(e,t){return!(t.x>e.x+e.w||t.x+t.w<e.x||t.y>e.y+e.h||t.y+t.h<e.y)}t.exports=function(e){return r(this.toQuadTreeObject?this.toQuadTreeObject():this,e.toQuadTreeObject?e.toQuadTreeObject():e)?this:null}},{}],52:[function(e,t){function r(e,t){var r=e.x,n=e.x+e.w,o=e.y,s=e.y+e.h,a=t.x,h=t.x+t.w,c=t.y,u=t.y+t.h,f=Math.max(r,a),d=Math.max(o,c),l=Math.min(n,h),p=Math.min(s,u);return{from:new i.Point(f,d),to:new i.Point(l,p),width:l-f,height:p-d}}var i=e("pixi.js");t.exports=function(e,t){return r(e.toQuadTreeObject(),t.toQuadTreeObject())}},{"pixi.js":224}],53:[function(e,t){function r(e){return function(t,r,n){return new i.Texture(t,{x:r*e,y:n*e,width:e,height:e})}}var i=e("pixi.js"),n=r(64),o=r(24);r.tile64=n,r.tile24=o,t.exports=r},{"pixi.js":224}],54:[function(e,t){t.exports="vibrate"in window.navigator?function(e){return window.navigator.vibrate(e)}:function(){return!1}},{}],55:[function(e,t){function r(e,t){return d.isUndefined(t)?""+t:!d.isNumber(t)||!isNaN(t)&&isFinite(t)?d.isFunction(t)||d.isRegExp(t)?t.toString():t:t.toString()}function i(e,t){return d.isString(e)?e.length<t?e:e.slice(0,t):e}function n(e){return i(JSON.stringify(e.actual,r),128)+" "+e.operator+" "+i(JSON.stringify(e.expected,r),128)}function o(e,t,r,i,n){throw new b.AssertionError({message:r,actual:e,expected:t,operator:i,stackStartFunction:n})}function s(e,t){e||o(e,!0,t,"==",b.ok)}function a(e,t){if(e===t)return!0;if(d.isBuffer(e)&&d.isBuffer(t)){if(e.length!=t.length)return!1;for(var r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}return d.isDate(e)&&d.isDate(t)?e.getTime()===t.getTime():d.isRegExp(e)&&d.isRegExp(t)?e.source===t.source&&e.global===t.global&&e.multiline===t.multiline&&e.lastIndex===t.lastIndex&&e.ignoreCase===t.ignoreCase:d.isObject(e)||d.isObject(t)?c(e,t):e==t}function h(e){return"[object Arguments]"==Object.prototype.toString.call(e)}function c(e,t){if(d.isNullOrUndefined(e)||d.isNullOrUndefined(t))return!1;if(e.prototype!==t.prototype)return!1;if(h(e))return h(t)?(e=l.call(e),t=l.call(t),a(e,t)):!1;try{var r,i,n=m(e),o=m(t)}catch(e){return!1}if(n.length!=o.length)return!1;for(n.sort(),o.sort(),i=n.length-1;i>=0;i--)if(n[i]!=o[i])return!1;for(i=n.length-1;i>=0;i--)if(r=n[i],!a(e[r],t[r]))return!1;return!0}function u(e,t){return e&&t?"[object RegExp]"==Object.prototype.toString.call(t)?t.test(e):e instanceof t?!0:t.call({},e)===!0?!0:!1:!1}function f(e,t,r,i){var n;d.isString(r)&&(i=r,r=null);try{t()}catch(e){n=e}if(i=(r&&r.name?" ("+r.name+").":".")+(i?" "+i:"."),e&&!n&&o(n,r,"Missing expected exception"+i),!e&&u(n,r)&&o(n,r,"Got unwanted exception"+i),e&&n&&r&&!u(n,r)||!e&&n)throw n}var d=e("util/"),l=Array.prototype.slice,p=Object.prototype.hasOwnProperty,b=t.exports=s;b.AssertionError=function(e){this.name="AssertionError",this.actual=e.actual,this.expected=e.expected,this.operator=e.operator,e.message?(this.message=e.message,this.generatedMessage=!1):(this.message=n(this),this.generatedMessage=!0);var t=e.stackStartFunction||o;if(Error.captureStackTrace)Error.captureStackTrace(this,t);else{var r=new Error;if(r.stack){var i=r.stack,s=t.name,a=i.indexOf("\n"+s);if(a>=0){var h=i.indexOf("\n",a+1);i=i.substring(h+1)}this.stack=i}}},d.inherits(b.AssertionError,Error),b.fail=o,b.ok=s,b.equal=function(e,t,r){e!=t&&o(e,t,r,"==",b.equal)},b.notEqual=function(e,t,r){e==t&&o(e,t,r,"!=",b.notEqual)},b.deepEqual=function(e,t,r){a(e,t)||o(e,t,r,"deepEqual",b.deepEqual)},b.notDeepEqual=function(e,t,r){a(e,t)&&o(e,t,r,"notDeepEqual",b.notDeepEqual)},b.strictEqual=function(e,t,r){e!==t&&o(e,t,r,"===",b.strictEqual)},b.notStrictEqual=function(e,t,r){e===t&&o(e,t,r,"!==",b.notStrictEqual)},b.throws=function(){f.apply(this,[!0].concat(l.call(arguments)))},b.doesNotThrow=function(){f.apply(this,[!1].concat(l.call(arguments)))},b.ifError=function(e){if(e)throw e};var m=Object.keys||function(e){var t=[];for(var r in e)p.call(e,r)&&t.push(r);return t}},{"util/":217}],56:[function(){},{}],57:[function(e,t,r){function i(e,t,r){if(!(this instanceof i))return new i(e,t,r);var n,o=typeof e;if("number"===o)n=e>0?e>>>0:0;else if("string"===o)n=i.byteLength(e,t);else{if("object"!==o||null===e)throw new TypeError("must start with number, buffer, array or string");"Buffer"===e.type&&L(e.data)&&(e=e.data),n=+e.length>0?Math.floor(+e.length):0}if(n>D)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+D.toString(16)+" bytes");var s;i.TYPED_ARRAY_SUPPORT?s=i._augment(new Uint8Array(n)):(s=this,s.length=n,s._isBuffer=!0);var a;if(i.TYPED_ARRAY_SUPPORT&&"number"==typeof e.byteLength)s._set(e);else if(E(e))if(i.isBuffer(e))for(a=0;n>a;a++)s[a]=e.readUInt8(a);else for(a=0;n>a;a++)s[a]=(e[a]%256+256)%256;else if("string"===o)s.write(e,0,t);else if("number"===o&&!i.TYPED_ARRAY_SUPPORT&&!r)for(a=0;n>a;a++)s[a]=0;return n>0&&n<=i.poolSize&&(s.parent=F),s}function n(e,t,r){if(!(this instanceof n))return new n(e,t,r);var o=new i(e,t,r);return delete o.parent,o}function o(e,t,r,i){r=Number(r)||0;var n=e.length-r;i?(i=Number(i),i>n&&(i=n)):i=n;var o=t.length;if(o%2!==0)throw new Error("Invalid hex string");i>o/2&&(i=o/2);for(var s=0;i>s;s++){var a=parseInt(t.substr(2*s,2),16);if(isNaN(a))throw new Error("Invalid hex string");e[r+s]=a}return s}function s(e,t,r,i){var n=I(k(t,e.length-r),e,r,i);return n}function a(e,t,r,i){var n=I(R(t),e,r,i);return n}function h(e,t,r,i){return a(e,t,r,i)}function c(e,t,r,i){var n=I(B(t),e,r,i);return n}function u(e,t,r,i){var n=I(M(t,e.length-r),e,r,i,2);return n}function f(e,t,r){return P.fromByteArray(0===t&&r===e.length?e:e.slice(t,r))}function d(e,t,r){var i="",n="";r=Math.min(e.length,r);for(var o=t;r>o;o++)e[o]<=127?(i+=j(n)+String.fromCharCode(e[o]),n=""):n+="%"+e[o].toString(16);return i+j(n)}function l(e,t,r){var i="";r=Math.min(e.length,r);for(var n=t;r>n;n++)i+=String.fromCharCode(127&e[n]);return i}function p(e,t,r){var i="";r=Math.min(e.length,r);for(var n=t;r>n;n++)i+=String.fromCharCode(e[n]);return i}function b(e,t,r){var i=e.length;(!t||0>t)&&(t=0),(!r||0>r||r>i)&&(r=i);for(var n="",o=t;r>o;o++)n+=C(e[o]);return n}function m(e,t,r){for(var i=e.slice(t,r),n="",o=0;o<i.length;o+=2)n+=String.fromCharCode(i[o]+256*i[o+1]);return n}function v(e,t,r){if(e%1!==0||0>e)throw new RangeError("offset is not uint");if(e+t>r)throw new RangeError("Trying to access beyond buffer length")}function g(e,t,r,n,o,s){if(!i.isBuffer(e))throw new TypeError("buffer must be a Buffer instance");if(t>o||s>t)throw new RangeError("value is out of bounds");if(r+n>e.length)throw new RangeError("index out of range")}function y(e,t,r,i){0>t&&(t=65535+t+1);for(var n=0,o=Math.min(e.length-r,2);o>n;n++)e[r+n]=(t&255<<8*(i?n:1-n))>>>8*(i?n:1-n)}function w(e,t,r,i){0>t&&(t=4294967295+t+1);for(var n=0,o=Math.min(e.length-r,4);o>n;n++)e[r+n]=t>>>8*(i?n:3-n)&255}function _(e,t,r,i,n,o){if(t>n||o>t)throw new RangeError("value is out of bounds");if(r+i>e.length)throw new RangeError("index out of range");if(0>r)throw new RangeError("index out of range")}function x(e,t,r,i,n){return n||_(e,t,r,4,3.4028234663852886e38,-3.4028234663852886e38),O.write(e,t,r,i,23,4),r+4}function S(e,t,r,i,n){return n||_(e,t,r,8,1.7976931348623157e308,-1.7976931348623157e308),O.write(e,t,r,i,52,8),r+8}function T(e){if(e=A(e).replace(N,""),e.length<2)return"";for(;e.length%4!==0;)e+="=";return e}function A(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}function E(e){return L(e)||i.isBuffer(e)||e&&"object"==typeof e&&"number"==typeof e.length}function C(e){return 16>e?"0"+e.toString(16):e.toString(16)}function k(e,t){var r,i=e.length,n=null;t=t||1/0;for(var o=[],s=0;i>s;s++){if(r=e.charCodeAt(s),r>55295&&57344>r){if(!n){if(r>56319){(t-=3)>-1&&o.push(239,191,189);continue}if(s+1===i){(t-=3)>-1&&o.push(239,191,189);continue}n=r;continue}if(56320>r){(t-=3)>-1&&o.push(239,191,189),n=r;continue}r=n-55296<<10|r-56320|65536,n=null}else n&&((t-=3)>-1&&o.push(239,191,189),n=null);if(128>r){if((t-=1)<0)break;o.push(r)}else if(2048>r){if((t-=2)<0)break;o.push(r>>6|192,63&r|128)}else if(65536>r){if((t-=3)<0)break;o.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(2097152>r))throw new Error("Invalid code point");if((t-=4)<0)break;o.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return o}function R(e){for(var t=[],r=0;r<e.length;r++)t.push(255&e.charCodeAt(r));return t}function M(e,t){for(var r,i,n,o=[],s=0;s<e.length&&!((t-=2)<0);s++)r=e.charCodeAt(s),i=r>>8,n=r%256,o.push(n),o.push(i);return o}function B(e){return P.toByteArray(T(e))}function I(e,t,r,i,n){n&&(i-=i%n);for(var o=0;i>o&&!(o+r>=t.length||o>=e.length);o++)t[o+r]=e[o];return o}function j(e){try{return decodeURIComponent(e)}catch(e){return String.fromCharCode(65533)}}var P=e("base64-js"),O=e("ieee754"),L=e("is-array");r.Buffer=i,r.SlowBuffer=n,r.INSPECT_MAX_BYTES=50,i.poolSize=8192;var D=1073741823,F={};i.TYPED_ARRAY_SUPPORT=function(){try{var e=new ArrayBuffer(0),t=new Uint8Array(e);return t.foo=function(){return 42},42===t.foo()&&"function"==typeof t.subarray&&0===new Uint8Array(1).subarray(1,1).byteLength}catch(e){return!1}}(),i.isBuffer=function(e){return!(null==e||!e._isBuffer)},i.compare=function(e,t){if(!i.isBuffer(e)||!i.isBuffer(t))throw new TypeError("Arguments must be Buffers");for(var r=e.length,n=t.length,o=0,s=Math.min(r,n);s>o&&e[o]===t[o];o++);return o!==s&&(r=e[o],n=t[o]),n>r?-1:r>n?1:0},i.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"raw":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},i.concat=function(e,t){if(!L(e))throw new TypeError("Usage: Buffer.concat(list[, length])");if(0===e.length)return new i(0);if(1===e.length)return e[0];var r;if(void 0===t)for(t=0,r=0;r<e.length;r++)t+=e[r].length;var n=new i(t),o=0;for(r=0;r<e.length;r++){var s=e[r];s.copy(n,o),o+=s.length}return n},i.byteLength=function(e,t){var r;switch(e+="",t||"utf8"){case"ascii":case"binary":case"raw":r=e.length;break;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":r=2*e.length;break;case"hex":r=e.length>>>1;break;case"utf8":case"utf-8":r=k(e).length;break;case"base64":r=B(e).length;break;default:r=e.length}return r},i.prototype.length=void 0,i.prototype.parent=void 0,i.prototype.toString=function(e,t,r){var i=!1;if(t>>>=0,r=void 0===r||1/0===r?this.length:r>>>0,e||(e="utf8"),0>t&&(t=0),r>this.length&&(r=this.length),t>=r)return"";for(;;)switch(e){case"hex":return b(this,t,r);case"utf8":case"utf-8":return d(this,t,r);case"ascii":return l(this,t,r);case"binary":return p(this,t,r);case"base64":return f(this,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return m(this,t,r);default:if(i)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),i=!0}},i.prototype.equals=function(e){if(!i.isBuffer(e))throw new TypeError("Argument must be a Buffer");return 0===i.compare(this,e)},i.prototype.inspect=function(){var e="",t=r.INSPECT_MAX_BYTES;return this.length>0&&(e=this.toString("hex",0,t).match(/.{2}/g).join(" "),this.length>t&&(e+=" ... ")),"<Buffer "+e+">"},i.prototype.compare=function(e){if(!i.isBuffer(e))throw new TypeError("Argument must be a Buffer");return i.compare(this,e)},i.prototype.get=function(e){return console.log(".get() is deprecated. Access using array indexes instead."),this.readUInt8(e)},i.prototype.set=function(e,t){return console.log(".set() is deprecated. Access using array indexes instead."),this.writeUInt8(e,t)},i.prototype.write=function(e,t,r,i){if(isFinite(t))isFinite(r)||(i=r,r=void 0);else{var n=i;i=t,t=r,r=n}if(t=Number(t)||0,0>r||0>t||t>this.length)throw new RangeError("attempt to write outside buffer bounds");var f=this.length-t;r?(r=Number(r),r>f&&(r=f)):r=f,i=String(i||"utf8").toLowerCase();var d;switch(i){case"hex":d=o(this,e,t,r);break;case"utf8":case"utf-8":d=s(this,e,t,r);break;case"ascii":d=a(this,e,t,r);break;case"binary":d=h(this,e,t,r);break;case"base64":d=c(this,e,t,r);break;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":d=u(this,e,t,r);break;default:throw new TypeError("Unknown encoding: "+i)}return d},i.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},i.prototype.slice=function(e,t){var r=this.length;e=~~e,t=void 0===t?r:~~t,0>e?(e+=r,0>e&&(e=0)):e>r&&(e=r),0>t?(t+=r,0>t&&(t=0)):t>r&&(t=r),e>t&&(t=e);var n;if(i.TYPED_ARRAY_SUPPORT)n=i._augment(this.subarray(e,t));else{var o=t-e;n=new i(o,void 0,!0);for(var s=0;o>s;s++)n[s]=this[s+e]}return n.length&&(n.parent=this.parent||this),n},i.prototype.readUIntLE=function(e,t,r){e>>>=0,t>>>=0,r||v(e,t,this.length);for(var i=this[e],n=1,o=0;++o<t&&(n*=256);)i+=this[e+o]*n;return i},i.prototype.readUIntBE=function(e,t,r){e>>>=0,t>>>=0,r||v(e,t,this.length);for(var i=this[e+--t],n=1;t>0&&(n*=256);)i+=this[e+--t]*n;return i},i.prototype.readUInt8=function(e,t){return t||v(e,1,this.length),this[e]},i.prototype.readUInt16LE=function(e,t){return t||v(e,2,this.length),this[e]|this[e+1]<<8},i.prototype.readUInt16BE=function(e,t){return t||v(e,2,this.length),this[e]<<8|this[e+1]},i.prototype.readUInt32LE=function(e,t){return t||v(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},i.prototype.readUInt32BE=function(e,t){return t||v(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},i.prototype.readIntLE=function(e,t,r){e>>>=0,t>>>=0,r||v(e,t,this.length);for(var i=this[e],n=1,o=0;++o<t&&(n*=256);)i+=this[e+o]*n;return n*=128,i>=n&&(i-=Math.pow(2,8*t)),i},i.prototype.readIntBE=function(e,t,r){e>>>=0,t>>>=0,r||v(e,t,this.length);for(var i=t,n=1,o=this[e+--i];i>0&&(n*=256);)o+=this[e+--i]*n;return n*=128,o>=n&&(o-=Math.pow(2,8*t)),o},i.prototype.readInt8=function(e,t){return t||v(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},i.prototype.readInt16LE=function(e,t){t||v(e,2,this.length);var r=this[e]|this[e+1]<<8;return 32768&r?4294901760|r:r},i.prototype.readInt16BE=function(e,t){t||v(e,2,this.length);var r=this[e+1]|this[e]<<8;return 32768&r?4294901760|r:r},i.prototype.readInt32LE=function(e,t){return t||v(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},i.prototype.readInt32BE=function(e,t){return t||v(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},i.prototype.readFloatLE=function(e,t){return t||v(e,4,this.length),O.read(this,e,!0,23,4)},i.prototype.readFloatBE=function(e,t){return t||v(e,4,this.length),O.read(this,e,!1,23,4)},i.prototype.readDoubleLE=function(e,t){return t||v(e,8,this.length),O.read(this,e,!0,52,8)},i.prototype.readDoubleBE=function(e,t){return t||v(e,8,this.length),O.read(this,e,!1,52,8)},i.prototype.writeUIntLE=function(e,t,r,i){e=+e,t>>>=0,r>>>=0,i||g(this,e,t,r,Math.pow(2,8*r),0);var n=1,o=0;for(this[t]=255&e;++o<r&&(n*=256);)this[t+o]=e/n>>>0&255;return t+r},i.prototype.writeUIntBE=function(e,t,r,i){e=+e,t>>>=0,r>>>=0,i||g(this,e,t,r,Math.pow(2,8*r),0);var n=r-1,o=1;for(this[t+n]=255&e;--n>=0&&(o*=256);)this[t+n]=e/o>>>0&255;return t+r},i.prototype.writeUInt8=function(e,t,r){return e=+e,t>>>=0,r||g(this,e,t,1,255,0),i.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=e,t+1
},i.prototype.writeUInt16LE=function(e,t,r){return e=+e,t>>>=0,r||g(this,e,t,2,65535,0),i.TYPED_ARRAY_SUPPORT?(this[t]=e,this[t+1]=e>>>8):y(this,e,t,!0),t+2},i.prototype.writeUInt16BE=function(e,t,r){return e=+e,t>>>=0,r||g(this,e,t,2,65535,0),i.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=e):y(this,e,t,!1),t+2},i.prototype.writeUInt32LE=function(e,t,r){return e=+e,t>>>=0,r||g(this,e,t,4,4294967295,0),i.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=e):w(this,e,t,!0),t+4},i.prototype.writeUInt32BE=function(e,t,r){return e=+e,t>>>=0,r||g(this,e,t,4,4294967295,0),i.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=e):w(this,e,t,!1),t+4},i.prototype.writeIntLE=function(e,t,r,i){e=+e,t>>>=0,i||g(this,e,t,r,Math.pow(2,8*r-1)-1,-Math.pow(2,8*r-1));var n=0,o=1,s=0>e?1:0;for(this[t]=255&e;++n<r&&(o*=256);)this[t+n]=(e/o>>0)-s&255;return t+r},i.prototype.writeIntBE=function(e,t,r,i){e=+e,t>>>=0,i||g(this,e,t,r,Math.pow(2,8*r-1)-1,-Math.pow(2,8*r-1));var n=r-1,o=1,s=0>e?1:0;for(this[t+n]=255&e;--n>=0&&(o*=256);)this[t+n]=(e/o>>0)-s&255;return t+r},i.prototype.writeInt8=function(e,t,r){return e=+e,t>>>=0,r||g(this,e,t,1,127,-128),i.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),0>e&&(e=255+e+1),this[t]=e,t+1},i.prototype.writeInt16LE=function(e,t,r){return e=+e,t>>>=0,r||g(this,e,t,2,32767,-32768),i.TYPED_ARRAY_SUPPORT?(this[t]=e,this[t+1]=e>>>8):y(this,e,t,!0),t+2},i.prototype.writeInt16BE=function(e,t,r){return e=+e,t>>>=0,r||g(this,e,t,2,32767,-32768),i.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=e):y(this,e,t,!1),t+2},i.prototype.writeInt32LE=function(e,t,r){return e=+e,t>>>=0,r||g(this,e,t,4,2147483647,-2147483648),i.TYPED_ARRAY_SUPPORT?(this[t]=e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):w(this,e,t,!0),t+4},i.prototype.writeInt32BE=function(e,t,r){return e=+e,t>>>=0,r||g(this,e,t,4,2147483647,-2147483648),0>e&&(e=4294967295+e+1),i.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=e):w(this,e,t,!1),t+4},i.prototype.writeFloatLE=function(e,t,r){return x(this,e,t,!0,r)},i.prototype.writeFloatBE=function(e,t,r){return x(this,e,t,!1,r)},i.prototype.writeDoubleLE=function(e,t,r){return S(this,e,t,!0,r)},i.prototype.writeDoubleBE=function(e,t,r){return S(this,e,t,!1,r)},i.prototype.copy=function(e,t,r,n){var o=this;if(r||(r=0),n||0===n||(n=this.length),t>=e.length&&(t=e.length),t||(t=0),n>0&&r>n&&(n=r),n===r)return 0;if(0===e.length||0===o.length)return 0;if(0>t)throw new RangeError("targetStart out of bounds");if(0>r||r>=o.length)throw new RangeError("sourceStart out of bounds");if(0>n)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),e.length-t<n-r&&(n=e.length-t+r);var s=n-r;if(1e3>s||!i.TYPED_ARRAY_SUPPORT)for(var a=0;s>a;a++)e[a+t]=this[a+r];else e._set(this.subarray(r,r+s),t);return s},i.prototype.fill=function(e,t,r){if(e||(e=0),t||(t=0),r||(r=this.length),t>r)throw new RangeError("end < start");if(r!==t&&0!==this.length){if(0>t||t>=this.length)throw new RangeError("start out of bounds");if(0>r||r>this.length)throw new RangeError("end out of bounds");var i;if("number"==typeof e)for(i=t;r>i;i++)this[i]=e;else{var n=k(e.toString()),o=n.length;for(i=t;r>i;i++)this[i]=n[i%o]}return this}},i.prototype.toArrayBuffer=function(){if("undefined"!=typeof Uint8Array){if(i.TYPED_ARRAY_SUPPORT)return new i(this).buffer;for(var e=new Uint8Array(this.length),t=0,r=e.length;r>t;t+=1)e[t]=this[t];return e.buffer}throw new TypeError("Buffer.toArrayBuffer not supported in this browser")};var U=i.prototype;i._augment=function(e){return e.constructor=i,e._isBuffer=!0,e._get=e.get,e._set=e.set,e.get=U.get,e.set=U.set,e.write=U.write,e.toString=U.toString,e.toLocaleString=U.toString,e.toJSON=U.toJSON,e.equals=U.equals,e.compare=U.compare,e.copy=U.copy,e.slice=U.slice,e.readUIntLE=U.readUIntLE,e.readUIntBE=U.readUIntBE,e.readUInt8=U.readUInt8,e.readUInt16LE=U.readUInt16LE,e.readUInt16BE=U.readUInt16BE,e.readUInt32LE=U.readUInt32LE,e.readUInt32BE=U.readUInt32BE,e.readIntLE=U.readIntLE,e.readIntBE=U.readIntBE,e.readInt8=U.readInt8,e.readInt16LE=U.readInt16LE,e.readInt16BE=U.readInt16BE,e.readInt32LE=U.readInt32LE,e.readInt32BE=U.readInt32BE,e.readFloatLE=U.readFloatLE,e.readFloatBE=U.readFloatBE,e.readDoubleLE=U.readDoubleLE,e.readDoubleBE=U.readDoubleBE,e.writeUInt8=U.writeUInt8,e.writeUIntLE=U.writeUIntLE,e.writeUIntBE=U.writeUIntBE,e.writeUInt16LE=U.writeUInt16LE,e.writeUInt16BE=U.writeUInt16BE,e.writeUInt32LE=U.writeUInt32LE,e.writeUInt32BE=U.writeUInt32BE,e.writeIntLE=U.writeIntLE,e.writeIntBE=U.writeIntBE,e.writeInt8=U.writeInt8,e.writeInt16LE=U.writeInt16LE,e.writeInt16BE=U.writeInt16BE,e.writeInt32LE=U.writeInt32LE,e.writeInt32BE=U.writeInt32BE,e.writeFloatLE=U.writeFloatLE,e.writeFloatBE=U.writeFloatBE,e.writeDoubleLE=U.writeDoubleLE,e.writeDoubleBE=U.writeDoubleBE,e.fill=U.fill,e.inspect=U.inspect,e.toArrayBuffer=U.toArrayBuffer,e};var N=/[^+\/0-9A-z\-]/g},{"base64-js":58,ieee754:59,"is-array":60}],58:[function(e,t,r){var i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";!function(e){"use strict";function t(e){var t=e.charCodeAt(0);return t===s||t===f?62:t===a||t===d?63:h>t?-1:h+10>t?t-h+26+26:u+26>t?t-u:c+26>t?t-c+26:void 0}function r(e){function r(e){c[f++]=e}var i,n,s,a,h,c;if(e.length%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var u=e.length;h="="===e.charAt(u-2)?2:"="===e.charAt(u-1)?1:0,c=new o(3*e.length/4-h),s=h>0?e.length-4:e.length;var f=0;for(i=0,n=0;s>i;i+=4,n+=3)a=t(e.charAt(i))<<18|t(e.charAt(i+1))<<12|t(e.charAt(i+2))<<6|t(e.charAt(i+3)),r((16711680&a)>>16),r((65280&a)>>8),r(255&a);return 2===h?(a=t(e.charAt(i))<<2|t(e.charAt(i+1))>>4,r(255&a)):1===h&&(a=t(e.charAt(i))<<10|t(e.charAt(i+1))<<4|t(e.charAt(i+2))>>2,r(a>>8&255),r(255&a)),c}function n(e){function t(e){return i.charAt(e)}function r(e){return t(e>>18&63)+t(e>>12&63)+t(e>>6&63)+t(63&e)}var n,o,s,a=e.length%3,h="";for(n=0,s=e.length-a;s>n;n+=3)o=(e[n]<<16)+(e[n+1]<<8)+e[n+2],h+=r(o);switch(a){case 1:o=e[e.length-1],h+=t(o>>2),h+=t(o<<4&63),h+="==";break;case 2:o=(e[e.length-2]<<8)+e[e.length-1],h+=t(o>>10),h+=t(o>>4&63),h+=t(o<<2&63),h+="="}return h}var o="undefined"!=typeof Uint8Array?Uint8Array:Array,s="+".charCodeAt(0),a="/".charCodeAt(0),h="0".charCodeAt(0),c="a".charCodeAt(0),u="A".charCodeAt(0),f="-".charCodeAt(0),d="_".charCodeAt(0);e.toByteArray=r,e.fromByteArray=n}("undefined"==typeof r?this.base64js={}:r)},{}],59:[function(e,t,r){r.read=function(e,t,r,i,n){var o,s,a=8*n-i-1,h=(1<<a)-1,c=h>>1,u=-7,f=r?n-1:0,d=r?-1:1,l=e[t+f];for(f+=d,o=l&(1<<-u)-1,l>>=-u,u+=a;u>0;o=256*o+e[t+f],f+=d,u-=8);for(s=o&(1<<-u)-1,o>>=-u,u+=i;u>0;s=256*s+e[t+f],f+=d,u-=8);if(0===o)o=1-c;else{if(o===h)return s?0/0:1/0*(l?-1:1);s+=Math.pow(2,i),o-=c}return(l?-1:1)*s*Math.pow(2,o-i)},r.write=function(e,t,r,i,n,o){var s,a,h,c=8*o-n-1,u=(1<<c)-1,f=u>>1,d=23===n?Math.pow(2,-24)-Math.pow(2,-77):0,l=i?0:o-1,p=i?1:-1,b=0>t||0===t&&0>1/t?1:0;for(t=Math.abs(t),isNaN(t)||1/0===t?(a=isNaN(t)?1:0,s=u):(s=Math.floor(Math.log(t)/Math.LN2),t*(h=Math.pow(2,-s))<1&&(s--,h*=2),t+=s+f>=1?d/h:d*Math.pow(2,1-f),t*h>=2&&(s++,h/=2),s+f>=u?(a=0,s=u):s+f>=1?(a=(t*h-1)*Math.pow(2,n),s+=f):(a=t*Math.pow(2,f-1)*Math.pow(2,n),s=0));n>=8;e[r+l]=255&a,l+=p,a/=256,n-=8);for(s=s<<n|a,c+=n;c>0;e[r+l]=255&s,l+=p,s/=256,c-=8);e[r+l-p]|=128*b}},{}],60:[function(e,t){var r=Array.isArray,i=Object.prototype.toString;t.exports=r||function(e){return!!e&&"[object Array]"==i.call(e)}},{}],61:[function(e,t){(function(r){"use strict";function i(e){h.call(this),this._hash=e,this.buffers=[]}function n(e){h.call(this),this._hash=e}var o=e("sha.js"),s=e("./md5"),a=e("ripemd160"),h=e("stream").Transform,c=e("util").inherits;t.exports=function(e){return"md5"===e?new i(s):"rmd160"===e?new i(a):new n(o(e))},c(i,h),i.prototype._transform=function(e,t,r){this.buffers.push(e),r()},i.prototype._flush=function(e){var t=r.concat(this.buffers),i=this._hash(t);this.buffers=null,this.push(i),e()},i.prototype.update=function(e,t){return this.write(e,t),this},i.prototype.digest=function(e){this.end();for(var t,i=new r("");t=this.read();)i=r.concat([i,t]);return e&&(i=i.toString(e)),i},c(n,h),n.prototype._transform=function(e,t,r){this._hash.update(e),r()},n.prototype._flush=function(e){this.push(this._hash.digest()),this._hash=null,e()},n.prototype.update=function(e,t){return this.write(e,t),this},n.prototype.digest=function(e){this.end();for(var t,i=new r("");t=this.read();)i=r.concat([i,t]);return e&&(i=i.toString(e)),i}}).call(this,e("buffer").Buffer)},{"./md5":65,buffer:57,ripemd160:188,"sha.js":190,stream:214,util:217}],62:[function(e,t){(function(r){"use strict";function i(e,t){if(!(this instanceof i))return new i(e,t);o.call(this),this._opad=c,this._alg=e;var s="sha512"===e||"sha384"===e?128:64;t=this._key=r.isBuffer(t)?t:new r(t),t.length>s?t=n(e).update(t).digest():t.length<s&&(t=r.concat([t,a],s));for(var h=this._ipad=new r(s),c=this._opad=new r(s),u=0;s>u;u++)h[u]=54^t[u],c[u]=92^t[u];this._hash=n(e).update(h)}var n=e("./create-hash"),o=e("stream").Transform,s=e("util").inherits,a=new r(128);a.fill(0),t.exports=i,s(i,o),i.prototype.update=function(e,t){return this.write(e,t),this},i.prototype._transform=function(e,t,r){this._hash.update(e),r()},i.prototype._flush=function(e){var t=this._hash.digest();this.push(n(this._alg).update(this._opad).update(t).digest()),e()},i.prototype.digest=function(e){this.end();for(var t,i=new r("");t=this.read();)i=r.concat([i,t]);return e&&(i=i.toString(e)),i}}).call(this,e("buffer").Buffer)},{"./create-hash":61,buffer:57,stream:214,util:217}],63:[function(e,t){(function(e){"use strict";function r(t,r){if(t.length%o!==0){var i=t.length+(o-t.length%o);t=e.concat([t,s],i)}for(var n=[],a=r?t.readInt32BE:t.readInt32LE,h=0;h<t.length;h+=o)n.push(a.call(t,h));return n}function i(t,r,i){for(var n=new e(r),o=i?n.writeInt32BE:n.writeInt32LE,s=0;s<t.length;s++)o.call(n,t[s],4*s,!0);return n}function n(t,n,o,s){e.isBuffer(t)||(t=new e(t));var h=n(r(t,s),t.length*a);return i(h,o,s)}var o=4,s=new e(o);s.fill(0);var a=8;t.exports={hash:n}}).call(this,e("buffer").Buffer)},{buffer:57}],64:[function(e,t,r){"use strict";function i(){var e=[].slice.call(arguments).join(" ");throw new Error([e,"we accept pull requests","http://github.com/dominictarr/crypto-browserify"].join("\n"))}function n(e,t){for(var r in e)t(e[r],r)}var o=r.rng=e("./rng"),s=r.prng=e("./prng");r.createHash=e("./create-hash"),r.createHmac=e("./create-hmac"),r.randomBytes=function(e,t){if(!t||!t.call)return o(e);try{t.call(this,void 0,o(e))}catch(e){t(e)}},r.pseudoRandomBytes=function(e,t){if(!t||!t.call)return s(e);try{t.call(this,void 0,s(e))}catch(e){t(e)}};var a=["sha1","sha224","sha256","sha384","sha512","md5","rmd160"].concat(Object.keys(e("browserify-sign/algos")));r.getHashes=function(){return a};var h=e("./pbkdf2")(r);r.pbkdf2=h.pbkdf2,r.pbkdf2Sync=h.pbkdf2Sync,e("browserify-aes/inject")(r,t.exports),e("browserify-sign/inject")(t.exports,r),e("diffie-hellman/inject")(r,t.exports),e("create-ecdh/inject")(t.exports,r),e("public-encrypt/inject")(t.exports,r),n(["createCredentials"],function(e){r[e]=function(){i("sorry,",e,"is not implemented yet")}})},{"./create-hash":61,"./create-hmac":62,"./pbkdf2":196,"./prng":197,"./rng":198,"browserify-aes/inject":73,"browserify-sign/algos":84,"browserify-sign/inject":85,"create-ecdh/inject":131,"diffie-hellman/inject":155,"public-encrypt/inject":161}],65:[function(e,t){"use strict";function r(e,t){e[t>>5]|=128<<t%32,e[(t+64>>>9<<4)+14]=t;for(var r=1732584193,i=-271733879,c=-1732584194,u=271733878,f=0;f<e.length;f+=16){var d=r,l=i,p=c,b=u;r=n(r,i,c,u,e[f+0],7,-680876936),u=n(u,r,i,c,e[f+1],12,-389564586),c=n(c,u,r,i,e[f+2],17,606105819),i=n(i,c,u,r,e[f+3],22,-1044525330),r=n(r,i,c,u,e[f+4],7,-176418897),u=n(u,r,i,c,e[f+5],12,1200080426),c=n(c,u,r,i,e[f+6],17,-1473231341),i=n(i,c,u,r,e[f+7],22,-45705983),r=n(r,i,c,u,e[f+8],7,1770035416),u=n(u,r,i,c,e[f+9],12,-1958414417),c=n(c,u,r,i,e[f+10],17,-42063),i=n(i,c,u,r,e[f+11],22,-1990404162),r=n(r,i,c,u,e[f+12],7,1804603682),u=n(u,r,i,c,e[f+13],12,-40341101),c=n(c,u,r,i,e[f+14],17,-1502002290),i=n(i,c,u,r,e[f+15],22,1236535329),r=o(r,i,c,u,e[f+1],5,-165796510),u=o(u,r,i,c,e[f+6],9,-1069501632),c=o(c,u,r,i,e[f+11],14,643717713),i=o(i,c,u,r,e[f+0],20,-373897302),r=o(r,i,c,u,e[f+5],5,-701558691),u=o(u,r,i,c,e[f+10],9,38016083),c=o(c,u,r,i,e[f+15],14,-660478335),i=o(i,c,u,r,e[f+4],20,-405537848),r=o(r,i,c,u,e[f+9],5,568446438),u=o(u,r,i,c,e[f+14],9,-1019803690),c=o(c,u,r,i,e[f+3],14,-187363961),i=o(i,c,u,r,e[f+8],20,1163531501),r=o(r,i,c,u,e[f+13],5,-1444681467),u=o(u,r,i,c,e[f+2],9,-51403784),c=o(c,u,r,i,e[f+7],14,1735328473),i=o(i,c,u,r,e[f+12],20,-1926607734),r=s(r,i,c,u,e[f+5],4,-378558),u=s(u,r,i,c,e[f+8],11,-2022574463),c=s(c,u,r,i,e[f+11],16,1839030562),i=s(i,c,u,r,e[f+14],23,-35309556),r=s(r,i,c,u,e[f+1],4,-1530992060),u=s(u,r,i,c,e[f+4],11,1272893353),c=s(c,u,r,i,e[f+7],16,-155497632),i=s(i,c,u,r,e[f+10],23,-1094730640),r=s(r,i,c,u,e[f+13],4,681279174),u=s(u,r,i,c,e[f+0],11,-358537222),c=s(c,u,r,i,e[f+3],16,-722521979),i=s(i,c,u,r,e[f+6],23,76029189),r=s(r,i,c,u,e[f+9],4,-640364487),u=s(u,r,i,c,e[f+12],11,-421815835),c=s(c,u,r,i,e[f+15],16,530742520),i=s(i,c,u,r,e[f+2],23,-995338651),r=a(r,i,c,u,e[f+0],6,-198630844),u=a(u,r,i,c,e[f+7],10,1126891415),c=a(c,u,r,i,e[f+14],15,-1416354905),i=a(i,c,u,r,e[f+5],21,-57434055),r=a(r,i,c,u,e[f+12],6,1700485571),u=a(u,r,i,c,e[f+3],10,-1894986606),c=a(c,u,r,i,e[f+10],15,-1051523),i=a(i,c,u,r,e[f+1],21,-2054922799),r=a(r,i,c,u,e[f+8],6,1873313359),u=a(u,r,i,c,e[f+15],10,-30611744),c=a(c,u,r,i,e[f+6],15,-1560198380),i=a(i,c,u,r,e[f+13],21,1309151649),r=a(r,i,c,u,e[f+4],6,-145523070),u=a(u,r,i,c,e[f+11],10,-1120210379),c=a(c,u,r,i,e[f+2],15,718787259),i=a(i,c,u,r,e[f+9],21,-343485551),r=h(r,d),i=h(i,l),c=h(c,p),u=h(u,b)}return Array(r,i,c,u)}function i(e,t,r,i,n,o){return h(c(h(h(t,e),h(i,o)),n),r)}function n(e,t,r,n,o,s,a){return i(t&r|~t&n,e,t,o,s,a)}function o(e,t,r,n,o,s,a){return i(t&n|r&~n,e,t,o,s,a)}function s(e,t,r,n,o,s,a){return i(t^r^n,e,t,o,s,a)}function a(e,t,r,n,o,s,a){return i(r^(t|~n),e,t,o,s,a)}function h(e,t){var r=(65535&e)+(65535&t),i=(e>>16)+(t>>16)+(r>>16);return i<<16|65535&r}function c(e,t){return e<<t|e>>>32-t}var u=e("./helpers");t.exports=function(e){return u.hash(e,r,16)}},{"./helpers":63}],66:[function(e,t){(function(e){t.exports=function(t,r,i,n){i/=8,n=n||0;for(var o,s,a,h=0,c=0,u=new e(i),f=new e(n),d=0;;){if(o=t.createHash("md5"),d++>0&&o.update(s),o.update(r),s=o.digest(),a=0,i>0)for(;;){if(0===i)break;if(a===s.length)break;u[h++]=s[a],i--,a++}if(n>0&&a!==s.length)for(;;){if(0===n)break;if(a===s.length)break;f[c++]=s[a],n--,a++}if(0===i&&0===n)break}for(a=0;a<s.length;a++)s[a]=0;return{key:u,iv:f}}}).call(this,e("buffer").Buffer)},{buffer:57}],67:[function(e,t,r){(function(e){function t(e){var t,r;return t=e>a||0>e?(r=Math.abs(e)%a,0>e?a-r:r):e}function i(e){var t,r,i;for(t=r=0,i=e.length;i>=0?i>r:r>i;t=i>=0?++r:--r)e[t]=0;return!1}function n(){var e;this.SBOX=[],this.INV_SBOX=[],this.SUB_MIX=function(){var t,r;for(r=[],e=t=0;4>t;e=++t)r.push([]);return r}(),this.INV_SUB_MIX=function(){var t,r;for(r=[],e=t=0;4>t;e=++t)r.push([]);return r}(),this.init(),this.RCON=[0,1,2,4,8,16,32,64,128,27,54]}function o(e){for(var t=e.length/4,r=new Array(t),i=-1;++i<t;)r[i]=e.readUInt32BE(4*i);return r}function s(e){this._key=o(e),this._doReset()}var a=Math.pow(2,32);n.prototype.init=function(){var e,t,r,i,n,o,s,a,h,c;for(e=function(){var e,r;for(r=[],t=e=0;256>e;t=++e)r.push(128>t?t<<1:t<<1^283);return r}(),n=0,h=0,t=c=0;256>c;t=++c)r=h^h<<1^h<<2^h<<3^h<<4,r=r>>>8^255&r^99,this.SBOX[n]=r,this.INV_SBOX[r]=n,o=e[n],s=e[o],a=e[s],i=257*e[r]^16843008*r,this.SUB_MIX[0][n]=i<<24|i>>>8,this.SUB_MIX[1][n]=i<<16|i>>>16,this.SUB_MIX[2][n]=i<<8|i>>>24,this.SUB_MIX[3][n]=i,i=16843009*a^65537*s^257*o^16843008*n,this.INV_SUB_MIX[0][r]=i<<24|i>>>8,this.INV_SUB_MIX[1][r]=i<<16|i>>>16,this.INV_SUB_MIX[2][r]=i<<8|i>>>24,this.INV_SUB_MIX[3][r]=i,0===n?n=h=1:(n=o^e[e[e[a^o]]],h^=e[e[h]]);return!0};var h=new n;s.blockSize=16,s.prototype.blockSize=s.blockSize,s.keySize=32,s.prototype.keySize=s.keySize,s.prototype._doReset=function(){var e,t,r,i,n,o,s,a;for(r=this._key,t=r.length,this._nRounds=t+6,n=4*(this._nRounds+1),this._keySchedule=[],i=s=0;n>=0?n>s:s>n;i=n>=0?++s:--s)this._keySchedule[i]=t>i?r[i]:(o=this._keySchedule[i-1],i%t===0?(o=o<<8|o>>>24,o=h.SBOX[o>>>24]<<24|h.SBOX[o>>>16&255]<<16|h.SBOX[o>>>8&255]<<8|h.SBOX[255&o],o^=h.RCON[i/t|0]<<24):t>6&&i%t===4?o=h.SBOX[o>>>24]<<24|h.SBOX[o>>>16&255]<<16|h.SBOX[o>>>8&255]<<8|h.SBOX[255&o]:void 0,this._keySchedule[i-t]^o);for(this._invKeySchedule=[],e=a=0;n>=0?n>a:a>n;e=n>=0?++a:--a)i=n-e,o=this._keySchedule[i-(e%4?0:4)],this._invKeySchedule[e]=4>e||4>=i?o:h.INV_SUB_MIX[0][h.SBOX[o>>>24]]^h.INV_SUB_MIX[1][h.SBOX[o>>>16&255]]^h.INV_SUB_MIX[2][h.SBOX[o>>>8&255]]^h.INV_SUB_MIX[3][h.SBOX[255&o]];return!0},s.prototype.encryptBlock=function(t){t=o(new e(t));var r=this._doCryptBlock(t,this._keySchedule,h.SUB_MIX,h.SBOX),i=new e(16);return i.writeUInt32BE(r[0],0),i.writeUInt32BE(r[1],4),i.writeUInt32BE(r[2],8),i.writeUInt32BE(r[3],12),i},s.prototype.decryptBlock=function(t){t=o(new e(t));var r=[t[3],t[1]];t[1]=r[0],t[3]=r[1];var i=this._doCryptBlock(t,this._invKeySchedule,h.INV_SUB_MIX,h.INV_SBOX),n=new e(16);return n.writeUInt32BE(i[0],0),n.writeUInt32BE(i[3],4),n.writeUInt32BE(i[2],8),n.writeUInt32BE(i[1],12),n},s.prototype.scrub=function(){i(this._keySchedule),i(this._invKeySchedule),i(this._key)},s.prototype._doCryptBlock=function(e,r,i,n){var o,s,a,h,c,u,f,d,l,p,b,m;for(a=e[0]^r[0],h=e[1]^r[1],c=e[2]^r[2],u=e[3]^r[3],o=4,s=b=1,m=this._nRounds;m>=1?m>b:b>m;s=m>=1?++b:--b)f=i[0][a>>>24]^i[1][h>>>16&255]^i[2][c>>>8&255]^i[3][255&u]^r[o++],d=i[0][h>>>24]^i[1][c>>>16&255]^i[2][u>>>8&255]^i[3][255&a]^r[o++],l=i[0][c>>>24]^i[1][u>>>16&255]^i[2][a>>>8&255]^i[3][255&h]^r[o++],p=i[0][u>>>24]^i[1][a>>>16&255]^i[2][h>>>8&255]^i[3][255&c]^r[o++],a=f,h=d,c=l,u=p;return f=(n[a>>>24]<<24|n[h>>>16&255]<<16|n[c>>>8&255]<<8|n[255&u])^r[o++],d=(n[h>>>24]<<24|n[c>>>16&255]<<16|n[u>>>8&255]<<8|n[255&a])^r[o++],l=(n[c>>>24]<<24|n[u>>>16&255]<<16|n[a>>>8&255]<<8|n[255&h])^r[o++],p=(n[u>>>24]<<24|n[a>>>16&255]<<16|n[h>>>8&255]<<8|n[255&c])^r[o++],[t(f),t(d),t(l),t(p)]},r.AES=s}).call(this,e("buffer").Buffer)},{buffer:57}],68:[function(e,t){(function(r){function i(e,t,n,a){if(!(this instanceof i))return new i(e,t,n);s.call(this),this._finID=r.concat([n,new r([0,0,0,1])]),n=r.concat([n,new r([0,0,0,2])]),this._cipher=new o.AES(t),this._prev=new r(n.length),this._cache=new r(""),this._secCache=new r(""),this._decrypt=a,this._alen=0,this._len=0,n.copy(this._prev),this._mode=e;var c=new r(4);c.fill(0),this._ghash=new h(this._cipher.encryptBlock(c)),this._authTag=null,this._called=!1}function n(e,t){var r=0;e.length!==t.length&&r++;for(var i=Math.min(e.length,t.length),n=-1;++n<i;)r+=e[n]^t[n];return r}var o=e("./aes"),s=e("./cipherBase"),a=e("inherits"),h=e("./ghash"),c=e("./xor");a(i,s),t.exports=i,i.prototype._transform=function(e,t,i){if(!this._called&&this._alen){var n=16-this._alen%16;16>n&&(n=new r(n),n.fill(0),this._ghash.update(n))}this._called=!0;var o=this._mode.encrypt(this,e);this._ghash.update(this._decrypt?e:o),this._len+=e.length,i(null,o)},i.prototype._flush=function(e){if(this._decrypt&&!this._authTag)throw new Error("Unsupported state or unable to authenticate data");var t=c(this._ghash.final(8*this._alen,8*this._len),this._cipher.encryptBlock(this._finID));if(this._decrypt){if(n(t,this._authTag))throw new Error("Unsupported state or unable to authenticate data")}else this._authTag=t;this._cipher.scrub(),e()},i.prototype.getAuthTag=function(){if(!this._decrypt&&r.isBuffer(this._authTag))return this._authTag;throw new Error("Attempting to get auth tag in unsupported state")},i.prototype.setAuthTag=function(e){if(!this._decrypt)throw new Error("Attempting to set auth tag in unsupported state");this._authTag=e},i.prototype.setAAD=function(e){if(this._called)throw new Error("Attempting to set AAD in unsupported state");this._ghash.update(e),this._alen+=e.length}}).call(this,e("buffer").Buffer)},{"./aes":67,"./cipherBase":69,"./ghash":72,"./xor":83,buffer:57,inherits:200}],69:[function(e,t){(function(r){function i(){n.call(this)}var n=e("stream").Transform,o=e("inherits");t.exports=i,o(i,n),i.prototype.update=function(e,t,i){this.write(e,t);for(var n,o=new r("");n=this.read();)o=r.concat([o,n]);return i&&(o=o.toString(i)),o},i.prototype.final=function(e){this.end();for(var t,i=new r("");t=this.read();)i=r.concat([i,t]);return e&&(i=i.toString(e)),i}}).call(this,e("buffer").Buffer)},{buffer:57,inherits:200,stream:214}],70:[function(e,t){(function(r){function i(e,t,o){return this instanceof i?(a.call(this),this._cache=new n,this._last=void 0,this._cipher=new s.AES(t),this._prev=new r(o.length),o.copy(this._prev),void(this._mode=e)):new i(e,t,o)}function n(){return this instanceof n?void(this.cache=new r("")):new n}function o(e){for(var t=e[15],r=-1;++r<t;)if(e[r+(16-t)]!==t)throw new Error("unable to decrypt data");return 16!==t?e.slice(0,16-t):void 0}var s=e("./aes"),a=e("./cipherBase"),h=e("inherits"),c=e("./modes"),u=e("./streamCipher"),f=e("./authCipher"),d=e("./EVP_BytesToKey");h(i,a),i.prototype._transform=function(e,t,r){this._cache.add(e);for(var i,n;i=this._cache.get();)n=this._mode.decrypt(this,i),this.push(n);r()},i.prototype._flush=function(e){var t=this._cache.flush();return t?(this.push(o(this._mode.decrypt(this,t))),void e()):e},n.prototype.add=function(e){this.cache=r.concat([this.cache,e])},n.prototype.get=function(){if(this.cache.length>16){var e=this.cache.slice(0,16);return this.cache=this.cache.slice(16),e}return null},n.prototype.flush=function(){return this.cache.length?this.cache:void 0};var l={ECB:e("./modes/ecb"),CBC:e("./modes/cbc"),CFB:e("./modes/cfb"),CFB8:e("./modes/cfb8"),CFB1:e("./modes/cfb1"),OFB:e("./modes/ofb"),CTR:e("./modes/ctr"),GCM:e("./modes/ctr")};t.exports=function(e){function t(e,t,n){var o=c[e];if(!o)throw new TypeError("invalid suite type");if("string"==typeof n&&(n=new r(n)),"string"==typeof t&&(t=new r(t)),t.length!==o.key/8)throw new TypeError("invalid key length "+t.length);if(n.length!==o.iv)throw new TypeError("invalid iv length "+n.length);return"stream"===o.type?new u(l[o.mode],t,n,!0):"auth"===o.type?new f(l[o.mode],t,n,!0):new i(l[o.mode],t,n)}function n(r,i){var n=c[r];if(!n)throw new TypeError("invalid suite type");var o=d(e,i,n.key,n.iv);return t(r,o.key,o.iv)}return{createDecipher:n,createDecipheriv:t}}}).call(this,e("buffer").Buffer)},{"./EVP_BytesToKey":66,"./aes":67,"./authCipher":68,"./cipherBase":69,"./modes":74,"./modes/cbc":75,"./modes/cfb":76,"./modes/cfb1":77,"./modes/cfb8":78,"./modes/ctr":79,"./modes/ecb":80,"./modes/ofb":81,"./streamCipher":82,buffer:57,inherits:200}],71:[function(e,t){(function(r){function i(e,t,a){return this instanceof i?(s.call(this),this._cache=new n,this._cipher=new o.AES(t),this._prev=new r(a.length),a.copy(this._prev),void(this._mode=e)):new i(e,t,a)}function n(){return this instanceof n?void(this.cache=new r("")):new n}var o=e("./aes"),s=e("./cipherBase"),a=e("inherits"),h=e("./modes"),c=e("./EVP_BytesToKey"),u=e("./streamCipher"),f=e("./authCipher");a(i,s),i.prototype._transform=function(e,t,r){this._cache.add(e);for(var i,n;i=this._cache.get();)n=this._mode.encrypt(this,i),this.push(n);r()},i.prototype._flush=function(e){var t=this._cache.flush();this.push(this._mode.encrypt(this,t)),this._cipher.scrub(),e()},n.prototype.add=function(e){this.cache=r.concat([this.cache,e])},n.prototype.get=function(){if(this.cache.length>15){var e=this.cache.slice(0,16);return this.cache=this.cache.slice(16),e}return null},n.prototype.flush=function(){for(var e=16-this.cache.length,t=new r(e),i=-1;++i<e;)t.writeUInt8(e,i);var n=r.concat([this.cache,t]);return n};var d={ECB:e("./modes/ecb"),CBC:e("./modes/cbc"),CFB:e("./modes/cfb"),CFB8:e("./modes/cfb8"),CFB1:e("./modes/cfb1"),OFB:e("./modes/ofb"),CTR:e("./modes/ctr"),GCM:e("./modes/ctr")};t.exports=function(e){function t(e,t,n){var o=h[e];if(!o)throw new TypeError("invalid suite type");if("string"==typeof n&&(n=new r(n)),"string"==typeof t&&(t=new r(t)),t.length!==o.key/8)throw new TypeError("invalid key length "+t.length);if(n.length!==o.iv)throw new TypeError("invalid iv length "+n.length);return"stream"===o.type?new u(d[o.mode],t,n):"auth"===o.type?new f(d[o.mode],t,n):new i(d[o.mode],t,n)}function n(r,i){var n=h[r];if(!n)throw new TypeError("invalid suite type");var o=c(e,i,n.key,n.iv);return t(r,o.key,o.iv)}return{createCipher:n,createCipheriv:t}}}).call(this,e("buffer").Buffer)},{"./EVP_BytesToKey":66,"./aes":67,"./authCipher":68,"./cipherBase":69,"./modes":74,"./modes/cbc":75,"./modes/cfb":76,"./modes/cfb1":77,"./modes/cfb8":78,"./modes/ctr":79,"./modes/ecb":80,"./modes/ofb":81,"./streamCipher":82,buffer:57,inherits:200}],72:[function(e,t){(function(e){function r(t){this.h=t,this.state=new e(16),this.state.fill(0),this.cache=new e("")}function i(e){return[e.readUInt32BE(0),e.readUInt32BE(4),e.readUInt32BE(8),e.readUInt32BE(12)]}function n(t){t=t.map(o);var r=new e(16);return r.writeUInt32BE(t[0],0),r.writeUInt32BE(t[1],4),r.writeUInt32BE(t[2],8),r.writeUInt32BE(t[3],12),r}function o(e){var t,r;return t=e>h||0>e?(r=Math.abs(e)%h,0>e?h-r:r):e}function s(e,t){return[e[0]^t[0],e[1]^t[1],e[2]^t[2],e[3]^t[3]]}var a=new e(16);a.fill(0),t.exports=r,r.prototype.ghash=function(e){for(var t=-1;++t<e.length;)this.state[t]^=e[t];this._multiply()},r.prototype._multiply=function(){for(var e,t,r,o=i(this.h),a=[0,0,0,0],h=-1;++h<128;){for(t=0!==(this.state[~~(h/8)]&1<<7-h%8),t&&(a=s(a,o)),r=0!==(1&o[3]),e=3;e>0;e--)o[e]=o[e]>>>1|(1&o[e-1])<<31;o[0]=o[0]>>>1,r&&(o[0]=o[0]^225<<24)}this.state=n(a)},r.prototype.update=function(t){this.cache=e.concat([this.cache,t]);for(var r;this.cache.length>=16;)r=this.cache.slice(0,16),this.cache=this.cache.slice(16),this.ghash(r)},r.prototype.final=function(t,r){return this.cache.length&&this.ghash(e.concat([this.cache,a],16)),this.ghash(n([0,t,0,r])),this.state};var h=Math.pow(2,32)}).call(this,e("buffer").Buffer)},{buffer:57}],73:[function(e,t){t.exports=function(t,r){function i(){return Object.keys(s)}r=r||{};var n=e("./encrypter")(t);r.createCipher=n.createCipher,r.createCipheriv=n.createCipheriv;var o=e("./decrypter")(t);r.createDecipher=o.createDecipher,r.createDecipheriv=o.createDecipheriv;var s=e("./modes");r.listCiphers=i}},{"./decrypter":70,"./encrypter":71,"./modes":74}],74:[function(e,t,r){r["aes-128-ecb"]={cipher:"AES",key:128,iv:0,mode:"ECB",type:"block"},r["aes-192-ecb"]={cipher:"AES",key:192,iv:0,mode:"ECB",type:"block"},r["aes-256-ecb"]={cipher:"AES",key:256,iv:0,mode:"ECB",type:"block"},r["aes-128-cbc"]={cipher:"AES",key:128,iv:16,mode:"CBC",type:"block"},r["aes-192-cbc"]={cipher:"AES",key:192,iv:16,mode:"CBC",type:"block"},r["aes-256-cbc"]={cipher:"AES",key:256,iv:16,mode:"CBC",type:"block"},r.aes128=r["aes-128-cbc"],r.aes192=r["aes-192-cbc"],r.aes256=r["aes-256-cbc"],r["aes-128-cfb"]={cipher:"AES",key:128,iv:16,mode:"CFB",type:"stream"},r["aes-192-cfb"]={cipher:"AES",key:192,iv:16,mode:"CFB",type:"stream"},r["aes-256-cfb"]={cipher:"AES",key:256,iv:16,mode:"CFB",type:"stream"},r["aes-128-cfb8"]={cipher:"AES",key:128,iv:16,mode:"CFB8",type:"stream"},r["aes-192-cfb8"]={cipher:"AES",key:192,iv:16,mode:"CFB8",type:"stream"},r["aes-256-cfb8"]={cipher:"AES",key:256,iv:16,mode:"CFB8",type:"stream"},r["aes-128-cfb1"]={cipher:"AES",key:128,iv:16,mode:"CFB1",type:"stream"},r["aes-192-cfb1"]={cipher:"AES",key:192,iv:16,mode:"CFB1",type:"stream"},r["aes-256-cfb1"]={cipher:"AES",key:256,iv:16,mode:"CFB1",type:"stream"},r["aes-128-ofb"]={cipher:"AES",key:128,iv:16,mode:"OFB",type:"stream"},r["aes-192-ofb"]={cipher:"AES",key:192,iv:16,mode:"OFB",type:"stream"},r["aes-256-ofb"]={cipher:"AES",key:256,iv:16,mode:"OFB",type:"stream"},r["aes-128-ctr"]={cipher:"AES",key:128,iv:16,mode:"CTR",type:"stream"},r["aes-192-ctr"]={cipher:"AES",key:192,iv:16,mode:"CTR",type:"stream"},r["aes-256-ctr"]={cipher:"AES",key:256,iv:16,mode:"CTR",type:"stream"},r["aes-128-gcm"]={cipher:"AES",key:128,iv:12,mode:"GCM",type:"auth"},r["aes-192-gcm"]={cipher:"AES",key:192,iv:12,mode:"GCM",type:"auth"},r["aes-256-gcm"]={cipher:"AES",key:256,iv:12,mode:"GCM",type:"auth"}},{}],75:[function(e,t,r){var i=e("../xor");r.encrypt=function(e,t){var r=i(t,e._prev);return e._prev=e._cipher.encryptBlock(r),e._prev},r.decrypt=function(e,t){var r=e._prev;e._prev=t;var n=e._cipher.decryptBlock(t);return i(n,r)}},{"../xor":83}],76:[function(e,t,r){(function(t){function i(e,r,i){var o=r.length,s=n(r,e._cache);return e._cache=e._cache.slice(o),e._prev=t.concat([e._prev,i?r:s]),s}var n=e("../xor");r.encrypt=function(e,r,n){for(var o,s=new t("");r.length;){if(0===e._cache.length&&(e._cache=e._cipher.encryptBlock(e._prev),e._prev=new t("")),!(e._cache.length<=r.length)){s=t.concat([s,i(e,r,n)]);break}o=e._cache.length,s=t.concat([s,i(e,r.slice(0,o),n)]),r=r.slice(o)}return s}}).call(this,e("buffer").Buffer)},{"../xor":83,buffer:57}],77:[function(e,t,r){(function(e){function t(e,t,r){for(var n,o,s,a=-1,h=8,c=0;++a<h;)n=e._cipher.encryptBlock(e._prev),o=t&1<<7-a?128:0,s=n[0]^o,c+=(128&s)>>a%8,e._prev=i(e._prev,r?o:s);return c}function i(t,r){var i=t.length,n=-1,o=new e(t.length);for(t=e.concat([t,new e([r])]);++n<i;)o[n]=t[n]<<1|t[n+1]>>7;return o}r.encrypt=function(r,i,n){for(var o=i.length,s=new e(o),a=-1;++a<o;)s[a]=t(r,i[a],n);return s}}).call(this,e("buffer").Buffer)},{buffer:57}],78:[function(e,t,r){(function(e){function t(t,r,i){var n=t._cipher.encryptBlock(t._prev),o=n[0]^r;return t._prev=e.concat([t._prev.slice(1),new e([i?r:o])]),o}r.encrypt=function(r,i,n){for(var o=i.length,s=new e(o),a=-1;++a<o;)s[a]=t(r,i[a],n);return s}}).call(this,e("buffer").Buffer)},{buffer:57}],79:[function(e,t,r){(function(t){function i(e){var t=e._cipher.encryptBlock(e._prev);return n(e._prev),t}function n(e){for(var t,r=e.length;r--;){if(t=e.readUInt8(r),255!==t){t++,e.writeUInt8(t,r);break}e.writeUInt8(0,r)}}var o=e("../xor");r.encrypt=function(e,r){for(;e._cache.length<r.length;)e._cache=t.concat([e._cache,i(e)]);var n=e._cache.slice(0,r.length);return e._cache=e._cache.slice(r.length),o(r,n)}}).call(this,e("buffer").Buffer)},{"../xor":83,buffer:57}],80:[function(e,t,r){r.encrypt=function(e,t){return e._cipher.encryptBlock(t)},r.decrypt=function(e,t){return e._cipher.decryptBlock(t)}},{}],81:[function(e,t,r){(function(t){function i(e){return e._prev=e._cipher.encryptBlock(e._prev),e._prev}var n=e("../xor");r.encrypt=function(e,r){for(;e._cache.length<r.length;)e._cache=t.concat([e._cache,i(e)]);var o=e._cache.slice(0,r.length);return e._cache=e._cache.slice(r.length),n(r,o)}}).call(this,e("buffer").Buffer)},{"../xor":83,buffer:57}],82:[function(e,t){(function(r){function i(e,t,s,a){return this instanceof i?(o.call(this),this._cipher=new n.AES(t),this._prev=new r(s.length),this._cache=new r(""),this._secCache=new r(""),this._decrypt=a,s.copy(this._prev),void(this._mode=e)):new i(e,t,s)}var n=e("./aes"),o=e("./cipherBase"),s=e("inherits");s(i,o),t.exports=i,i.prototype._transform=function(e,t,r){r(null,this._mode.encrypt(this,e,this._decrypt))},i.prototype._flush=function(e){this._cipher.scrub(),e()}}).call(this,e("buffer").Buffer)},{"./aes":67,"./cipherBase":69,buffer:57,inherits:200}],83:[function(e,t){(function(e){function r(t,r){for(var i=Math.min(t.length,r.length),n=new e(i),o=-1;++o<i;)n.writeUInt8(t[o]^r[o],o);return n}t.exports=r}).call(this,e("buffer").Buffer)},{buffer:57}],84:[function(e,t,r){(function(e){r["RSA-SHA224"]=r.sha224WithRSAEncryption={sign:"rsa",hash:"sha224",id:new e("302d300d06096086480165030402040500041c","hex")},r["RSA-SHA256"]=r.sha256WithRSAEncryption={sign:"rsa",hash:"sha256",id:new e("3031300d060960864801650304020105000420","hex")},r["RSA-SHA384"]=r.sha384WithRSAEncryption={sign:"rsa",hash:"sha384",id:new e("3041300d060960864801650304020205000430","hex")},r["RSA-SHA512"]=r.sha512WithRSAEncryption={sign:"rsa",hash:"sha512",id:new e("3051300d060960864801650304020305000440","hex")},r["RSA-SHA1"]={sign:"rsa",hash:"sha1",id:new e("3021300906052b0e03021a05000414","hex")},r["ecdsa-with-SHA1"]={sign:"ecdsa",hash:"sha1",id:new e("","hex")},r.DSA=r["DSA-SHA1"]=r["DSA-SHA"]={sign:"dsa",hash:"sha1",id:new e("","hex")},r["RSA-RIPEMD160"]=r.ripemd160WithRSA={sign:"rsa",hash:"rmd160",id:new e("3021300906052b2403020105000414","hex")},r["RSA-MD5"]=r.md5WithRSAEncryption={sign:"rsa",hash:"md5",id:new e("3020300c06082a864886f70d020505000410","hex")}
}).call(this,e("buffer").Buffer)},{buffer:57}],85:[function(e,t){(function(r){function i(e,t){a.Writable.call(this);var r=c[e];if(!r)throw new Error("Unknown message digest");this._hash=t.createHash(r.hash),this._tag=r.id,this._crypto=t}function n(e,t){a.Writable.call(this);var r=c[e];if(!r)throw new Error("Unknown message digest");this._hash=t.createHash(r.hash),this._tag=r.id}var o=e("./sign"),s=e("./verify"),a=e("stream"),h=e("inherits"),c=e("./algos");t.exports=function(e,t){function r(e){return new i(e,t)}function o(e){return new n(e,t)}e.createSign=r,e.createVerify=o},h(i,a.Writable),i.prototype._write=function(e,t,r){this._hash.update(e),r()},i.prototype.update=function(e){return this.write(e),this},i.prototype.sign=function(e,t){this.end();var i=this._hash.digest(),n=o(r.concat([this._tag,i]),e,this._crypto);return t&&(n=n.toString(t)),n},h(n,a.Writable),n.prototype._write=function(e,t,r){this._hash.update(e),r()},n.prototype.update=function(e){return this.write(e),this},n.prototype.verify=function(e,t,i){this.end();var n=this._hash.digest();return r.isBuffer(t)||(t=new r(t,i)),s(t,r.concat([this._tag,n]),e)}}).call(this,e("buffer").Buffer)},{"./algos":84,"./sign":128,"./verify":129,buffer:57,inherits:200,stream:214}],86:[function(e,t){function r(e,t){if(!e)throw new Error(t||"Assertion failed")}function i(e,t){e.super_=t;var r=function(){};r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e}function n(e,t){return null!==e&&"object"==typeof e&&Array.isArray(e.words)?e:(this.sign=!1,this.words=null,this.length=0,this.red=null,void(null!==e&&this._init(e||0,t||10)))}function o(e,t){this.name=e,this.p=new n(t,16),this.n=this.p.bitLength(),this.k=new n(1).ishln(this.n).isub(this.p),this.tmp=this._tmp()}function s(){o.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function a(){o.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function h(){o.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function c(){o.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function u(e){if("string"==typeof e){var t=n._prime(e);this.m=t.p,this.prime=t}else this.m=e,this.prime=null}function f(e){u.call(this,e),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new n(1).ishln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r.invm(this.m),this.minv=this.rinv.mul(this.r).sub(new n(1)).div(this.m).neg().mod(this.r)}"object"==typeof t&&(t.exports=n),n.BN=n,n.wordSize=26,n.prototype._init=function(e,t){if("number"==typeof e)return 0>e&&(this.sign=!0,e=-e),void(67108864>e?(this.words=[67108863&e],this.length=1):(this.words=[67108863&e,e/67108864&67108863],this.length=2));if("object"==typeof e){r("number"==typeof e.length),this.length=Math.ceil(e.length/3),this.words=new Array(this.length);for(var i=0;i<this.length;i++)this.words[i]=0;for(var n=0,i=e.length-1,o=0;i>=0;i-=3){var s=e[i]|e[i-1]<<8|e[i-2]<<16;this.words[o]|=s<<n&67108863,this.words[o+1]=s>>>26-n&67108863,n+=24,n>=26&&(n-=26,o++)}return this.strip()}"hex"===t&&(t=16),r(t===(0|t)&&t>=2&&36>=t),e=e.toString().replace(/\s+/g,"");var a=0;"-"===e[0]&&a++,16===t?this._parseHex(e,a):this._parseBase(e,t,a),"-"===e[0]&&(this.sign=!0),this.strip()},n.prototype._parseHex=function(e,t){this.length=Math.ceil((e.length-t)/6),this.words=new Array(this.length);for(var r=0;r<this.length;r++)this.words[r]=0;for(var i=0,r=e.length-6,n=0;r>=t;r-=6){var o=parseInt(e.slice(r,r+6),16);this.words[n]|=o<<i&67108863,this.words[n+1]|=o>>>26-i&4194303,i+=24,i>=26&&(i-=26,n++)}if(r+6!==t){var o=parseInt(e.slice(t,r+6),16);this.words[n]|=o<<i&67108863,this.words[n+1]|=o>>>26-i&4194303}this.strip()},n.prototype._parseBase=function(e,t,i){this.words=[0],this.length=1;for(var o=0,s=1,a=0,h=null,c=i;c<e.length;c++){var u,f=e[c];u=10===t||"9">=f?0|f:f>="a"?f.charCodeAt(0)-97+10:f.charCodeAt(0)-65+10,o*=t,o+=u,s*=t,a++,s>1048575&&(r(67108863>=s),h||(h=new n(s)),this.mul(h).copy(this),this.iadd(new n(o)),o=0,s=1,a=0)}0!==a&&(this.mul(new n(s)).copy(this),this.iadd(new n(o)))},n.prototype.copy=function(e){e.words=new Array(this.length);for(var t=0;t<this.length;t++)e.words[t]=this.words[t];e.length=this.length,e.sign=this.sign,e.red=this.red},n.prototype.clone=function(){var e=new n(null);return this.copy(e),e},n.prototype.strip=function(){for(;this.length>1&&0===this.words[this.length-1];)this.length--;return this._normSign()},n.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.sign=!1),this},n.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var d=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],l=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],p=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];n.prototype.toString=function(e,t){if(e=e||10,16===e||"hex"===e){for(var i="",n=0,t=0|t||1,o=0,s=0;s<this.length;s++){var a=this.words[s],h=(16777215&(a<<n|o)).toString(16);o=a>>>24-n&16777215,i=0!==o||s!==this.length-1?d[6-h.length]+h+i:h+i,n+=2,n>=26&&(n-=26,s--)}for(0!==o&&(i=o.toString(16)+i);i.length%t!==0;)i="0"+i;return this.sign&&(i="-"+i),i}if(e===(0|e)&&e>=2&&36>=e){var c=l[e],u=p[e],i="",f=this.clone();for(f.sign=!1;0!==f.cmpn(0);){var b=f.modn(u).toString(e);f=f.idivn(u),i=0!==f.cmpn(0)?d[c-b.length]+b+i:b+i}return 0===this.cmpn(0)&&(i="0"+i),this.sign&&(i="-"+i),i}r(!1,"Base should be between 2 and 36")},n.prototype.toJSON=function(){return this.toString(16)},n.prototype.toArray=function(){this.strip();var e=new Array(this.byteLength());e[0]=0;for(var t=this.clone(),r=0;0!==t.cmpn(0);r++){var i=t.andln(255);t.ishrn(8),e[e.length-r-1]=i}return e},n.prototype._countBits=function(e){return e>=33554432?26:e>=16777216?25:e>=8388608?24:e>=4194304?23:e>=2097152?22:e>=1048576?21:e>=524288?20:e>=262144?19:e>=131072?18:e>=65536?17:e>=32768?16:e>=16384?15:e>=8192?14:e>=4096?13:e>=2048?12:e>=1024?11:e>=512?10:e>=256?9:e>=128?8:e>=64?7:e>=32?6:e>=16?5:e>=8?4:e>=4?3:e>=2?2:e>=1?1:0},n.prototype.bitLength=function(){var e=0,t=this.words[this.length-1],e=this._countBits(t);return 26*(this.length-1)+e},n.prototype.byteLength=function(){this.words[this.length-1];return Math.ceil(this.bitLength()/8)},n.prototype.neg=function(){if(0===this.cmpn(0))return this.clone();var e=this.clone();return e.sign=!this.sign,e},n.prototype.iadd=function(e){if(this.sign&&!e.sign){this.sign=!1;var t=this.isub(e);return this.sign=!this.sign,this._normSign()}if(!this.sign&&e.sign){e.sign=!1;var t=this.isub(e);return e.sign=!0,t._normSign()}var r,i;this.length>e.length?(r=this,i=e):(r=e,i=this);for(var n=0,o=0;o<i.length;o++){var t=r.words[o]+i.words[o]+n;this.words[o]=67108863&t,n=t>>>26}for(;0!==n&&o<r.length;o++){var t=r.words[o]+n;this.words[o]=67108863&t,n=t>>>26}if(this.length=r.length,0!==n)this.words[this.length]=n,this.length++;else if(r!==this)for(;o<r.length;o++)this.words[o]=r.words[o];return this},n.prototype.add=function(e){if(e.sign&&!this.sign){e.sign=!1;var t=this.sub(e);return e.sign=!0,t}if(!e.sign&&this.sign){this.sign=!1;var t=e.sub(this);return this.sign=!0,t}return this.length>e.length?this.clone().iadd(e):e.clone().iadd(this)},n.prototype.isub=function(e){if(e.sign){e.sign=!1;var t=this.iadd(e);return e.sign=!0,t._normSign()}if(this.sign)return this.sign=!1,this.iadd(e),this.sign=!0,this._normSign();var r=this.cmp(e);if(0===r)return this.sign=!1,this.length=1,this.words[0]=0,this;if(r>0)var i=this,n=e;else var i=e,n=this;for(var o=0,s=0;s<n.length;s++){var t=i.words[s]-n.words[s]-o;0>t?(t+=67108864,o=1):o=0,this.words[s]=t}for(;0!==o&&s<i.length;s++){var t=i.words[s]-o;0>t?(t+=67108864,o=1):o=0,this.words[s]=t}if(0===o&&s<i.length&&i!==this)for(;s<i.length;s++)this.words[s]=i.words[s];return this.length=Math.max(this.length,s),i!==this&&(this.sign=!0),this.strip()},n.prototype.sub=function(e){return this.clone().isub(e)},n.prototype._smallMulTo=function(e,t){t.sign=e.sign!==this.sign,t.length=this.length+e.length;for(var r=0,i=0;i<t.length-1;i++){for(var n=r>>>26,o=67108863&r,s=Math.min(i,e.length-1),a=Math.max(0,i-this.length+1);s>=a;a++){var h=i-a,c=0|this.words[h],u=0|e.words[a],f=c*u,d=67108863&f;n=n+(f/67108864|0)|0,d=d+o|0,o=67108863&d,n=n+(d>>>26)|0}t.words[i]=o,r=n}return 0!==r?t.words[i]=r:t.length--,t.strip()},n.prototype._bigMulTo=function(e,t){t.sign=e.sign!==this.sign,t.length=this.length+e.length;for(var r=0,i=0,n=0;n<t.length-1;n++){var o=i;i=0;for(var s=67108863&r,a=Math.min(n,e.length-1),h=Math.max(0,n-this.length+1);a>=h;h++){var c=n-h,u=0|this.words[c],f=0|e.words[h],d=u*f,l=67108863&d;o=o+(d/67108864|0)|0,l=l+s|0,s=67108863&l,o=o+(l>>>26)|0,i+=o>>>26,o&=67108863}t.words[n]=s,r=o,o=i}return 0!==r?t.words[n]=r:t.length--,t.strip()},n.prototype.mulTo=function(e,t){var r;return r=this.length+e.length<63?this._smallMulTo(e,t):this._bigMulTo(e,t)},n.prototype.mul=function(e){var t=new n(null);return t.words=new Array(this.length+e.length),this.mulTo(e,t)},n.prototype.imul=function(e){if(0===this.cmpn(0)||0===e.cmpn(0))return this.words[0]=0,this.length=1,this;var t=this.length,r=e.length;this.sign=e.sign!==this.sign,this.length=this.length+e.length,this.words[this.length-1]=0;for(var i=this.length-2;i>=0;i--){for(var n=0,o=0,s=Math.min(i,r-1),a=Math.max(0,i-t+1);s>=a;a++){var h=i-a,c=this.words[h],u=e.words[a],f=c*u,d=67108863&f;n+=f/67108864|0,d+=o,o=67108863&d,n+=d>>>26}this.words[i]=o,this.words[i+1]+=n,n=0}for(var n=0,h=1;h<this.length;h++){var l=this.words[h]+n;this.words[h]=67108863&l,n=l>>>26}return this.strip()},n.prototype.sqr=function(){return this.mul(this)},n.prototype.isqr=function(){return this.mul(this)},n.prototype.ishln=function(e){r("number"==typeof e&&e>=0);{var t=e%26,i=(e-t)/26,n=67108863>>>26-t<<26-t;this.clone()}if(0!==t){for(var o=0,s=0;s<this.length;s++){var a=this.words[s]&n,h=this.words[s]-a<<t;this.words[s]=h|o,o=a>>>26-t}o&&(this.words[s]=o,this.length++)}if(0!==i){for(var s=this.length-1;s>=0;s--)this.words[s+i]=this.words[s];for(var s=0;i>s;s++)this.words[s]=0;this.length+=i}return this.strip()},n.prototype.ishrn=function(e,t,i){r("number"==typeof e&&e>=0),t=t?(t-t%26)/26:0;var n=e%26,o=Math.min((e-n)/26,this.length),s=67108863^67108863>>>n<<n,a=i;if(t-=o,t=Math.max(0,t),a){for(var h=0;o>h;h++)a.words[h]=this.words[h];a.length=o}if(0===o);else if(this.length>o){this.length-=o;for(var h=0;h<this.length;h++)this.words[h]=this.words[h+o]}else this.words[0]=0,this.length=1;for(var c=0,h=this.length-1;h>=0&&(0!==c||h>=t);h--){var u=this.words[h];this.words[h]=c<<26-n|u>>>n,c=u&s}return a&&0!==c&&(a.words[a.length++]=c),0===this.length&&(this.words[0]=0,this.length=1),this.strip(),i?{hi:this,lo:a}:this},n.prototype.shln=function(e){return this.clone().ishln(e)},n.prototype.shrn=function(e){return this.clone().ishrn(e)},n.prototype.testn=function(e){r("number"==typeof e&&e>=0);var t=e%26,i=(e-t)/26,n=1<<t;if(this.length<=i)return!1;var o=this.words[i];return!!(o&n)},n.prototype.imaskn=function(e){r("number"==typeof e&&e>=0);var t=e%26,i=(e-t)/26;if(r(!this.sign,"imaskn works only with positive numbers"),0!==t&&i++,this.length=Math.min(i,this.length),0!==t){var n=67108863^67108863>>>t<<t;this.words[this.length-1]&=n}return this.strip()},n.prototype.maskn=function(e){return this.clone().imaskn(e)},n.prototype.iaddn=function(e){if(r("number"==typeof e),0>e)return this.isubn(-e);if(this.sign)return 1===this.length&&this.words[0]<e?(this.words[0]=e-this.words[0],this.sign=!1,this):(this.sign=!1,this.isubn(e),this.sign=!0,this);this.words[0]+=e;for(var t=0;t<this.length&&this.words[t]>=67108864;t++)this.words[t]-=67108864,t===this.length-1?this.words[t+1]=1:this.words[t+1]++;return this.length=Math.max(this.length,t+1),this},n.prototype.isubn=function(e){if(r("number"==typeof e),0>e)return this.iaddn(-e);if(this.sign)return this.sign=!1,this.iaddn(e),this.sign=!0,this;this.words[0]-=e;for(var t=0;t<this.length&&this.words[t]<0;t++)this.words[t]+=67108864,this.words[t+1]-=1;return this.strip()},n.prototype.addn=function(e){return this.clone().iaddn(e)},n.prototype.subn=function(e){return this.clone().isubn(e)},n.prototype.iabs=function(){return this.sign=!1,this},n.prototype.abs=function(){return this.clone().iabs()},n.prototype._wordDiv=function(e,t){for(var r=this.length-e.length,i=this.clone(),o=e,s="mod"!==t&&new n(0);i.length>o.length;){var a=67108864*i.words[i.length-1]+i.words[i.length-2],h=a/o.words[o.length-1],c=h/67108864|0,u=67108863&h;h=new n(null),h.words=[u,c],h.length=2;var r=26*(i.length-o.length-1);if(s){var f=h.shln(r);i.sign?s.isub(f):s.iadd(f)}h=h.mul(o).ishln(r),i.sign?i.iadd(h):i.isub(h)}for(;i.ucmp(o)>=0;){var a=i.words[i.length-1],h=new n(a/o.words[o.length-1]|0),r=26*(i.length-o.length);if(s){var f=h.shln(r);i.sign?s.isub(f):s.iadd(f)}h=h.mul(o).ishln(r),i.sign?i.iadd(h):i.isub(h)}return i.sign&&(s&&s.isubn(1),i.iadd(o)),{div:s?s:null,mod:i}},n.prototype.divmod=function(e,t){if(r(0!==e.cmpn(0)),this.sign&&!e.sign){var i,o,s=this.neg().divmod(e,t);return"mod"!==t&&(i=s.div.neg()),"div"!==t&&(o=0===s.mod.cmpn(0)?s.mod:e.sub(s.mod)),{div:i,mod:o}}if(!this.sign&&e.sign){var i,s=this.divmod(e.neg(),t);return"mod"!==t&&(i=s.div.neg()),{div:i,mod:s.mod}}return this.sign&&e.sign?this.neg().divmod(e.neg(),t):e.length>this.length||this.cmp(e)<0?{div:new n(0),mod:this}:1===e.length?"div"===t?{div:this.divn(e.words[0]),mod:null}:"mod"===t?{div:null,mod:new n(this.modn(e.words[0]))}:{div:this.divn(e.words[0]),mod:new n(this.modn(e.words[0]))}:this._wordDiv(e,t)},n.prototype.div=function(e){return this.divmod(e,"div").div},n.prototype.mod=function(e){return this.divmod(e,"mod").mod},n.prototype.divRound=function(e){var t=this.divmod(e);if(0===t.mod.cmpn(0))return t.div;var r=t.div.sign?t.mod.isub(e):t.mod,i=e.shrn(1),n=e.andln(1),o=r.cmp(i);return 0>o||1===n&&0===o?t.div:t.div.sign?t.div.isubn(1):t.div.iaddn(1)},n.prototype.modn=function(e){r(67108863>=e);for(var t=(1<<26)%e,i=0,n=this.length-1;n>=0;n--)i=(t*i+this.words[n])%e;return i},n.prototype.idivn=function(e){r(67108863>=e);for(var t=0,i=this.length-1;i>=0;i--){var n=this.words[i]+67108864*t;this.words[i]=n/e|0,t=n%e}return this.strip()},n.prototype.divn=function(e){return this.clone().idivn(e)},n.prototype._egcd=function(e,t){r(!t.sign),r(0!==t.cmpn(0));var i=this,o=t.clone();i=i.sign?i.mod(t):i.clone();for(var s=new n(0);o.isEven();)o.ishrn(1);for(var a=o.clone();i.cmpn(1)>0&&o.cmpn(1)>0;){for(;i.isEven();)i.ishrn(1),e.isEven()?e.ishrn(1):e.iadd(a).ishrn(1);for(;o.isEven();)o.ishrn(1),s.isEven()?s.ishrn(1):s.iadd(a).ishrn(1);i.cmp(o)>=0?(i.isub(o),e.isub(s)):(o.isub(i),s.isub(e))}return 0===i.cmpn(1)?e:s},n.prototype.gcd=function(e){if(0===this.cmpn(0))return e.clone();if(0===e.cmpn(0))return this.clone();var t=this.clone(),r=e.clone();t.sign=!1,r.sign=!1;for(var i=0;t.isEven()&&r.isEven();i++)t.ishrn(1),r.ishrn(1);for(;t.isEven();)t.ishrn(1);do{for(;r.isEven();)r.ishrn(1);if(t.cmp(r)<0){var n=t;t=r,r=n}t.isub(t.div(r).mul(r))}while(0!==t.cmpn(0)&&0!==r.cmpn(0));return 0===t.cmpn(0)?r.ishln(i):t.ishln(i)},n.prototype.invm=function(e){return this._egcd(new n(1),e).mod(e)},n.prototype.isEven=function(){return 0===(1&this.words[0])},n.prototype.isOdd=function(){return 1===(1&this.words[0])},n.prototype.andln=function(e){return this.words[0]&e},n.prototype.bincn=function(e){r("number"==typeof e);var t=e%26,i=(e-t)/26,n=1<<t;if(this.length<=i){for(var o=this.length;i+1>o;o++)this.words[o]=0;return this.words[i]|=n,this.length=i+1,this}for(var s=n,o=i;0!==s&&o<this.length;o++){var a=this.words[o];a+=s,s=a>>>26,a&=67108863,this.words[o]=a}return 0!==s&&(this.words[o]=s,this.length++),this},n.prototype.cmpn=function(e){var t=0>e;if(t&&(e=-e),this.sign&&!t)return-1;if(!this.sign&&t)return 1;e&=67108863,this.strip();var r;if(this.length>1)r=1;else{var i=this.words[0];r=i===e?0:e>i?-1:1}return this.sign&&(r=-r),r},n.prototype.cmp=function(e){if(this.sign&&!e.sign)return-1;if(!this.sign&&e.sign)return 1;var t=this.ucmp(e);return this.sign?-t:t},n.prototype.ucmp=function(e){if(this.length>e.length)return 1;if(this.length<e.length)return-1;for(var t=0,r=this.length-1;r>=0;r--){var i=this.words[r],n=e.words[r];if(i!==n){n>i?t=-1:i>n&&(t=1);break}}return t},n.red=function(e){return new u(e)},n.prototype.toRed=function(e){return r(!this.red,"Already a number in reduction context"),r(!this.sign,"red works only with positives"),e.convertTo(this)._forceRed(e)},n.prototype.fromRed=function(){return r(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},n.prototype._forceRed=function(e){return this.red=e,this},n.prototype.forceRed=function(e){return r(!this.red,"Already a number in reduction context"),this._forceRed(e)},n.prototype.redAdd=function(e){return r(this.red,"redAdd works only with red numbers"),this.red.add(this,e)},n.prototype.redIAdd=function(e){return r(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,e)},n.prototype.redSub=function(e){return r(this.red,"redSub works only with red numbers"),this.red.sub(this,e)},n.prototype.redISub=function(e){return r(this.red,"redISub works only with red numbers"),this.red.isub(this,e)},n.prototype.redShl=function(e){return r(this.red,"redShl works only with red numbers"),this.red.shl(this,e)},n.prototype.redMul=function(e){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,e),this.red.mul(this,e)},n.prototype.redIMul=function(e){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,e),this.red.imul(this,e)},n.prototype.redSqr=function(){return r(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},n.prototype.redISqr=function(){return r(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},n.prototype.redSqrt=function(){return r(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},n.prototype.redInvm=function(){return r(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},n.prototype.redNeg=function(){return r(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},n.prototype.redPow=function(e){return r(this.red&&!e.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,e)};var b={k256:null,p224:null,p192:null,p25519:null};o.prototype._tmp=function(){var e=new n(null);return e.words=new Array(Math.ceil(this.n/13)),e},o.prototype.ireduce=function(e){var t,r=e;do{var i=r.ishrn(this.n,0,this.tmp);r=this.imulK(i.hi),r=r.iadd(i.lo),t=r.bitLength()}while(t>this.n);var n=t<this.n?-1:r.cmp(this.p);return 0===n?(r.words[0]=0,r.length=1):n>0?r.isub(this.p):r.strip(),r},o.prototype.imulK=function(e){return e.imul(this.k)},i(s,o),s.prototype.imulK=function(e){e.words[e.length]=0,e.words[e.length+1]=0,e.length+=2;for(var t=e.length-3;t>=0;t--){var r=e.words[t],i=64*r,n=977*r;i+=n/67108864|0;var o=i/67108864|0;i&=67108863,n&=67108863,e.words[t+2]+=o,e.words[t+1]+=i,e.words[t]=n}var r=e.words[e.length-2];return r>=67108864&&(e.words[e.length-1]+=r>>>26,e.words[e.length-2]=67108863&r),0===e.words[e.length-1]&&e.length--,0===e.words[e.length-1]&&e.length--,e},i(a,o),i(h,o),i(c,o),c.prototype.imulK=function(e){for(var t=0,r=0;r<e.length;r++){var i=19*e.words[r]+t,n=67108863&i;i>>>=26,e.words[r]=n,t=i}return 0!==t&&(e.words[e.length++]=t),e},n._prime=function e(t){if(b[t])return b[t];var e;if("k256"===t)e=new s;else if("p224"===t)e=new a;else if("p192"===t)e=new h;else{if("p25519"!==t)throw new Error("Unknown prime "+t);e=new c}return b[t]=e,e},u.prototype._verify1=function(e){r(!e.sign,"red works only with positives"),r(e.red,"red works only with red numbers")},u.prototype._verify2=function(e,t){r(!e.sign&&!t.sign,"red works only with positives"),r(e.red&&e.red===t.red,"red works only with red numbers")},u.prototype.imod=function(e){return this.prime?this.prime.ireduce(e)._forceRed(this):e.mod(this.m)._forceRed(this)},u.prototype.neg=function(e){var t=e.clone();return t.sign=!t.sign,t.iadd(this.m)._forceRed(this)},u.prototype.add=function(e,t){this._verify2(e,t);var r=e.add(t);return r.cmp(this.m)>=0&&r.isub(this.m),r._forceRed(this)},u.prototype.iadd=function(e,t){this._verify2(e,t);var r=e.iadd(t);return r.cmp(this.m)>=0&&r.isub(this.m),r},u.prototype.sub=function(e,t){this._verify2(e,t);var r=e.sub(t);return r.cmpn(0)<0&&r.iadd(this.m),r._forceRed(this)},u.prototype.isub=function(e,t){this._verify2(e,t);var r=e.isub(t);return r.cmpn(0)<0&&r.iadd(this.m),r},u.prototype.shl=function(e,t){return this._verify1(e),this.imod(e.shln(t))},u.prototype.imul=function(e,t){return this._verify2(e,t),this.imod(e.imul(t))},u.prototype.mul=function(e,t){return this._verify2(e,t),this.imod(e.mul(t))},u.prototype.isqr=function(e){return this.imul(e,e)},u.prototype.sqr=function(e){return this.mul(e,e)},u.prototype.sqrt=function(e){if(0===e.cmpn(0))return e.clone();var t=this.m.andln(3);if(r(t%2===1),3===t){var i=this.m.add(new n(1)).ishrn(2),o=this.pow(e,i);return o}for(var s=this.m.subn(1),a=0;0!==s.cmpn(0)&&0===s.andln(1);)a++,s.ishrn(1);r(0!==s.cmpn(0));var h=new n(1).toRed(this),c=h.redNeg(),u=this.m.subn(1).ishrn(1),f=this.m.bitLength();for(f=new n(2*f*f).toRed(this);0!==this.pow(f,u).cmp(c);)f.redIAdd(c);for(var d=this.pow(f,s),o=this.pow(e,s.addn(1).ishrn(1)),l=this.pow(e,s),p=a;0!==l.cmp(h);){for(var b=l,m=0;0!==b.cmp(h);m++)b=b.redSqr();r(p>m);var v=this.pow(d,new n(1).ishln(p-m-1));o=o.redMul(v),d=v.redSqr(),l=l.redMul(d),p=m}return o},u.prototype.invm=function(e){var t=e._egcd(new n(1),this.m);return t.sign?(t.sign=!1,this.imod(t).redNeg()):this.imod(t)},u.prototype.pow=function(e,t){for(var r=[],i=t.clone();0!==i.cmpn(0);)r.push(i.andln(1)),i.ishrn(1);for(var n=e,o=0;o<r.length&&0===r[o];o++,n=this.sqr(n));if(++o<r.length)for(var i=this.sqr(n);o<r.length;o++,i=this.sqr(i))0!==r[o]&&(n=this.mul(n,i));return n},u.prototype.convertTo=function(e){return e.clone()},u.prototype.convertFrom=function(e){var t=e.clone();return t.red=null,t},n.mont=function(e){return new f(e)},i(f,u),f.prototype.convertTo=function(e){return this.imod(e.shln(this.shift))},f.prototype.convertFrom=function(e){var t=this.imod(e.mul(this.rinv));return t.red=null,t},f.prototype.imul=function(e,t){if(0===e.cmpn(0)||0===t.cmpn(0))return e.words[0]=0,e.length=1,e;var r=e.imul(t),i=r.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),n=r.isub(i).ishrn(this.shift),o=n;return n.cmp(this.m)>=0?o=n.isub(this.m):n.cmpn(0)<0&&(o=n.iadd(this.m)),o._forceRed(this)},f.prototype.mul=function(e,t){if(0===e.cmpn(0)||0===t.cmpn(0))return new n(0)._forceRed(this);var r=e.mul(t),i=r.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),o=r.isub(i).ishrn(this.shift),s=o;return o.cmp(this.m)>=0?s=o.isub(this.m):o.cmpn(0)<0&&(s=o.iadd(this.m)),s._forceRed(this)},f.prototype.invm=function(e){var t=this.imod(e.invm(this.m).mul(this.r2));return t._forceRed(this)}},{}],87:[function(e,t){(function(r){function i(e,t){var r=o(e,t),i=r.toRed(s.mont(e.modulus)).redPow(new s(e.publicExponent)).fromRed();return{blinder:i,unblinder:r.invm(e.modulus)}}function n(e,t,n){var o=i(t,n),a=t.modulus.byteLength(),h=(s.mont(t.modulus),new s(e).mul(o.blinder).mod(t.modulus)),c=h.toRed(s.mont(t.prime1)),u=h.toRed(s.mont(t.prime2)),f=t.coefficient,d=t.prime1,l=t.prime2,p=c.redPow(t.exponent1),b=u.redPow(t.exponent2);p=p.fromRed(),b=b.fromRed();var m=p.isub(b).imul(f).mod(d);m.imul(l),b.iadd(m);var v=new r(b.imul(o.unblinder).mod(t.modulus).toArray());if(v.length<a){var g=new r(a-v.length);g.fill(0),v=r.concat([g,v],a)}return v}function o(e,t){for(var r=e.modulus.byteLength(),i=new s(t.randomBytes(r));i.cmp(e.modulus)>=0||!i.mod(e.prime1)||!i.mod(e.prime2);)i=new s(t.randomBytes(r));return i}var s=e("bn.js");t.exports=n,n.getr=o}).call(this,e("buffer").Buffer)},{"bn.js":88,buffer:57}],88:[function(e,t){function r(e,t){if(!e)throw new Error(t||"Assertion failed")}function i(e,t){e.super_=t;var r=function(){};r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e}function n(e,t,r){return null!==e&&"object"==typeof e&&Array.isArray(e.words)?e:(this.sign=!1,this.words=null,this.length=0,this.red=null,("le"===t||"be"===t)&&(r=t,t=10),void(null!==e&&this._init(e||0,t||10,r||"be")))}function o(e,t){this.name=e,this.p=new n(t,16),this.n=this.p.bitLength(),this.k=new n(1).ishln(this.n).isub(this.p),this.tmp=this._tmp()}function s(){o.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function a(){o.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function h(){o.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function c(){o.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function u(e){if("string"==typeof e){var t=n._prime(e);this.m=t.p,this.prime=t}else this.m=e,this.prime=null}function f(e){u.call(this,e),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new n(1).ishln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r.invm(this.m),this.minv=this.rinv.mul(this.r).sub(new n(1)).div(this.m).neg().mod(this.r)}"object"==typeof t&&(t.exports=n),n.BN=n,n.wordSize=26,n.prototype._init=function(e,t,i){if("number"==typeof e)return 0>e&&(this.sign=!0,e=-e),void(67108864>e?(this.words=[67108863&e],this.length=1):(this.words=[67108863&e,e/67108864&67108863],this.length=2));if("object"==typeof e)return this._initArray(e,t,i);"hex"===t&&(t=16),r(t===(0|t)&&t>=2&&36>=t),e=e.toString().replace(/\s+/g,"");var n=0;"-"===e[0]&&n++,16===t?this._parseHex(e,n):this._parseBase(e,t,n),"-"===e[0]&&(this.sign=!0),this.strip()},n.prototype._initArray=function(e,t,i){r("number"==typeof e.length),this.length=Math.ceil(e.length/3),this.words=new Array(this.length);for(var n=0;n<this.length;n++)this.words[n]=0;var o=0;if("be"===i)for(var n=e.length-1,s=0;n>=0;n-=3){var a=e[n]|e[n-1]<<8|e[n-2]<<16;this.words[s]|=a<<o&67108863,this.words[s+1]=a>>>26-o&67108863,o+=24,o>=26&&(o-=26,s++)}else if("le"===i)for(var n=0,s=0;n<e.length;n+=3){var a=e[n]|e[n+1]<<8|e[n+2]<<16;this.words[s]|=a<<o&67108863,this.words[s+1]=a>>>26-o&67108863,o+=24,o>=26&&(o-=26,s++)}return this.strip()},n.prototype._parseHex=function(e,t){this.length=Math.ceil((e.length-t)/6),this.words=new Array(this.length);for(var r=0;r<this.length;r++)this.words[r]=0;for(var i=0,r=e.length-6,n=0;r>=t;r-=6){var o=parseInt(e.slice(r,r+6),16);this.words[n]|=o<<i&67108863,this.words[n+1]|=o>>>26-i&4194303,i+=24,i>=26&&(i-=26,n++)}if(r+6!==t){var o=parseInt(e.slice(t,r+6),16);this.words[n]|=o<<i&67108863,this.words[n+1]|=o>>>26-i&4194303}this.strip()},n.prototype._parseBase=function(e,t,i){this.words=[0],this.length=1;for(var o=0,s=1,a=0,h=null,c=i;c<e.length;c++){var u,f=e[c];u=10===t||"9">=f?0|f:f>="a"?f.charCodeAt(0)-97+10:f.charCodeAt(0)-65+10,o*=t,o+=u,s*=t,a++,s>1048575&&(r(67108863>=s),h||(h=new n(s)),this.mul(h).copy(this),this.iadd(new n(o)),o=0,s=1,a=0)}0!==a&&(this.mul(new n(s)).copy(this),this.iadd(new n(o)))},n.prototype.copy=function(e){e.words=new Array(this.length);for(var t=0;t<this.length;t++)e.words[t]=this.words[t];e.length=this.length,e.sign=this.sign,e.red=this.red},n.prototype.clone=function(){var e=new n(null);return this.copy(e),e},n.prototype.strip=function(){for(;this.length>1&&0===this.words[this.length-1];)this.length--;return this._normSign()},n.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.sign=!1),this},n.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var d=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],l=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],p=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];n.prototype.toString=function(e,t){if(e=e||10,16===e||"hex"===e){for(var i="",n=0,t=0|t||1,o=0,s=0;s<this.length;s++){var a=this.words[s],h=(16777215&(a<<n|o)).toString(16);o=a>>>24-n&16777215,i=0!==o||s!==this.length-1?d[6-h.length]+h+i:h+i,n+=2,n>=26&&(n-=26,s--)}for(0!==o&&(i=o.toString(16)+i);i.length%t!==0;)i="0"+i;return this.sign&&(i="-"+i),i}if(e===(0|e)&&e>=2&&36>=e){var c=l[e],u=p[e],i="",f=this.clone();for(f.sign=!1;0!==f.cmpn(0);){var b=f.modn(u).toString(e);f=f.idivn(u),i=0!==f.cmpn(0)?d[c-b.length]+b+i:b+i}return 0===this.cmpn(0)&&(i="0"+i),this.sign&&(i="-"+i),i}r(!1,"Base should be between 2 and 36")},n.prototype.toJSON=function(){return this.toString(16)},n.prototype.toArray=function(){this.strip();var e=new Array(this.byteLength());e[0]=0;for(var t=this.clone(),r=0;0!==t.cmpn(0);r++){var i=t.andln(255);t.ishrn(8),e[e.length-r-1]=i}return e},n.prototype._countBits=function(e){return e>=33554432?26:e>=16777216?25:e>=8388608?24:e>=4194304?23:e>=2097152?22:e>=1048576?21:e>=524288?20:e>=262144?19:e>=131072?18:e>=65536?17:e>=32768?16:e>=16384?15:e>=8192?14:e>=4096?13:e>=2048?12:e>=1024?11:e>=512?10:e>=256?9:e>=128?8:e>=64?7:e>=32?6:e>=16?5:e>=8?4:e>=4?3:e>=2?2:e>=1?1:0},n.prototype.bitLength=function(){var e=0,t=this.words[this.length-1],e=this._countBits(t);return 26*(this.length-1)+e},n.prototype.byteLength=function(){this.words[this.length-1];return Math.ceil(this.bitLength()/8)},n.prototype.neg=function(){if(0===this.cmpn(0))return this.clone();var e=this.clone();return e.sign=!this.sign,e},n.prototype.iadd=function(e){if(this.sign&&!e.sign){this.sign=!1;var t=this.isub(e);return this.sign=!this.sign,this._normSign()}if(!this.sign&&e.sign){e.sign=!1;var t=this.isub(e);return e.sign=!0,t._normSign()}var r,i;this.length>e.length?(r=this,i=e):(r=e,i=this);for(var n=0,o=0;o<i.length;o++){var t=r.words[o]+i.words[o]+n;this.words[o]=67108863&t,n=t>>>26}for(;0!==n&&o<r.length;o++){var t=r.words[o]+n;this.words[o]=67108863&t,n=t>>>26}if(this.length=r.length,0!==n)this.words[this.length]=n,this.length++;else if(r!==this)for(;o<r.length;o++)this.words[o]=r.words[o];return this},n.prototype.add=function(e){if(e.sign&&!this.sign){e.sign=!1;var t=this.sub(e);return e.sign=!0,t}if(!e.sign&&this.sign){this.sign=!1;var t=e.sub(this);return this.sign=!0,t}return this.length>e.length?this.clone().iadd(e):e.clone().iadd(this)},n.prototype.isub=function(e){if(e.sign){e.sign=!1;var t=this.iadd(e);return e.sign=!0,t._normSign()}if(this.sign)return this.sign=!1,this.iadd(e),this.sign=!0,this._normSign();var r=this.cmp(e);if(0===r)return this.sign=!1,this.length=1,this.words[0]=0,this;if(r>0)var i=this,n=e;else var i=e,n=this;for(var o=0,s=0;s<n.length;s++){var t=i.words[s]-n.words[s]-o;0>t?(t+=67108864,o=1):o=0,this.words[s]=t}for(;0!==o&&s<i.length;s++){var t=i.words[s]-o;0>t?(t+=67108864,o=1):o=0,this.words[s]=t}if(0===o&&s<i.length&&i!==this)for(;s<i.length;s++)this.words[s]=i.words[s];return this.length=Math.max(this.length,s),i!==this&&(this.sign=!0),this.strip()
},n.prototype.sub=function(e){return this.clone().isub(e)},n.prototype._smallMulTo=function(e,t){t.sign=e.sign!==this.sign,t.length=this.length+e.length;for(var r=0,i=0;i<t.length-1;i++){for(var n=r>>>26,o=67108863&r,s=Math.min(i,e.length-1),a=Math.max(0,i-this.length+1);s>=a;a++){var h=i-a,c=0|this.words[h],u=0|e.words[a],f=c*u,d=67108863&f;n=n+(f/67108864|0)|0,d=d+o|0,o=67108863&d,n=n+(d>>>26)|0}t.words[i]=o,r=n}return 0!==r?t.words[i]=r:t.length--,t.strip()},n.prototype._bigMulTo=function(e,t){t.sign=e.sign!==this.sign,t.length=this.length+e.length;for(var r=0,i=0,n=0;n<t.length-1;n++){var o=i;i=0;for(var s=67108863&r,a=Math.min(n,e.length-1),h=Math.max(0,n-this.length+1);a>=h;h++){var c=n-h,u=0|this.words[c],f=0|e.words[h],d=u*f,l=67108863&d;o=o+(d/67108864|0)|0,l=l+s|0,s=67108863&l,o=o+(l>>>26)|0,i+=o>>>26,o&=67108863}t.words[n]=s,r=o,o=i}return 0!==r?t.words[n]=r:t.length--,t.strip()},n.prototype.mulTo=function(e,t){var r;return r=this.length+e.length<63?this._smallMulTo(e,t):this._bigMulTo(e,t)},n.prototype.mul=function(e){var t=new n(null);return t.words=new Array(this.length+e.length),this.mulTo(e,t)},n.prototype.imul=function(e){if(0===this.cmpn(0)||0===e.cmpn(0))return this.words[0]=0,this.length=1,this;var t=this.length,r=e.length;this.sign=e.sign!==this.sign,this.length=this.length+e.length,this.words[this.length-1]=0;for(var i=this.length-2;i>=0;i--){for(var n=0,o=0,s=Math.min(i,r-1),a=Math.max(0,i-t+1);s>=a;a++){var h=i-a,c=this.words[h],u=e.words[a],f=c*u,d=67108863&f;n+=f/67108864|0,d+=o,o=67108863&d,n+=d>>>26}this.words[i]=o,this.words[i+1]+=n,n=0}for(var n=0,h=1;h<this.length;h++){var l=this.words[h]+n;this.words[h]=67108863&l,n=l>>>26}return this.strip()},n.prototype.sqr=function(){return this.mul(this)},n.prototype.isqr=function(){return this.mul(this)},n.prototype.ishln=function(e){r("number"==typeof e&&e>=0);{var t=e%26,i=(e-t)/26,n=67108863>>>26-t<<26-t;this.clone()}if(0!==t){for(var o=0,s=0;s<this.length;s++){var a=this.words[s]&n,h=this.words[s]-a<<t;this.words[s]=h|o,o=a>>>26-t}o&&(this.words[s]=o,this.length++)}if(0!==i){for(var s=this.length-1;s>=0;s--)this.words[s+i]=this.words[s];for(var s=0;i>s;s++)this.words[s]=0;this.length+=i}return this.strip()},n.prototype.ishrn=function(e,t,i){r("number"==typeof e&&e>=0),t=t?(t-t%26)/26:0;var n=e%26,o=Math.min((e-n)/26,this.length),s=67108863^67108863>>>n<<n,a=i;if(t-=o,t=Math.max(0,t),a){for(var h=0;o>h;h++)a.words[h]=this.words[h];a.length=o}if(0===o);else if(this.length>o){this.length-=o;for(var h=0;h<this.length;h++)this.words[h]=this.words[h+o]}else this.words[0]=0,this.length=1;for(var c=0,h=this.length-1;h>=0&&(0!==c||h>=t);h--){var u=this.words[h];this.words[h]=c<<26-n|u>>>n,c=u&s}return a&&0!==c&&(a.words[a.length++]=c),0===this.length&&(this.words[0]=0,this.length=1),this.strip(),i?{hi:this,lo:a}:this},n.prototype.shln=function(e){return this.clone().ishln(e)},n.prototype.shrn=function(e){return this.clone().ishrn(e)},n.prototype.testn=function(e){r("number"==typeof e&&e>=0);var t=e%26,i=(e-t)/26,n=1<<t;if(this.length<=i)return!1;var o=this.words[i];return!!(o&n)},n.prototype.imaskn=function(e){r("number"==typeof e&&e>=0);var t=e%26,i=(e-t)/26;if(r(!this.sign,"imaskn works only with positive numbers"),0!==t&&i++,this.length=Math.min(i,this.length),0!==t){var n=67108863^67108863>>>t<<t;this.words[this.length-1]&=n}return this.strip()},n.prototype.maskn=function(e){return this.clone().imaskn(e)},n.prototype.iaddn=function(e){if(r("number"==typeof e),0>e)return this.isubn(-e);if(this.sign)return 1===this.length&&this.words[0]<e?(this.words[0]=e-this.words[0],this.sign=!1,this):(this.sign=!1,this.isubn(e),this.sign=!0,this);this.words[0]+=e;for(var t=0;t<this.length&&this.words[t]>=67108864;t++)this.words[t]-=67108864,t===this.length-1?this.words[t+1]=1:this.words[t+1]++;return this.length=Math.max(this.length,t+1),this},n.prototype.isubn=function(e){if(r("number"==typeof e),0>e)return this.iaddn(-e);if(this.sign)return this.sign=!1,this.iaddn(e),this.sign=!0,this;this.words[0]-=e;for(var t=0;t<this.length&&this.words[t]<0;t++)this.words[t]+=67108864,this.words[t+1]-=1;return this.strip()},n.prototype.addn=function(e){return this.clone().iaddn(e)},n.prototype.subn=function(e){return this.clone().isubn(e)},n.prototype.iabs=function(){return this.sign=!1,this},n.prototype.abs=function(){return this.clone().iabs()},n.prototype._wordDiv=function(e,t){for(var r=this.length-e.length,i=this.clone(),o=e,s="mod"!==t&&new n(0);i.length>o.length;){var a=67108864*i.words[i.length-1]+i.words[i.length-2],h=a/o.words[o.length-1],c=h/67108864|0,u=67108863&h;h=new n(null),h.words=[u,c],h.length=2;var r=26*(i.length-o.length-1);if(s){var f=h.shln(r);i.sign?s.isub(f):s.iadd(f)}h=h.mul(o).ishln(r),i.sign?i.iadd(h):i.isub(h)}for(;i.ucmp(o)>=0;){var a=i.words[i.length-1],h=new n(a/o.words[o.length-1]|0),r=26*(i.length-o.length);if(s){var f=h.shln(r);i.sign?s.isub(f):s.iadd(f)}h=h.mul(o).ishln(r),i.sign?i.iadd(h):i.isub(h)}return i.sign&&(s&&s.isubn(1),i.iadd(o)),{div:s?s:null,mod:i}},n.prototype.divmod=function(e,t){if(r(0!==e.cmpn(0)),this.sign&&!e.sign){var i,o,s=this.neg().divmod(e,t);return"mod"!==t&&(i=s.div.neg()),"div"!==t&&(o=0===s.mod.cmpn(0)?s.mod:e.sub(s.mod)),{div:i,mod:o}}if(!this.sign&&e.sign){var i,s=this.divmod(e.neg(),t);return"mod"!==t&&(i=s.div.neg()),{div:i,mod:s.mod}}return this.sign&&e.sign?this.neg().divmod(e.neg(),t):e.length>this.length||this.cmp(e)<0?{div:new n(0),mod:this}:1===e.length?"div"===t?{div:this.divn(e.words[0]),mod:null}:"mod"===t?{div:null,mod:new n(this.modn(e.words[0]))}:{div:this.divn(e.words[0]),mod:new n(this.modn(e.words[0]))}:this._wordDiv(e,t)},n.prototype.div=function(e){return this.divmod(e,"div").div},n.prototype.mod=function(e){return this.divmod(e,"mod").mod},n.prototype.divRound=function(e){var t=this.divmod(e);if(0===t.mod.cmpn(0))return t.div;var r=t.div.sign?t.mod.isub(e):t.mod,i=e.shrn(1),n=e.andln(1),o=r.cmp(i);return 0>o||1===n&&0===o?t.div:t.div.sign?t.div.isubn(1):t.div.iaddn(1)},n.prototype.modn=function(e){r(67108863>=e);for(var t=(1<<26)%e,i=0,n=this.length-1;n>=0;n--)i=(t*i+this.words[n])%e;return i},n.prototype.idivn=function(e){r(67108863>=e);for(var t=0,i=this.length-1;i>=0;i--){var n=this.words[i]+67108864*t;this.words[i]=n/e|0,t=n%e}return this.strip()},n.prototype.divn=function(e){return this.clone().idivn(e)},n.prototype._egcd=function(e,t){r(!t.sign),r(0!==t.cmpn(0));var i=this,o=t.clone();i=i.sign?i.mod(t):i.clone();for(var s=new n(0);o.isEven();)o.ishrn(1);for(var a=o.clone();i.cmpn(1)>0&&o.cmpn(1)>0;){for(;i.isEven();)i.ishrn(1),e.isEven()?e.ishrn(1):e.iadd(a).ishrn(1);for(;o.isEven();)o.ishrn(1),s.isEven()?s.ishrn(1):s.iadd(a).ishrn(1);i.cmp(o)>=0?(i.isub(o),e.isub(s)):(o.isub(i),s.isub(e))}return 0===i.cmpn(1)?e:s},n.prototype.gcd=function(e){if(0===this.cmpn(0))return e.clone();if(0===e.cmpn(0))return this.clone();var t=this.clone(),r=e.clone();t.sign=!1,r.sign=!1;for(var i=0;t.isEven()&&r.isEven();i++)t.ishrn(1),r.ishrn(1);for(;t.isEven();)t.ishrn(1);do{for(;r.isEven();)r.ishrn(1);if(t.cmp(r)<0){var n=t;t=r,r=n}t.isub(t.div(r).mul(r))}while(0!==t.cmpn(0)&&0!==r.cmpn(0));return 0===t.cmpn(0)?r.ishln(i):t.ishln(i)},n.prototype.invm=function(e){return this._egcd(new n(1),e).mod(e)},n.prototype.isEven=function(){return 0===(1&this.words[0])},n.prototype.isOdd=function(){return 1===(1&this.words[0])},n.prototype.andln=function(e){return this.words[0]&e},n.prototype.bincn=function(e){r("number"==typeof e);var t=e%26,i=(e-t)/26,n=1<<t;if(this.length<=i){for(var o=this.length;i+1>o;o++)this.words[o]=0;return this.words[i]|=n,this.length=i+1,this}for(var s=n,o=i;0!==s&&o<this.length;o++){var a=this.words[o];a+=s,s=a>>>26,a&=67108863,this.words[o]=a}return 0!==s&&(this.words[o]=s,this.length++),this},n.prototype.cmpn=function(e){var t=0>e;if(t&&(e=-e),this.sign&&!t)return-1;if(!this.sign&&t)return 1;e&=67108863,this.strip();var r;if(this.length>1)r=1;else{var i=this.words[0];r=i===e?0:e>i?-1:1}return this.sign&&(r=-r),r},n.prototype.cmp=function(e){if(this.sign&&!e.sign)return-1;if(!this.sign&&e.sign)return 1;var t=this.ucmp(e);return this.sign?-t:t},n.prototype.ucmp=function(e){if(this.length>e.length)return 1;if(this.length<e.length)return-1;for(var t=0,r=this.length-1;r>=0;r--){var i=this.words[r],n=e.words[r];if(i!==n){n>i?t=-1:i>n&&(t=1);break}}return t},n.red=function(e){return new u(e)},n.prototype.toRed=function(e){return r(!this.red,"Already a number in reduction context"),r(!this.sign,"red works only with positives"),e.convertTo(this)._forceRed(e)},n.prototype.fromRed=function(){return r(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},n.prototype._forceRed=function(e){return this.red=e,this},n.prototype.forceRed=function(e){return r(!this.red,"Already a number in reduction context"),this._forceRed(e)},n.prototype.redAdd=function(e){return r(this.red,"redAdd works only with red numbers"),this.red.add(this,e)},n.prototype.redIAdd=function(e){return r(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,e)},n.prototype.redSub=function(e){return r(this.red,"redSub works only with red numbers"),this.red.sub(this,e)},n.prototype.redISub=function(e){return r(this.red,"redISub works only with red numbers"),this.red.isub(this,e)},n.prototype.redShl=function(e){return r(this.red,"redShl works only with red numbers"),this.red.shl(this,e)},n.prototype.redMul=function(e){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,e),this.red.mul(this,e)},n.prototype.redIMul=function(e){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,e),this.red.imul(this,e)},n.prototype.redSqr=function(){return r(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},n.prototype.redISqr=function(){return r(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},n.prototype.redSqrt=function(){return r(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},n.prototype.redInvm=function(){return r(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},n.prototype.redNeg=function(){return r(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},n.prototype.redPow=function(e){return r(this.red&&!e.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,e)};var b={k256:null,p224:null,p192:null,p25519:null};o.prototype._tmp=function(){var e=new n(null);return e.words=new Array(Math.ceil(this.n/13)),e},o.prototype.ireduce=function(e){var t,r=e;do{var i=r.ishrn(this.n,0,this.tmp);r=this.imulK(i.hi),r=r.iadd(i.lo),t=r.bitLength()}while(t>this.n);var n=t<this.n?-1:r.cmp(this.p);return 0===n?(r.words[0]=0,r.length=1):n>0?r.isub(this.p):r.strip(),r},o.prototype.imulK=function(e){return e.imul(this.k)},i(s,o),s.prototype.imulK=function(e){e.words[e.length]=0,e.words[e.length+1]=0,e.length+=2;for(var t=e.length-3;t>=0;t--){var r=e.words[t],i=64*r,n=977*r;i+=n/67108864|0;var o=i/67108864|0;i&=67108863,n&=67108863,e.words[t+2]+=o,e.words[t+1]+=i,e.words[t]=n}var r=e.words[e.length-2];return r>=67108864&&(e.words[e.length-1]+=r>>>26,e.words[e.length-2]=67108863&r),0===e.words[e.length-1]&&e.length--,0===e.words[e.length-1]&&e.length--,e},i(a,o),i(h,o),i(c,o),c.prototype.imulK=function(e){for(var t=0,r=0;r<e.length;r++){var i=19*e.words[r]+t,n=67108863&i;i>>>=26,e.words[r]=n,t=i}return 0!==t&&(e.words[e.length++]=t),e},n._prime=function e(t){if(b[t])return b[t];var e;if("k256"===t)e=new s;else if("p224"===t)e=new a;else if("p192"===t)e=new h;else{if("p25519"!==t)throw new Error("Unknown prime "+t);e=new c}return b[t]=e,e},u.prototype._verify1=function(e){r(!e.sign,"red works only with positives"),r(e.red,"red works only with red numbers")},u.prototype._verify2=function(e,t){r(!e.sign&&!t.sign,"red works only with positives"),r(e.red&&e.red===t.red,"red works only with red numbers")},u.prototype.imod=function(e){return this.prime?this.prime.ireduce(e)._forceRed(this):e.mod(this.m)._forceRed(this)},u.prototype.neg=function(e){var t=e.clone();return t.sign=!t.sign,t.iadd(this.m)._forceRed(this)},u.prototype.add=function(e,t){this._verify2(e,t);var r=e.add(t);return r.cmp(this.m)>=0&&r.isub(this.m),r._forceRed(this)},u.prototype.iadd=function(e,t){this._verify2(e,t);var r=e.iadd(t);return r.cmp(this.m)>=0&&r.isub(this.m),r},u.prototype.sub=function(e,t){this._verify2(e,t);var r=e.sub(t);return r.cmpn(0)<0&&r.iadd(this.m),r._forceRed(this)},u.prototype.isub=function(e,t){this._verify2(e,t);var r=e.isub(t);return r.cmpn(0)<0&&r.iadd(this.m),r},u.prototype.shl=function(e,t){return this._verify1(e),this.imod(e.shln(t))},u.prototype.imul=function(e,t){return this._verify2(e,t),this.imod(e.imul(t))},u.prototype.mul=function(e,t){return this._verify2(e,t),this.imod(e.mul(t))},u.prototype.isqr=function(e){return this.imul(e,e)},u.prototype.sqr=function(e){return this.mul(e,e)},u.prototype.sqrt=function(e){if(0===e.cmpn(0))return e.clone();var t=this.m.andln(3);if(r(t%2===1),3===t){var i=this.m.add(new n(1)).ishrn(2),o=this.pow(e,i);return o}for(var s=this.m.subn(1),a=0;0!==s.cmpn(0)&&0===s.andln(1);)a++,s.ishrn(1);r(0!==s.cmpn(0));var h=new n(1).toRed(this),c=h.redNeg(),u=this.m.subn(1).ishrn(1),f=this.m.bitLength();for(f=new n(2*f*f).toRed(this);0!==this.pow(f,u).cmp(c);)f.redIAdd(c);for(var d=this.pow(f,s),o=this.pow(e,s.addn(1).ishrn(1)),l=this.pow(e,s),p=a;0!==l.cmp(h);){for(var b=l,m=0;0!==b.cmp(h);m++)b=b.redSqr();r(p>m);var v=this.pow(d,new n(1).ishln(p-m-1));o=o.redMul(v),d=v.redSqr(),l=l.redMul(d),p=m}return o},u.prototype.invm=function(e){var t=e._egcd(new n(1),this.m);return t.sign?(t.sign=!1,this.imod(t).redNeg()):this.imod(t)},u.prototype.pow=function(e,t){for(var r=[],i=t.clone();0!==i.cmpn(0);)r.push(i.andln(1)),i.ishrn(1);for(var n=e,o=0;o<r.length&&0===r[o];o++,n=this.sqr(n));if(++o<r.length)for(var i=this.sqr(n);o<r.length;o++,i=this.sqr(i))0!==r[o]&&(n=this.mul(n,i));return n},u.prototype.convertTo=function(e){return e.clone()},u.prototype.convertFrom=function(e){var t=e.clone();return t.red=null,t},n.mont=function(e){return new f(e)},i(f,u),f.prototype.convertTo=function(e){return this.imod(e.shln(this.shift))},f.prototype.convertFrom=function(e){var t=this.imod(e.mul(this.rinv));return t.red=null,t},f.prototype.imul=function(e,t){if(0===e.cmpn(0)||0===t.cmpn(0))return e.words[0]=0,e.length=1,e;var r=e.imul(t),i=r.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),n=r.isub(i).ishrn(this.shift),o=n;return n.cmp(this.m)>=0?o=n.isub(this.m):n.cmpn(0)<0&&(o=n.iadd(this.m)),o._forceRed(this)},f.prototype.mul=function(e,t){if(0===e.cmpn(0)||0===t.cmpn(0))return new n(0)._forceRed(this);var r=e.mul(t),i=r.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),o=r.isub(i).ishrn(this.shift),s=o;return o.cmp(this.m)>=0?s=o.isub(this.m):o.cmpn(0)<0&&(s=o.iadd(this.m)),s._forceRed(this)},f.prototype.invm=function(e){var t=this.imod(e.invm(this.m).mul(this.r2));return t._forceRed(this)}},{}],89:[function(e,t,r){var i=r;i.version=e("../package.json").version,i.utils=e("./elliptic/utils"),i.rand=e("brorand"),i.hmacDRBG=e("./elliptic/hmac-drbg"),i.curve=e("./elliptic/curve"),i.curves=e("./elliptic/curves"),i.ec=e("./elliptic/ec")},{"../package.json":108,"./elliptic/curve":92,"./elliptic/curves":95,"./elliptic/ec":96,"./elliptic/hmac-drbg":99,"./elliptic/utils":100,brorand:101}],90:[function(e,t){function r(e,t){this.type=e,this.p=new o(t.p,16),this.red=t.prime?o.red(t.prime):o.mont(this.p),this.zero=new o(0).toRed(this.red),this.one=new o(1).toRed(this.red),this.two=new o(2).toRed(this.red),this.n=t.n&&new o(t.n,16),this.g=t.g&&this.pointFromJSON(t.g,t.gRed),this._wnafT1=new Array(4),this._wnafT2=new Array(4),this._wnafT3=new Array(4),this._wnafT4=new Array(4)}function i(e,t){this.curve=e,this.type=t,this.precomputed=null}var n=e("assert"),o=e("bn.js"),s=e("../../elliptic"),a=s.utils.getNAF,h=s.utils.getJSF;t.exports=r,r.prototype.point=function(){throw new Error("Not implemented")},r.prototype.validate=function(){throw new Error("Not implemented")},r.prototype._fixedNafMul=function(e,t){var r=e._getDoubles(),i=a(t,1),n=(1<<r.step+1)-(r.step%2===0?2:1);n/=3;for(var o=[],s=0;s<i.length;s+=r.step){for(var h=0,t=s+r.step-1;t>=s;t--)h=(h<<1)+i[t];o.push(h)}for(var c=this.jpoint(null,null,null),u=this.jpoint(null,null,null),f=n;f>0;f--){for(var s=0;s<o.length;s++){var h=o[s];h===f?u=u.mixedAdd(r.points[s]):h===-f&&(u=u.mixedAdd(r.points[s].neg()))}c=c.add(u)}return c.toP()},r.prototype._wnafMul=function(e,t){var r=4,i=e._getNAFPoints(r);r=i.wnd;for(var o=i.points,s=a(t,r),h=this.jpoint(null,null,null),c=s.length-1;c>=0;c--){for(var t=0;c>=0&&0===s[c];c--)t++;if(c>=0&&t++,h=h.dblp(t),0>c)break;var u=s[c];n(0!==u),h="affine"===e.type?h.mixedAdd(u>0?o[u-1>>1]:o[-u-1>>1].neg()):h.add(u>0?o[u-1>>1]:o[-u-1>>1].neg())}return"affine"===e.type?h.toP():h},r.prototype._wnafMulAdd=function(e,t,r,i){for(var n=this._wnafT1,o=this._wnafT2,s=this._wnafT3,c=0,u=0;i>u;u++){var f=t[u],d=f._getNAFPoints(e);n[u]=d.wnd,o[u]=d.points}for(var u=i-1;u>=1;u-=2){var l=u-1,p=u;if(1===n[l]&&1===n[p]){var b=[t[l],null,null,t[p]];0===t[l].y.cmp(t[p].y)?(b[1]=t[l].add(t[p]),b[2]=t[l].toJ().mixedAdd(t[p].neg())):0===t[l].y.cmp(t[p].y.redNeg())?(b[1]=t[l].toJ().mixedAdd(t[p]),b[2]=t[l].add(t[p].neg())):(b[1]=t[l].toJ().mixedAdd(t[p]),b[2]=t[l].toJ().mixedAdd(t[p].neg()));var m=[-3,-1,-5,-7,0,7,5,1,3],v=h(r[l],r[p]);c=Math.max(v[0].length,c),s[l]=new Array(c),s[p]=new Array(c);for(var g=0;c>g;g++){var y=0|v[0][g],w=0|v[1][g];s[l][g]=m[3*(y+1)+(w+1)],s[p][g]=0,o[l]=b}}else s[l]=a(r[l],n[l]),s[p]=a(r[p],n[p]),c=Math.max(s[l].length,c),c=Math.max(s[p].length,c)}for(var _=this.jpoint(null,null,null),x=this._wnafT4,u=c;u>=0;u--){for(var S=0;u>=0;){for(var T=!0,g=0;i>g;g++)x[g]=0|s[g][u],0!==x[g]&&(T=!1);if(!T)break;S++,u--}if(u>=0&&S++,_=_.dblp(S),0>u)break;for(var g=0;i>g;g++){var f,A=x[g];0!==A&&(A>0?f=o[g][A-1>>1]:0>A&&(f=o[g][-A-1>>1].neg()),_="affine"===f.type?_.mixedAdd(f):_.add(f))}}for(var u=0;i>u;u++)o[u]=null;return _.toP()},r.BasePoint=i,i.prototype.validate=function(){return this.curve.validate(this)},i.prototype.precompute=function(e){if(this.precomputed)return this;var t={doubles:null,naf:null,beta:null};return t.naf=this._getNAFPoints(8),t.doubles=this._getDoubles(4,e),t.beta=this._getBeta(),this.precomputed=t,this},i.prototype._getDoubles=function(e,t){if(this.precomputed&&this.precomputed.doubles)return this.precomputed.doubles;for(var r=[this],i=this,n=0;t>n;n+=e){for(var o=0;e>o;o++)i=i.dbl();r.push(i)}return{step:e,points:r}},i.prototype._getNAFPoints=function(e){if(this.precomputed&&this.precomputed.naf)return this.precomputed.naf;for(var t=[this],r=(1<<e)-1,i=1===r?null:this.dbl(),n=1;r>n;n++)t[n]=t[n-1].add(i);return{wnd:e,points:t}},i.prototype._getBeta=function(){return null},i.prototype.dblp=function(e){for(var t=this,r=0;e>r;r++)t=t.dbl();return t}},{"../../elliptic":89,assert:55,"bn.js":86}],91:[function(e,t){function r(e){this.twisted=1!=e.a,this.mOneA=this.twisted&&-1==e.a,this.extended=this.mOneA,c.call(this,"mont",e),this.a=new a(e.a,16).mod(this.red.m).toRed(this.red),this.c=new a(e.c,16).toRed(this.red),this.c2=this.c.redSqr(),this.d=new a(e.d,16).toRed(this.red),this.dd=this.d.redAdd(this.d),n(!this.twisted||0===this.c.fromRed().cmpn(1)),this.oneC=1==e.c}function i(e,t,r,i,n){c.BasePoint.call(this,e,"projective"),null===t&&null===r&&null===i?(this.x=this.curve.zero,this.y=this.curve.one,this.z=this.curve.one,this.t=this.curve.zero,this.zOne=!0):(this.x=new a(t,16),this.y=new a(r,16),this.z=i?new a(i,16):this.curve.one,this.t=n&&new a(n,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.t&&!this.t.red&&(this.t=this.t.toRed(this.curve.red)),this.zOne=this.z===this.curve.one,this.curve.extended&&!this.t&&(this.t=this.x.redMul(this.y),this.zOne||(this.t=this.t.redMul(this.z.redInvm()))))}{var n=e("assert"),o=e("../curve"),s=e("../../elliptic"),a=e("bn.js"),h=e("inherits"),c=o.base;s.utils.getNAF}h(r,c),t.exports=r,r.prototype._mulA=function(e){return this.mOneA?e.redNeg():this.a.redMul(e)},r.prototype._mulC=function(e){return this.oneC?e:this.c.redMul(e)},r.prototype.point=function(e,t,r,n){return new i(this,e,t,r,n)},r.prototype.jpoint=function(e,t,r,i){return this.point(e,t,r,i)},r.prototype.pointFromJSON=function(e){return i.fromJSON(this,e)},r.prototype.pointFromX=function(e,t){t=new a(t,16),t.red||(t=t.toRed(this.red));var r=t.redSqr(),i=this.c2.redSub(this.a.redMul(r)),n=this.one.redSub(this.c2.redMul(this.d).redMul(r)),s=i.redMul(n.redInvm()).redSqrt(),h=s.fromRed().isOdd();return(e&&!h||!e&&h)&&(s=s.redNeg()),this.point(t,s,o.one)},r.prototype.validate=function(e){if(e.isInfinity())return!0;e.normalize();var t=e.x.redSqr(),r=e.y.redSqr(),i=t.redMul(this.a).redAdd(r),n=this.c2.redMul(this.one.redAdd(this.d.redMul(t).redMul(r)));return 0===i.cmp(n)},h(i,c.BasePoint),i.fromJSON=function(e,t){return new i(e,t[0],t[1],t[2])},i.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"},i.prototype.isInfinity=function(){return 0===this.x.cmpn(0)&&0===this.y.cmp(this.z)},i.prototype._extDbl=function(){var e=this.x.redSqr(),t=this.y.redSqr(),r=this.z.redSqr();r=r.redIAdd(r);var i=this.curve._mulA(e),n=this.x.redAdd(this.y).redSqr().redISub(e).redISub(t),o=i.redAdd(t),s=o.redSub(r),a=i.redSub(t),h=n.redMul(s),c=o.redMul(a),u=n.redMul(a),f=s.redMul(o);return this.curve.point(h,c,f,u)},i.prototype._projDbl=function(){var e=this.x.redAdd(this.y).redSqr(),t=this.x.redSqr(),r=this.y.redSqr();if(this.curve.twisted){var i=this.curve._mulA(t),n=i.redAdd(r);if(this.zOne)var o=e.redSub(t).redSub(r).redMul(n.redSub(this.curve.two)),s=n.redMul(i.redSub(r)),a=n.redSqr().redSub(n).redSub(n);else var h=this.z.redSqr(),c=n.redSub(h).redISub(h),o=e.redSub(t).redISub(r).redMul(c),s=n.redMul(i.redSub(r)),a=n.redMul(c)}else var i=t.redAdd(r),h=this.curve._mulC(redMul(this.z)).redSqr(),c=i.redSub(h).redSub(h),o=this.curve._mulC(e.redISub(i)).redMul(c),s=this.curve._mulC(i).redMul(t.redISub(r)),a=i.redMul(c);return this.curve.point(o,s,a)},i.prototype.dbl=function(){return this.isInfinity()?this:this.curve.extended?this._extDbl():this._projDbl()},i.prototype._extAdd=function(e){var t=this.y.redSub(this.x).redMul(e.y.redSub(e.x)),r=this.y.redAdd(this.x).redMul(e.y.redAdd(e.x)),i=this.t.redMul(this.curve.dd).redMul(e.t),n=this.z.redMul(e.z.redAdd(e.z)),o=r.redSub(t),s=n.redSub(i),a=n.redAdd(i),h=r.redAdd(t),c=o.redMul(s),u=a.redMul(h),f=o.redMul(h),d=s.redMul(a);return this.curve.point(c,u,d,f)},i.prototype._projAdd=function(e){var t=this.z.redMul(e.z),r=t.redSqr(),i=this.x.redMul(e.x),n=this.y.redMul(e.y),o=this.curve.d.redMul(i).redMul(n),s=r.redSub(o),a=r.redAdd(o),h=this.x.redAdd(this.y).redMul(e.x.redAdd(e.y)).redISub(i).redISub(n),c=t.redMul(s).redMul(h);if(this.curve.twisted)var u=t.redMul(a).redMul(n.redSub(this.curve._mulA(i))),f=s.redMul(a);else var u=t.redMul(a).redMul(n.redSub(i)),f=this.curve._mulC(s).redMul(a);return this.curve.point(c,u,f)},i.prototype.add=function(e){return this.isInfinity()?e:e.isInfinity()?this:this.curve.extended?this._extAdd(e):this._projAdd(e)},i.prototype.mul=function(e){return this.precomputed&&this.precomputed.doubles?this.curve._fixedNafMul(this,e):this.curve._wnafMul(this,e)},i.prototype.mulAdd=function(e,t,r){return this.curve._wnafMulAdd(1,[this,t],[e,r],2)},i.prototype.normalize=function(){if(this.zOne)return this;var e=this.z.redInvm();return this.x=this.x.redMul(e),this.y=this.y.redMul(e),this.t&&(this.t=this.t.redMul(e)),this.z=this.curve.one,this.zOne=!0,this},i.prototype.neg=function(){return this.curve.point(this.x.redNeg(),this.y,this.z,this.t&&this.t.redNeg())},i.prototype.getX=function(){return this.normalize(),this.x.fromRed()},i.prototype.getY=function(){return this.normalize(),this.y.fromRed()},i.prototype.toP=i.prototype.normalize,i.prototype.mixedAdd=i.prototype.add},{"../../elliptic":89,"../curve":92,assert:55,"bn.js":86,inherits:200}],92:[function(e,t,r){var i=r;i.base=e("./base"),i.short=e("./short"),i.mont=e("./mont"),i.edwards=e("./edwards")},{"./base":90,"./edwards":91,"./mont":93,"./short":94}],93:[function(e,t){function r(e){h.call(this,"mont",e),this.a=new s(e.a,16).toRed(this.red),this.b=new s(e.b,16).toRed(this.red),this.i4=new s(4).toRed(this.red).redInvm(),this.two=new s(2).toRed(this.red),this.a24=this.i4.redMul(this.a.redAdd(this.two))}function i(e,t,r){h.BasePoint.call(this,e,"projective"),null===t&&null===r?(this.x=this.curve.one,this.z=this.curve.zero):(this.x=new s(t,16),this.z=new s(r,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)))}{var n=(e("assert"),e("../curve")),o=e("../../elliptic"),s=e("bn.js"),a=e("inherits"),h=n.base;o.utils.getNAF}a(r,h),t.exports=r,r.prototype.point=function(e,t){return new i(this,e,t)},r.prototype.pointFromJSON=function(e){return i.fromJSON(this,e)},r.prototype.validate=function(e){var t=e.normalize().x,r=t.redSqr(),i=r.redMul(t).redAdd(r.redMul(this.a)).redAdd(t),n=i.redSqrt();return 0===n.redSqr().cmp(i)},a(i,h.BasePoint),i.prototype.precompute=function(){},i.fromJSON=function(e,t){return new i(e,t[0],t[1]||e.one)},i.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"},i.prototype.isInfinity=function(){return 0===this.z.cmpn(0)},i.prototype.dbl=function(){var e=this.x.redAdd(this.z),t=e.redSqr(),r=this.x.redSub(this.z),i=r.redSqr(),n=t.redSub(i),o=t.redMul(i),s=n.redMul(i.redAdd(this.curve.a24.redMul(n)));return this.curve.point(o,s)},i.prototype.add=function(){throw new Error("Not supported on Montgomery curve")},i.prototype.diffAdd=function(e,t){var r=this.x.redAdd(this.z),i=this.x.redSub(this.z),n=e.x.redAdd(e.z),o=e.x.redSub(e.z),s=o.redMul(r),a=n.redMul(i),h=t.z.redMul(s.redAdd(a).redSqr()),c=t.x.redMul(s.redISub(a).redSqr());return this.curve.point(h,c)},i.prototype.mul=function(e){for(var t=e.clone(),r=this,i=this.curve.point(null,null),n=this,o=[];0!==t.cmpn(0);t.ishrn(1))o.push(t.andln(1));for(var s=o.length-1;s>=0;s--)0===o[s]?(r=r.diffAdd(i,n),i=i.dbl()):(i=r.diffAdd(i,n),r=r.dbl());return i},i.prototype.mulAdd=function(){throw new Error("Not supported on Montgomery curve")},i.prototype.normalize=function(){return this.x=this.x.redMul(this.z.redInvm()),this.z=this.curve.one,this},i.prototype.getX=function(){return this.normalize(),this.x.fromRed()}},{"../../elliptic":89,"../curve":92,assert:55,"bn.js":86,inherits:200}],94:[function(e,t){function r(e){u.call(this,"short",e),this.a=new h(e.a,16).toRed(this.red),this.b=new h(e.b,16).toRed(this.red),this.tinv=this.two.redInvm(),this.zeroA=0===this.a.fromRed().cmpn(0),this.threeA=0===this.a.fromRed().sub(this.p).cmpn(-3),this.endo=this._getEndomorphism(e),this._endoWnafT1=new Array(4),this._endoWnafT2=new Array(4)}function i(e,t,r,i){u.BasePoint.call(this,e,"affine"),null===t&&null===r?(this.x=null,this.y=null,this.inf=!0):(this.x=new h(t,16),this.y=new h(r,16),i&&(this.x.forceRed(this.curve.red),this.y.forceRed(this.curve.red)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.inf=!1)}function n(e,t,r,i){u.BasePoint.call(this,e,"jacobian"),null===t&&null===r&&null===i?(this.x=this.curve.one,this.y=this.curve.one,this.z=new h(0)):(this.x=new h(t,16),this.y=new h(r,16),this.z=new h(i,16)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.zOne=this.z===this.curve.one}{var o=e("assert"),s=e("../curve"),a=e("../../elliptic"),h=e("bn.js"),c=e("inherits"),u=s.base;a.utils.getNAF}c(r,u),t.exports=r,r.prototype._getEndomorphism=function(e){if(this.zeroA&&this.g&&this.n&&1===this.p.modn(3)){var t,r;if(e.beta)t=new h(e.beta,16).toRed(this.red);else{var i=this._getEndoRoots(this.p);t=i[0].cmp(i[1])<0?i[0]:i[1],t=t.toRed(this.red)}if(e.lambda)r=new h(e.lambda,16);else{var n=this._getEndoRoots(this.n);0===this.g.mul(n[0]).x.cmp(this.g.x.redMul(t))?r=n[0]:(r=n[1],o(0===this.g.mul(r).x.cmp(this.g.x.redMul(t))))}var s;return s=e.basis?e.basis.map(function(e){return{a:new h(e.a,16),b:new h(e.b,16)}}):this._getEndoBasis(r),{beta:t,lambda:r,basis:s}}},r.prototype._getEndoRoots=function(e){var t=e===this.p?this.red:h.mont(e),r=new h(2).toRed(t).redInvm(),i=r.redNeg(),n=(new h(1).toRed(t),new h(3).toRed(t).redNeg().redSqrt().redMul(r)),o=i.redAdd(n).fromRed(),s=i.redSub(n).fromRed();return[o,s]},r.prototype._getEndoBasis=function(e){for(var t,r,i,n,o,s,a,c=this.n.shrn(Math.floor(this.n.bitLength()/2)),u=e,f=this.n.clone(),d=new h(1),l=new h(0),p=new h(0),b=new h(1),m=0;0!==u.cmpn(0);){var v=f.div(u),g=f.sub(v.mul(u)),y=p.sub(v.mul(d)),w=b.sub(v.mul(l));if(!i&&g.cmp(c)<0)t=a.neg(),r=d,i=g.neg(),n=y;else if(i&&2===++m)break;a=g,f=u,u=g,p=d,d=y,b=l,l=w}o=g.neg(),s=y;var _=i.sqr().add(n.sqr()),x=o.sqr().add(s.sqr());return x.cmp(_)>=0&&(o=t,s=r),i.sign&&(i=i.neg(),n=n.neg()),o.sign&&(o=o.neg(),s=s.neg()),[{a:i,b:n},{a:o,b:s}]},r.prototype._endoSplit=function(e){var t=this.endo.basis,r=t[0],i=t[1],n=i.b.mul(e).divRound(this.n),o=r.b.neg().mul(e).divRound(this.n),s=n.mul(r.a),a=o.mul(i.a),h=n.mul(r.b),c=o.mul(i.b),u=e.sub(s).sub(a),f=h.add(c).neg();return{k1:u,k2:f}},r.prototype.point=function(e,t,r){return new i(this,e,t,r)},r.prototype.pointFromX=function(e,t){t=new h(t,16),t.red||(t=t.toRed(this.red));var r=t.redSqr().redMul(t).redIAdd(t.redMul(this.a)).redIAdd(this.b),i=r.redSqrt(),n=i.fromRed().isOdd();return(e&&!n||!e&&n)&&(i=i.redNeg()),this.point(t,i)},r.prototype.jpoint=function(e,t,r){return new n(this,e,t,r)},r.prototype.pointFromJSON=function(e,t){return i.fromJSON(this,e,t)},r.prototype.validate=function(e){if(e.inf)return!0;var t=e.x,r=e.y,i=this.a.redMul(t),n=t.redSqr().redMul(t).redIAdd(i).redIAdd(this.b);return 0===r.redSqr().redISub(n).cmpn(0)},r.prototype._endoWnafMulAdd=function(e,t){for(var r=this._endoWnafT1,i=this._endoWnafT2,n=0;n<e.length;n++){var o=this._endoSplit(t[n]),s=e[n],a=s._getBeta();o.k1.sign&&(o.k1.sign=!o.k1.sign,s=s.neg(!0)),o.k2.sign&&(o.k2.sign=!o.k2.sign,a=a.neg(!0)),r[2*n]=s,r[2*n+1]=a,i[2*n]=o.k1,i[2*n+1]=o.k2}for(var h=this._wnafMulAdd(1,r,i,2*n),c=0;2*n>c;c++)r[c]=null,i[c]=null;return h},c(i,u.BasePoint),i.prototype._getBeta=function(){function e(e){return i.point(e.x.redMul(i.endo.beta),e.y)}if(this.curve.endo){var t=this.precomputed;if(t&&t.beta)return t.beta;var r=this.curve.point(this.x.redMul(this.curve.endo.beta),this.y);if(t){var i=this.curve;t.beta=r,r.precomputed={beta:null,naf:t.naf&&{wnd:t.naf.wnd,points:t.naf.points.map(e)},doubles:t.doubles&&{step:t.doubles.step,points:t.doubles.points.map(e)}}}return r}},i.prototype.toJSON=function(){return this.precomputed?[this.x,this.y,this.precomputed&&{doubles:this.precomputed.doubles&&{step:this.precomputed.doubles.step,points:this.precomputed.doubles.points.slice(1)},naf:this.precomputed.naf&&{wnd:this.precomputed.naf.wnd,points:this.precomputed.naf.points.slice(1)}}]:[this.x,this.y]},i.fromJSON=function(e,t,r){function i(t){return e.point(t[0],t[1],r)}"string"==typeof t&&(t=JSON.parse(t));var n=e.point(t[0],t[1],r);if(!t[2])return n;var o=t[2];return n.precomputed={beta:null,doubles:o.doubles&&{step:o.doubles.step,points:[n].concat(o.doubles.points.map(i))},naf:o.naf&&{wnd:o.naf.wnd,points:[n].concat(o.naf.points.map(i))}},n},i.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+">"},i.prototype.isInfinity=function(){return this.inf},i.prototype.add=function(e){if(this.inf)return e;if(e.inf)return this;
if(this.eq(e))return this.dbl();if(this.neg().eq(e))return this.curve.point(null,null);if(0===this.x.cmp(e.x))return this.curve.point(null,null);var t=this.y.redSub(e.y);0!==t.cmpn(0)&&(t=t.redMul(this.x.redSub(e.x).redInvm()));var r=t.redSqr().redISub(this.x).redISub(e.x),i=t.redMul(this.x.redSub(r)).redISub(this.y);return this.curve.point(r,i)},i.prototype.dbl=function(){if(this.inf)return this;var e=this.y.redAdd(this.y);if(0===e.cmpn(0))return this.curve.point(null,null);var t=this.curve.a,r=this.x.redSqr(),i=e.redInvm(),n=r.redAdd(r).redIAdd(r).redIAdd(t).redMul(i),o=n.redSqr().redISub(this.x.redAdd(this.x)),s=n.redMul(this.x.redSub(o)).redISub(this.y);return this.curve.point(o,s)},i.prototype.getX=function(){return this.x.fromRed()},i.prototype.getY=function(){return this.y.fromRed()},i.prototype.mul=function(e){return e=new h(e,16),this.precomputed&&this.precomputed.doubles?this.curve._fixedNafMul(this,e):this.curve.endo?this.curve._endoWnafMulAdd([this],[e]):this.curve._wnafMul(this,e)},i.prototype.mulAdd=function(e,t,r){var i=[this,t],n=[e,r];return this.curve.endo?this.curve._endoWnafMulAdd(i,n):this.curve._wnafMulAdd(1,i,n,2)},i.prototype.eq=function(e){return this===e||this.inf===e.inf&&(this.inf||0===this.x.cmp(e.x)&&0===this.y.cmp(e.y))},i.prototype.neg=function(e){function t(e){return e.neg()}if(this.inf)return this;var r=this.curve.point(this.x,this.y.redNeg());if(e&&this.precomputed){var i=this.precomputed;r.precomputed={naf:i.naf&&{wnd:i.naf.wnd,points:i.naf.points.map(t)},doubles:i.doubles&&{step:i.doubles.step,points:i.doubles.points.map(t)}}}return r},i.prototype.toJ=function(){if(this.inf)return this.curve.jpoint(null,null,null);var e=this.curve.jpoint(this.x,this.y,this.curve.one);return e},c(n,u.BasePoint),n.prototype.toP=function(){if(this.isInfinity())return this.curve.point(null,null);var e=this.z.redInvm(),t=e.redSqr(),r=this.x.redMul(t),i=this.y.redMul(t).redMul(e);return this.curve.point(r,i)},n.prototype.neg=function(){return this.curve.jpoint(this.x,this.y.redNeg(),this.z)},n.prototype.add=function(e){if(this.isInfinity())return e;if(e.isInfinity())return this;var t=e.z.redSqr(),r=this.z.redSqr(),i=this.x.redMul(t),n=e.x.redMul(r),o=this.y.redMul(t.redMul(e.z)),s=e.y.redMul(r.redMul(this.z)),a=i.redSub(n),h=o.redSub(s);if(0===a.cmpn(0))return 0!==h.cmpn(0)?this.curve.jpoint(null,null,null):this.dbl();var c=a.redSqr(),u=c.redMul(a),f=i.redMul(c),d=h.redSqr().redIAdd(u).redISub(f).redISub(f),l=h.redMul(f.redISub(d)).redISub(o.redMul(u)),p=this.z.redMul(e.z).redMul(a);return this.curve.jpoint(d,l,p)},n.prototype.mixedAdd=function(e){if(this.isInfinity())return e.toJ();if(e.isInfinity())return this;var t=this.z.redSqr(),r=this.x,i=e.x.redMul(t),n=this.y,o=e.y.redMul(t).redMul(this.z),s=r.redSub(i),a=n.redSub(o);if(0===s.cmpn(0))return 0!==a.cmpn(0)?this.curve.jpoint(null,null,null):this.dbl();var h=s.redSqr(),c=h.redMul(s),u=r.redMul(h),f=a.redSqr().redIAdd(c).redISub(u).redISub(u),d=a.redMul(u.redISub(f)).redISub(n.redMul(c)),l=this.z.redMul(s);return this.curve.jpoint(f,d,l)},n.prototype.dblp=function(e){if(0===e)return this;if(this.isInfinity())return this;if(!e)return this.dbl();if(this.curve.zeroA||this.curve.threeA){for(var t=this,r=0;e>r;r++)t=t.dbl();return t}for(var i=this.curve.a,n=this.curve.tinv,o=this.x,s=this.y,a=this.z,h=a.redSqr().redSqr(),c=s.redAdd(s),r=0;e>r;r++){var u=o.redSqr(),f=c.redSqr(),d=f.redSqr(),l=u.redAdd(u).redIAdd(u).redIAdd(i.redMul(h)),p=o.redMul(f),b=l.redSqr().redISub(p.redAdd(p)),m=p.redISub(b),v=l.redMul(m);v=v.redIAdd(v).redISub(d);var g=c.redMul(a);e>r+1&&(h=h.redMul(d)),o=b,a=g,c=v}return this.curve.jpoint(o,c.redMul(n),a)},n.prototype.dbl=function(){return this.isInfinity()?this:this.curve.zeroA?this._zeroDbl():this.curve.threeA?this._threeDbl():this._dbl()},n.prototype._zeroDbl=function(){if(this.zOne){var e=this.x.redSqr(),t=this.y.redSqr(),r=t.redSqr(),i=this.x.redAdd(t).redSqr().redISub(e).redISub(r);i=i.redIAdd(i);var n=e.redAdd(e).redIAdd(e),o=n.redSqr().redISub(i).redISub(i),s=r.redIAdd(r);s=s.redIAdd(s),s=s.redIAdd(s);var a=o,h=n.redMul(i.redISub(o)).redISub(s),c=this.y.redAdd(this.y)}else{var u=this.x.redSqr(),f=this.y.redSqr(),d=f.redSqr(),l=this.x.redAdd(f).redSqr().redISub(u).redISub(d);l=l.redIAdd(l);var p=u.redAdd(u).redIAdd(u),b=p.redSqr(),m=d.redIAdd(d);m=m.redIAdd(m),m=m.redIAdd(m);var a=b.redISub(l).redISub(l),h=p.redMul(l.redISub(a)).redISub(m),c=this.y.redMul(this.z);c=c.redIAdd(c)}return this.curve.jpoint(a,h,c)},n.prototype._threeDbl=function(){if(this.zOne){var e=this.x.redSqr(),t=this.y.redSqr(),r=t.redSqr(),i=this.x.redAdd(t).redSqr().redISub(e).redISub(r);i=i.redIAdd(i);var n=e.redAdd(e).redIAdd(e).redIAdd(this.curve.a),o=n.redSqr().redISub(i).redISub(i),s=o,a=r.redIAdd(r);a=a.redIAdd(a),a=a.redIAdd(a);var h=n.redMul(i.redISub(o)).redISub(a),c=this.y.redAdd(this.y)}else{var u=this.z.redSqr(),f=this.y.redSqr(),d=this.x.redMul(f),l=this.x.redSub(u).redMul(this.x.redAdd(u));l=l.redAdd(l).redIAdd(l);var p=d.redIAdd(d);p=p.redIAdd(p);var b=p.redAdd(p),s=l.redSqr().redISub(b),c=this.y.redAdd(this.z).redSqr().redISub(f).redISub(u),m=f.redSqr();m=m.redIAdd(m),m=m.redIAdd(m),m=m.redIAdd(m);var h=l.redMul(p.redISub(s)).redISub(m)}return this.curve.jpoint(s,h,c)},n.prototype._dbl=function(){var e=this.curve.a,t=(this.curve.tinv,this.x),r=this.y,i=this.z,n=i.redSqr().redSqr(),o=t.redSqr(),s=r.redSqr(),a=o.redAdd(o).redIAdd(o).redIAdd(e.redMul(n)),h=t.redAdd(t);h=h.redIAdd(h);var c=h.redMul(s),u=a.redSqr().redISub(c.redAdd(c)),f=c.redISub(u),d=s.redSqr();d=d.redIAdd(d),d=d.redIAdd(d),d=d.redIAdd(d);var l=a.redMul(f).redISub(d),p=r.redAdd(r).redMul(i);return this.curve.jpoint(u,l,p)},n.prototype.trpl=function(){if(!this.curve.zeroA)return this.dbl().add(this);var e=this.x.redSqr(),t=this.y.redSqr(),r=this.z.redSqr(),i=t.redSqr(),n=e.redAdd(e).redIAdd(e),o=n.redSqr(),s=this.x.redAdd(t).redSqr().redISub(e).redISub(i);s=s.redIAdd(s),s=s.redAdd(s).redIAdd(s),s=s.redISub(o);var a=s.redSqr(),h=i.redIAdd(i);h=h.redIAdd(h),h=h.redIAdd(h),h=h.redIAdd(h);var c=n.redIAdd(s).redSqr().redISub(o).redISub(a).redISub(h),u=t.redMul(c);u=u.redIAdd(u),u=u.redIAdd(u);var f=this.x.redMul(a).redISub(u);f=f.redIAdd(f),f=f.redIAdd(f);var d=this.y.redMul(c.redMul(h.redISub(c)).redISub(s.redMul(a)));d=d.redIAdd(d),d=d.redIAdd(d),d=d.redIAdd(d);var l=this.z.redAdd(s).redSqr().redISub(r).redISub(a);return this.curve.jpoint(f,d,l)},n.prototype.mul=function(e,t){return e=new h(e,t),this.curve._wnafMul(this,e)},n.prototype.eq=function(e){if("affine"===e.type)return this.eq(e.toJ());if(this===e)return!0;var t=this.z.redSqr(),r=e.z.redSqr();if(0!==this.x.redMul(r).redISub(e.x.redMul(t)).cmpn(0))return!1;var i=t.redMul(this.z),n=r.redMul(e.z);return 0===this.y.redMul(n).redISub(e.y.redMul(i)).cmpn(0)},n.prototype.inspect=function(){return this.isInfinity()?"<EC JPoint Infinity>":"<EC JPoint x: "+this.x.toString(16,2)+" y: "+this.y.toString(16,2)+" z: "+this.z.toString(16,2)+">"},n.prototype.isInfinity=function(){return 0===this.z.cmpn(0)}},{"../../elliptic":89,"../curve":92,assert:55,"bn.js":86,inherits:200}],95:[function(e,t,r){function i(e){this.curve="short"===e.type?new h.curve.short(e):"edwards"===e.type?new h.curve.edwards(e):new h.curve.mont(e),this.g=this.curve.g,this.n=this.curve.n,this.hash=e.hash,s(this.g.validate(),"Invalid curve"),s(this.g.mul(this.n).isInfinity(),"Invalid curve, G*N != O")}function n(e,t){Object.defineProperty(o,e,{configurable:!0,enumerable:!0,get:function(){var r=new i(t);return Object.defineProperty(o,e,{configurable:!0,enumerable:!0,value:r}),r}})}var o=r,s=e("assert"),a=e("hash.js"),h=(e("bn.js"),e("../elliptic"));o.PresetCurve=i,n("p192",{type:"short",prime:"p192",p:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff",a:"ffffffff ffffffff ffffffff fffffffe ffffffff fffffffc",b:"64210519 e59c80e7 0fa7e9ab 72243049 feb8deec c146b9b1",n:"ffffffff ffffffff ffffffff 99def836 146bc9b1 b4d22831",hash:a.sha256,gRed:!1,g:["188da80e b03090f6 7cbf20eb 43a18800 f4ff0afd 82ff1012","07192b95 ffc8da78 631011ed 6b24cdd5 73f977a1 1e794811"]}),n("p224",{type:"short",prime:"p224",p:"ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001",a:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff fffffffe",b:"b4050a85 0c04b3ab f5413256 5044b0b7 d7bfd8ba 270b3943 2355ffb4",n:"ffffffff ffffffff ffffffff ffff16a2 e0b8f03e 13dd2945 5c5c2a3d",hash:a.sha256,gRed:!1,g:["b70e0cbd 6bb4bf7f 321390b9 4a03c1d3 56c21122 343280d6 115c1d21","bd376388 b5f723fb 4c22dfe6 cd4375a0 5a074764 44d58199 85007e34"]}),n("p256",{type:"short",prime:null,p:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff ffffffff",a:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff fffffffc",b:"5ac635d8 aa3a93e7 b3ebbd55 769886bc 651d06b0 cc53b0f6 3bce3c3e 27d2604b",n:"ffffffff 00000000 ffffffff ffffffff bce6faad a7179e84 f3b9cac2 fc632551",hash:a.sha256,gRed:!1,g:["6b17d1f2 e12c4247 f8bce6e5 63a440f2 77037d81 2deb33a0 f4a13945 d898c296","4fe342e2 fe1a7f9b 8ee7eb4a 7c0f9e16 2bce3357 6b315ece cbb64068 37bf51f5"]}),n("curve25519",{type:"mont",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"76d06",b:"0",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:a.sha256,gRed:!1,g:["9"]}),n("ed25519",{type:"edwards",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"-1",c:"1",d:"52036cee2b6ffe73 8cc740797779e898 00700a4d4141d8ab 75eb4dca135978a3",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:a.sha256,gRed:!1,g:["216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a","6666666666666666666666666666666666666666666666666666666666666658"]}),n("secp256k1",{type:"short",prime:"k256",p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f",a:"0",b:"7",n:"ffffffff ffffffff ffffffff fffffffe baaedce6 af48a03b bfd25e8c d0364141",h:"1",hash:a.sha256,beta:"7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee",lambda:"5363ad4cc05c30e0a5261c028812645a122e22ea20816678df02967c1b23bd72",basis:[{a:"3086d221a7d46bcde86c90e49284eb15",b:"-e4437ed6010e88286f547fa90abfe4c3"},{a:"114ca50f7a8e2f3f657c1108d9d44cfd8",b:"3086d221a7d46bcde86c90e49284eb15"}],gRed:!1,g:["79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798","483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8",{doubles:{step:4,points:[["e60fce93b59e9ec53011aabc21c23e97b2a31369b87a5ae9c44ee89e2a6dec0a","f7e3507399e595929db99f34f57937101296891e44d23f0be1f32cce69616821"],["8282263212c609d9ea2a6e3e172de238d8c39cabd5ac1ca10646e23fd5f51508","11f8a8098557dfe45e8256e830b60ace62d613ac2f7b17bed31b6eaff6e26caf"],["175e159f728b865a72f99cc6c6fc846de0b93833fd2222ed73fce5b551e5b739","d3506e0d9e3c79eba4ef97a51ff71f5eacb5955add24345c6efa6ffee9fed695"],["363d90d447b00c9c99ceac05b6262ee053441c7e55552ffe526bad8f83ff4640","4e273adfc732221953b445397f3363145b9a89008199ecb62003c7f3bee9de9"],["8b4b5f165df3c2be8c6244b5b745638843e4a781a15bcd1b69f79a55dffdf80c","4aad0a6f68d308b4b3fbd7813ab0da04f9e336546162ee56b3eff0c65fd4fd36"],["723cbaa6e5db996d6bf771c00bd548c7b700dbffa6c0e77bcb6115925232fcda","96e867b5595cc498a921137488824d6e2660a0653779494801dc069d9eb39f5f"],["eebfa4d493bebf98ba5feec812c2d3b50947961237a919839a533eca0e7dd7fa","5d9a8ca3970ef0f269ee7edaf178089d9ae4cdc3a711f712ddfd4fdae1de8999"],["100f44da696e71672791d0a09b7bde459f1215a29b3c03bfefd7835b39a48db0","cdd9e13192a00b772ec8f3300c090666b7ff4a18ff5195ac0fbd5cd62bc65a09"],["e1031be262c7ed1b1dc9227a4a04c017a77f8d4464f3b3852c8acde6e534fd2d","9d7061928940405e6bb6a4176597535af292dd419e1ced79a44f18f29456a00d"],["feea6cae46d55b530ac2839f143bd7ec5cf8b266a41d6af52d5e688d9094696d","e57c6b6c97dce1bab06e4e12bf3ecd5c981c8957cc41442d3155debf18090088"],["da67a91d91049cdcb367be4be6ffca3cfeed657d808583de33fa978bc1ec6cb1","9bacaa35481642bc41f463f7ec9780e5dec7adc508f740a17e9ea8e27a68be1d"],["53904faa0b334cdda6e000935ef22151ec08d0f7bb11069f57545ccc1a37b7c0","5bc087d0bc80106d88c9eccac20d3c1c13999981e14434699dcb096b022771c8"],["8e7bcd0bd35983a7719cca7764ca906779b53a043a9b8bcaeff959f43ad86047","10b7770b2a3da4b3940310420ca9514579e88e2e47fd68b3ea10047e8460372a"],["385eed34c1cdff21e6d0818689b81bde71a7f4f18397e6690a841e1599c43862","283bebc3e8ea23f56701de19e9ebf4576b304eec2086dc8cc0458fe5542e5453"],["6f9d9b803ecf191637c73a4413dfa180fddf84a5947fbc9c606ed86c3fac3a7","7c80c68e603059ba69b8e2a30e45c4d47ea4dd2f5c281002d86890603a842160"],["3322d401243c4e2582a2147c104d6ecbf774d163db0f5e5313b7e0e742d0e6bd","56e70797e9664ef5bfb019bc4ddaf9b72805f63ea2873af624f3a2e96c28b2a0"],["85672c7d2de0b7da2bd1770d89665868741b3f9af7643397721d74d28134ab83","7c481b9b5b43b2eb6374049bfa62c2e5e77f17fcc5298f44c8e3094f790313a6"],["948bf809b1988a46b06c9f1919413b10f9226c60f668832ffd959af60c82a0a","53a562856dcb6646dc6b74c5d1c3418c6d4dff08c97cd2bed4cb7f88d8c8e589"],["6260ce7f461801c34f067ce0f02873a8f1b0e44dfc69752accecd819f38fd8e8","bc2da82b6fa5b571a7f09049776a1ef7ecd292238051c198c1a84e95b2b4ae17"],["e5037de0afc1d8d43d8348414bbf4103043ec8f575bfdc432953cc8d2037fa2d","4571534baa94d3b5f9f98d09fb990bddbd5f5b03ec481f10e0e5dc841d755bda"],["e06372b0f4a207adf5ea905e8f1771b4e7e8dbd1c6a6c5b725866a0ae4fce725","7a908974bce18cfe12a27bb2ad5a488cd7484a7787104870b27034f94eee31dd"],["213c7a715cd5d45358d0bbf9dc0ce02204b10bdde2a3f58540ad6908d0559754","4b6dad0b5ae462507013ad06245ba190bb4850f5f36a7eeddff2c27534b458f2"],["4e7c272a7af4b34e8dbb9352a5419a87e2838c70adc62cddf0cc3a3b08fbd53c","17749c766c9d0b18e16fd09f6def681b530b9614bff7dd33e0b3941817dcaae6"],["fea74e3dbe778b1b10f238ad61686aa5c76e3db2be43057632427e2840fb27b6","6e0568db9b0b13297cf674deccb6af93126b596b973f7b77701d3db7f23cb96f"],["76e64113f677cf0e10a2570d599968d31544e179b760432952c02a4417bdde39","c90ddf8dee4e95cf577066d70681f0d35e2a33d2b56d2032b4b1752d1901ac01"],["c738c56b03b2abe1e8281baa743f8f9a8f7cc643df26cbee3ab150242bcbb891","893fb578951ad2537f718f2eacbfbbbb82314eef7880cfe917e735d9699a84c3"],["d895626548b65b81e264c7637c972877d1d72e5f3a925014372e9f6588f6c14b","febfaa38f2bc7eae728ec60818c340eb03428d632bb067e179363ed75d7d991f"],["b8da94032a957518eb0f6433571e8761ceffc73693e84edd49150a564f676e03","2804dfa44805a1e4d7c99cc9762808b092cc584d95ff3b511488e4e74efdf6e7"],["e80fea14441fb33a7d8adab9475d7fab2019effb5156a792f1a11778e3c0df5d","eed1de7f638e00771e89768ca3ca94472d155e80af322ea9fcb4291b6ac9ec78"],["a301697bdfcd704313ba48e51d567543f2a182031efd6915ddc07bbcc4e16070","7370f91cfb67e4f5081809fa25d40f9b1735dbf7c0a11a130c0d1a041e177ea1"],["90ad85b389d6b936463f9d0512678de208cc330b11307fffab7ac63e3fb04ed4","e507a3620a38261affdcbd9427222b839aefabe1582894d991d4d48cb6ef150"],["8f68b9d2f63b5f339239c1ad981f162ee88c5678723ea3351b7b444c9ec4c0da","662a9f2dba063986de1d90c2b6be215dbbea2cfe95510bfdf23cbf79501fff82"],["e4f3fb0176af85d65ff99ff9198c36091f48e86503681e3e6686fd5053231e11","1e63633ad0ef4f1c1661a6d0ea02b7286cc7e74ec951d1c9822c38576feb73bc"],["8c00fa9b18ebf331eb961537a45a4266c7034f2f0d4e1d0716fb6eae20eae29e","efa47267fea521a1a9dc343a3736c974c2fadafa81e36c54e7d2a4c66702414b"],["e7a26ce69dd4829f3e10cec0a9e98ed3143d084f308b92c0997fddfc60cb3e41","2a758e300fa7984b471b006a1aafbb18d0a6b2c0420e83e20e8a9421cf2cfd51"],["b6459e0ee3662ec8d23540c223bcbdc571cbcb967d79424f3cf29eb3de6b80ef","67c876d06f3e06de1dadf16e5661db3c4b3ae6d48e35b2ff30bf0b61a71ba45"],["d68a80c8280bb840793234aa118f06231d6f1fc67e73c5a5deda0f5b496943e8","db8ba9fff4b586d00c4b1f9177b0e28b5b0e7b8f7845295a294c84266b133120"],["324aed7df65c804252dc0270907a30b09612aeb973449cea4095980fc28d3d5d","648a365774b61f2ff130c0c35aec1f4f19213b0c7e332843967224af96ab7c84"],["4df9c14919cde61f6d51dfdbe5fee5dceec4143ba8d1ca888e8bd373fd054c96","35ec51092d8728050974c23a1d85d4b5d506cdc288490192ebac06cad10d5d"],["9c3919a84a474870faed8a9c1cc66021523489054d7f0308cbfc99c8ac1f98cd","ddb84f0f4a4ddd57584f044bf260e641905326f76c64c8e6be7e5e03d4fc599d"],["6057170b1dd12fdf8de05f281d8e06bb91e1493a8b91d4cc5a21382120a959e5","9a1af0b26a6a4807add9a2daf71df262465152bc3ee24c65e899be932385a2a8"],["a576df8e23a08411421439a4518da31880cef0fba7d4df12b1a6973eecb94266","40a6bf20e76640b2c92b97afe58cd82c432e10a7f514d9f3ee8be11ae1b28ec8"],["7778a78c28dec3e30a05fe9629de8c38bb30d1f5cf9a3a208f763889be58ad71","34626d9ab5a5b22ff7098e12f2ff580087b38411ff24ac563b513fc1fd9f43ac"],["928955ee637a84463729fd30e7afd2ed5f96274e5ad7e5cb09eda9c06d903ac","c25621003d3f42a827b78a13093a95eeac3d26efa8a8d83fc5180e935bcd091f"],["85d0fef3ec6db109399064f3a0e3b2855645b4a907ad354527aae75163d82751","1f03648413a38c0be29d496e582cf5663e8751e96877331582c237a24eb1f962"],["ff2b0dce97eece97c1c9b6041798b85dfdfb6d8882da20308f5404824526087e","493d13fef524ba188af4c4dc54d07936c7b7ed6fb90e2ceb2c951e01f0c29907"],["827fbbe4b1e880ea9ed2b2e6301b212b57f1ee148cd6dd28780e5e2cf856e241","c60f9c923c727b0b71bef2c67d1d12687ff7a63186903166d605b68baec293ec"],["eaa649f21f51bdbae7be4ae34ce6e5217a58fdce7f47f9aa7f3b58fa2120e2b3","be3279ed5bbbb03ac69a80f89879aa5a01a6b965f13f7e59d47a5305ba5ad93d"],["e4a42d43c5cf169d9391df6decf42ee541b6d8f0c9a137401e23632dda34d24f","4d9f92e716d1c73526fc99ccfb8ad34ce886eedfa8d8e4f13a7f7131deba9414"],["1ec80fef360cbdd954160fadab352b6b92b53576a88fea4947173b9d4300bf19","aeefe93756b5340d2f3a4958a7abbf5e0146e77f6295a07b671cdc1cc107cefd"],["146a778c04670c2f91b00af4680dfa8bce3490717d58ba889ddb5928366642be","b318e0ec3354028add669827f9d4b2870aaa971d2f7e5ed1d0b297483d83efd0"],["fa50c0f61d22e5f07e3acebb1aa07b128d0012209a28b9776d76a8793180eef9","6b84c6922397eba9b72cd2872281a68a5e683293a57a213b38cd8d7d3f4f2811"],["da1d61d0ca721a11b1a5bf6b7d88e8421a288ab5d5bba5220e53d32b5f067ec2","8157f55a7c99306c79c0766161c91e2966a73899d279b48a655fba0f1ad836f1"],["a8e282ff0c9706907215ff98e8fd416615311de0446f1e062a73b0610d064e13","7f97355b8db81c09abfb7f3c5b2515888b679a3e50dd6bd6cef7c73111f4cc0c"],["174a53b9c9a285872d39e56e6913cab15d59b1fa512508c022f382de8319497c","ccc9dc37abfc9c1657b4155f2c47f9e6646b3a1d8cb9854383da13ac079afa73"],["959396981943785c3d3e57edf5018cdbe039e730e4918b3d884fdff09475b7ba","2e7e552888c331dd8ba0386a4b9cd6849c653f64c8709385e9b8abf87524f2fd"],["d2a63a50ae401e56d645a1153b109a8fcca0a43d561fba2dbb51340c9d82b151","e82d86fb6443fcb7565aee58b2948220a70f750af484ca52d4142174dcf89405"],["64587e2335471eb890ee7896d7cfdc866bacbdbd3839317b3436f9b45617e073","d99fcdd5bf6902e2ae96dd6447c299a185b90a39133aeab358299e5e9faf6589"],["8481bde0e4e4d885b3a546d3e549de042f0aa6cea250e7fd358d6c86dd45e458","38ee7b8cba5404dd84a25bf39cecb2ca900a79c42b262e556d64b1b59779057e"],["13464a57a78102aa62b6979ae817f4637ffcfed3c4b1ce30bcd6303f6caf666b","69be159004614580ef7e433453ccb0ca48f300a81d0942e13f495a907f6ecc27"],["bc4a9df5b713fe2e9aef430bcc1dc97a0cd9ccede2f28588cada3a0d2d83f366","d3a81ca6e785c06383937adf4b798caa6e8a9fbfa547b16d758d666581f33c1"],["8c28a97bf8298bc0d23d8c749452a32e694b65e30a9472a3954ab30fe5324caa","40a30463a3305193378fedf31f7cc0eb7ae784f0451cb9459e71dc73cbef9482"],["8ea9666139527a8c1dd94ce4f071fd23c8b350c5a4bb33748c4ba111faccae0","620efabbc8ee2782e24e7c0cfb95c5d735b783be9cf0f8e955af34a30e62b945"],["dd3625faef5ba06074669716bbd3788d89bdde815959968092f76cc4eb9a9787","7a188fa3520e30d461da2501045731ca941461982883395937f68d00c644a573"],["f710d79d9eb962297e4f6232b40e8f7feb2bc63814614d692c12de752408221e","ea98e67232d3b3295d3b535532115ccac8612c721851617526ae47a9c77bfc82"]]},naf:{wnd:7,points:[["f9308a019258c31049344f85f89d5229b531c845836f99b08601f113bce036f9","388f7b0f632de8140fe337e62a37f3566500a99934c2231b6cb9fd7584b8e672"],["2f8bde4d1a07209355b4a7250a5c5128e88b84bddc619ab7cba8d569b240efe4","d8ac222636e5e3d6d4dba9dda6c9c426f788271bab0d6840dca87d3aa6ac62d6"],["5cbdf0646e5db4eaa398f365f2ea7a0e3d419b7e0330e39ce92bddedcac4f9bc","6aebca40ba255960a3178d6d861a54dba813d0b813fde7b5a5082628087264da"],["acd484e2f0c7f65309ad178a9f559abde09796974c57e714c35f110dfc27ccbe","cc338921b0a7d9fd64380971763b61e9add888a4375f8e0f05cc262ac64f9c37"],["774ae7f858a9411e5ef4246b70c65aac5649980be5c17891bbec17895da008cb","d984a032eb6b5e190243dd56d7b7b365372db1e2dff9d6a8301d74c9c953c61b"],["f28773c2d975288bc7d1d205c3748651b075fbc6610e58cddeeddf8f19405aa8","ab0902e8d880a89758212eb65cdaf473a1a06da521fa91f29b5cb52db03ed81"],["d7924d4f7d43ea965a465ae3095ff41131e5946f3c85f79e44adbcf8e27e080e","581e2872a86c72a683842ec228cc6defea40af2bd896d3a5c504dc9ff6a26b58"],["defdea4cdb677750a420fee807eacf21eb9898ae79b9768766e4faa04a2d4a34","4211ab0694635168e997b0ead2a93daeced1f4a04a95c0f6cfb199f69e56eb77"],["2b4ea0a797a443d293ef5cff444f4979f06acfebd7e86d277475656138385b6c","85e89bc037945d93b343083b5a1c86131a01f60c50269763b570c854e5c09b7a"],["352bbf4a4cdd12564f93fa332ce333301d9ad40271f8107181340aef25be59d5","321eb4075348f534d59c18259dda3e1f4a1b3b2e71b1039c67bd3d8bcf81998c"],["2fa2104d6b38d11b0230010559879124e42ab8dfeff5ff29dc9cdadd4ecacc3f","2de1068295dd865b64569335bd5dd80181d70ecfc882648423ba76b532b7d67"],["9248279b09b4d68dab21a9b066edda83263c3d84e09572e269ca0cd7f5453714","73016f7bf234aade5d1aa71bdea2b1ff3fc0de2a887912ffe54a32ce97cb3402"],["daed4f2be3a8bf278e70132fb0beb7522f570e144bf615c07e996d443dee8729","a69dce4a7d6c98e8d4a1aca87ef8d7003f83c230f3afa726ab40e52290be1c55"],["c44d12c7065d812e8acf28d7cbb19f9011ecd9e9fdf281b0e6a3b5e87d22e7db","2119a460ce326cdc76c45926c982fdac0e106e861edf61c5a039063f0e0e6482"],["6a245bf6dc698504c89a20cfded60853152b695336c28063b61c65cbd269e6b4","e022cf42c2bd4a708b3f5126f16a24ad8b33ba48d0423b6efd5e6348100d8a82"],["1697ffa6fd9de627c077e3d2fe541084ce13300b0bec1146f95ae57f0d0bd6a5","b9c398f186806f5d27561506e4557433a2cf15009e498ae7adee9d63d01b2396"],["605bdb019981718b986d0f07e834cb0d9deb8360ffb7f61df982345ef27a7479","2972d2de4f8d20681a78d93ec96fe23c26bfae84fb14db43b01e1e9056b8c49"],["62d14dab4150bf497402fdc45a215e10dcb01c354959b10cfe31c7e9d87ff33d","80fc06bd8cc5b01098088a1950eed0db01aa132967ab472235f5642483b25eaf"],["80c60ad0040f27dade5b4b06c408e56b2c50e9f56b9b8b425e555c2f86308b6f","1c38303f1cc5c30f26e66bad7fe72f70a65eed4cbe7024eb1aa01f56430bd57a"],["7a9375ad6167ad54aa74c6348cc54d344cc5dc9487d847049d5eabb0fa03c8fb","d0e3fa9eca8726909559e0d79269046bdc59ea10c70ce2b02d499ec224dc7f7"],["d528ecd9b696b54c907a9ed045447a79bb408ec39b68df504bb51f459bc3ffc9","eecf41253136e5f99966f21881fd656ebc4345405c520dbc063465b521409933"],["49370a4b5f43412ea25f514e8ecdad05266115e4a7ecb1387231808f8b45963","758f3f41afd6ed428b3081b0512fd62a54c3f3afbb5b6764b653052a12949c9a"],["77f230936ee88cbbd73df930d64702ef881d811e0e1498e2f1c13eb1fc345d74","958ef42a7886b6400a08266e9ba1b37896c95330d97077cbbe8eb3c7671c60d6"],["f2dac991cc4ce4b9ea44887e5c7c0bce58c80074ab9d4dbaeb28531b7739f530","e0dedc9b3b2f8dad4da1f32dec2531df9eb5fbeb0598e4fd1a117dba703a3c37"],["463b3d9f662621fb1b4be8fbbe2520125a216cdfc9dae3debcba4850c690d45b","5ed430d78c296c3543114306dd8622d7c622e27c970a1de31cb377b01af7307e"],["f16f804244e46e2a09232d4aff3b59976b98fac14328a2d1a32496b49998f247","cedabd9b82203f7e13d206fcdf4e33d92a6c53c26e5cce26d6579962c4e31df6"],["caf754272dc84563b0352b7a14311af55d245315ace27c65369e15f7151d41d1","cb474660ef35f5f2a41b643fa5e460575f4fa9b7962232a5c32f908318a04476"],["2600ca4b282cb986f85d0f1709979d8b44a09c07cb86d7c124497bc86f082120","4119b88753c15bd6a693b03fcddbb45d5ac6be74ab5f0ef44b0be9475a7e4b40"],["7635ca72d7e8432c338ec53cd12220bc01c48685e24f7dc8c602a7746998e435","91b649609489d613d1d5e590f78e6d74ecfc061d57048bad9e76f302c5b9c61"],["754e3239f325570cdbbf4a87deee8a66b7f2b33479d468fbc1a50743bf56cc18","673fb86e5bda30fb3cd0ed304ea49a023ee33d0197a695d0c5d98093c536683"],["e3e6bd1071a1e96aff57859c82d570f0330800661d1c952f9fe2694691d9b9e8","59c9e0bba394e76f40c0aa58379a3cb6a5a2283993e90c4167002af4920e37f5"],["186b483d056a033826ae73d88f732985c4ccb1f32ba35f4b4cc47fdcf04aa6eb","3b952d32c67cf77e2e17446e204180ab21fb8090895138b4a4a797f86e80888b"],["df9d70a6b9876ce544c98561f4be4f725442e6d2b737d9c91a8321724ce0963f","55eb2dafd84d6ccd5f862b785dc39d4ab157222720ef9da217b8c45cf2ba2417"],["5edd5cc23c51e87a497ca815d5dce0f8ab52554f849ed8995de64c5f34ce7143","efae9c8dbc14130661e8cec030c89ad0c13c66c0d17a2905cdc706ab7399a868"],["290798c2b6476830da12fe02287e9e777aa3fba1c355b17a722d362f84614fba","e38da76dcd440621988d00bcf79af25d5b29c094db2a23146d003afd41943e7a"],["af3c423a95d9f5b3054754efa150ac39cd29552fe360257362dfdecef4053b45","f98a3fd831eb2b749a93b0e6f35cfb40c8cd5aa667a15581bc2feded498fd9c6"],["766dbb24d134e745cccaa28c99bf274906bb66b26dcf98df8d2fed50d884249a","744b1152eacbe5e38dcc887980da38b897584a65fa06cedd2c924f97cbac5996"],["59dbf46f8c94759ba21277c33784f41645f7b44f6c596a58ce92e666191abe3e","c534ad44175fbc300f4ea6ce648309a042ce739a7919798cd85e216c4a307f6e"],["f13ada95103c4537305e691e74e9a4a8dd647e711a95e73cb62dc6018cfd87b8","e13817b44ee14de663bf4bc808341f326949e21a6a75c2570778419bdaf5733d"],["7754b4fa0e8aced06d4167a2c59cca4cda1869c06ebadfb6488550015a88522c","30e93e864e669d82224b967c3020b8fa8d1e4e350b6cbcc537a48b57841163a2"],["948dcadf5990e048aa3874d46abef9d701858f95de8041d2a6828c99e2262519","e491a42537f6e597d5d28a3224b1bc25df9154efbd2ef1d2cbba2cae5347d57e"],["7962414450c76c1689c7b48f8202ec37fb224cf5ac0bfa1570328a8a3d7c77ab","100b610ec4ffb4760d5c1fc133ef6f6b12507a051f04ac5760afa5b29db83437"],["3514087834964b54b15b160644d915485a16977225b8847bb0dd085137ec47ca","ef0afbb2056205448e1652c48e8127fc6039e77c15c2378b7e7d15a0de293311"],["d3cc30ad6b483e4bc79ce2c9dd8bc54993e947eb8df787b442943d3f7b527eaf","8b378a22d827278d89c5e9be8f9508ae3c2ad46290358630afb34db04eede0a4"],["1624d84780732860ce1c78fcbfefe08b2b29823db913f6493975ba0ff4847610","68651cf9b6da903e0914448c6cd9d4ca896878f5282be4c8cc06e2a404078575"],["733ce80da955a8a26902c95633e62a985192474b5af207da6df7b4fd5fc61cd4","f5435a2bd2badf7d485a4d8b8db9fcce3e1ef8e0201e4578c54673bc1dc5ea1d"],["15d9441254945064cf1a1c33bbd3b49f8966c5092171e699ef258dfab81c045c","d56eb30b69463e7234f5137b73b84177434800bacebfc685fc37bbe9efe4070d"],["a1d0fcf2ec9de675b612136e5ce70d271c21417c9d2b8aaaac138599d0717940","edd77f50bcb5a3cab2e90737309667f2641462a54070f3d519212d39c197a629"],["e22fbe15c0af8ccc5780c0735f84dbe9a790badee8245c06c7ca37331cb36980","a855babad5cd60c88b430a69f53a1a7a38289154964799be43d06d77d31da06"],["311091dd9860e8e20ee13473c1155f5f69635e394704eaa74009452246cfa9b3","66db656f87d1f04fffd1f04788c06830871ec5a64feee685bd80f0b1286d8374"],["34c1fd04d301be89b31c0442d3e6ac24883928b45a9340781867d4232ec2dbdf","9414685e97b1b5954bd46f730174136d57f1ceeb487443dc5321857ba73abee"],["f219ea5d6b54701c1c14de5b557eb42a8d13f3abbcd08affcc2a5e6b049b8d63","4cb95957e83d40b0f73af4544cccf6b1f4b08d3c07b27fb8d8c2962a400766d1"],["d7b8740f74a8fbaab1f683db8f45de26543a5490bca627087236912469a0b448","fa77968128d9c92ee1010f337ad4717eff15db5ed3c049b3411e0315eaa4593b"],["32d31c222f8f6f0ef86f7c98d3a3335ead5bcd32abdd94289fe4d3091aa824bf","5f3032f5892156e39ccd3d7915b9e1da2e6dac9e6f26e961118d14b8462e1661"],["7461f371914ab32671045a155d9831ea8793d77cd59592c4340f86cbc18347b5","8ec0ba238b96bec0cbdddcae0aa442542eee1ff50c986ea6b39847b3cc092ff6"],["ee079adb1df1860074356a25aa38206a6d716b2c3e67453d287698bad7b2b2d6","8dc2412aafe3be5c4c5f37e0ecc5f9f6a446989af04c4e25ebaac479ec1c8c1e"],["16ec93e447ec83f0467b18302ee620f7e65de331874c9dc72bfd8616ba9da6b5","5e4631150e62fb40d0e8c2a7ca5804a39d58186a50e497139626778e25b0674d"],["eaa5f980c245f6f038978290afa70b6bd8855897f98b6aa485b96065d537bd99","f65f5d3e292c2e0819a528391c994624d784869d7e6ea67fb18041024edc07dc"],["78c9407544ac132692ee1910a02439958ae04877151342ea96c4b6b35a49f51","f3e0319169eb9b85d5404795539a5e68fa1fbd583c064d2462b675f194a3ddb4"],["494f4be219a1a77016dcd838431aea0001cdc8ae7a6fc688726578d9702857a5","42242a969283a5f339ba7f075e36ba2af925ce30d767ed6e55f4b031880d562c"],["a598a8030da6d86c6bc7f2f5144ea549d28211ea58faa70ebf4c1e665c1fe9b5","204b5d6f84822c307e4b4a7140737aec23fc63b65b35f86a10026dbd2d864e6b"],["c41916365abb2b5d09192f5f2dbeafec208f020f12570a184dbadc3e58595997","4f14351d0087efa49d245b328984989d5caf9450f34bfc0ed16e96b58fa9913"],["841d6063a586fa475a724604da03bc5b92a2e0d2e0a36acfe4c73a5514742881","73867f59c0659e81904f9a1c7543698e62562d6744c169ce7a36de01a8d6154"],["5e95bb399a6971d376026947f89bde2f282b33810928be4ded112ac4d70e20d5","39f23f366809085beebfc71181313775a99c9aed7d8ba38b161384c746012865"],["36e4641a53948fd476c39f8a99fd974e5ec07564b5315d8bf99471bca0ef2f66","d2424b1b1abe4eb8164227b085c9aa9456ea13493fd563e06fd51cf5694c78fc"],["336581ea7bfbbb290c191a2f507a41cf5643842170e914faeab27c2c579f726","ead12168595fe1be99252129b6e56b3391f7ab1410cd1e0ef3dcdcabd2fda224"],["8ab89816dadfd6b6a1f2634fcf00ec8403781025ed6890c4849742706bd43ede","6fdcef09f2f6d0a044e654aef624136f503d459c3e89845858a47a9129cdd24e"],["1e33f1a746c9c5778133344d9299fcaa20b0938e8acff2544bb40284b8c5fb94","60660257dd11b3aa9c8ed618d24edff2306d320f1d03010e33a7d2057f3b3b6"],["85b7c1dcb3cec1b7ee7f30ded79dd20a0ed1f4cc18cbcfcfa410361fd8f08f31","3d98a9cdd026dd43f39048f25a8847f4fcafad1895d7a633c6fed3c35e999511"],["29df9fbd8d9e46509275f4b125d6d45d7fbe9a3b878a7af872a2800661ac5f51","b4c4fe99c775a606e2d8862179139ffda61dc861c019e55cd2876eb2a27d84b"],["a0b1cae06b0a847a3fea6e671aaf8adfdfe58ca2f768105c8082b2e449fce252","ae434102edde0958ec4b19d917a6a28e6b72da1834aff0e650f049503a296cf2"],["4e8ceafb9b3e9a136dc7ff67e840295b499dfb3b2133e4ba113f2e4c0e121e5","cf2174118c8b6d7a4b48f6d534ce5c79422c086a63460502b827ce62a326683c"],["d24a44e047e19b6f5afb81c7ca2f69080a5076689a010919f42725c2b789a33b","6fb8d5591b466f8fc63db50f1c0f1c69013f996887b8244d2cdec417afea8fa3"],["ea01606a7a6c9cdd249fdfcfacb99584001edd28abbab77b5104e98e8e3b35d4","322af4908c7312b0cfbfe369f7a7b3cdb7d4494bc2823700cfd652188a3ea98d"],["af8addbf2b661c8a6c6328655eb96651252007d8c5ea31be4ad196de8ce2131f","6749e67c029b85f52a034eafd096836b2520818680e26ac8f3dfbcdb71749700"],["e3ae1974566ca06cc516d47e0fb165a674a3dabcfca15e722f0e3450f45889","2aeabe7e4531510116217f07bf4d07300de97e4874f81f533420a72eeb0bd6a4"],["591ee355313d99721cf6993ffed1e3e301993ff3ed258802075ea8ced397e246","b0ea558a113c30bea60fc4775460c7901ff0b053d25ca2bdeee98f1a4be5d196"],["11396d55fda54c49f19aa97318d8da61fa8584e47b084945077cf03255b52984","998c74a8cd45ac01289d5833a7beb4744ff536b01b257be4c5767bea93ea57a4"],["3c5d2a1ba39c5a1790000738c9e0c40b8dcdfd5468754b6405540157e017aa7a","b2284279995a34e2f9d4de7396fc18b80f9b8b9fdd270f6661f79ca4c81bd257"],["cc8704b8a60a0defa3a99a7299f2e9c3fbc395afb04ac078425ef8a1793cc030","bdd46039feed17881d1e0862db347f8cf395b74fc4bcdc4e940b74e3ac1f1b13"],["c533e4f7ea8555aacd9777ac5cad29b97dd4defccc53ee7ea204119b2889b197","6f0a256bc5efdf429a2fb6242f1a43a2d9b925bb4a4b3a26bb8e0f45eb596096"],["c14f8f2ccb27d6f109f6d08d03cc96a69ba8c34eec07bbcf566d48e33da6593","c359d6923bb398f7fd4473e16fe1c28475b740dd098075e6c0e8649113dc3a38"],["a6cbc3046bc6a450bac24789fa17115a4c9739ed75f8f21ce441f72e0b90e6ef","21ae7f4680e889bb130619e2c0f95a360ceb573c70603139862afd617fa9b9f"],["347d6d9a02c48927ebfb86c1359b1caf130a3c0267d11ce6344b39f99d43cc38","60ea7f61a353524d1c987f6ecec92f086d565ab687870cb12689ff1e31c74448"],["da6545d2181db8d983f7dcb375ef5866d47c67b1bf31c8cf855ef7437b72656a","49b96715ab6878a79e78f07ce5680c5d6673051b4935bd897fea824b77dc208a"],["c40747cc9d012cb1a13b8148309c6de7ec25d6945d657146b9d5994b8feb1111","5ca560753be2a12fc6de6caf2cb489565db936156b9514e1bb5e83037e0fa2d4"],["4e42c8ec82c99798ccf3a610be870e78338c7f713348bd34c8203ef4037f3502","7571d74ee5e0fb92a7a8b33a07783341a5492144cc54bcc40a94473693606437"],["3775ab7089bc6af823aba2e1af70b236d251cadb0c86743287522a1b3b0dedea","be52d107bcfa09d8bcb9736a828cfa7fac8db17bf7a76a2c42ad961409018cf7"],["cee31cbf7e34ec379d94fb814d3d775ad954595d1314ba8846959e3e82f74e26","8fd64a14c06b589c26b947ae2bcf6bfa0149ef0be14ed4d80f448a01c43b1c6d"],["b4f9eaea09b6917619f6ea6a4eb5464efddb58fd45b1ebefcdc1a01d08b47986","39e5c9925b5a54b07433a4f18c61726f8bb131c012ca542eb24a8ac07200682a"],["d4263dfc3d2df923a0179a48966d30ce84e2515afc3dccc1b77907792ebcc60e","62dfaf07a0f78feb30e30d6295853ce189e127760ad6cf7fae164e122a208d54"],["48457524820fa65a4f8d35eb6930857c0032acc0a4a2de422233eeda897612c4","25a748ab367979d98733c38a1fa1c2e7dc6cc07db2d60a9ae7a76aaa49bd0f77"],["dfeeef1881101f2cb11644f3a2afdfc2045e19919152923f367a1767c11cceda","ecfb7056cf1de042f9420bab396793c0c390bde74b4bbdff16a83ae09a9a7517"],["6d7ef6b17543f8373c573f44e1f389835d89bcbc6062ced36c82df83b8fae859","cd450ec335438986dfefa10c57fea9bcc521a0959b2d80bbf74b190dca712d10"],["e75605d59102a5a2684500d3b991f2e3f3c88b93225547035af25af66e04541f","f5c54754a8f71ee540b9b48728473e314f729ac5308b06938360990e2bfad125"],["eb98660f4c4dfaa06a2be453d5020bc99a0c2e60abe388457dd43fefb1ed620c","6cb9a8876d9cb8520609af3add26cd20a0a7cd8a9411131ce85f44100099223e"],["13e87b027d8514d35939f2e6892b19922154596941888336dc3563e3b8dba942","fef5a3c68059a6dec5d624114bf1e91aac2b9da568d6abeb2570d55646b8adf1"],["ee163026e9fd6fe017c38f06a5be6fc125424b371ce2708e7bf4491691e5764a","1acb250f255dd61c43d94ccc670d0f58f49ae3fa15b96623e5430da0ad6c62b2"],["b268f5ef9ad51e4d78de3a750c2dc89b1e626d43505867999932e5db33af3d80","5f310d4b3c99b9ebb19f77d41c1dee018cf0d34fd4191614003e945a1216e423"],["ff07f3118a9df035e9fad85eb6c7bfe42b02f01ca99ceea3bf7ffdba93c4750d","438136d603e858a3a5c440c38eccbaddc1d2942114e2eddd4740d098ced1f0d8"],["8d8b9855c7c052a34146fd20ffb658bea4b9f69e0d825ebec16e8c3ce2b526a1","cdb559eedc2d79f926baf44fb84ea4d44bcf50fee51d7ceb30e2e7f463036758"],["52db0b5384dfbf05bfa9d472d7ae26dfe4b851ceca91b1eba54263180da32b63","c3b997d050ee5d423ebaf66a6db9f57b3180c902875679de924b69d84a7b375"],["e62f9490d3d51da6395efd24e80919cc7d0f29c3f3fa48c6fff543becbd43352","6d89ad7ba4876b0b22c2ca280c682862f342c8591f1daf5170e07bfd9ccafa7d"],["7f30ea2476b399b4957509c88f77d0191afa2ff5cb7b14fd6d8e7d65aaab1193","ca5ef7d4b231c94c3b15389a5f6311e9daff7bb67b103e9880ef4bff637acaec"],["5098ff1e1d9f14fb46a210fada6c903fef0fb7b4a1dd1d9ac60a0361800b7a00","9731141d81fc8f8084d37c6e7542006b3ee1b40d60dfe5362a5b132fd17ddc0"],["32b78c7de9ee512a72895be6b9cbefa6e2f3c4ccce445c96b9f2c81e2778ad58","ee1849f513df71e32efc3896ee28260c73bb80547ae2275ba497237794c8753c"],["e2cb74fddc8e9fbcd076eef2a7c72b0ce37d50f08269dfc074b581550547a4f7","d3aa2ed71c9dd2247a62df062736eb0baddea9e36122d2be8641abcb005cc4a4"],["8438447566d4d7bedadc299496ab357426009a35f235cb141be0d99cd10ae3a8","c4e1020916980a4da5d01ac5e6ad330734ef0d7906631c4f2390426b2edd791f"],["4162d488b89402039b584c6fc6c308870587d9c46f660b878ab65c82c711d67e","67163e903236289f776f22c25fb8a3afc1732f2b84b4e95dbda47ae5a0852649"],["3fad3fa84caf0f34f0f89bfd2dcf54fc175d767aec3e50684f3ba4a4bf5f683d","cd1bc7cb6cc407bb2f0ca647c718a730cf71872e7d0d2a53fa20efcdfe61826"],["674f2600a3007a00568c1a7ce05d0816c1fb84bf1370798f1c69532faeb1a86b","299d21f9413f33b3edf43b257004580b70db57da0b182259e09eecc69e0d38a5"],["d32f4da54ade74abb81b815ad1fb3b263d82d6c692714bcff87d29bd5ee9f08f","f9429e738b8e53b968e99016c059707782e14f4535359d582fc416910b3eea87"],["30e4e670435385556e593657135845d36fbb6931f72b08cb1ed954f1e3ce3ff6","462f9bce619898638499350113bbc9b10a878d35da70740dc695a559eb88db7b"],["be2062003c51cc3004682904330e4dee7f3dcd10b01e580bf1971b04d4cad297","62188bc49d61e5428573d48a74e1c655b1c61090905682a0d5558ed72dccb9bc"],["93144423ace3451ed29e0fb9ac2af211cb6e84a601df5993c419859fff5df04a","7c10dfb164c3425f5c71a3f9d7992038f1065224f72bb9d1d902a6d13037b47c"],["b015f8044f5fcbdcf21ca26d6c34fb8197829205c7b7d2a7cb66418c157b112c","ab8c1e086d04e813744a655b2df8d5f83b3cdc6faa3088c1d3aea1454e3a1d5f"],["d5e9e1da649d97d89e4868117a465a3a4f8a18de57a140d36b3f2af341a21b52","4cb04437f391ed73111a13cc1d4dd0db1693465c2240480d8955e8592f27447a"],["d3ae41047dd7ca065dbf8ed77b992439983005cd72e16d6f996a5316d36966bb","bd1aeb21ad22ebb22a10f0303417c6d964f8cdd7df0aca614b10dc14d125ac46"],["463e2763d885f958fc66cdd22800f0a487197d0a82e377b49f80af87c897b065","bfefacdb0e5d0fd7df3a311a94de062b26b80c61fbc97508b79992671ef7ca7f"],["7985fdfd127c0567c6f53ec1bb63ec3158e597c40bfe747c83cddfc910641917","603c12daf3d9862ef2b25fe1de289aed24ed291e0ec6708703a5bd567f32ed03"],["74a1ad6b5f76e39db2dd249410eac7f99e74c59cb83d2d0ed5ff1543da7703e9","cc6157ef18c9c63cd6193d83631bbea0093e0968942e8c33d5737fd790e0db08"],["30682a50703375f602d416664ba19b7fc9bab42c72747463a71d0896b22f6da3","553e04f6b018b4fa6c8f39e7f311d3176290d0e0f19ca73f17714d9977a22ff8"],["9e2158f0d7c0d5f26c3791efefa79597654e7a2b2464f52b1ee6c1347769ef57","712fcdd1b9053f09003a3481fa7762e9ffd7c8ef35a38509e2fbf2629008373"],["176e26989a43c9cfeba4029c202538c28172e566e3c4fce7322857f3be327d66","ed8cc9d04b29eb877d270b4878dc43c19aefd31f4eee09ee7b47834c1fa4b1c3"],["75d46efea3771e6e68abb89a13ad747ecf1892393dfc4f1b7004788c50374da8","9852390a99507679fd0b86fd2b39a868d7efc22151346e1a3ca4726586a6bed8"],["809a20c67d64900ffb698c4c825f6d5f2310fb0451c869345b7319f645605721","9e994980d9917e22b76b061927fa04143d096ccc54963e6a5ebfa5f3f8e286c1"],["1b38903a43f7f114ed4500b4eac7083fdefece1cf29c63528d563446f972c180","4036edc931a60ae889353f77fd53de4a2708b26b6f5da72ad3394119daf408f9"]]}}]})
},{"../elliptic":89,assert:55,"bn.js":86,"hash.js":102}],96:[function(e,t){function r(e){return this instanceof r?("string"==typeof e&&(i(o.curves.hasOwnProperty(e),"Unknown curve "+e),e=o.curves[e]),e instanceof o.curves.PresetCurve&&(e={curve:e}),this.curve=e.curve.curve,this.n=this.curve.n,this.nh=this.n.shrn(1),this.g=this.curve.g,this.g=e.curve.g,this.g.precompute(e.curve.n.bitLength()+1),void(this.hash=e.hash||e.curve.hash)):new r(e)}var i=e("assert"),n=e("bn.js"),o=e("../../elliptic"),s=(o.utils,e("./key")),a=e("./signature");t.exports=r,r.prototype.keyPair=function(e,t){return new s(this,e,t)},r.prototype.genKeyPair=function(e){e||(e={});for(var t=new o.hmacDRBG({hash:this.hash,pers:e.pers,entropy:e.entropy||o.rand(this.hash.hmacStrength),nonce:this.n.toArray()}),r=this.n.byteLength(),i=this.n.sub(new n(2));;){var s=new n(t.generate(r));if(!(s.cmp(i)>0))return s.iaddn(1),this.keyPair(s)}},r.prototype._truncateToN=function(e,t){var r=8*e.byteLength()-this.n.bitLength();return r>0&&(e=e.shrn(r)),!t&&e.cmp(this.n)>=0?e.sub(this.n):e},r.prototype.sign=function(e,t,r){t=this.keyPair(t,"hex"),e=this._truncateToN(new n(e,16)),r||(r={});for(var i=this.n.byteLength(),s=t.getPrivate().toArray(),h=s.length;21>h;h++)s.unshift(0);for(var c=e.toArray(),h=c.length;i>h;h++)c.unshift(0);for(var u=new o.hmacDRBG({hash:this.hash,entropy:s,nonce:c}),f=this.n.sub(new n(1));;){var d=new n(u.generate(this.n.byteLength()));if(d=this._truncateToN(d,!0),!(d.cmpn(1)<=0||d.cmp(f)>=0)){var l=this.g.mul(d);if(!l.isInfinity()){var p=l.getX().mod(this.n);if(0!==p.cmpn(0)){var b=d.invm(this.n).mul(p.mul(t.getPrivate()).iadd(e)).mod(this.n);if(0!==b.cmpn(0))return r.canonical&&b.cmp(this.nh)>0&&(b=this.n.sub(b)),new a(p,b)}}}}},r.prototype.verify=function(e,t,r){e=this._truncateToN(new n(e,16)),r=this.keyPair(r,"hex"),t=new a(t,"hex");var i=t.r,o=t.s;if(i.cmpn(1)<0||i.cmp(this.n)>=0)return!1;if(o.cmpn(1)<0||o.cmp(this.n)>=0)return!1;var s=o.invm(this.n),h=s.mul(e).mod(this.n),c=s.mul(i).mod(this.n),u=this.g.mulAdd(h,r.getPublic(),c);return u.isInfinity()?!1:0===u.getX().mod(this.n).cmp(i)}},{"../../elliptic":89,"./key":97,"./signature":98,assert:55,"bn.js":86}],97:[function(e,t){function r(e,t,i){return t instanceof r?t:i instanceof r?i:(t||(t=i,i=null),null!==t&&"object"==typeof t&&(t.x?(i=t,t=null):(t.priv||t.pub)&&(i=t.pub,t=t.priv)),this.ec=e,this.priv=null,this.pub=null,void(this._importPublicHex(t,i)||("hex"===i&&(i=null),t&&this._importPrivate(t),i&&this._importPublic(i))))}var i=(e("assert"),e("bn.js")),n=e("../../elliptic"),o=n.utils;t.exports=r,r.prototype.validate=function(){var e=this.getPublic();return e.isInfinity()?{result:!1,reason:"Invalid public key"}:e.validate()?e.mul(this.ec.curve.n).isInfinity()?{result:!0,reason:null}:{result:!1,reason:"Public key * N != O"}:{result:!1,reason:"Public key is not a point"}},r.prototype.getPublic=function(e,t){if(this.pub||(this.pub=this.ec.g.mul(this.priv)),"string"==typeof e&&(t=e,e=null),!t)return this.pub;for(var r=this.ec.curve.p.byteLength(),i=this.pub.getX().toArray(),n=i.length;r>n;n++)i.unshift(0);if(e)var s=[this.pub.getY().isEven()?2:3].concat(i);else{for(var a=this.pub.getY().toArray(),n=a.length;r>n;n++)a.unshift(0);var s=[4].concat(i,a)}return o.encode(s,t)},r.prototype.getPrivate=function(e){return"hex"===e?this.priv.toString(16,2):this.priv},r.prototype._importPrivate=function(e){this.priv=new i(e,16),this.priv=this.priv.mod(this.ec.curve.n)},r.prototype._importPublic=function(e){this.pub=this.ec.curve.point(e.x,e.y)},r.prototype._importPublicHex=function(e,t){e=o.toArray(e,t);var r=this.ec.curve.p.byteLength();if(4===e[0]&&e.length-1===2*r)this.pub=this.ec.curve.point(e.slice(1,1+r),e.slice(1+r,1+2*r));else{if(2!==e[0]&&3!==e[0]||e.length-1!==r)return!1;this.pub=this.ec.curve.pointFromX(3===e[0],e.slice(1,1+r))}return!0},r.prototype.derive=function(e){return e.mul(this.priv).getX()},r.prototype.sign=function(e){return this.ec.sign(e,this)},r.prototype.verify=function(e,t){return this.ec.verify(e,t,this)},r.prototype.inspect=function(){return"<Key priv: "+(this.priv&&this.priv.toString(16,2))+" pub: "+(this.pub&&this.pub.inspect())+" >"}},{"../../elliptic":89,assert:55,"bn.js":86}],98:[function(e,t){function r(e,t){return e instanceof r?e:void(this._importDER(e,t)||(i(e&&t,"Signature without r or s"),this.r=new n(e,16),this.s=new n(t,16)))}var i=e("assert"),n=e("bn.js"),o=e("../../elliptic"),s=o.utils;t.exports=r,r.prototype._importDER=function(e,t){if(e=s.toArray(e,t),e.length<6||48!==e[0]||2!==e[2])return!1;var r=e[1];if(1+r>e.length)return!1;var i=e[3];if(i>=128)return!1;if(4+i+2>=e.length)return!1;if(2!==e[4+i])return!1;var o=e[5+i];return o>=128?!1:4+i+2+o>e.length?!1:(this.r=new n(e.slice(4,4+i)),this.s=new n(e.slice(4+i+2,4+i+2+o)),!0)},r.prototype.toDER=function(e){var t=this.r.toArray(),r=this.s.toArray();128&t[0]&&(t=[0].concat(t)),128&r[0]&&(r=[0].concat(r));var i=t.length+r.length+4,n=[48,i,2,t.length];return n=n.concat(t,[2,r.length],r),s.encode(n,e)}},{"../../elliptic":89,assert:55,"bn.js":86}],99:[function(e,t){function r(e){if(!(this instanceof r))return new r(e);this.hash=e.hash,this.predResist=!!e.predResist,this.outLen=this.hash.outSize,this.minEntropy=e.minEntropy||this.hash.hmacStrength,this.reseed=null,this.reseedInterval=null,this.K=null,this.V=null;var t=s.toArray(e.entropy,e.entropyEnc),n=s.toArray(e.nonce,e.nonceEnc),o=s.toArray(e.pers,e.persEnc);i(t.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._init(t,n,o)}var i=e("assert"),n=e("hash.js"),o=e("../elliptic"),s=o.utils;t.exports=r,r.prototype._init=function(e,t,r){var i=e.concat(t).concat(r);this.K=new Array(this.outLen/8),this.V=new Array(this.outLen/8);for(var n=0;n<this.V.length;n++)this.K[n]=0,this.V[n]=1;this._update(i),this.reseed=1,this.reseedInterval=281474976710656},r.prototype._hmac=function(){return new n.hmac(this.hash,this.K)},r.prototype._update=function(e){var t=this._hmac().update(this.V).update([0]);e&&(t=t.update(e)),this.K=t.digest(),this.V=this._hmac().update(this.V).digest(),e&&(this.K=this._hmac().update(this.V).update([1]).update(e).digest(),this.V=this._hmac().update(this.V).digest())},r.prototype.reseed=function(e,t,r,n){"string"!=typeof t&&(n=r,r=t,t=null),e=s.toBuffer(e,t),r=s.toBuffer(r,n),i(e.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._update(e.concat(r||[])),this.reseed=1},r.prototype.generate=function(e,t,r,i){if(this.reseed>this.reseedInterval)throw new Error("Reseed is required");"string"!=typeof t&&(i=r,r=t,t=null),r&&(r=s.toArray(r,i),this._update(r));for(var n=[];n.length<e;)this.V=this._hmac().update(this.V).digest(),n=n.concat(this.V);var o=n.slice(0,e);return this._update(r),this.reseed++,s.encode(o,t)}},{"../elliptic":89,assert:55,"hash.js":102}],100:[function(e,t,r){function i(e,t){if(Array.isArray(e))return e.slice();if(!e)return[];var r=[];if("string"==typeof e)if(t){if("hex"===t){e=e.replace(/[^a-z0-9]+/gi,""),e.length%2!==0&&(e="0"+e);for(var i=0;i<e.length;i+=2)r.push(parseInt(e[i]+e[i+1],16))}}else for(var i=0;i<e.length;i++){var n=e.charCodeAt(i),o=n>>8,s=255&n;o?r.push(o,s):r.push(s)}else for(var i=0;i<e.length;i++)r[i]=0|e[i];return r}function n(e){for(var t="",r=0;r<e.length;r++)t+=o(e[r].toString(16));return t}function o(e){return 1===e.length?"0"+e:e}function s(e,t){for(var r=[],i=1<<t+1,n=e.clone();n.cmpn(1)>=0;){var o;if(n.isOdd()){var s=n.andln(i-1);o=s>(i>>1)-1?(i>>1)-s:s,n.isubn(o)}else o=0;r.push(o);for(var a=0!==n.cmpn(0)&&0===n.andln(i-1)?t+1:1,h=1;a>h;h++)r.push(0);n.ishrn(a)}return r}function a(e,t){var r=[[],[]];e=e.clone(),t=t.clone();for(var i=0,n=0;e.cmpn(-i)>0||t.cmpn(-n)>0;){var o=e.andln(3)+i&3,s=t.andln(3)+n&3;3===o&&(o=-1),3===s&&(s=-1);var a;if(0===(1&o))a=0;else{var h=e.andln(7)+i&7;a=3!==h&&5!==h||2!==s?o:-o}r[0].push(a);var c;if(0===(1&s))c=0;else{var h=t.andln(7)+n&7;c=3!==h&&5!==h||2!==o?s:-s}r[1].push(c),2*i===a+1&&(i=1-i),2*n===c+1&&(n=1-n),e.ishrn(1),t.ishrn(1)}return r}var h=(e("assert"),e("bn.js"),r);h.toArray=i,h.toHex=n,h.encode=function(e,t){return"hex"===t?n(e):e},h.zero2=o,h.getNAF=s,h.getJSF=a},{assert:55,"bn.js":86}],101:[function(e,t){function r(e){this.rand=e}var i;if(t.exports=function(e){return i||(i=new r(null)),i.generate(e)},t.exports.Rand=r,r.prototype.generate=function(e){return this._rand(e)},"object"==typeof window)r.prototype._rand=window.crypto&&window.crypto.getRandomValues?function(e){var t=new Uint8Array(e);return window.crypto.getRandomValues(t),t}:window.msCrypto&&window.msCrypto.getRandomValues?function(e){var t=new Uint8Array(e);return window.msCrypto.getRandomValues(t),t}:function(){throw new Error("Not implemented yet")};else try{var n=e("crypto");r.prototype._rand=function(e){return n.randomBytes(e)}}catch(e){r.prototype._rand=function(e){for(var t=new Uint8Array(e),r=0;r<t.length;r++)t[r]=this.rand.getByte();return t}}},{}],102:[function(e,t,r){var i=r;i.utils=e("./hash/utils"),i.common=e("./hash/common"),i.sha=e("./hash/sha"),i.ripemd=e("./hash/ripemd"),i.hmac=e("./hash/hmac"),i.sha256=i.sha.sha256,i.sha224=i.sha.sha224,i.ripemd160=i.ripemd.ripemd160},{"./hash/common":103,"./hash/hmac":104,"./hash/ripemd":105,"./hash/sha":106,"./hash/utils":107}],103:[function(e,t,r){function i(){this.pending=null,this.pendingTotal=0,this.blockSize=this.constructor.blockSize,this.outSize=this.constructor.outSize,this.hmacStrength=this.constructor.hmacStrength,this.endian="big"}var n=e("../hash"),o=n.utils,s=o.assert;r.BlockHash=i,i.prototype.update=function(e,t){if(e=o.toArray(e,t),this.pending=this.pending?this.pending.concat(e):e,this.pendingTotal+=e.length,this.pending.length>=this.blockSize/8){e=this.pending;var r=e.length%(this.blockSize/8);this.pending=e.slice(e.length-r,e.length),0===this.pending.length&&(this.pending=null),e=o.join32(e.slice(0,e.length-r),this.endian);for(var i=0;i<e.length;i+=this.blockSize/32)this._update(e.slice(i,i+this.blockSize/32))}return this},i.prototype.digest=function(e){return this.update(this._pad()),s(null===this.pending),this._digest(e)},i.prototype._pad=function(){var e=this.pendingTotal,t=this.blockSize/8,r=t-(e+8)%t,i=new Array(r+8);i[0]=128;for(var n=1;r>n;n++)i[n]=0;return e<<=3,"big"===this.endian?(i[n++]=0,i[n++]=0,i[n++]=0,i[n++]=0,i[n++]=e>>>24&255,i[n++]=e>>>16&255,i[n++]=e>>>8&255,i[n++]=255&e):(i[n++]=255&e,i[n++]=e>>>8&255,i[n++]=e>>>16&255,i[n++]=e>>>24&255,i[n++]=0,i[n++]=0,i[n++]=0,i[n++]=0),i}},{"../hash":102}],104:[function(e,t,r){function i(e,t,r){return this instanceof i?(this.Hash=e,this.blockSize=e.blockSize/8,this.outSize=e.outSize/8,void this._init(o.toArray(t,r))):new i(e,t,r)}var n=e("../hash"),o=n.utils,s=o.assert;t.exports=i,i.prototype._init=function(e){e.length>this.blockSize&&(e=(new this.Hash).update(e).digest()),s(e.length<=this.blockSize);for(var t=e.length;t<this.blockSize;t++)e.push(0);for(var r=e.slice(),t=0;t<e.length;t++)e[t]^=54,r[t]^=92;this.hash={inner:(new this.Hash).update(e),outer:(new this.Hash).update(r)}},i.prototype.update=function(e,t){return this.hash.inner.update(e,t),this},i.prototype.digest=function(e){return this.hash.outer.update(this.hash.inner.digest()),this.hash.outer.digest(e)}},{"../hash":102}],105:[function(e,t,r){function i(){return this instanceof i?(l.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],void(this.endian="little")):new i}function n(e,t,r,i){return 15>=e?t^r^i:31>=e?t&r|~t&i:47>=e?(t|~r)^i:63>=e?t&i|r&~i:t^(r|~i)}function o(e){return 15>=e?0:31>=e?1518500249:47>=e?1859775393:63>=e?2400959708:2840853838}function s(e){return 15>=e?1352829926:31>=e?1548603684:47>=e?1836072691:63>=e?2053994217:0}var a=e("../hash"),h=a.utils,c=h.rotl32,u=h.sum32,f=h.sum32_3,d=h.sum32_4,l=a.common.BlockHash;h.inherits(i,l),r.ripemd160=i,i.blockSize=512,i.outSize=160,i.hmacStrength=192,i.prototype._update=function(e){for(var t=this.h[0],r=this.h[1],i=this.h[2],a=this.h[3],h=this.h[4],l=t,g=r,y=i,w=a,_=h,x=0;80>x;x++){var S=u(c(d(t,n(x,r,i,a),e[p[x]],o(x)),m[x]),h);t=h,h=a,a=c(i,10),i=r,r=S,S=u(c(d(l,n(79-x,g,y,w),e[b[x]],s(x)),v[x]),_),l=_,_=w,w=c(y,10),y=g,g=S}S=f(this.h[1],i,w),this.h[1]=f(this.h[2],a,_),this.h[2]=f(this.h[3],h,l),this.h[3]=f(this.h[4],t,g),this.h[4]=f(this.h[0],r,y),this.h[0]=S},i.prototype._digest=function(e){return"hex"===e?h.toHex32(this.h,"little"):h.split32(this.h,"little")};var p=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],b=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],m=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],v=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]},{"../hash":102}],106:[function(e,t,r){function i(){return this instanceof i?(g.call(this),this.h=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],void(this.k=y)):new i}function n(){return this instanceof n?(i.call(this),void(this.h=[3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428])):new n}function o(e,t,r){return e&t^~e&r}function s(e,t,r){return e&t^e&r^t&r}function a(e){return p(e,2)^p(e,13)^p(e,22)}function h(e){return p(e,6)^p(e,11)^p(e,25)}function c(e){return p(e,7)^p(e,18)^e>>>3}function u(e){return p(e,17)^p(e,19)^e>>>10}var f=e("../hash"),d=f.utils,l=d.assert,p=d.rotr32,b=(d.rotl32,d.sum32),m=d.sum32_4,v=d.sum32_5,g=f.common.BlockHash,y=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];d.inherits(i,g),r.sha256=i,i.blockSize=512,i.outSize=256,i.hmacStrength=192,i.prototype._update=function(e){for(var t=new Array(64),r=0;16>r;r++)t[r]=e[r];for(;r<t.length;r++)t[r]=m(u(t[r-2]),t[r-7],c(t[r-15]),t[r-16]);var i=this.h[0],n=this.h[1],f=this.h[2],d=this.h[3],p=this.h[4],g=this.h[5],y=this.h[6],w=this.h[7];l(this.k.length===t.length);for(var r=0;r<t.length;r++){var _=v(w,h(p),o(p,g,y),this.k[r],t[r]),x=b(a(i),s(i,n,f));w=y,y=g,g=p,p=b(d,_),d=f,f=n,n=i,i=b(_,x)}this.h[0]=b(this.h[0],i),this.h[1]=b(this.h[1],n),this.h[2]=b(this.h[2],f),this.h[3]=b(this.h[3],d),this.h[4]=b(this.h[4],p),this.h[5]=b(this.h[5],g),this.h[6]=b(this.h[6],y),this.h[7]=b(this.h[7],w)},i.prototype._digest=function(e){return"hex"===e?d.toHex32(this.h,"big"):d.split32(this.h,"big")},d.inherits(n,i),r.sha224=n,n.blockSize=512,n.outSize=224,n.hmacStrength=192,n.prototype._digest=function(e){return"hex"===e?d.toHex32(this.h.slice(0,7),"big"):d.split32(this.h.slice(0,7),"big")}},{"../hash":102}],107:[function(e,t,r){function i(e,t){if(Array.isArray(e))return e.slice();if(!e)return[];var r=[];if("string"==typeof e)if(t){if("hex"===t){e=e.replace(/[^a-z0-9]+/gi,""),e.length%2!=0&&(e="0"+e);for(var i=0;i<e.length;i+=2)r.push(parseInt(e[i]+e[i+1],16))}}else for(var i=0;i<e.length;i++){var n=e.charCodeAt(i),o=n>>8,s=255&n;o?r.push(o,s):r.push(s)}else for(var i=0;i<e.length;i++)r[i]=0|e[i];return r}function n(e){for(var t="",r=0;r<e.length;r++)t+=s(e[r].toString(16));return t}function o(e,t){for(var r="",i=0;i<e.length;i++){var n=e[i];"little"===t&&(n=n>>>24|n>>>8&65280|n<<8&16711680|(255&n)<<24,0>n&&(n+=4294967296)),r+=a(n.toString(16))}return r}function s(e){return 1===e.length?"0"+e:e}function a(e){return 7===e.length?"0"+e:6===e.length?"00"+e:5===e.length?"000"+e:4===e.length?"0000"+e:3===e.length?"00000"+e:2===e.length?"000000"+e:1===e.length?"0000000"+e:e}function h(e,t){m(e.length%4===0);for(var r=new Array(e.length/4),i=0,n=0;i<r.length;i++,n+=4){var o;o="big"===t?e[n]<<24|e[n+1]<<16|e[n+2]<<8|e[n+3]:e[n+3]<<24|e[n+2]<<16|e[n+1]<<8|e[n],0>o&&(o+=4294967296),r[i]=o}return r}function c(e,t){for(var r=new Array(4*e.length),i=0,n=0;i<e.length;i++,n+=4){var o=e[i];"big"===t?(r[n]=o>>>24,r[n+1]=o>>>16&255,r[n+2]=o>>>8&255,r[n+3]=255&o):(r[n+3]=o>>>24,r[n+2]=o>>>16&255,r[n+1]=o>>>8&255,r[n]=255&o)}return r}function u(e,t){return e>>>t|e<<32-t}function f(e,t){return e<<t|e>>>32-t}function d(e,t){var r=e+t&4294967295;return 0>r&&(r+=4294967296),r}function l(e,t,r){var i=e+t+r&4294967295;return 0>i&&(i+=4294967296),i}function p(e,t,r,i){var n=e+t+r+i&4294967295;return 0>n&&(n+=4294967296),n}function b(e,t,r,i,n){var o=e+t+r+i+n&4294967295;return 0>o&&(o+=4294967296),o}function m(e,t){if(!e)throw new Error(t||"Assertion failed")}var v=r;v.toArray=i,v.toHex=n,v.toHex32=o,v.zero2=s,v.zero8=a,v.join32=h,v.split32=c,v.rotr32=u,v.rotl32=f,v.sum32=d,v.sum32_3=l,v.sum32_4=p,v.sum32_5=b,v.assert=m,v.inherits="function"==typeof Object.create?function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:function(e,t){e.super_=t;var r=function(){};r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e}},{}],108:[function(e,t){t.exports={name:"elliptic",version:"0.15.15",description:"EC cryptography",main:"lib/elliptic.js",scripts:{test:"mocha --reporter=spec test/*-test.js"},repository:{type:"git",url:"git@github.com:indutny/elliptic"},keywords:["EC","Elliptic","curve","Cryptography"],author:{name:"Fedor Indutny",email:"fedor@indutny.com"},license:"MIT",bugs:{url:"https://github.com/indutny/elliptic/issues"},homepage:"https://github.com/indutny/elliptic",devDependencies:{browserify:"^3.44.2",mocha:"^1.18.2","uglify-js":"^2.4.13"},dependencies:{"bn.js":"^0.15.0",brorand:"^1.0.1","hash.js":"^0.2.0",inherits:"^2.0.1"},gitHead:"4bf1f50607285bff4ae19521217dbc801c3d36af",_id:"elliptic@0.15.15",_shasum:"63269184a856d6e00871e84f37a8401ff84e4aea",_from:"elliptic@>=0.15.14 <0.16.0",_npmVersion:"2.1.6",_nodeVersion:"0.10.33",_npmUser:{name:"indutny",email:"fedor@indutny.com"},maintainers:[{name:"indutny",email:"fedor@indutny.com"}],dist:{shasum:"63269184a856d6e00871e84f37a8401ff84e4aea",tarball:"http://registry.npmjs.org/elliptic/-/elliptic-0.15.15.tgz"},directories:{},_resolved:"https://registry.npmjs.org/elliptic/-/elliptic-0.15.15.tgz",readme:"ERROR: No README data found!"}},{}],109:[function(e,t){(function(e){t.exports=function(t,r,i,n){n/=8;for(var o,s,a,h=0,c=new e(n),u=0;;){if(o=t.createHash("md5"),u++>0&&o.update(s),o.update(r),o.update(i),s=o.digest(),a=0,n>0)for(;;){if(0===n)break;if(a===s.length)break;c[h++]=s[a++],n--}if(0===n)break}for(a=0;a<s.length;a++)s[a]=0;return c}}).call(this,e("buffer").Buffer)},{buffer:57}],110:[function(e,t){t.exports={"2.16.840.1.101.3.4.1.1":"aes-128-ecb","2.16.840.1.101.3.4.1.2":"aes-128-cbc","2.16.840.1.101.3.4.1.3":"aes-128-ofb","2.16.840.1.101.3.4.1.4":"aes-128-cfb","2.16.840.1.101.3.4.1.21":"aes-192-ecb","2.16.840.1.101.3.4.1.22":"aes-192-cbc","2.16.840.1.101.3.4.1.23":"aes-192-ofb","2.16.840.1.101.3.4.1.24":"aes-192-cfb","2.16.840.1.101.3.4.1.41":"aes-256-ecb","2.16.840.1.101.3.4.1.42":"aes-256-cbc","2.16.840.1.101.3.4.1.43":"aes-256-ofb","2.16.840.1.101.3.4.1.44":"aes-256-cfb"}},{}],111:[function(e,t,r){var i=e("asn1.js"),n=e("asn1.js-rfc3280"),o=i.define("RSAPrivateKey",function(){this.seq().obj(this.key("version").int(),this.key("modulus").int(),this.key("publicExponent").int(),this.key("privateExponent").int(),this.key("prime1").int(),this.key("prime2").int(),this.key("exponent1").int(),this.key("exponent2").int(),this.key("coefficient").int())});r.RSAPrivateKey=o;var s=i.define("RSAPublicKey",function(){this.seq().obj(this.key("modulus").int(),this.key("publicExponent").int())});r.RSAPublicKey=s;var a=n.SubjectPublicKeyInfo;r.PublicKey=a;var h=i.define("ECPublicKey",function(){this.seq().obj(this.key("algorithm").seq().obj(this.key("id").objid(),this.key("curve").objid()),this.key("subjectPrivateKey").bitstr())});r.ECPublicKey=h;var c=i.define("ECPrivateWrap",function(){this.seq().obj(this.key("version").int(),this.key("algorithm").seq().obj(this.key("id").objid(),this.key("curve").objid()),this.key("subjectPrivateKey").octstr())});r.ECPrivateWrap=c;var u=i.define("PrivateKeyInfo",function(){this.seq().obj(this.key("version").int(),this.key("algorithm").use(n.AlgorithmIdentifier),this.key("subjectPrivateKey").octstr())});r.PrivateKey=u;var f=i.define("EncryptedPrivateKeyInfo",function(){this.seq().obj(this.key("algorithm").seq().obj(this.key("id").objid(),this.key("decrypt").seq().obj(this.key("kde").seq().obj(this.key("id").objid(),this.key("kdeparams").seq().obj(this.key("salt").octstr(),this.key("iters").int())),this.key("cipher").seq().obj(this.key("algo").objid(),this.key("iv").octstr()))),this.key("subjectPrivateKey").octstr())}),d=i.define("dsaParams",function(){this.seq().obj(this.key("algorithm").objid(),this.key("parameters").seq().obj(this.key("p").int(),this.key("q").int(),this.key("g").int()))});r.EncryptedPrivateKey=f;var l=i.define("DSAPublicKey",function(){this.seq().obj(this.key("algorithm").use(d),this.key("subjectPublicKey").bitstr())});r.DSAPublicKey=l;var p=i.define("DSAPrivateWrap",function(){this.seq().obj(this.key("version").int(),this.key("algorithm").seq().obj(this.key("id").objid(),this.key("parameters").seq().obj(this.key("p").int(),this.key("q").int(),this.key("g").int())),this.key("subjectPrivateKey").octstr())});r.DSAPrivateWrap=p;var b=i.define("DSAPrivateKey",function(){this.seq().obj(this.key("version").int(),this.key("p").int(),this.key("q").int(),this.key("g").int(),this.key("pub_key").int(),this.key("priv_key").int())});r.DSAPrivateKey=b,r.DSAparam=i.define("DSAparam",function(){this.int()});var m=i.define("ECPrivateKey",function(){this.seq().obj(this.key("version").int(),this.key("privateKey").octstr(),this.key("parameters").optional().explicit(0).use(v),this.key("publicKey").optional().explicit(1).bitstr())});r.ECPrivateKey=m;var v=i.define("ECParameters",function(){this.choice({namedCurve:this.objid()})}),g=i.define("ECPrivateKey2",function(){this.seq().obj(this.key("version").int(),this.key("privateKey").octstr(),this.key("publicKey").seq().obj(this.key("key").bitstr()))});r.ECPrivateKey2=g,r.signature=i.define("signature",function(){this.seq().obj(this.key("r").int(),this.key("s").int())})},{"asn1.js":115,"asn1.js-rfc3280":114}],112:[function(e,t){(function(r){function i(e){for(var t=[];e;){if(e.length<64){t.push(e);break}t.push(e.slice(0,64)),e=e.slice(64)}return t.join("\n")}var n=/Proc-Type: 4,ENCRYPTED\n\r?DEK-Info: AES-((?:128)|(?:192)|(?:256))-CBC,([0-9A-H]+)\n\r?\n\r?([0-9A-z\n\r\+\/\=]+)\n\r?/m,o=/^-----BEGIN (.*)-----\n/,s=e("./EVP_BytesToKey");t.exports=function(e,t,a){var h=e.toString(),c=h.match(n);if(!c)return e;var u="aes"+c[1],f=new r(c[2],"hex"),d=new r(c[3].replace(/\n\r?/g,""),"base64"),l=s(a,t,f.slice(0,8),parseInt(c[1])),p=[],b=a.createDecipheriv(u,l,f);p.push(b.update(d)),p.push(b.final());var m=r.concat(p).toString("base64"),v=h.match(o)[1];return"-----BEGIN "+v+"-----\n"+i(m)+"\n-----END "+v+"-----\n"}}).call(this,e("buffer").Buffer)},{"./EVP_BytesToKey":109,buffer:57}],113:[function(e,t){(function(r){function i(e,t){var i;"object"!=typeof e||r.isBuffer(e)||(i=e.passphrase,e=e.key),"string"==typeof e&&(e=new r(e)),i&&(e=h(e,i,t));var a,c,u=o.strip(e),f=u.tag,d=new r(u.base64,"base64");switch(f){case"PUBLIC KEY":switch(c=s.PublicKey.decode(d,"der"),a=c.algorithm.algorithm.join(".")){case"1.2.840.113549.1.1.1":return s.RSAPublicKey.decode(c.subjectPublicKey.data,"der");case"1.2.840.10045.2.1":return{type:"ec",data:s.ECPublicKey.decode(d,"der")};case"1.2.840.10040.4.1":return c=s.DSAPublicKey.decode(d,"der"),c.algorithm.parameters.pub_key=s.DSAparam.decode(c.subjectPublicKey.data,"der"),{type:"dsa",data:c.algorithm.parameters};default:throw new Error("unknown key id "+a)}throw new Error("unknown key type "+f);case"ENCRYPTED PRIVATE KEY":d=s.EncryptedPrivateKey.decode(d,"der"),d=n(t,d,i);case"PRIVATE KEY":switch(c=s.PrivateKey.decode(d,"der"),a=c.algorithm.algorithm.join(".")){case"1.2.840.113549.1.1.1":return s.RSAPrivateKey.decode(c.subjectPrivateKey,"der");case"1.2.840.10045.2.1":return c=s.ECPrivateWrap.decode(d,"der"),{curve:c.algorithm.curve,privateKey:s.ECPrivateKey.decode(c.subjectPrivateKey,"der").privateKey};case"1.2.840.10040.4.1":return c=s.DSAPrivateWrap.decode(d,"der"),c.algorithm.parameters.priv_key=s.DSAparam.decode(c.subjectPrivateKey,"der"),{type:"dsa",params:c.algorithm.parameters};default:throw new Error("unknown key id "+a)}throw new Error("unknown key type "+f);case"RSA PUBLIC KEY":return s.RSAPublicKey.decode(d,"der");case"RSA PRIVATE KEY":return s.RSAPrivateKey.decode(d,"der");case"DSA PRIVATE KEY":return{type:"dsa",params:s.DSAPrivateKey.decode(d,"der")};case"EC PRIVATE KEY":return d=s.ECPrivateKey.decode(d,"der"),{curve:d.parameters.value,privateKey:d.privateKey};default:throw new Error("unknown key type "+f)}}function n(e,t,i){var n=t.algorithm.decrypt.kde.kdeparams.salt,o=t.algorithm.decrypt.kde.kdeparams.iters,s=a[t.algorithm.decrypt.cipher.algo.join(".")],h=t.algorithm.decrypt.cipher.iv,c=t.subjectPrivateKey,u=parseInt(s.split("-")[1],10)/8,f=e.pbkdf2Sync(i,n,o,u),d=e.createDecipheriv(s,f,h),l=[];return l.push(d.update(c)),l.push(d.final()),r.concat(l)}var o=e("pemstrip"),s=e("./asn1"),a=e("./aesid.json"),h=e("./fixProc");t.exports=i,i.signature=s.signature}).call(this,e("buffer").Buffer)},{"./aesid.json":110,"./asn1":111,"./fixProc":112,buffer:57,pemstrip:127}],114:[function(e,t,r){try{var i=e("asn1.js")}catch(t){var i=e("../..")}var n=i.define("CRLReason",function(){this.enum({0:"unspecified",1:"keyCompromise",2:"CACompromise",3:"affiliationChanged",4:"superseded",5:"cessationOfOperation",6:"certificateHold",8:"removeFromCRL",9:"privilegeWithdrawn",10:"AACompromise"})});r.CRLReason=n;var o=i.define("AlgorithmIdentifier",function(){this.seq().obj(this.key("algorithm").objid(),this.key("parameters").optional().any())});r.AlgorithmIdentifier=o;var s=i.define("Certificate",function(){this.seq().obj(this.key("tbsCertificate").use(a),this.key("signatureAlgorithm").use(o),this.key("signature").bitstr())});r.Certificate=s;var a=i.define("TBSCertificate",function(){this.seq().obj(this.key("version").def("v1").explicit(0).use(h),this.key("serialNumber").use(c),this.key("signature").use(o),this.key("issuer").use(m),this.key("validity").use(u),this.key("subject").use(m),this.key("subjectPublicKeyInfo").use(l),this.key("issuerUniqueID").optional().explicit(1).use(d),this.key("subjectUniqueID").optional().explicit(2).use(d),this.key("extensions").optional().explicit(3).use(p))});r.TBSCertificate=a;var h=i.define("Version",function(){this.int({0:"v1",1:"v2",2:"v3"})});r.Version=h;var c=i.define("CertificateSerialNumber",function(){this.int()});r.CertificateSerialNumber=c;var u=i.define("Validity",function(){this.seq().obj(this.key("notBefore").use(f),this.key("notAfter").use(f))});r.Validity=u;var f=i.define("Time",function(){this.choice({utcTime:this.utctime(),genTime:this.gentime()})});r.Time=f;var d=i.define("UniqueIdentifier",function(){this.bitstr()});r.UniqueIdentifier=d;var l=i.define("SubjectPublicKeyInfo",function(){this.seq().obj(this.key("algorithm").use(o),this.key("subjectPublicKey").bitstr())});r.SubjectPublicKeyInfo=l;var p=i.define("Extensions",function(){this.seqof(b)});r.Extensions=p;var b=i.define("Extension",function(){this.seq().obj(this.key("extnID").objid(),this.key("critical").bool().def(!1),this.key("extnValue").octstr())});r.Extension=b;var m=i.define("Name",function(){this.choice({rdn:this.use(v)})});r.Name=m;var v=i.define("RDNSequence",function(){this.seqof(g)});r.RDNSequence=v;var g=i.define("RelativeDistinguishedName",function(){this.setof(y)});r.RelativeDistinguishedName=g;var y=i.define("AttributeTypeAndValue",function(){this.seq().obj(this.key("type").use(w),this.key("value").use(_))});r.AttributeTypeAndValue=y;var w=i.define("AttributeType",function(){this.objid()});r.AttributeType=w;var _=i.define("AttributeValue",function(){this.any()});r.AttributeValue=_},{"asn1.js":115}],115:[function(e,t,r){var i=r;i.bignum=e("bn.js"),i.define=e("./asn1/api").define,i.base=e("./asn1/base"),i.constants=e("./asn1/constants"),i.decoders=e("./asn1/decoders"),i.encoders=e("./asn1/encoders")},{"./asn1/api":116,"./asn1/base":118,"./asn1/constants":122,"./asn1/decoders":124,"./asn1/encoders":126,"bn.js":86}],116:[function(e,t,r){function i(e,t){this.name=e,this.body=t,this.decoders={},this.encoders={}}var n=e("../asn1"),o=e("util"),s=e("vm"),a=r;a.define=function(e,t){return new i(e,t)},i.prototype._createNamed=function(e){var t=s.runInThisContext("(function "+this.name+"(entity) {\n  this._initNamed(entity);\n})");return o.inherits(t,e),t.prototype._initNamed=function(t){e.call(this,t)},new t(this)},i.prototype._getDecoder=function(e){return this.decoders.hasOwnProperty(e)||(this.decoders[e]=this._createNamed(n.decoders[e])),this.decoders[e]},i.prototype.decode=function(e,t,r){return this._getDecoder(t).decode(e,r)},i.prototype._getEncoder=function(e){return this.encoders.hasOwnProperty(e)||(this.encoders[e]=this._createNamed(n.encoders[e])),this.encoders[e]},i.prototype.encode=function(e,t,r){return this._getEncoder(t).encode(e,r)}},{"../asn1":115,util:217,vm:218}],117:[function(e,t,r){function i(e,t){return s.call(this,t),a.isBuffer(e)?(this.base=e,this.offset=0,void(this.length=e.length)):void this.error("Input not Buffer")}function n(e,t){if(Array.isArray(e))this.length=0,this.value=e.map(function(e){return e instanceof n||(e=new n(e,t)),this.length+=e.length,e},this);else if("number"==typeof e){if(!(e>=0&&255>=e))return t.error("non-byte EncoderBuffer value");this.value=e,this.length=1}else if("string"==typeof e)this.value=e,this.length=a.byteLength(e);else{if(!a.isBuffer(e))return t.error("Unsupported type: "+typeof e);this.value=e,this.length=e.length}}var o=(e("assert"),e("util")),s=e("../base").Reporter,a=e("buffer").Buffer;o.inherits(i,s),r.DecoderBuffer=i,i.prototype.save=function(){return{offset:this.offset}},i.prototype.restore=function(e){var t=new i(this.base);return t.offset=e.offset,t.length=this.offset,this.offset=e.offset,t},i.prototype.isEmpty=function(){return this.offset===this.length},i.prototype.readUInt8=function(e){return this.offset+1<=this.length?this.base.readUInt8(this.offset++,!0):this.error(e||"DecoderBuffer overrun")},i.prototype.skip=function(e,t){if(!(this.offset+e<=this.length))return this.error(t||"DecoderBuffer overrun");var r=new i(this.base);return r._reporterState=this._reporterState,r.offset=this.offset,r.length=this.offset+e,this.offset+=e,r},i.prototype.raw=function(e){return this.base.slice(e?e.offset:this.offset,this.length)},r.EncoderBuffer=n,n.prototype.join=function(e,t){return e||(e=new a(this.length)),t||(t=0),0===this.length?e:(Array.isArray(this.value)?this.value.forEach(function(r){r.join(e,t),t+=r.length}):("number"==typeof this.value?e[t]=this.value:"string"==typeof this.value?e.write(this.value,t):a.isBuffer(this.value)&&this.value.copy(e,t),t+=this.length),e)}},{"../base":118,assert:55,buffer:57,util:217}],118:[function(e,t,r){var i=r;i.Reporter=e("./reporter").Reporter,i.DecoderBuffer=e("./buffer").DecoderBuffer,i.EncoderBuffer=e("./buffer").EncoderBuffer,i.Node=e("./node")},{"./buffer":117,"./node":119,"./reporter":120}],119:[function(e,t){function r(e,t){var r={};
this._baseState=r,r.enc=e,r.parent=t||null,r.children=null,r.tag=null,r.args=null,r.reverseArgs=null,r.choice=null,r.optional=!1,r.any=!1,r.obj=!1,r.use=null,r.useDecoder=null,r.key=null,r.default=null,r.explicit=null,r.implicit=null,r.parent||(r.children=[],this._wrap())}var i=e("assert"),n=e("../base").Reporter,o=e("../base").EncoderBuffer,s=["seq","seqof","set","setof","octstr","bitstr","objid","bool","gentime","utctime","null_","enum","int","ia5str"],a=["key","obj","use","optional","explicit","implicit","def","choice","any"].concat(s),h=["_peekTag","_decodeTag","_use","_decodeStr","_decodeObjid","_decodeTime","_decodeNull","_decodeInt","_decodeBool","_decodeList","_encodeComposite","_encodeStr","_encodeObjid","_encodeTime","_encodeNull","_encodeInt","_encodeBool"];t.exports=r;var c=["enc","parent","children","tag","args","reverseArgs","choice","optional","any","obj","use","alteredUse","key","default","explicit","implicit"];r.prototype.clone=function(){var e=this._baseState,t={};c.forEach(function(r){t[r]=e[r]});var r=new this.constructor(t.parent);return r._baseState=t,r},r.prototype._wrap=function(){var e=this._baseState;a.forEach(function(t){this[t]=function(){var r=new this.constructor(this);return e.children.push(r),r[t].apply(r,arguments)}},this)},r.prototype._init=function(e){var t=this._baseState;i(null===t.parent),e.call(this),t.children=t.children.filter(function(e){return e._baseState.parent===this},this),i.equal(t.children.length,1,"Root node can have only one child")},r.prototype._useArgs=function(e){var t=this._baseState,r=e.filter(function(e){return e instanceof this.constructor},this);e=e.filter(function(e){return!(e instanceof this.constructor)},this),0!==r.length&&(i(null===t.children),t.children=r,r.forEach(function(e){e._baseState.parent=this},this)),0!==e.length&&(i(null===t.args),t.args=e,t.reverseArgs=e.map(function(e){if("object"!=typeof e||e.constructor!==Object)return e;var t={};return Object.keys(e).forEach(function(r){r==(0|r)&&(r|=0);var i=e[r];t[i]=r}),t}))},h.forEach(function(e){r.prototype[e]=function(){var t=this._baseState;throw new Error(e+" not implemented for encoding: "+t.enc)}}),s.forEach(function(e){r.prototype[e]=function(){var t=this._baseState,r=Array.prototype.slice.call(arguments);return i(null===t.tag),t.tag=e,this._useArgs(r),this}}),r.prototype.use=function(e){var t=this._baseState;return i(null===t.use),t.use=e,this},r.prototype.optional=function(){var e=this._baseState;return e.optional=!0,this},r.prototype.def=function(e){var t=this._baseState;return i(null===t.default),t.default=e,t.optional=!0,this},r.prototype.explicit=function(e){var t=this._baseState;return i(null===t.explicit&&null===t.implicit),t.explicit=e,this},r.prototype.implicit=function(e){var t=this._baseState;return i(null===t.explicit&&null===t.implicit),t.implicit=e,this},r.prototype.obj=function(){var e=this._baseState,t=Array.prototype.slice.call(arguments);return e.obj=!0,0!==t.length&&this._useArgs(t),this},r.prototype.key=function e(e){var t=this._baseState;return i(null===t.key),t.key=e,this},r.prototype.any=function(){var e=this._baseState;return e.any=!0,this},r.prototype.choice=function(e){var t=this._baseState;return i(null===t.choice),t.choice=e,this._useArgs(Object.keys(e).map(function(t){return e[t]})),this},r.prototype._decode=function(e){var t=this._baseState;if(null===t.parent)return e.wrapResult(t.children[0]._decode(e));var r,i=t.default,n=!0;if(null!==t.key&&(r=e.enterKey(t.key)),t.optional&&(n=this._peekTag(e,null!==t.explicit?t.explicit:null!==t.implicit?t.implicit:t.tag||0),e.isError(n)))return n;var o;if(t.obj&&n&&(o=e.enterObject()),n){if(null!==t.explicit){var s=this._decodeTag(e,t.explicit);if(e.isError(s))return s;e=s}if(null===t.use&&null===t.choice){if(t.any)var a=e.save();var h=this._decodeTag(e,null!==t.implicit?t.implicit:t.tag,t.any);if(e.isError(h))return h;t.any?i=e.raw(a):e=h}if(i=t.any?i:null===t.choice?this._decodeGeneric(t.tag,e):this._decodeChoice(e),e.isError(i))return i;if(!t.any&&null===t.choice&&null!==t.children){var c=t.children.some(function(t){t._decode(e)});if(c)return err}}return t.obj&&n&&(i=e.leaveObject(o)),null===t.key||null===i&&n!==!0||e.leaveKey(r,t.key,i),i},r.prototype._decodeGeneric=function(e,t){var r=this._baseState;return"seq"===e||"set"===e?null:"seqof"===e||"setof"===e?this._decodeList(t,e,r.args[0]):"octstr"===e||"bitstr"===e||"ia5str"===e?this._decodeStr(t,e):"objid"===e&&r.args?this._decodeObjid(t,r.args[0],r.args[1]):"objid"===e?this._decodeObjid(t,null,null):"gentime"===e||"utctime"===e?this._decodeTime(t,e):"null_"===e?this._decodeNull(t):"bool"===e?this._decodeBool(t):"int"===e||"enum"===e?this._decodeInt(t,r.args&&r.args[0]):null!==r.use?this._getUse(r.use,t._reporterState.obj)._decode(t):t.error("unknown tag: "+e)},r.prototype._getUse=function(e,t){var r=this._baseState;return r.useDecoder=this._use(e,t),i(null===r.useDecoder._baseState.parent),r.useDecoder=r.useDecoder._baseState.children[0],r.implicit!==r.useDecoder._baseState.implicit&&(r.useDecoder=r.useDecoder.clone(),r.useDecoder._baseState.implicit=r.implicit),r.useDecoder},r.prototype._decodeChoice=function(e){var t=this._baseState,r=null,i=!1;return Object.keys(t.choice).some(function(n){var o=e.save(),s=t.choice[n];try{var a=s._decode(e);if(e.isError(a))return!1;r={type:n,value:a},i=!0}catch(t){return e.restore(o),!1}return!0},this),i?r:e.error("Choice not matched")},r.prototype._createEncoderBuffer=function(e){return new o(e,this.reporter)},r.prototype._encode=function(e,t,r){var i=this._baseState;if(null===i.default||i.default!==e){var n=this._encodeValue(e,t,r);if(void 0!==n&&!this._skipDefault(n,t,r))return n}},r.prototype._encodeValue=function(e,t,r){var i=this._baseState;if(null===i.parent)return i.children[0]._encode(e,t||new n);var o=null;if(this.reporter=t,i.optional&&void 0===e){if(null===i.default)return;e=i.default}var s=null,a=!1;if(i.any)o=this._createEncoderBuffer(e);else if(i.choice)o=this._encodeChoice(e,t);else if(i.children)s=i.children.map(function(r){if("null_"===r._baseState.tag)return r._encode(null,t,e);if(null===r._baseState.key)return t.error("Child should have a key");var i=t.enterKey(r._baseState.key);if("object"!=typeof e)return t.error("Child expected, but input is not object");var n=r._encode(e[r._baseState.key],t,e);return t.leaveKey(i),n},this).filter(function(e){return e}),s=this._createEncoderBuffer(s);else if("seqof"===i.tag||"setof"===i.tag){if(!i.args||1!==i.args.length)return t.error("Too many args for : "+i.tag);if(!Array.isArray(e))return t.error("seqof/setof, but data is not Array");var h=this.clone();h._baseState.implicit=null,s=this._createEncoderBuffer(e.map(function(r){var i=this._baseState;return this._getUse(i.args[0],e)._encode(r,t)},h))}else null!==i.use?o=this._getUse(i.use,r)._encode(e,t):(s=this._encodePrimitive(i.tag,e),a=!0);var o;if(!i.any&&null===i.choice){var c=null!==i.implicit?i.implicit:i.tag,u=null===i.implicit?"universal":"context";null===c?null===i.use&&t.error("Tag could be ommited only for .use()"):null===i.use&&(o=this._encodeComposite(c,a,u,s))}return null!==i.explicit&&(o=this._encodeComposite(i.explicit,!1,"context",o)),o},r.prototype._encodeChoice=function(e,t){var r=this._baseState,n=r.choice[e.type];return n||i(!1,e.type+" not found in "+JSON.stringify(Object.keys(r.choice))),n._encode(e.value,t)},r.prototype._encodePrimitive=function(e,t){var r=this._baseState;if("octstr"===e||"bitstr"===e||"ia5str"===e)return this._encodeStr(t,e);if("objid"===e&&r.args)return this._encodeObjid(t,r.reverseArgs[0],r.args[1]);if("objid"===e)return this._encodeObjid(t,null,null);if("gentime"===e||"utctime"===e)return this._encodeTime(t,e);if("null_"===e)return this._encodeNull();if("int"===e||"enum"===e)return this._encodeInt(t,r.args&&r.reverseArgs[0]);if("bool"===e)return this._encodeBool(t);throw new Error("Unsupported tag: "+e)}},{"../base":118,assert:55}],120:[function(e,t,r){function i(e){this._reporterState={obj:null,path:[],options:e||{},errors:[]}}function n(e,t){this.path=e,this.rethrow(t)}var o=e("util");r.Reporter=i,i.prototype.isError=function(e){return e instanceof n},i.prototype.enterKey=function(e){return this._reporterState.path.push(e)},i.prototype.leaveKey=function(e,t,r){var i=this._reporterState;i.path=i.path.slice(0,e-1),null!==i.obj&&(i.obj[t]=r)},i.prototype.enterObject=function(){var e=this._reporterState,t=e.obj;return e.obj={},t},i.prototype.leaveObject=function(e){var t=this._reporterState,r=t.obj;return t.obj=e,r},i.prototype.error=function(e){var t,r=this._reporterState,i=e instanceof n;if(t=i?e:new n(r.path.map(function(e){return"["+JSON.stringify(e)+"]"}).join(""),e.message||e,e.stack),!r.options.partial)throw t;return i||r.errors.push(t),t},i.prototype.wrapResult=function(e){var t=this._reporterState;return t.options.partial?{result:this.isError(e)?null:e,errors:t.errors}:e},o.inherits(n,Error),n.prototype.rethrow=function(e){return this.message=e+" at: "+(this.path||"(shallow)"),Error.captureStackTrace(this,n),this}},{util:217}],121:[function(e,t,r){var i=e("../constants");r.tagClass={0:"universal",1:"application",2:"context",3:"private"},r.tagClassByName=i._reverse(r.tagClass),r.tag={0:"end",1:"bool",2:"int",3:"bitstr",4:"octstr",5:"null_",6:"objid",7:"objDesc",8:"external",9:"real",10:"enum",11:"embed",12:"utf8str",13:"relativeOid",16:"seq",17:"set",18:"numstr",19:"printstr",20:"t61str",21:"videostr",22:"ia5str",23:"utctime",24:"gentime",25:"graphstr",26:"iso646str",27:"genstr",28:"unistr",29:"charstr",30:"bmpstr"},r.tagByName=i._reverse(r.tag)},{"../constants":122}],122:[function(e,t,r){var i=r;i._reverse=function(e){var t={};return Object.keys(e).forEach(function(r){(0|r)==r&&(r=0|r);var i=e[r];t[i]=r}),t},i.der=e("./der")},{"./der":121}],123:[function(e,t){function r(e){this.enc="der",this.name=e.name,this.entity=e,this.tree=new i,this.tree._init(e.body)}function i(e){h.Node.call(this,"der",e)}function n(e,t){var r=e.readUInt8(t);if(e.isError(r))return r;var i=u.tagClass[r>>6],n=0===(32&r);if(31===(31&r)){var o=r;for(r=0;128===(128&o);){if(o=e.readUInt8(t),e.isError(o))return o;r<<=7,r|=127&o}}else r&=31;var s=u.tag[r];return{cls:i,primitive:n,tag:r,tagStr:s}}function o(e,t,r){var i=e.readUInt8(r);if(e.isError(i))return i;if(!t&&128===i)return null;if(0===(128&i))return i;var n=127&i;if(n>=4)return e.error("length octect is too long");i=0;for(var o=0;n>o;o++){i<<=8;var s=e.readUInt8(r);if(e.isError(s))return s;i|=s}return i}var s=e("util"),a=e("../../asn1"),h=a.base,c=a.bignum,u=a.constants.der;t.exports=r,r.prototype.decode=function(e,t){return e instanceof h.DecoderBuffer||(e=new h.DecoderBuffer(e,t)),this.tree._decode(e,t)},s.inherits(i,h.Node),i.prototype._peekTag=function(e,t){if(e.isEmpty())return!1;var r=e.save(),i=n(e,'Failed to peek tag: "'+t+'"');return e.isError(i)?i:(e.restore(r),i.tag===t||i.tagStr===t)},i.prototype._decodeTag=function(e,t,r){var i=n(e,'Failed to decode tag of "'+t+'"');if(e.isError(i))return i;var s=o(e,i.primitive,'Failed to get length of "'+t+'"');if(e.isError(s))return s;if(!r&&i.tag!==t&&i.tagStr!==t&&i.tagStr+"of"!==t)return e.error('Failed to match tag: "'+t+'"');if(i.primitive||null!==s)return e.skip(s,'Failed to match body of: "'+t+'"');var a=e.start(),h=this._skipUntilEnd(e,'Failed to skip indefinite length body: "'+this.tag+'"');return e.isError(h)?h:e.cut(a)},i.prototype._skipUntilEnd=function(e,t){for(;;){var r=n(e,t);if(e.isError(r))return r;var i=o(e,r.primitive,t);if(e.isError(i))return i;var s;if(s=r.primitive||null!==i?e.skip(i):this._skipUntilEnd(e,t),e.isError(s))return s;if("end"===r.tagStr)break}},i.prototype._decodeList=function(e,t,r){for(var i=[];!e.isEmpty();){var n=this._peekTag(e,"end");if(e.isError(n))return n;var o=r.decode(e,"der");if(e.isError(o)&&n)break;i.push(o)}return i},i.prototype._decodeStr=function(e,t){if("octstr"===t)return e.raw();if("bitstr"===t){var r=e.readUInt8();return e.isError(r)?r:{unused:r,data:e.raw()}}return"ia5str"===t?e.raw().toString():this.error("Decoding of string type: "+t+" unsupported")},i.prototype._decodeObjid=function(e,t,r){for(var i=[],n=0;!e.isEmpty();){var o=e.readUInt8();n<<=7,n|=127&o,0===(128&o)&&(i.push(n),n=0)}128&o&&i.push(n);var s=i[0]/40|0,a=i[0]%40;return result=r?i:[s,a].concat(i.slice(1)),t&&(result=t[result.join(" ")]),result},i.prototype._decodeTime=function(e,t){var r=e.raw().toString();if("gentime"===t)var i=0|r.slice(0,4),n=0|r.slice(4,6),o=0|r.slice(6,8),s=0|r.slice(8,10),a=0|r.slice(10,12),h=0|r.slice(12,14);else{if("utctime"!==t)return this.error("Decoding "+t+" time is not supported yet");var i=0|r.slice(0,2),n=0|r.slice(2,4),o=0|r.slice(4,6),s=0|r.slice(6,8),a=0|r.slice(8,10),h=0|r.slice(10,12);i=70>i?2e3+i:1900+i}return Date.UTC(i,n-1,o,s,a,h,0)},i.prototype._decodeNull=function(){return null},i.prototype._decodeBool=function(e){var t=e.readUInt8();return e.isError(t)?t:0!==t},i.prototype._decodeInt=function(e,t){var r=0,i=e.raw();if(i.length>3)return new c(i);for(;!e.isEmpty();){r<<=8;var n=e.readUInt8();if(e.isError(n))return n;r|=n}return t&&(r=t[r]||r),r},i.prototype._use=function(e,t){return"function"==typeof e&&(e=e(t)),e._getDecoder("der").tree}},{"../../asn1":115,util:217}],124:[function(e,t,r){var i=r;i.der=e("./der")},{"./der":123}],125:[function(e,t){function r(e){this.enc="der",this.name=e.name,this.entity=e,this.tree=new i,this.tree._init(e.body)}function i(e){c.Node.call(this,"der",e)}function n(e){return 10>=e?"0"+e:e}function o(e,t,r,i){var n;if("seqof"===e?e="seq":"setof"===e&&(e="set"),f.tagByName.hasOwnProperty(e))n=f.tagByName[e];else{if("number"!=typeof e||(0|e)!==e)return i.error("Unknown tag: "+e);n=e}return n>=31?i.error("Multi-octet tag encoding unsupported"):(t||(n|=32),n|=f.tagClassByName[r||"universal"]<<6)}var s=e("util"),a=e("buffer").Buffer,h=e("../../asn1"),c=h.base,u=h.bignum,f=h.constants.der;t.exports=r,r.prototype.encode=function(e,t){return this.tree._encode(e,t).join()},s.inherits(i,c.Node),i.prototype._encodeComposite=function(e,t,r,i){var n=o(e,t,r,this.reporter);if(i.length<128){var s=new a(2);return s[0]=n,s[1]=i.length,this._createEncoderBuffer([s,i])}for(var h=1,c=i.length;c>=256;c>>=8)h++;var s=new a(2+h);s[0]=n,s[1]=128|h;for(var c=1+h,u=i.length;u>0;c--,u>>=8)s[c]=255&u;return this._createEncoderBuffer([s,i])},i.prototype._encodeStr=function(e,t){return"octstr"===t?this._createEncoderBuffer(e):"bitstr"===t?this._createEncoderBuffer([0|e.unused,e.data]):"ia5str"===t?this._createEncoderBuffer(e):this.reporter.error("Encoding of string type: "+t+" unsupported")},i.prototype._encodeObjid=function(e,t,r){if("string"==typeof e){if(!t)return this.reporter.error("string objid given, but no values map found");if(!t.hasOwnProperty(e))return this.reporter.error("objid not found in values map");e=t[e].split(/\s+/g);for(var i=0;i<e.length;i++)e[i]|=0}else Array.isArray(e)&&(e=e.slice());if(!Array.isArray(e))return this.reporter.error("objid() should be either array or string, got: "+JSON.stringify(e));if(!r){if(e[1]>=40)return this.reporter.error("Second objid identifier OOB");e.splice(0,2,40*e[0]+e[1])}for(var n=0,i=0;i<e.length;i++){var o=e[i];for(n++;o>=128;o>>=7)n++}for(var s=new a(n),h=s.length-1,i=e.length-1;i>=0;i--){var o=e[i];for(s[h--]=127&o;(o>>=7)>0;)s[h--]=128|127&o}return this._createEncoderBuffer(s)},i.prototype._encodeTime=function(e,t){var r,i=new Date(e);return"gentime"===t?r=[i.getFullYear(),n(i.getUTCMonth()+1),n(i.getUTCDate()),n(i.getUTCHours()),n(i.getUTCMinutes()),n(i.getUTCSeconds()),"Z"].join(""):"utctime"===t?r=[i.getFullYear()%100,n(i.getUTCMonth()+1),n(i.getUTCDate()),n(i.getUTCHours()),n(i.getUTCMinutes()),n(i.getUTCSeconds()),"Z"].join(""):this.reporter.error("Encoding "+t+" time is not supported yet"),this._encodeStr(r,"octstr")},i.prototype._encodeNull=function(){return this._createEncoderBuffer("")},i.prototype._encodeInt=function(e,t){if("string"==typeof e){if(!t)return this.reporter.error("String int or enum given, but no values map");if(!t.hasOwnProperty(e))return this.reporter.error("Values map doesn't contain: "+JSON.stringify(e));e=t[e]}if(null!==u&&e instanceof u){var r=e.toArray();e.sign===!1&&128&r[0]&&r.unshift(0),e=new a(r)}if(a.isBuffer(e)){var i=e.length;0===e.length&&i++;var n=new a(i);return e.copy(n),0===e.length&&(n[0]=0),this._createEncoderBuffer(n)}if(128>e)return this._createEncoderBuffer(e);if(256>e)return this._createEncoderBuffer([0,e]);for(var i=1,o=e;o>=256;o>>=8)i++;for(var n=new Array(i),o=n.length-1;o>=0;o--)n[o]=255&e,e>>=8;return 128&n[0]&&n.unshift(0),this._createEncoderBuffer(new a(n))},i.prototype._encodeBool=function(e){return this._createEncoderBuffer(e?255:0)},i.prototype._use=function(e,t){return"function"==typeof e&&(e=e(t)),e._getEncoder("der").tree},i.prototype._skipDefault=function(e,t,r){var i,n=this._baseState;if(null===n.default)return!1;var o=e.join();if(void 0===n.defaultBuffer&&(n.defaultBuffer=this._encodeValue(n.default,t,r).join()),o.length!==n.defaultBuffer.length)return!1;for(i=0;i<o.length;i++)if(o[i]!==n.defaultBuffer[i])return!1;return!0}},{"../../asn1":115,buffer:57,util:217}],126:[function(e,t,r){var i=r;i.der=e("./der")},{"./der":125}],127:[function(e,t,r){r.strip=function(e){e=e.toString();var t=/^-----BEGIN (.*)-----\n/,r=t.exec(e),i=r[1],n=new RegExp("\n-----END "+i+"-----(\n*)$"),o=e.slice(r[0].length).replace(n,"").replace(/\n/g,"");return{tag:i,base64:o}};var i=function(e,t){for(var r=[];e;){if(e.length<t){r.push(e);break}r.push(e.substr(0,t)),e=e.substr(t)}return r.join("\n")};r.assemble=function(e){var t=e.tag,r=e.base64,n="-----BEGIN "+t+"-----",o="-----END "+t+"-----";return n+"\n"+i(r,64)+"\n"+o+"\n"}},{}],128:[function(e,t){(function(r){function i(e,t,r){var i=c(t,r);if(i.curve)return n(e,i,r);if("dsa"===i.type)return o(e,i,r);for(var s=i.modulus.byteLength(),a=[0,1];e.length+a.length+1<s;)a.push(255);a.push(0);for(var h=-1;++h<e.length;)a.push(e[h]);var u=d(a,i,r);return u}function n(e,t,i){f.rand=i.randomBytes;var n;"1.3.132.0.10"===t.curve.join(".")&&(n=new f.ec("secp256k1"));var o=n.genKeyPair();o._importPrivate(t.privateKey);var s=o.sign(e);return new r(s.toDER())}function o(e,t,r){for(var i,n=t.params.priv_key,o=t.params.p,c=t.params.q,f=(u.mont(c),t.params.g),d=new u(0),l=new u(e),p=!1;p===!1;){for(;!d.cmpn(0);)i=a(c,r),d=h(f,i,o,c);p=i.invm(c).imul(l.add(n.imul(d).mod(c)).mod(c)).mod(c),p.cmpn(0)||(p=!1,d=new u(0))}return s(d,p)}function s(e,t){e=e.toArray(),t=t.toArray(),128&e[0]&&(e=[0].concat(e)),128&t[0]&&(t=[0].concat(t));var i=e.length+t.length+4,n=[48,i,2,e.length];return n=n.concat(e,[2,t.length],t),new r(n)}function a(e,t){for(var r=new u(t.randomBytes(e.byteLength()));r.cmp(e)>=0;)r=new u(t.randomBytes(e.byteLength()));return r}function h(e,t,r,i){return e.toRed(u.mont(r)).redPow(t).fromRed().mod(i)}var c=e("parse-asn1"),u=e("bn.js"),f=e("elliptic"),d=e("browserify-rsa");t.exports=i}).call(this,e("buffer").Buffer)},{"bn.js":86,"browserify-rsa":87,buffer:57,elliptic:89,"parse-asn1":113}],129:[function(e,t){(function(r){function i(e,t,i){var s=a(i);if("ec"===s.type)return n(e,t,s);if("dsa"===s.type)return o(e,t,s);for(var h=s.modulus.byteLength(),u=[0,1];t.length+u.length+1<h;)u.push(255);u.push(0);for(var f=-1;++f<t.length;)u.push(t[f]);u=t;var d=c.mont(s.modulus);e=new c(e).toRed(d),e=e.redPow(new c(s.publicExponent)),e=new r(e.fromRed().toArray()),e=e.slice(e.length-t.length);var l=0;for(h=e.length,f=-1;++f<h;)l+=e[f]^t[f];return!l}function n(e,t,r){var i;"1.3.132.0.10"===r.data.algorithm.curve.join(".")&&(i=new h.ec("secp256k1"));var n=r.data.subjectPrivateKey.data;return i.verify(t.toString("hex"),e.toString("hex"),n.toString("hex"))}function o(e,t,r){var i=r.data.p,n=r.data.q,o=r.data.g,h=r.data.pub_key,u=a.signature.decode(e,"der"),f=u.s,d=u.r;s(f,n),s(d,n);var l=(c.mont(n),c.mont(i)),p=f.invm(n),b=o.toRed(l).redPow(new c(t).mul(p).mod(n)).fromRed().mul(h.toRed(l).redPow(d.mul(p).mod(n)).fromRed()).mod(i).mod(n);return!b.cmp(d)}function s(e,t){if(e.cmpn(0)<=0)throw new Error("invalid sig");if(e.cmp(t)>=t)throw new Error("invalid sig")}var a=e("parse-asn1"),h=e("elliptic"),c=e("bn.js");t.exports=i}).call(this,e("buffer").Buffer)},{"bn.js":86,buffer:57,elliptic:89,"parse-asn1":113}],130:[function(e,t){(function(r){function i(e,t){o.rand=t.randomBytes,this.curve=new o.ec(e),this.keys=void 0}function n(e,t){Array.isArray(e)||(e=e.toArray());var i=new r(e);return t?i.toString(t):i}var o=e("elliptic"),s=e("bn.js");t.exports=i,i.prototype.generateKeys=function(e,t){return this.keys=this.curve.genKeyPair(),this.getPublicKey(e,t)},i.prototype.computeSecret=function(e,t,i){t=t||"utf8",r.isBuffer(e)||(e=new r(e,t)),e=new s(e),e=e.toString(16);var o=this.curve.keyPair(e,"hex").getPublic(),a=o.mul(this.keys.getPrivate()).getX();return n(a,i)},i.prototype.getPublicKey=function(e,t){var r=this.keys.getPublic("compressed"===t,!0);return"hybrid"===t&&(r[0]=r[r.length-1]%2?7:6),n(r,e)},i.prototype.getPrivateKey=function(e){return n(this.keys.getPrivate(),e)},i.prototype.setPublicKey=function(e,t){t=t||"utf8",r.isBuffer(e)||(e=new r(e,t));var i=new s(e);i=i.toArray(),this.keys._importPublicHex(i)},i.prototype.setPrivateKey=function(e,t){t=t||"utf8",r.isBuffer(e)||(e=new r(e,t));var i=new s(e);i=i.toString(16),this.keys._importPrivate(i)}}).call(this,e("buffer").Buffer)},{"bn.js":132,buffer:57,elliptic:133}],131:[function(e,t){var r=e("./ecdh");t.exports=function(e,t){t.createECDH=function(t){return new r(t,e)}}},{"./ecdh":130}],132:[function(e,t){t.exports=e(86)},{"/Volumes/Case Sensitive/perso/bonhomme/node_modules/browserify/node_modules/crypto-browserify/node_modules/browserify-sign/node_modules/bn.js/lib/bn.js":86}],133:[function(e,t){t.exports=e(89)},{"../package.json":152,"./elliptic/curve":136,"./elliptic/curves":139,"./elliptic/ec":140,"./elliptic/hmac-drbg":143,"./elliptic/utils":144,"/Volumes/Case Sensitive/perso/bonhomme/node_modules/browserify/node_modules/crypto-browserify/node_modules/browserify-sign/node_modules/elliptic/lib/elliptic.js":89,brorand:145}],134:[function(e,t){t.exports=e(90)},{"../../elliptic":133,"/Volumes/Case Sensitive/perso/bonhomme/node_modules/browserify/node_modules/crypto-browserify/node_modules/browserify-sign/node_modules/elliptic/lib/elliptic/curve/base.js":90,assert:55,"bn.js":132}],135:[function(e,t){t.exports=e(91)},{"../../elliptic":133,"../curve":136,"/Volumes/Case Sensitive/perso/bonhomme/node_modules/browserify/node_modules/crypto-browserify/node_modules/browserify-sign/node_modules/elliptic/lib/elliptic/curve/edwards.js":91,assert:55,"bn.js":132,inherits:200}],136:[function(e,t){t.exports=e(92)},{"./base":134,"./edwards":135,"./mont":137,"./short":138,"/Volumes/Case Sensitive/perso/bonhomme/node_modules/browserify/node_modules/crypto-browserify/node_modules/browserify-sign/node_modules/elliptic/lib/elliptic/curve/index.js":92}],137:[function(e,t){t.exports=e(93)},{"../../elliptic":133,"../curve":136,"/Volumes/Case Sensitive/perso/bonhomme/node_modules/browserify/node_modules/crypto-browserify/node_modules/browserify-sign/node_modules/elliptic/lib/elliptic/curve/mont.js":93,assert:55,"bn.js":132,inherits:200}],138:[function(e,t){t.exports=e(94)},{"../../elliptic":133,"../curve":136,"/Volumes/Case Sensitive/perso/bonhomme/node_modules/browserify/node_modules/crypto-browserify/node_modules/browserify-sign/node_modules/elliptic/lib/elliptic/curve/short.js":94,assert:55,"bn.js":132,inherits:200}],139:[function(e,t){t.exports=e(95)},{"../elliptic":133,"/Volumes/Case Sensitive/perso/bonhomme/node_modules/browserify/node_modules/crypto-browserify/node_modules/browserify-sign/node_modules/elliptic/lib/elliptic/curves.js":95,assert:55,"bn.js":132,"hash.js":146}],140:[function(e,t){t.exports=e(96)},{"../../elliptic":133,"./key":141,"./signature":142,"/Volumes/Case Sensitive/perso/bonhomme/node_modules/browserify/node_modules/crypto-browserify/node_modules/browserify-sign/node_modules/elliptic/lib/elliptic/ec/index.js":96,assert:55,"bn.js":132}],141:[function(e,t){t.exports=e(97)},{"../../elliptic":133,"/Volumes/Case Sensitive/perso/bonhomme/node_modules/browserify/node_modules/crypto-browserify/node_modules/browserify-sign/node_modules/elliptic/lib/elliptic/ec/key.js":97,assert:55,"bn.js":132}],142:[function(e,t){t.exports=e(98)},{"../../elliptic":133,"/Volumes/Case Sensitive/perso/bonhomme/node_modules/browserify/node_modules/crypto-browserify/node_modules/browserify-sign/node_modules/elliptic/lib/elliptic/ec/signature.js":98,assert:55,"bn.js":132}],143:[function(e,t){t.exports=e(99)},{"../elliptic":133,"/Volumes/Case Sensitive/perso/bonhomme/node_modules/browserify/node_modules/crypto-browserify/node_modules/browserify-sign/node_modules/elliptic/lib/elliptic/hmac-drbg.js":99,assert:55,"hash.js":146}],144:[function(e,t){t.exports=e(100)},{"/Volumes/Case Sensitive/perso/bonhomme/node_modules/browserify/node_modules/crypto-browserify/node_modules/browserify-sign/node_modules/elliptic/lib/elliptic/utils.js":100,assert:55,"bn.js":132}],145:[function(e,t){t.exports=e(101)},{"/Volumes/Case Sensitive/perso/bonhomme/node_modules/browserify/node_modules/crypto-browserify/node_modules/browserify-sign/node_modules/elliptic/node_modules/brorand/index.js":101}],146:[function(e,t){t.exports=e(102)},{"./hash/common":147,"./hash/hmac":148,"./hash/ripemd":149,"./hash/sha":150,"./hash/utils":151,"/Volumes/Case Sensitive/perso/bonhomme/node_modules/browserify/node_modules/crypto-browserify/node_modules/browserify-sign/node_modules/elliptic/node_modules/hash.js/lib/hash.js":102}],147:[function(e,t){t.exports=e(103)},{"../hash":146,"/Volumes/Case Sensitive/perso/bonhomme/node_modules/browserify/node_modules/crypto-browserify/node_modules/browserify-sign/node_modules/elliptic/node_modules/hash.js/lib/hash/common.js":103}],148:[function(e,t){t.exports=e(104)},{"../hash":146,"/Volumes/Case Sensitive/perso/bonhomme/node_modules/browserify/node_modules/crypto-browserify/node_modules/browserify-sign/node_modules/elliptic/node_modules/hash.js/lib/hash/hmac.js":104}],149:[function(e,t){t.exports=e(105)},{"../hash":146,"/Volumes/Case Sensitive/perso/bonhomme/node_modules/browserify/node_modules/crypto-browserify/node_modules/browserify-sign/node_modules/elliptic/node_modules/hash.js/lib/hash/ripemd.js":105}],150:[function(e,t){t.exports=e(106)},{"../hash":146,"/Volumes/Case Sensitive/perso/bonhomme/node_modules/browserify/node_modules/crypto-browserify/node_modules/browserify-sign/node_modules/elliptic/node_modules/hash.js/lib/hash/sha.js":106}],151:[function(e,t){t.exports=e(107)},{"/Volumes/Case Sensitive/perso/bonhomme/node_modules/browserify/node_modules/crypto-browserify/node_modules/browserify-sign/node_modules/elliptic/node_modules/hash.js/lib/hash/utils.js":107}],152:[function(e,t){t.exports=e(108)},{"/Volumes/Case Sensitive/perso/bonhomme/node_modules/browserify/node_modules/crypto-browserify/node_modules/browserify-sign/node_modules/elliptic/package.json":108}],153:[function(e,t){(function(r){function i(e,t){t=t||"utf8",r.isBuffer(e)||(e=new r(e,t)),this._pub=new c(e)}function n(e,t){t=t||"utf8",r.isBuffer(e)||(e=new r(e,t)),this._priv=new c(e)}function o(e,t){var r=t.toString("hex"),i=[r,e.toString(16)].join("_");if(i in g)return g[i];var n=0;if(e.isEven()||!v.simpleSieve||!v.fermatTest(e)||!f.test(e))return n+=1,n+="02"===r||"05"===r?8:4,g[i]=n,n;f.test(e.shrn(1))||(n+=2);var o,r=t.toString("hex");switch(r){case"02":e.mod(d).cmp(l)&&(n+=8);break;case"05":o=e.mod(p),o.cmp(b)&&o.cmp(m)&&(n+=8);break;default:n+=4}return g[i]=n,n}function s(e,t){try{Object.defineProperty(e,"verifyError",{enumerable:!0,value:t,writable:!1})}catch(r){e.verifyError=t}}function a(e,t,r,a){this.setGenerator(t),this.__prime=new c(e),this._prime=c.mont(this.__prime),this._pub=void 0,this._priv=void 0,a?(this.setPublicKey=i,this.setPrivateKey=n,s(this,o(this.__prime,t))):s(this,8),this._makeNum=function(){return r.randomBytes(192)}}function h(e,t){var i=new r(e.toArray());return t?i.toString(t):i}var c=e("bn.js"),u=e("miller-rabin"),f=new u,d=new c(24),l=new c(11),p=new c(10),b=new c(3),m=new c(7),v=e("./generatePrime");t.exports=a;var g={};a.prototype.generateKeys=function(){return this._priv||(this._priv=new c(this._makeNum())),this._pub=this._gen.toRed(this._prime).redPow(this._priv).fromRed(),this.getPublicKey()},a.prototype.computeSecret=function(e){e=new c(e),e=e.toRed(this._prime);var t=e.redPow(this._priv).fromRed(),i=new r(t.toArray()),n=this.getPrime();if(i.length<n.length){var o=new r(n.length-i.length);o.fill(0),i=r.concat([o,i])}return i},a.prototype.getPublicKey=function(e){return h(this._pub,e)},a.prototype.getPrivateKey=function(e){return h(this._priv,e)},a.prototype.getPrime=function(e){return h(this.__prime,e)},a.prototype.getGenerator=function(e){return h(this._gen,e)},a.prototype.setGenerator=function(e,t){t=t||"utf8",r.isBuffer(e)||(e=new r(e,t)),this._gen=new c(e)}}).call(this,e("buffer").Buffer)},{"./generatePrime":154,"bn.js":156,buffer:57,"miller-rabin":157}],154:[function(e,t){function r(){if(null!==y)return y;var e=1048576,t=[];t[0]=2;for(var r=1,i=3;e>i;i+=2){for(var n=Math.ceil(Math.sqrt(i)),o=0;r>o&&t[o]<=n&&i%t[o]!==0;o++);r!==o&&t[o]<=n||(t[r++]=i)}return y=t,t}function i(e){for(var t=r(),i=0;i<t.length;i++)if(0===e.modn(t[i]))return!1;return!0}function n(e){var t=s.mont(e);return 0===u.toRed(t).redPow(e.subn(1)).fromRed().cmpn(1)}function o(e,t,r){function o(e){h=-1;var i=r.randomBytes(Math.ceil(e/8));i[0]|=192,i[i.length-1]|=3;var n,o=new s(i);if(t.cmp(u))if(t.cmp(f))y={major:[v],minor:[u]};else{for(n=o.mod(p);n.cmp(b);)o.iadd(v),n=o.mod(p);y={major:[v,d],minor:[u,l]}}else{for(;o.mod(a).cmp(m);)o.iadd(v);y={major:[a],minor:[g]}}return o}t=new s(t);for(var h,y,w=o(e),_=w.shrn(1);;){if(w.bitLength()>e&&(w=o(e),_=w.shrn(1)),h++,i(_)&&n(_)&&c.test(_)&&i(w)&&n(w)&&c.test(w))return w;w.iadd(y.major[h%y.major.length]),_.iadd(y.minor[h%y.minor.length])}}t.exports=o,o.simpleSieve=i,o.fermatTest=n;var s=e("bn.js"),a=new s(24),h=e("miller-rabin"),c=new h,u=(new s(1),new s(2)),f=new s(5),d=new s(16),l=new s(8),p=new s(10),b=new s(3),m=(new s(7),new s(11)),v=new s(4),g=new s(12),y=null},{"bn.js":156,"miller-rabin":157}],155:[function(e,t){(function(r){var i=e("./primes.json"),n=e("./dh"),o=e("./generatePrime");t.exports=function(e,t){function s(t){return new n(new r(i[t].prime,"hex"),new r(i[t].gen,"hex"),e)}function a(t,i,s,a){return(r.isBuffer(i)||"string"==typeof i&&-1===["hex","binary","base64"].indexOf(i))&&(a=s,s=i,i=void 0),i=i||"binary",a=a||"binary",s=s||new r([2]),r.isBuffer(s)||(s=new r(s,a)),"number"==typeof t?new n(o(t,s,e),s,e,!0):(r.isBuffer(t)||(t=new r(t,i)),new n(t,s,e,!0))}t.DiffieHellmanGroup=t.createDiffieHellmanGroup=t.getDiffieHellman=s,t.createDiffieHellman=t.DiffieHellman=a}}).call(this,e("buffer").Buffer)},{"./dh":153,"./generatePrime":154,"./primes.json":159,buffer:57}],156:[function(e,t){t.exports=e(86)},{"/Volumes/Case Sensitive/perso/bonhomme/node_modules/browserify/node_modules/crypto-browserify/node_modules/browserify-sign/node_modules/bn.js/lib/bn.js":86}],157:[function(e,t){function r(e){this.rand=e||new n.Rand}var i=e("bn.js"),n=e("brorand");t.exports=r,r.create=function(e){return new r(e)},r.prototype._rand=function(e){var t=e.bitLength(),r=this.rand.generate(Math.ceil(t/8));r[0]|=3;var n=7&t;return 0!==n&&(r[r.length-1]>>=7-n),new i(r)},r.prototype.test=function(e,t,r){var n=e.bitLength(),o=i.mont(e),s=new i(1).toRed(o);t||(t=Math.max(1,n/48|0));for(var a=e.subn(1),h=a.subn(1),c=0;!a.testn(c);c++);for(var u=e.shrn(c),f=a.toRed(o),d=!0;t>0;t--){var l=this._rand(h);r&&r(l);var p=l.toRed(o).redPow(u);if(0!==p.cmp(s)&&0!==p.cmp(f)){for(var b=1;c>b;b++){if(p=p.redSqr(),0===p.cmp(s))return!1;if(0===p.cmp(f))break}if(b===c)return!1}}return d},r.prototype.getDivisor=function(e,t){var r=e.bitLength(),n=i.mont(e),o=new i(1).toRed(n);t||(t=Math.max(1,r/48|0));for(var s=e.subn(1),a=s.subn(1),h=0;!s.testn(h);h++);for(var c=e.shrn(h),u=s.toRed(n),f=!0;t>0;t--){var d=this._rand(a),l=e.gcd(d);if(0!==l.cmpn(1))return l;var p=d.toRed(n).redPow(c);
if(0!==p.cmp(o)&&0!==p.cmp(u)){for(var b=1;h>b;b++){if(p=p.redSqr(),0===p.cmp(o))return p.fromRed().subn(1).gcd(e);if(0===p.cmp(u))break}if(b===h)return p=p.redSqr(),p.fromRed().subn(1).gcd(e)}}return f}},{"bn.js":156,brorand:158}],158:[function(e,t){t.exports=e(101)},{"/Volumes/Case Sensitive/perso/bonhomme/node_modules/browserify/node_modules/crypto-browserify/node_modules/browserify-sign/node_modules/elliptic/node_modules/brorand/index.js":101}],159:[function(e,t){t.exports={modp1:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a63a3620ffffffffffffffff"},modp2:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece65381ffffffffffffffff"},modp5:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca237327ffffffffffffffff"},modp14:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aacaa68ffffffffffffffff"},modp15:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a93ad2caffffffffffffffff"},modp16:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c934063199ffffffffffffffff"},modp17:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c93402849236c3fab4d27c7026c1d4dcb2602646dec9751e763dba37bdf8ff9406ad9e530ee5db382f413001aeb06a53ed9027d831179727b0865a8918da3edbebcf9b14ed44ce6cbaced4bb1bdb7f1447e6cc254b332051512bd7af426fb8f401378cd2bf5983ca01c64b92ecf032ea15d1721d03f482d7ce6e74fef6d55e702f46980c82b5a84031900b1c9e59e7c97fbec7e8f323a97a7e36cc88be0f1d45b7ff585ac54bd407b22b4154aacc8f6d7ebf48e1d814cc5ed20f8037e0a79715eef29be32806a1d58bb7c5da76f550aa3d8a1fbff0eb19ccb1a313d55cda56c9ec2ef29632387fe8d76e3c0468043e8f663f4860ee12bf2d5b0b7474d6e694f91e6dcc4024ffffffffffffffff"},modp18:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c93402849236c3fab4d27c7026c1d4dcb2602646dec9751e763dba37bdf8ff9406ad9e530ee5db382f413001aeb06a53ed9027d831179727b0865a8918da3edbebcf9b14ed44ce6cbaced4bb1bdb7f1447e6cc254b332051512bd7af426fb8f401378cd2bf5983ca01c64b92ecf032ea15d1721d03f482d7ce6e74fef6d55e702f46980c82b5a84031900b1c9e59e7c97fbec7e8f323a97a7e36cc88be0f1d45b7ff585ac54bd407b22b4154aacc8f6d7ebf48e1d814cc5ed20f8037e0a79715eef29be32806a1d58bb7c5da76f550aa3d8a1fbff0eb19ccb1a313d55cda56c9ec2ef29632387fe8d76e3c0468043e8f663f4860ee12bf2d5b0b7474d6e694f91e6dbe115974a3926f12fee5e438777cb6a932df8cd8bec4d073b931ba3bc832b68d9dd300741fa7bf8afc47ed2576f6936ba424663aab639c5ae4f5683423b4742bf1c978238f16cbe39d652de3fdb8befc848ad922222e04a4037c0713eb57a81a23f0c73473fc646cea306b4bcbc8862f8385ddfa9d4b7fa2c087e879683303ed5bdd3a062b3cf5b3a278a66d2a13f83f44f82ddf310ee074ab6a364597e899a0255dc164f31cc50846851df9ab48195ded7ea1b1d510bd7ee74d73faf36bc31ecfa268359046f4eb879f924009438b481c6cd7889a002ed5ee382bc9190da6fc026e479558e4475677e9aa9e3050e2765694dfc81f56e880b96e7160c980dd98edd3dfffffffffffffffff"}}},{}],160:[function(e,t){(function(e){t.exports=function(t){function r(e,t,r,n,o,s){if("function"==typeof o&&(s=o,o=void 0),"function"!=typeof s)throw new Error("No callback provided to pbkdf2");setTimeout(function(){var a;try{a=i(e,t,r,n,o)}catch(e){return s(e)}s(void 0,a)})}function i(r,i,n,o,s){if("number"!=typeof n)throw new TypeError("Iterations not a number");if(0>n)throw new TypeError("Bad iterations");if("number"!=typeof o)throw new TypeError("Key length not a number");if(0>o)throw new TypeError("Bad key length");s=s||"sha1",e.isBuffer(r)||(r=new e(r)),e.isBuffer(i)||(i=new e(i));var a,h,c,u=1,f=new e(o),d=new e(i.length+4);i.copy(d,0,0,i.length);for(var l=1;u>=l;l++){d.writeUInt32BE(l,i.length);var p=t.createHmac(s,r).update(d).digest();if(!a&&(a=p.length,c=new e(a),u=Math.ceil(o/a),h=o-(u-1)*a,o>(Math.pow(2,32)-1)*a))throw new TypeError("keylen exceeds maximum length");p.copy(c,0,0,a);for(var b=1;n>b;b++){p=t.createHmac(s,r).update(p).digest();for(var m=0;a>m;m++)c[m]^=p[m]}var v=(l-1)*a,g=l==u?h:a;c.copy(f,v,0,g)}return f}return{pbkdf2:r,pbkdf2Sync:i}}}).call(this,e("buffer").Buffer)},{buffer:57}],161:[function(e,t){t.exports=function(t,r){t.publicEncrypt=e("./publicEncrypt")(r),t.privateDecrypt=e("./privateDecrypt")(r)}},{"./privateDecrypt":185,"./publicEncrypt":186}],162:[function(e,t){(function(e){function r(t){var r=new e(4);return r.writeUInt32BE(t,0),r}t.exports=function(t,i,n){for(var o,s=new e(""),a=0;s.length<i;)o=r(a++),s=e.concat([s,n.createHash("sha1").update(t).update(o).digest()]);return s.slice(0,i)}}).call(this,e("buffer").Buffer)},{buffer:57}],163:[function(e,t){t.exports=e(88)},{"/Volumes/Case Sensitive/perso/bonhomme/node_modules/browserify/node_modules/crypto-browserify/node_modules/browserify-sign/node_modules/browserify-rsa/node_modules/bn.js/lib/bn.js":88}],164:[function(e,t){t.exports=e(87)},{"/Volumes/Case Sensitive/perso/bonhomme/node_modules/browserify/node_modules/crypto-browserify/node_modules/browserify-sign/node_modules/browserify-rsa/index.js":87,"bn.js":163,buffer:57}],165:[function(e,t){t.exports=e(109)},{"/Volumes/Case Sensitive/perso/bonhomme/node_modules/browserify/node_modules/crypto-browserify/node_modules/browserify-sign/node_modules/parse-asn1/EVP_BytesToKey.js":109,buffer:57}],166:[function(e,t){t.exports=e(110)},{"/Volumes/Case Sensitive/perso/bonhomme/node_modules/browserify/node_modules/crypto-browserify/node_modules/browserify-sign/node_modules/parse-asn1/aesid.json":110}],167:[function(e,t){t.exports=e(111)},{"/Volumes/Case Sensitive/perso/bonhomme/node_modules/browserify/node_modules/crypto-browserify/node_modules/browserify-sign/node_modules/parse-asn1/asn1.js":111,"asn1.js":171,"asn1.js-rfc3280":170}],168:[function(e,t){t.exports=e(112)},{"./EVP_BytesToKey":165,"/Volumes/Case Sensitive/perso/bonhomme/node_modules/browserify/node_modules/crypto-browserify/node_modules/browserify-sign/node_modules/parse-asn1/fixProc.js":112,buffer:57}],169:[function(e,t){t.exports=e(113)},{"./aesid.json":166,"./asn1":167,"./fixProc":168,"/Volumes/Case Sensitive/perso/bonhomme/node_modules/browserify/node_modules/crypto-browserify/node_modules/browserify-sign/node_modules/parse-asn1/index.js":113,buffer:57,pemstrip:184}],170:[function(e,t){t.exports=e(114)},{"/Volumes/Case Sensitive/perso/bonhomme/node_modules/browserify/node_modules/crypto-browserify/node_modules/browserify-sign/node_modules/parse-asn1/node_modules/asn1.js-rfc3280/index.js":114,"asn1.js":171}],171:[function(e,t){t.exports=e(115)},{"./asn1/api":172,"./asn1/base":174,"./asn1/constants":178,"./asn1/decoders":180,"./asn1/encoders":182,"/Volumes/Case Sensitive/perso/bonhomme/node_modules/browserify/node_modules/crypto-browserify/node_modules/browserify-sign/node_modules/parse-asn1/node_modules/asn1.js/lib/asn1.js":115,"bn.js":183}],172:[function(e,t){t.exports=e(116)},{"../asn1":171,"/Volumes/Case Sensitive/perso/bonhomme/node_modules/browserify/node_modules/crypto-browserify/node_modules/browserify-sign/node_modules/parse-asn1/node_modules/asn1.js/lib/asn1/api.js":116,util:217,vm:218}],173:[function(e,t){t.exports=e(117)},{"../base":174,"/Volumes/Case Sensitive/perso/bonhomme/node_modules/browserify/node_modules/crypto-browserify/node_modules/browserify-sign/node_modules/parse-asn1/node_modules/asn1.js/lib/asn1/base/buffer.js":117,assert:55,buffer:57,util:217}],174:[function(e,t){t.exports=e(118)},{"./buffer":173,"./node":175,"./reporter":176,"/Volumes/Case Sensitive/perso/bonhomme/node_modules/browserify/node_modules/crypto-browserify/node_modules/browserify-sign/node_modules/parse-asn1/node_modules/asn1.js/lib/asn1/base/index.js":118}],175:[function(e,t){t.exports=e(119)},{"../base":174,"/Volumes/Case Sensitive/perso/bonhomme/node_modules/browserify/node_modules/crypto-browserify/node_modules/browserify-sign/node_modules/parse-asn1/node_modules/asn1.js/lib/asn1/base/node.js":119,assert:55}],176:[function(e,t){t.exports=e(120)},{"/Volumes/Case Sensitive/perso/bonhomme/node_modules/browserify/node_modules/crypto-browserify/node_modules/browserify-sign/node_modules/parse-asn1/node_modules/asn1.js/lib/asn1/base/reporter.js":120,util:217}],177:[function(e,t){t.exports=e(121)},{"../constants":178,"/Volumes/Case Sensitive/perso/bonhomme/node_modules/browserify/node_modules/crypto-browserify/node_modules/browserify-sign/node_modules/parse-asn1/node_modules/asn1.js/lib/asn1/constants/der.js":121}],178:[function(e,t){t.exports=e(122)},{"./der":177,"/Volumes/Case Sensitive/perso/bonhomme/node_modules/browserify/node_modules/crypto-browserify/node_modules/browserify-sign/node_modules/parse-asn1/node_modules/asn1.js/lib/asn1/constants/index.js":122}],179:[function(e,t){t.exports=e(123)},{"../../asn1":171,"/Volumes/Case Sensitive/perso/bonhomme/node_modules/browserify/node_modules/crypto-browserify/node_modules/browserify-sign/node_modules/parse-asn1/node_modules/asn1.js/lib/asn1/decoders/der.js":123,util:217}],180:[function(e,t){t.exports=e(124)},{"./der":179,"/Volumes/Case Sensitive/perso/bonhomme/node_modules/browserify/node_modules/crypto-browserify/node_modules/browserify-sign/node_modules/parse-asn1/node_modules/asn1.js/lib/asn1/decoders/index.js":124}],181:[function(e,t){t.exports=e(125)},{"../../asn1":171,"/Volumes/Case Sensitive/perso/bonhomme/node_modules/browserify/node_modules/crypto-browserify/node_modules/browserify-sign/node_modules/parse-asn1/node_modules/asn1.js/lib/asn1/encoders/der.js":125,buffer:57,util:217}],182:[function(e,t){t.exports=e(126)},{"./der":181,"/Volumes/Case Sensitive/perso/bonhomme/node_modules/browserify/node_modules/crypto-browserify/node_modules/browserify-sign/node_modules/parse-asn1/node_modules/asn1.js/lib/asn1/encoders/index.js":126}],183:[function(e,t){t.exports=e(86)},{"/Volumes/Case Sensitive/perso/bonhomme/node_modules/browserify/node_modules/crypto-browserify/node_modules/browserify-sign/node_modules/bn.js/lib/bn.js":86}],184:[function(e,t){t.exports=e(127)},{"/Volumes/Case Sensitive/perso/bonhomme/node_modules/browserify/node_modules/crypto-browserify/node_modules/browserify-sign/node_modules/parse-asn1/node_modules/pemstrip/index.js":127}],185:[function(e,t){(function(r){function i(e,t,i){var n=(e.modulus,e.modulus.byteLength()),s=(t.length,i.createHash("sha1").update(new r("")).digest()),c=s.length;if(0!==t[0])throw new Error("decryption error");var u=t.slice(1,c+1),f=t.slice(c+1),d=h(u,a(f,c,i)),l=h(f,a(d,n-c-1,i));if(o(s,l.slice(0,c)))throw new Error("decryption error");for(var p=c;0===l[p];)p++;if(1!==l[p++])throw new Error("decryption error");return l.slice(p)}function n(e,t){for(var r=t.slice(0,2),i=2,n=0;0!==t[i++];)if(i>=t.length){n++;break}{var o=t.slice(2,i-1);t.slice(i-1,i)}return"0002"!==r.toString("hex")&&n++,o.length<8&&n++,t.slice(i)}function o(e,t){var r=0,i=e.length;e.length!==t.length&&(r++,i=Math.min(e.length,t.length));for(var n=-1;++n<i;)r+=e[n]^t[n];return r}var s=e("parse-asn1"),a=e("./mgf"),h=e("./xor"),c=e("bn.js"),u=e("browserify-rsa");t.exports=function(e){function t(t,o){var a;a=t.padding?t.padding:4;var h=s(t,e),f=h.modulus.byteLength();if(o.length>f||new c(o).cmp(h.modulus)>=0)throw new Error("decryption error");var d=u(o,h,e),l=new r(f-d.length);if(l.fill(0),d=r.concat([l,d],f),4===a)return i(h,d,e);if(1===a)return n(h,d,e);if(3===a)return d;throw new Error("unknown padding")}return t}}).call(this,e("buffer").Buffer)},{"./mgf":162,"./xor":187,"bn.js":163,"browserify-rsa":164,buffer:57,"parse-asn1":169}],186:[function(e,t){(function(r){function i(e,t,i){var n=e.modulus.byteLength(),o=t.length,s=i.createHash("sha1").update(new r("")).digest(),u=s.length,f=2*u;if(o>n-f-2)throw new Error("message too long");var d=new r(n-o-f-2);d.fill(0);var l=n-u-1,p=i.randomBytes(u),b=h(r.concat([s,d,new r([1]),t],l),a(p,l,i)),m=h(p,a(b,u,i));return new c(r.concat([new r([0]),m,b],n))}function n(e,t,i){var n=t.length,s=e.modulus.byteLength();if(n>s-11)throw new Error("message too long");var a=o(s-n-3,i);return new c(r.concat([new r([0,2]),a,new r([0]),t],s))}function o(e,t){for(var i,n=new r(e),o=0,s=t.randomBytes(2*e),a=0;e>o;)a===s.length&&(s=t.randomBytes(2*e),a=0),i=s[a++],i&&(n[o++]=i);return n}var s=e("parse-asn1"),a=e("./mgf"),h=e("./xor"),c=e("bn.js");t.exports=function(e){function t(t,o){var a;a=t.padding?t.padding:4;var h,u=s(t);if(4===a)h=i(u,o,e);else if(1===a)h=n(u,o,e);else{if(3!==a)throw new Error("unknown padding");if(h=new c(o),h.cmp(u.modulus)>=0)throw new Error("data too long for modulus")}var f=h.toRed(c.mont(u.modulus)).redPow(new c(u.publicExponent)).fromRed().toArray();return new r(f)}return t}}).call(this,e("buffer").Buffer)},{"./mgf":162,"./xor":187,"bn.js":163,buffer:57,"parse-asn1":169}],187:[function(e,t){t.exports=function(e,t){for(var r=e.length,i=-1;++i<r;)e[i]^=t[i];return e}},{}],188:[function(e,t){(function(e){function r(e,t,r){return e^t^r}function i(e,t,r){return e&t|~e&r}function n(e,t,r){return(e|~t)^r}function o(e,t,r){return e&r|t&~r}function s(e,t,r){return e^(t|~r)}function a(e,t){return e<<t|e>>>32-t}function h(t){var r=[1732584193,4023233417,2562383102,271733878,3285377520];"string"==typeof t&&(t=new e(t,"utf8"));var i=b(t),n=8*t.length,o=8*t.length;i[n>>>5]|=128<<24-n%32,i[(n+64>>>9<<4)+14]=16711935&(o<<8|o>>>24)|4278255360&(o<<24|o>>>8);for(var s=0;s<i.length;s+=16)v(r,i,s);for(var s=0;5>s;s++){var a=r[s];r[s]=16711935&(a<<8|a>>>24)|4278255360&(a<<24|a>>>8)}var h=m(r);return new e(h)}t.exports=h;var c=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],u=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],f=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],d=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11],l=[0,1518500249,1859775393,2400959708,2840853838],p=[1352829926,1548603684,1836072691,2053994217,0],b=function(e){for(var t=[],r=0,i=0;r<e.length;r++,i+=8)t[i>>>5]|=e[r]<<24-i%32;return t},m=function(e){for(var t=[],r=0;r<32*e.length;r+=8)t.push(e[r>>>5]>>>24-r%32&255);return t},v=function(e,t,h){for(var b=0;16>b;b++){var m=h+b,v=t[m];t[m]=16711935&(v<<8|v>>>24)|4278255360&(v<<24|v>>>8)}var g,y,w,_,x,S,T,A,E,C;S=g=e[0],T=y=e[1],A=w=e[2],E=_=e[3],C=x=e[4];for(var k,b=0;80>b;b+=1)k=g+t[h+c[b]]|0,k+=16>b?r(y,w,_)+l[0]:32>b?i(y,w,_)+l[1]:48>b?n(y,w,_)+l[2]:64>b?o(y,w,_)+l[3]:s(y,w,_)+l[4],k=0|k,k=a(k,f[b]),k=k+x|0,g=x,x=_,_=a(w,10),w=y,y=k,k=S+t[h+u[b]]|0,k+=16>b?s(T,A,E)+p[0]:32>b?o(T,A,E)+p[1]:48>b?n(T,A,E)+p[2]:64>b?i(T,A,E)+p[3]:r(T,A,E)+p[4],k=0|k,k=a(k,d[b]),k=k+C|0,S=C,C=E,E=a(A,10),A=T,T=k;k=e[1]+w+E|0,e[1]=e[2]+_+C|0,e[2]=e[3]+x+S|0,e[3]=e[4]+g+T|0,e[4]=e[0]+y+A|0,e[0]=k}}).call(this,e("buffer").Buffer)},{buffer:57}],189:[function(e,t){(function(e){function r(t,r){this._block=new e(t),this._finalSize=r,this._blockSize=t,this._len=0,this._s=0}r.prototype.init=function(){this._s=0,this._len=0},r.prototype.update=function(t,r){"string"==typeof t&&(r=r||"utf8",t=new e(t,r));for(var i=this._len+=t.length,n=this._s=this._s||0,o=0,s=this._block;i>n;){for(var a=Math.min(t.length,o+this._blockSize-n%this._blockSize),h=a-o,c=0;h>c;c++)s[n%this._blockSize+c]=t[c+o];n+=h,o+=h,n%this._blockSize===0&&this._update(s)}return this._s=n,this},r.prototype.digest=function(e){var t=8*this._len;this._block[this._len%this._blockSize]=128,this._block.fill(0,this._len%this._blockSize+1),t%(8*this._blockSize)>=8*this._finalSize&&(this._update(this._block),this._block.fill(0)),this._block.writeInt32BE(t,this._blockSize-4);var r=this._update(this._block)||this._hash();return e?r.toString(e):r},r.prototype._update=function(){throw new Error("_update must be implemented by subclass")},t.exports=r}).call(this,e("buffer").Buffer)},{buffer:57}],190:[function(e,t,r){var r=t.exports=function(e){var t=r[e.toLowerCase()];if(!t)throw new Error(e+" is not supported (we accept pull requests)");return new t};r.sha1=e("./sha1"),r.sha224=e("./sha224"),r.sha256=e("./sha256"),r.sha384=e("./sha384"),r.sha512=e("./sha512")},{"./sha1":191,"./sha224":192,"./sha256":193,"./sha384":194,"./sha512":195}],191:[function(e,t){(function(r){function i(){return m.length?m.pop().init():this instanceof i?(this._w=b,c.call(this,64,56),this._h=null,void this.init()):new i}function n(e,t,r,i){return 20>e?t&r|~t&i:40>e?t^r^i:60>e?t&r|t&i|r&i:t^r^i}function o(e){return 20>e?1518500249:40>e?1859775393:60>e?-1894007588:-899497514}function s(e,t){return e+t|0}function a(e,t){return e<<t|e>>>32-t}var h=e("util").inherits,c=e("./hash"),u=0,f=4,d=8,l=12,p=16,b=new("undefined"==typeof Int32Array?Array:Int32Array)(80),m=[];h(i,c),i.prototype.init=function(){return this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520,c.prototype.init.call(this),this},i.prototype._POOL=m,i.prototype._update=function(e){var t,r,i,h,c,u,f,d,l,p;t=u=this._a,r=f=this._b,i=d=this._c,h=l=this._d,c=p=this._e;for(var b=this._w,m=0;80>m;m++){var v=b[m]=16>m?e.readInt32BE(4*m):a(b[m-3]^b[m-8]^b[m-14]^b[m-16],1),g=s(s(a(t,5),n(m,r,i,h)),s(s(c,v),o(m)));c=h,h=i,i=a(r,30),r=t,t=g}this._a=s(t,u),this._b=s(r,f),this._c=s(i,d),this._d=s(h,l),this._e=s(c,p)},i.prototype._hash=function(){m.length<100&&m.push(this);var e=new r(20);return e.writeInt32BE(0|this._a,u),e.writeInt32BE(0|this._b,f),e.writeInt32BE(0|this._c,d),e.writeInt32BE(0|this._d,l),e.writeInt32BE(0|this._e,p),e},t.exports=i}).call(this,e("buffer").Buffer)},{"./hash":189,buffer:57,util:217}],192:[function(e,t){(function(r){function i(){this.init(),this._w=a,s.call(this,64,56)}var n=e("util").inherits,o=e("./sha256"),s=e("./hash"),a=new Array(64);n(i,o),i.prototype.init=function(){return this._a=-1056596264,this._b=914150663,this._c=812702999,this._d=-150054599,this._e=-4191439,this._f=1750603025,this._g=1694076839,this._h=-1090891868,this._len=this._s=0,this},i.prototype._hash=function(){var e=new r(28);return e.writeInt32BE(this._a,0),e.writeInt32BE(this._b,4),e.writeInt32BE(this._c,8),e.writeInt32BE(this._d,12),e.writeInt32BE(this._e,16),e.writeInt32BE(this._f,20),e.writeInt32BE(this._g,24),e},t.exports=i}).call(this,e("buffer").Buffer)},{"./hash":189,"./sha256":193,buffer:57,util:217}],193:[function(e,t){(function(r){function i(){this.init(),this._w=b,l.call(this,64,56)}function n(e,t){return e>>>t|e<<32-t}function o(e,t){return e>>>t}function s(e,t,r){return e&t^~e&r}function a(e,t,r){return e&t^e&r^t&r}function h(e){return n(e,2)^n(e,13)^n(e,22)}function c(e){return n(e,6)^n(e,11)^n(e,25)}function u(e){return n(e,7)^n(e,18)^o(e,3)}function f(e){return n(e,17)^n(e,19)^o(e,10)}var d=e("util").inherits,l=e("./hash"),p=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],b=new Array(64);d(i,l),i.prototype.init=function(){return this._a=1779033703,this._b=-1150833019,this._c=1013904242,this._d=-1521486534,this._e=1359893119,this._f=-1694144372,this._g=528734635,this._h=1541459225,this._len=this._s=0,this},i.prototype._update=function(e){var t,r,i,n,o,d,l,b,m,v,g=this._w;t=0|this._a,r=0|this._b,i=0|this._c,n=0|this._d,o=0|this._e,d=0|this._f,l=0|this._g,b=0|this._h;for(var y=0;64>y;y++){var w=g[y]=16>y?e.readInt32BE(4*y):f(g[y-2])+g[y-7]+u(g[y-15])+g[y-16];m=b+c(o)+s(o,d,l)+p[y]+w,v=h(t)+a(t,r,i),b=l,l=d,d=o,o=n+m,n=i,i=r,r=t,t=m+v}this._a=t+this._a|0,this._b=r+this._b|0,this._c=i+this._c|0,this._d=n+this._d|0,this._e=o+this._e|0,this._f=d+this._f|0,this._g=l+this._g|0,this._h=b+this._h|0},i.prototype._hash=function(){var e=new r(32);return e.writeInt32BE(this._a,0),e.writeInt32BE(this._b,4),e.writeInt32BE(this._c,8),e.writeInt32BE(this._d,12),e.writeInt32BE(this._e,16),e.writeInt32BE(this._f,20),e.writeInt32BE(this._g,24),e.writeInt32BE(this._h,28),e},t.exports=i}).call(this,e("buffer").Buffer)},{"./hash":189,buffer:57,util:217}],194:[function(e,t){(function(r){function i(){this.init(),this._w=a,s.call(this,128,112)}var n=e("util").inherits,o=e("./sha512"),s=e("./hash"),a=new Array(160);n(i,o),i.prototype.init=function(){return this._a=-876896931,this._b=1654270250,this._c=-1856437926,this._d=355462360,this._e=1731405415,this._f=-1900787065,this._g=-619958771,this._h=1203062813,this._al=-1056596264,this._bl=914150663,this._cl=812702999,this._dl=-150054599,this._el=-4191439,this._fl=1750603025,this._gl=1694076839,this._hl=-1090891868,this._len=this._s=0,this},i.prototype._hash=function(){function e(e,r,i){t.writeInt32BE(e,i),t.writeInt32BE(r,i+4)}var t=new r(48);return e(this._a,this._al,0),e(this._b,this._bl,8),e(this._c,this._cl,16),e(this._d,this._dl,24),e(this._e,this._el,32),e(this._f,this._fl,40),t},t.exports=i}).call(this,e("buffer").Buffer)},{"./hash":189,"./sha512":195,buffer:57,util:217}],195:[function(e,t){(function(r){function i(){this.init(),this._w=u,h.call(this,128,112)}function n(e,t,r){return e>>>r|t<<32-r}function o(e,t,r){return e&t^~e&r}function s(e,t,r){return e&t^e&r^t&r}var a=e("util").inherits,h=e("./hash"),c=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591],u=new Array(160);a(i,h),i.prototype.init=function(){return this._a=1779033703,this._b=-1150833019,this._c=1013904242,this._d=-1521486534,this._e=1359893119,this._f=-1694144372,this._g=528734635,this._h=1541459225,this._al=-205731576,this._bl=-2067093701,this._cl=-23791573,this._dl=1595750129,this._el=-1377402159,this._fl=725511199,this._gl=-79577749,this._hl=327033209,this._len=this._s=0,this},i.prototype._update=function(e){var t,r,i,a,h,u,f,d,l,p,b,m,v,g,y,w,_=this._w;t=0|this._a,r=0|this._b,i=0|this._c,a=0|this._d,h=0|this._e,u=0|this._f,f=0|this._g,d=0|this._h,l=0|this._al,p=0|this._bl,b=0|this._cl,m=0|this._dl,v=0|this._el,g=0|this._fl,y=0|this._gl,w=0|this._hl;for(var x=0;80>x;x++){var S,T,A=2*x;if(16>x)S=_[A]=e.readInt32BE(4*A),T=_[A+1]=e.readInt32BE(4*A+4);else{var E=_[A-30],C=_[A-30+1],k=n(E,C,1)^n(E,C,8)^E>>>7,R=n(C,E,1)^n(C,E,8)^n(C,E,7);E=_[A-4],C=_[A-4+1];var M=n(E,C,19)^n(C,E,29)^E>>>6,B=n(C,E,19)^n(E,C,29)^n(C,E,6),I=_[A-14],j=_[A-14+1],P=_[A-32],O=_[A-32+1];T=R+j,S=k+I+(R>>>0>T>>>0?1:0),T+=B,S=S+M+(B>>>0>T>>>0?1:0),T+=O,S=S+P+(O>>>0>T>>>0?1:0),_[A]=S,_[A+1]=T}var L=s(t,r,i),D=s(l,p,b),F=n(t,l,28)^n(l,t,2)^n(l,t,7),U=n(l,t,28)^n(t,l,2)^n(t,l,7),N=n(h,v,14)^n(h,v,18)^n(v,h,9),G=n(v,h,14)^n(v,h,18)^n(h,v,9),q=c[A],W=c[A+1],V=o(h,u,f),z=o(v,g,y),Y=w+G,X=d+N+(w>>>0>Y>>>0?1:0);Y+=z,X=X+V+(z>>>0>Y>>>0?1:0),Y+=W,X=X+q+(W>>>0>Y>>>0?1:0),Y+=T,X=X+S+(T>>>0>Y>>>0?1:0);var H=U+D,K=F+L+(U>>>0>H>>>0?1:0);d=f,w=y,f=u,y=g,u=h,g=v,v=m+Y|0,h=a+X+(m>>>0>v>>>0?1:0)|0,a=i,m=b,i=r,b=p,r=t,p=l,l=Y+H|0,t=X+K+(Y>>>0>l>>>0?1:0)|0}this._al=this._al+l|0,this._bl=this._bl+p|0,this._cl=this._cl+b|0,this._dl=this._dl+m|0,this._el=this._el+v|0,this._fl=this._fl+g|0,this._gl=this._gl+y|0,this._hl=this._hl+w|0,this._a=this._a+t+(this._al>>>0<l>>>0?1:0)|0,this._b=this._b+r+(this._bl>>>0<p>>>0?1:0)|0,this._c=this._c+i+(this._cl>>>0<b>>>0?1:0)|0,this._d=this._d+a+(this._dl>>>0<m>>>0?1:0)|0,this._e=this._e+h+(this._el>>>0<v>>>0?1:0)|0,this._f=this._f+u+(this._fl>>>0<g>>>0?1:0)|0,this._g=this._g+f+(this._gl>>>0<y>>>0?1:0)|0,this._h=this._h+d+(this._hl>>>0<w>>>0?1:0)|0},i.prototype._hash=function(){function e(e,r,i){t.writeInt32BE(e,i),t.writeInt32BE(r,i+4)}var t=new r(64);return e(this._a,this._al,0),e(this._b,this._bl,8),e(this._c,this._cl,16),e(this._d,this._dl,24),e(this._e,this._el,32),e(this._f,this._fl,40),e(this._g,this._gl,48),e(this._h,this._hl,56),t},t.exports=i}).call(this,e("buffer").Buffer)},{"./hash":189,buffer:57,util:217}],196:[function(e,t){"use strict";var r=e("pbkdf2-compat/pbkdf2");t.exports=function(e,t){t=t||{};var i=r(e);return t.pbkdf2=i.pbkdf2,t.pbkdf2Sync=i.pbkdf2Sync,t}},{"pbkdf2-compat/pbkdf2":160}],197:[function(e,t){(function(r,i){"use strict";!function(){var n=("undefined"==typeof window?r:window)||{},o=n.crypto||n.msCrypto||e("crypto");t.exports=function(e){if(o.getRandomValues){var t=new i(e);return o.getRandomValues(t),t}if(o.pseudoRandomBytes)return o.pseudoRandomBytes(e);throw new Error("pseudo random number generation not yet implemented for this browser\nuse chrome, FireFox or Internet Explorer 11")}}()}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer)},{buffer:57,crypto:56}],198:[function(e,t){(function(r,i){"use strict";!function(){var n=("undefined"==typeof window?r:window)||{},o=n.crypto||n.msCrypto||e("crypto");t.exports=function(e){if(o.getRandomValues){var t=new i(e);return o.getRandomValues(t),t}if(o.randomBytes)return o.randomBytes(e);throw new Error("secure random number generation not supported by this browser\nuse chrome, FireFox or Internet Explorer 11")}}()}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer)},{buffer:57,crypto:56}],199:[function(e,t){function r(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function i(e){return"function"==typeof e}function n(e){return"number"==typeof e
}function o(e){return"object"==typeof e&&null!==e}function s(e){return void 0===e}t.exports=r,r.EventEmitter=r,r.prototype._events=void 0,r.prototype._maxListeners=void 0,r.defaultMaxListeners=10,r.prototype.setMaxListeners=function(e){if(!n(e)||0>e||isNaN(e))throw TypeError("n must be a positive number");return this._maxListeners=e,this},r.prototype.emit=function(e){var t,r,n,a,h,c;if(this._events||(this._events={}),"error"===e&&(!this._events.error||o(this._events.error)&&!this._events.error.length)){if(t=arguments[1],t instanceof Error)throw t;throw TypeError('Uncaught, unspecified "error" event.')}if(r=this._events[e],s(r))return!1;if(i(r))switch(arguments.length){case 1:r.call(this);break;case 2:r.call(this,arguments[1]);break;case 3:r.call(this,arguments[1],arguments[2]);break;default:for(n=arguments.length,a=new Array(n-1),h=1;n>h;h++)a[h-1]=arguments[h];r.apply(this,a)}else if(o(r)){for(n=arguments.length,a=new Array(n-1),h=1;n>h;h++)a[h-1]=arguments[h];for(c=r.slice(),n=c.length,h=0;n>h;h++)c[h].apply(this,a)}return!0},r.prototype.addListener=function(e,t){var n;if(!i(t))throw TypeError("listener must be a function");if(this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,i(t.listener)?t.listener:t),this._events[e]?o(this._events[e])?this._events[e].push(t):this._events[e]=[this._events[e],t]:this._events[e]=t,o(this._events[e])&&!this._events[e].warned){var n;n=s(this._maxListeners)?r.defaultMaxListeners:this._maxListeners,n&&n>0&&this._events[e].length>n&&(this._events[e].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[e].length),"function"==typeof console.trace&&console.trace())}return this},r.prototype.on=r.prototype.addListener,r.prototype.once=function(e,t){function r(){this.removeListener(e,r),n||(n=!0,t.apply(this,arguments))}if(!i(t))throw TypeError("listener must be a function");var n=!1;return r.listener=t,this.on(e,r),this},r.prototype.removeListener=function(e,t){var r,n,s,a;if(!i(t))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;if(r=this._events[e],s=r.length,n=-1,r===t||i(r.listener)&&r.listener===t)delete this._events[e],this._events.removeListener&&this.emit("removeListener",e,t);else if(o(r)){for(a=s;a-->0;)if(r[a]===t||r[a].listener&&r[a].listener===t){n=a;break}if(0>n)return this;1===r.length?(r.length=0,delete this._events[e]):r.splice(n,1),this._events.removeListener&&this.emit("removeListener",e,t)}return this},r.prototype.removeAllListeners=function(e){var t,r;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[e]&&delete this._events[e],this;if(0===arguments.length){for(t in this._events)"removeListener"!==t&&this.removeAllListeners(t);return this.removeAllListeners("removeListener"),this._events={},this}if(r=this._events[e],i(r))this.removeListener(e,r);else for(;r.length;)this.removeListener(e,r[r.length-1]);return delete this._events[e],this},r.prototype.listeners=function(e){var t;return t=this._events&&this._events[e]?i(this._events[e])?[this._events[e]]:this._events[e].slice():[]},r.listenerCount=function(e,t){var r;return r=e._events&&e._events[t]?i(e._events[t])?1:e._events[t].length:0}},{}],200:[function(e,t){t.exports="function"==typeof Object.create?function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:function(e,t){e.super_=t;var r=function(){};r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e}},{}],201:[function(e,t){t.exports=Array.isArray||function(e){return"[object Array]"==Object.prototype.toString.call(e)}},{}],202:[function(e,t){function r(){}var i=t.exports={};i.nextTick=function(){var e="undefined"!=typeof window&&window.setImmediate,t="undefined"!=typeof window&&window.MutationObserver,r="undefined"!=typeof window&&window.postMessage&&window.addEventListener;if(e)return function(e){return window.setImmediate(e)};var i=[];if(t){var n=document.createElement("div"),o=new MutationObserver(function(){var e=i.slice();i.length=0,e.forEach(function(e){e()})});return o.observe(n,{attributes:!0}),function(e){i.length||n.setAttribute("yes","no"),i.push(e)}}return r?(window.addEventListener("message",function(e){var t=e.source;if((t===window||null===t)&&"process-tick"===e.data&&(e.stopPropagation(),i.length>0)){var r=i.shift();r()}},!0),function(e){i.push(e),window.postMessage("process-tick","*")}):function(e){setTimeout(e,0)}}(),i.title="browser",i.browser=!0,i.env={},i.argv=[],i.on=r,i.addListener=r,i.once=r,i.off=r,i.removeListener=r,i.removeAllListeners=r,i.emit=r,i.binding=function(){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(){throw new Error("process.chdir is not supported")}},{}],203:[function(e,t){t.exports=e("./lib/_stream_duplex.js")},{"./lib/_stream_duplex.js":204}],204:[function(e,t){(function(r){function i(e){return this instanceof i?(h.call(this,e),c.call(this,e),e&&e.readable===!1&&(this.readable=!1),e&&e.writable===!1&&(this.writable=!1),this.allowHalfOpen=!0,e&&e.allowHalfOpen===!1&&(this.allowHalfOpen=!1),void this.once("end",n)):new i(e)}function n(){this.allowHalfOpen||this._writableState.ended||r.nextTick(this.end.bind(this))}function o(e,t){for(var r=0,i=e.length;i>r;r++)t(e[r],r)}t.exports=i;var s=Object.keys||function(e){var t=[];for(var r in e)t.push(r);return t},a=e("core-util-is");a.inherits=e("inherits");var h=e("./_stream_readable"),c=e("./_stream_writable");a.inherits(i,h),o(s(c.prototype),function(e){i.prototype[e]||(i.prototype[e]=c.prototype[e])})}).call(this,e("_process"))},{"./_stream_readable":206,"./_stream_writable":208,_process:202,"core-util-is":209,inherits:200}],205:[function(e,t){function r(e){return this instanceof r?void i.call(this,e):new r(e)}t.exports=r;var i=e("./_stream_transform"),n=e("core-util-is");n.inherits=e("inherits"),n.inherits(r,i),r.prototype._transform=function(e,t,r){r(null,e)}},{"./_stream_transform":207,"core-util-is":209,inherits:200}],206:[function(e,t){(function(r){function i(t){t=t||{};var r=t.highWaterMark;this.highWaterMark=r||0===r?r:16384,this.highWaterMark=~~this.highWaterMark,this.buffer=[],this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=!1,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.calledRead=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.objectMode=!!t.objectMode,this.defaultEncoding=t.defaultEncoding||"utf8",this.ranOut=!1,this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,t.encoding&&(k||(k=e("string_decoder/").StringDecoder),this.decoder=new k(t.encoding),this.encoding=t.encoding)}function n(e){return this instanceof n?(this._readableState=new i(e,this),this.readable=!0,void E.call(this)):new n(e)}function o(e,t,r,i,n){var o=c(t,r);if(o)e.emit("error",o);else if(null===r||void 0===r)t.reading=!1,t.ended||u(e,t);else if(t.objectMode||r&&r.length>0)if(t.ended&&!n){var a=new Error("stream.push() after EOF");e.emit("error",a)}else if(t.endEmitted&&n){var a=new Error("stream.unshift() after end event");e.emit("error",a)}else!t.decoder||n||i||(r=t.decoder.write(r)),t.length+=t.objectMode?1:r.length,n?t.buffer.unshift(r):(t.reading=!1,t.buffer.push(r)),t.needReadable&&f(e),l(e,t);else n||(t.reading=!1);return s(t)}function s(e){return!e.ended&&(e.needReadable||e.length<e.highWaterMark||0===e.length)}function a(e){if(e>=R)e=R;else{e--;for(var t=1;32>t;t<<=1)e|=e>>t;e++}return e}function h(e,t){return 0===t.length&&t.ended?0:t.objectMode?0===e?0:1:null===e||isNaN(e)?t.flowing&&t.buffer.length?t.buffer[0].length:t.length:0>=e?0:(e>t.highWaterMark&&(t.highWaterMark=a(e)),e>t.length?t.ended?t.length:(t.needReadable=!0,0):e)}function c(e,t){var r=null;return T.isBuffer(t)||"string"==typeof t||null===t||void 0===t||e.objectMode||(r=new TypeError("Invalid non-string/buffer chunk")),r}function u(e,t){if(t.decoder&&!t.ended){var r=t.decoder.end();r&&r.length&&(t.buffer.push(r),t.length+=t.objectMode?1:r.length)}t.ended=!0,t.length>0?f(e):w(e)}function f(e){var t=e._readableState;t.needReadable=!1,t.emittedReadable||(t.emittedReadable=!0,t.sync?r.nextTick(function(){d(e)}):d(e))}function d(e){e.emit("readable")}function l(e,t){t.readingMore||(t.readingMore=!0,r.nextTick(function(){p(e,t)}))}function p(e,t){for(var r=t.length;!t.reading&&!t.flowing&&!t.ended&&t.length<t.highWaterMark&&(e.read(0),r!==t.length);)r=t.length;t.readingMore=!1}function b(e){return function(){var t=e._readableState;t.awaitDrain--,0===t.awaitDrain&&m(e)}}function m(e){function t(e){var t=e.write(r);!1===t&&i.awaitDrain++}var r,i=e._readableState;for(i.awaitDrain=0;i.pipesCount&&null!==(r=e.read());)if(1===i.pipesCount?t(i.pipes,0,null):_(i.pipes,t),e.emit("data",r),i.awaitDrain>0)return;return 0===i.pipesCount?(i.flowing=!1,void(A.listenerCount(e,"data")>0&&g(e))):void(i.ranOut=!0)}function v(){this._readableState.ranOut&&(this._readableState.ranOut=!1,m(this))}function g(e,t){var i=e._readableState;if(i.flowing)throw new Error("Cannot switch to old mode now.");var n=t||!1,o=!1;e.readable=!0,e.pipe=E.prototype.pipe,e.on=e.addListener=E.prototype.on,e.on("readable",function(){o=!0;for(var t;!n&&null!==(t=e.read());)e.emit("data",t);null===t&&(o=!1,e._readableState.needReadable=!0)}),e.pause=function(){n=!0,this.emit("pause")},e.resume=function(){n=!1,o?r.nextTick(function(){e.emit("readable")}):this.read(0),this.emit("resume")},e.emit("readable")}function y(e,t){var r,i=t.buffer,n=t.length,o=!!t.decoder,s=!!t.objectMode;if(0===i.length)return null;if(0===n)r=null;else if(s)r=i.shift();else if(!e||e>=n)r=o?i.join(""):T.concat(i,n),i.length=0;else if(e<i[0].length){var a=i[0];r=a.slice(0,e),i[0]=a.slice(e)}else if(e===i[0].length)r=i.shift();else{r=o?"":new T(e);for(var h=0,c=0,u=i.length;u>c&&e>h;c++){var a=i[0],f=Math.min(e-h,a.length);o?r+=a.slice(0,f):a.copy(r,h,0,f),f<a.length?i[0]=a.slice(f):i.shift(),h+=f}}return r}function w(e){var t=e._readableState;if(t.length>0)throw new Error("endReadable called on non-empty stream");!t.endEmitted&&t.calledRead&&(t.ended=!0,r.nextTick(function(){t.endEmitted||0!==t.length||(t.endEmitted=!0,e.readable=!1,e.emit("end"))}))}function _(e,t){for(var r=0,i=e.length;i>r;r++)t(e[r],r)}function x(e,t){for(var r=0,i=e.length;i>r;r++)if(e[r]===t)return r;return-1}t.exports=n;var S=e("isarray"),T=e("buffer").Buffer;n.ReadableState=i;var A=e("events").EventEmitter;A.listenerCount||(A.listenerCount=function(e,t){return e.listeners(t).length});var E=e("stream"),C=e("core-util-is");C.inherits=e("inherits");var k;C.inherits(n,E),n.prototype.push=function(e,t){var r=this._readableState;return"string"!=typeof e||r.objectMode||(t=t||r.defaultEncoding,t!==r.encoding&&(e=new T(e,t),t="")),o(this,r,e,t,!1)},n.prototype.unshift=function(e){var t=this._readableState;return o(this,t,e,"",!0)},n.prototype.setEncoding=function(t){k||(k=e("string_decoder/").StringDecoder),this._readableState.decoder=new k(t),this._readableState.encoding=t};var R=8388608;n.prototype.read=function(e){var t=this._readableState;t.calledRead=!0;var r,i=e;if(("number"!=typeof e||e>0)&&(t.emittedReadable=!1),0===e&&t.needReadable&&(t.length>=t.highWaterMark||t.ended))return f(this),null;if(e=h(e,t),0===e&&t.ended)return r=null,t.length>0&&t.decoder&&(r=y(e,t),t.length-=r.length),0===t.length&&w(this),r;var n=t.needReadable;return t.length-e<=t.highWaterMark&&(n=!0),(t.ended||t.reading)&&(n=!1),n&&(t.reading=!0,t.sync=!0,0===t.length&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1),n&&!t.reading&&(e=h(i,t)),r=e>0?y(e,t):null,null===r&&(t.needReadable=!0,e=0),t.length-=e,0!==t.length||t.ended||(t.needReadable=!0),t.ended&&!t.endEmitted&&0===t.length&&w(this),r},n.prototype._read=function(){this.emit("error",new Error("not implemented"))},n.prototype.pipe=function(e,t){function i(e){e===u&&o()}function n(){e.end()}function o(){e.removeListener("close",a),e.removeListener("finish",h),e.removeListener("drain",p),e.removeListener("error",s),e.removeListener("unpipe",i),u.removeListener("end",n),u.removeListener("end",o),(!e._writableState||e._writableState.needDrain)&&p()}function s(t){c(),e.removeListener("error",s),0===A.listenerCount(e,"error")&&e.emit("error",t)}function a(){e.removeListener("finish",h),c()}function h(){e.removeListener("close",a),c()}function c(){u.unpipe(e)}var u=this,f=this._readableState;switch(f.pipesCount){case 0:f.pipes=e;break;case 1:f.pipes=[f.pipes,e];break;default:f.pipes.push(e)}f.pipesCount+=1;var d=(!t||t.end!==!1)&&e!==r.stdout&&e!==r.stderr,l=d?n:o;f.endEmitted?r.nextTick(l):u.once("end",l),e.on("unpipe",i);var p=b(u);return e.on("drain",p),e._events&&e._events.error?S(e._events.error)?e._events.error.unshift(s):e._events.error=[s,e._events.error]:e.on("error",s),e.once("close",a),e.once("finish",h),e.emit("pipe",u),f.flowing||(this.on("readable",v),f.flowing=!0,r.nextTick(function(){m(u)})),e},n.prototype.unpipe=function(e){var t=this._readableState;if(0===t.pipesCount)return this;if(1===t.pipesCount)return e&&e!==t.pipes?this:(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,this.removeListener("readable",v),t.flowing=!1,e&&e.emit("unpipe",this),this);if(!e){var r=t.pipes,i=t.pipesCount;t.pipes=null,t.pipesCount=0,this.removeListener("readable",v),t.flowing=!1;for(var n=0;i>n;n++)r[n].emit("unpipe",this);return this}var n=x(t.pipes,e);return-1===n?this:(t.pipes.splice(n,1),t.pipesCount-=1,1===t.pipesCount&&(t.pipes=t.pipes[0]),e.emit("unpipe",this),this)},n.prototype.on=function(e,t){var r=E.prototype.on.call(this,e,t);if("data"!==e||this._readableState.flowing||g(this),"readable"===e&&this.readable){var i=this._readableState;i.readableListening||(i.readableListening=!0,i.emittedReadable=!1,i.needReadable=!0,i.reading?i.length&&f(this,i):this.read(0))}return r},n.prototype.addListener=n.prototype.on,n.prototype.resume=function(){g(this),this.read(0),this.emit("resume")},n.prototype.pause=function(){g(this,!0),this.emit("pause")},n.prototype.wrap=function(e){var t=this._readableState,r=!1,i=this;e.on("end",function(){if(t.decoder&&!t.ended){var e=t.decoder.end();e&&e.length&&i.push(e)}i.push(null)}),e.on("data",function(n){if(t.decoder&&(n=t.decoder.write(n)),(!t.objectMode||null!==n&&void 0!==n)&&(t.objectMode||n&&n.length)){var o=i.push(n);o||(r=!0,e.pause())}});for(var n in e)"function"==typeof e[n]&&"undefined"==typeof this[n]&&(this[n]=function(t){return function(){return e[t].apply(e,arguments)}}(n));var o=["error","close","destroy","pause","resume"];return _(o,function(t){e.on(t,i.emit.bind(i,t))}),i._read=function(){r&&(r=!1,e.resume())},i},n._fromList=y}).call(this,e("_process"))},{_process:202,buffer:57,"core-util-is":209,events:199,inherits:200,isarray:201,stream:214,"string_decoder/":215}],207:[function(e,t){function r(e,t){this.afterTransform=function(e,r){return i(t,e,r)},this.needTransform=!1,this.transforming=!1,this.writecb=null,this.writechunk=null}function i(e,t,r){var i=e._transformState;i.transforming=!1;var n=i.writecb;if(!n)return e.emit("error",new Error("no writecb in Transform class"));i.writechunk=null,i.writecb=null,null!==r&&void 0!==r&&e.push(r),n&&n(t);var o=e._readableState;o.reading=!1,(o.needReadable||o.length<o.highWaterMark)&&e._read(o.highWaterMark)}function n(e){if(!(this instanceof n))return new n(e);s.call(this,e);var t=(this._transformState=new r(e,this),this);this._readableState.needReadable=!0,this._readableState.sync=!1,this.once("finish",function(){"function"==typeof this._flush?this._flush(function(e){o(t,e)}):o(t)})}function o(e,t){if(t)return e.emit("error",t);var r=e._writableState,i=(e._readableState,e._transformState);if(r.length)throw new Error("calling transform done when ws.length != 0");if(i.transforming)throw new Error("calling transform done when still transforming");return e.push(null)}t.exports=n;var s=e("./_stream_duplex"),a=e("core-util-is");a.inherits=e("inherits"),a.inherits(n,s),n.prototype.push=function(e,t){return this._transformState.needTransform=!1,s.prototype.push.call(this,e,t)},n.prototype._transform=function(){throw new Error("not implemented")},n.prototype._write=function(e,t,r){var i=this._transformState;if(i.writecb=r,i.writechunk=e,i.writeencoding=t,!i.transforming){var n=this._readableState;(i.needTransform||n.needReadable||n.length<n.highWaterMark)&&this._read(n.highWaterMark)}},n.prototype._read=function(){var e=this._transformState;null!==e.writechunk&&e.writecb&&!e.transforming?(e.transforming=!0,this._transform(e.writechunk,e.writeencoding,e.afterTransform)):e.needTransform=!0}},{"./_stream_duplex":204,"core-util-is":209,inherits:200}],208:[function(e,t){(function(r){function i(e,t,r){this.chunk=e,this.encoding=t,this.callback=r}function n(e,t){e=e||{};var r=e.highWaterMark;this.highWaterMark=r||0===r?r:16384,this.objectMode=!!e.objectMode,this.highWaterMark=~~this.highWaterMark,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1;var i=e.decodeStrings===!1;this.decodeStrings=!i,this.defaultEncoding=e.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e){l(t,e)},this.writecb=null,this.writelen=0,this.buffer=[],this.errorEmitted=!1}function o(t){var r=e("./_stream_duplex");return this instanceof o||this instanceof r?(this._writableState=new n(t,this),this.writable=!0,void x.call(this)):new o(t)}function s(e,t,i){var n=new Error("write after end");e.emit("error",n),r.nextTick(function(){i(n)})}function a(e,t,i,n){var o=!0;if(!w.isBuffer(i)&&"string"!=typeof i&&null!==i&&void 0!==i&&!t.objectMode){var s=new TypeError("Invalid non-string/buffer chunk");e.emit("error",s),r.nextTick(function(){n(s)}),o=!1}return o}function h(e,t,r){return e.objectMode||e.decodeStrings===!1||"string"!=typeof t||(t=new w(t,r)),t}function c(e,t,r,n,o){r=h(t,r,n),w.isBuffer(r)&&(n="buffer");var s=t.objectMode?1:r.length;t.length+=s;var a=t.length<t.highWaterMark;return a||(t.needDrain=!0),t.writing?t.buffer.push(new i(r,n,o)):u(e,t,s,r,n,o),a}function u(e,t,r,i,n,o){t.writelen=r,t.writecb=o,t.writing=!0,t.sync=!0,e._write(i,n,t.onwrite),t.sync=!1}function f(e,t,i,n,o){i?r.nextTick(function(){o(n)}):o(n),e._writableState.errorEmitted=!0,e.emit("error",n)}function d(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0}function l(e,t){var i=e._writableState,n=i.sync,o=i.writecb;if(d(i),t)f(e,i,n,t,o);else{var s=v(e,i);s||i.bufferProcessing||!i.buffer.length||m(e,i),n?r.nextTick(function(){p(e,i,s,o)}):p(e,i,s,o)}}function p(e,t,r,i){r||b(e,t),i(),r&&g(e,t)}function b(e,t){0===t.length&&t.needDrain&&(t.needDrain=!1,e.emit("drain"))}function m(e,t){t.bufferProcessing=!0;for(var r=0;r<t.buffer.length;r++){var i=t.buffer[r],n=i.chunk,o=i.encoding,s=i.callback,a=t.objectMode?1:n.length;if(u(e,t,a,n,o,s),t.writing){r++;break}}t.bufferProcessing=!1,r<t.buffer.length?t.buffer=t.buffer.slice(r):t.buffer.length=0}function v(e,t){return t.ending&&0===t.length&&!t.finished&&!t.writing}function g(e,t){var r=v(e,t);return r&&(t.finished=!0,e.emit("finish")),r}function y(e,t,i){t.ending=!0,g(e,t),i&&(t.finished?r.nextTick(i):e.once("finish",i)),t.ended=!0}t.exports=o;var w=e("buffer").Buffer;o.WritableState=n;var _=e("core-util-is");_.inherits=e("inherits");var x=e("stream");_.inherits(o,x),o.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe. Not readable."))},o.prototype.write=function(e,t,r){var i=this._writableState,n=!1;return"function"==typeof t&&(r=t,t=null),w.isBuffer(e)?t="buffer":t||(t=i.defaultEncoding),"function"!=typeof r&&(r=function(){}),i.ended?s(this,i,r):a(this,i,e,r)&&(n=c(this,i,e,t,r)),n},o.prototype._write=function(e,t,r){r(new Error("not implemented"))},o.prototype.end=function(e,t,r){var i=this._writableState;"function"==typeof e?(r=e,e=null,t=null):"function"==typeof t&&(r=t,t=null),"undefined"!=typeof e&&null!==e&&this.write(e,t),i.ending||i.finished||y(this,i,r)}}).call(this,e("_process"))},{"./_stream_duplex":204,_process:202,buffer:57,"core-util-is":209,inherits:200,stream:214}],209:[function(e,t,r){(function(e){function t(e){return Array.isArray(e)}function i(e){return"boolean"==typeof e}function n(e){return null===e}function o(e){return null==e}function s(e){return"number"==typeof e}function a(e){return"string"==typeof e}function h(e){return"symbol"==typeof e}function c(e){return void 0===e}function u(e){return f(e)&&"[object RegExp]"===v(e)}function f(e){return"object"==typeof e&&null!==e}function d(e){return f(e)&&"[object Date]"===v(e)}function l(e){return f(e)&&("[object Error]"===v(e)||e instanceof Error)}function p(e){return"function"==typeof e}function b(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||"undefined"==typeof e}function m(t){return e.isBuffer(t)}function v(e){return Object.prototype.toString.call(e)}r.isArray=t,r.isBoolean=i,r.isNull=n,r.isNullOrUndefined=o,r.isNumber=s,r.isString=a,r.isSymbol=h,r.isUndefined=c,r.isRegExp=u,r.isObject=f,r.isDate=d,r.isError=l,r.isFunction=p,r.isPrimitive=b,r.isBuffer=m}).call(this,e("buffer").Buffer)},{buffer:57}],210:[function(e,t){t.exports=e("./lib/_stream_passthrough.js")},{"./lib/_stream_passthrough.js":205}],211:[function(e,t,r){var i=e("stream");r=t.exports=e("./lib/_stream_readable.js"),r.Stream=i,r.Readable=r,r.Writable=e("./lib/_stream_writable.js"),r.Duplex=e("./lib/_stream_duplex.js"),r.Transform=e("./lib/_stream_transform.js"),r.PassThrough=e("./lib/_stream_passthrough.js")},{"./lib/_stream_duplex.js":204,"./lib/_stream_passthrough.js":205,"./lib/_stream_readable.js":206,"./lib/_stream_transform.js":207,"./lib/_stream_writable.js":208,stream:214}],212:[function(e,t){t.exports=e("./lib/_stream_transform.js")},{"./lib/_stream_transform.js":207}],213:[function(e,t){t.exports=e("./lib/_stream_writable.js")},{"./lib/_stream_writable.js":208}],214:[function(e,t){function r(){i.call(this)}t.exports=r;var i=e("events").EventEmitter,n=e("inherits");n(r,i),r.Readable=e("readable-stream/readable.js"),r.Writable=e("readable-stream/writable.js"),r.Duplex=e("readable-stream/duplex.js"),r.Transform=e("readable-stream/transform.js"),r.PassThrough=e("readable-stream/passthrough.js"),r.Stream=r,r.prototype.pipe=function(e,t){function r(t){e.writable&&!1===e.write(t)&&c.pause&&c.pause()}function n(){c.readable&&c.resume&&c.resume()}function o(){u||(u=!0,e.end())}function s(){u||(u=!0,"function"==typeof e.destroy&&e.destroy())}function a(e){if(h(),0===i.listenerCount(this,"error"))throw e}function h(){c.removeListener("data",r),e.removeListener("drain",n),c.removeListener("end",o),c.removeListener("close",s),c.removeListener("error",a),e.removeListener("error",a),c.removeListener("end",h),c.removeListener("close",h),e.removeListener("close",h)}var c=this;c.on("data",r),e.on("drain",n),e._isStdio||t&&t.end===!1||(c.on("end",o),c.on("close",s));var u=!1;return c.on("error",a),e.on("error",a),c.on("end",h),c.on("close",h),e.on("close",h),e.emit("pipe",c),e}},{events:199,inherits:200,"readable-stream/duplex.js":203,"readable-stream/passthrough.js":210,"readable-stream/readable.js":211,"readable-stream/transform.js":212,"readable-stream/writable.js":213}],215:[function(e,t,r){function i(e){if(e&&!h(e))throw new Error("Unknown encoding: "+e)}function n(e){return e.toString(this.encoding)}function o(e){this.charReceived=e.length%2,this.charLength=this.charReceived?2:0}function s(e){this.charReceived=e.length%3,this.charLength=this.charReceived?3:0}var a=e("buffer").Buffer,h=a.isEncoding||function(e){switch(e&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}},c=r.StringDecoder=function(e){switch(this.encoding=(e||"utf8").toLowerCase().replace(/[-_]/,""),i(e),this.encoding){case"utf8":this.surrogateSize=3;break;case"ucs2":case"utf16le":this.surrogateSize=2,this.detectIncompleteChar=o;break;case"base64":this.surrogateSize=3,this.detectIncompleteChar=s;break;default:return void(this.write=n)}this.charBuffer=new a(6),this.charReceived=0,this.charLength=0};c.prototype.write=function(e){for(var t="";this.charLength;){var r=e.length>=this.charLength-this.charReceived?this.charLength-this.charReceived:e.length;if(e.copy(this.charBuffer,this.charReceived,0,r),this.charReceived+=r,this.charReceived<this.charLength)return"";e=e.slice(r,e.length),t=this.charBuffer.slice(0,this.charLength).toString(this.encoding);var i=t.charCodeAt(t.length-1);if(!(i>=55296&&56319>=i)){if(this.charReceived=this.charLength=0,0===e.length)return t;break}this.charLength+=this.surrogateSize,t=""}this.detectIncompleteChar(e);var n=e.length;this.charLength&&(e.copy(this.charBuffer,0,e.length-this.charReceived,n),n-=this.charReceived),t+=e.toString(this.encoding,0,n);var n=t.length-1,i=t.charCodeAt(n);if(i>=55296&&56319>=i){var o=this.surrogateSize;return this.charLength+=o,this.charReceived+=o,this.charBuffer.copy(this.charBuffer,o,0,o),e.copy(this.charBuffer,0,0,o),t.substring(0,n)}return t},c.prototype.detectIncompleteChar=function(e){for(var t=e.length>=3?3:e.length;t>0;t--){var r=e[e.length-t];if(1==t&&r>>5==6){this.charLength=2;break}if(2>=t&&r>>4==14){this.charLength=3;break}if(3>=t&&r>>3==30){this.charLength=4;break}}this.charReceived=t},c.prototype.end=function(e){var t="";if(e&&e.length&&(t=this.write(e)),this.charReceived){var r=this.charReceived,i=this.charBuffer,n=this.encoding;t+=i.slice(0,r).toString(n)}return t}},{buffer:57}],216:[function(e,t){t.exports=function(e){return e&&"object"==typeof e&&"function"==typeof e.copy&&"function"==typeof e.fill&&"function"==typeof e.readUInt8}},{}],217:[function(e,t,r){(function(t,i){function n(e,t){var i={seen:[],stylize:s};return arguments.length>=3&&(i.depth=arguments[2]),arguments.length>=4&&(i.colors=arguments[3]),b(t)?i.showHidden=t:t&&r._extend(i,t),_(i.showHidden)&&(i.showHidden=!1),_(i.depth)&&(i.depth=2),_(i.colors)&&(i.colors=!1),_(i.customInspect)&&(i.customInspect=!0),i.colors&&(i.stylize=o),h(i,e,i.depth)}function o(e,t){var r=n.styles[t];return r?"["+n.colors[r][0]+"m"+e+"["+n.colors[r][1]+"m":e}function s(e){return e}function a(e){var t={};return e.forEach(function(e){t[e]=!0}),t}function h(e,t,i){if(e.customInspect&&t&&E(t.inspect)&&t.inspect!==r.inspect&&(!t.constructor||t.constructor.prototype!==t)){var n=t.inspect(i,e);return y(n)||(n=h(e,n,i)),n}var o=c(e,t);if(o)return o;var s=Object.keys(t),b=a(s);if(e.showHidden&&(s=Object.getOwnPropertyNames(t)),A(t)&&(s.indexOf("message")>=0||s.indexOf("description")>=0))return u(t);if(0===s.length){if(E(t)){var m=t.name?": "+t.name:"";return e.stylize("[Function"+m+"]","special")}if(x(t))return e.stylize(RegExp.prototype.toString.call(t),"regexp");if(T(t))return e.stylize(Date.prototype.toString.call(t),"date");if(A(t))return u(t)}var v="",g=!1,w=["{","}"];if(p(t)&&(g=!0,w=["[","]"]),E(t)){var _=t.name?": "+t.name:"";v=" [Function"+_+"]"}if(x(t)&&(v=" "+RegExp.prototype.toString.call(t)),T(t)&&(v=" "+Date.prototype.toUTCString.call(t)),A(t)&&(v=" "+u(t)),0===s.length&&(!g||0==t.length))return w[0]+v+w[1];if(0>i)return x(t)?e.stylize(RegExp.prototype.toString.call(t),"regexp"):e.stylize("[Object]","special");e.seen.push(t);var S;return S=g?f(e,t,i,b,s):s.map(function(r){return d(e,t,i,b,r,g)}),e.seen.pop(),l(S,v,w)}function c(e,t){if(_(t))return e.stylize("undefined","undefined");if(y(t)){var r="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(r,"string")}return g(t)?e.stylize(""+t,"number"):b(t)?e.stylize(""+t,"boolean"):m(t)?e.stylize("null","null"):void 0}function u(e){return"["+Error.prototype.toString.call(e)+"]"}function f(e,t,r,i,n){for(var o=[],s=0,a=t.length;a>s;++s)o.push(B(t,String(s))?d(e,t,r,i,String(s),!0):"");return n.forEach(function(n){n.match(/^\d+$/)||o.push(d(e,t,r,i,n,!0))}),o}function d(e,t,r,i,n,o){var s,a,c;if(c=Object.getOwnPropertyDescriptor(t,n)||{value:t[n]},c.get?a=c.set?e.stylize("[Getter/Setter]","special"):e.stylize("[Getter]","special"):c.set&&(a=e.stylize("[Setter]","special")),B(i,n)||(s="["+n+"]"),a||(e.seen.indexOf(c.value)<0?(a=m(r)?h(e,c.value,null):h(e,c.value,r-1),a.indexOf("\n")>-1&&(a=o?a.split("\n").map(function(e){return"  "+e}).join("\n").substr(2):"\n"+a.split("\n").map(function(e){return"   "+e}).join("\n"))):a=e.stylize("[Circular]","special")),_(s)){if(o&&n.match(/^\d+$/))return a;s=JSON.stringify(""+n),s.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(s=s.substr(1,s.length-2),s=e.stylize(s,"name")):(s=s.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),s=e.stylize(s,"string"))}return s+": "+a}function l(e,t,r){var i=0,n=e.reduce(function(e,t){return i++,t.indexOf("\n")>=0&&i++,e+t.replace(/\u001b\[\d\d?m/g,"").length+1},0);return n>60?r[0]+(""===t?"":t+"\n ")+" "+e.join(",\n  ")+" "+r[1]:r[0]+t+" "+e.join(", ")+" "+r[1]}function p(e){return Array.isArray(e)}function b(e){return"boolean"==typeof e}function m(e){return null===e}function v(e){return null==e}function g(e){return"number"==typeof e}function y(e){return"string"==typeof e}function w(e){return"symbol"==typeof e}function _(e){return void 0===e}function x(e){return S(e)&&"[object RegExp]"===k(e)}function S(e){return"object"==typeof e&&null!==e}function T(e){return S(e)&&"[object Date]"===k(e)}function A(e){return S(e)&&("[object Error]"===k(e)||e instanceof Error)}function E(e){return"function"==typeof e}function C(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||"undefined"==typeof e}function k(e){return Object.prototype.toString.call(e)}function R(e){return 10>e?"0"+e.toString(10):e.toString(10)}function M(){var e=new Date,t=[R(e.getHours()),R(e.getMinutes()),R(e.getSeconds())].join(":");return[e.getDate(),O[e.getMonth()],t].join(" ")}function B(e,t){return Object.prototype.hasOwnProperty.call(e,t)}var I=/%[sdj%]/g;r.format=function(e){if(!y(e)){for(var t=[],r=0;r<arguments.length;r++)t.push(n(arguments[r]));return t.join(" ")}for(var r=1,i=arguments,o=i.length,s=String(e).replace(I,function(e){if("%%"===e)return"%";if(r>=o)return e;switch(e){case"%s":return String(i[r++]);case"%d":return Number(i[r++]);case"%j":try{return JSON.stringify(i[r++])}catch(e){return"[Circular]"}default:return e}}),a=i[r];o>r;a=i[++r])s+=m(a)||!S(a)?" "+a:" "+n(a);return s},r.deprecate=function(e,n){function o(){if(!s){if(t.throwDeprecation)throw new Error(n);t.traceDeprecation?console.trace(n):console.error(n),s=!0}return e.apply(this,arguments)}if(_(i.process))return function(){return r.deprecate(e,n).apply(this,arguments)};if(t.noDeprecation===!0)return e;var s=!1;return o};var j,P={};r.debuglog=function(e){if(_(j)&&(j=t.env.NODE_DEBUG||""),e=e.toUpperCase(),!P[e])if(new RegExp("\\b"+e+"\\b","i").test(j)){var i=t.pid;P[e]=function(){var t=r.format.apply(r,arguments);console.error("%s %d: %s",e,i,t)}}else P[e]=function(){};return P[e]},r.inspect=n,n.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},n.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},r.isArray=p,r.isBoolean=b,r.isNull=m,r.isNullOrUndefined=v,r.isNumber=g,r.isString=y,r.isSymbol=w,r.isUndefined=_,r.isRegExp=x,r.isObject=S,r.isDate=T,r.isError=A,r.isFunction=E,r.isPrimitive=C,r.isBuffer=e("./support/isBuffer");var O=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];r.log=function(){console.log("%s - %s",M(),r.format.apply(r,arguments))},r.inherits=e("inherits"),r._extend=function(e,t){if(!t||!S(t))return e;for(var r=Object.keys(t),i=r.length;i--;)e[r[i]]=t[r[i]];return e}}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./support/isBuffer":216,_process:202,inherits:200}],218:[function(require,module,exports){function Context(){}var indexOf=require("indexof"),Object_keys=function(e){if(Object.keys)return Object.keys(e);
var t=[];for(var r in e)t.push(r);return t},forEach=function(e,t){if(e.forEach)return e.forEach(t);for(var r=0;r<e.length;r++)t(e[r],r,e)},defineProp=function(){try{return Object.defineProperty({},"_",{}),function(e,t,r){Object.defineProperty(e,t,{writable:!0,enumerable:!1,configurable:!0,value:r})}}catch(e){return function(e,t,r){e[t]=r}}}(),globals=["Array","Boolean","Date","Error","EvalError","Function","Infinity","JSON","Math","NaN","Number","Object","RangeError","ReferenceError","RegExp","String","SyntaxError","TypeError","URIError","decodeURI","decodeURIComponent","encodeURI","encodeURIComponent","escape","eval","isFinite","isNaN","parseFloat","parseInt","undefined","unescape"];Context.prototype={};var Script=exports.Script=function(e){return this instanceof Script?void(this.code=e):new Script(e)};Script.prototype.runInContext=function(e){if(!(e instanceof Context))throw new TypeError("needs a 'context' argument.");var t=document.createElement("iframe");t.style||(t.style={}),t.style.display="none",document.body.appendChild(t);var r=t.contentWindow,i=r.eval,n=r.execScript;!i&&n&&(n.call(r,"null"),i=r.eval),forEach(Object_keys(e),function(t){r[t]=e[t]}),forEach(globals,function(t){e[t]&&(r[t]=e[t])});var o=Object_keys(r),s=i.call(r,this.code);return forEach(Object_keys(r),function(t){(t in e||-1===indexOf(o,t))&&(e[t]=r[t])}),forEach(globals,function(t){t in e||defineProp(e,t,r[t])}),document.body.removeChild(t),s},Script.prototype.runInThisContext=function(){return eval(this.code)},Script.prototype.runInNewContext=function(e){var t=Script.createContext(e),r=this.runInContext(t);return forEach(Object_keys(t),function(r){e[r]=t[r]}),r},forEach(Object_keys(Script.prototype),function(e){exports[e]=Script[e]=function(t){var r=Script(t);return r[e].apply(r,[].slice.call(arguments,1))}}),exports.createScript=function(e){return exports.Script(e)},exports.createContext=Script.createContext=function(e){var t=new Context;return"object"==typeof e&&forEach(Object_keys(e),function(r){t[r]=e[r]}),t}},{indexof:219}],219:[function(e,t){var r=[].indexOf;t.exports=function(e,t){if(r)return e.indexOf(t);for(var i=0;i<e.length;++i)if(e[i]===t)return i;return-1}},{}],220:[function(e,t,r){!function(){"use strict";function e(){try{"undefined"!=typeof AudioContext?t=new AudioContext:"undefined"!=typeof webkitAudioContext?t=new webkitAudioContext:i=!1}catch(e){i=!1}if(!i)if("undefined"!=typeof Audio)try{new Audio}catch(e){n=!0}else n=!0}var t=null,i=!0,n=!1;if(e(),i){var o="undefined"==typeof t.createGain?t.createGainNode():t.createGain();o.gain.value=1,o.connect(t.destination)}var s=function(){this.init()};s.prototype={init:function(){var e=this||a;return e._codecs={},e._howls=[],e._muted=!1,e._volume=1,e.iOSAutoEnable=!0,e.noAudio=n,e.usingWebAudio=i,e.ctx=t,n||e._setupCodecs(),e},volume:function(e){var t=this||a;if(e=parseFloat(e),"undefined"!=typeof e&&e>=0&&1>=e){t._volume=e,i&&(o.gain.value=e);for(var r=0;r<t._howls.length;r++)if(!t._howls[r]._webAudio)for(var n=t._howls[r]._getSoundIds(),s=0;s<n.length;s++){var h=t._howls[r]._soundById(n[s]);h&&h._node&&(h._node.volume=h._volume*e)}return t}return t._volume},mute:function(e){var t=this||a;t._muted=e,i&&(o.gain.value=e?0:t._volume);for(var r=0;r<t._howls.length;r++)if(!t._howls[r]._webAudio)for(var n=t._howls[r]._getSoundIds(),s=0;s<n.length;s++){var h=t._howls[r]._soundById(n[s]);h&&h._node&&(h._node.muted=e?!0:h._muted)}return t},codecs:function(e){return(this||a)._codecs[e]},_setupCodecs:function(){var e=this||a,t=new Audio,r=t.canPlayType("audio/mpeg;").replace(/^no$/,"");return e._codecs={mp3:!(!r&&!t.canPlayType("audio/mp3;").replace(/^no$/,"")),mpeg:!!r,opus:!!t.canPlayType('audio/ogg; codecs="opus"').replace(/^no$/,""),ogg:!!t.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),wav:!!t.canPlayType('audio/wav; codecs="1"').replace(/^no$/,""),aac:!!t.canPlayType("audio/aac;").replace(/^no$/,""),m4a:!!(t.canPlayType("audio/x-m4a;")||t.canPlayType("audio/m4a;")||t.canPlayType("audio/aac;")).replace(/^no$/,""),mp4:!!(t.canPlayType("audio/x-mp4;")||t.canPlayType("audio/mp4;")||t.canPlayType("audio/aac;")).replace(/^no$/,""),weba:!!t.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,""),webm:!!t.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")},e},_enableiOSAudio:function(){var e=this||a;if(!t||!e._iOSEnabled&&/iPhone|iPad|iPod/i.test(navigator.userAgent)){e._iOSEnabled=!1;var r=function(){var i=t.createBuffer(1,1,22050),n=t.createBufferSource();n.buffer=i,n.connect(t.destination),"undefined"==typeof n.start?n.noteOn(0):n.start(0),setTimeout(function(){(n.playbackState===n.PLAYING_STATE||n.playbackState===n.FINISHED_STATE)&&(e._iOSEnabled=!0,e.iOSAutoEnable=!1,window.removeEventListener("touchstart",r,!1))},0)};return window.addEventListener("touchstart",r,!1),e}}};var a=new s,h=function(e){var t=this;return e.src?void t.init(e):void console.error("An array of source files must be passed with any new Howl.")};h.prototype={init:function(e){var r=this;return r._autoplay=e.autoplay||!1,r._ext=e.ext||null,r._html5=e.html5||!1,r._muted=e.mute||!1,r._loop=e.loop||!1,r._pool=e.pool||5,r._preload="boolean"==typeof e.preload?e.preload:!0,r._rate=e.rate||1,r._sprite=e.sprite||{},r._src="string"!=typeof e.src?e.src:[e.src],r._volume=void 0!==e.volume?e.volume:1,r._duration=0,r._loaded=!1,r._sounds=[],r._endTimers={},r._onend=e.onend?[{fn:e.onend}]:[],r._onfaded=e.onfaded?[{fn:e.onfaded}]:[],r._onload=e.onload?[{fn:e.onload}]:[],r._onloaderror=e.onloaderror?[{fn:e.onloaderror}]:[],r._onpause=e.onpause?[{fn:e.onpause}]:[],r._onplay=e.onplay?[{fn:e.onplay}]:[],r._webAudio=i&&!r._html5,"undefined"!=typeof t&&t&&a.iOSAutoEnable&&a._enableiOSAudio(),a._howls.push(r),r._preload&&r.load(),r},load:function(){var e=this,t=null;if(n)return void e._emit("loaderror");"string"==typeof e._src&&(e._src=[e._src]);for(var r=0;r<e._src.length;r++){var i,o;if(e._ext&&e._ext[r]?i=e._ext[r]:(o=e._src[r],i=/^data:audio\/([^;,]+);/i.exec(o),i||(i=/\.([^.]+)$/.exec(o.split("?",1)[0])),i&&(i=i[1].toLowerCase())),a.codecs(i)){t=e._src[r];break}}return t?(e._src=t,new c(e),e._webAudio&&f(e),e):void e._emit("loaderror")},play:function(e){var r=this,i=null;if("number"==typeof e)i=e,e=null;else if("undefined"==typeof e){e="__default";for(var n=0,o=0;o<r._sounds.length;o++)r._sounds[o]._paused&&!r._sounds[o]._ended&&(n++,i=r._sounds[o]._id);1===n?e=null:i=null}var s=i?r._soundById(i):r._inactiveSound();if(!s)return null;if(i&&!e&&(e=s._sprite||"__default"),!r._loaded&&!r._sprite[e])return r.once("load",function(){r.play(r._soundById(s._id)?s._id:void 0)}),s._id;if(i&&!s._paused)return s._id;var h=s._seek>0?s._seek:r._sprite[e][0]/1e3,c=(r._sprite[e][0]+r._sprite[e][1])/1e3-h,u=!(!s._loop&&!r._sprite[e][2]),f=function(){r._emit("end",s._id),!r._webAudio&&u&&r.stop(s._id).play(s._id),r._webAudio&&u&&(r._emit("play",s._id),s._seek=s._start||0,s._playStart=t.currentTime,r._endTimers[s._id]=setTimeout(f,1e3*(s._stop-s._start)/Math.abs(r._rate))),r._webAudio&&!u&&(s._paused=!0,s._ended=!0,s._seek=s._start||0,r._clearTimer(s._id),s._node.bufferSource=null),r._webAudio||u||r.stop(s._id)};r._endTimers[s._id]=setTimeout(f,1e3*c/Math.abs(r._rate)),s._paused=!1,s._ended=!1,s._sprite=e,s._seek=h,s._start=r._sprite[e][0]/1e3,s._stop=(r._sprite[e][0]+r._sprite[e][1])/1e3,s._loop=u;var d=s._node;if(r._webAudio){var l=function(){r._refreshBuffer(s);var e=s._muted||r._muted?0:s._volume*a.volume();d.gain.setValueAtTime(e,t.currentTime),s._playStart=t.currentTime,"undefined"==typeof d.bufferSource.start?d.bufferSource.noteGrainOn(0,h,c):d.bufferSource.start(0,h,c),r._endTimers[s._id]||(r._endTimers[s._id]=setTimeout(f,1e3*c/Math.abs(r._rate))),setTimeout(function(){r._emit("play",s._id)},0)};r._loaded?l():(r.once("load",l),r._clearTimer(s._id))}else{var p=function(){d.currentTime=h,d.muted=s._muted||r._muted||a._muted||d.muted,d.volume=s._volume*a.volume(),d.playbackRate=r._rate,setTimeout(function(){d.play(),r._emit("play",s._id)},0)};if(4===d.readyState||!d.readyState&&navigator.isCocoonJS)p();else{var b=function(){r._endTimers[s._id]=setTimeout(f,1e3*c/Math.abs(r._rate)),p(),d.removeEventListener("canplaythrough",b,!1)};d.addEventListener("canplaythrough",b,!1),r._clearTimer(s._id)}}return s._id},pause:function(e){var t=this;if(!t._loaded)return t.once("play",function(){t.pause(e)}),t;for(var r=t._getSoundIds(e),i=0;i<r.length;i++){t._clearTimer(r[i]);var n=t._soundById(r[i]);if(n&&!n._paused){if(n._seek=t.seek(r[i]),n._paused=!0,t._webAudio){if(!n._node.bufferSource)return t;"undefined"==typeof n._node.bufferSource.stop?n._node.bufferSource.noteOff(0):n._node.bufferSource.stop(0),n._node.bufferSource=null}else isNaN(n._node.duration)||n._node.pause();arguments[1]||t._emit("pause",n._id)}}return t},stop:function(e){var t=this;if(!t._loaded)return"undefined"!=typeof t._sounds[0]._sprite&&t.once("play",function(){t.stop(e)}),t;for(var r=t._getSoundIds(e),i=0;i<r.length;i++){t._clearTimer(r[i]);var n=t._soundById(r[i]);if(n&&!n._paused)if(n._seek=n._start||0,n._paused=!0,n._ended=!0,t._webAudio&&n._node){if(!n._node.bufferSource)return t;"undefined"==typeof n._node.bufferSource.stop?n._node.bufferSource.noteOff(0):n._node.bufferSource.stop(0),n._node.bufferSource=null}else n._node&&!isNaN(n._node.duration)&&(n._node.pause(),n._node.currentTime=n._start||0)}return t},mute:function(e,r){var i=this;if(!i._loaded)return i.once("play",function(){i.mute(e,r)}),i;if("undefined"==typeof r){if("boolean"!=typeof e)return i._muted;i._muted=e}for(var n=i._getSoundIds(r),o=0;o<n.length;o++){var s=i._soundById(n[o]);s&&(s._muted=e,i._webAudio&&s._node?s._node.gain.setValueAtTime(e?0:s._volume*a.volume(),t.currentTime):s._node&&(s._node.muted=a._muted?!0:e))}return i},volume:function(){var e,r,i=this,n=arguments;if(0===n.length)return i._volume;if(1===n.length){var o=i._getSoundIds(),s=o.indexOf(n[0]);s>=0?r=parseInt(n[0],10):e=parseFloat(n[0])}else 2===n.length&&(e=parseFloat(n[0]),r=parseInt(n[1],10));var h;if(!("undefined"!=typeof e&&e>=0&&1>=e))return h=r?i._soundById(r):i._sounds[0],h?h._volume:0;if(!i._loaded)return i.once("play",function(){i.volume.apply(i,n)}),i;"undefined"==typeof r&&(i._volume=e),r=i._getSoundIds(r);for(var c=0;c<r.length;c++)h=i._soundById(r[c]),h&&(h._volume=e,i._webAudio&&h._node?h._node.gain.setValueAtTime(e*a.volume(),t.currentTime):h._node&&(h._node.volume=e*a.volume()));return i},fade:function(e,r,i,n){var o=this;if(!o._loaded)return o.once("play",function(){o.fade(e,r,i,n)}),o;o.volume(e,n);for(var s=o._getSoundIds(n),a=0;a<s.length;a++){var h=o._soundById(s[a]);if(h)if(o._webAudio){var c=t.currentTime,u=c+i/1e3;h._volume=e,h._node.gain.setValueAtTime(e,c),h._node.gain.linearRampToValueAtTime(r,u),setTimeout(function(e,i){setTimeout(function(){i._volume=r,o._emit("faded",e)},u-t.currentTime>0?Math.ceil(1e3*(u-t.currentTime)):0)}.bind(o,s[a],h),i)}else{var f=Math.abs(e-r),d=e>r?"out":"in",l=f/.01,p=i/l;!function(){var t=e,i=setInterval(function(e){t+="in"===d?.01:-.01,t=Math.max(0,t),t=Math.min(1,t),t=Math.round(100*t)/100,o.volume(t,e),t===r&&(clearInterval(i),o._emit("faded",e))}.bind(o,s[a]),p)}()}}return o},loop:function(){var e,t,r,i=this,n=arguments;if(0===n.length)return i._loop;if(1===n.length){if("boolean"!=typeof n[0])return r=i._soundById(parseInt(n[0],10)),r?r._loop:!1;e=n[0],i._loop=e}else 2===n.length&&(e=n[0],t=parseInt(n[1],10));for(var o=i._getSoundIds(t),s=0;s<o.length;s++)r=i._soundById(o[s]),r&&(r._loop=e);return i},seek:function(){var e,r,i=this,n=arguments;if(0===n.length)r=i._sounds[0]._id;else if(1===n.length){var o=i._getSoundIds(),s=o.indexOf(n[0]);s>=0?r=parseInt(n[0],10):(r=i._sounds[0]._id,e=parseFloat(n[0]))}else 2===n.length&&(e=parseFloat(n[0]),r=parseInt(n[1],10));if("undefined"==typeof r)return i;if(!i._loaded)return i.once("load",function(){i.seek.apply(i,n)}),i;var a=i._soundById(r);if(a){if(!(e>=0))return i._webAudio?a._seek+(t.currentTime-a._playStart):a._node.currentTime;var h=i.playing(r);h&&i.pause(r,!0),a._seek=e,i._clearTimer(r),h&&i.play(r)}return i},playing:function(e){var t=this,r=t._soundById(e)||t._sounds[0];return r?!r._paused:!1},duration:function(){return this._duration},unload:function(){for(var e=this,t=e._sounds,r=0;r<t.length;r++){t[r]._paused||(e.stop(t[r]._id),e._emit("end",t[r]._id)),e._webAudio||(t[r]._node.src="",t[r]._node.removeEventListener("error",t[r]._errorFn,!1),t[r]._node.removeEventListener("canplaythrough",t[r]._loadFn,!1)),delete t[r]._node,e._clearTimer(t[r]._id);var i=a._howls.indexOf(e);i>=0&&a._howls.splice(i,1)}return u&&delete u[e._src],e=null,null},on:function(e,t,r){var i=this,n=i["_on"+e];return"function"==typeof t&&n.push({id:r,fn:t}),i},off:function(e,t,r){var i=this,n=i["_on"+e];if(t){for(var o=0;o<n.length;o++)if(t===n[o].fn&&r===n[o].id){n.splice(o,1);break}}else n=[];return i},once:function(e,t,r){var i=this,n=function(){t.apply(i,arguments),i.off(e,n,r)};return i.on(e,n,r),i},_emit:function(e,t,r){for(var i=this,n=i["_on"+e],o=0;o<n.length;o++)n[o].id&&n[o].id!==t||setTimeout(function(e){e.call(this,t,r)}.bind(i,n[o].fn),0);return i},_clearTimer:function(e){var t=this;return t._endTimers[e]&&(clearTimeout(t._endTimers[e]),delete t._endTimers[e]),t},_soundById:function(e){for(var t=this,r=0;r<t._sounds.length;r++)if(e===t._sounds[r]._id)return t._sounds[r];return null},_inactiveSound:function(){var e=this;e._drain();for(var t=0;t<e._sounds.length;t++)if(e._sounds[t]._ended)return e._sounds[t].reset();return new c(e)},_drain:function(){var e=this,t=e._pool,r=0,i=0;if(!(e._sounds.length<t)){for(i=0;i<e._sounds.length;i++)e._sounds[i]._ended&&r++;for(i=e._sounds.length-1;i>=0;i--){if(t>=r)return;e._sounds[i]._ended&&(e._webAudio&&e._sounds[i]._node&&e._sounds[i]._node.disconnect(0),e._sounds.splice(i,1),r--)}}},_getSoundIds:function(e){var t=this;if("undefined"==typeof e){for(var r=[],i=0;i<t._sounds.length;i++)r.push(t._sounds[i]._id);return r}return[e]},_refreshBuffer:function(e){var r=this;return e._node.bufferSource=t.createBufferSource(),e._node.bufferSource.buffer=u[r._src],e._node.bufferSource.connect(e._panner?e._panner:e._node),e._node.bufferSource.loop=e._loop,e._loop&&(e._node.bufferSource.loopStart=e._start||0,e._node.bufferSource.loopEnd=e._stop),e._node.bufferSource.playbackRate.value=r._rate,r}};var c=function(e){this._parent=e,this.init()};if(c.prototype={init:function(){var e=this,t=e._parent;return e._muted=t._muted,e._loop=t._loop,e._volume=t._volume,e._muted=t._muted,e._seek=0,e._paused=!0,e._ended=!0,e._id=Math.round(Date.now()*Math.random()),t._sounds.push(e),e.create(),e},create:function(){var e=this,r=e._parent,i=a._muted||e._muted||e._parent._muted?0:e._volume*a.volume();return r._webAudio?(e._node="undefined"==typeof t.createGain?t.createGainNode():t.createGain(),e._node.gain.setValueAtTime(i,t.currentTime),e._node.paused=!0,e._node.connect(o)):(e._node=new Audio,e._errorFn=e._errorListener.bind(e),e._node.addEventListener("error",e._errorFn,!1),e._loadFn=e._loadListener.bind(e),e._node.addEventListener("canplaythrough",e._loadFn,!1),e._node.src=r._src,e._node.preload="auto",e._node.volume=i,e._node.load()),e},reset:function(){var e=this,t=e._parent;return e._muted=t._muted,e._loop=t._loop,e._volume=t._volume,e._muted=t._muted,e._seek=0,e._paused=!0,e._ended=!0,e._sprite=null,e._id=Math.round(Date.now()*Math.random()),e},_errorListener:function(){var e=this;e._node.error&&4===e._node.error.code&&(a.noAudio=!0),e._parent._emit("loaderror",e._id,e._node.error?e._node.error.code:0),e._node.removeEventListener("error",e._errorListener,!1)},_loadListener:function(){var e=this,t=e._parent;t._duration=Math.ceil(10*e._node.duration)/10,0===Object.keys(t._sprite).length&&(t._sprite={__default:[0,1e3*t._duration]}),t._loaded||(t._loaded=!0,t._emit("load")),t._autoplay&&t.play(),e._node.removeEventListener("canplaythrough",e._loadListener,!1)}},i)var u={},f=function(e){var t=e._src;if(u[t])return e._duration=u[t].duration,void p(e);if(/^data:[^;]+;base64,/.test(t)){window.atob=window.atob||function(e){for(var t,r,i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",n=String(e).replace(/=+$/,""),o=0,s=0,a="";r=n.charAt(s++);~r&&(t=o%4?64*t+r:r,o++%4)?a+=String.fromCharCode(255&t>>(-2*o&6)):0)r=i.indexOf(r);return a};for(var r=atob(t.split(",")[1]),i=new Uint8Array(r.length),n=0;n<r.length;++n)i[n]=r.charCodeAt(n);l(i.buffer,e)}else{var o=new XMLHttpRequest;o.open("GET",t,!0),o.responseType="arraybuffer",o.onload=function(){l(o.response,e)},o.onerror=function(){e._webAudio&&(e._html5=!0,e._webAudio=!1,e._sounds=[],delete u[t],e.load())},d(o)}},d=function(e){try{e.send()}catch(t){e.onerror()}},l=function(e,r){t.decodeAudioData(e,function(e){e&&(u[r._src]=e,p(r,e))},function(){r._emit("loaderror")})},p=function(e,t){t&&!e._duration&&(e._duration=t.duration),0===Object.keys(e._sprite).length&&(e._sprite={__default:[0,1e3*e._duration]}),e._loaded||(e._loaded=!0,e._emit("load")),e._autoplay&&e.play()};"function"==typeof define&&define.amd&&define("howler",function(){return{Howler:a,Howl:h}}),"undefined"!=typeof r&&(r.Howler=a,r.Howl=h),"undefined"!=typeof window&&(window.HowlerGlobal=s,window.Howler=a,window.Howl=h,window.Sound=c)}(),function(){"use strict";HowlerGlobal.prototype.init=function(e){return function(){var t=this;return t._pos=[0,0,0],t._orientation=[0,0,-1,0,1,0],t._velocity=[0,0,0],t._listenerAttr={dopplerFactor:1,speedOfSound:343.3},e.call(this,o)}}(HowlerGlobal.prototype.init),HowlerGlobal.prototype.pos=function(e,t,r){var i=this;return i.ctx&&i.ctx.listener?(t="number"!=typeof t?i._pos[1]:t,r="number"!=typeof r?i._pos[2]:r,"number"!=typeof e?i._pos:(i._pos=[e,t,r],i.ctx.listener.setPosition(i._pos[0],i._pos[1],i._pos[2]),i)):i},HowlerGlobal.prototype.orientation=function(e,t,r,i,n,o){var s=this;if(!s.ctx||!s.ctx.listener)return s;var a=s._orientation;return t="number"!=typeof t?a[1]:t,r="number"!=typeof r?a[2]:r,i="number"!=typeof i?a[3]:i,n="number"!=typeof n?a[4]:n,o="number"!=typeof o?a[5]:o,"number"!=typeof e?a:(s._orientation=[e,t,r,i,n,o],s.ctx.listener.setOrientation(a[0],a[1],a[2],a[3],a[4],a[5]),s)},HowlerGlobal.prototype.velocity=function(e,t,r){var i=this;return i.ctx&&i.ctx.listener?(t="number"!=typeof t?i._velocity[1]:t,r="number"!=typeof r?i._velocity[2]:r,"number"!=typeof e?i._velocity:(i._velocity=[e,t,r],i.ctx.listener.setVelocity(i._velocity[0],i._velocity[1],i._velocity[2]),i)):i},HowlerGlobal.prototype.listenerAttr=function(e){var t=this;if(!t.ctx||!t.ctx.listener)return t;var r=t._listenerAttr;return e?(t._listenerAttr={dopplerFactor:"undefined"!=typeof e.dopplerFactor?e.dopplerFactor:r.dopplerFactor,speedOfSound:"undefined"!=typeof e.speedOfSound?e.speedOfSound:r.speedOfSound},t.ctx.listener.dopplerFactor=r.dopplerFactor,t.ctx.listener.speedOfSound=r.speedOfSound,t):r},Howl.prototype.init=function(e){return function(t){var r=this;return r._orientation=t.orientation||[1,0,0],r._pos=t.pos||null,r._velocity=t.velocity||[0,0,0],r._pannerAttr={coneInnerAngle:"undefined"!=typeof t.coneInnerAngle?t.coneInnerAngle:360,coneOUterAngle:"undefined"!=typeof t.coneOUterAngle?t.coneOUterAngle:360,coneOuterGain:"undefined"!=typeof t.coneOuterGain?t.coneOuterGain:0,distanceModel:"undefined"!=typeof t.distanceModel?t.distanceModel:"inverse",maxDistance:"undefined"!=typeof t.maxDistance?t.maxDistance:1e4,panningModel:"undefined"!=typeof t.panningModel?t.panningModel:"HRTF",refDistance:"undefined"!=typeof t.refDistance?t.refDistance:1,rolloffFactor:"undefined"!=typeof t.rolloffFactor?t.rolloffFactor:1},e.call(this,t)}}(Howl.prototype.init),Howl.prototype.pos=function(t,r,i,n){var o=this;if(!o._webAudio)return o;if(!o._loaded)return o.once("play",function(){o.pos(t,r,i,n)}),o;if(r="number"!=typeof r?0:r,i="number"!=typeof i?-.5:i,"undefined"==typeof n){if("number"!=typeof t)return o._pos;o._pos=[t,r,i]}for(var s=o._getSoundIds(n),a=0;a<s.length;a++){var h=o._soundById(s[a]);if(h){if("number"!=typeof t)return h._pos;h._pos=[t,r,i],h._node&&(h._panner||e(h),h._panner.setPosition(t,r,i))}}return o},Howl.prototype.orientation=function(t,r,i,n){var o=this;if(!o._webAudio)return o;if(!o._loaded)return o.once("play",function(){o.orientation(t,r,i,n)}),o;if(r="number"!=typeof r?o._orientation[1]:r,i="number"!=typeof i?o._orientation[1]:i,"undefined"==typeof n){if("number"!=typeof t)return o._orientation;o._orientation=[t,r,i]}for(var s=o._getSoundIds(n),a=0;a<s.length;a++){var h=o._soundById(s[a]);if(h){if("number"!=typeof t)return h._orientation;h._orientation=[t,r,i],h._node&&(h._panner||e(h),h._panner.setOrientation(t,r,i))}}return o},Howl.prototype.velocity=function(t,r,i,n){var o=this;if(!o._webAudio)return o;if(!o._loaded)return o.once("play",function(){o.velocity(t,r,i,n)}),o;if(r="number"!=typeof r?o._velocity[1]:r,i="number"!=typeof i?o._velocity[1]:i,"undefined"==typeof n){if("number"!=typeof t)return o._velocity;o._velocity=[t,r,i]}for(var s=o._getSoundIds(n),a=0;a<s.length;a++){var h=o._soundById(s[a]);if(h){if("number"!=typeof t)return h._velocity;h._velocity=[t,r,i],h._node&&(h._panner||e(h),h._panner.setVelocity(t,r,i))}}return o},Howl.prototype.pannerAttr=function(){var t,r,i,n=this,o=arguments;if(!n._webAudio)return n;if(0===o.length)return n._pannerAttr;if(1===o.length){if("object"!=typeof o[0])return i=n._soundById(parseInt(o[0],10)),i?i._pannerAttr:n._pannerAttr;t=o[0],"undefined"==typeof r&&(n._pannerAttr={coneInnerAngle:"undefined"!=typeof t.coneInnerAngle?t.coneInnerAngle:n._coneInnerAngle,coneOUterAngle:"undefined"!=typeof t.coneOUterAngle?t.coneOUterAngle:n._coneOUterAngle,coneOuterGain:"undefined"!=typeof t.coneOuterGain?t.coneOuterGain:n._coneOuterGain,distanceModel:"undefined"!=typeof t.distanceModel?t.distanceModel:n._distanceModel,maxDistance:"undefined"!=typeof t.maxDistance?t.maxDistance:n._maxDistance,panningModel:"undefined"!=typeof t.panningModel?t.panningModel:n._panningModel,refDistance:"undefined"!=typeof t.refDistance?t.refDistance:n._refDistance,rolloffFactor:"undefined"!=typeof t.rolloffFactor?t.rolloffFactor:n._rolloffFactor})}else 2===o.length&&(t=o[0],r=parseInt(o[1],10));for(var s=n._getSoundIds(r),a=0;a<s.length;a++)if(i=n._soundById(s[a])){var h=i._pannerAttr;h={coneInnerAngle:"undefined"!=typeof t.coneInnerAngle?t.coneInnerAngle:h.coneInnerAngle,coneOUterAngle:"undefined"!=typeof t.coneOUterAngle?t.coneOUterAngle:h.coneOUterAngle,coneOuterGain:"undefined"!=typeof t.coneOuterGain?t.coneOuterGain:h.coneOuterGain,distanceModel:"undefined"!=typeof t.distanceModel?t.distanceModel:h.distanceModel,maxDistance:"undefined"!=typeof t.maxDistance?t.maxDistance:h.maxDistance,panningModel:"undefined"!=typeof t.panningModel?t.panningModel:h.panningModel,refDistance:"undefined"!=typeof t.refDistance?t.refDistance:h.refDistance,rolloffFactor:"undefined"!=typeof t.rolloffFactor?t.rolloffFactor:h.rolloffFactor};var c=i._panner;c?(c.coneInnerAngle=h.coneInnerAngle,c.coneOUterAngle=h.coneOUterAngle,c.coneOuterGain=h.coneOuterGain,c.distanceModel=h.distanceModel,c.maxDistance=h.maxDistance,c.panningModel=h.panningModel,c.refDistance=h.refDistance,c.rolloffFactor=h.rolloffFactor):(i._pos||(i._pos=n._pos||[0,0,-.5]),e(i))}return n},Sound.prototype.init=function(e){return function(){var t=this,r=t._parent;t._orientation=r._orientation,t._pos=r._pos,t._velocity=r._velocity,t._pannerAttr=r._pannerAttr,e.call(this),t._pos&&r.pos(t._pos[0],t._pos[1],t._pos[2],t._id)}}(Sound.prototype.init),Sound.prototype.reset=function(e){return function(){var t=this,r=t._parent;return t._orientation=r._orientation,t._pos=r._pos,t._velocity=r._velocity,t._pannerAttr=r._pannerAttr,e.call(this)}}(Sound.prototype.reset);var e=function(e){e._panner=Howler.ctx.createPanner(),e._panner.coneInnerAngle=e._pannerAttr.coneInnerAngle,e._panner.coneOUterAngle=e._pannerAttr.coneOUterAngle,e._panner.coneOuterGain=e._pannerAttr.coneOuterGain,e._panner.distanceModel=e._pannerAttr.distanceModel,e._panner.maxDistance=e._pannerAttr.maxDistance,e._panner.panningModel=e._pannerAttr.panningModel,e._panner.refDistance=e._pannerAttr.refDistance,e._panner.rolloffFactor=e._pannerAttr.rolloffFactor,e._panner.setPosition(e._pos[0],e._pos[1],e._pos[2]),e._panner.setOrientation(e._orientation[0],e._orientation[1],e._orientation[2]),e._panner.setVelocity(e._velocity[0],e._velocity[1],e._velocity[2]),e._panner.connect(e._node),e._paused||e._parent.pause(e._id).play(e._id)}}()},{}],221:[function(e,t){function r(){this.setSettings=function(e){for(var t=0;24>t;t++)this[String.fromCharCode(97+t)]=e[t]||0;this.c<.01&&(this.c=.01);var r=this.b+this.c+this.e;if(.18>r){var i=.18/r;this.b*=i,this.c*=i,this.e*=i}}}function i(){this._params=new r;var e,t,i,n,o,s,a,h,c,u,f,d;this.reset=function(){var e=this._params;n=100/(e.f*e.f+.001),o=100/(e.g*e.g+.001),s=1-e.h*e.h*e.h*.01,a=-e.i*e.i*e.i*1e-6,e.a||(f=.5-e.n/2,d=5e-5*-e.o),h=1+e.l*e.l*(e.l>0?-.9:10),c=0,u=1==e.m?0:(1-e.m)*(1-e.m)*2e4+32},this.totalReset=function(){this.reset();var r=this._params;return e=r.b*r.b*1e5,t=r.c*r.c*1e5,i=r.e*r.e*1e5+12,3*((e+t+i)/3|0)},this.synthWave=function(r,l){var p=this._params,b=1!=p.s||p.v,m=p.v*p.v*.1,v=1+3e-4*p.w,g=p.s*p.s*p.s*.1,y=1+1e-4*p.t,w=1!=p.s,_=p.x*p.x,x=p.g,S=p.q||p.r,T=p.r*p.r*p.r*.2,A=p.q*p.q*(p.q<0?-1020:1020),E=p.p?((1-p.p)*(1-p.p)*2e4|0)+32:0,C=p.d,k=p.j/2,R=p.k*p.k*.01,M=p.a,B=e,I=1/e,j=1/t,P=1/i,O=5/(1+p.u*p.u*20)*(.01+g);O>.8&&(O=.8),O=1-O;for(var L,D,F,U,N,G,q=!1,W=0,V=0,z=0,Y=0,X=0,H=0,K=0,J=0,$=0,Q=0,Z=new Array(1024),et=new Array(32),tt=Z.length;tt--;)Z[tt]=0;for(var tt=et.length;tt--;)et[tt]=2*Math.random()-1;for(var tt=0;l>tt;tt++){if(q)return tt;if(E&&++$>=E&&($=0,this.reset()),u&&++c>=u&&(u=0,n*=h),s+=a,n*=s,n>o&&(n=o,x>0&&(q=!0)),D=n,k>0&&(Q+=R,D*=1+Math.sin(Q)*k),D|=0,8>D&&(D=8),M||(f+=d,0>f?f=0:f>.5&&(f=.5)),++V>B)switch(V=0,++W){case 1:B=t;break;case 2:B=i}switch(W){case 0:z=V*I;break;case 1:z=1+2*(1-V*j)*C;break;case 2:z=1-V*P;break;case 3:z=0,q=!0}S&&(A+=T,F=0|A,0>F?F=-F:F>1023&&(F=1023)),b&&v&&(m*=v,1e-5>m?m=1e-5:m>.1&&(m=.1)),G=0;for(var rt=8;rt--;){if(K++,K>=D&&(K%=D,3==M))for(var it=et.length;it--;)et[it]=2*Math.random()-1;switch(M){case 0:N=f>K/D?.5:-.5;break;case 1:N=1-K/D*2;break;case 2:U=K/D,U=6.28318531*(U>.5?U-1:U),N=1.27323954*U+.405284735*U*U*(0>U?1:-1),N=.225*((0>N?-1:1)*N*N-N)+N;break;case 3:N=et[Math.abs(32*K/D|0)]}b&&(L=H,g*=y,0>g?g=0:g>.1&&(g=.1),w?(X+=(N-H)*g,X*=O):(H=N,X=0),H+=X,Y+=H-L,Y*=1-m,N=Y),S&&(Z[J%1024]=N,N+=Z[(J-F+1024)%1024],J++),G+=N}G*=.125*z*_,r[tt]=G>=1?32767:-1>=G?-32768:32767*G|0}return l}}var n=new i,o=function(e){n._params.setSettings(e);var t=n.totalReset(),r=new Uint8Array(4*((t+1)/2|0)+44),i=2*n.synthWave(new Uint16Array(r.buffer,44),t),o=new Uint32Array(r.buffer,0,44);o[0]=1179011410,o[1]=i+36,o[2]=1163280727,o[3]=544501094,o[4]=16,o[5]=65537,o[6]=44100,o[7]=88200,o[8]=1048578,o[9]=1635017060,o[10]=i,i+=44;for(var s=0,a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",h="data:audio/wav;base64,";i>s;s+=3){var c=r[s]<<16|r[s+1]<<8|r[s+2];h+=a[c>>18]+a[c>>12&63]+a[c>>6&63]+a[63&c]}return h};"function"==typeof e?t.exports=o:this.jsfxr=o},{}],222:[function(e,t,r){(function(e){(function(){function i(e,t,r){for(var i=(r||0)-1,n=e?e.length:0;++i<n;)if(e[i]===t)return i;return-1}function n(e,t){var r=typeof t;if(e=e.cache,"boolean"==r||null==t)return e[t]?0:-1;"number"!=r&&"string"!=r&&(r="object");var n="number"==r?t:w+t;return e=(e=e[r])&&e[n],"object"==r?e&&i(e,t)>-1?0:-1:e?0:-1}function o(e){var t=this.cache,r=typeof e;if("boolean"==r||null==e)t[e]=!0;else{"number"!=r&&"string"!=r&&(r="object");var i="number"==r?e:w+e,n=t[r]||(t[r]={});"object"==r?(n[i]||(n[i]=[])).push(e):n[i]=!0}}function s(e){return e.charCodeAt(0)}function a(e,t){for(var r=e.criteria,i=t.criteria,n=-1,o=r.length;++n<o;){var s=r[n],a=i[n];if(s!==a){if(s>a||"undefined"==typeof s)return 1;if(a>s||"undefined"==typeof a)return-1}}return e.index-t.index}function h(e){var t=-1,r=e.length,i=e[0],n=e[r/2|0],s=e[r-1];if(i&&"object"==typeof i&&n&&"object"==typeof n&&s&&"object"==typeof s)return!1;var a=f();a.false=a.null=a.true=a.undefined=!1;var h=f();for(h.array=e,h.cache=a,h.push=o;++t<r;)h.push(e[t]);return h}function c(e){return"\\"+J[e]}function u(){return v.pop()||[]}function f(){return g.pop()||{array:null,cache:null,criteria:null,false:!1,index:0,null:!1,number:null,object:null,push:null,string:null,true:!1,undefined:!1,value:null}}function d(e){e.length=0,v.length<x&&v.push(e)}function l(e){var t=e.cache;t&&l(t),e.array=e.cache=e.criteria=e.object=e.number=e.string=e.value=null,g.length<x&&g.push(e)}function p(e,t,r){t||(t=0),"undefined"==typeof r&&(r=e?e.length:0);for(var i=-1,n=r-t||0,o=Array(0>n?0:n);++i<n;)o[i]=e[t+i];return o}function b(e){function t(e){return e&&"object"==typeof e&&!$i(e)&&ji.call(e,"__wrapped__")?e:new r(e)}function r(e,t){this.__chain__=!!t,this.__wrapped__=e}function o(e){function t(){if(i){var e=p(i);Pi.apply(e,arguments)}if(this instanceof t){var o=g(r.prototype),s=r.apply(o,e||arguments);return Mt(s)?s:o}return r.apply(n,e||arguments)}var r=e[0],i=e[2],n=e[4];return Ji(t,e),t}function v(e,t,r,i,n){if(r){var o=r(e);if("undefined"!=typeof o)return o}var s=Mt(e);if(!s)return e;var a=Ei.call(e);if(!Y[a])return e;var h=Hi[a];switch(a){case U:case N:return new h(+e);case q:case z:return new h(e);case V:return o=h(e.source,k.exec(e)),o.lastIndex=e.lastIndex,o}var c=$i(e);if(t){var f=!i;i||(i=u()),n||(n=u());for(var l=i.length;l--;)if(i[l]==e)return n[l];o=c?h(e.length):{}}else o=c?p(e):on({},e);return c&&(ji.call(e,"index")&&(o.index=e.index),ji.call(e,"input")&&(o.input=e.input)),t?(i.push(e),n.push(o),(c?Jt:hn)(e,function(e,s){o[s]=v(e,t,r,i,n)}),f&&(d(i),d(n)),o):o}function g(e){return Mt(e)?Ui(e):{}}function x(e,t,r){if("function"!=typeof e)return $r;if("undefined"==typeof t||!("prototype"in e))return e;var i=e.__bindData__;if("undefined"==typeof i&&(Ki.funcNames&&(i=!e.name),i=i||!Ki.funcDecomp,!i)){var n=Bi.call(e);Ki.funcNames||(i=!R.test(n)),i||(i=j.test(n),Ji(e,i))}if(i===!1||i!==!0&&1&i[1])return e;switch(r){case 1:return function(r){return e.call(t,r)};case 2:return function(r,i){return e.call(t,r,i)};case 3:return function(r,i,n){return e.call(t,r,i,n)};case 4:return function(r,i,n,o){return e.call(t,r,i,n,o)}}return Pr(e,t)}function J(e){function t(){var e=h?s:this;if(n){var l=p(n);Pi.apply(l,arguments)}if((o||u)&&(l||(l=p(arguments)),o&&Pi.apply(l,o),u&&l.length<a))return i|=16,J([r,f?i:-4&i,l,null,s,a]);if(l||(l=arguments),c&&(r=e[d]),this instanceof t){e=g(r.prototype);var b=r.apply(e,l);return Mt(b)?b:e}return r.apply(e,l)}var r=e[0],i=e[1],n=e[2],o=e[3],s=e[4],a=e[5],h=1&i,c=2&i,u=4&i,f=8&i,d=r;return Ji(t,e),t}function Q(e,t){var r=-1,o=ht(),s=e?e.length:0,a=s>=_&&o===i,c=[];if(a){var u=h(t);u?(o=n,t=u):a=!1}for(;++r<s;){var f=e[r];o(t,f)<0&&c.push(f)}return a&&l(t),c}function Z(e,t,r,i){for(var n=(i||0)-1,o=e?e.length:0,s=[];++n<o;){var a=e[n];if(a&&"object"==typeof a&&"number"==typeof a.length&&($i(a)||dt(a))){t||(a=Z(a,t,r));var h=-1,c=a.length,u=s.length;for(s.length+=c;++h<c;)s[u++]=a[h]}else r||s.push(a)}return s}function et(e,t,r,i,n,o){if(r){var s=r(e,t);if("undefined"!=typeof s)return!!s}if(e===t)return 0!==e||1/e==1/t;var a=typeof e,h=typeof t;if(!(e!==e||e&&K[a]||t&&K[h]))return!1;if(null==e||null==t)return e===t;var c=Ei.call(e),f=Ei.call(t);if(c==D&&(c=W),f==D&&(f=W),c!=f)return!1;switch(c){case U:case N:return+e==+t;case q:return e!=+e?t!=+t:0==e?1/e==1/t:e==+t;case V:case z:return e==_i(t)}var l=c==F;if(!l){var p=ji.call(e,"__wrapped__"),b=ji.call(t,"__wrapped__");if(p||b)return et(p?e.__wrapped__:e,b?t.__wrapped__:t,r,i,n,o);if(c!=W)return!1;var m=e.constructor,v=t.constructor;if(m!=v&&!(Rt(m)&&m instanceof m&&Rt(v)&&v instanceof v)&&"constructor"in e&&"constructor"in t)return!1}var g=!n;n||(n=u()),o||(o=u());for(var y=n.length;y--;)if(n[y]==e)return o[y]==t;var w=0;if(s=!0,n.push(e),o.push(t),l){if(y=e.length,w=t.length,s=w==y,s||i)for(;w--;){var _=y,x=t[w];if(i)for(;_--&&!(s=et(e[_],x,r,i,n,o)););else if(!(s=et(e[w],x,r,i,n,o)))break}}else an(t,function(t,a,h){return ji.call(h,a)?(w++,s=ji.call(e,a)&&et(e[a],t,r,i,n,o)):void 0
}),s&&!i&&an(e,function(e,t,r){return ji.call(r,t)?s=--w>-1:void 0});return n.pop(),o.pop(),g&&(d(n),d(o)),s}function tt(e,t,r,i,n){($i(t)?Jt:hn)(t,function(t,o){var s,a,h=t,c=e[o];if(t&&((a=$i(t))||cn(t))){for(var u=i.length;u--;)if(s=i[u]==t){c=n[u];break}if(!s){var f;r&&(h=r(c,t),(f="undefined"!=typeof h)&&(c=h)),f||(c=a?$i(c)?c:[]:cn(c)?c:{}),i.push(t),n.push(c),f||tt(c,t,r,i,n)}}else r&&(h=r(c,t),"undefined"==typeof h&&(h=t)),"undefined"!=typeof h&&(c=h);e[o]=c})}function it(e,t){return e+Mi(Xi()*(t-e+1))}function nt(e,t,r){var o=-1,s=ht(),a=e?e.length:0,c=[],f=!t&&a>=_&&s===i,p=r||f?u():c;if(f){var b=h(p);s=n,p=b}for(;++o<a;){var m=e[o],v=r?r(m,o,e):m;(t?!o||p[p.length-1]!==v:s(p,v)<0)&&((r||f)&&p.push(v),c.push(m))}return f?(d(p.array),l(p)):r&&d(p),c}function ot(e){return function(r,i,n){var o={};i=t.createCallback(i,n,3);var s=-1,a=r?r.length:0;if("number"==typeof a)for(;++s<a;){var h=r[s];e(o,h,i(h,s,r),r)}else hn(r,function(t,r,n){e(o,t,i(t,r,n),n)});return o}}function st(e,t,r,i,n,s){var a=1&t,h=2&t,c=4&t,u=16&t,f=32&t;if(!h&&!Rt(e))throw new xi;u&&!r.length&&(t&=-17,u=r=!1),f&&!i.length&&(t&=-33,f=i=!1);var d=e&&e.__bindData__;if(d&&d!==!0)return d=p(d),d[2]&&(d[2]=p(d[2])),d[3]&&(d[3]=p(d[3])),!a||1&d[1]||(d[4]=n),!a&&1&d[1]&&(t|=8),!c||4&d[1]||(d[5]=s),u&&Pi.apply(d[2]||(d[2]=[]),r),f&&Di.apply(d[3]||(d[3]=[]),i),d[1]|=t,st.apply(null,d);var l=1==t||17===t?o:J;return l([e,t,r,i,n,s])}function at(e){return en[e]}function ht(){var e=(e=t.indexOf)===vr?i:e;return e}function ct(e){return"function"==typeof e&&Ci.test(e)}function ut(e){var t,r;return e&&Ei.call(e)==W&&(t=e.constructor,!Rt(t)||t instanceof t)?(an(e,function(e,t){r=t}),"undefined"==typeof r||ji.call(e,r)):!1}function ft(e){return tn[e]}function dt(e){return e&&"object"==typeof e&&"number"==typeof e.length&&Ei.call(e)==D||!1}function lt(e,t,r,i){return"boolean"!=typeof t&&null!=t&&(i=r,r=t,t=!1),v(e,t,"function"==typeof r&&x(r,i,1))}function pt(e,t,r){return v(e,!0,"function"==typeof t&&x(t,r,1))}function bt(e,t){var r=g(e);return t?on(r,t):r}function mt(e,r,i){var n;return r=t.createCallback(r,i,3),hn(e,function(e,t,i){return r(e,t,i)?(n=t,!1):void 0}),n}function vt(e,r,i){var n;return r=t.createCallback(r,i,3),yt(e,function(e,t,i){return r(e,t,i)?(n=t,!1):void 0}),n}function gt(e,t,r){var i=[];an(e,function(e,t){i.push(t,e)});var n=i.length;for(t=x(t,r,3);n--&&t(i[n--],i[n],e)!==!1;);return e}function yt(e,t,r){var i=Zi(e),n=i.length;for(t=x(t,r,3);n--;){var o=i[n];if(t(e[o],o,e)===!1)break}return e}function wt(e){var t=[];return an(e,function(e,r){Rt(e)&&t.push(r)}),t.sort()}function _t(e,t){return e?ji.call(e,t):!1}function xt(e){for(var t=-1,r=Zi(e),i=r.length,n={};++t<i;){var o=r[t];n[e[o]]=o}return n}function St(e){return e===!0||e===!1||e&&"object"==typeof e&&Ei.call(e)==U||!1}function Tt(e){return e&&"object"==typeof e&&Ei.call(e)==N||!1}function At(e){return e&&1===e.nodeType||!1}function Et(e){var t=!0;if(!e)return t;var r=Ei.call(e),i=e.length;return r==F||r==z||r==D||r==W&&"number"==typeof i&&Rt(e.splice)?!i:(hn(e,function(){return t=!1}),t)}function Ct(e,t,r,i){return et(e,t,"function"==typeof r&&x(r,i,2))}function kt(e){return Gi(e)&&!qi(parseFloat(e))}function Rt(e){return"function"==typeof e}function Mt(e){return!(!e||!K[typeof e])}function Bt(e){return jt(e)&&e!=+e}function It(e){return null===e}function jt(e){return"number"==typeof e||e&&"object"==typeof e&&Ei.call(e)==q||!1}function Pt(e){return e&&"object"==typeof e&&Ei.call(e)==V||!1}function Ot(e){return"string"==typeof e||e&&"object"==typeof e&&Ei.call(e)==z||!1}function Lt(e){return"undefined"==typeof e}function Dt(e,r,i){var n={};return r=t.createCallback(r,i,3),hn(e,function(e,t,i){n[t]=r(e,t,i)}),n}function Ft(e){var t=arguments,r=2;if(!Mt(e))return e;if("number"!=typeof t[2]&&(r=t.length),r>3&&"function"==typeof t[r-2])var i=x(t[--r-1],t[r--],2);else r>2&&"function"==typeof t[r-1]&&(i=t[--r]);for(var n=p(arguments,1,r),o=-1,s=u(),a=u();++o<r;)tt(e,n[o],i,s,a);return d(s),d(a),e}function Ut(e,r,i){var n={};if("function"!=typeof r){var o=[];an(e,function(e,t){o.push(t)}),o=Q(o,Z(arguments,!0,!1,1));for(var s=-1,a=o.length;++s<a;){var h=o[s];n[h]=e[h]}}else r=t.createCallback(r,i,3),an(e,function(e,t,i){r(e,t,i)||(n[t]=e)});return n}function Nt(e){for(var t=-1,r=Zi(e),i=r.length,n=li(i);++t<i;){var o=r[t];n[t]=[o,e[o]]}return n}function Gt(e,r,i){var n={};if("function"!=typeof r)for(var o=-1,s=Z(arguments,!0,!1,1),a=Mt(e)?s.length:0;++o<a;){var h=s[o];h in e&&(n[h]=e[h])}else r=t.createCallback(r,i,3),an(e,function(e,t,i){r(e,t,i)&&(n[t]=e)});return n}function qt(e,r,i,n){var o=$i(e);if(null==i)if(o)i=[];else{var s=e&&e.constructor,a=s&&s.prototype;i=g(a)}return r&&(r=t.createCallback(r,n,4),(o?Jt:hn)(e,function(e,t,n){return r(i,e,t,n)})),i}function Wt(e){for(var t=-1,r=Zi(e),i=r.length,n=li(i);++t<i;)n[t]=e[r[t]];return n}function Vt(e){for(var t=arguments,r=-1,i=Z(t,!0,!1,1),n=t[2]&&t[2][t[1]]===e?1:i.length,o=li(n);++r<n;)o[r]=e[i[r]];return o}function zt(e,t,r){var i=-1,n=ht(),o=e?e.length:0,s=!1;return r=(0>r?Vi(0,o+r):r)||0,$i(e)?s=n(e,t,r)>-1:"number"==typeof o?s=(Ot(e)?e.indexOf(t,r):n(e,t,r))>-1:hn(e,function(e){return++i>=r?!(s=e===t):void 0}),s}function Yt(e,r,i){var n=!0;r=t.createCallback(r,i,3);var o=-1,s=e?e.length:0;if("number"==typeof s)for(;++o<s&&(n=!!r(e[o],o,e)););else hn(e,function(e,t,i){return n=!!r(e,t,i)});return n}function Xt(e,r,i){var n=[];r=t.createCallback(r,i,3);var o=-1,s=e?e.length:0;if("number"==typeof s)for(;++o<s;){var a=e[o];r(a,o,e)&&n.push(a)}else hn(e,function(e,t,i){r(e,t,i)&&n.push(e)});return n}function Ht(e,r,i){r=t.createCallback(r,i,3);var n=-1,o=e?e.length:0;if("number"!=typeof o){var s;return hn(e,function(e,t,i){return r(e,t,i)?(s=e,!1):void 0}),s}for(;++n<o;){var a=e[n];if(r(a,n,e))return a}}function Kt(e,r,i){var n;return r=t.createCallback(r,i,3),$t(e,function(e,t,i){return r(e,t,i)?(n=e,!1):void 0}),n}function Jt(e,t,r){var i=-1,n=e?e.length:0;if(t=t&&"undefined"==typeof r?t:x(t,r,3),"number"==typeof n)for(;++i<n&&t(e[i],i,e)!==!1;);else hn(e,t);return e}function $t(e,t,r){var i=e?e.length:0;if(t=t&&"undefined"==typeof r?t:x(t,r,3),"number"==typeof i)for(;i--&&t(e[i],i,e)!==!1;);else{var n=Zi(e);i=n.length,hn(e,function(e,r,o){return r=n?n[--i]:--i,t(o[r],r,o)})}return e}function Qt(e,t){var r=p(arguments,2),i=-1,n="function"==typeof t,o=e?e.length:0,s=li("number"==typeof o?o:0);return Jt(e,function(e){s[++i]=(n?t:e[t]).apply(e,r)}),s}function Zt(e,r,i){var n=-1,o=e?e.length:0;if(r=t.createCallback(r,i,3),"number"==typeof o)for(var s=li(o);++n<o;)s[n]=r(e[n],n,e);else s=[],hn(e,function(e,t,i){s[++n]=r(e,t,i)});return s}function er(e,r,i){var n=-1/0,o=n;if("function"!=typeof r&&i&&i[r]===e&&(r=null),null==r&&$i(e))for(var a=-1,h=e.length;++a<h;){var c=e[a];c>o&&(o=c)}else r=null==r&&Ot(e)?s:t.createCallback(r,i,3),Jt(e,function(e,t,i){var s=r(e,t,i);s>n&&(n=s,o=e)});return o}function tr(e,r,i){var n=1/0,o=n;if("function"!=typeof r&&i&&i[r]===e&&(r=null),null==r&&$i(e))for(var a=-1,h=e.length;++a<h;){var c=e[a];o>c&&(o=c)}else r=null==r&&Ot(e)?s:t.createCallback(r,i,3),Jt(e,function(e,t,i){var s=r(e,t,i);n>s&&(n=s,o=e)});return o}function rr(e,r,i,n){if(!e)return i;var o=arguments.length<3;r=t.createCallback(r,n,4);var s=-1,a=e.length;if("number"==typeof a)for(o&&(i=e[++s]);++s<a;)i=r(i,e[s],s,e);else hn(e,function(e,t,n){i=o?(o=!1,e):r(i,e,t,n)});return i}function ir(e,r,i,n){var o=arguments.length<3;return r=t.createCallback(r,n,4),$t(e,function(e,t,n){i=o?(o=!1,e):r(i,e,t,n)}),i}function nr(e,r,i){return r=t.createCallback(r,i,3),Xt(e,function(e,t,i){return!r(e,t,i)})}function or(e,t,r){if(e&&"number"!=typeof e.length&&(e=Wt(e)),null==t||r)return e?e[it(0,e.length-1)]:m;var i=sr(e);return i.length=zi(Vi(0,t),i.length),i}function sr(e){var t=-1,r=e?e.length:0,i=li("number"==typeof r?r:0);return Jt(e,function(e){var r=it(0,++t);i[t]=i[r],i[r]=e}),i}function ar(e){var t=e?e.length:0;return"number"==typeof t?t:Zi(e).length}function hr(e,r,i){var n;r=t.createCallback(r,i,3);var o=-1,s=e?e.length:0;if("number"==typeof s)for(;++o<s&&!(n=r(e[o],o,e)););else hn(e,function(e,t,i){return!(n=r(e,t,i))});return!!n}function cr(e,r,i){var n=-1,o=$i(r),s=e?e.length:0,h=li("number"==typeof s?s:0);for(o||(r=t.createCallback(r,i,3)),Jt(e,function(e,t,i){var s=h[++n]=f();o?s.criteria=Zt(r,function(t){return e[t]}):(s.criteria=u())[0]=r(e,t,i),s.index=n,s.value=e}),s=h.length,h.sort(a);s--;){var c=h[s];h[s]=c.value,o||d(c.criteria),l(c)}return h}function ur(e){return e&&"number"==typeof e.length?p(e):Wt(e)}function fr(e){for(var t=-1,r=e?e.length:0,i=[];++t<r;){var n=e[t];n&&i.push(n)}return i}function dr(e){return Q(e,Z(arguments,!0,!0,1))}function lr(e,r,i){var n=-1,o=e?e.length:0;for(r=t.createCallback(r,i,3);++n<o;)if(r(e[n],n,e))return n;return-1}function pr(e,r,i){var n=e?e.length:0;for(r=t.createCallback(r,i,3);n--;)if(r(e[n],n,e))return n;return-1}function br(e,r,i){var n=0,o=e?e.length:0;if("number"!=typeof r&&null!=r){var s=-1;for(r=t.createCallback(r,i,3);++s<o&&r(e[s],s,e);)n++}else if(n=r,null==n||i)return e?e[0]:m;return p(e,0,zi(Vi(0,n),o))}function mr(e,t,r,i){return"boolean"!=typeof t&&null!=t&&(i=r,r="function"!=typeof t&&i&&i[t]===e?null:t,t=!1),null!=r&&(e=Zt(e,r,i)),Z(e,t)}function vr(e,t,r){if("number"==typeof r){var n=e?e.length:0;r=0>r?Vi(0,n+r):r||0}else if(r){var o=Er(e,t);return e[o]===t?o:-1}return i(e,t,r)}function gr(e,r,i){var n=0,o=e?e.length:0;if("number"!=typeof r&&null!=r){var s=o;for(r=t.createCallback(r,i,3);s--&&r(e[s],s,e);)n++}else n=null==r||i?1:r||n;return p(e,0,zi(Vi(0,o-n),o))}function yr(){for(var e=[],t=-1,r=arguments.length,o=u(),s=ht(),a=s===i,c=u();++t<r;){var f=arguments[t];($i(f)||dt(f))&&(e.push(f),o.push(a&&f.length>=_&&h(t?e[t]:c)))}var p=e[0],b=-1,m=p?p.length:0,v=[];e:for(;++b<m;){var g=o[0];if(f=p[b],(g?n(g,f):s(c,f))<0){for(t=r,(g||c).push(f);--t;)if(g=o[t],(g?n(g,f):s(e[t],f))<0)continue e;v.push(f)}}for(;r--;)g=o[r],g&&l(g);return d(o),d(c),v}function wr(e,r,i){var n=0,o=e?e.length:0;if("number"!=typeof r&&null!=r){var s=o;for(r=t.createCallback(r,i,3);s--&&r(e[s],s,e);)n++}else if(n=r,null==n||i)return e?e[o-1]:m;return p(e,Vi(0,o-n))}function _r(e,t,r){var i=e?e.length:0;for("number"==typeof r&&(i=(0>r?Vi(0,i+r):zi(r,i-1))+1);i--;)if(e[i]===t)return i;return-1}function xr(e){for(var t=arguments,r=0,i=t.length,n=e?e.length:0;++r<i;)for(var o=-1,s=t[r];++o<n;)e[o]===s&&(Li.call(e,o--,1),n--);return e}function Sr(e,t,r){e=+e||0,r="number"==typeof r?r:+r||1,null==t&&(t=e,e=0);for(var i=-1,n=Vi(0,ki((t-e)/(r||1))),o=li(n);++i<n;)o[i]=e,e+=r;return o}function Tr(e,r,i){var n=-1,o=e?e.length:0,s=[];for(r=t.createCallback(r,i,3);++n<o;){var a=e[n];r(a,n,e)&&(s.push(a),Li.call(e,n--,1),o--)}return s}function Ar(e,r,i){if("number"!=typeof r&&null!=r){var n=0,o=-1,s=e?e.length:0;for(r=t.createCallback(r,i,3);++o<s&&r(e[o],o,e);)n++}else n=null==r||i?1:Vi(0,r);return p(e,n)}function Er(e,r,i,n){var o=0,s=e?e.length:o;for(i=i?t.createCallback(i,n,1):$r,r=i(r);s>o;){var a=o+s>>>1;i(e[a])<r?o=a+1:s=a}return o}function Cr(){return nt(Z(arguments,!0,!0))}function kr(e,r,i,n){return"boolean"!=typeof r&&null!=r&&(n=i,i="function"!=typeof r&&n&&n[r]===e?null:r,r=!1),null!=i&&(i=t.createCallback(i,n,3)),nt(e,r,i)}function Rr(e){return Q(e,p(arguments,1))}function Mr(){for(var e=-1,t=arguments.length;++e<t;){var r=arguments[e];if($i(r)||dt(r))var i=i?nt(Q(i,r).concat(Q(r,i))):r}return i||[]}function Br(){for(var e=arguments.length>1?arguments:arguments[0],t=-1,r=e?er(ln(e,"length")):0,i=li(0>r?0:r);++t<r;)i[t]=ln(e,t);return i}function Ir(e,t){var r=-1,i=e?e.length:0,n={};for(t||!i||$i(e[0])||(t=[]);++r<i;){var o=e[r];t?n[o]=t[r]:o&&(n[o[0]]=o[1])}return n}function jr(e,t){if(!Rt(t))throw new xi;return function(){return--e<1?t.apply(this,arguments):void 0}}function Pr(e,t){return arguments.length>2?st(e,17,p(arguments,2),null,t):st(e,1,null,null,t)}function Or(e){for(var t=arguments.length>1?Z(arguments,!0,!1,1):wt(e),r=-1,i=t.length;++r<i;){var n=t[r];e[n]=st(e[n],1,null,null,e)}return e}function Lr(e,t){return arguments.length>2?st(t,19,p(arguments,2),null,e):st(t,3,null,null,e)}function Dr(){for(var e=arguments,t=e.length;t--;)if(!Rt(e[t]))throw new xi;return function(){for(var t=arguments,r=e.length;r--;)t=[e[r].apply(this,t)];return t[0]}}function Fr(e,t){return t="number"==typeof t?t:+t||e.length,st(e,4,null,null,null,t)}function Ur(e,t,r){var i,n,o,s,a,h,c,u=0,f=!1,d=!0;if(!Rt(e))throw new xi;if(t=Vi(0,t)||0,r===!0){var l=!0;d=!1}else Mt(r)&&(l=r.leading,f="maxWait"in r&&(Vi(t,r.maxWait)||0),d="trailing"in r?r.trailing:d);var p=function(){var r=t-(bn()-s);if(0>=r){n&&Ri(n);var f=c;n=h=c=m,f&&(u=bn(),o=e.apply(a,i),h||n||(i=a=null))}else h=Oi(p,r)},b=function(){h&&Ri(h),n=h=c=m,(d||f!==t)&&(u=bn(),o=e.apply(a,i),h||n||(i=a=null))};return function(){if(i=arguments,s=bn(),a=this,c=d&&(h||!l),f===!1)var r=l&&!h;else{n||l||(u=s);var m=f-(s-u),v=0>=m;v?(n&&(n=Ri(n)),u=s,o=e.apply(a,i)):n||(n=Oi(b,m))}return v&&h?h=Ri(h):h||t===f||(h=Oi(p,t)),r&&(v=!0,o=e.apply(a,i)),!v||h||n||(i=a=null),o}}function Nr(e){if(!Rt(e))throw new xi;var t=p(arguments,1);return Oi(function(){e.apply(m,t)},1)}function Gr(e,t){if(!Rt(e))throw new xi;var r=p(arguments,2);return Oi(function(){e.apply(m,r)},t)}function qr(e,t){if(!Rt(e))throw new xi;var r=function(){var i=r.cache,n=t?t.apply(this,arguments):w+arguments[0];return ji.call(i,n)?i[n]:i[n]=e.apply(this,arguments)};return r.cache={},r}function Wr(e){var t,r;if(!Rt(e))throw new xi;return function(){return t?r:(t=!0,r=e.apply(this,arguments),e=null,r)}}function Vr(e){return st(e,16,p(arguments,1))}function zr(e){return st(e,32,null,p(arguments,1))}function Yr(e,t,r){var i=!0,n=!0;if(!Rt(e))throw new xi;return r===!1?i=!1:Mt(r)&&(i="leading"in r?r.leading:i,n="trailing"in r?r.trailing:n),X.leading=i,X.maxWait=t,X.trailing=n,Ur(e,t,X)}function Xr(e,t){return st(t,16,[e])}function Hr(e){return function(){return e}}function Kr(e,t,r){var i=typeof e;if(null==e||"function"==i)return x(e,t,r);if("object"!=i)return ti(e);var n=Zi(e),o=n[0],s=e[o];return 1!=n.length||s!==s||Mt(s)?function(t){for(var r=n.length,i=!1;r--&&(i=et(t[n[r]],e[n[r]],null,!0)););return i}:function(e){var t=e[o];return s===t&&(0!==s||1/s==1/t)}}function Jr(e){return null==e?"":_i(e).replace(nn,at)}function $r(e){return e}function Qr(e,i,n){var o=!0,s=i&&wt(i);i&&(n||s.length)||(null==n&&(n=i),a=r,i=e,e=t,s=wt(i)),n===!1?o=!1:Mt(n)&&"chain"in n&&(o=n.chain);var a=e,h=Rt(a);Jt(s,function(t){var r=e[t]=i[t];h&&(a.prototype[t]=function(){var t=this.__chain__,i=this.__wrapped__,n=[i];Pi.apply(n,arguments);var s=r.apply(e,n);if(o||t){if(i===s&&Mt(s))return this;s=new a(s),s.__chain__=t}return s})})}function Zr(){return e._=Ai,this}function ei(){}function ti(e){return function(t){return t[e]}}function ri(e,t,r){var i=null==e,n=null==t;if(null==r&&("boolean"==typeof e&&n?(r=e,e=1):n||"boolean"!=typeof t||(r=t,n=!0)),i&&n&&(t=1),e=+e||0,n?(t=e,e=0):t=+t||0,r||e%1||t%1){var o=Xi();return zi(e+o*(t-e+parseFloat("1e-"+((o+"").length-1))),t)}return it(e,t)}function ii(e,t){if(e){var r=e[t];return Rt(r)?e[t]():r}}function ni(e,r,i){var n=t.templateSettings;e=_i(e||""),i=sn({},i,n);var o,s=sn({},i.imports,n.imports),a=Zi(s),h=Wt(s),u=0,f=i.interpolate||I,d="__p += '",l=wi((i.escape||I).source+"|"+f.source+"|"+(f===M?C:I).source+"|"+(i.evaluate||I).source+"|$","g");e.replace(l,function(t,r,i,n,s,a){return i||(i=n),d+=e.slice(u,a).replace(P,c),r&&(d+="' +\n__e("+r+") +\n'"),s&&(o=!0,d+="';\n"+s+";\n__p += '"),i&&(d+="' +\n((__t = ("+i+")) == null ? '' : __t) +\n'"),u=a+t.length,t}),d+="';\n";var p=i.variable,b=p;b||(p="obj",d="with ("+p+") {\n"+d+"\n}\n"),d=(o?d.replace(T,""):d).replace(A,"$1").replace(E,"$1;"),d="function("+p+") {\n"+(b?"":p+" || ("+p+" = {});\n")+"var __t, __p = '', __e = _.escape"+(o?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+d+"return __p\n}";var v="\n/*\n//# sourceURL="+(i.sourceURL||"/lodash/template/source["+L++ +"]")+"\n*/";try{var g=mi(a,"return "+d+v).apply(m,h)}catch(e){throw e.source=d,e}return r?g(r):(g.source=d,g)}function oi(e,t,r){e=(e=+e)>-1?e:0;var i=-1,n=li(e);for(t=x(t,r,1);++i<e;)n[i]=t(i);return n}function si(e){return null==e?"":_i(e).replace(rn,ft)}function ai(e){var t=++y;return _i(null==e?"":e)+t}function hi(e){return e=new r(e),e.__chain__=!0,e}function ci(e,t){return t(e),e}function ui(){return this.__chain__=!0,this}function fi(){return _i(this.__wrapped__)}function di(){return this.__wrapped__}e=e?rt.defaults($.Object(),e,rt.pick($,O)):$;var li=e.Array,pi=e.Boolean,bi=e.Date,mi=e.Function,vi=e.Math,gi=e.Number,yi=e.Object,wi=e.RegExp,_i=e.String,xi=e.TypeError,Si=[],Ti=yi.prototype,Ai=e._,Ei=Ti.toString,Ci=wi("^"+_i(Ei).replace(/[.*+?^${}()|[\]\\]/g,"\\$&").replace(/toString| for [^\]]+/g,".*?")+"$"),ki=vi.ceil,Ri=e.clearTimeout,Mi=vi.floor,Bi=mi.prototype.toString,Ii=ct(Ii=yi.getPrototypeOf)&&Ii,ji=Ti.hasOwnProperty,Pi=Si.push,Oi=e.setTimeout,Li=Si.splice,Di=Si.unshift,Fi=function(){try{var e={},t=ct(t=yi.defineProperty)&&t,r=t(e,e,e)&&t}catch(e){}return r}(),Ui=ct(Ui=yi.create)&&Ui,Ni=ct(Ni=li.isArray)&&Ni,Gi=e.isFinite,qi=e.isNaN,Wi=ct(Wi=yi.keys)&&Wi,Vi=vi.max,zi=vi.min,Yi=e.parseInt,Xi=vi.random,Hi={};Hi[F]=li,Hi[U]=pi,Hi[N]=bi,Hi[G]=mi,Hi[W]=yi,Hi[q]=gi,Hi[V]=wi,Hi[z]=_i,r.prototype=t.prototype;var Ki=t.support={};Ki.funcDecomp=!ct(e.WinRTError)&&j.test(b),Ki.funcNames="string"==typeof mi.name,t.templateSettings={escape:/<%-([\s\S]+?)%>/g,evaluate:/<%([\s\S]+?)%>/g,interpolate:M,variable:"",imports:{_:t}},Ui||(g=function(){function t(){}return function(r){if(Mt(r)){t.prototype=r;var i=new t;t.prototype=null}return i||e.Object()}}());var Ji=Fi?function(e,t){H.value=t,Fi(e,"__bindData__",H)}:ei,$i=Ni||function(e){return e&&"object"==typeof e&&"number"==typeof e.length&&Ei.call(e)==F||!1},Qi=function(e){var t,r=e,i=[];if(!r)return i;if(!K[typeof e])return i;for(t in r)ji.call(r,t)&&i.push(t);return i},Zi=Wi?function(e){return Mt(e)?Wi(e):[]}:Qi,en={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},tn=xt(en),rn=wi("("+Zi(tn).join("|")+")","g"),nn=wi("["+Zi(en).join("")+"]","g"),on=function(e,t,r){var i,n=e,o=n;if(!n)return o;var s=arguments,a=0,h="number"==typeof r?2:s.length;if(h>3&&"function"==typeof s[h-2])var c=x(s[--h-1],s[h--],2);else h>2&&"function"==typeof s[h-1]&&(c=s[--h]);for(;++a<h;)if(n=s[a],n&&K[typeof n])for(var u=-1,f=K[typeof n]&&Zi(n),d=f?f.length:0;++u<d;)i=f[u],o[i]=c?c(o[i],n[i]):n[i];return o},sn=function(e,t,r){var i,n=e,o=n;if(!n)return o;for(var s=arguments,a=0,h="number"==typeof r?2:s.length;++a<h;)if(n=s[a],n&&K[typeof n])for(var c=-1,u=K[typeof n]&&Zi(n),f=u?u.length:0;++c<f;)i=u[c],"undefined"==typeof o[i]&&(o[i]=n[i]);return o},an=function(e,t,r){var i,n=e,o=n;if(!n)return o;if(!K[typeof n])return o;t=t&&"undefined"==typeof r?t:x(t,r,3);for(i in n)if(t(n[i],i,e)===!1)return o;return o},hn=function(e,t,r){var i,n=e,o=n;if(!n)return o;if(!K[typeof n])return o;t=t&&"undefined"==typeof r?t:x(t,r,3);for(var s=-1,a=K[typeof n]&&Zi(n),h=a?a.length:0;++s<h;)if(i=a[s],t(n[i],i,e)===!1)return o;return o},cn=Ii?function(e){if(!e||Ei.call(e)!=W)return!1;var t=e.valueOf,r=ct(t)&&(r=Ii(t))&&Ii(r);return r?e==r||Ii(e)==r:ut(e)}:ut,un=ot(function(e,t,r){ji.call(e,r)?e[r]++:e[r]=1}),fn=ot(function(e,t,r){(ji.call(e,r)?e[r]:e[r]=[]).push(t)}),dn=ot(function(e,t,r){e[r]=t}),ln=Zt,pn=Xt,bn=ct(bn=bi.now)&&bn||function(){return(new bi).getTime()},mn=8==Yi(S+"08")?Yi:function(e,t){return Yi(Ot(e)?e.replace(B,""):e,t||0)};return t.after=jr,t.assign=on,t.at=Vt,t.bind=Pr,t.bindAll=Or,t.bindKey=Lr,t.chain=hi,t.compact=fr,t.compose=Dr,t.constant=Hr,t.countBy=un,t.create=bt,t.createCallback=Kr,t.curry=Fr,t.debounce=Ur,t.defaults=sn,t.defer=Nr,t.delay=Gr,t.difference=dr,t.filter=Xt,t.flatten=mr,t.forEach=Jt,t.forEachRight=$t,t.forIn=an,t.forInRight=gt,t.forOwn=hn,t.forOwnRight=yt,t.functions=wt,t.groupBy=fn,t.indexBy=dn,t.initial=gr,t.intersection=yr,t.invert=xt,t.invoke=Qt,t.keys=Zi,t.map=Zt,t.mapValues=Dt,t.max=er,t.memoize=qr,t.merge=Ft,t.min=tr,t.omit=Ut,t.once=Wr,t.pairs=Nt,t.partial=Vr,t.partialRight=zr,t.pick=Gt,t.pluck=ln,t.property=ti,t.pull=xr,t.range=Sr,t.reject=nr,t.remove=Tr,t.rest=Ar,t.shuffle=sr,t.sortBy=cr,t.tap=ci,t.throttle=Yr,t.times=oi,t.toArray=ur,t.transform=qt,t.union=Cr,t.uniq=kr,t.values=Wt,t.where=pn,t.without=Rr,t.wrap=Xr,t.xor=Mr,t.zip=Br,t.zipObject=Ir,t.collect=Zt,t.drop=Ar,t.each=Jt,t.eachRight=$t,t.extend=on,t.methods=wt,t.object=Ir,t.select=Xt,t.tail=Ar,t.unique=kr,t.unzip=Br,Qr(t),t.clone=lt,t.cloneDeep=pt,t.contains=zt,t.escape=Jr,t.every=Yt,t.find=Ht,t.findIndex=lr,t.findKey=mt,t.findLast=Kt,t.findLastIndex=pr,t.findLastKey=vt,t.has=_t,t.identity=$r,t.indexOf=vr,t.isArguments=dt,t.isArray=$i,t.isBoolean=St,t.isDate=Tt,t.isElement=At,t.isEmpty=Et,t.isEqual=Ct,t.isFinite=kt,t.isFunction=Rt,t.isNaN=Bt,t.isNull=It,t.isNumber=jt,t.isObject=Mt,t.isPlainObject=cn,t.isRegExp=Pt,t.isString=Ot,t.isUndefined=Lt,t.lastIndexOf=_r,t.mixin=Qr,t.noConflict=Zr,t.noop=ei,t.now=bn,t.parseInt=mn,t.random=ri,t.reduce=rr,t.reduceRight=ir,t.result=ii,t.runInContext=b,t.size=ar,t.some=hr,t.sortedIndex=Er,t.template=ni,t.unescape=si,t.uniqueId=ai,t.all=Yt,t.any=hr,t.detect=Ht,t.findWhere=Ht,t.foldl=rr,t.foldr=ir,t.include=zt,t.inject=rr,Qr(function(){var e={};return hn(t,function(r,i){t.prototype[i]||(e[i]=r)}),e}(),!1),t.first=br,t.last=wr,t.sample=or,t.take=br,t.head=br,hn(t,function(e,i){var n="sample"!==i;t.prototype[i]||(t.prototype[i]=function(t,i){var o=this.__chain__,s=e(this.__wrapped__,t,i);return o||null!=t&&(!i||n&&"function"==typeof t)?new r(s,o):s})}),t.VERSION="2.4.1",t.prototype.chain=ui,t.prototype.toString=fi,t.prototype.value=di,t.prototype.valueOf=di,Jt(["join","pop","shift"],function(e){var i=Si[e];t.prototype[e]=function(){var e=this.__chain__,t=i.apply(this.__wrapped__,arguments);return e?new r(t,e):t}}),Jt(["push","reverse","sort","unshift"],function(e){var r=Si[e];t.prototype[e]=function(){return r.apply(this.__wrapped__,arguments),this}}),Jt(["concat","slice","splice"],function(e){var i=Si[e];t.prototype[e]=function(){return new r(i.apply(this.__wrapped__,arguments),this.__chain__)}}),t}var m,v=[],g=[],y=0,w=+new Date+"",_=75,x=40,S=" 	\f ﻿\n\r\u2028\u2029 ᠎             　",T=/\b__p \+= '';/g,A=/\b(__p \+=) '' \+/g,E=/(__e\(.*?\)|\b__t\)) \+\n'';/g,C=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,k=/\w*$/,R=/^\s*function[ \n\r\t]+\w/,M=/<%=([\s\S]+?)%>/g,B=RegExp("^["+S+"]*0+(?=.$)"),I=/($^)/,j=/\bthis\b/,P=/['\n\r\t\u2028\u2029\\]/g,O=["Array","Boolean","Date","Function","Math","Number","Object","RegExp","String","_","attachEvent","clearTimeout","isFinite","isNaN","parseInt","setTimeout"],L=0,D="[object Arguments]",F="[object Array]",U="[object Boolean]",N="[object Date]",G="[object Function]",q="[object Number]",W="[object Object]",V="[object RegExp]",z="[object String]",Y={};Y[G]=!1,Y[D]=Y[F]=Y[U]=Y[N]=Y[q]=Y[W]=Y[V]=Y[z]=!0;var X={leading:!1,maxWait:0,trailing:!1},H={configurable:!1,enumerable:!1,value:null,writable:!1},K={boolean:!1,function:!0,object:!0,number:!1,string:!1,undefined:!1},J={"\\":"\\","'":"'","\n":"n","\r":"r","	":"t","\u2028":"u2028","\u2029":"u2029"},$=K[typeof window]&&window||this,Q=K[typeof r]&&r&&!r.nodeType&&r,Z=K[typeof t]&&t&&!t.nodeType&&t,et=Z&&Z.exports===Q&&Q,tt=K[typeof e]&&e;!tt||tt.global!==tt&&tt.window!==tt||($=tt);var rt=b();"function"==typeof define&&"object"==typeof define.amd&&define.amd?($._=rt,define(function(){return rt})):Q&&Z?et?(Z.exports=rt)._=rt:Q._=rt:$._=rt}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],223:[function(e,t){(function(e){(function(){var r,i,n;"undefined"!=typeof performance&&null!==performance&&performance.now?t.exports=function(){return performance.now()}:"undefined"!=typeof e&&null!==e&&e.hrtime?(t.exports=function(){return(r()-n)/1e6},i=e.hrtime,r=function(){var e;return e=i(),1e9*e[0]+e[1]},n=r()):Date.now?(t.exports=function(){return Date.now()-n},n=Date.now()):(t.exports=function(){return(new Date).getTime()-n},n=(new Date).getTime())}).call(this)}).call(this,e("_process"))},{_process:202}],224:[function(e,t,r){(function(){var e=this,i=i||{};i.WEBGL_RENDERER=0,i.CANVAS_RENDERER=1,i.VERSION="v2.2.0",i.blendModes={NORMAL:0,ADD:1,MULTIPLY:2,SCREEN:3,OVERLAY:4,DARKEN:5,LIGHTEN:6,COLOR_DODGE:7,COLOR_BURN:8,HARD_LIGHT:9,SOFT_LIGHT:10,DIFFERENCE:11,EXCLUSION:12,HUE:13,SATURATION:14,COLOR:15,LUMINOSITY:16},i.scaleModes={DEFAULT:0,LINEAR:0,NEAREST:1},i._UID=0,"undefined"!=typeof Float32Array?(i.Float32Array=Float32Array,i.Uint16Array=Uint16Array,i.Uint32Array=Uint32Array,i.ArrayBuffer=ArrayBuffer):(i.Float32Array=Array,i.Uint16Array=Array),i.INTERACTION_FREQUENCY=30,i.AUTO_PREVENT_DEFAULT=!0,i.PI_2=2*Math.PI,i.RAD_TO_DEG=180/Math.PI,i.DEG_TO_RAD=Math.PI/180,i.RETINA_PREFIX="@2x",i.dontSayHello=!1,i.defaultRenderOptions={view:null,transparent:!1,antialias:!1,preserveDrawingBuffer:!1,resolution:1,clearBeforeRender:!0,autoResize:!1},i.sayHello=function(e){if(!i.dontSayHello){if(navigator.userAgent.toLowerCase().indexOf("chrome")>-1){var t=["%c %c %c Pixi.js "+i.VERSION+" - "+e+"  %c  %c  http://www.pixijs.com/  %c %c ♥%c♥%c♥ ","background: #ff66a5","background: #ff66a5","color: #ff66a5; background: #030307;","background: #ff66a5","background: #ffc3dc","background: #ff66a5","color: #ff2424; background: #fff","color: #ff2424; background: #fff","color: #ff2424; background: #fff"];console.log.apply(console,t)}else window.console&&console.log("Pixi.js "+i.VERSION+" - http://www.pixijs.com/");i.dontSayHello=!0}},i.Point=function(e,t){this.x=e||0,this.y=t||0},i.Point.prototype.clone=function(){return new i.Point(this.x,this.y)},i.Point.prototype.set=function(e,t){this.x=e||0,this.y=t||(0!==t?this.x:0)},i.Point.prototype.constructor=i.Point,i.Rectangle=function(e,t,r,i){this.x=e||0,this.y=t||0,this.width=r||0,this.height=i||0},i.Rectangle.prototype.clone=function(){return new i.Rectangle(this.x,this.y,this.width,this.height)},i.Rectangle.prototype.contains=function(e,t){if(this.width<=0||this.height<=0)return!1;var r=this.x;if(e>=r&&e<=r+this.width){var i=this.y;if(t>=i&&t<=i+this.height)return!0}return!1},i.Rectangle.prototype.constructor=i.Rectangle,i.EmptyRectangle=new i.Rectangle(0,0,0,0),i.Polygon=function(e){if(e instanceof Array||(e=Array.prototype.slice.call(arguments)),e[0]instanceof i.Point){for(var t=[],r=0,n=e.length;n>r;r++)t.push(e[r].x,e[r].y);e=t}this.closed=!0,this.points=e},i.Polygon.prototype.clone=function(){var e=this.points.slice();return new i.Polygon(e)},i.Polygon.prototype.contains=function(e,t){for(var r=!1,i=this.points.length/2,n=0,o=i-1;i>n;o=n++){var s=this.points[2*n],a=this.points[2*n+1],h=this.points[2*o],c=this.points[2*o+1],u=a>t!=c>t&&(h-s)*(t-a)/(c-a)+s>e;u&&(r=!r)}return r},i.Polygon.prototype.constructor=i.Polygon,i.Circle=function(e,t,r){this.x=e||0,this.y=t||0,this.radius=r||0},i.Circle.prototype.clone=function(){return new i.Circle(this.x,this.y,this.radius)},i.Circle.prototype.contains=function(e,t){if(this.radius<=0)return!1;var r=this.x-e,i=this.y-t,n=this.radius*this.radius;return r*=r,i*=i,n>=r+i},i.Circle.prototype.getBounds=function(){return new i.Rectangle(this.x-this.radius,this.y-this.radius,2*this.radius,2*this.radius)},i.Circle.prototype.constructor=i.Circle,i.Ellipse=function(e,t,r,i){this.x=e||0,this.y=t||0,this.width=r||0,this.height=i||0},i.Ellipse.prototype.clone=function(){return new i.Ellipse(this.x,this.y,this.width,this.height)},i.Ellipse.prototype.contains=function(e,t){if(this.width<=0||this.height<=0)return!1;var r=(e-this.x)/this.width,i=(t-this.y)/this.height;return r*=r,i*=i,1>=r+i},i.Ellipse.prototype.getBounds=function(){return new i.Rectangle(this.x-this.width,this.y-this.height,this.width,this.height)},i.Ellipse.prototype.constructor=i.Ellipse,i.RoundedRectangle=function(e,t,r,i,n){this.x=e||0,this.y=t||0,this.width=r||0,this.height=i||0,this.radius=n||20},i.RoundedRectangle.prototype.clone=function(){return new i.RoundedRectangle(this.x,this.y,this.width,this.height,this.radius)},i.RoundedRectangle.prototype.contains=function(e,t){if(this.width<=0||this.height<=0)return!1;var r=this.x;if(e>=r&&e<=r+this.width){var i=this.y;if(t>=i&&t<=i+this.height)return!0}return!1},i.RoundedRectangle.prototype.constructor=i.RoundedRectangle,i.Matrix=function(){this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0},i.Matrix.prototype.fromArray=function(e){this.a=e[0],this.b=e[1],this.c=e[3],this.d=e[4],this.tx=e[2],this.ty=e[5]},i.Matrix.prototype.toArray=function(e){this.array||(this.array=new i.Float32Array(9));var t=this.array;return e?(t[0]=this.a,t[1]=this.b,t[2]=0,t[3]=this.c,t[4]=this.d,t[5]=0,t[6]=this.tx,t[7]=this.ty,t[8]=1):(t[0]=this.a,t[1]=this.c,t[2]=this.tx,t[3]=this.b,t[4]=this.d,t[5]=this.ty,t[6]=0,t[7]=0,t[8]=1),t},i.Matrix.prototype.apply=function(e,t){return t=t||new i.Point,t.x=this.a*e.x+this.c*e.y+this.tx,t.y=this.b*e.x+this.d*e.y+this.ty,t},i.Matrix.prototype.applyInverse=function(e,t){t=t||new i.Point;var r=1/(this.a*this.d+this.c*-this.b);return t.x=this.d*r*e.x+-this.c*r*e.y+(this.ty*this.c-this.tx*this.d)*r,t.y=this.a*r*e.y+-this.b*r*e.x+(-this.ty*this.a+this.tx*this.b)*r,t},i.Matrix.prototype.translate=function(e,t){return this.tx+=e,this.ty+=t,this},i.Matrix.prototype.scale=function(e,t){return this.a*=e,this.d*=t,this.c*=e,this.b*=t,this.tx*=e,this.ty*=t,this},i.Matrix.prototype.rotate=function(e){var t=Math.cos(e),r=Math.sin(e),i=this.a,n=this.c,o=this.tx;return this.a=i*t-this.b*r,this.b=i*r+this.b*t,this.c=n*t-this.d*r,this.d=n*r+this.d*t,this.tx=o*t-this.ty*r,this.ty=o*r+this.ty*t,this},i.Matrix.prototype.append=function(e){var t=this.a,r=this.b,i=this.c,n=this.d;return this.a=e.a*t+e.b*i,this.b=e.a*r+e.b*n,this.c=e.c*t+e.d*i,this.d=e.c*r+e.d*n,this.tx=e.tx*t+e.ty*i+this.tx,this.ty=e.tx*r+e.ty*n+this.ty,this},i.Matrix.prototype.identity=function(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this},i.identityMatrix=new i.Matrix,i.DisplayObject=function(){this.position=new i.Point,this.scale=new i.Point(1,1),this.pivot=new i.Point(0,0),this.rotation=0,this.alpha=1,this.visible=!0,this.hitArea=null,this.buttonMode=!1,this.renderable=!1,this.parent=null,this.stage=null,this.worldAlpha=1,this._interactive=!1,this.defaultCursor="pointer",this.worldTransform=new i.Matrix,this._sr=0,this._cr=1,this.filterArea=null,this._bounds=new i.Rectangle(0,0,1,1),this._currentBounds=null,this._mask=null,this._cacheAsBitmap=!1,this._cacheIsDirty=!1},i.DisplayObject.prototype.constructor=i.DisplayObject,Object.defineProperty(i.DisplayObject.prototype,"interactive",{get:function(){return this._interactive},set:function(e){this._interactive=e,this.stage&&(this.stage.dirty=!0)}}),Object.defineProperty(i.DisplayObject.prototype,"worldVisible",{get:function(){var e=this;do{if(!e.visible)return!1;e=e.parent}while(e);return!0}}),Object.defineProperty(i.DisplayObject.prototype,"mask",{get:function(){return this._mask},set:function(e){this._mask&&(this._mask.isMask=!1),this._mask=e,this._mask&&(this._mask.isMask=!0)}}),Object.defineProperty(i.DisplayObject.prototype,"filters",{get:function(){return this._filters},set:function(e){if(e){for(var t=[],r=0;r<e.length;r++)for(var i=e[r].passes,n=0;n<i.length;n++)t.push(i[n]);this._filterBlock={target:this,filterPasses:t}}this._filters=e}}),Object.defineProperty(i.DisplayObject.prototype,"cacheAsBitmap",{get:function(){return this._cacheAsBitmap},set:function(e){this._cacheAsBitmap!==e&&(e?this._generateCachedSprite():this._destroyCachedSprite(),this._cacheAsBitmap=e)}}),i.DisplayObject.prototype.updateTransform=function(){var e,t,r,n,o,s,a=this.parent.worldTransform,h=this.worldTransform;this.rotation%i.PI_2?(this.rotation!==this.rotationCache&&(this.rotationCache=this.rotation,this._sr=Math.sin(this.rotation),this._cr=Math.cos(this.rotation)),e=this._cr*this.scale.x,t=this._sr*this.scale.x,r=-this._sr*this.scale.y,n=this._cr*this.scale.y,o=this.position.x,s=this.position.y,(this.pivot.x||this.pivot.y)&&(o-=this.pivot.x*e+this.pivot.y*r,s-=this.pivot.x*t+this.pivot.y*n),h.a=e*a.a+t*a.c,h.b=e*a.b+t*a.d,h.c=r*a.a+n*a.c,h.d=r*a.b+n*a.d,h.tx=o*a.a+s*a.c+a.tx,h.ty=o*a.b+s*a.d+a.ty):(e=this.scale.x,n=this.scale.y,o=this.position.x-this.pivot.x*e,s=this.position.y-this.pivot.y*n,h.a=e*a.a,h.b=e*a.b,h.c=n*a.c,h.d=n*a.d,h.tx=o*a.a+s*a.c+a.tx,h.ty=o*a.b+s*a.d+a.ty),this.worldAlpha=this.alpha*this.parent.worldAlpha
},i.DisplayObject.prototype.displayObjectUpdateTransform=i.DisplayObject.prototype.updateTransform,i.DisplayObject.prototype.getBounds=function(e){return e=e,i.EmptyRectangle},i.DisplayObject.prototype.getLocalBounds=function(){return this.getBounds(i.identityMatrix)},i.DisplayObject.prototype.setStageReference=function(e){this.stage=e,this._interactive&&(this.stage.dirty=!0)},i.DisplayObject.prototype.generateTexture=function(e,t,r){var n=this.getLocalBounds(),o=new i.RenderTexture(0|n.width,0|n.height,r,t,e);return i.DisplayObject._tempMatrix.tx=-n.x,i.DisplayObject._tempMatrix.ty=-n.y,o.render(this,i.DisplayObject._tempMatrix),o},i.DisplayObject.prototype.updateCache=function(){this._generateCachedSprite()},i.DisplayObject.prototype.toGlobal=function(e){return this.displayObjectUpdateTransform(),this.worldTransform.apply(e)},i.DisplayObject.prototype.toLocal=function(e,t){return t&&(e=t.toGlobal(e)),this.displayObjectUpdateTransform(),this.worldTransform.applyInverse(e)},i.DisplayObject.prototype._renderCachedSprite=function(e){this._cachedSprite.worldAlpha=this.worldAlpha,e.gl?i.Sprite.prototype._renderWebGL.call(this._cachedSprite,e):i.Sprite.prototype._renderCanvas.call(this._cachedSprite,e)},i.DisplayObject.prototype._generateCachedSprite=function(){this._cacheAsBitmap=!1;var e=this.getLocalBounds();if(this._cachedSprite)this._cachedSprite.texture.resize(0|e.width,0|e.height);else{var t=new i.RenderTexture(0|e.width,0|e.height);this._cachedSprite=new i.Sprite(t),this._cachedSprite.worldTransform=this.worldTransform}var r=this._filters;this._filters=null,this._cachedSprite.filters=r,i.DisplayObject._tempMatrix.tx=-e.x,i.DisplayObject._tempMatrix.ty=-e.y,this._cachedSprite.texture.render(this,i.DisplayObject._tempMatrix,!0),this._cachedSprite.anchor.x=-(e.x/e.width),this._cachedSprite.anchor.y=-(e.y/e.height),this._filters=r,this._cacheAsBitmap=!0},i.DisplayObject.prototype._destroyCachedSprite=function(){this._cachedSprite&&(this._cachedSprite.texture.destroy(!0),this._cachedSprite=null)},i.DisplayObject.prototype._renderWebGL=function(e){e=e},i.DisplayObject.prototype._renderCanvas=function(e){e=e},i.DisplayObject._tempMatrix=new i.Matrix,Object.defineProperty(i.DisplayObject.prototype,"x",{get:function(){return this.position.x},set:function(e){this.position.x=e}}),Object.defineProperty(i.DisplayObject.prototype,"y",{get:function(){return this.position.y},set:function(e){this.position.y=e}}),i.DisplayObjectContainer=function(){i.DisplayObject.call(this),this.children=[]},i.DisplayObjectContainer.prototype=Object.create(i.DisplayObject.prototype),i.DisplayObjectContainer.prototype.constructor=i.DisplayObjectContainer,Object.defineProperty(i.DisplayObjectContainer.prototype,"width",{get:function(){return this.scale.x*this.getLocalBounds().width},set:function(e){var t=this.getLocalBounds().width;this.scale.x=0!==t?e/t:1,this._width=e}}),Object.defineProperty(i.DisplayObjectContainer.prototype,"height",{get:function(){return this.scale.y*this.getLocalBounds().height},set:function(e){var t=this.getLocalBounds().height;this.scale.y=0!==t?e/t:1,this._height=e}}),i.DisplayObjectContainer.prototype.addChild=function(e){return this.addChildAt(e,this.children.length)},i.DisplayObjectContainer.prototype.addChildAt=function(e,t){if(t>=0&&t<=this.children.length)return e.parent&&e.parent.removeChild(e),e.parent=this,this.children.splice(t,0,e),this.stage&&e.setStageReference(this.stage),e;throw new Error(e+"addChildAt: The index "+t+" supplied is out of bounds "+this.children.length)},i.DisplayObjectContainer.prototype.swapChildren=function(e,t){if(e!==t){var r=this.getChildIndex(e),i=this.getChildIndex(t);if(0>r||0>i)throw new Error("swapChildren: Both the supplied DisplayObjects must be a child of the caller.");this.children[r]=t,this.children[i]=e}},i.DisplayObjectContainer.prototype.getChildIndex=function(e){var t=this.children.indexOf(e);if(-1===t)throw new Error("The supplied DisplayObject must be a child of the caller");return t},i.DisplayObjectContainer.prototype.setChildIndex=function(e,t){if(0>t||t>=this.children.length)throw new Error("The supplied index is out of bounds");var r=this.getChildIndex(e);this.children.splice(r,1),this.children.splice(t,0,e)},i.DisplayObjectContainer.prototype.getChildAt=function(e){if(0>e||e>=this.children.length)throw new Error("getChildAt: Supplied index "+e+" does not exist in the child list, or the supplied DisplayObject must be a child of the caller");return this.children[e]},i.DisplayObjectContainer.prototype.removeChild=function(e){var t=this.children.indexOf(e);return-1!==t?this.removeChildAt(t):void 0},i.DisplayObjectContainer.prototype.removeChildAt=function(e){var t=this.getChildAt(e);return this.stage&&t.removeStageReference(),t.parent=void 0,this.children.splice(e,1),t},i.DisplayObjectContainer.prototype.removeChildren=function(e,t){var r=e||0,i="number"==typeof t?t:this.children.length,n=i-r;if(n>0&&i>=n){for(var o=this.children.splice(r,n),s=0;s<o.length;s++){var a=o[s];this.stage&&a.removeStageReference(),a.parent=void 0}return o}if(0===n&&0===this.children.length)return[];throw new Error("removeChildren: Range Error, numeric values are outside the acceptable range")},i.DisplayObjectContainer.prototype.updateTransform=function(){if(this.visible&&(this.displayObjectUpdateTransform(),!this._cacheAsBitmap))for(var e=0,t=this.children.length;t>e;e++)this.children[e].updateTransform()},i.DisplayObjectContainer.prototype.displayObjectContainerUpdateTransform=i.DisplayObjectContainer.prototype.updateTransform,i.DisplayObjectContainer.prototype.getBounds=function(){if(0===this.children.length)return i.EmptyRectangle;for(var e,t,r,n=1/0,o=1/0,s=-1/0,a=-1/0,h=!1,c=0,u=this.children.length;u>c;c++){var f=this.children[c];f.visible&&(h=!0,e=this.children[c].getBounds(),n=n<e.x?n:e.x,o=o<e.y?o:e.y,t=e.width+e.x,r=e.height+e.y,s=s>t?s:t,a=a>r?a:r)}if(!h)return i.EmptyRectangle;var d=this._bounds;return d.x=n,d.y=o,d.width=s-n,d.height=a-o,d},i.DisplayObjectContainer.prototype.getLocalBounds=function(){var e=this.worldTransform;this.worldTransform=i.identityMatrix;for(var t=0,r=this.children.length;r>t;t++)this.children[t].updateTransform();var n=this.getBounds();return this.worldTransform=e,n},i.DisplayObjectContainer.prototype.setStageReference=function(e){this.stage=e,this._interactive&&(this.stage.dirty=!0);for(var t=0,r=this.children.length;r>t;t++){var i=this.children[t];i.setStageReference(e)}},i.DisplayObjectContainer.prototype.removeStageReference=function(){for(var e=0,t=this.children.length;t>e;e++){var r=this.children[e];r.removeStageReference()}this._interactive&&(this.stage.dirty=!0),this.stage=null},i.DisplayObjectContainer.prototype._renderWebGL=function(e){if(this.visible&&!(this.alpha<=0)){if(this._cacheAsBitmap)return void this._renderCachedSprite(e);var t,r;if(this._mask||this._filters){for(this._filters&&(e.spriteBatch.flush(),e.filterManager.pushFilter(this._filterBlock)),this._mask&&(e.spriteBatch.stop(),e.maskManager.pushMask(this.mask,e),e.spriteBatch.start()),t=0,r=this.children.length;r>t;t++)this.children[t]._renderWebGL(e);e.spriteBatch.stop(),this._mask&&e.maskManager.popMask(this._mask,e),this._filters&&e.filterManager.popFilter(),e.spriteBatch.start()}else for(t=0,r=this.children.length;r>t;t++)this.children[t]._renderWebGL(e)}},i.DisplayObjectContainer.prototype._renderCanvas=function(e){if(this.visible!==!1&&0!==this.alpha){if(this._cacheAsBitmap)return void this._renderCachedSprite(e);this._mask&&e.maskManager.pushMask(this._mask,e);for(var t=0,r=this.children.length;r>t;t++){var i=this.children[t];i._renderCanvas(e)}this._mask&&e.maskManager.popMask(e)}},i.Sprite=function(e){i.DisplayObjectContainer.call(this),this.anchor=new i.Point,this.texture=e||i.Texture.emptyTexture,this._width=0,this._height=0,this.tint=16777215,this.blendMode=i.blendModes.NORMAL,this.shader=null,this.texture.baseTexture.hasLoaded?this.onTextureUpdate():this.texture.on("update",this.onTextureUpdate.bind(this)),this.renderable=!0},i.Sprite.prototype=Object.create(i.DisplayObjectContainer.prototype),i.Sprite.prototype.constructor=i.Sprite,Object.defineProperty(i.Sprite.prototype,"width",{get:function(){return this.scale.x*this.texture.frame.width},set:function(e){this.scale.x=e/this.texture.frame.width,this._width=e}}),Object.defineProperty(i.Sprite.prototype,"height",{get:function(){return this.scale.y*this.texture.frame.height},set:function(e){this.scale.y=e/this.texture.frame.height,this._height=e}}),i.Sprite.prototype.setTexture=function(e){this.texture=e,this.cachedTint=16777215},i.Sprite.prototype.onTextureUpdate=function(){this._width&&(this.scale.x=this._width/this.texture.frame.width),this._height&&(this.scale.y=this._height/this.texture.frame.height)},i.Sprite.prototype.getBounds=function(e){var t=this.texture.frame.width,r=this.texture.frame.height,i=t*(1-this.anchor.x),n=t*-this.anchor.x,o=r*(1-this.anchor.y),s=r*-this.anchor.y,a=e||this.worldTransform,h=a.a,c=a.b,u=a.c,f=a.d,d=a.tx,l=a.ty,p=-1/0,b=-1/0,m=1/0,v=1/0;if(0===c&&0===u)0>h&&(h*=-1),0>f&&(f*=-1),m=h*n+d,p=h*i+d,v=f*s+l,b=f*o+l;else{var g=h*n+u*s+d,y=f*s+c*n+l,w=h*i+u*s+d,_=f*s+c*i+l,x=h*i+u*o+d,S=f*o+c*i+l,T=h*n+u*o+d,A=f*o+c*n+l;m=m>g?g:m,m=m>w?w:m,m=m>x?x:m,m=m>T?T:m,v=v>y?y:v,v=v>_?_:v,v=v>S?S:v,v=v>A?A:v,p=g>p?g:p,p=w>p?w:p,p=x>p?x:p,p=T>p?T:p,b=y>b?y:b,b=_>b?_:b,b=S>b?S:b,b=A>b?A:b}var E=this._bounds;return E.x=m,E.width=p-m,E.y=v,E.height=b-v,this._currentBounds=E,E},i.Sprite.prototype._renderWebGL=function(e){if(this.visible&&!(this.alpha<=0)){var t,r;if(this._mask||this._filters){var i=e.spriteBatch;for(this._filters&&(i.flush(),e.filterManager.pushFilter(this._filterBlock)),this._mask&&(i.stop(),e.maskManager.pushMask(this.mask,e),i.start()),i.render(this),t=0,r=this.children.length;r>t;t++)this.children[t]._renderWebGL(e);i.stop(),this._mask&&e.maskManager.popMask(this._mask,e),this._filters&&e.filterManager.popFilter(),i.start()}else for(e.spriteBatch.render(this),t=0,r=this.children.length;r>t;t++)this.children[t]._renderWebGL(e)}},i.Sprite.prototype._renderCanvas=function(e){if(!(this.visible===!1||0===this.alpha||this.texture.crop.width<=0||this.texture.crop.height<=0)){if(this.blendMode!==e.currentBlendMode&&(e.currentBlendMode=this.blendMode,e.context.globalCompositeOperation=i.blendModesCanvas[e.currentBlendMode]),this._mask&&e.maskManager.pushMask(this._mask,e),this.texture.valid){var t=this.texture.baseTexture.resolution/e.resolution;e.context.globalAlpha=this.worldAlpha,e.smoothProperty&&e.scaleMode!==this.texture.baseTexture.scaleMode&&(e.scaleMode=this.texture.baseTexture.scaleMode,e.context[e.smoothProperty]=e.scaleMode===i.scaleModes.LINEAR);var r=this.texture.trim?this.texture.trim.x-this.anchor.x*this.texture.trim.width:this.anchor.x*-this.texture.frame.width,n=this.texture.trim?this.texture.trim.y-this.anchor.y*this.texture.trim.height:this.anchor.y*-this.texture.frame.height;e.roundPixels?(e.context.setTransform(this.worldTransform.a,this.worldTransform.b,this.worldTransform.c,this.worldTransform.d,this.worldTransform.tx*e.resolution|0,this.worldTransform.ty*e.resolution|0),r=0|r,n=0|n):e.context.setTransform(this.worldTransform.a,this.worldTransform.b,this.worldTransform.c,this.worldTransform.d,this.worldTransform.tx*e.resolution,this.worldTransform.ty*e.resolution),16777215!==this.tint?(this.cachedTint!==this.tint&&(this.cachedTint=this.tint,this.tintedTexture=i.CanvasTinter.getTintedTexture(this,this.tint)),e.context.drawImage(this.tintedTexture,0,0,this.texture.crop.width,this.texture.crop.height,r/t,n/t,this.texture.crop.width/t,this.texture.crop.height/t)):e.context.drawImage(this.texture.baseTexture.source,this.texture.crop.x,this.texture.crop.y,this.texture.crop.width,this.texture.crop.height,r/t,n/t,this.texture.crop.width/t,this.texture.crop.height/t)}for(var o=0,s=this.children.length;s>o;o++)this.children[o]._renderCanvas(e);this._mask&&e.maskManager.popMask(e)}},i.Sprite.fromFrame=function(e){var t=i.TextureCache[e];if(!t)throw new Error('The frameId "'+e+'" does not exist in the texture cache'+this);return new i.Sprite(t)},i.Sprite.fromImage=function(e,t,r){var n=i.Texture.fromImage(e,t,r);return new i.Sprite(n)},i.SpriteBatch=function(e){i.DisplayObjectContainer.call(this),this.textureThing=e,this.ready=!1},i.SpriteBatch.prototype=Object.create(i.DisplayObjectContainer.prototype),i.SpriteBatch.prototype.constructor=i.SpriteBatch,i.SpriteBatch.prototype.initWebGL=function(e){this.fastSpriteBatch=new i.WebGLFastSpriteBatch(e),this.ready=!0},i.SpriteBatch.prototype.updateTransform=function(){this.displayObjectUpdateTransform()},i.SpriteBatch.prototype._renderWebGL=function(e){!this.visible||this.alpha<=0||!this.children.length||(this.ready||this.initWebGL(e.gl),e.spriteBatch.stop(),e.shaderManager.setShader(e.shaderManager.fastShader),this.fastSpriteBatch.begin(this,e),this.fastSpriteBatch.render(this),e.spriteBatch.start())},i.SpriteBatch.prototype._renderCanvas=function(e){if(this.visible&&!(this.alpha<=0)&&this.children.length){var t=e.context;t.globalAlpha=this.worldAlpha,this.displayObjectUpdateTransform();for(var r=this.worldTransform,i=!0,n=0;n<this.children.length;n++){var o=this.children[n];if(o.visible){var s=o.texture,a=s.frame;if(t.globalAlpha=this.worldAlpha*o.alpha,o.rotation%(2*Math.PI)===0)i&&(t.setTransform(r.a,r.b,r.c,r.d,r.tx,r.ty),i=!1),t.drawImage(s.baseTexture.source,a.x,a.y,a.width,a.height,o.anchor.x*-a.width*o.scale.x+o.position.x+.5|0,o.anchor.y*-a.height*o.scale.y+o.position.y+.5|0,a.width*o.scale.x,a.height*o.scale.y);else{i||(i=!0),o.displayObjectUpdateTransform();var h=o.worldTransform;e.roundPixels?t.setTransform(h.a,h.b,h.c,h.d,0|h.tx,0|h.ty):t.setTransform(h.a,h.b,h.c,h.d,h.tx,h.ty),t.drawImage(s.baseTexture.source,a.x,a.y,a.width,a.height,o.anchor.x*-a.width+.5|0,o.anchor.y*-a.height+.5|0,a.width,a.height)}}}}},i.MovieClip=function(e){i.Sprite.call(this,e[0]),this.textures=e,this.animationSpeed=1,this.loop=!0,this.onComplete=null,this.currentFrame=0,this.playing=!1},i.MovieClip.prototype=Object.create(i.Sprite.prototype),i.MovieClip.prototype.constructor=i.MovieClip,Object.defineProperty(i.MovieClip.prototype,"totalFrames",{get:function(){return this.textures.length}}),i.MovieClip.prototype.stop=function(){this.playing=!1},i.MovieClip.prototype.play=function(){this.playing=!0},i.MovieClip.prototype.gotoAndStop=function(e){this.playing=!1,this.currentFrame=e;var t=this.currentFrame+.5|0;this.setTexture(this.textures[t%this.textures.length])},i.MovieClip.prototype.gotoAndPlay=function(e){this.currentFrame=e,this.playing=!0},i.MovieClip.prototype.updateTransform=function(){if(this.displayObjectContainerUpdateTransform(),this.playing){this.currentFrame+=this.animationSpeed;var e=this.currentFrame+.5|0;this.currentFrame=this.currentFrame%this.textures.length,this.loop||e<this.textures.length?this.setTexture(this.textures[e%this.textures.length]):e>=this.textures.length&&(this.gotoAndStop(this.textures.length-1),this.onComplete&&this.onComplete())}},i.MovieClip.fromFrames=function(e){for(var t=[],r=0;r<e.length;r++)t.push(new i.Texture.fromFrame(e[r]));return new i.MovieClip(t)},i.MovieClip.fromImages=function(e){for(var t=[],r=0;r<e.length;r++)t.push(new i.Texture.fromImage(e[r]));return new i.MovieClip(t)},i.FilterBlock=function(){this.visible=!0,this.renderable=!0},i.FilterBlock.prototype.constructor=i.FilterBlock,i.Text=function(e,t){this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d"),this.resolution=1,i.Sprite.call(this,i.Texture.fromCanvas(this.canvas)),this.setText(e),this.setStyle(t)},i.Text.prototype=Object.create(i.Sprite.prototype),i.Text.prototype.constructor=i.Text,Object.defineProperty(i.Text.prototype,"width",{get:function(){return this.dirty&&(this.updateText(),this.dirty=!1),this.scale.x*this.texture.frame.width},set:function(e){this.scale.x=e/this.texture.frame.width,this._width=e}}),Object.defineProperty(i.Text.prototype,"height",{get:function(){return this.dirty&&(this.updateText(),this.dirty=!1),this.scale.y*this.texture.frame.height},set:function(e){this.scale.y=e/this.texture.frame.height,this._height=e}}),i.Text.prototype.setStyle=function(e){e=e||{},e.font=e.font||"bold 20pt Arial",e.fill=e.fill||"black",e.align=e.align||"left",e.stroke=e.stroke||"black",e.strokeThickness=e.strokeThickness||0,e.wordWrap=e.wordWrap||!1,e.wordWrapWidth=e.wordWrapWidth||100,e.dropShadow=e.dropShadow||!1,e.dropShadowAngle=e.dropShadowAngle||Math.PI/6,e.dropShadowDistance=e.dropShadowDistance||4,e.dropShadowColor=e.dropShadowColor||"black",this.style=e,this.dirty=!0},i.Text.prototype.setText=function(e){this.text=e.toString()||" ",this.dirty=!0},i.Text.prototype.updateText=function(){this.texture.baseTexture.resolution=this.resolution,this.context.font=this.style.font;var e=this.text;this.style.wordWrap&&(e=this.wordWrap(this.text));for(var t=e.split(/(?:\r\n|\r|\n)/),r=[],i=0,n=this.determineFontProperties(this.style.font),o=0;o<t.length;o++){var s=this.context.measureText(t[o]).width;r[o]=s,i=Math.max(i,s)}var a=i+this.style.strokeThickness;this.style.dropShadow&&(a+=this.style.dropShadowDistance),this.canvas.width=(a+this.context.lineWidth)*this.resolution;var h=n.fontSize+this.style.strokeThickness,c=h*t.length;this.style.dropShadow&&(c+=this.style.dropShadowDistance),this.canvas.height=c*this.resolution,this.context.scale(this.resolution,this.resolution),navigator.isCocoonJS&&this.context.clearRect(0,0,this.canvas.width,this.canvas.height),this.context.font=this.style.font,this.context.strokeStyle=this.style.stroke,this.context.lineWidth=this.style.strokeThickness,this.context.textBaseline="alphabetic";var u,f;if(this.style.dropShadow){this.context.fillStyle=this.style.dropShadowColor;var d=Math.sin(this.style.dropShadowAngle)*this.style.dropShadowDistance,l=Math.cos(this.style.dropShadowAngle)*this.style.dropShadowDistance;for(o=0;o<t.length;o++)u=this.style.strokeThickness/2,f=this.style.strokeThickness/2+o*h+n.ascent,"right"===this.style.align?u+=i-r[o]:"center"===this.style.align&&(u+=(i-r[o])/2),this.style.fill&&this.context.fillText(t[o],u+d,f+l)}for(this.context.fillStyle=this.style.fill,o=0;o<t.length;o++)u=this.style.strokeThickness/2,f=this.style.strokeThickness/2+o*h+n.ascent,"right"===this.style.align?u+=i-r[o]:"center"===this.style.align&&(u+=(i-r[o])/2),this.style.stroke&&this.style.strokeThickness&&this.context.strokeText(t[o],u,f),this.style.fill&&this.context.fillText(t[o],u,f);this.updateTexture()},i.Text.prototype.updateTexture=function(){this.texture.baseTexture.width=this.canvas.width,this.texture.baseTexture.height=this.canvas.height,this.texture.crop.width=this.texture.frame.width=this.canvas.width,this.texture.crop.height=this.texture.frame.height=this.canvas.height,this._width=this.canvas.width,this._height=this.canvas.height,this.texture.baseTexture.dirty()},i.Text.prototype._renderWebGL=function(e){this.dirty&&(this.resolution=e.resolution,this.updateText(),this.dirty=!1),i.Sprite.prototype._renderWebGL.call(this,e)},i.Text.prototype._renderCanvas=function(e){this.dirty&&(this.resolution=e.resolution,this.updateText(),this.dirty=!1),i.Sprite.prototype._renderCanvas.call(this,e)},i.Text.prototype.determineFontProperties=function(e){var t=i.Text.fontPropertiesCache[e];if(!t){t={};var r=i.Text.fontPropertiesCanvas,n=i.Text.fontPropertiesContext;n.font=e;var o=Math.ceil(n.measureText("|Mq").width),s=Math.ceil(n.measureText("M").width),a=2*s;s=1.4*s|0,r.width=o,r.height=a,n.fillStyle="#f00",n.fillRect(0,0,o,a),n.font=e,n.textBaseline="alphabetic",n.fillStyle="#000",n.fillText("|MÉq",0,s);var h,c,u=n.getImageData(0,0,o,a).data,f=u.length,d=4*o,l=0,p=!1;for(h=0;s>h;h++){for(c=0;d>c;c+=4)if(255!==u[l+c]){p=!0;break}if(p)break;l+=d}for(t.ascent=s-h,l=f-d,p=!1,h=a;h>s;h--){for(c=0;d>c;c+=4)if(255!==u[l+c]){p=!0;break}if(p)break;l-=d}t.descent=h-s,t.descent+=6,t.fontSize=t.ascent+t.descent,i.Text.fontPropertiesCache[e]=t}return t},i.Text.prototype.wordWrap=function(e){for(var t="",r=e.split("\n"),i=0;i<r.length;i++){for(var n=this.style.wordWrapWidth,o=r[i].split(" "),s=0;s<o.length;s++){var a=this.context.measureText(o[s]).width,h=a+this.context.measureText(" ").width;0===s||h>n?(s>0&&(t+="\n"),t+=o[s],n=this.style.wordWrapWidth-a):(n-=h,t+=" "+o[s])}i<r.length-1&&(t+="\n")}return t},i.Text.prototype.getBounds=function(e){return this.dirty&&(this.updateText(),this.dirty=!1),i.Sprite.prototype.getBounds.call(this,e)},i.Text.prototype.destroy=function(e){this.context=null,this.canvas=null,this.texture.destroy(void 0===e?!0:e)},i.Text.fontPropertiesCache={},i.Text.fontPropertiesCanvas=document.createElement("canvas"),i.Text.fontPropertiesContext=i.Text.fontPropertiesCanvas.getContext("2d"),i.BitmapText=function(e,t){i.DisplayObjectContainer.call(this),this.textWidth=0,this.textHeight=0,this._pool=[],this.setText(e),this.setStyle(t),this.updateText(),this.dirty=!1},i.BitmapText.prototype=Object.create(i.DisplayObjectContainer.prototype),i.BitmapText.prototype.constructor=i.BitmapText,i.BitmapText.prototype.setText=function(e){this.text=e||" ",this.dirty=!0},i.BitmapText.prototype.setStyle=function(e){e=e||{},e.align=e.align||"left",this.style=e;var t=e.font.split(" ");this.fontName=t[t.length-1],this.fontSize=t.length>=2?parseInt(t[t.length-2],10):i.BitmapText.fonts[this.fontName].size,this.dirty=!0,this.tint=e.tint},i.BitmapText.prototype.updateText=function(){for(var e=i.BitmapText.fonts[this.fontName],t=new i.Point,r=null,n=[],o=0,s=[],a=0,h=this.fontSize/e.size,c=0;c<this.text.length;c++){var u=this.text.charCodeAt(c);if(/(?:\r\n|\r|\n)/.test(this.text.charAt(c)))s.push(t.x),o=Math.max(o,t.x),a++,t.x=0,t.y+=e.lineHeight,r=null;else{var f=e.chars[u];f&&(r&&f.kerning[r]&&(t.x+=f.kerning[r]),n.push({texture:f.texture,line:a,charCode:u,position:new i.Point(t.x+f.xOffset,t.y+f.yOffset)}),t.x+=f.xAdvance,r=u)}}s.push(t.x),o=Math.max(o,t.x);var d=[];for(c=0;a>=c;c++){var l=0;"right"===this.style.align?l=o-s[c]:"center"===this.style.align&&(l=(o-s[c])/2),d.push(l)}var p=this.children.length,b=n.length,m=this.tint||16777215;for(c=0;b>c;c++){var v=p>c?this.children[c]:this._pool.pop();v?v.setTexture(n[c].texture):v=new i.Sprite(n[c].texture),v.position.x=(n[c].position.x+d[n[c].line])*h,v.position.y=n[c].position.y*h,v.scale.x=v.scale.y=h,v.tint=m,v.parent||this.addChild(v)}for(;this.children.length>b;){var g=this.getChildAt(this.children.length-1);this._pool.push(g),this.removeChild(g)}this.textWidth=o*h,this.textHeight=(t.y+e.lineHeight)*h},i.BitmapText.prototype.updateTransform=function(){this.dirty&&(this.updateText(),this.dirty=!1),i.DisplayObjectContainer.prototype.updateTransform.call(this)},i.BitmapText.fonts={},i.InteractionData=function(){this.global=new i.Point,this.target=null,this.originalEvent=null},i.InteractionData.prototype.getLocalPosition=function(e,t){var r=e.worldTransform,n=this.global,o=r.a,s=r.c,a=r.tx,h=r.b,c=r.d,u=r.ty,f=1/(o*c+s*-h);return t=t||new i.Point,t.x=c*f*n.x+-s*f*n.y+(u*s-a*c)*f,t.y=o*f*n.y+-h*f*n.x+(-u*o+a*h)*f,t},i.InteractionData.prototype.constructor=i.InteractionData,i.InteractionManager=function(e){this.stage=e,this.mouse=new i.InteractionData,this.touches={},this.tempPoint=new i.Point,this.mouseoverEnabled=!0,this.pool=[],this.interactiveItems=[],this.interactionDOMElement=null,this.onMouseMove=this.onMouseMove.bind(this),this.onMouseDown=this.onMouseDown.bind(this),this.onMouseOut=this.onMouseOut.bind(this),this.onMouseUp=this.onMouseUp.bind(this),this.onTouchStart=this.onTouchStart.bind(this),this.onTouchEnd=this.onTouchEnd.bind(this),this.onTouchMove=this.onTouchMove.bind(this),this.last=0,this.currentCursorStyle="inherit",this.mouseOut=!1,this.resolution=1,this._tempPoint=new i.Point},i.InteractionManager.prototype.constructor=i.InteractionManager,i.InteractionManager.prototype.collectInteractiveSprite=function(e,t){for(var r=e.children,i=r.length,n=i-1;n>=0;n--){var o=r[n];o._interactive?(t.interactiveChildren=!0,this.interactiveItems.push(o),o.children.length>0&&this.collectInteractiveSprite(o,o)):(o.__iParent=null,o.children.length>0&&this.collectInteractiveSprite(o,t))}},i.InteractionManager.prototype.setTarget=function(e){this.target=e,this.resolution=e.resolution,null===this.interactionDOMElement&&this.setTargetDomElement(e.view)},i.InteractionManager.prototype.setTargetDomElement=function(e){this.removeEvents(),window.navigator.msPointerEnabled&&(e.style["-ms-content-zooming"]="none",e.style["-ms-touch-action"]="none"),this.interactionDOMElement=e,e.addEventListener("mousemove",this.onMouseMove,!0),e.addEventListener("mousedown",this.onMouseDown,!0),e.addEventListener("mouseout",this.onMouseOut,!0),e.addEventListener("touchstart",this.onTouchStart,!0),e.addEventListener("touchend",this.onTouchEnd,!0),e.addEventListener("touchmove",this.onTouchMove,!0),window.addEventListener("mouseup",this.onMouseUp,!0)},i.InteractionManager.prototype.removeEvents=function(){this.interactionDOMElement&&(this.interactionDOMElement.style["-ms-content-zooming"]="",this.interactionDOMElement.style["-ms-touch-action"]="",this.interactionDOMElement.removeEventListener("mousemove",this.onMouseMove,!0),this.interactionDOMElement.removeEventListener("mousedown",this.onMouseDown,!0),this.interactionDOMElement.removeEventListener("mouseout",this.onMouseOut,!0),this.interactionDOMElement.removeEventListener("touchstart",this.onTouchStart,!0),this.interactionDOMElement.removeEventListener("touchend",this.onTouchEnd,!0),this.interactionDOMElement.removeEventListener("touchmove",this.onTouchMove,!0),this.interactionDOMElement=null,window.removeEventListener("mouseup",this.onMouseUp,!0))},i.InteractionManager.prototype.update=function(){if(this.target){var e=Date.now(),t=e-this.last;if(t=t*i.INTERACTION_FREQUENCY/1e3,!(1>t)){this.last=e;var r=0;this.dirty&&this.rebuildInteractiveGraph();var n=this.interactiveItems.length,o="inherit",s=!1;for(r=0;n>r;r++){var a=this.interactiveItems[r];a.__hit=this.hitTest(a,this.mouse),this.mouse.target=a,a.__hit&&!s?(a.buttonMode&&(o=a.defaultCursor),a.interactiveChildren||(s=!0),a.__isOver||(a.mouseover&&a.mouseover(this.mouse),a.__isOver=!0)):a.__isOver&&(a.mouseout&&a.mouseout(this.mouse),a.__isOver=!1)}this.currentCursorStyle!==o&&(this.currentCursorStyle=o,this.interactionDOMElement.style.cursor=o)}}},i.InteractionManager.prototype.rebuildInteractiveGraph=function(){this.dirty=!1;for(var e=this.interactiveItems.length,t=0;e>t;t++)this.interactiveItems[t].interactiveChildren=!1;this.interactiveItems=[],this.stage.interactive&&this.interactiveItems.push(this.stage),this.collectInteractiveSprite(this.stage,this.stage)},i.InteractionManager.prototype.onMouseMove=function(e){this.dirty&&this.rebuildInteractiveGraph(),this.mouse.originalEvent=e;var t=this.interactionDOMElement.getBoundingClientRect();this.mouse.global.x=(e.clientX-t.left)*(this.target.width/t.width)/this.resolution,this.mouse.global.y=(e.clientY-t.top)*(this.target.height/t.height)/this.resolution;for(var r=this.interactiveItems.length,i=0;r>i;i++){var n=this.interactiveItems[i];n.mousemove&&n.mousemove(this.mouse)}},i.InteractionManager.prototype.onMouseDown=function(e){this.dirty&&this.rebuildInteractiveGraph(),this.mouse.originalEvent=e,i.AUTO_PREVENT_DEFAULT&&this.mouse.originalEvent.preventDefault();for(var t=this.interactiveItems.length,r=this.mouse.originalEvent,n=2===r.button||3===r.which,o=n?"rightdown":"mousedown",s=n?"rightclick":"click",a=n?"__rightIsDown":"__mouseIsDown",h=n?"__isRightDown":"__isDown",c=0;t>c;c++){var u=this.interactiveItems[c];if((u[o]||u[s])&&(u[a]=!0,u.__hit=this.hitTest(u,this.mouse),u.__hit&&(u[o]&&u[o](this.mouse),u[h]=!0,!u.interactiveChildren)))break}},i.InteractionManager.prototype.onMouseOut=function(e){this.dirty&&this.rebuildInteractiveGraph(),this.mouse.originalEvent=e;var t=this.interactiveItems.length;this.interactionDOMElement.style.cursor="inherit";for(var r=0;t>r;r++){var i=this.interactiveItems[r];i.__isOver&&(this.mouse.target=i,i.mouseout&&i.mouseout(this.mouse),i.__isOver=!1)}this.mouseOut=!0,this.mouse.global.x=-1e4,this.mouse.global.y=-1e4},i.InteractionManager.prototype.onMouseUp=function(e){this.dirty&&this.rebuildInteractiveGraph(),this.mouse.originalEvent=e;for(var t=this.interactiveItems.length,r=!1,i=this.mouse.originalEvent,n=2===i.button||3===i.which,o=n?"rightup":"mouseup",s=n?"rightclick":"click",a=n?"rightupoutside":"mouseupoutside",h=n?"__isRightDown":"__isDown",c=0;t>c;c++){var u=this.interactiveItems[c];(u[s]||u[o]||u[a])&&(u.__hit=this.hitTest(u,this.mouse),u.__hit&&!r?(u[o]&&u[o](this.mouse),u[h]&&u[s]&&u[s](this.mouse),u.interactiveChildren||(r=!0)):u[h]&&u[a]&&u[a](this.mouse),u[h]=!1)}},i.InteractionManager.prototype.hitTest=function(e,t){var r=t.global;if(!e.worldVisible)return!1;e.worldTransform.applyInverse(r,this._tempPoint);var n,o=this._tempPoint.x,s=this._tempPoint.y;if(t.target=e,e.hitArea&&e.hitArea.contains)return e.hitArea.contains(o,s);if(e instanceof i.Sprite){var a,h=e.texture.frame.width,c=e.texture.frame.height,u=-h*e.anchor.x;if(o>u&&u+h>o&&(a=-c*e.anchor.y,s>a&&a+c>s))return!0}else if(e instanceof i.Graphics){var f=e.graphicsData;for(n=0;n<f.length;n++){var d=f[n];if(d.fill&&d.shape&&d.shape.contains(o,s))return!0}}var l=e.children.length;for(n=0;l>n;n++){var p=e.children[n],b=this.hitTest(p,t);if(b)return t.target=e,!0}return!1},i.InteractionManager.prototype.onTouchMove=function(e){this.dirty&&this.rebuildInteractiveGraph();var t,r=this.interactionDOMElement.getBoundingClientRect(),i=e.changedTouches,n=0;for(n=0;n<i.length;n++){var o=i[n];t=this.touches[o.identifier],t.originalEvent=e,t.global.x=(o.clientX-r.left)*(this.target.width/r.width)/this.resolution,t.global.y=(o.clientY-r.top)*(this.target.height/r.height)/this.resolution,!navigator.isCocoonJS||r.left||r.top||e.target.style.width||e.target.style.height||(t.global.x=o.clientX,t.global.y=o.clientY);for(var s=0;s<this.interactiveItems.length;s++){var a=this.interactiveItems[s];a.touchmove&&a.__touchData&&a.__touchData[o.identifier]&&a.touchmove(t)}}},i.InteractionManager.prototype.onTouchStart=function(e){this.dirty&&this.rebuildInteractiveGraph();var t=this.interactionDOMElement.getBoundingClientRect();i.AUTO_PREVENT_DEFAULT&&e.preventDefault();for(var r=e.changedTouches,n=0;n<r.length;n++){var o=r[n],s=this.pool.pop();s||(s=new i.InteractionData),s.originalEvent=e,this.touches[o.identifier]=s,s.global.x=(o.clientX-t.left)*(this.target.width/t.width)/this.resolution,s.global.y=(o.clientY-t.top)*(this.target.height/t.height)/this.resolution,!navigator.isCocoonJS||t.left||t.top||e.target.style.width||e.target.style.height||(s.global.x=o.clientX,s.global.y=o.clientY);for(var a=this.interactiveItems.length,h=0;a>h;h++){var c=this.interactiveItems[h];if((c.touchstart||c.tap)&&(c.__hit=this.hitTest(c,s),c.__hit&&(c.touchstart&&c.touchstart(s),c.__isDown=!0,c.__touchData=c.__touchData||{},c.__touchData[o.identifier]=s,!c.interactiveChildren)))break}}},i.InteractionManager.prototype.onTouchEnd=function(e){this.dirty&&this.rebuildInteractiveGraph();for(var t=this.interactionDOMElement.getBoundingClientRect(),r=e.changedTouches,i=0;i<r.length;i++){var n=r[i],o=this.touches[n.identifier],s=!1;o.global.x=(n.clientX-t.left)*(this.target.width/t.width)/this.resolution,o.global.y=(n.clientY-t.top)*(this.target.height/t.height)/this.resolution,!navigator.isCocoonJS||t.left||t.top||e.target.style.width||e.target.style.height||(o.global.x=n.clientX,o.global.y=n.clientY);for(var a=this.interactiveItems.length,h=0;a>h;h++){var c=this.interactiveItems[h];c.__touchData&&c.__touchData[n.identifier]&&(c.__hit=this.hitTest(c,c.__touchData[n.identifier]),o.originalEvent=e,(c.touchend||c.tap)&&(c.__hit&&!s?(c.touchend&&c.touchend(o),c.__isDown&&c.tap&&c.tap(o),c.interactiveChildren||(s=!0)):c.__isDown&&c.touchendoutside&&c.touchendoutside(o),c.__isDown=!1),c.__touchData[n.identifier]=null)}this.pool.push(o),this.touches[n.identifier]=null}},i.Stage=function(e){i.DisplayObjectContainer.call(this),this.worldTransform=new i.Matrix,this.interactive=!0,this.interactionManager=new i.InteractionManager(this),this.dirty=!0,this.stage=this,this.stage.hitArea=new i.Rectangle(0,0,1e5,1e5),this.setBackgroundColor(e)
},i.Stage.prototype=Object.create(i.DisplayObjectContainer.prototype),i.Stage.prototype.constructor=i.Stage,i.Stage.prototype.setInteractionDelegate=function(e){this.interactionManager.setTargetDomElement(e)},i.Stage.prototype.updateTransform=function(){this.worldAlpha=1;for(var e=0,t=this.children.length;t>e;e++)this.children[e].updateTransform();this.dirty&&(this.dirty=!1,this.interactionManager.dirty=!0),this.interactive&&this.interactionManager.update()},i.Stage.prototype.setBackgroundColor=function(e){this.backgroundColor=e||0,this.backgroundColorSplit=i.hex2rgb(this.backgroundColor);var t=this.backgroundColor.toString(16);t="000000".substr(0,6-t.length)+t,this.backgroundColorString="#"+t},i.Stage.prototype.getMousePosition=function(){return this.interactionManager.mouse.global},function(e){for(var t=0,r=["ms","moz","webkit","o"],i=0;i<r.length&&!e.requestAnimationFrame;++i)e.requestAnimationFrame=e[r[i]+"RequestAnimationFrame"],e.cancelAnimationFrame=e[r[i]+"CancelAnimationFrame"]||e[r[i]+"CancelRequestAnimationFrame"];e.requestAnimationFrame||(e.requestAnimationFrame=function(r){var i=(new Date).getTime(),n=Math.max(0,16-(i-t)),o=e.setTimeout(function(){r(i+n)},n);return t=i+n,o}),e.cancelAnimationFrame||(e.cancelAnimationFrame=function(e){clearTimeout(e)}),e.requestAnimFrame=e.requestAnimationFrame}(this),i.hex2rgb=function(e){return[(e>>16&255)/255,(e>>8&255)/255,(255&e)/255]},i.rgb2hex=function(e){return(255*e[0]<<16)+(255*e[1]<<8)+255*e[2]},"function"!=typeof Function.prototype.bind&&(Function.prototype.bind=function(){return function(e){function t(){for(var i=arguments.length,o=new Array(i);i--;)o[i]=arguments[i];return o=n.concat(o),r.apply(this instanceof t?this:e,o)}var r=this,i=arguments.length-1,n=[];if(i>0)for(n.length=i;i--;)n[i]=arguments[i+1];if("function"!=typeof r)throw new TypeError;return t.prototype=function e(t){return t&&(e.prototype=t),this instanceof e?void 0:new e}(r.prototype),t}}()),i.AjaxRequest=function(){var e=["Msxml2.XMLHTTP.6.0","Msxml2.XMLHTTP.3.0","Microsoft.XMLHTTP"];if(!window.ActiveXObject)return window.XMLHttpRequest?new window.XMLHttpRequest:!1;for(var t=0;t<e.length;t++)try{return new window.ActiveXObject(e[t])}catch(e){}},i.canUseNewCanvasBlendModes=function(){if("undefined"==typeof document)return!1;var e=document.createElement("canvas");e.width=1,e.height=1;var t=e.getContext("2d");return t.fillStyle="#000",t.fillRect(0,0,1,1),t.globalCompositeOperation="multiply",t.fillStyle="#fff",t.fillRect(0,0,1,1),0===t.getImageData(0,0,1,1).data[0]},i.getNextPowerOfTwo=function(e){if(e>0&&0===(e&e-1))return e;for(var t=1;e>t;)t<<=1;return t},i.isPowerOfTwo=function(e,t){return e>0&&0===(e&e-1)&&t>0&&0===(t&t-1)},i.EventTarget={call:function(e){e&&(e=e.prototype||e,i.EventTarget.mixin(e))},mixin:function(e){e.listeners=function(e){return this._listeners=this._listeners||{},this._listeners[e]?this._listeners[e].slice():[]},e.emit=e.dispatchEvent=function(e,t){if(this._listeners=this._listeners||{},"object"==typeof e&&(t=e,e=e.type),t&&t.__isEventObject===!0||(t=new i.Event(this,e,t)),this._listeners&&this._listeners[e]){var r,n=this._listeners[e].slice(0),o=n.length,s=n[0];for(r=0;o>r;s=n[++r])if(s.call(this,t),t.stoppedImmediate)return this;if(t.stopped)return this}return this.parent&&this.parent.emit&&this.parent.emit.call(this.parent,e,t),this},e.on=e.addEventListener=function(e,t){return this._listeners=this._listeners||{},(this._listeners[e]=this._listeners[e]||[]).push(t),this},e.once=function(e,t){function r(){t.apply(i.off(e,r),arguments)}this._listeners=this._listeners||{};var i=this;return r._originalHandler=t,this.on(e,r)},e.off=e.removeEventListener=function(e,t){if(this._listeners=this._listeners||{},!this._listeners[e])return this;for(var r=this._listeners[e],i=t?r.length:0;i-->0;)(r[i]===t||r[i]._originalHandler===t)&&r.splice(i,1);return 0===r.length&&delete this._listeners[e],this},e.removeAllListeners=function(e){return this._listeners=this._listeners||{},this._listeners[e]?(delete this._listeners[e],this):this}}},i.Event=function(e,t,r){this.__isEventObject=!0,this.stopped=!1,this.stoppedImmediate=!1,this.target=e,this.type=t,this.data=r,this.content=r,this.timeStamp=Date.now()},i.Event.prototype.stopPropagation=function(){this.stopped=!0},i.Event.prototype.stopImmediatePropagation=function(){this.stoppedImmediate=!0},i.autoDetectRenderer=function(e,t,r){e||(e=800),t||(t=600);var n=function(){try{var e=document.createElement("canvas");return!!window.WebGLRenderingContext&&(e.getContext("webgl")||e.getContext("experimental-webgl"))}catch(e){return!1}}();return n?new i.WebGLRenderer(e,t,r):new i.CanvasRenderer(e,t,r)},i.autoDetectRecommendedRenderer=function(e,t,r){e||(e=800),t||(t=600);var n=function(){try{var e=document.createElement("canvas");return!!window.WebGLRenderingContext&&(e.getContext("webgl")||e.getContext("experimental-webgl"))}catch(e){return!1}}(),o=/Android/i.test(navigator.userAgent);return n&&!o?new i.WebGLRenderer(e,t,r):new i.CanvasRenderer(e,t,r)},i.PolyK={},i.PolyK.Triangulate=function(e){var t=!0,r=e.length>>1;if(3>r)return[];for(var n=[],o=[],s=0;r>s;s++)o.push(s);s=0;for(var a=r;a>3;){var h=o[(s+0)%a],c=o[(s+1)%a],u=o[(s+2)%a],f=e[2*h],d=e[2*h+1],l=e[2*c],p=e[2*c+1],b=e[2*u],m=e[2*u+1],v=!1;if(i.PolyK._convex(f,d,l,p,b,m,t)){v=!0;for(var g=0;a>g;g++){var y=o[g];if(y!==h&&y!==c&&y!==u&&i.PolyK._PointInTriangle(e[2*y],e[2*y+1],f,d,l,p,b,m)){v=!1;break}}}if(v)n.push(h,c,u),o.splice((s+1)%a,1),a--,s=0;else if(s++>3*a){if(!t)return null;for(n=[],o=[],s=0;r>s;s++)o.push(s);s=0,a=r,t=!1}}return n.push(o[0],o[1],o[2]),n},i.PolyK._PointInTriangle=function(e,t,r,i,n,o,s,a){var h=s-r,c=a-i,u=n-r,f=o-i,d=e-r,l=t-i,p=h*h+c*c,b=h*u+c*f,m=h*d+c*l,v=u*u+f*f,g=u*d+f*l,y=1/(p*v-b*b),w=(v*m-b*g)*y,_=(p*g-b*m)*y;return w>=0&&_>=0&&1>w+_},i.PolyK._convex=function(e,t,r,i,n,o,s){return(t-i)*(n-r)+(r-e)*(o-i)>=0===s},i.initDefaultShaders=function(){},i.CompileVertexShader=function(e,t){return i._CompileShader(e,t,e.VERTEX_SHADER)},i.CompileFragmentShader=function(e,t){return i._CompileShader(e,t,e.FRAGMENT_SHADER)},i._CompileShader=function(e,t,r){var i=t.join("\n"),n=e.createShader(r);return e.shaderSource(n,i),e.compileShader(n),e.getShaderParameter(n,e.COMPILE_STATUS)?n:(window.console.log(e.getShaderInfoLog(n)),null)},i.compileProgram=function(e,t,r){var n=i.CompileFragmentShader(e,r),o=i.CompileVertexShader(e,t),s=e.createProgram();return e.attachShader(s,o),e.attachShader(s,n),e.linkProgram(s),e.getProgramParameter(s,e.LINK_STATUS)||window.console.log("Could not initialise shaders"),s},i.PixiShader=function(e){this._UID=i._UID++,this.gl=e,this.program=null,this.fragmentSrc=["precision lowp float;","varying vec2 vTextureCoord;","varying vec4 vColor;","uniform sampler2D uSampler;","void main(void) {","   gl_FragColor = texture2D(uSampler, vTextureCoord) * vColor ;","}"],this.textureCount=0,this.firstRun=!0,this.dirty=!0,this.attributes=[],this.init()},i.PixiShader.prototype.constructor=i.PixiShader,i.PixiShader.prototype.init=function(){var e=this.gl,t=i.compileProgram(e,this.vertexSrc||i.PixiShader.defaultVertexSrc,this.fragmentSrc);e.useProgram(t),this.uSampler=e.getUniformLocation(t,"uSampler"),this.projectionVector=e.getUniformLocation(t,"projectionVector"),this.offsetVector=e.getUniformLocation(t,"offsetVector"),this.dimensions=e.getUniformLocation(t,"dimensions"),this.aVertexPosition=e.getAttribLocation(t,"aVertexPosition"),this.aTextureCoord=e.getAttribLocation(t,"aTextureCoord"),this.colorAttribute=e.getAttribLocation(t,"aColor"),-1===this.colorAttribute&&(this.colorAttribute=2),this.attributes=[this.aVertexPosition,this.aTextureCoord,this.colorAttribute];for(var r in this.uniforms)this.uniforms[r].uniformLocation=e.getUniformLocation(t,r);this.initUniforms(),this.program=t},i.PixiShader.prototype.initUniforms=function(){this.textureCount=1;var e,t=this.gl;for(var r in this.uniforms){e=this.uniforms[r];var i=e.type;"sampler2D"===i?(e._init=!1,null!==e.value&&this.initSampler2D(e)):"mat2"===i||"mat3"===i||"mat4"===i?(e.glMatrix=!0,e.glValueLength=1,"mat2"===i?e.glFunc=t.uniformMatrix2fv:"mat3"===i?e.glFunc=t.uniformMatrix3fv:"mat4"===i&&(e.glFunc=t.uniformMatrix4fv)):(e.glFunc=t["uniform"+i],e.glValueLength="2f"===i||"2i"===i?2:"3f"===i||"3i"===i?3:"4f"===i||"4i"===i?4:1)}},i.PixiShader.prototype.initSampler2D=function(e){if(e.value&&e.value.baseTexture&&e.value.baseTexture.hasLoaded){var t=this.gl;if(t.activeTexture(t["TEXTURE"+this.textureCount]),t.bindTexture(t.TEXTURE_2D,e.value.baseTexture._glTextures[t.id]),e.textureData){var r=e.textureData,i=r.magFilter?r.magFilter:t.LINEAR,n=r.minFilter?r.minFilter:t.LINEAR,o=r.wrapS?r.wrapS:t.CLAMP_TO_EDGE,s=r.wrapT?r.wrapT:t.CLAMP_TO_EDGE,a=r.luminance?t.LUMINANCE:t.RGBA;if(r.repeat&&(o=t.REPEAT,s=t.REPEAT),t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,!!r.flipY),r.width){var h=r.width?r.width:512,c=r.height?r.height:2,u=r.border?r.border:0;t.texImage2D(t.TEXTURE_2D,0,a,h,c,u,a,t.UNSIGNED_BYTE,null)}else t.texImage2D(t.TEXTURE_2D,0,a,t.RGBA,t.UNSIGNED_BYTE,e.value.baseTexture.source);t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,i),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,n),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,o),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,s)}t.uniform1i(e.uniformLocation,this.textureCount),e._init=!0,this.textureCount++}},i.PixiShader.prototype.syncUniforms=function(){this.textureCount=1;var e,t=this.gl;for(var r in this.uniforms)e=this.uniforms[r],1===e.glValueLength?e.glMatrix===!0?e.glFunc.call(t,e.uniformLocation,e.transpose,e.value):e.glFunc.call(t,e.uniformLocation,e.value):2===e.glValueLength?e.glFunc.call(t,e.uniformLocation,e.value.x,e.value.y):3===e.glValueLength?e.glFunc.call(t,e.uniformLocation,e.value.x,e.value.y,e.value.z):4===e.glValueLength?e.glFunc.call(t,e.uniformLocation,e.value.x,e.value.y,e.value.z,e.value.w):"sampler2D"===e.type&&(e._init?(t.activeTexture(t["TEXTURE"+this.textureCount]),e.value.baseTexture._dirty[t.id]?i.instances[t.id].updateTexture(e.value.baseTexture):t.bindTexture(t.TEXTURE_2D,e.value.baseTexture._glTextures[t.id]),t.uniform1i(e.uniformLocation,this.textureCount),this.textureCount++):this.initSampler2D(e))},i.PixiShader.prototype.destroy=function(){this.gl.deleteProgram(this.program),this.uniforms=null,this.gl=null,this.attributes=null},i.PixiShader.defaultVertexSrc=["attribute vec2 aVertexPosition;","attribute vec2 aTextureCoord;","attribute vec4 aColor;","uniform vec2 projectionVector;","uniform vec2 offsetVector;","varying vec2 vTextureCoord;","varying vec4 vColor;","const vec2 center = vec2(-1.0, 1.0);","void main(void) {","   gl_Position = vec4( ((aVertexPosition + offsetVector) / projectionVector) + center , 0.0, 1.0);","   vTextureCoord = aTextureCoord;","   vColor = vec4(aColor.rgb * aColor.a, aColor.a);","}"],i.PixiFastShader=function(e){this._UID=i._UID++,this.gl=e,this.program=null,this.fragmentSrc=["precision lowp float;","varying vec2 vTextureCoord;","varying float vColor;","uniform sampler2D uSampler;","void main(void) {","   gl_FragColor = texture2D(uSampler, vTextureCoord) * vColor ;","}"],this.vertexSrc=["attribute vec2 aVertexPosition;","attribute vec2 aPositionCoord;","attribute vec2 aScale;","attribute float aRotation;","attribute vec2 aTextureCoord;","attribute float aColor;","uniform vec2 projectionVector;","uniform vec2 offsetVector;","uniform mat3 uMatrix;","varying vec2 vTextureCoord;","varying float vColor;","const vec2 center = vec2(-1.0, 1.0);","void main(void) {","   vec2 v;","   vec2 sv = aVertexPosition * aScale;","   v.x = (sv.x) * cos(aRotation) - (sv.y) * sin(aRotation);","   v.y = (sv.x) * sin(aRotation) + (sv.y) * cos(aRotation);","   v = ( uMatrix * vec3(v + aPositionCoord , 1.0) ).xy ;","   gl_Position = vec4( ( v / projectionVector) + center , 0.0, 1.0);","   vTextureCoord = aTextureCoord;","   vColor = aColor;","}"],this.textureCount=0,this.init()},i.PixiFastShader.prototype.constructor=i.PixiFastShader,i.PixiFastShader.prototype.init=function(){var e=this.gl,t=i.compileProgram(e,this.vertexSrc,this.fragmentSrc);e.useProgram(t),this.uSampler=e.getUniformLocation(t,"uSampler"),this.projectionVector=e.getUniformLocation(t,"projectionVector"),this.offsetVector=e.getUniformLocation(t,"offsetVector"),this.dimensions=e.getUniformLocation(t,"dimensions"),this.uMatrix=e.getUniformLocation(t,"uMatrix"),this.aVertexPosition=e.getAttribLocation(t,"aVertexPosition"),this.aPositionCoord=e.getAttribLocation(t,"aPositionCoord"),this.aScale=e.getAttribLocation(t,"aScale"),this.aRotation=e.getAttribLocation(t,"aRotation"),this.aTextureCoord=e.getAttribLocation(t,"aTextureCoord"),this.colorAttribute=e.getAttribLocation(t,"aColor"),-1===this.colorAttribute&&(this.colorAttribute=2),this.attributes=[this.aVertexPosition,this.aPositionCoord,this.aScale,this.aRotation,this.aTextureCoord,this.colorAttribute],this.program=t},i.PixiFastShader.prototype.destroy=function(){this.gl.deleteProgram(this.program),this.uniforms=null,this.gl=null,this.attributes=null},i.StripShader=function(e){this._UID=i._UID++,this.gl=e,this.program=null,this.fragmentSrc=["precision mediump float;","varying vec2 vTextureCoord;","uniform float alpha;","uniform sampler2D uSampler;","void main(void) {","   gl_FragColor = texture2D(uSampler, vec2(vTextureCoord.x, vTextureCoord.y)) * alpha;","}"],this.vertexSrc=["attribute vec2 aVertexPosition;","attribute vec2 aTextureCoord;","uniform mat3 translationMatrix;","uniform vec2 projectionVector;","uniform vec2 offsetVector;","varying vec2 vTextureCoord;","void main(void) {","   vec3 v = translationMatrix * vec3(aVertexPosition , 1.0);","   v -= offsetVector.xyx;","   gl_Position = vec4( v.x / projectionVector.x -1.0, v.y / -projectionVector.y + 1.0 , 0.0, 1.0);","   vTextureCoord = aTextureCoord;","}"],this.init()},i.StripShader.prototype.constructor=i.StripShader,i.StripShader.prototype.init=function(){var e=this.gl,t=i.compileProgram(e,this.vertexSrc,this.fragmentSrc);e.useProgram(t),this.uSampler=e.getUniformLocation(t,"uSampler"),this.projectionVector=e.getUniformLocation(t,"projectionVector"),this.offsetVector=e.getUniformLocation(t,"offsetVector"),this.colorAttribute=e.getAttribLocation(t,"aColor"),this.aVertexPosition=e.getAttribLocation(t,"aVertexPosition"),this.aTextureCoord=e.getAttribLocation(t,"aTextureCoord"),this.attributes=[this.aVertexPosition,this.aTextureCoord],this.translationMatrix=e.getUniformLocation(t,"translationMatrix"),this.alpha=e.getUniformLocation(t,"alpha"),this.program=t},i.StripShader.prototype.destroy=function(){this.gl.deleteProgram(this.program),this.uniforms=null,this.gl=null,this.attribute=null},i.PrimitiveShader=function(e){this._UID=i._UID++,this.gl=e,this.program=null,this.fragmentSrc=["precision mediump float;","varying vec4 vColor;","void main(void) {","   gl_FragColor = vColor;","}"],this.vertexSrc=["attribute vec2 aVertexPosition;","attribute vec4 aColor;","uniform mat3 translationMatrix;","uniform vec2 projectionVector;","uniform vec2 offsetVector;","uniform float alpha;","uniform float flipY;","uniform vec3 tint;","varying vec4 vColor;","void main(void) {","   vec3 v = translationMatrix * vec3(aVertexPosition , 1.0);","   v -= offsetVector.xyx;","   gl_Position = vec4( v.x / projectionVector.x -1.0, (v.y / projectionVector.y * -flipY) + flipY , 0.0, 1.0);","   vColor = aColor * vec4(tint * alpha, alpha);","}"],this.init()},i.PrimitiveShader.prototype.constructor=i.PrimitiveShader,i.PrimitiveShader.prototype.init=function(){var e=this.gl,t=i.compileProgram(e,this.vertexSrc,this.fragmentSrc);e.useProgram(t),this.projectionVector=e.getUniformLocation(t,"projectionVector"),this.offsetVector=e.getUniformLocation(t,"offsetVector"),this.tintColor=e.getUniformLocation(t,"tint"),this.flipY=e.getUniformLocation(t,"flipY"),this.aVertexPosition=e.getAttribLocation(t,"aVertexPosition"),this.colorAttribute=e.getAttribLocation(t,"aColor"),this.attributes=[this.aVertexPosition,this.colorAttribute],this.translationMatrix=e.getUniformLocation(t,"translationMatrix"),this.alpha=e.getUniformLocation(t,"alpha"),this.program=t},i.PrimitiveShader.prototype.destroy=function(){this.gl.deleteProgram(this.program),this.uniforms=null,this.gl=null,this.attributes=null},i.ComplexPrimitiveShader=function(e){this._UID=i._UID++,this.gl=e,this.program=null,this.fragmentSrc=["precision mediump float;","varying vec4 vColor;","void main(void) {","   gl_FragColor = vColor;","}"],this.vertexSrc=["attribute vec2 aVertexPosition;","uniform mat3 translationMatrix;","uniform vec2 projectionVector;","uniform vec2 offsetVector;","uniform vec3 tint;","uniform float alpha;","uniform vec3 color;","uniform float flipY;","varying vec4 vColor;","void main(void) {","   vec3 v = translationMatrix * vec3(aVertexPosition , 1.0);","   v -= offsetVector.xyx;","   gl_Position = vec4( v.x / projectionVector.x -1.0, (v.y / projectionVector.y * -flipY) + flipY , 0.0, 1.0);","   vColor = vec4(color * alpha * tint, alpha);","}"],this.init()},i.ComplexPrimitiveShader.prototype.constructor=i.ComplexPrimitiveShader,i.ComplexPrimitiveShader.prototype.init=function(){var e=this.gl,t=i.compileProgram(e,this.vertexSrc,this.fragmentSrc);e.useProgram(t),this.projectionVector=e.getUniformLocation(t,"projectionVector"),this.offsetVector=e.getUniformLocation(t,"offsetVector"),this.tintColor=e.getUniformLocation(t,"tint"),this.color=e.getUniformLocation(t,"color"),this.flipY=e.getUniformLocation(t,"flipY"),this.aVertexPosition=e.getAttribLocation(t,"aVertexPosition"),this.attributes=[this.aVertexPosition,this.colorAttribute],this.translationMatrix=e.getUniformLocation(t,"translationMatrix"),this.alpha=e.getUniformLocation(t,"alpha"),this.program=t},i.ComplexPrimitiveShader.prototype.destroy=function(){this.gl.deleteProgram(this.program),this.uniforms=null,this.gl=null,this.attribute=null},i.WebGLGraphics=function(){},i.WebGLGraphics.renderGraphics=function(e,t){var r,n=t.gl,o=t.projection,s=t.offset,a=t.shaderManager.primitiveShader;e.dirty&&i.WebGLGraphics.updateGraphics(e,n);for(var h=e._webGL[n.id],c=0;c<h.data.length;c++)1===h.data[c].mode?(r=h.data[c],t.stencilManager.pushStencil(e,r,t),n.drawElements(n.TRIANGLE_FAN,4,n.UNSIGNED_SHORT,2*(r.indices.length-4)),t.stencilManager.popStencil(e,r,t)):(r=h.data[c],t.shaderManager.setShader(a),a=t.shaderManager.primitiveShader,n.uniformMatrix3fv(a.translationMatrix,!1,e.worldTransform.toArray(!0)),n.uniform1f(a.flipY,1),n.uniform2f(a.projectionVector,o.x,-o.y),n.uniform2f(a.offsetVector,-s.x,-s.y),n.uniform3fv(a.tintColor,i.hex2rgb(e.tint)),n.uniform1f(a.alpha,e.worldAlpha),n.bindBuffer(n.ARRAY_BUFFER,r.buffer),n.vertexAttribPointer(a.aVertexPosition,2,n.FLOAT,!1,24,0),n.vertexAttribPointer(a.colorAttribute,4,n.FLOAT,!1,24,8),n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,r.indexBuffer),n.drawElements(n.TRIANGLE_STRIP,r.indices.length,n.UNSIGNED_SHORT,0))},i.WebGLGraphics.updateGraphics=function(e,t){var r=e._webGL[t.id];r||(r=e._webGL[t.id]={lastIndex:0,data:[],gl:t}),e.dirty=!1;var n;if(e.clearDirty){for(e.clearDirty=!1,n=0;n<r.data.length;n++){var o=r.data[n];o.reset(),i.WebGLGraphics.graphicsDataPool.push(o)}r.data=[],r.lastIndex=0}var s;for(n=r.lastIndex;n<e.graphicsData.length;n++){var a=e.graphicsData[n];if(a.type===i.Graphics.POLY){if(a.points=a.shape.points.slice(),a.shape.closed&&(a.points[0]!==a.points[a.points.length-2]||a.points[1]!==a.points[a.points.length-1])&&a.points.push(a.points[0],a.points[1]),a.fill&&a.points.length>=6)if(a.points.length<12){s=i.WebGLGraphics.switchMode(r,0);var h=i.WebGLGraphics.buildPoly(a,s);h||(s=i.WebGLGraphics.switchMode(r,1),i.WebGLGraphics.buildComplexPoly(a,s))}else s=i.WebGLGraphics.switchMode(r,1),i.WebGLGraphics.buildComplexPoly(a,s);a.lineWidth>0&&(s=i.WebGLGraphics.switchMode(r,0),i.WebGLGraphics.buildLine(a,s))}else s=i.WebGLGraphics.switchMode(r,0),a.type===i.Graphics.RECT?i.WebGLGraphics.buildRectangle(a,s):a.type===i.Graphics.CIRC||a.type===i.Graphics.ELIP?i.WebGLGraphics.buildCircle(a,s):a.type===i.Graphics.RREC&&i.WebGLGraphics.buildRoundedRectangle(a,s);r.lastIndex++}for(n=0;n<r.data.length;n++)s=r.data[n],s.dirty&&s.upload()},i.WebGLGraphics.switchMode=function(e,t){var r;return e.data.length?(r=e.data[e.data.length-1],(r.mode!==t||1===t)&&(r=i.WebGLGraphics.graphicsDataPool.pop()||new i.WebGLGraphicsData(e.gl),r.mode=t,e.data.push(r))):(r=i.WebGLGraphics.graphicsDataPool.pop()||new i.WebGLGraphicsData(e.gl),r.mode=t,e.data.push(r)),r.dirty=!0,r},i.WebGLGraphics.buildRectangle=function(e,t){var r=e.shape,n=r.x,o=r.y,s=r.width,a=r.height;if(e.fill){var h=i.hex2rgb(e.fillColor),c=e.fillAlpha,u=h[0]*c,f=h[1]*c,d=h[2]*c,l=t.points,p=t.indices,b=l.length/6;l.push(n,o),l.push(u,f,d,c),l.push(n+s,o),l.push(u,f,d,c),l.push(n,o+a),l.push(u,f,d,c),l.push(n+s,o+a),l.push(u,f,d,c),p.push(b,b,b+1,b+2,b+3,b+3)}if(e.lineWidth){var m=e.points;e.points=[n,o,n+s,o,n+s,o+a,n,o+a,n,o],i.WebGLGraphics.buildLine(e,t),e.points=m}},i.WebGLGraphics.buildRoundedRectangle=function(e,t){var r=e.shape,n=r.x,o=r.y,s=r.width,a=r.height,h=r.radius,c=[];if(c.push(n,o+h),c=c.concat(i.WebGLGraphics.quadraticBezierCurve(n,o+a-h,n,o+a,n+h,o+a)),c=c.concat(i.WebGLGraphics.quadraticBezierCurve(n+s-h,o+a,n+s,o+a,n+s,o+a-h)),c=c.concat(i.WebGLGraphics.quadraticBezierCurve(n+s,o+h,n+s,o,n+s-h,o)),c=c.concat(i.WebGLGraphics.quadraticBezierCurve(n+h,o,n,o,n,o+h)),e.fill){var u=i.hex2rgb(e.fillColor),f=e.fillAlpha,d=u[0]*f,l=u[1]*f,p=u[2]*f,b=t.points,m=t.indices,v=b.length/6,g=i.PolyK.Triangulate(c),y=0;for(y=0;y<g.length;y+=3)m.push(g[y]+v),m.push(g[y]+v),m.push(g[y+1]+v),m.push(g[y+2]+v),m.push(g[y+2]+v);for(y=0;y<c.length;y++)b.push(c[y],c[++y],d,l,p,f)}if(e.lineWidth){var w=e.points;e.points=c,i.WebGLGraphics.buildLine(e,t),e.points=w}},i.WebGLGraphics.quadraticBezierCurve=function(e,t,r,i,n,o){function s(e,t,r){var i=t-e;return e+i*r}for(var a,h,c,u,f,d,l=20,p=[],b=0,m=0;l>=m;m++)b=m/l,a=s(e,r,b),h=s(t,i,b),c=s(r,n,b),u=s(i,o,b),f=s(a,c,b),d=s(h,u,b),p.push(f,d);return p},i.WebGLGraphics.buildCircle=function(e,t){var r,n,o=e.shape,s=o.x,a=o.y;e.type===i.Graphics.CIRC?(r=o.radius,n=o.radius):(r=o.width,n=o.height);var h=40,c=2*Math.PI/h,u=0;if(e.fill){var f=i.hex2rgb(e.fillColor),d=e.fillAlpha,l=f[0]*d,p=f[1]*d,b=f[2]*d,m=t.points,v=t.indices,g=m.length/6;for(v.push(g),u=0;h+1>u;u++)m.push(s,a,l,p,b,d),m.push(s+Math.sin(c*u)*r,a+Math.cos(c*u)*n,l,p,b,d),v.push(g++,g++);v.push(g-1)}if(e.lineWidth){var y=e.points;for(e.points=[],u=0;h+1>u;u++)e.points.push(s+Math.sin(c*u)*r,a+Math.cos(c*u)*n);i.WebGLGraphics.buildLine(e,t),e.points=y}},i.WebGLGraphics.buildLine=function(e,t){var r=0,n=e.points;if(0!==n.length){if(e.lineWidth%2)for(r=0;r<n.length;r++)n[r]+=.5;var o=new i.Point(n[0],n[1]),s=new i.Point(n[n.length-2],n[n.length-1]);if(o.x===s.x&&o.y===s.y){n=n.slice(),n.pop(),n.pop(),s=new i.Point(n[n.length-2],n[n.length-1]);var a=s.x+.5*(o.x-s.x),h=s.y+.5*(o.y-s.y);n.unshift(a,h),n.push(a,h)}var c,u,f,d,l,p,b,m,v,g,y,w,_,x,S,T,A,E,C,k,R,M,B,I=t.points,j=t.indices,P=n.length/2,O=n.length,L=I.length/6,D=e.lineWidth/2,F=i.hex2rgb(e.lineColor),U=e.lineAlpha,N=F[0]*U,G=F[1]*U,q=F[2]*U;for(f=n[0],d=n[1],l=n[2],p=n[3],v=-(d-p),g=f-l,B=Math.sqrt(v*v+g*g),v/=B,g/=B,v*=D,g*=D,I.push(f-v,d-g,N,G,q,U),I.push(f+v,d+g,N,G,q,U),r=1;P-1>r;r++)f=n[2*(r-1)],d=n[2*(r-1)+1],l=n[2*r],p=n[2*r+1],b=n[2*(r+1)],m=n[2*(r+1)+1],v=-(d-p),g=f-l,B=Math.sqrt(v*v+g*g),v/=B,g/=B,v*=D,g*=D,y=-(p-m),w=l-b,B=Math.sqrt(y*y+w*w),y/=B,w/=B,y*=D,w*=D,S=-g+d-(-g+p),T=-v+l-(-v+f),A=(-v+f)*(-g+p)-(-v+l)*(-g+d),E=-w+m-(-w+p),C=-y+l-(-y+b),k=(-y+b)*(-w+p)-(-y+l)*(-w+m),R=S*C-E*T,Math.abs(R)<.1?(R+=10.1,I.push(l-v,p-g,N,G,q,U),I.push(l+v,p+g,N,G,q,U)):(c=(T*k-C*A)/R,u=(E*A-S*k)/R,M=(c-l)*(c-l)+(u-p)+(u-p),M>19600?(_=v-y,x=g-w,B=Math.sqrt(_*_+x*x),_/=B,x/=B,_*=D,x*=D,I.push(l-_,p-x),I.push(N,G,q,U),I.push(l+_,p+x),I.push(N,G,q,U),I.push(l-_,p-x),I.push(N,G,q,U),O++):(I.push(c,u),I.push(N,G,q,U),I.push(l-(c-l),p-(u-p)),I.push(N,G,q,U)));for(f=n[2*(P-2)],d=n[2*(P-2)+1],l=n[2*(P-1)],p=n[2*(P-1)+1],v=-(d-p),g=f-l,B=Math.sqrt(v*v+g*g),v/=B,g/=B,v*=D,g*=D,I.push(l-v,p-g),I.push(N,G,q,U),I.push(l+v,p+g),I.push(N,G,q,U),j.push(L),r=0;O>r;r++)j.push(L++);j.push(L-1)}},i.WebGLGraphics.buildComplexPoly=function(e,t){var r=e.points.slice();if(!(r.length<6)){var n=t.indices;t.points=r,t.alpha=e.fillAlpha,t.color=i.hex2rgb(e.fillColor);for(var o,s,a=1/0,h=-1/0,c=1/0,u=-1/0,f=0;f<r.length;f+=2)o=r[f],s=r[f+1],a=a>o?o:a,h=o>h?o:h,c=c>s?s:c,u=s>u?s:u;r.push(a,c,h,c,h,u,a,u);var d=r.length/2;for(f=0;d>f;f++)n.push(f)}},i.WebGLGraphics.buildPoly=function(e,t){var r=e.points;if(!(r.length<6)){var n=t.points,o=t.indices,s=r.length/2,a=i.hex2rgb(e.fillColor),h=e.fillAlpha,c=a[0]*h,u=a[1]*h,f=a[2]*h,d=i.PolyK.Triangulate(r);if(!d)return!1;var l=n.length/6,p=0;for(p=0;p<d.length;p+=3)o.push(d[p]+l),o.push(d[p]+l),o.push(d[p+1]+l),o.push(d[p+2]+l),o.push(d[p+2]+l);for(p=0;s>p;p++)n.push(r[2*p],r[2*p+1],c,u,f,h);return!0}},i.WebGLGraphics.graphicsDataPool=[],i.WebGLGraphicsData=function(e){this.gl=e,this.color=[0,0,0],this.points=[],this.indices=[],this.buffer=e.createBuffer(),this.indexBuffer=e.createBuffer(),this.mode=1,this.alpha=1,this.dirty=!0},i.WebGLGraphicsData.prototype.reset=function(){this.points=[],this.indices=[]},i.WebGLGraphicsData.prototype.upload=function(){var e=this.gl;this.glPoints=new i.Float32Array(this.points),e.bindBuffer(e.ARRAY_BUFFER,this.buffer),e.bufferData(e.ARRAY_BUFFER,this.glPoints,e.STATIC_DRAW),this.glIndicies=new i.Uint16Array(this.indices),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,this.indexBuffer),e.bufferData(e.ELEMENT_ARRAY_BUFFER,this.glIndicies,e.STATIC_DRAW),this.dirty=!1},i.glContexts=[],i.instances=[],i.WebGLRenderer=function(e,t,r){if(r)for(var n in i.defaultRenderOptions)"undefined"==typeof r[n]&&(r[n]=i.defaultRenderOptions[n]);else r=i.defaultRenderOptions;i.defaultRenderer||(i.sayHello("webGL"),i.defaultRenderer=this),this.type=i.WEBGL_RENDERER,this.resolution=r.resolution,this.transparent=r.transparent,this.autoResize=r.autoResize||!1,this.preserveDrawingBuffer=r.preserveDrawingBuffer,this.clearBeforeRender=r.clearBeforeRender,this.width=e||800,this.height=t||600,this.view=r.view||document.createElement("canvas"),this.contextLostBound=this.handleContextLost.bind(this),this.contextRestoredBound=this.handleContextRestored.bind(this),this.view.addEventListener("webglcontextlost",this.contextLostBound,!1),this.view.addEventListener("webglcontextrestored",this.contextRestoredBound,!1),this._contextOptions={alpha:this.transparent,antialias:r.antialias,premultipliedAlpha:this.transparent&&"notMultiplied"!==this.transparent,stencil:!0,preserveDrawingBuffer:r.preserveDrawingBuffer},this.projection=new i.Point,this.offset=new i.Point(0,0),this.shaderManager=new i.WebGLShaderManager,this.spriteBatch=new i.WebGLSpriteBatch,this.maskManager=new i.WebGLMaskManager,this.filterManager=new i.WebGLFilterManager,this.stencilManager=new i.WebGLStencilManager,this.blendModeManager=new i.WebGLBlendModeManager,this.renderSession={},this.renderSession.gl=this.gl,this.renderSession.drawCount=0,this.renderSession.shaderManager=this.shaderManager,this.renderSession.maskManager=this.maskManager,this.renderSession.filterManager=this.filterManager,this.renderSession.blendModeManager=this.blendModeManager,this.renderSession.spriteBatch=this.spriteBatch,this.renderSession.stencilManager=this.stencilManager,this.renderSession.renderer=this,this.renderSession.resolution=this.resolution,this.initContext(),this.mapBlendModes()},i.WebGLRenderer.prototype.constructor=i.WebGLRenderer,i.WebGLRenderer.prototype.initContext=function(){var e=this.view.getContext("webgl",this._contextOptions)||this.view.getContext("experimental-webgl",this._contextOptions);if(this.gl=e,!e)throw new Error("This browser does not support webGL. Try using the canvas renderer");this.glContextId=e.id=i.WebGLRenderer.glContextId++,i.glContexts[this.glContextId]=e,i.instances[this.glContextId]=this,e.disable(e.DEPTH_TEST),e.disable(e.CULL_FACE),e.enable(e.BLEND),this.shaderManager.setContext(e),this.spriteBatch.setContext(e),this.maskManager.setContext(e),this.filterManager.setContext(e),this.blendModeManager.setContext(e),this.stencilManager.setContext(e),this.renderSession.gl=this.gl,this.resize(this.width,this.height)},i.WebGLRenderer.prototype.render=function(e){if(!this.contextLost){this.__stage!==e&&(e.interactive&&e.interactionManager.removeEvents(),this.__stage=e),e.updateTransform();var t=this.gl;e._interactive?e._interactiveEventsAdded||(e._interactiveEventsAdded=!0,e.interactionManager.setTarget(this)):e._interactiveEventsAdded&&(e._interactiveEventsAdded=!1,e.interactionManager.setTarget(this)),t.viewport(0,0,this.width,this.height),t.bindFramebuffer(t.FRAMEBUFFER,null),this.clearBeforeRender&&(this.transparent?t.clearColor(0,0,0,0):t.clearColor(e.backgroundColorSplit[0],e.backgroundColorSplit[1],e.backgroundColorSplit[2],1),t.clear(t.COLOR_BUFFER_BIT)),this.renderDisplayObject(e,this.projection)}},i.WebGLRenderer.prototype.renderDisplayObject=function(e,t,r){this.renderSession.blendModeManager.setBlendMode(i.blendModes.NORMAL),this.renderSession.drawCount=0,this.renderSession.flipY=r?-1:1,this.renderSession.projection=t,this.renderSession.offset=this.offset,this.spriteBatch.begin(this.renderSession),this.filterManager.begin(this.renderSession,r),e._renderWebGL(this.renderSession),this.spriteBatch.end()},i.WebGLRenderer.prototype.resize=function(e,t){this.width=e*this.resolution,this.height=t*this.resolution,this.view.width=this.width,this.view.height=this.height,this.autoResize&&(this.view.style.width=this.width/this.resolution+"px",this.view.style.height=this.height/this.resolution+"px"),this.gl.viewport(0,0,this.width,this.height),this.projection.x=this.width/2/this.resolution,this.projection.y=-this.height/2/this.resolution},i.WebGLRenderer.prototype.updateTexture=function(e){if(e.hasLoaded){var t=this.gl;return e._glTextures[t.id]||(e._glTextures[t.id]=t.createTexture()),t.bindTexture(t.TEXTURE_2D,e._glTextures[t.id]),t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,e.premultipliedAlpha),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,e.source),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,e.scaleMode===i.scaleModes.LINEAR?t.LINEAR:t.NEAREST),e.mipmap&&i.isPowerOfTwo(e.width,e.height)?(t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,e.scaleMode===i.scaleModes.LINEAR?t.LINEAR_MIPMAP_LINEAR:t.NEAREST_MIPMAP_NEAREST),t.generateMipmap(t.TEXTURE_2D)):t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,e.scaleMode===i.scaleModes.LINEAR?t.LINEAR:t.NEAREST),e._powerOf2?(t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.REPEAT),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.REPEAT)):(t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE)),e._dirty[t.id]=!1,e._glTextures[t.id]}},i.WebGLRenderer.prototype.handleContextLost=function(e){e.preventDefault(),this.contextLost=!0},i.WebGLRenderer.prototype.handleContextRestored=function(){this.initContext();for(var e in i.TextureCache){var t=i.TextureCache[e].baseTexture;t._glTextures=[]}this.contextLost=!1},i.WebGLRenderer.prototype.destroy=function(){this.view.removeEventListener("webglcontextlost",this.contextLostBound),this.view.removeEventListener("webglcontextrestored",this.contextRestoredBound),i.glContexts[this.glContextId]=null,this.projection=null,this.offset=null,this.shaderManager.destroy(),this.spriteBatch.destroy(),this.maskManager.destroy(),this.filterManager.destroy(),this.shaderManager=null,this.spriteBatch=null,this.maskManager=null,this.filterManager=null,this.gl=null,this.renderSession=null},i.WebGLRenderer.prototype.mapBlendModes=function(){var e=this.gl;i.blendModesWebGL||(i.blendModesWebGL=[],i.blendModesWebGL[i.blendModes.NORMAL]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],i.blendModesWebGL[i.blendModes.ADD]=[e.SRC_ALPHA,e.DST_ALPHA],i.blendModesWebGL[i.blendModes.MULTIPLY]=[e.DST_COLOR,e.ONE_MINUS_SRC_ALPHA],i.blendModesWebGL[i.blendModes.SCREEN]=[e.SRC_ALPHA,e.ONE],i.blendModesWebGL[i.blendModes.OVERLAY]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],i.blendModesWebGL[i.blendModes.DARKEN]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],i.blendModesWebGL[i.blendModes.LIGHTEN]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],i.blendModesWebGL[i.blendModes.COLOR_DODGE]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],i.blendModesWebGL[i.blendModes.COLOR_BURN]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],i.blendModesWebGL[i.blendModes.HARD_LIGHT]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],i.blendModesWebGL[i.blendModes.SOFT_LIGHT]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],i.blendModesWebGL[i.blendModes.DIFFERENCE]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],i.blendModesWebGL[i.blendModes.EXCLUSION]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],i.blendModesWebGL[i.blendModes.HUE]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],i.blendModesWebGL[i.blendModes.SATURATION]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],i.blendModesWebGL[i.blendModes.COLOR]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],i.blendModesWebGL[i.blendModes.LUMINOSITY]=[e.ONE,e.ONE_MINUS_SRC_ALPHA])
},i.WebGLRenderer.glContextId=0,i.WebGLBlendModeManager=function(){this.currentBlendMode=99999},i.WebGLBlendModeManager.prototype.constructor=i.WebGLBlendModeManager,i.WebGLBlendModeManager.prototype.setContext=function(e){this.gl=e},i.WebGLBlendModeManager.prototype.setBlendMode=function(e){if(this.currentBlendMode===e)return!1;this.currentBlendMode=e;var t=i.blendModesWebGL[this.currentBlendMode];return this.gl.blendFunc(t[0],t[1]),!0},i.WebGLBlendModeManager.prototype.destroy=function(){this.gl=null},i.WebGLMaskManager=function(){},i.WebGLMaskManager.prototype.constructor=i.WebGLMaskManager,i.WebGLMaskManager.prototype.setContext=function(e){this.gl=e},i.WebGLMaskManager.prototype.pushMask=function(e,t){var r=t.gl;e.dirty&&i.WebGLGraphics.updateGraphics(e,r),e._webGL[r.id].data.length&&t.stencilManager.pushStencil(e,e._webGL[r.id].data[0],t)},i.WebGLMaskManager.prototype.popMask=function(e,t){var r=this.gl;t.stencilManager.popStencil(e,e._webGL[r.id].data[0],t)},i.WebGLMaskManager.prototype.destroy=function(){this.gl=null},i.WebGLStencilManager=function(){this.stencilStack=[],this.reverse=!0,this.count=0},i.WebGLStencilManager.prototype.setContext=function(e){this.gl=e},i.WebGLStencilManager.prototype.pushStencil=function(e,t,r){var i=this.gl;this.bindGraphics(e,t,r),0===this.stencilStack.length&&(i.enable(i.STENCIL_TEST),i.clear(i.STENCIL_BUFFER_BIT),this.reverse=!0,this.count=0),this.stencilStack.push(t);var n=this.count;i.colorMask(!1,!1,!1,!1),i.stencilFunc(i.ALWAYS,0,255),i.stencilOp(i.KEEP,i.KEEP,i.INVERT),1===t.mode?(i.drawElements(i.TRIANGLE_FAN,t.indices.length-4,i.UNSIGNED_SHORT,0),this.reverse?(i.stencilFunc(i.EQUAL,255-n,255),i.stencilOp(i.KEEP,i.KEEP,i.DECR)):(i.stencilFunc(i.EQUAL,n,255),i.stencilOp(i.KEEP,i.KEEP,i.INCR)),i.drawElements(i.TRIANGLE_FAN,4,i.UNSIGNED_SHORT,2*(t.indices.length-4)),this.reverse?i.stencilFunc(i.EQUAL,255-(n+1),255):i.stencilFunc(i.EQUAL,n+1,255),this.reverse=!this.reverse):(this.reverse?(i.stencilFunc(i.EQUAL,n,255),i.stencilOp(i.KEEP,i.KEEP,i.INCR)):(i.stencilFunc(i.EQUAL,255-n,255),i.stencilOp(i.KEEP,i.KEEP,i.DECR)),i.drawElements(i.TRIANGLE_STRIP,t.indices.length,i.UNSIGNED_SHORT,0),this.reverse?i.stencilFunc(i.EQUAL,n+1,255):i.stencilFunc(i.EQUAL,255-(n+1),255)),i.colorMask(!0,!0,!0,!0),i.stencilOp(i.KEEP,i.KEEP,i.KEEP),this.count++},i.WebGLStencilManager.prototype.bindGraphics=function(e,t,r){this._currentGraphics=e;var n,o=this.gl,s=r.projection,a=r.offset;1===t.mode?(n=r.shaderManager.complexPrimitiveShader,r.shaderManager.setShader(n),o.uniform1f(n.flipY,r.flipY),o.uniformMatrix3fv(n.translationMatrix,!1,e.worldTransform.toArray(!0)),o.uniform2f(n.projectionVector,s.x,-s.y),o.uniform2f(n.offsetVector,-a.x,-a.y),o.uniform3fv(n.tintColor,i.hex2rgb(e.tint)),o.uniform3fv(n.color,t.color),o.uniform1f(n.alpha,e.worldAlpha*t.alpha),o.bindBuffer(o.ARRAY_BUFFER,t.buffer),o.vertexAttribPointer(n.aVertexPosition,2,o.FLOAT,!1,8,0),o.bindBuffer(o.ELEMENT_ARRAY_BUFFER,t.indexBuffer)):(n=r.shaderManager.primitiveShader,r.shaderManager.setShader(n),o.uniformMatrix3fv(n.translationMatrix,!1,e.worldTransform.toArray(!0)),o.uniform1f(n.flipY,r.flipY),o.uniform2f(n.projectionVector,s.x,-s.y),o.uniform2f(n.offsetVector,-a.x,-a.y),o.uniform3fv(n.tintColor,i.hex2rgb(e.tint)),o.uniform1f(n.alpha,e.worldAlpha),o.bindBuffer(o.ARRAY_BUFFER,t.buffer),o.vertexAttribPointer(n.aVertexPosition,2,o.FLOAT,!1,24,0),o.vertexAttribPointer(n.colorAttribute,4,o.FLOAT,!1,24,8),o.bindBuffer(o.ELEMENT_ARRAY_BUFFER,t.indexBuffer))},i.WebGLStencilManager.prototype.popStencil=function(e,t,r){var i=this.gl;if(this.stencilStack.pop(),this.count--,0===this.stencilStack.length)i.disable(i.STENCIL_TEST);else{var n=this.count;this.bindGraphics(e,t,r),i.colorMask(!1,!1,!1,!1),1===t.mode?(this.reverse=!this.reverse,this.reverse?(i.stencilFunc(i.EQUAL,255-(n+1),255),i.stencilOp(i.KEEP,i.KEEP,i.INCR)):(i.stencilFunc(i.EQUAL,n+1,255),i.stencilOp(i.KEEP,i.KEEP,i.DECR)),i.drawElements(i.TRIANGLE_FAN,4,i.UNSIGNED_SHORT,2*(t.indices.length-4)),i.stencilFunc(i.ALWAYS,0,255),i.stencilOp(i.KEEP,i.KEEP,i.INVERT),i.drawElements(i.TRIANGLE_FAN,t.indices.length-4,i.UNSIGNED_SHORT,0),this.reverse?i.stencilFunc(i.EQUAL,n,255):i.stencilFunc(i.EQUAL,255-n,255)):(this.reverse?(i.stencilFunc(i.EQUAL,n+1,255),i.stencilOp(i.KEEP,i.KEEP,i.DECR)):(i.stencilFunc(i.EQUAL,255-(n+1),255),i.stencilOp(i.KEEP,i.KEEP,i.INCR)),i.drawElements(i.TRIANGLE_STRIP,t.indices.length,i.UNSIGNED_SHORT,0),this.reverse?i.stencilFunc(i.EQUAL,n,255):i.stencilFunc(i.EQUAL,255-n,255)),i.colorMask(!0,!0,!0,!0),i.stencilOp(i.KEEP,i.KEEP,i.KEEP)}},i.WebGLStencilManager.prototype.destroy=function(){this.stencilStack=null,this.gl=null},i.WebGLShaderManager=function(){this.maxAttibs=10,this.attribState=[],this.tempAttribState=[];for(var e=0;e<this.maxAttibs;e++)this.attribState[e]=!1;this.stack=[]},i.WebGLShaderManager.prototype.constructor=i.WebGLShaderManager,i.WebGLShaderManager.prototype.setContext=function(e){this.gl=e,this.primitiveShader=new i.PrimitiveShader(e),this.complexPrimitiveShader=new i.ComplexPrimitiveShader(e),this.defaultShader=new i.PixiShader(e),this.fastShader=new i.PixiFastShader(e),this.stripShader=new i.StripShader(e),this.setShader(this.defaultShader)},i.WebGLShaderManager.prototype.setAttribs=function(e){var t;for(t=0;t<this.tempAttribState.length;t++)this.tempAttribState[t]=!1;for(t=0;t<e.length;t++){var r=e[t];this.tempAttribState[r]=!0}var i=this.gl;for(t=0;t<this.attribState.length;t++)this.attribState[t]!==this.tempAttribState[t]&&(this.attribState[t]=this.tempAttribState[t],this.tempAttribState[t]?i.enableVertexAttribArray(t):i.disableVertexAttribArray(t))},i.WebGLShaderManager.prototype.setShader=function(e){return this._currentId===e._UID?!1:(this._currentId=e._UID,this.currentShader=e,this.gl.useProgram(e.program),this.setAttribs(e.attributes),!0)},i.WebGLShaderManager.prototype.destroy=function(){this.attribState=null,this.tempAttribState=null,this.primitiveShader.destroy(),this.complexPrimitiveShader.destroy(),this.defaultShader.destroy(),this.fastShader.destroy(),this.stripShader.destroy(),this.gl=null},i.WebGLSpriteBatch=function(){this.vertSize=5,this.size=2e3;var e=4*this.size*4*this.vertSize,t=6*this.size;this.vertices=new i.ArrayBuffer(e),this.positions=new i.Float32Array(this.vertices),this.colors=new i.Uint32Array(this.vertices),this.indices=new i.Uint16Array(t),this.lastIndexCount=0;for(var r=0,n=0;t>r;r+=6,n+=4)this.indices[r+0]=n+0,this.indices[r+1]=n+1,this.indices[r+2]=n+2,this.indices[r+3]=n+0,this.indices[r+4]=n+2,this.indices[r+5]=n+3;this.drawing=!1,this.currentBatchSize=0,this.currentBaseTexture=null,this.dirty=!0,this.textures=[],this.blendModes=[],this.shaders=[],this.sprites=[],this.defaultShader=new i.AbstractFilter(["precision lowp float;","varying vec2 vTextureCoord;","varying vec4 vColor;","uniform sampler2D uSampler;","void main(void) {","   gl_FragColor = texture2D(uSampler, vTextureCoord) * vColor ;","}"])},i.WebGLSpriteBatch.prototype.setContext=function(e){this.gl=e,this.vertexBuffer=e.createBuffer(),this.indexBuffer=e.createBuffer(),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,this.indexBuffer),e.bufferData(e.ELEMENT_ARRAY_BUFFER,this.indices,e.STATIC_DRAW),e.bindBuffer(e.ARRAY_BUFFER,this.vertexBuffer),e.bufferData(e.ARRAY_BUFFER,this.vertices,e.DYNAMIC_DRAW),this.currentBlendMode=99999;var t=new i.PixiShader(e);t.fragmentSrc=this.defaultShader.fragmentSrc,t.uniforms={},t.init(),this.defaultShader.shaders[e.id]=t},i.WebGLSpriteBatch.prototype.begin=function(e){this.renderSession=e,this.shader=this.renderSession.shaderManager.defaultShader,this.start()},i.WebGLSpriteBatch.prototype.end=function(){this.flush()},i.WebGLSpriteBatch.prototype.render=function(e){var t=e.texture;this.currentBatchSize>=this.size&&(this.flush(),this.currentBaseTexture=t.baseTexture);var r=t._uvs;if(r){var i,n,o,s,a=e.anchor.x,h=e.anchor.y;if(t.trim){var c=t.trim;n=c.x-a*c.width,i=n+t.crop.width,s=c.y-h*c.height,o=s+t.crop.height}else i=t.frame.width*(1-a),n=t.frame.width*-a,o=t.frame.height*(1-h),s=t.frame.height*-h;var u=4*this.currentBatchSize*this.vertSize,f=t.baseTexture.resolution,d=e.worldTransform,l=d.a/f,p=d.b/f,b=d.c/f,m=d.d/f,v=d.tx,g=d.ty,y=this.colors,w=this.positions;this.renderSession.roundPixels?(w[u]=l*n+b*s+v|0,w[u+1]=m*s+p*n+g|0,w[u+5]=l*i+b*s+v|0,w[u+6]=m*s+p*i+g|0,w[u+10]=l*i+b*o+v|0,w[u+11]=m*o+p*i+g|0,w[u+15]=l*n+b*o+v|0,w[u+16]=m*o+p*n+g|0):(w[u]=l*n+b*s+v,w[u+1]=m*s+p*n+g,w[u+5]=l*i+b*s+v,w[u+6]=m*s+p*i+g,w[u+10]=l*i+b*o+v,w[u+11]=m*o+p*i+g,w[u+15]=l*n+b*o+v,w[u+16]=m*o+p*n+g),w[u+2]=r.x0,w[u+3]=r.y0,w[u+7]=r.x1,w[u+8]=r.y1,w[u+12]=r.x2,w[u+13]=r.y2,w[u+17]=r.x3,w[u+18]=r.y3;var _=e.tint;y[u+4]=y[u+9]=y[u+14]=y[u+19]=(_>>16)+(65280&_)+((255&_)<<16)+(255*e.worldAlpha<<24),this.sprites[this.currentBatchSize++]=e}},i.WebGLSpriteBatch.prototype.renderTilingSprite=function(e){var t=e.tilingTexture;this.currentBatchSize>=this.size&&(this.flush(),this.currentBaseTexture=t.baseTexture),e._uvs||(e._uvs=new i.TextureUvs);var r=e._uvs;e.tilePosition.x%=t.baseTexture.width*e.tileScaleOffset.x,e.tilePosition.y%=t.baseTexture.height*e.tileScaleOffset.y;var n=e.tilePosition.x/(t.baseTexture.width*e.tileScaleOffset.x),o=e.tilePosition.y/(t.baseTexture.height*e.tileScaleOffset.y),s=e.width/t.baseTexture.width/(e.tileScale.x*e.tileScaleOffset.x),a=e.height/t.baseTexture.height/(e.tileScale.y*e.tileScaleOffset.y);r.x0=0-n,r.y0=0-o,r.x1=1*s-n,r.y1=0-o,r.x2=1*s-n,r.y2=1*a-o,r.x3=0-n,r.y3=1*a-o;var h=e.tint,c=(h>>16)+(65280&h)+((255&h)<<16)+(255*e.alpha<<24),u=this.positions,f=this.colors,d=e.width,l=e.height,p=e.anchor.x,b=e.anchor.y,m=d*(1-p),v=d*-p,g=l*(1-b),y=l*-b,w=4*this.currentBatchSize*this.vertSize,_=t.baseTexture.resolution,x=e.worldTransform,S=x.a/_,T=x.b/_,A=x.c/_,E=x.d/_,C=x.tx,k=x.ty;u[w++]=S*v+A*y+C,u[w++]=E*y+T*v+k,u[w++]=r.x0,u[w++]=r.y0,f[w++]=c,u[w++]=S*m+A*y+C,u[w++]=E*y+T*m+k,u[w++]=r.x1,u[w++]=r.y1,f[w++]=c,u[w++]=S*m+A*g+C,u[w++]=E*g+T*m+k,u[w++]=r.x2,u[w++]=r.y2,f[w++]=c,u[w++]=S*v+A*g+C,u[w++]=E*g+T*v+k,u[w++]=r.x3,u[w++]=r.y3,f[w++]=c,this.sprites[this.currentBatchSize++]=e},i.WebGLSpriteBatch.prototype.flush=function(){if(0!==this.currentBatchSize){var e,t=this.gl;if(this.dirty){this.dirty=!1,t.activeTexture(t.TEXTURE0),t.bindBuffer(t.ARRAY_BUFFER,this.vertexBuffer),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this.indexBuffer),e=this.defaultShader.shaders[t.id];var r=4*this.vertSize;t.vertexAttribPointer(e.aVertexPosition,2,t.FLOAT,!1,r,0),t.vertexAttribPointer(e.aTextureCoord,2,t.FLOAT,!1,r,8),t.vertexAttribPointer(e.colorAttribute,4,t.UNSIGNED_BYTE,!0,r,16)}if(this.currentBatchSize>.5*this.size)t.bufferSubData(t.ARRAY_BUFFER,0,this.vertices);else{var n=this.positions.subarray(0,4*this.currentBatchSize*this.vertSize);t.bufferSubData(t.ARRAY_BUFFER,0,n)}for(var o,s,a,h,c=0,u=0,f=null,d=this.renderSession.blendModeManager.currentBlendMode,l=null,p=!1,b=!1,m=0,v=this.currentBatchSize;v>m;m++){if(h=this.sprites[m],o=h.texture.baseTexture,s=h.blendMode,a=h.shader||this.defaultShader,p=d!==s,b=l!==a,(f!==o||p||b)&&(this.renderBatch(f,c,u),u=m,c=0,f=o,p&&(d=s,this.renderSession.blendModeManager.setBlendMode(d)),b)){l=a,e=l.shaders[t.id],e||(e=new i.PixiShader(t),e.fragmentSrc=l.fragmentSrc,e.uniforms=l.uniforms,e.init(),l.shaders[t.id]=e),this.renderSession.shaderManager.setShader(e),e.dirty&&e.syncUniforms();var g=this.renderSession.projection;t.uniform2f(e.projectionVector,g.x,g.y);var y=this.renderSession.offset;t.uniform2f(e.offsetVector,y.x,y.y)}c++}this.renderBatch(f,c,u),this.currentBatchSize=0}},i.WebGLSpriteBatch.prototype.renderBatch=function(e,t,r){if(0!==t){var i=this.gl;e._dirty[i.id]?this.renderSession.renderer.updateTexture(e):i.bindTexture(i.TEXTURE_2D,e._glTextures[i.id]),i.drawElements(i.TRIANGLES,6*t,i.UNSIGNED_SHORT,6*r*2),this.renderSession.drawCount++}},i.WebGLSpriteBatch.prototype.stop=function(){this.flush(),this.dirty=!0},i.WebGLSpriteBatch.prototype.start=function(){this.dirty=!0},i.WebGLSpriteBatch.prototype.destroy=function(){this.vertices=null,this.indices=null,this.gl.deleteBuffer(this.vertexBuffer),this.gl.deleteBuffer(this.indexBuffer),this.currentBaseTexture=null,this.gl=null},i.WebGLFastSpriteBatch=function(e){this.vertSize=10,this.maxSize=6e3,this.size=this.maxSize;var t=4*this.size*this.vertSize,r=6*this.maxSize;this.vertices=new i.Float32Array(t),this.indices=new i.Uint16Array(r),this.vertexBuffer=null,this.indexBuffer=null,this.lastIndexCount=0;for(var n=0,o=0;r>n;n+=6,o+=4)this.indices[n+0]=o+0,this.indices[n+1]=o+1,this.indices[n+2]=o+2,this.indices[n+3]=o+0,this.indices[n+4]=o+2,this.indices[n+5]=o+3;this.drawing=!1,this.currentBatchSize=0,this.currentBaseTexture=null,this.currentBlendMode=0,this.renderSession=null,this.shader=null,this.matrix=null,this.setContext(e)},i.WebGLFastSpriteBatch.prototype.constructor=i.WebGLFastSpriteBatch,i.WebGLFastSpriteBatch.prototype.setContext=function(e){this.gl=e,this.vertexBuffer=e.createBuffer(),this.indexBuffer=e.createBuffer(),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,this.indexBuffer),e.bufferData(e.ELEMENT_ARRAY_BUFFER,this.indices,e.STATIC_DRAW),e.bindBuffer(e.ARRAY_BUFFER,this.vertexBuffer),e.bufferData(e.ARRAY_BUFFER,this.vertices,e.DYNAMIC_DRAW)},i.WebGLFastSpriteBatch.prototype.begin=function(e,t){this.renderSession=t,this.shader=this.renderSession.shaderManager.fastShader,this.matrix=e.worldTransform.toArray(!0),this.start()},i.WebGLFastSpriteBatch.prototype.end=function(){this.flush()},i.WebGLFastSpriteBatch.prototype.render=function(e){var t=e.children,r=t[0];if(r.texture._uvs){this.currentBaseTexture=r.texture.baseTexture,r.blendMode!==this.renderSession.blendModeManager.currentBlendMode&&(this.flush(),this.renderSession.blendModeManager.setBlendMode(r.blendMode));for(var i=0,n=t.length;n>i;i++)this.renderSprite(t[i]);this.flush()}},i.WebGLFastSpriteBatch.prototype.renderSprite=function(e){if(e.visible&&(e.texture.baseTexture===this.currentBaseTexture||(this.flush(),this.currentBaseTexture=e.texture.baseTexture,e.texture._uvs))){var t,r,i,n,o,s,a,h,c=this.vertices;if(t=e.texture._uvs,r=e.texture.frame.width,i=e.texture.frame.height,e.texture.trim){var u=e.texture.trim;o=u.x-e.anchor.x*u.width,n=o+e.texture.crop.width,a=u.y-e.anchor.y*u.height,s=a+e.texture.crop.height}else n=e.texture.frame.width*(1-e.anchor.x),o=e.texture.frame.width*-e.anchor.x,s=e.texture.frame.height*(1-e.anchor.y),a=e.texture.frame.height*-e.anchor.y;h=4*this.currentBatchSize*this.vertSize,c[h++]=o,c[h++]=a,c[h++]=e.position.x,c[h++]=e.position.y,c[h++]=e.scale.x,c[h++]=e.scale.y,c[h++]=e.rotation,c[h++]=t.x0,c[h++]=t.y1,c[h++]=e.alpha,c[h++]=n,c[h++]=a,c[h++]=e.position.x,c[h++]=e.position.y,c[h++]=e.scale.x,c[h++]=e.scale.y,c[h++]=e.rotation,c[h++]=t.x1,c[h++]=t.y1,c[h++]=e.alpha,c[h++]=n,c[h++]=s,c[h++]=e.position.x,c[h++]=e.position.y,c[h++]=e.scale.x,c[h++]=e.scale.y,c[h++]=e.rotation,c[h++]=t.x2,c[h++]=t.y2,c[h++]=e.alpha,c[h++]=o,c[h++]=s,c[h++]=e.position.x,c[h++]=e.position.y,c[h++]=e.scale.x,c[h++]=e.scale.y,c[h++]=e.rotation,c[h++]=t.x3,c[h++]=t.y3,c[h++]=e.alpha,this.currentBatchSize++,this.currentBatchSize>=this.size&&this.flush()}},i.WebGLFastSpriteBatch.prototype.flush=function(){if(0!==this.currentBatchSize){var e=this.gl;if(this.currentBaseTexture._glTextures[e.id]||this.renderSession.renderer.updateTexture(this.currentBaseTexture,e),e.bindTexture(e.TEXTURE_2D,this.currentBaseTexture._glTextures[e.id]),this.currentBatchSize>.5*this.size)e.bufferSubData(e.ARRAY_BUFFER,0,this.vertices);else{var t=this.vertices.subarray(0,4*this.currentBatchSize*this.vertSize);e.bufferSubData(e.ARRAY_BUFFER,0,t)}e.drawElements(e.TRIANGLES,6*this.currentBatchSize,e.UNSIGNED_SHORT,0),this.currentBatchSize=0,this.renderSession.drawCount++}},i.WebGLFastSpriteBatch.prototype.stop=function(){this.flush()},i.WebGLFastSpriteBatch.prototype.start=function(){var e=this.gl;e.activeTexture(e.TEXTURE0),e.bindBuffer(e.ARRAY_BUFFER,this.vertexBuffer),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,this.indexBuffer);var t=this.renderSession.projection;e.uniform2f(this.shader.projectionVector,t.x,t.y),e.uniformMatrix3fv(this.shader.uMatrix,!1,this.matrix);var r=4*this.vertSize;e.vertexAttribPointer(this.shader.aVertexPosition,2,e.FLOAT,!1,r,0),e.vertexAttribPointer(this.shader.aPositionCoord,2,e.FLOAT,!1,r,8),e.vertexAttribPointer(this.shader.aScale,2,e.FLOAT,!1,r,16),e.vertexAttribPointer(this.shader.aRotation,1,e.FLOAT,!1,r,24),e.vertexAttribPointer(this.shader.aTextureCoord,2,e.FLOAT,!1,r,28),e.vertexAttribPointer(this.shader.colorAttribute,1,e.FLOAT,!1,r,36)},i.WebGLFilterManager=function(){this.filterStack=[],this.offsetX=0,this.offsetY=0},i.WebGLFilterManager.prototype.constructor=i.WebGLFilterManager,i.WebGLFilterManager.prototype.setContext=function(e){this.gl=e,this.texturePool=[],this.initShaderBuffers()},i.WebGLFilterManager.prototype.begin=function(e,t){this.renderSession=e,this.defaultShader=e.shaderManager.defaultShader;var r=this.renderSession.projection;this.width=2*r.x,this.height=2*-r.y,this.buffer=t},i.WebGLFilterManager.prototype.pushFilter=function(e){var t=this.gl,r=this.renderSession.projection,n=this.renderSession.offset;e._filterArea=e.target.filterArea||e.target.getBounds(),this.filterStack.push(e);var o=e.filterPasses[0];this.offsetX+=e._filterArea.x,this.offsetY+=e._filterArea.y;var s=this.texturePool.pop();s?s.resize(this.width,this.height):s=new i.FilterTexture(this.gl,this.width,this.height),t.bindTexture(t.TEXTURE_2D,s.texture);var a=e._filterArea,h=o.padding;a.x-=h,a.y-=h,a.width+=2*h,a.height+=2*h,a.x<0&&(a.x=0),a.width>this.width&&(a.width=this.width),a.y<0&&(a.y=0),a.height>this.height&&(a.height=this.height),t.bindFramebuffer(t.FRAMEBUFFER,s.frameBuffer),t.viewport(0,0,a.width,a.height),r.x=a.width/2,r.y=-a.height/2,n.x=-a.x,n.y=-a.y,t.colorMask(!0,!0,!0,!0),t.clearColor(0,0,0,0),t.clear(t.COLOR_BUFFER_BIT),e._glFilterTexture=s},i.WebGLFilterManager.prototype.popFilter=function(){var e=this.gl,t=this.filterStack.pop(),r=t._filterArea,n=t._glFilterTexture,o=this.renderSession.projection,s=this.renderSession.offset;if(t.filterPasses.length>1){e.viewport(0,0,r.width,r.height),e.bindBuffer(e.ARRAY_BUFFER,this.vertexBuffer),this.vertexArray[0]=0,this.vertexArray[1]=r.height,this.vertexArray[2]=r.width,this.vertexArray[3]=r.height,this.vertexArray[4]=0,this.vertexArray[5]=0,this.vertexArray[6]=r.width,this.vertexArray[7]=0,e.bufferSubData(e.ARRAY_BUFFER,0,this.vertexArray),e.bindBuffer(e.ARRAY_BUFFER,this.uvBuffer),this.uvArray[2]=r.width/this.width,this.uvArray[5]=r.height/this.height,this.uvArray[6]=r.width/this.width,this.uvArray[7]=r.height/this.height,e.bufferSubData(e.ARRAY_BUFFER,0,this.uvArray);var a=n,h=this.texturePool.pop();h||(h=new i.FilterTexture(this.gl,this.width,this.height)),h.resize(this.width,this.height),e.bindFramebuffer(e.FRAMEBUFFER,h.frameBuffer),e.clear(e.COLOR_BUFFER_BIT),e.disable(e.BLEND);for(var c=0;c<t.filterPasses.length-1;c++){var u=t.filterPasses[c];e.bindFramebuffer(e.FRAMEBUFFER,h.frameBuffer),e.activeTexture(e.TEXTURE0),e.bindTexture(e.TEXTURE_2D,a.texture),this.applyFilterPass(u,r,r.width,r.height);var f=a;a=h,h=f}e.enable(e.BLEND),n=a,this.texturePool.push(h)}var d=t.filterPasses[t.filterPasses.length-1];this.offsetX-=r.x,this.offsetY-=r.y;var l=this.width,p=this.height,b=0,m=0,v=this.buffer;if(0===this.filterStack.length)e.colorMask(!0,!0,!0,!0);else{var g=this.filterStack[this.filterStack.length-1];r=g._filterArea,l=r.width,p=r.height,b=r.x,m=r.y,v=g._glFilterTexture.frameBuffer}o.x=l/2,o.y=-p/2,s.x=b,s.y=m,r=t._filterArea;var y=r.x-b,w=r.y-m;e.bindBuffer(e.ARRAY_BUFFER,this.vertexBuffer),this.vertexArray[0]=y,this.vertexArray[1]=w+r.height,this.vertexArray[2]=y+r.width,this.vertexArray[3]=w+r.height,this.vertexArray[4]=y,this.vertexArray[5]=w,this.vertexArray[6]=y+r.width,this.vertexArray[7]=w,e.bufferSubData(e.ARRAY_BUFFER,0,this.vertexArray),e.bindBuffer(e.ARRAY_BUFFER,this.uvBuffer),this.uvArray[2]=r.width/this.width,this.uvArray[5]=r.height/this.height,this.uvArray[6]=r.width/this.width,this.uvArray[7]=r.height/this.height,e.bufferSubData(e.ARRAY_BUFFER,0,this.uvArray),e.viewport(0,0,l,p),e.bindFramebuffer(e.FRAMEBUFFER,v),e.activeTexture(e.TEXTURE0),e.bindTexture(e.TEXTURE_2D,n.texture),this.applyFilterPass(d,r,l,p),this.texturePool.push(n),t._glFilterTexture=null},i.WebGLFilterManager.prototype.applyFilterPass=function(e,t,r,n){var o=this.gl,s=e.shaders[o.id];s||(s=new i.PixiShader(o),s.fragmentSrc=e.fragmentSrc,s.uniforms=e.uniforms,s.init(),e.shaders[o.id]=s),this.renderSession.shaderManager.setShader(s),o.uniform2f(s.projectionVector,r/2,-n/2),o.uniform2f(s.offsetVector,0,0),e.uniforms.dimensions&&(e.uniforms.dimensions.value[0]=this.width,e.uniforms.dimensions.value[1]=this.height,e.uniforms.dimensions.value[2]=this.vertexArray[0],e.uniforms.dimensions.value[3]=this.vertexArray[5]),s.syncUniforms(),o.bindBuffer(o.ARRAY_BUFFER,this.vertexBuffer),o.vertexAttribPointer(s.aVertexPosition,2,o.FLOAT,!1,0,0),o.bindBuffer(o.ARRAY_BUFFER,this.uvBuffer),o.vertexAttribPointer(s.aTextureCoord,2,o.FLOAT,!1,0,0),o.bindBuffer(o.ARRAY_BUFFER,this.colorBuffer),o.vertexAttribPointer(s.colorAttribute,2,o.FLOAT,!1,0,0),o.bindBuffer(o.ELEMENT_ARRAY_BUFFER,this.indexBuffer),o.drawElements(o.TRIANGLES,6,o.UNSIGNED_SHORT,0),this.renderSession.drawCount++},i.WebGLFilterManager.prototype.initShaderBuffers=function(){var e=this.gl;this.vertexBuffer=e.createBuffer(),this.uvBuffer=e.createBuffer(),this.colorBuffer=e.createBuffer(),this.indexBuffer=e.createBuffer(),this.vertexArray=new i.Float32Array([0,0,1,0,0,1,1,1]),e.bindBuffer(e.ARRAY_BUFFER,this.vertexBuffer),e.bufferData(e.ARRAY_BUFFER,this.vertexArray,e.STATIC_DRAW),this.uvArray=new i.Float32Array([0,0,1,0,0,1,1,1]),e.bindBuffer(e.ARRAY_BUFFER,this.uvBuffer),e.bufferData(e.ARRAY_BUFFER,this.uvArray,e.STATIC_DRAW),this.colorArray=new i.Float32Array([1,16777215,1,16777215,1,16777215,1,16777215]),e.bindBuffer(e.ARRAY_BUFFER,this.colorBuffer),e.bufferData(e.ARRAY_BUFFER,this.colorArray,e.STATIC_DRAW),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,this.indexBuffer),e.bufferData(e.ELEMENT_ARRAY_BUFFER,new Uint16Array([0,1,2,1,3,2]),e.STATIC_DRAW)},i.WebGLFilterManager.prototype.destroy=function(){var e=this.gl;this.filterStack=null,this.offsetX=0,this.offsetY=0;for(var t=0;t<this.texturePool.length;t++)this.texturePool[t].destroy();this.texturePool=null,e.deleteBuffer(this.vertexBuffer),e.deleteBuffer(this.uvBuffer),e.deleteBuffer(this.colorBuffer),e.deleteBuffer(this.indexBuffer)},i.FilterTexture=function(e,t,r,n){this.gl=e,this.frameBuffer=e.createFramebuffer(),this.texture=e.createTexture(),n=n||i.scaleModes.DEFAULT,e.bindTexture(e.TEXTURE_2D,this.texture),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,n===i.scaleModes.LINEAR?e.LINEAR:e.NEAREST),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,n===i.scaleModes.LINEAR?e.LINEAR:e.NEAREST),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.bindFramebuffer(e.FRAMEBUFFER,this.frameBuffer),e.bindFramebuffer(e.FRAMEBUFFER,this.frameBuffer),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,this.texture,0),this.renderBuffer=e.createRenderbuffer(),e.bindRenderbuffer(e.RENDERBUFFER,this.renderBuffer),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.DEPTH_STENCIL_ATTACHMENT,e.RENDERBUFFER,this.renderBuffer),this.resize(t,r)},i.FilterTexture.prototype.constructor=i.FilterTexture,i.FilterTexture.prototype.clear=function(){var e=this.gl;e.clearColor(0,0,0,0),e.clear(e.COLOR_BUFFER_BIT)},i.FilterTexture.prototype.resize=function(e,t){if(this.width!==e||this.height!==t){this.width=e,this.height=t;var r=this.gl;r.bindTexture(r.TEXTURE_2D,this.texture),r.texImage2D(r.TEXTURE_2D,0,r.RGBA,e,t,0,r.RGBA,r.UNSIGNED_BYTE,null),r.bindRenderbuffer(r.RENDERBUFFER,this.renderBuffer),r.renderbufferStorage(r.RENDERBUFFER,r.DEPTH_STENCIL,e,t)}},i.FilterTexture.prototype.destroy=function(){var e=this.gl;e.deleteFramebuffer(this.frameBuffer),e.deleteTexture(this.texture),this.frameBuffer=null,this.texture=null},i.CanvasBuffer=function(e,t){this.width=e,this.height=t,this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d"),this.canvas.width=e,this.canvas.height=t},i.CanvasBuffer.prototype.constructor=i.CanvasBuffer,i.CanvasBuffer.prototype.clear=function(){this.context.setTransform(1,0,0,1,0,0),this.context.clearRect(0,0,this.width,this.height)},i.CanvasBuffer.prototype.resize=function(e,t){this.width=this.canvas.width=e,this.height=this.canvas.height=t},i.CanvasMaskManager=function(){},i.CanvasMaskManager.prototype.constructor=i.CanvasMaskManager,i.CanvasMaskManager.prototype.pushMask=function(e,t){var r=t.context;r.save();var n=e.alpha,o=e.worldTransform,s=t.resolution;r.setTransform(o.a*s,o.b*s,o.c*s,o.d*s,o.tx*s,o.ty*s),i.CanvasGraphics.renderGraphicsMask(e,r),r.clip(),e.worldAlpha=n},i.CanvasMaskManager.prototype.popMask=function(e){e.context.restore()},i.CanvasTinter=function(){},i.CanvasTinter.getTintedTexture=function(e,t){var r=e.texture;t=i.CanvasTinter.roundColor(t);var n="#"+("00000"+(0|t).toString(16)).substr(-6);if(r.tintCache=r.tintCache||{},r.tintCache[n])return r.tintCache[n];var o=i.CanvasTinter.canvas||document.createElement("canvas");if(i.CanvasTinter.tintMethod(r,t,o),i.CanvasTinter.convertTintToImage){var s=new Image;s.src=o.toDataURL(),r.tintCache[n]=s}else r.tintCache[n]=o,i.CanvasTinter.canvas=null;return o},i.CanvasTinter.tintWithMultiply=function(e,t,r){var i=r.getContext("2d"),n=e.crop;r.width=n.width,r.height=n.height,i.fillStyle="#"+("00000"+(0|t).toString(16)).substr(-6),i.fillRect(0,0,n.width,n.height),i.globalCompositeOperation="multiply",i.drawImage(e.baseTexture.source,n.x,n.y,n.width,n.height,0,0,n.width,n.height),i.globalCompositeOperation="destination-atop",i.drawImage(e.baseTexture.source,n.x,n.y,n.width,n.height,0,0,n.width,n.height)},i.CanvasTinter.tintWithOverlay=function(e,t,r){var i=r.getContext("2d"),n=e.crop;r.width=n.width,r.height=n.height,i.globalCompositeOperation="copy",i.fillStyle="#"+("00000"+(0|t).toString(16)).substr(-6),i.fillRect(0,0,n.width,n.height),i.globalCompositeOperation="destination-atop",i.drawImage(e.baseTexture.source,n.x,n.y,n.width,n.height,0,0,n.width,n.height)},i.CanvasTinter.tintWithPerPixel=function(e,t,r){var n=r.getContext("2d"),o=e.crop;r.width=o.width,r.height=o.height,n.globalCompositeOperation="copy",n.drawImage(e.baseTexture.source,o.x,o.y,o.width,o.height,0,0,o.width,o.height);for(var s=i.hex2rgb(t),a=s[0],h=s[1],c=s[2],u=n.getImageData(0,0,o.width,o.height),f=u.data,d=0;d<f.length;d+=4)f[d+0]*=a,f[d+1]*=h,f[d+2]*=c;n.putImageData(u,0,0)},i.CanvasTinter.roundColor=function(e){var t=i.CanvasTinter.cacheStepsPerColorChannel,r=i.hex2rgb(e);return r[0]=Math.min(255,r[0]/t*t),r[1]=Math.min(255,r[1]/t*t),r[2]=Math.min(255,r[2]/t*t),i.rgb2hex(r)},i.CanvasTinter.cacheStepsPerColorChannel=8,i.CanvasTinter.convertTintToImage=!1,i.CanvasTinter.canUseMultiply=i.canUseNewCanvasBlendModes(),i.CanvasTinter.tintMethod=i.CanvasTinter.canUseMultiply?i.CanvasTinter.tintWithMultiply:i.CanvasTinter.tintWithPerPixel,i.CanvasRenderer=function(e,t,r){if(r)for(var n in i.defaultRenderOptions)"undefined"==typeof r[n]&&(r[n]=i.defaultRenderOptions[n]);else r=i.defaultRenderOptions;i.defaultRenderer||(i.sayHello("Canvas"),i.defaultRenderer=this),this.type=i.CANVAS_RENDERER,this.resolution=r.resolution,this.clearBeforeRender=r.clearBeforeRender,this.transparent=r.transparent,this.autoResize=r.autoResize||!1,this.width=e||800,this.height=t||600,this.width*=this.resolution,this.height*=this.resolution,this.view=r.view||document.createElement("canvas"),this.context=this.view.getContext("2d",{alpha:this.transparent}),this.refresh=!0,this.view.width=this.width*this.resolution,this.view.height=this.height*this.resolution,this.count=0,this.maskManager=new i.CanvasMaskManager,this.renderSession={context:this.context,maskManager:this.maskManager,scaleMode:null,smoothProperty:null,roundPixels:!1},this.mapBlendModes(),this.resize(e,t),"imageSmoothingEnabled"in this.context?this.renderSession.smoothProperty="imageSmoothingEnabled":"webkitImageSmoothingEnabled"in this.context?this.renderSession.smoothProperty="webkitImageSmoothingEnabled":"mozImageSmoothingEnabled"in this.context?this.renderSession.smoothProperty="mozImageSmoothingEnabled":"oImageSmoothingEnabled"in this.context?this.renderSession.smoothProperty="oImageSmoothingEnabled":"msImageSmoothingEnabled"in this.context&&(this.renderSession.smoothProperty="msImageSmoothingEnabled")},i.CanvasRenderer.prototype.constructor=i.CanvasRenderer,i.CanvasRenderer.prototype.render=function(e){e.updateTransform(),this.context.setTransform(1,0,0,1,0,0),this.context.globalAlpha=1,this.renderSession.currentBlendMode=i.blendModes.NORMAL,this.context.globalCompositeOperation=i.blendModesCanvas[i.blendModes.NORMAL],navigator.isCocoonJS&&this.view.screencanvas&&(this.context.fillStyle="black",this.context.clear()),this.clearBeforeRender&&(this.transparent?this.context.clearRect(0,0,this.width,this.height):(this.context.fillStyle=e.backgroundColorString,this.context.fillRect(0,0,this.width,this.height))),this.renderDisplayObject(e),e.interactive&&(e._interactiveEventsAdded||(e._interactiveEventsAdded=!0,e.interactionManager.setTarget(this)))},i.CanvasRenderer.prototype.destroy=function(e){"undefined"==typeof e&&(e=!0),e&&this.view.parent&&this.view.parent.removeChild(this.view),this.view=null,this.context=null,this.maskManager=null,this.renderSession=null},i.CanvasRenderer.prototype.resize=function(e,t){this.width=e*this.resolution,this.height=t*this.resolution,this.view.width=this.width,this.view.height=this.height,this.autoResize&&(this.view.style.width=this.width/this.resolution+"px",this.view.style.height=this.height/this.resolution+"px")},i.CanvasRenderer.prototype.renderDisplayObject=function(e,t){this.renderSession.context=t||this.context,this.renderSession.resolution=this.resolution,e._renderCanvas(this.renderSession)},i.CanvasRenderer.prototype.mapBlendModes=function(){i.blendModesCanvas||(i.blendModesCanvas=[],i.canUseNewCanvasBlendModes()?(i.blendModesCanvas[i.blendModes.NORMAL]="source-over",i.blendModesCanvas[i.blendModes.ADD]="lighter",i.blendModesCanvas[i.blendModes.MULTIPLY]="multiply",i.blendModesCanvas[i.blendModes.SCREEN]="screen",i.blendModesCanvas[i.blendModes.OVERLAY]="overlay",i.blendModesCanvas[i.blendModes.DARKEN]="darken",i.blendModesCanvas[i.blendModes.LIGHTEN]="lighten",i.blendModesCanvas[i.blendModes.COLOR_DODGE]="color-dodge",i.blendModesCanvas[i.blendModes.COLOR_BURN]="color-burn",i.blendModesCanvas[i.blendModes.HARD_LIGHT]="hard-light",i.blendModesCanvas[i.blendModes.SOFT_LIGHT]="soft-light",i.blendModesCanvas[i.blendModes.DIFFERENCE]="difference",i.blendModesCanvas[i.blendModes.EXCLUSION]="exclusion",i.blendModesCanvas[i.blendModes.HUE]="hue",i.blendModesCanvas[i.blendModes.SATURATION]="saturation",i.blendModesCanvas[i.blendModes.COLOR]="color",i.blendModesCanvas[i.blendModes.LUMINOSITY]="luminosity"):(i.blendModesCanvas[i.blendModes.NORMAL]="source-over",i.blendModesCanvas[i.blendModes.ADD]="lighter",i.blendModesCanvas[i.blendModes.MULTIPLY]="source-over",i.blendModesCanvas[i.blendModes.SCREEN]="source-over",i.blendModesCanvas[i.blendModes.OVERLAY]="source-over",i.blendModesCanvas[i.blendModes.DARKEN]="source-over",i.blendModesCanvas[i.blendModes.LIGHTEN]="source-over",i.blendModesCanvas[i.blendModes.COLOR_DODGE]="source-over",i.blendModesCanvas[i.blendModes.COLOR_BURN]="source-over",i.blendModesCanvas[i.blendModes.HARD_LIGHT]="source-over",i.blendModesCanvas[i.blendModes.SOFT_LIGHT]="source-over",i.blendModesCanvas[i.blendModes.DIFFERENCE]="source-over",i.blendModesCanvas[i.blendModes.EXCLUSION]="source-over",i.blendModesCanvas[i.blendModes.HUE]="source-over",i.blendModesCanvas[i.blendModes.SATURATION]="source-over",i.blendModesCanvas[i.blendModes.COLOR]="source-over",i.blendModesCanvas[i.blendModes.LUMINOSITY]="source-over"))},i.CanvasGraphics=function(){},i.CanvasGraphics.renderGraphics=function(e,t){var r=e.worldAlpha;
e.dirty&&(this.updateGraphicsTint(e),e.dirty=!1);for(var n=0;n<e.graphicsData.length;n++){var o=e.graphicsData[n],s=o.shape,a=o._fillTint,h=o._lineTint;if(t.lineWidth=o.lineWidth,o.type===i.Graphics.POLY){t.beginPath();var c=s.points;t.moveTo(c[0],c[1]);for(var u=1;u<c.length/2;u++)t.lineTo(c[2*u],c[2*u+1]);s.closed&&t.lineTo(c[0],c[1]),c[0]===c[c.length-2]&&c[1]===c[c.length-1]&&t.closePath(),o.fill&&(t.globalAlpha=o.fillAlpha*r,t.fillStyle="#"+("00000"+(0|a).toString(16)).substr(-6),t.fill()),o.lineWidth&&(t.globalAlpha=o.lineAlpha*r,t.strokeStyle="#"+("00000"+(0|h).toString(16)).substr(-6),t.stroke())}else if(o.type===i.Graphics.RECT)(o.fillColor||0===o.fillColor)&&(t.globalAlpha=o.fillAlpha*r,t.fillStyle="#"+("00000"+(0|a).toString(16)).substr(-6),t.fillRect(s.x,s.y,s.width,s.height)),o.lineWidth&&(t.globalAlpha=o.lineAlpha*r,t.strokeStyle="#"+("00000"+(0|h).toString(16)).substr(-6),t.strokeRect(s.x,s.y,s.width,s.height));else if(o.type===i.Graphics.CIRC)t.beginPath(),t.arc(s.x,s.y,s.radius,0,2*Math.PI),t.closePath(),o.fill&&(t.globalAlpha=o.fillAlpha*r,t.fillStyle="#"+("00000"+(0|a).toString(16)).substr(-6),t.fill()),o.lineWidth&&(t.globalAlpha=o.lineAlpha*r,t.strokeStyle="#"+("00000"+(0|h).toString(16)).substr(-6),t.stroke());else if(o.type===i.Graphics.ELIP){var f=2*s.width,d=2*s.height,l=s.x-f/2,p=s.y-d/2;t.beginPath();var b=.5522848,m=f/2*b,v=d/2*b,g=l+f,y=p+d,w=l+f/2,_=p+d/2;t.moveTo(l,_),t.bezierCurveTo(l,_-v,w-m,p,w,p),t.bezierCurveTo(w+m,p,g,_-v,g,_),t.bezierCurveTo(g,_+v,w+m,y,w,y),t.bezierCurveTo(w-m,y,l,_+v,l,_),t.closePath(),o.fill&&(t.globalAlpha=o.fillAlpha*r,t.fillStyle="#"+("00000"+(0|a).toString(16)).substr(-6),t.fill()),o.lineWidth&&(t.globalAlpha=o.lineAlpha*r,t.strokeStyle="#"+("00000"+(0|h).toString(16)).substr(-6),t.stroke())}else if(o.type===i.Graphics.RREC){var x=s.x,S=s.y,T=s.width,A=s.height,E=s.radius,C=Math.min(T,A)/2|0;E=E>C?C:E,t.beginPath(),t.moveTo(x,S+E),t.lineTo(x,S+A-E),t.quadraticCurveTo(x,S+A,x+E,S+A),t.lineTo(x+T-E,S+A),t.quadraticCurveTo(x+T,S+A,x+T,S+A-E),t.lineTo(x+T,S+E),t.quadraticCurveTo(x+T,S,x+T-E,S),t.lineTo(x+E,S),t.quadraticCurveTo(x,S,x,S+E),t.closePath(),(o.fillColor||0===o.fillColor)&&(t.globalAlpha=o.fillAlpha*r,t.fillStyle="#"+("00000"+(0|a).toString(16)).substr(-6),t.fill()),o.lineWidth&&(t.globalAlpha=o.lineAlpha*r,t.strokeStyle="#"+("00000"+(0|h).toString(16)).substr(-6),t.stroke())}}},i.CanvasGraphics.renderGraphicsMask=function(e,t){var r=e.graphicsData.length;if(0!==r){r>1&&(r=1,window.console.log("Pixi.js warning: masks in canvas can only mask using the first path in the graphics object"));for(var n=0;1>n;n++){var o=e.graphicsData[n],s=o.shape;if(o.type===i.Graphics.POLY){t.beginPath();var a=s.points;t.moveTo(a[0],a[1]);for(var h=1;h<a.length/2;h++)t.lineTo(a[2*h],a[2*h+1]);a[0]===a[a.length-2]&&a[1]===a[a.length-1]&&t.closePath()}else if(o.type===i.Graphics.RECT)t.beginPath(),t.rect(s.x,s.y,s.width,s.height),t.closePath();else if(o.type===i.Graphics.CIRC)t.beginPath(),t.arc(s.x,s.y,s.radius,0,2*Math.PI),t.closePath();else if(o.type===i.Graphics.ELIP){var c=2*s.width,u=2*s.height,f=s.x-c/2,d=s.y-u/2;t.beginPath();var l=.5522848,p=c/2*l,b=u/2*l,m=f+c,v=d+u,g=f+c/2,y=d+u/2;t.moveTo(f,y),t.bezierCurveTo(f,y-b,g-p,d,g,d),t.bezierCurveTo(g+p,d,m,y-b,m,y),t.bezierCurveTo(m,y+b,g+p,v,g,v),t.bezierCurveTo(g-p,v,f,y+b,f,y),t.closePath()}else if(o.type===i.Graphics.RREC){var w=s.points,_=w[0],x=w[1],S=w[2],T=w[3],A=w[4],E=Math.min(S,T)/2|0;A=A>E?E:A,t.beginPath(),t.moveTo(_,x+A),t.lineTo(_,x+T-A),t.quadraticCurveTo(_,x+T,_+A,x+T),t.lineTo(_+S-A,x+T),t.quadraticCurveTo(_+S,x+T,_+S,x+T-A),t.lineTo(_+S,x+A),t.quadraticCurveTo(_+S,x,_+S-A,x),t.lineTo(_+A,x),t.quadraticCurveTo(_,x,_,x+A),t.closePath()}}}},i.CanvasGraphics.updateGraphicsTint=function(e){if(16777215!==e.tint)for(var t=(e.tint>>16&255)/255,r=(e.tint>>8&255)/255,i=(255&e.tint)/255,n=0;n<e.graphicsData.length;n++){var o=e.graphicsData[n],s=0|o.fillColor,a=0|o.lineColor;o._fillTint=((s>>16&255)/255*t*255<<16)+((s>>8&255)/255*r*255<<8)+(255&s)/255*i*255,o._lineTint=((a>>16&255)/255*t*255<<16)+((a>>8&255)/255*r*255<<8)+(255&a)/255*i*255}},i.Graphics=function(){i.DisplayObjectContainer.call(this),this.renderable=!0,this.fillAlpha=1,this.lineWidth=0,this.lineColor=0,this.graphicsData=[],this.tint=16777215,this.blendMode=i.blendModes.NORMAL,this.currentPath=null,this._webGL=[],this.isMask=!1,this.boundsPadding=0,this._localBounds=new i.Rectangle(0,0,1,1),this.dirty=!0,this.webGLDirty=!1,this.cachedSpriteDirty=!1},i.Graphics.prototype=Object.create(i.DisplayObjectContainer.prototype),i.Graphics.prototype.constructor=i.Graphics,Object.defineProperty(i.Graphics.prototype,"cacheAsBitmap",{get:function(){return this._cacheAsBitmap},set:function(e){this._cacheAsBitmap=e,this._cacheAsBitmap?this._generateCachedSprite():(this.destroyCachedSprite(),this.dirty=!0)}}),i.Graphics.prototype.lineStyle=function(e,t,r){if(this.lineWidth=e||0,this.lineColor=t||0,this.lineAlpha=arguments.length<3?1:r,this.currentPath){if(this.currentPath.shape.points.length)return this.drawShape(new i.Polygon(this.currentPath.shape.points.slice(-2))),this;this.currentPath.lineWidth=this.lineWidth,this.currentPath.lineColor=this.lineColor,this.currentPath.lineAlpha=this.lineAlpha}return this},i.Graphics.prototype.moveTo=function(e,t){return this.drawShape(new i.Polygon([e,t])),this},i.Graphics.prototype.lineTo=function(e,t){return this.currentPath.shape.points.push(e,t),this.dirty=!0,this},i.Graphics.prototype.quadraticCurveTo=function(e,t,r,i){this.currentPath?0===this.currentPath.shape.points.length&&(this.currentPath.shape.points=[0,0]):this.moveTo(0,0);var n,o,s=20,a=this.currentPath.shape.points;0===a.length&&this.moveTo(0,0);for(var h=a[a.length-2],c=a[a.length-1],u=0,f=1;s>=f;f++)u=f/s,n=h+(e-h)*u,o=c+(t-c)*u,a.push(n+(e+(r-e)*u-n)*u,o+(t+(i-t)*u-o)*u);return this.dirty=!0,this},i.Graphics.prototype.bezierCurveTo=function(e,t,r,i,n,o){this.currentPath?0===this.currentPath.shape.points.length&&(this.currentPath.shape.points=[0,0]):this.moveTo(0,0);for(var s,a,h,c,u,f=20,d=this.currentPath.shape.points,l=d[d.length-2],p=d[d.length-1],b=0,m=1;f>=m;m++)b=m/f,s=1-b,a=s*s,h=a*s,c=b*b,u=c*b,d.push(h*l+3*a*b*e+3*s*c*r+u*n,h*p+3*a*b*t+3*s*c*i+u*o);return this.dirty=!0,this},i.Graphics.prototype.arcTo=function(e,t,r,i,n){this.currentPath?0===this.currentPath.shape.points.length&&this.currentPath.shape.points.push(e,t):this.moveTo(e,t);var o=this.currentPath.shape.points,s=o[o.length-2],a=o[o.length-1],h=a-t,c=s-e,u=i-t,f=r-e,d=Math.abs(h*f-c*u);if(1e-8>d||0===n)(o[o.length-2]!==e||o[o.length-1]!==t)&&o.push(e,t);else{var l=h*h+c*c,p=u*u+f*f,b=h*u+c*f,m=n*Math.sqrt(l)/d,v=n*Math.sqrt(p)/d,g=m*b/l,y=v*b/p,w=m*f+v*c,_=m*u+v*h,x=c*(v+g),S=h*(v+g),T=f*(m+y),A=u*(m+y),E=Math.atan2(S-_,x-w),C=Math.atan2(A-_,T-w);this.arc(w+e,_+t,n,E,C,c*u>f*h)}return this.dirty=!0,this},i.Graphics.prototype.arc=function(e,t,r,i,n,o){var s,a=e+Math.cos(i)*r,h=t+Math.sin(i)*r;if(this.currentPath?(s=this.currentPath.shape.points,0===s.length?s.push(a,h):(s[s.length-2]!==a||s[s.length-1]!==h)&&s.push(a,h)):(this.moveTo(a,h),s=this.currentPath.shape.points),i===n)return this;!o&&i>=n?n+=2*Math.PI:o&&n>=i&&(i+=2*Math.PI);var c=o?-1*(i-n):n-i,u=Math.abs(c)/(2*Math.PI)*40;if(0===c)return this;for(var f=c/(2*u),d=2*f,l=Math.cos(f),p=Math.sin(f),b=u-1,m=b%1/b,v=0;b>=v;v++){var g=v+m*v,y=f+i+d*g,w=Math.cos(y),_=-Math.sin(y);s.push((l*w+p*_)*r+e,(l*-_+p*w)*r+t)}return this.dirty=!0,this},i.Graphics.prototype.beginFill=function(e,t){return this.filling=!0,this.fillColor=e||0,this.fillAlpha=void 0===t?1:t,this.currentPath&&this.currentPath.shape.points.length<=2&&(this.currentPath.fill=this.filling,this.currentPath.fillColor=this.fillColor,this.currentPath.fillAlpha=this.fillAlpha),this},i.Graphics.prototype.endFill=function(){return this.filling=!1,this.fillColor=null,this.fillAlpha=1,this},i.Graphics.prototype.drawRect=function(e,t,r,n){return this.drawShape(new i.Rectangle(e,t,r,n)),this},i.Graphics.prototype.drawRoundedRect=function(e,t,r,n,o){return this.drawShape(new i.RoundedRectangle(e,t,r,n,o)),this},i.Graphics.prototype.drawCircle=function(e,t,r){return this.drawShape(new i.Circle(e,t,r)),this},i.Graphics.prototype.drawEllipse=function(e,t,r,n){return this.drawShape(new i.Ellipse(e,t,r,n)),this},i.Graphics.prototype.drawPolygon=function(e){return e instanceof Array||(e=Array.prototype.slice.call(arguments)),this.drawShape(new i.Polygon(e)),this},i.Graphics.prototype.clear=function(){return this.lineWidth=0,this.filling=!1,this.dirty=!0,this.clearDirty=!0,this.graphicsData=[],this},i.Graphics.prototype.generateTexture=function(e,t){e=e||1;var r=this.getBounds(),n=new i.CanvasBuffer(r.width*e,r.height*e),o=i.Texture.fromCanvas(n.canvas,t);return o.baseTexture.resolution=e,n.context.scale(e,e),n.context.translate(-r.x,-r.y),i.CanvasGraphics.renderGraphics(this,n.context),o},i.Graphics.prototype._renderWebGL=function(e){if(this.visible!==!1&&0!==this.alpha&&this.isMask!==!0){if(this._cacheAsBitmap)return(this.dirty||this.cachedSpriteDirty)&&(this._generateCachedSprite(),this.updateCachedSpriteTexture(),this.cachedSpriteDirty=!1,this.dirty=!1),this._cachedSprite.worldAlpha=this.worldAlpha,void i.Sprite.prototype._renderWebGL.call(this._cachedSprite,e);if(e.spriteBatch.stop(),e.blendModeManager.setBlendMode(this.blendMode),this._mask&&e.maskManager.pushMask(this._mask,e),this._filters&&e.filterManager.pushFilter(this._filterBlock),this.blendMode!==e.spriteBatch.currentBlendMode){e.spriteBatch.currentBlendMode=this.blendMode;var t=i.blendModesWebGL[e.spriteBatch.currentBlendMode];e.spriteBatch.gl.blendFunc(t[0],t[1])}if(this.webGLDirty&&(this.dirty=!0,this.webGLDirty=!1),i.WebGLGraphics.renderGraphics(this,e),this.children.length){e.spriteBatch.start();for(var r=0,n=this.children.length;n>r;r++)this.children[r]._renderWebGL(e);e.spriteBatch.stop()}this._filters&&e.filterManager.popFilter(),this._mask&&e.maskManager.popMask(this.mask,e),e.drawCount++,e.spriteBatch.start()}},i.Graphics.prototype._renderCanvas=function(e){if(this.visible!==!1&&0!==this.alpha&&this.isMask!==!0){if(this._cacheAsBitmap)return(this.dirty||this.cachedSpriteDirty)&&(this._generateCachedSprite(),this.updateCachedSpriteTexture(),this.cachedSpriteDirty=!1,this.dirty=!1),this._cachedSprite.alpha=this.alpha,void i.Sprite.prototype._renderCanvas.call(this._cachedSprite,e);var t=e.context,r=this.worldTransform;this.blendMode!==e.currentBlendMode&&(e.currentBlendMode=this.blendMode,t.globalCompositeOperation=i.blendModesCanvas[e.currentBlendMode]),this._mask&&e.maskManager.pushMask(this._mask,e);var n=e.resolution;t.setTransform(r.a*n,r.b*n,r.c*n,r.d*n,r.tx*n,r.ty*n),i.CanvasGraphics.renderGraphics(this,t);for(var o=0,s=this.children.length;s>o;o++)this.children[o]._renderCanvas(e);this._mask&&e.maskManager.popMask(e)}},i.Graphics.prototype.getBounds=function(e){if(this.isMask)return i.EmptyRectangle;this.dirty&&(this.updateLocalBounds(),this.webGLDirty=!0,this.cachedSpriteDirty=!0,this.dirty=!1);var t=this._localBounds,r=t.x,n=t.width+t.x,o=t.y,s=t.height+t.y,a=e||this.worldTransform,h=a.a,c=a.b,u=a.c,f=a.d,d=a.tx,l=a.ty,p=h*n+u*s+d,b=f*s+c*n+l,m=h*r+u*s+d,v=f*s+c*r+l,g=h*r+u*o+d,y=f*o+c*r+l,w=h*n+u*o+d,_=f*o+c*n+l,x=p,S=b,T=p,A=b;return T=T>m?m:T,T=T>g?g:T,T=T>w?w:T,A=A>v?v:A,A=A>y?y:A,A=A>_?_:A,x=m>x?m:x,x=g>x?g:x,x=w>x?w:x,S=v>S?v:S,S=y>S?y:S,S=_>S?_:S,this._bounds.x=T,this._bounds.width=x-T,this._bounds.y=A,this._bounds.height=S-A,this._bounds},i.Graphics.prototype.updateLocalBounds=function(){var e=1/0,t=-1/0,r=1/0,n=-1/0;if(this.graphicsData.length)for(var o,s,a,h,c,u,f=0;f<this.graphicsData.length;f++){var d=this.graphicsData[f],l=d.type,p=d.lineWidth;if(o=d.shape,l===i.Graphics.RECT||l===i.Graphics.RREC)a=o.x-p/2,h=o.y-p/2,c=o.width+p,u=o.height+p,e=e>a?a:e,t=a+c>t?a+c:t,r=r>h?h:r,n=h+u>n?h+u:n;else if(l===i.Graphics.CIRC)a=o.x,h=o.y,c=o.radius+p/2,u=o.radius+p/2,e=e>a-c?a-c:e,t=a+c>t?a+c:t,r=r>h-u?h-u:r,n=h+u>n?h+u:n;else if(l===i.Graphics.ELIP)a=o.x,h=o.y,c=o.width+p/2,u=o.height+p/2,e=e>a-c?a-c:e,t=a+c>t?a+c:t,r=r>h-u?h-u:r,n=h+u>n?h+u:n;else{s=o.points;for(var b=0;b<s.length;b+=2)a=s[b],h=s[b+1],e=e>a-p?a-p:e,t=a+p>t?a+p:t,r=r>h-p?h-p:r,n=h+p>n?h+p:n}}else e=0,t=0,r=0,n=0;var m=this.boundsPadding;this._localBounds.x=e-m,this._localBounds.width=t-e+2*m,this._localBounds.y=r-m,this._localBounds.height=n-r+2*m},i.Graphics.prototype._generateCachedSprite=function(){var e=this.getLocalBounds();if(this._cachedSprite)this._cachedSprite.buffer.resize(e.width,e.height);else{var t=new i.CanvasBuffer(e.width,e.height),r=i.Texture.fromCanvas(t.canvas);this._cachedSprite=new i.Sprite(r),this._cachedSprite.buffer=t,this._cachedSprite.worldTransform=this.worldTransform}this._cachedSprite.anchor.x=-(e.x/e.width),this._cachedSprite.anchor.y=-(e.y/e.height),this._cachedSprite.buffer.context.translate(-e.x,-e.y),this.worldAlpha=1,i.CanvasGraphics.renderGraphics(this,this._cachedSprite.buffer.context),this._cachedSprite.alpha=this.alpha},i.Graphics.prototype.updateCachedSpriteTexture=function(){var e=this._cachedSprite,t=e.texture,r=e.buffer.canvas;t.baseTexture.width=r.width,t.baseTexture.height=r.height,t.crop.width=t.frame.width=r.width,t.crop.height=t.frame.height=r.height,e._width=r.width,e._height=r.height,t.baseTexture.dirty()},i.Graphics.prototype.destroyCachedSprite=function(){this._cachedSprite.texture.destroy(!0),this._cachedSprite=null},i.Graphics.prototype.drawShape=function(e){this.currentPath&&this.currentPath.shape.points.length<=2&&this.graphicsData.pop(),this.currentPath=null;var t=new i.GraphicsData(this.lineWidth,this.lineColor,this.lineAlpha,this.fillColor,this.fillAlpha,this.filling,e);return this.graphicsData.push(t),t.type===i.Graphics.POLY&&(t.shape.closed=this.filling,this.currentPath=t),this.dirty=!0,t},i.GraphicsData=function(e,t,r,i,n,o,s){this.lineWidth=e,this.lineColor=t,this.lineAlpha=r,this._lineTint=t,this.fillColor=i,this.fillAlpha=n,this._fillTint=i,this.fill=o,this.shape=s,this.type=s.type},i.Graphics.POLY=0,i.Graphics.RECT=1,i.Graphics.CIRC=2,i.Graphics.ELIP=3,i.Graphics.RREC=4,i.Polygon.prototype.type=i.Graphics.POLY,i.Rectangle.prototype.type=i.Graphics.RECT,i.Circle.prototype.type=i.Graphics.CIRC,i.Ellipse.prototype.type=i.Graphics.ELIP,i.RoundedRectangle.prototype.type=i.Graphics.RREC,i.Strip=function(e){i.DisplayObjectContainer.call(this),this.texture=e,this.uvs=new i.Float32Array([0,1,1,1,1,0,0,1]),this.vertices=new i.Float32Array([0,0,100,0,100,100,0,100]),this.colors=new i.Float32Array([1,1,1,1]),this.indices=new i.Uint16Array([0,1,2,3]),this.dirty=!0,this.blendMode=i.blendModes.NORMAL,this.canvasPadding=0,this.drawMode=i.Strip.DrawModes.TRIANGLE_STRIP},i.Strip.prototype=Object.create(i.DisplayObjectContainer.prototype),i.Strip.prototype.constructor=i.Strip,i.Strip.prototype._renderWebGL=function(e){!this.visible||this.alpha<=0||(e.spriteBatch.stop(),this._vertexBuffer||this._initWebGL(e),e.shaderManager.setShader(e.shaderManager.stripShader),this._renderStrip(e),e.spriteBatch.start())},i.Strip.prototype._initWebGL=function(e){var t=e.gl;this._vertexBuffer=t.createBuffer(),this._indexBuffer=t.createBuffer(),this._uvBuffer=t.createBuffer(),this._colorBuffer=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,this._vertexBuffer),t.bufferData(t.ARRAY_BUFFER,this.vertices,t.DYNAMIC_DRAW),t.bindBuffer(t.ARRAY_BUFFER,this._uvBuffer),t.bufferData(t.ARRAY_BUFFER,this.uvs,t.STATIC_DRAW),t.bindBuffer(t.ARRAY_BUFFER,this._colorBuffer),t.bufferData(t.ARRAY_BUFFER,this.colors,t.STATIC_DRAW),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this._indexBuffer),t.bufferData(t.ELEMENT_ARRAY_BUFFER,this.indices,t.STATIC_DRAW)},i.Strip.prototype._renderStrip=function(e){var t=e.gl,r=e.projection,n=e.offset,o=e.shaderManager.stripShader,s=this.drawMode===i.Strip.DrawModes.TRIANGLE_STRIP?t.TRIANGLE_STRIP:t.TRIANGLES;e.blendModeManager.setBlendMode(this.blendMode),t.uniformMatrix3fv(o.translationMatrix,!1,this.worldTransform.toArray(!0)),t.uniform2f(o.projectionVector,r.x,-r.y),t.uniform2f(o.offsetVector,-n.x,-n.y),t.uniform1f(o.alpha,this.worldAlpha),this.dirty?(this.dirty=!1,t.bindBuffer(t.ARRAY_BUFFER,this._vertexBuffer),t.bufferData(t.ARRAY_BUFFER,this.vertices,t.STATIC_DRAW),t.vertexAttribPointer(o.aVertexPosition,2,t.FLOAT,!1,0,0),t.bindBuffer(t.ARRAY_BUFFER,this._uvBuffer),t.bufferData(t.ARRAY_BUFFER,this.uvs,t.STATIC_DRAW),t.vertexAttribPointer(o.aTextureCoord,2,t.FLOAT,!1,0,0),t.activeTexture(t.TEXTURE0),this.texture.baseTexture._dirty[t.id]?e.renderer.updateTexture(this.texture.baseTexture):t.bindTexture(t.TEXTURE_2D,this.texture.baseTexture._glTextures[t.id]),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this._indexBuffer),t.bufferData(t.ELEMENT_ARRAY_BUFFER,this.indices,t.STATIC_DRAW)):(t.bindBuffer(t.ARRAY_BUFFER,this._vertexBuffer),t.bufferSubData(t.ARRAY_BUFFER,0,this.vertices),t.vertexAttribPointer(o.aVertexPosition,2,t.FLOAT,!1,0,0),t.bindBuffer(t.ARRAY_BUFFER,this._uvBuffer),t.vertexAttribPointer(o.aTextureCoord,2,t.FLOAT,!1,0,0),t.activeTexture(t.TEXTURE0),this.texture.baseTexture._dirty[t.id]?e.renderer.updateTexture(this.texture.baseTexture):t.bindTexture(t.TEXTURE_2D,this.texture.baseTexture._glTextures[t.id]),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this._indexBuffer)),t.drawElements(s,this.indices.length,t.UNSIGNED_SHORT,0)},i.Strip.prototype._renderCanvas=function(e){var t=e.context,r=this.worldTransform;e.roundPixels?t.setTransform(r.a,r.b,r.c,r.d,0|r.tx,0|r.ty):t.setTransform(r.a,r.b,r.c,r.d,r.tx,r.ty),this.drawMode===i.Strip.DrawModes.TRIANGLE_STRIP?this._renderCanvasTriangleStrip(t):this._renderCanvasTriangles(t)},i.Strip.prototype._renderCanvasTriangleStrip=function(e){var t=this.vertices,r=this.uvs,i=t.length/2;this.count++;for(var n=0;i-2>n;n++){var o=2*n;this._renderCanvasDrawTriangle(e,t,r,o,o+2,o+4)}},i.Strip.prototype._renderCanvasTriangles=function(e){var t=this.vertices,r=this.uvs,i=this.indices,n=i.length;this.count++;for(var o=0;n>o;o+=3){var s=2*i[o],a=2*i[o+1],h=2*i[o+2];this._renderCanvasDrawTriangle(e,t,r,s,a,h)}},i.Strip.prototype._renderCanvasDrawTriangle=function(e,t,r,i,n,o){var s=this.texture.baseTexture.source,a=this.texture.width,h=this.texture.height,c=t[i],u=t[n],f=t[o],d=t[i+1],l=t[n+1],p=t[o+1],b=r[i]*a,m=r[n]*a,v=r[o]*a,g=r[i+1]*h,y=r[n+1]*h,w=r[o+1]*h;if(this.canvasPadding>0){var _=this.canvasPadding/this.worldTransform.a,x=this.canvasPadding/this.worldTransform.d,S=(c+u+f)/3,T=(d+l+p)/3,A=c-S,E=d-T,C=Math.sqrt(A*A+E*E);c=S+A/C*(C+_),d=T+E/C*(C+x),A=u-S,E=l-T,C=Math.sqrt(A*A+E*E),u=S+A/C*(C+_),l=T+E/C*(C+x),A=f-S,E=p-T,C=Math.sqrt(A*A+E*E),f=S+A/C*(C+_),p=T+E/C*(C+x)}e.save(),e.beginPath(),e.moveTo(c,d),e.lineTo(u,l),e.lineTo(f,p),e.closePath(),e.clip();var k=b*y+g*v+m*w-y*v-g*m-b*w,R=c*y+g*f+u*w-y*f-g*u-c*w,M=b*u+c*v+m*f-u*v-c*m-b*f,B=b*y*f+g*u*v+c*m*w-c*y*v-g*m*f-b*u*w,I=d*y+g*p+l*w-y*p-g*l-d*w,j=b*l+d*v+m*p-l*v-d*m-b*p,P=b*y*p+g*l*v+d*m*w-d*y*v-g*m*p-b*l*w;e.transform(R/k,I/k,M/k,j/k,B/k,P/k),e.drawImage(s,0,0),e.restore()},i.Strip.prototype.renderStripFlat=function(e){var t=this.context,r=e.vertices,i=r.length/2;this.count++,t.beginPath();for(var n=1;i-2>n;n++){var o=2*n,s=r[o],a=r[o+2],h=r[o+4],c=r[o+1],u=r[o+3],f=r[o+5];t.moveTo(s,c),t.lineTo(a,u),t.lineTo(h,f)}t.fillStyle="#FF0000",t.fill(),t.closePath()},i.Strip.prototype.onTextureUpdate=function(){this.updateFrame=!0},i.Strip.prototype.getBounds=function(e){for(var t=e||this.worldTransform,r=t.a,n=t.b,o=t.c,s=t.d,a=t.tx,h=t.ty,c=-1/0,u=-1/0,f=1/0,d=1/0,l=this.vertices,p=0,b=l.length;b>p;p+=2){var m=l[p],v=l[p+1],g=r*m+o*v+a,y=s*v+n*m+h;f=f>g?g:f,d=d>y?y:d,c=g>c?g:c,u=y>u?y:u}if(f===-1/0||1/0===u)return i.EmptyRectangle;var w=this._bounds;return w.x=f,w.width=c-f,w.y=d,w.height=u-d,this._currentBounds=w,w},i.Strip.DrawModes={TRIANGLE_STRIP:0,TRIANGLES:1},i.Rope=function(e,t){i.Strip.call(this,e),this.points=t,this.vertices=new i.Float32Array(4*t.length),this.uvs=new i.Float32Array(4*t.length),this.colors=new i.Float32Array(2*t.length),this.indices=new i.Uint16Array(2*t.length),this.refresh()},i.Rope.prototype=Object.create(i.Strip.prototype),i.Rope.prototype.constructor=i.Rope,i.Rope.prototype.refresh=function(){var e=this.points;if(!(e.length<1)){var t=this.uvs,r=e[0],i=this.indices,n=this.colors;this.count-=.2,t[0]=0,t[1]=0,t[2]=0,t[3]=1,n[0]=1,n[1]=1,i[0]=0,i[1]=1;for(var o,s,a,h=e.length,c=1;h>c;c++)o=e[c],s=4*c,a=c/(h-1),c%2?(t[s]=a,t[s+1]=0,t[s+2]=a,t[s+3]=1):(t[s]=a,t[s+1]=0,t[s+2]=a,t[s+3]=1),s=2*c,n[s]=1,n[s+1]=1,s=2*c,i[s]=s,i[s+1]=s+1,r=o}},i.Rope.prototype.updateTransform=function(){var e=this.points;if(!(e.length<1)){var t,r=e[0],n={x:0,y:0};this.count-=.2;for(var o,s,a,h,c,u=this.vertices,f=e.length,d=0;f>d;d++)o=e[d],s=4*d,t=d<e.length-1?e[d+1]:o,n.y=-(t.x-r.x),n.x=t.y-r.y,a=10*(1-d/(f-1)),a>1&&(a=1),h=Math.sqrt(n.x*n.x+n.y*n.y),c=this.texture.height/2,n.x/=h,n.y/=h,n.x*=c,n.y*=c,u[s]=o.x+n.x,u[s+1]=o.y+n.y,u[s+2]=o.x-n.x,u[s+3]=o.y-n.y,r=o;i.DisplayObjectContainer.prototype.updateTransform.call(this)}},i.Rope.prototype.setTexture=function(e){this.texture=e},i.TilingSprite=function(e,t,r){i.Sprite.call(this,e),this._width=t||100,this._height=r||100,this.tileScale=new i.Point(1,1),this.tileScaleOffset=new i.Point(1,1),this.tilePosition=new i.Point(0,0),this.renderable=!0,this.tint=16777215,this.blendMode=i.blendModes.NORMAL},i.TilingSprite.prototype=Object.create(i.Sprite.prototype),i.TilingSprite.prototype.constructor=i.TilingSprite,Object.defineProperty(i.TilingSprite.prototype,"width",{get:function(){return this._width},set:function(e){this._width=e}}),Object.defineProperty(i.TilingSprite.prototype,"height",{get:function(){return this._height},set:function(e){this._height=e}}),i.TilingSprite.prototype.setTexture=function(e){this.texture!==e&&(this.texture=e,this.refreshTexture=!0,this.cachedTint=16777215)},i.TilingSprite.prototype._renderWebGL=function(e){if(this.visible!==!1&&0!==this.alpha){var t,r;for(this._mask&&(e.spriteBatch.stop(),e.maskManager.pushMask(this.mask,e),e.spriteBatch.start()),this._filters&&(e.spriteBatch.flush(),e.filterManager.pushFilter(this._filterBlock)),!this.tilingTexture||this.refreshTexture?(this.generateTilingTexture(!0),this.tilingTexture&&this.tilingTexture.needsUpdate&&(i.updateWebGLTexture(this.tilingTexture.baseTexture,e.gl),this.tilingTexture.needsUpdate=!1)):e.spriteBatch.renderTilingSprite(this),t=0,r=this.children.length;r>t;t++)this.children[t]._renderWebGL(e);e.spriteBatch.stop(),this._filters&&e.filterManager.popFilter(),this._mask&&e.maskManager.popMask(this._mask,e),e.spriteBatch.start()}},i.TilingSprite.prototype._renderCanvas=function(e){if(this.visible!==!1&&0!==this.alpha){var t=e.context;this._mask&&e.maskManager.pushMask(this._mask,t),t.globalAlpha=this.worldAlpha;var r,n,o=this.worldTransform,s=e.resolution;if(t.setTransform(o.a*s,o.b*s,o.c*s,o.d*s,o.tx*s,o.ty*s),!this.__tilePattern||this.refreshTexture){if(this.generateTilingTexture(!1),!this.tilingTexture)return;this.__tilePattern=t.createPattern(this.tilingTexture.baseTexture.source,"repeat")}this.blendMode!==e.currentBlendMode&&(e.currentBlendMode=this.blendMode,t.globalCompositeOperation=i.blendModesCanvas[e.currentBlendMode]);var a=this.tilePosition,h=this.tileScale;for(a.x%=this.tilingTexture.baseTexture.width,a.y%=this.tilingTexture.baseTexture.height,t.scale(h.x,h.y),t.translate(a.x+this.anchor.x*-this._width,a.y+this.anchor.y*-this._height),t.fillStyle=this.__tilePattern,t.fillRect(-a.x,-a.y,this._width/h.x,this._height/h.y),t.scale(1/h.x,1/h.y),t.translate(-a.x+this.anchor.x*this._width,-a.y+this.anchor.y*this._height),this._mask&&e.maskManager.popMask(e.context),r=0,n=this.children.length;n>r;r++)this.children[r]._renderCanvas(e)}},i.TilingSprite.prototype.getBounds=function(){var e=this._width,t=this._height,r=e*(1-this.anchor.x),i=e*-this.anchor.x,n=t*(1-this.anchor.y),o=t*-this.anchor.y,s=this.worldTransform,a=s.a,h=s.b,c=s.c,u=s.d,f=s.tx,d=s.ty,l=a*i+c*o+f,p=u*o+h*i+d,b=a*r+c*o+f,m=u*o+h*r+d,v=a*r+c*n+f,g=u*n+h*r+d,y=a*i+c*n+f,w=u*n+h*i+d,_=-1/0,x=-1/0,S=1/0,T=1/0;S=S>l?l:S,S=S>b?b:S,S=S>v?v:S,S=S>y?y:S,T=T>p?p:T,T=T>m?m:T,T=T>g?g:T,T=T>w?w:T,_=l>_?l:_,_=b>_?b:_,_=v>_?v:_,_=y>_?y:_,x=p>x?p:x,x=m>x?m:x,x=g>x?g:x,x=w>x?w:x;var A=this._bounds;return A.x=S,A.width=_-S,A.y=T,A.height=x-T,this._currentBounds=A,A},i.TilingSprite.prototype.onTextureUpdate=function(){},i.TilingSprite.prototype.generateTilingTexture=function(e){if(this.texture.baseTexture.hasLoaded){var t,r,n=this.originalTexture||this.texture,o=n.frame,s=o.width!==n.baseTexture.width||o.height!==n.baseTexture.height,a=!1;if(e?(t=i.getNextPowerOfTwo(o.width),r=i.getNextPowerOfTwo(o.height),(o.width!==t||o.height!==r||n.baseTexture.width!==t||n.baseTexture.height||r)&&(a=!0)):s&&(t=o.width,r=o.height,a=!0),a){var h;this.tilingTexture&&this.tilingTexture.isTiling?(h=this.tilingTexture.canvasBuffer,h.resize(t,r),this.tilingTexture.baseTexture.width=t,this.tilingTexture.baseTexture.height=r,this.tilingTexture.needsUpdate=!0):(h=new i.CanvasBuffer(t,r),this.tilingTexture=i.Texture.fromCanvas(h.canvas),this.tilingTexture.canvasBuffer=h,this.tilingTexture.isTiling=!0),h.context.drawImage(n.baseTexture.source,n.crop.x,n.crop.y,n.crop.width,n.crop.height,0,0,t,r),this.tileScaleOffset.x=o.width/t,this.tileScaleOffset.y=o.height/r}else this.tilingTexture&&this.tilingTexture.isTiling&&this.tilingTexture.destroy(!0),this.tileScaleOffset.x=1,this.tileScaleOffset.y=1,this.tilingTexture=n;this.refreshTexture=!1,this.originalTexture=this.texture,this.texture=this.tilingTexture,this.tilingTexture.baseTexture._powerOf2=!0}};var n={radDeg:180/Math.PI,degRad:Math.PI/180,temp:[],Float32Array:"undefined"==typeof Float32Array?Array:Float32Array,Uint16Array:"undefined"==typeof Uint16Array?Array:Uint16Array};n.BoneData=function(e,t){this.name=e,this.parent=t},n.BoneData.prototype={length:0,x:0,y:0,rotation:0,scaleX:1,scaleY:1,inheritScale:!0,inheritRotation:!0,flipX:!1,flipY:!1},n.SlotData=function(e,t){this.name=e,this.boneData=t},n.SlotData.prototype={r:1,g:1,b:1,a:1,attachmentName:null,additiveBlending:!1},n.IkConstraintData=function(e){this.name=e,this.bones=[]},n.IkConstraintData.prototype={target:null,bendDirection:1,mix:1},n.Bone=function(e,t,r){this.data=e,this.skeleton=t,this.parent=r,this.setToSetupPose()},n.Bone.yDown=!1,n.Bone.prototype={x:0,y:0,rotation:0,rotationIK:0,scaleX:1,scaleY:1,flipX:!1,flipY:!1,m00:0,m01:0,worldX:0,m10:0,m11:0,worldY:0,worldRotation:0,worldScaleX:1,worldScaleY:1,worldFlipX:!1,worldFlipY:!1,updateWorldTransform:function(){var e=this.parent;if(e)this.worldX=this.x*e.m00+this.y*e.m01+e.worldX,this.worldY=this.x*e.m10+this.y*e.m11+e.worldY,this.data.inheritScale?(this.worldScaleX=e.worldScaleX*this.scaleX,this.worldScaleY=e.worldScaleY*this.scaleY):(this.worldScaleX=this.scaleX,this.worldScaleY=this.scaleY),this.worldRotation=this.data.inheritRotation?e.worldRotation+this.rotationIK:this.rotationIK,this.worldFlipX=e.worldFlipX!=this.flipX,this.worldFlipY=e.worldFlipY!=this.flipY;else{var t=this.skeleton.flipX,r=this.skeleton.flipY;this.worldX=t?-this.x:this.x,this.worldY=r!=n.Bone.yDown?-this.y:this.y,this.worldScaleX=this.scaleX,this.worldScaleY=this.scaleY,this.worldRotation=this.rotationIK,this.worldFlipX=t!=this.flipX,this.worldFlipY=r!=this.flipY}var i=this.worldRotation*n.degRad,o=Math.cos(i),s=Math.sin(i);this.worldFlipX?(this.m00=-o*this.worldScaleX,this.m01=s*this.worldScaleY):(this.m00=o*this.worldScaleX,this.m01=-s*this.worldScaleY),this.worldFlipY!=n.Bone.yDown?(this.m10=-s*this.worldScaleX,this.m11=-o*this.worldScaleY):(this.m10=s*this.worldScaleX,this.m11=o*this.worldScaleY)},setToSetupPose:function(){var e=this.data;this.x=e.x,this.y=e.y,this.rotation=e.rotation,this.rotationIK=this.rotation,this.scaleX=e.scaleX,this.scaleY=e.scaleY,this.flipX=e.flipX,this.flipY=e.flipY},worldToLocal:function(e){var t=e[0]-this.worldX,r=e[1]-this.worldY,i=this.m00,o=this.m10,s=this.m01,a=this.m11;this.worldFlipX!=(this.worldFlipY!=n.Bone.yDown)&&(i=-i,a=-a);var h=1/(i*a-s*o);e[0]=t*i*h-r*s*h,e[1]=r*a*h-t*o*h},localToWorld:function(e){var t=e[0],r=e[1];e[0]=t*this.m00+r*this.m01+this.worldX,e[1]=t*this.m10+r*this.m11+this.worldY}},n.Slot=function(e,t){this.data=e,this.bone=t,this.setToSetupPose()},n.Slot.prototype={r:1,g:1,b:1,a:1,_attachmentTime:0,attachment:null,attachmentVertices:[],setAttachment:function(e){this.attachment=e,this._attachmentTime=this.bone.skeleton.time,this.attachmentVertices.length=0},setAttachmentTime:function(e){this._attachmentTime=this.bone.skeleton.time-e},getAttachmentTime:function(){return this.bone.skeleton.time-this._attachmentTime},setToSetupPose:function(){var e=this.data;this.r=e.r,this.g=e.g,this.b=e.b,this.a=e.a;for(var t=this.bone.skeleton.data.slots,r=0,i=t.length;i>r;r++)if(t[r]==e){this.setAttachment(e.attachmentName?this.bone.skeleton.getAttachmentBySlotIndex(r,e.attachmentName):null);break}}},n.IkConstraint=function(e,t){this.data=e,this.mix=e.mix,this.bendDirection=e.bendDirection,this.bones=[];for(var r=0,i=e.bones.length;i>r;r++)this.bones.push(t.findBone(e.bones[r].name));this.target=t.findBone(e.target.name)},n.IkConstraint.prototype={apply:function(){var e=this.target,t=this.bones;switch(t.length){case 1:n.IkConstraint.apply1(t[0],e.worldX,e.worldY,this.mix);break;case 2:n.IkConstraint.apply2(t[0],t[1],e.worldX,e.worldY,this.bendDirection,this.mix)}}},n.IkConstraint.apply1=function(e,t,r,i){var o=e.data.inheritRotation&&e.parent?e.parent.worldRotation:0,s=e.rotation,a=Math.atan2(r-e.worldY,t-e.worldX)*n.radDeg-o;e.rotationIK=s+(a-s)*i},n.IkConstraint.apply2=function(e,t,r,i,o,s){var a=t.rotation,h=e.rotation;if(!s)return t.rotationIK=a,void(e.rotationIK=h);var c,u,f=n.temp,d=e.parent;d?(f[0]=r,f[1]=i,d.worldToLocal(f),r=(f[0]-e.x)*d.worldScaleX,i=(f[1]-e.y)*d.worldScaleY):(r-=e.x,i-=e.y),t.parent==e?(c=t.x,u=t.y):(f[0]=t.x,f[1]=t.y,t.parent.localToWorld(f),e.worldToLocal(f),c=f[0],u=f[1]);var l=c*e.worldScaleX,p=u*e.worldScaleY,b=Math.atan2(p,l),m=Math.sqrt(l*l+p*p),v=t.data.length*t.worldScaleX,g=2*m*v;if(1e-4>g)return void(t.rotationIK=a+(Math.atan2(i,r)*n.radDeg-h-a)*s);var y=(r*r+i*i-m*m-v*v)/g;-1>y?y=-1:y>1&&(y=1);var w=Math.acos(y)*o,_=m+v*y,x=v*Math.sin(w),S=Math.atan2(i*_-r*x,r*_+i*x),T=(S-b)*n.radDeg-h;T>180?T-=360:-180>T&&(T+=360),e.rotationIK=h+T*s,T=(w+b)*n.radDeg-a,T>180?T-=360:-180>T&&(T+=360),t.rotationIK=a+(T+e.worldRotation-t.parent.worldRotation)*s},n.Skin=function(e){this.name=e,this.attachments={}},n.Skin.prototype={addAttachment:function(e,t,r){this.attachments[e+":"+t]=r},getAttachment:function(e,t){return this.attachments[e+":"+t]},_attachAll:function(e,t){for(var r in t.attachments){var i=r.indexOf(":"),n=parseInt(r.substring(0,i)),o=r.substring(i+1),s=e.slots[n];if(s.attachment&&s.attachment.name==o){var a=this.getAttachment(n,o);a&&s.setAttachment(a)}}}},n.Animation=function(e,t,r){this.name=e,this.timelines=t,this.duration=r},n.Animation.prototype={apply:function(e,t,r,i,n){i&&0!=this.duration&&(r%=this.duration,t%=this.duration);for(var o=this.timelines,s=0,a=o.length;a>s;s++)o[s].apply(e,t,r,n,1)},mix:function(e,t,r,i,n,o){i&&0!=this.duration&&(r%=this.duration,t%=this.duration);for(var s=this.timelines,a=0,h=s.length;h>a;a++)s[a].apply(e,t,r,n,o)}},n.Animation.binarySearch=function(e,t,r){var i=0,n=Math.floor(e.length/r)-2;if(!n)return r;for(var o=n>>>1;;){if(e[(o+1)*r]<=t?i=o+1:n=o,i==n)return(i+1)*r;o=i+n>>>1}},n.Animation.binarySearch1=function(e,t){var r=0,i=e.length-2;if(!i)return 1;for(var n=i>>>1;;){if(e[n+1]<=t?r=n+1:i=n,r==i)return r+1;n=r+i>>>1}},n.Animation.linearSearch=function(e,t,r){for(var i=0,n=e.length-r;n>=i;i+=r)if(e[i]>t)return i;return-1},n.Curves=function(){this.curves=[]},n.Curves.prototype={setLinear:function(e){this.curves[19*e]=0},setStepped:function(e){this.curves[19*e]=1},setCurve:function(e,t,r,i,n){var o=.1,s=o*o,a=s*o,h=3*o,c=3*s,u=6*s,f=6*a,d=2*-t+i,l=2*-r+n,p=3*(t-i)+1,b=3*(r-n)+1,m=t*h+d*c+p*a,v=r*h+l*c+b*a,g=d*u+p*f,y=l*u+b*f,w=p*f,_=b*f,x=19*e,S=this.curves;S[x++]=2;for(var T=m,A=v,E=x+19-1;E>x;x+=2)S[x]=T,S[x+1]=A,m+=g,v+=y,g+=w,y+=_,T+=m,A+=v},getCurvePercent:function(e,t){t=0>t?0:t>1?1:t;
var r=this.curves,i=19*e,n=r[i];if(0===n)return t;if(1==n)return 0;i++;for(var o=0,s=i,a=i+19-1;a>i;i+=2)if(o=r[i],o>=t){var h,c;return i==s?(h=0,c=0):(h=r[i-2],c=r[i-1]),c+(r[i+1]-c)*(t-h)/(o-h)}var u=r[i-1];return u+(1-u)*(t-o)/(1-o)}},n.RotateTimeline=function(e){this.curves=new n.Curves(e),this.frames=[],this.frames.length=2*e},n.RotateTimeline.prototype={boneIndex:0,getFrameCount:function(){return this.frames.length/2},setFrame:function(e,t,r){e*=2,this.frames[e]=t,this.frames[e+1]=r},apply:function(e,t,r,i,o){var s=this.frames;if(!(r<s[0])){var a=e.bones[this.boneIndex];if(r>=s[s.length-2]){for(var h=a.data.rotation+s[s.length-1]-a.rotation;h>180;)h-=360;for(;-180>h;)h+=360;return void(a.rotation+=h*o)}var c=n.Animation.binarySearch(s,r,2),u=s[c-1],f=s[c],d=1-(r-f)/(s[c-2]-f);d=this.curves.getCurvePercent(c/2-1,d);for(var h=s[c+1]-u;h>180;)h-=360;for(;-180>h;)h+=360;for(h=a.data.rotation+(u+h*d)-a.rotation;h>180;)h-=360;for(;-180>h;)h+=360;a.rotation+=h*o}}},n.TranslateTimeline=function(e){this.curves=new n.Curves(e),this.frames=[],this.frames.length=3*e},n.TranslateTimeline.prototype={boneIndex:0,getFrameCount:function(){return this.frames.length/3},setFrame:function(e,t,r,i){e*=3,this.frames[e]=t,this.frames[e+1]=r,this.frames[e+2]=i},apply:function(e,t,r,i,o){var s=this.frames;if(!(r<s[0])){var a=e.bones[this.boneIndex];if(r>=s[s.length-3])return a.x+=(a.data.x+s[s.length-2]-a.x)*o,void(a.y+=(a.data.y+s[s.length-1]-a.y)*o);var h=n.Animation.binarySearch(s,r,3),c=s[h-2],u=s[h-1],f=s[h],d=1-(r-f)/(s[h+-3]-f);d=this.curves.getCurvePercent(h/3-1,d),a.x+=(a.data.x+c+(s[h+1]-c)*d-a.x)*o,a.y+=(a.data.y+u+(s[h+2]-u)*d-a.y)*o}}},n.ScaleTimeline=function(e){this.curves=new n.Curves(e),this.frames=[],this.frames.length=3*e},n.ScaleTimeline.prototype={boneIndex:0,getFrameCount:function(){return this.frames.length/3},setFrame:function(e,t,r,i){e*=3,this.frames[e]=t,this.frames[e+1]=r,this.frames[e+2]=i},apply:function(e,t,r,i,o){var s=this.frames;if(!(r<s[0])){var a=e.bones[this.boneIndex];if(r>=s[s.length-3])return a.scaleX+=(a.data.scaleX*s[s.length-2]-a.scaleX)*o,void(a.scaleY+=(a.data.scaleY*s[s.length-1]-a.scaleY)*o);var h=n.Animation.binarySearch(s,r,3),c=s[h-2],u=s[h-1],f=s[h],d=1-(r-f)/(s[h+-3]-f);d=this.curves.getCurvePercent(h/3-1,d),a.scaleX+=(a.data.scaleX*(c+(s[h+1]-c)*d)-a.scaleX)*o,a.scaleY+=(a.data.scaleY*(u+(s[h+2]-u)*d)-a.scaleY)*o}}},n.ColorTimeline=function(e){this.curves=new n.Curves(e),this.frames=[],this.frames.length=5*e},n.ColorTimeline.prototype={slotIndex:0,getFrameCount:function(){return this.frames.length/5},setFrame:function(e,t,r,i,n,o){e*=5,this.frames[e]=t,this.frames[e+1]=r,this.frames[e+2]=i,this.frames[e+3]=n,this.frames[e+4]=o},apply:function(e,t,r,i,o){var s=this.frames;if(!(r<s[0])){var a,h,c,u;if(r>=s[s.length-5]){var f=s.length-1;a=s[f-3],h=s[f-2],c=s[f-1],u=s[f]}else{var d=n.Animation.binarySearch(s,r,5),l=s[d-4],p=s[d-3],b=s[d-2],m=s[d-1],v=s[d],g=1-(r-v)/(s[d-5]-v);g=this.curves.getCurvePercent(d/5-1,g),a=l+(s[d+1]-l)*g,h=p+(s[d+2]-p)*g,c=b+(s[d+3]-b)*g,u=m+(s[d+4]-m)*g}var y=e.slots[this.slotIndex];1>o?(y.r+=(a-y.r)*o,y.g+=(h-y.g)*o,y.b+=(c-y.b)*o,y.a+=(u-y.a)*o):(y.r=a,y.g=h,y.b=c,y.a=u)}}},n.AttachmentTimeline=function(e){this.curves=new n.Curves(e),this.frames=[],this.frames.length=e,this.attachmentNames=[],this.attachmentNames.length=e},n.AttachmentTimeline.prototype={slotIndex:0,getFrameCount:function(){return this.frames.length},setFrame:function(e,t,r){this.frames[e]=t,this.attachmentNames[e]=r},apply:function(e,t,r){var i=this.frames;if(r<i[0])return void(t>r&&this.apply(e,t,Number.MAX_VALUE,null,0));t>r&&(t=-1);var o=r>=i[i.length-1]?i.length-1:n.Animation.binarySearch1(i,r)-1;if(!(i[o]<t)){var s=this.attachmentNames[o];e.slots[this.slotIndex].setAttachment(s?e.getAttachmentBySlotIndex(this.slotIndex,s):null)}}},n.EventTimeline=function(e){this.frames=[],this.frames.length=e,this.events=[],this.events.length=e},n.EventTimeline.prototype={getFrameCount:function(){return this.frames.length},setFrame:function(e,t,r){this.frames[e]=t,this.events[e]=r},apply:function(e,t,r,i,o){if(i){var s=this.frames,a=s.length;if(t>r)this.apply(e,t,Number.MAX_VALUE,i,o),t=-1;else if(t>=s[a-1])return;if(!(r<s[0])){var h;if(t<s[0])h=0;else{h=n.Animation.binarySearch1(s,t);for(var c=s[h];h>0&&s[h-1]==c;)h--}for(var u=this.events;a>h&&r>=s[h];h++)i.push(u[h])}}}},n.DrawOrderTimeline=function(e){this.frames=[],this.frames.length=e,this.drawOrders=[],this.drawOrders.length=e},n.DrawOrderTimeline.prototype={getFrameCount:function(){return this.frames.length},setFrame:function(e,t,r){this.frames[e]=t,this.drawOrders[e]=r},apply:function(e,t,r){var i=this.frames;if(!(r<i[0])){var o;o=r>=i[i.length-1]?i.length-1:n.Animation.binarySearch1(i,r)-1;var s=e.drawOrder,a=e.slots,h=this.drawOrders[o];if(h)for(var c=0,u=h.length;u>c;c++)s[c]=e.slots[h[c]];else for(var c=0,u=a.length;u>c;c++)s[c]=a[c]}}},n.FfdTimeline=function(e){this.curves=new n.Curves(e),this.frames=[],this.frames.length=e,this.frameVertices=[],this.frameVertices.length=e},n.FfdTimeline.prototype={slotIndex:0,attachment:0,getFrameCount:function(){return this.frames.length},setFrame:function(e,t,r){this.frames[e]=t,this.frameVertices[e]=r},apply:function(e,t,r,i,o){var s=e.slots[this.slotIndex];if(s.attachment==this.attachment){var a=this.frames;if(!(r<a[0])){var h=this.frameVertices,c=h[0].length,u=s.attachmentVertices;if(u.length!=c&&(o=1),u.length=c,r>=a[a.length-1]){var f=h[a.length-1];if(1>o)for(var d=0;c>d;d++)u[d]+=(f[d]-u[d])*o;else for(var d=0;c>d;d++)u[d]=f[d]}else{var l=n.Animation.binarySearch1(a,r),p=a[l],b=1-(r-p)/(a[l-1]-p);b=this.curves.getCurvePercent(l-1,0>b?0:b>1?1:b);var m=h[l-1],v=h[l];if(1>o)for(var d=0;c>d;d++){var g=m[d];u[d]+=(g+(v[d]-g)*b-u[d])*o}else for(var d=0;c>d;d++){var g=m[d];u[d]=g+(v[d]-g)*b}}}}}},n.IkConstraintTimeline=function(e){this.curves=new n.Curves(e),this.frames=[],this.frames.length=3*e},n.IkConstraintTimeline.prototype={ikConstraintIndex:0,getFrameCount:function(){return this.frames.length/3},setFrame:function(e,t,r,i){e*=3,this.frames[e]=t,this.frames[e+1]=r,this.frames[e+2]=i},apply:function(e,t,r,i,o){var s=this.frames;if(!(r<s[0])){var a=e.ikConstraints[this.ikConstraintIndex];if(r>=s[s.length-3])return a.mix+=(s[s.length-2]-a.mix)*o,void(a.bendDirection=s[s.length-1]);var h=n.Animation.binarySearch(s,r,3),c=s[h+-2],u=s[h],f=1-(r-u)/(s[h+-3]-u);f=this.curves.getCurvePercent(h/3-1,f);var d=c+(s[h+1]-c)*f;a.mix+=(d-a.mix)*o,a.bendDirection=s[h+-1]}}},n.FlipXTimeline=function(e){this.curves=new n.Curves(e),this.frames=[],this.frames.length=2*e},n.FlipXTimeline.prototype={boneIndex:0,getFrameCount:function(){return this.frames.length/2},setFrame:function(e,t,r){e*=2,this.frames[e]=t,this.frames[e+1]=r?1:0},apply:function(e,t,r){var i=this.frames;if(r<i[0])return void(t>r&&this.apply(e,t,Number.MAX_VALUE,null,0));t>r&&(t=-1);var o=(r>=i[i.length-2]?i.length:n.Animation.binarySearch(i,r,2))-2;i[o]<t||(e.bones[boneIndex].flipX=0!=i[o+1])}},n.FlipYTimeline=function(e){this.curves=new n.Curves(e),this.frames=[],this.frames.length=2*e},n.FlipYTimeline.prototype={boneIndex:0,getFrameCount:function(){return this.frames.length/2},setFrame:function(e,t,r){e*=2,this.frames[e]=t,this.frames[e+1]=r?1:0},apply:function(e,t,r){var i=this.frames;if(r<i[0])return void(t>r&&this.apply(e,t,Number.MAX_VALUE,null,0));t>r&&(t=-1);var o=(r>=i[i.length-2]?i.length:n.Animation.binarySearch(i,r,2))-2;i[o]<t||(e.bones[boneIndex].flipY=0!=i[o+1])}},n.SkeletonData=function(){this.bones=[],this.slots=[],this.skins=[],this.events=[],this.animations=[],this.ikConstraints=[]},n.SkeletonData.prototype={name:null,defaultSkin:null,width:0,height:0,version:null,hash:null,findBone:function(e){for(var t=this.bones,r=0,i=t.length;i>r;r++)if(t[r].name==e)return t[r];return null},findBoneIndex:function(e){for(var t=this.bones,r=0,i=t.length;i>r;r++)if(t[r].name==e)return r;return-1},findSlot:function(e){for(var t=this.slots,r=0,i=t.length;i>r;r++)if(t[r].name==e)return slot[r];return null},findSlotIndex:function(e){for(var t=this.slots,r=0,i=t.length;i>r;r++)if(t[r].name==e)return r;return-1},findSkin:function(e){for(var t=this.skins,r=0,i=t.length;i>r;r++)if(t[r].name==e)return t[r];return null},findEvent:function(e){for(var t=this.events,r=0,i=t.length;i>r;r++)if(t[r].name==e)return t[r];return null},findAnimation:function(e){for(var t=this.animations,r=0,i=t.length;i>r;r++)if(t[r].name==e)return t[r];return null},findIkConstraint:function(e){for(var t=this.ikConstraints,r=0,i=t.length;i>r;r++)if(t[r].name==e)return t[r];return null}},n.Skeleton=function(e){this.data=e,this.bones=[];for(var t=0,r=e.bones.length;r>t;t++){var i=e.bones[t],o=i.parent?this.bones[e.bones.indexOf(i.parent)]:null;this.bones.push(new n.Bone(i,this,o))}this.slots=[],this.drawOrder=[];for(var t=0,r=e.slots.length;r>t;t++){var s=e.slots[t],a=this.bones[e.bones.indexOf(s.boneData)],h=new n.Slot(s,a);this.slots.push(h),this.drawOrder.push(h)}this.ikConstraints=[];for(var t=0,r=e.ikConstraints.length;r>t;t++)this.ikConstraints.push(new n.IkConstraint(e.ikConstraints[t],this));this.boneCache=[],this.updateCache()},n.Skeleton.prototype={x:0,y:0,skin:null,r:1,g:1,b:1,a:1,time:0,flipX:!1,flipY:!1,updateCache:function(){var e=this.ikConstraints,t=e.length,r=t+1,i=this.boneCache;i.length>r&&(i.length=r);for(var n=0,o=i.length;o>n;n++)i[n].length=0;for(;i.length<r;)i[i.length]=[];var s=i[0],a=this.bones;e:for(var n=0,o=a.length;o>n;n++){var h=a[n],c=h;do{for(var u=0;t>u;u++)for(var f=e[u],d=f.bones[0],l=f.bones[f.bones.length-1];;){if(c==l){i[u].push(h),i[u+1].push(h);continue e}if(l==d)break;l=l.parent}c=c.parent}while(c);s[s.length]=h}},updateWorldTransform:function(){for(var e=this.bones,t=0,r=e.length;r>t;t++){var i=e[t];i.rotationIK=i.rotation}for(var t=0,n=this.boneCache.length-1;;){for(var o=this.boneCache[t],s=0,a=o.length;a>s;s++)o[s].updateWorldTransform();if(t==n)break;this.ikConstraints[t].apply(),t++}},setToSetupPose:function(){this.setBonesToSetupPose(),this.setSlotsToSetupPose()},setBonesToSetupPose:function(){for(var e=this.bones,t=0,r=e.length;r>t;t++)e[t].setToSetupPose();for(var i=this.ikConstraints,t=0,r=i.length;r>t;t++){var n=i[t];n.bendDirection=n.data.bendDirection,n.mix=n.data.mix}},setSlotsToSetupPose:function(){for(var e=this.slots,t=this.drawOrder,r=0,i=e.length;i>r;r++)t[r]=e[r],e[r].setToSetupPose(r)},getRootBone:function(){return this.bones.length?this.bones[0]:null},findBone:function(e){for(var t=this.bones,r=0,i=t.length;i>r;r++)if(t[r].data.name==e)return t[r];return null},findBoneIndex:function(e){for(var t=this.bones,r=0,i=t.length;i>r;r++)if(t[r].data.name==e)return r;return-1},findSlot:function(e){for(var t=this.slots,r=0,i=t.length;i>r;r++)if(t[r].data.name==e)return t[r];return null},findSlotIndex:function(e){for(var t=this.slots,r=0,i=t.length;i>r;r++)if(t[r].data.name==e)return r;return-1},setSkinByName:function(e){var t=this.data.findSkin(e);if(!t)throw"Skin not found: "+e;this.setSkin(t)},setSkin:function(e){if(e)if(this.skin)e._attachAll(this,this.skin);else for(var t=this.slots,r=0,i=t.length;i>r;r++){var n=t[r],o=n.data.attachmentName;if(o){var s=e.getAttachment(r,o);s&&n.setAttachment(s)}}this.skin=e},getAttachmentBySlotName:function(e,t){return this.getAttachmentBySlotIndex(this.data.findSlotIndex(e),t)},getAttachmentBySlotIndex:function(e,t){if(this.skin){var r=this.skin.getAttachment(e,t);if(r)return r}return this.data.defaultSkin?this.data.defaultSkin.getAttachment(e,t):null},setAttachment:function(e,t){for(var r=this.slots,i=0,n=r.length;n>i;i++){var o=r[i];if(o.data.name==e){var s=null;if(t&&(s=this.getAttachmentBySlotIndex(i,t),!s))throw"Attachment not found: "+t+", for slot: "+e;return void o.setAttachment(s)}}throw"Slot not found: "+e},findIkConstraint:function(e){for(var t=this.ikConstraints,r=0,i=t.length;i>r;r++)if(t[r].data.name==e)return t[r];return null},update:function(e){this.time+=e}},n.EventData=function(e){this.name=e},n.EventData.prototype={intValue:0,floatValue:0,stringValue:null},n.Event=function(e){this.data=e},n.Event.prototype={intValue:0,floatValue:0,stringValue:null},n.AttachmentType={region:0,boundingbox:1,mesh:2,skinnedmesh:3},n.RegionAttachment=function(e){this.name=e,this.offset=[],this.offset.length=8,this.uvs=[],this.uvs.length=8},n.RegionAttachment.prototype={type:n.AttachmentType.region,x:0,y:0,rotation:0,scaleX:1,scaleY:1,width:0,height:0,r:1,g:1,b:1,a:1,path:null,rendererObject:null,regionOffsetX:0,regionOffsetY:0,regionWidth:0,regionHeight:0,regionOriginalWidth:0,regionOriginalHeight:0,setUVs:function(e,t,r,i,n){var o=this.uvs;n?(o[2]=e,o[3]=i,o[4]=e,o[5]=t,o[6]=r,o[7]=t,o[0]=r,o[1]=i):(o[0]=e,o[1]=i,o[2]=e,o[3]=t,o[4]=r,o[5]=t,o[6]=r,o[7]=i)},updateOffset:function(){var e=this.width/this.regionOriginalWidth*this.scaleX,t=this.height/this.regionOriginalHeight*this.scaleY,r=-this.width/2*this.scaleX+this.regionOffsetX*e,i=-this.height/2*this.scaleY+this.regionOffsetY*t,o=r+this.regionWidth*e,s=i+this.regionHeight*t,a=this.rotation*n.degRad,h=Math.cos(a),c=Math.sin(a),u=r*h+this.x,f=r*c,d=i*h+this.y,l=i*c,p=o*h+this.x,b=o*c,m=s*h+this.y,v=s*c,g=this.offset;g[0]=u-l,g[1]=d+f,g[2]=u-v,g[3]=m+f,g[4]=p-v,g[5]=m+b,g[6]=p-l,g[7]=d+b},computeVertices:function(e,t,r,i){e+=r.worldX,t+=r.worldY;var n=r.m00,o=r.m01,s=r.m10,a=r.m11,h=this.offset;i[0]=h[0]*n+h[1]*o+e,i[1]=h[0]*s+h[1]*a+t,i[2]=h[2]*n+h[3]*o+e,i[3]=h[2]*s+h[3]*a+t,i[4]=h[4]*n+h[5]*o+e,i[5]=h[4]*s+h[5]*a+t,i[6]=h[6]*n+h[7]*o+e,i[7]=h[6]*s+h[7]*a+t}},n.MeshAttachment=function(e){this.name=e},n.MeshAttachment.prototype={type:n.AttachmentType.mesh,vertices:null,uvs:null,regionUVs:null,triangles:null,hullLength:0,r:1,g:1,b:1,a:1,path:null,rendererObject:null,regionU:0,regionV:0,regionU2:0,regionV2:0,regionRotate:!1,regionOffsetX:0,regionOffsetY:0,regionWidth:0,regionHeight:0,regionOriginalWidth:0,regionOriginalHeight:0,edges:null,width:0,height:0,updateUVs:function(){var e=this.regionU2-this.regionU,t=this.regionV2-this.regionV,r=this.regionUVs.length;if(this.uvs&&this.uvs.length==r||(this.uvs=new n.Float32Array(r)),this.regionRotate)for(var i=0;r>i;i+=2)this.uvs[i]=this.regionU+this.regionUVs[i+1]*e,this.uvs[i+1]=this.regionV+t-this.regionUVs[i]*t;else for(var i=0;r>i;i+=2)this.uvs[i]=this.regionU+this.regionUVs[i]*e,this.uvs[i+1]=this.regionV+this.regionUVs[i+1]*t},computeWorldVertices:function(e,t,r,i){var n=r.bone;e+=n.worldX,t+=n.worldY;var o=n.m00,s=n.m01,a=n.m10,h=n.m11,c=this.vertices,u=c.length;r.attachmentVertices.length==u&&(c=r.attachmentVertices);for(var f=0;u>f;f+=2){var d=c[f],l=c[f+1];i[f]=d*o+l*s+e,i[f+1]=d*a+l*h+t}}},n.SkinnedMeshAttachment=function(e){this.name=e},n.SkinnedMeshAttachment.prototype={type:n.AttachmentType.skinnedmesh,bones:null,weights:null,uvs:null,regionUVs:null,triangles:null,hullLength:0,r:1,g:1,b:1,a:1,path:null,rendererObject:null,regionU:0,regionV:0,regionU2:0,regionV2:0,regionRotate:!1,regionOffsetX:0,regionOffsetY:0,regionWidth:0,regionHeight:0,regionOriginalWidth:0,regionOriginalHeight:0,edges:null,width:0,height:0,updateUVs:function(){var e=this.regionU2-this.regionU,t=this.regionV2-this.regionV,r=this.regionUVs.length;if(this.uvs&&this.uvs.length==r||(this.uvs=new n.Float32Array(r)),this.regionRotate)for(var i=0;r>i;i+=2)this.uvs[i]=this.regionU+this.regionUVs[i+1]*e,this.uvs[i+1]=this.regionV+t-this.regionUVs[i]*t;else for(var i=0;r>i;i+=2)this.uvs[i]=this.regionU+this.regionUVs[i]*e,this.uvs[i+1]=this.regionV+this.regionUVs[i+1]*t},computeWorldVertices:function(e,t,r,i){var n,o,s,a,h,c,u,f=r.bone.skeleton.bones,d=this.weights,l=this.bones,p=0,b=0,m=0,v=0,g=l.length;if(r.attachmentVertices.length)for(var y=r.attachmentVertices;g>b;p+=2){for(o=0,s=0,n=l[b++]+b;n>b;b++,m+=3,v+=2)a=f[l[b]],h=d[m]+y[v],c=d[m+1]+y[v+1],u=d[m+2],o+=(h*a.m00+c*a.m01+a.worldX)*u,s+=(h*a.m10+c*a.m11+a.worldY)*u;i[p]=o+e,i[p+1]=s+t}else for(;g>b;p+=2){for(o=0,s=0,n=l[b++]+b;n>b;b++,m+=3)a=f[l[b]],h=d[m],c=d[m+1],u=d[m+2],o+=(h*a.m00+c*a.m01+a.worldX)*u,s+=(h*a.m10+c*a.m11+a.worldY)*u;i[p]=o+e,i[p+1]=s+t}}},n.BoundingBoxAttachment=function(e){this.name=e,this.vertices=[]},n.BoundingBoxAttachment.prototype={type:n.AttachmentType.boundingbox,computeWorldVertices:function(e,t,r,i){e+=r.worldX,t+=r.worldY;for(var n=r.m00,o=r.m01,s=r.m10,a=r.m11,h=this.vertices,c=0,u=h.length;u>c;c+=2){var f=h[c],d=h[c+1];i[c]=f*n+d*o+e,i[c+1]=f*s+d*a+t}}},n.AnimationStateData=function(e){this.skeletonData=e,this.animationToMixTime={}},n.AnimationStateData.prototype={defaultMix:0,setMixByName:function(e,t,r){var i=this.skeletonData.findAnimation(e);if(!i)throw"Animation not found: "+e;var n=this.skeletonData.findAnimation(t);if(!n)throw"Animation not found: "+t;this.setMix(i,n,r)},setMix:function(e,t,r){this.animationToMixTime[e.name+":"+t.name]=r},getMix:function(e,t){var r=e.name+":"+t.name;return this.animationToMixTime.hasOwnProperty(r)?this.animationToMixTime[r]:this.defaultMix}},n.TrackEntry=function(){},n.TrackEntry.prototype={next:null,previous:null,animation:null,loop:!1,delay:0,time:0,lastTime:-1,endTime:0,timeScale:1,mixTime:0,mixDuration:0,mix:1,onStart:null,onEnd:null,onComplete:null,onEvent:null},n.AnimationState=function(e){this.data=e,this.tracks=[],this.events=[]},n.AnimationState.prototype={onStart:null,onEnd:null,onComplete:null,onEvent:null,timeScale:1,update:function(e){e*=this.timeScale;for(var t=0;t<this.tracks.length;t++){var r=this.tracks[t];if(r){if(r.time+=e*r.timeScale,r.previous){var i=e*r.previous.timeScale;r.previous.time+=i,r.mixTime+=i}var n=r.next;n?(n.time=r.lastTime-n.delay,n.time>=0&&this.setCurrent(t,n)):!r.loop&&r.lastTime>=r.endTime&&this.clearTrack(t)}}},apply:function(e){for(var t=0;t<this.tracks.length;t++){var r=this.tracks[t];if(r){this.events.length=0;var i=r.time,n=r.lastTime,o=r.endTime,s=r.loop;!s&&i>o&&(i=o);var a=r.previous;if(a){var h=a.time;!a.loop&&h>a.endTime&&(h=a.endTime),a.animation.apply(e,h,h,a.loop,null);var c=r.mixTime/r.mixDuration*r.mix;c>=1&&(c=1,r.previous=null),r.animation.mix(e,r.lastTime,i,s,this.events,c)}else 1==r.mix?r.animation.apply(e,r.lastTime,i,s,this.events):r.animation.mix(e,r.lastTime,i,s,this.events,r.mix);for(var u=0,f=this.events.length;f>u;u++){var d=this.events[u];r.onEvent&&r.onEvent(t,d),this.onEvent&&this.onEvent(t,d)}if(s?n%o>i%o:o>n&&i>=o){var l=Math.floor(i/o);r.onComplete&&r.onComplete(t,l),this.onComplete&&this.onComplete(t,l)}r.lastTime=r.time}}},clearTracks:function(){for(var e=0,t=this.tracks.length;t>e;e++)this.clearTrack(e);this.tracks.length=0},clearTrack:function(e){if(!(e>=this.tracks.length)){var t=this.tracks[e];t&&(t.onEnd&&t.onEnd(e),this.onEnd&&this.onEnd(e),this.tracks[e]=null)}},_expandToIndex:function(e){if(e<this.tracks.length)return this.tracks[e];for(;e>=this.tracks.length;)this.tracks.push(null);return null},setCurrent:function(e,t){var r=this._expandToIndex(e);if(r){var i=r.previous;r.previous=null,r.onEnd&&r.onEnd(e),this.onEnd&&this.onEnd(e),t.mixDuration=this.data.getMix(r.animation,t.animation),t.mixDuration>0&&(t.mixTime=0,t.previous=i&&r.mixTime/r.mixDuration<.5?i:r)}this.tracks[e]=t,t.onStart&&t.onStart(e),this.onStart&&this.onStart(e)},setAnimationByName:function(e,t,r){var i=this.data.skeletonData.findAnimation(t);if(!i)throw"Animation not found: "+t;return this.setAnimation(e,i,r)},setAnimation:function(e,t,r){var i=new n.TrackEntry;return i.animation=t,i.loop=r,i.endTime=t.duration,this.setCurrent(e,i),i},addAnimationByName:function(e,t,r,i){var n=this.data.skeletonData.findAnimation(t);if(!n)throw"Animation not found: "+t;return this.addAnimation(e,n,r,i)},addAnimation:function(e,t,r,i){var o=new n.TrackEntry;o.animation=t,o.loop=r,o.endTime=t.duration;var s=this._expandToIndex(e);if(s){for(;s.next;)s=s.next;s.next=o}else this.tracks[e]=o;return 0>=i&&(s?i+=s.endTime-this.data.getMix(s.animation,t):i=0),o.delay=i,o},getCurrent:function(e){return e>=this.tracks.length?null:this.tracks[e]}},n.SkeletonJson=function(e){this.attachmentLoader=e},n.SkeletonJson.prototype={scale:1,readSkeletonData:function(e,t){var r=new n.SkeletonData;r.name=t;var i=e.skeleton;i&&(r.hash=i.hash,r.version=i.spine,r.width=i.width||0,r.height=i.height||0);for(var o=e.bones,s=0,a=o.length;a>s;s++){var h=o[s],c=null;if(h.parent&&(c=r.findBone(h.parent),!c))throw"Parent bone not found: "+h.parent;var u=new n.BoneData(h.name,c);u.length=(h.length||0)*this.scale,u.x=(h.x||0)*this.scale,u.y=(h.y||0)*this.scale,u.rotation=h.rotation||0,u.scaleX=h.hasOwnProperty("scaleX")?h.scaleX:1,u.scaleY=h.hasOwnProperty("scaleY")?h.scaleY:1,u.inheritScale=h.hasOwnProperty("inheritScale")?h.inheritScale:!0,u.inheritRotation=h.hasOwnProperty("inheritRotation")?h.inheritRotation:!0,r.bones.push(u)}var f=e.ik;if(f)for(var s=0,a=f.length;a>s;s++){for(var d=f[s],l=new n.IkConstraintData(d.name),o=d.bones,p=0,b=o.length;b>p;p++){var m=r.findBone(o[p]);if(!m)throw"IK bone not found: "+o[p];l.bones.push(m)}if(l.target=r.findBone(d.target),!l.target)throw"Target bone not found: "+d.target;l.bendDirection=!d.hasOwnProperty("bendPositive")||d.bendPositive?1:-1,l.mix=d.hasOwnProperty("mix")?d.mix:1,r.ikConstraints.push(l)}for(var v=e.slots,s=0,a=v.length;a>s;s++){var g=v[s],u=r.findBone(g.bone);if(!u)throw"Slot bone not found: "+g.bone;var y=new n.SlotData(g.name,u),w=g.color;w&&(y.r=this.toColor(w,0),y.g=this.toColor(w,1),y.b=this.toColor(w,2),y.a=this.toColor(w,3)),y.attachmentName=g.attachment,y.additiveBlending=g.additive&&"true"==g.additive,r.slots.push(y)}var _=e.skins;for(var x in _)if(_.hasOwnProperty(x)){var S=_[x],T=new n.Skin(x);for(var A in S)if(S.hasOwnProperty(A)){var E=r.findSlotIndex(A),C=S[A];for(var k in C)if(C.hasOwnProperty(k)){var R=this.readAttachment(T,k,C[k]);R&&T.addAttachment(E,k,R)}}r.skins.push(T),"default"==T.name&&(r.defaultSkin=T)}var M=e.events;for(var B in M)if(M.hasOwnProperty(B)){var I=M[B],j=new n.EventData(B);j.intValue=I.int||0,j.floatValue=I.float||0,j.stringValue=I.string||null,r.events.push(j)}var P=e.animations;for(var O in P)P.hasOwnProperty(O)&&this.readAnimation(O,P[O],r);return r},readAttachment:function(e,t,r){t=r.name||t;var i=n.AttachmentType[r.type||"region"],o=r.path||t,s=this.scale;if(i==n.AttachmentType.region){var a=this.attachmentLoader.newRegionAttachment(e,t,o);if(!a)return null;a.path=o,a.x=(r.x||0)*s,a.y=(r.y||0)*s,a.scaleX=r.hasOwnProperty("scaleX")?r.scaleX:1,a.scaleY=r.hasOwnProperty("scaleY")?r.scaleY:1,a.rotation=r.rotation||0,a.width=(r.width||0)*s,a.height=(r.height||0)*s;var h=r.color;return h&&(a.r=this.toColor(h,0),a.g=this.toColor(h,1),a.b=this.toColor(h,2),a.a=this.toColor(h,3)),a.updateOffset(),a}if(i==n.AttachmentType.mesh){var c=this.attachmentLoader.newMeshAttachment(e,t,o);return c?(c.path=o,c.vertices=this.getFloatArray(r,"vertices",s),c.triangles=this.getIntArray(r,"triangles"),c.regionUVs=this.getFloatArray(r,"uvs",1),c.updateUVs(),h=r.color,h&&(c.r=this.toColor(h,0),c.g=this.toColor(h,1),c.b=this.toColor(h,2),c.a=this.toColor(h,3)),c.hullLength=2*(r.hull||0),r.edges&&(c.edges=this.getIntArray(r,"edges")),c.width=(r.width||0)*s,c.height=(r.height||0)*s,c):null}if(i==n.AttachmentType.skinnedmesh){var c=this.attachmentLoader.newSkinnedMeshAttachment(e,t,o);if(!c)return null;c.path=o;for(var u=this.getFloatArray(r,"uvs",1),f=this.getFloatArray(r,"vertices",1),d=[],l=[],p=0,b=f.length;b>p;){var m=0|f[p++];l[l.length]=m;for(var v=p+4*m;v>p;)l[l.length]=f[p],d[d.length]=f[p+1]*s,d[d.length]=f[p+2]*s,d[d.length]=f[p+3],p+=4}return c.bones=l,c.weights=d,c.triangles=this.getIntArray(r,"triangles"),c.regionUVs=u,c.updateUVs(),h=r.color,h&&(c.r=this.toColor(h,0),c.g=this.toColor(h,1),c.b=this.toColor(h,2),c.a=this.toColor(h,3)),c.hullLength=2*(r.hull||0),r.edges&&(c.edges=this.getIntArray(r,"edges")),c.width=(r.width||0)*s,c.height=(r.height||0)*s,c}if(i==n.AttachmentType.boundingbox){for(var g=this.attachmentLoader.newBoundingBoxAttachment(e,t),f=r.vertices,p=0,b=f.length;b>p;p++)g.vertices.push(f[p]*s);return g}throw"Unknown attachment type: "+i},readAnimation:function(e,t,r){var i=[],o=0,s=t.slots;for(var a in s)if(s.hasOwnProperty(a)){var h=s[a],c=r.findSlotIndex(a);for(var u in h)if(h.hasOwnProperty(u)){var f=h[u];if("color"==u){var d=new n.ColorTimeline(f.length);d.slotIndex=c;for(var l=0,p=0,b=f.length;b>p;p++){var m=f[p],v=m.color,g=this.toColor(v,0),y=this.toColor(v,1),w=this.toColor(v,2),_=this.toColor(v,3);d.setFrame(l,m.time,g,y,w,_),this.readCurve(d,l,m),l++}i.push(d),o=Math.max(o,d.frames[5*d.getFrameCount()-5])}else{if("attachment"!=u)throw"Invalid timeline type for a slot: "+u+" ("+a+")";var d=new n.AttachmentTimeline(f.length);d.slotIndex=c;for(var l=0,p=0,b=f.length;b>p;p++){var m=f[p];d.setFrame(l++,m.time,m.name)}i.push(d),o=Math.max(o,d.frames[d.getFrameCount()-1])}}}var x=t.bones;for(var S in x)if(x.hasOwnProperty(S)){var T=r.findBoneIndex(S);if(-1==T)throw"Bone not found: "+S;var A=x[S];for(var u in A)if(A.hasOwnProperty(u)){var f=A[u];if("rotate"==u){var d=new n.RotateTimeline(f.length);d.boneIndex=T;for(var l=0,p=0,b=f.length;b>p;p++){var m=f[p];d.setFrame(l,m.time,m.angle),this.readCurve(d,l,m),l++}i.push(d),o=Math.max(o,d.frames[2*d.getFrameCount()-2])}else if("translate"==u||"scale"==u){var d,E=1;"scale"==u?d=new n.ScaleTimeline(f.length):(d=new n.TranslateTimeline(f.length),E=this.scale),d.boneIndex=T;for(var l=0,p=0,b=f.length;b>p;p++){var m=f[p],C=(m.x||0)*E,k=(m.y||0)*E;d.setFrame(l,m.time,C,k),this.readCurve(d,l,m),l++}i.push(d),o=Math.max(o,d.frames[3*d.getFrameCount()-3])}else{if("flipX"!=u&&"flipY"!=u)throw"Invalid timeline type for a bone: "+u+" ("+S+")";var C="flipX"==u,d=C?new n.FlipXTimeline(f.length):new n.FlipYTimeline(f.length);d.boneIndex=T;for(var R=C?"x":"y",l=0,p=0,b=f.length;b>p;p++){var m=f[p];d.setFrame(l,m.time,m[R]||!1),l++}i.push(d),o=Math.max(o,d.frames[2*d.getFrameCount()-2])}}}var M=t.ik;for(var B in M)if(M.hasOwnProperty(B)){var I=r.findIkConstraint(B),f=M[B],d=new n.IkConstraintTimeline(f.length);d.ikConstraintIndex=r.ikConstraints.indexOf(I);for(var l=0,p=0,b=f.length;b>p;p++){var m=f[p],j=m.hasOwnProperty("mix")?m.mix:1,P=!m.hasOwnProperty("bendPositive")||m.bendPositive?1:-1;d.setFrame(l,m.time,j,P),this.readCurve(d,l,m),l++}i.push(d),o=Math.max(o,d.frames[3*d.frameCount-3])}var O=t.ffd;for(var L in O){var D=r.findSkin(L),h=O[L];for(a in h){var c=r.findSlotIndex(a),F=h[a];for(var U in F){var f=F[U],d=new n.FfdTimeline(f.length),N=D.getAttachment(c,U);if(!N)throw"FFD attachment not found: "+U;d.slotIndex=c,d.attachment=N;var G,q=N.type==n.AttachmentType.mesh;G=q?N.vertices.length:N.weights.length/3*2;for(var l=0,p=0,b=f.length;b>p;p++){var W,m=f[p];if(m.vertices){var V=m.vertices,W=[];W.length=G;var z=m.offset||0,Y=V.length;if(1==this.scale)for(var X=0;Y>X;X++)W[X+z]=V[X];else for(var X=0;Y>X;X++)W[X+z]=V[X]*this.scale;if(q)for(var H=N.vertices,X=0,Y=W.length;Y>X;X++)W[X]+=H[X]}else q?W=N.vertices:(W=[],W.length=G);d.setFrame(l,m.time,W),this.readCurve(d,l,m),l++}i[i.length]=d,o=Math.max(o,d.frames[d.frameCount-1])}}}var K=t.drawOrder;if(K||(K=t.draworder),K){for(var d=new n.DrawOrderTimeline(K.length),J=r.slots.length,l=0,p=0,b=K.length;b>p;p++){var $=K[p],Q=null;if($.offsets){Q=[],Q.length=J;for(var X=J-1;X>=0;X--)Q[X]=-1;var Z=$.offsets,et=[];et.length=J-Z.length;for(var tt=0,rt=0,X=0,Y=Z.length;Y>X;X++){var it=Z[X],c=r.findSlotIndex(it.slot);if(-1==c)throw"Slot not found: "+it.slot;for(;tt!=c;)et[rt++]=tt++;Q[tt+it.offset]=tt++}for(;J>tt;)et[rt++]=tt++;for(var X=J-1;X>=0;X--)-1==Q[X]&&(Q[X]=et[--rt])}d.setFrame(l++,$.time,Q)}i.push(d),o=Math.max(o,d.frames[d.getFrameCount()-1])}var nt=t.events;if(nt){for(var d=new n.EventTimeline(nt.length),l=0,p=0,b=nt.length;b>p;p++){var ot=nt[p],st=r.findEvent(ot.name);if(!st)throw"Event not found: "+ot.name;var at=new n.Event(st);at.intValue=ot.hasOwnProperty("int")?ot.int:st.intValue,at.floatValue=ot.hasOwnProperty("float")?ot.float:st.floatValue,at.stringValue=ot.hasOwnProperty("string")?ot.string:st.stringValue,d.setFrame(l++,ot.time,at)}i.push(d),o=Math.max(o,d.frames[d.getFrameCount()-1])}r.animations.push(new n.Animation(e,i,o))},readCurve:function(e,t,r){var i=r.curve;i?"stepped"==i?e.curves.setStepped(t):i instanceof Array&&e.curves.setCurve(t,i[0],i[1],i[2],i[3]):e.curves.setLinear(t)},toColor:function(e,t){if(8!=e.length)throw"Color hexidecimal length must be 8, recieved: "+e;return parseInt(e.substring(2*t,2*t+2),16)/255},getFloatArray:function(e,t,r){var i=e[t],o=new n.Float32Array(i.length),s=0,a=i.length;if(1==r)for(;a>s;s++)o[s]=i[s];else for(;a>s;s++)o[s]=i[s]*r;return o},getIntArray:function(e,t){for(var r=e[t],i=new n.Uint16Array(r.length),o=0,s=r.length;s>o;o++)i[o]=0|r[o];return i}},n.Atlas=function(e,t){this.textureLoader=t,this.pages=[],this.regions=[];var r=new n.AtlasReader(e),i=[];i.length=4;for(var o=null;;){var s=r.readLine();if(null===s)break;if(s=r.trim(s),s.length)if(o){var a=new n.AtlasRegion;a.name=s,a.page=o,a.rotate="true"==r.readValue(),r.readTuple(i);var h=parseInt(i[0]),c=parseInt(i[1]);r.readTuple(i);var u=parseInt(i[0]),f=parseInt(i[1]);a.u=h/o.width,a.v=c/o.height,a.rotate?(a.u2=(h+f)/o.width,a.v2=(c+u)/o.height):(a.u2=(h+u)/o.width,a.v2=(c+f)/o.height),a.x=h,a.y=c,a.width=Math.abs(u),a.height=Math.abs(f),4==r.readTuple(i)&&(a.splits=[parseInt(i[0]),parseInt(i[1]),parseInt(i[2]),parseInt(i[3])],4==r.readTuple(i)&&(a.pads=[parseInt(i[0]),parseInt(i[1]),parseInt(i[2]),parseInt(i[3])],r.readTuple(i))),a.originalWidth=parseInt(i[0]),a.originalHeight=parseInt(i[1]),r.readTuple(i),a.offsetX=parseInt(i[0]),a.offsetY=parseInt(i[1]),a.index=parseInt(r.readValue()),this.regions.push(a)}else{o=new n.AtlasPage,o.name=s,2==r.readTuple(i)&&(o.width=parseInt(i[0]),o.height=parseInt(i[1]),r.readTuple(i)),o.format=n.Atlas.Format[i[0]],r.readTuple(i),o.minFilter=n.Atlas.TextureFilter[i[0]],o.magFilter=n.Atlas.TextureFilter[i[1]];var d=r.readValue();o.uWrap=n.Atlas.TextureWrap.clampToEdge,o.vWrap=n.Atlas.TextureWrap.clampToEdge,"x"==d?o.uWrap=n.Atlas.TextureWrap.repeat:"y"==d?o.vWrap=n.Atlas.TextureWrap.repeat:"xy"==d&&(o.uWrap=o.vWrap=n.Atlas.TextureWrap.repeat),t.load(o,s,this),this.pages.push(o)}else o=null}},n.Atlas.prototype={findRegion:function(e){for(var t=this.regions,r=0,i=t.length;i>r;r++)if(t[r].name==e)return t[r];return null},dispose:function(){for(var e=this.pages,t=0,r=e.length;r>t;t++)this.textureLoader.unload(e[t].rendererObject)},updateUVs:function(e){for(var t=this.regions,r=0,i=t.length;i>r;r++){var n=t[r];n.page==e&&(n.u=n.x/e.width,n.v=n.y/e.height,n.rotate?(n.u2=(n.x+n.height)/e.width,n.v2=(n.y+n.width)/e.height):(n.u2=(n.x+n.width)/e.width,n.v2=(n.y+n.height)/e.height))}}},n.Atlas.Format={alpha:0,intensity:1,luminanceAlpha:2,rgb565:3,rgba4444:4,rgb888:5,rgba8888:6},n.Atlas.TextureFilter={nearest:0,linear:1,mipMap:2,mipMapNearestNearest:3,mipMapLinearNearest:4,mipMapNearestLinear:5,mipMapLinearLinear:6},n.Atlas.TextureWrap={mirroredRepeat:0,clampToEdge:1,repeat:2},n.AtlasPage=function(){},n.AtlasPage.prototype={name:null,format:null,minFilter:null,magFilter:null,uWrap:null,vWrap:null,rendererObject:null,width:0,height:0},n.AtlasRegion=function(){},n.AtlasRegion.prototype={page:null,name:null,x:0,y:0,width:0,height:0,u:0,v:0,u2:0,v2:0,offsetX:0,offsetY:0,originalWidth:0,originalHeight:0,index:0,rotate:!1,splits:null,pads:null},n.AtlasReader=function(e){this.lines=e.split(/\r\n|\r|\n/)},n.AtlasReader.prototype={index:0,trim:function(e){return e.replace(/^\s+|\s+$/g,"")},readLine:function(){return this.index>=this.lines.length?null:this.lines[this.index++]},readValue:function(){var e=this.readLine(),t=e.indexOf(":");if(-1==t)throw"Invalid line: "+e;return this.trim(e.substring(t+1))},readTuple:function(e){var t=this.readLine(),r=t.indexOf(":");if(-1==r)throw"Invalid line: "+t;for(var i=0,n=r+1;3>i;i++){var o=t.indexOf(",",n);if(-1==o)break;e[i]=this.trim(t.substr(n,o-n)),n=o+1}return e[i]=this.trim(t.substring(n)),i+1}},n.AtlasAttachmentLoader=function(e){this.atlas=e},n.AtlasAttachmentLoader.prototype={newRegionAttachment:function(e,t,r){var i=this.atlas.findRegion(r);if(!i)throw"Region not found in atlas: "+r+" (region attachment: "+t+")";
var o=new n.RegionAttachment(t);return o.rendererObject=i,o.setUVs(i.u,i.v,i.u2,i.v2,i.rotate),o.regionOffsetX=i.offsetX,o.regionOffsetY=i.offsetY,o.regionWidth=i.width,o.regionHeight=i.height,o.regionOriginalWidth=i.originalWidth,o.regionOriginalHeight=i.originalHeight,o},newMeshAttachment:function(e,t,r){var i=this.atlas.findRegion(r);if(!i)throw"Region not found in atlas: "+r+" (mesh attachment: "+t+")";var o=new n.MeshAttachment(t);return o.rendererObject=i,o.regionU=i.u,o.regionV=i.v,o.regionU2=i.u2,o.regionV2=i.v2,o.regionRotate=i.rotate,o.regionOffsetX=i.offsetX,o.regionOffsetY=i.offsetY,o.regionWidth=i.width,o.regionHeight=i.height,o.regionOriginalWidth=i.originalWidth,o.regionOriginalHeight=i.originalHeight,o},newSkinnedMeshAttachment:function(e,t,r){var i=this.atlas.findRegion(r);if(!i)throw"Region not found in atlas: "+r+" (skinned mesh attachment: "+t+")";var o=new n.SkinnedMeshAttachment(t);return o.rendererObject=i,o.regionU=i.u,o.regionV=i.v,o.regionU2=i.u2,o.regionV2=i.v2,o.regionRotate=i.rotate,o.regionOffsetX=i.offsetX,o.regionOffsetY=i.offsetY,o.regionWidth=i.width,o.regionHeight=i.height,o.regionOriginalWidth=i.originalWidth,o.regionOriginalHeight=i.originalHeight,o},newBoundingBoxAttachment:function(e,t){return new n.BoundingBoxAttachment(t)}},n.SkeletonBounds=function(){this.polygonPool=[],this.polygons=[],this.boundingBoxes=[]},n.SkeletonBounds.prototype={minX:0,minY:0,maxX:0,maxY:0,update:function(e,t){var r=e.slots,i=r.length,o=e.x,s=e.y,a=this.boundingBoxes,h=this.polygonPool,c=this.polygons;a.length=0;for(var u=0,f=c.length;f>u;u++)h.push(c[u]);c.length=0;for(var u=0;i>u;u++){var d=r[u],l=d.attachment;if(l.type==n.AttachmentType.boundingbox){a.push(l);var p,b=h.length;b>0?(p=h[b-1],h.splice(b-1,1)):p=[],c.push(p),p.length=l.vertices.length,l.computeWorldVertices(o,s,d.bone,p)}}t&&this.aabbCompute()},aabbCompute:function(){for(var e=this.polygons,t=Number.MAX_VALUE,r=Number.MAX_VALUE,i=Number.MIN_VALUE,n=Number.MIN_VALUE,o=0,s=e.length;s>o;o++)for(var a=e[o],h=0,c=a.length;c>h;h+=2){var u=a[h],f=a[h+1];t=Math.min(t,u),r=Math.min(r,f),i=Math.max(i,u),n=Math.max(n,f)}this.minX=t,this.minY=r,this.maxX=i,this.maxY=n},aabbContainsPoint:function(e,t){return e>=this.minX&&e<=this.maxX&&t>=this.minY&&t<=this.maxY},aabbIntersectsSegment:function(e,t,r,i){var n=this.minX,o=this.minY,s=this.maxX,a=this.maxY;if(n>=e&&n>=r||o>=t&&o>=i||e>=s&&r>=s||t>=a&&i>=a)return!1;var h=(i-t)/(r-e),c=h*(n-e)+t;if(c>o&&a>c)return!0;if(c=h*(s-e)+t,c>o&&a>c)return!0;var u=(o-t)/h+e;return u>n&&s>u?!0:(u=(a-t)/h+e,u>n&&s>u?!0:!1)},aabbIntersectsSkeleton:function(e){return this.minX<e.maxX&&this.maxX>e.minX&&this.minY<e.maxY&&this.maxY>e.minY},containsPoint:function(e,t){for(var r=this.polygons,i=0,n=r.length;n>i;i++)if(this.polygonContainsPoint(r[i],e,t))return this.boundingBoxes[i];return null},intersectsSegment:function(e,t,r,i){for(var n=this.polygons,o=0,s=n.length;s>o;o++)if(n[o].intersectsSegment(e,t,r,i))return this.boundingBoxes[o];return null},polygonContainsPoint:function(e,t,r){for(var i=e.length,n=i-2,o=!1,s=0;i>s;s+=2){var a=e[s+1],h=e[n+1];if(r>a&&h>=r||r>h&&a>=r){var c=e[s];c+(r-a)/(h-a)*(e[n]-c)<t&&(o=!o)}n=s}return o},polygonIntersectsSegment:function(e,t,r,i,n){for(var o=e.length,s=t-i,a=r-n,h=t*n-r*i,c=e[o-2],u=e[o-1],f=0;o>f;f+=2){var d=e[f],l=e[f+1],p=c*l-u*d,b=c-d,m=u-l,v=s*m-a*b,g=(h*b-s*p)/v;if((g>=c&&d>=g||g>=d&&c>=g)&&(g>=t&&i>=g||g>=i&&t>=g)){var y=(h*m-a*p)/v;if((y>=u&&l>=y||y>=l&&u>=y)&&(y>=r&&n>=y||y>=n&&r>=y))return!0}c=d,u=l}return!1},getPolygon:function(e){var t=this.boundingBoxes.indexOf(e);return-1==t?null:this.polygons[t]},getWidth:function(){return this.maxX-this.minX},getHeight:function(){return this.maxY-this.minY}},n.Bone.yDown=!0,i.AnimCache={},i.SpineTextureLoader=function(e,t){i.EventTarget.call(this),this.basePath=e,this.crossorigin=t,this.loadingCount=0},i.SpineTextureLoader.prototype=i.SpineTextureLoader,i.SpineTextureLoader.prototype.load=function(e,t){if(e.rendererObject=i.BaseTexture.fromImage(this.basePath+"/"+t,this.crossorigin),!e.rendererObject.hasLoaded){var r=this;++r.loadingCount,e.rendererObject.addEventListener("loaded",function(){--r.loadingCount,r.dispatchEvent({type:"loadedBaseTexture",content:r})})}},i.SpineTextureLoader.prototype.unload=function(e){e.destroy(!0)},i.Spine=function(e){if(i.DisplayObjectContainer.call(this),this.spineData=i.AnimCache[e],!this.spineData)throw new Error("Spine data must be preloaded using PIXI.SpineLoader or PIXI.AssetLoader: "+e);this.skeleton=new n.Skeleton(this.spineData),this.skeleton.updateWorldTransform(),this.stateData=new n.AnimationStateData(this.spineData),this.state=new n.AnimationState(this.stateData),this.slotContainers=[];for(var t=0,r=this.skeleton.drawOrder.length;r>t;t++){var o=this.skeleton.drawOrder[t],s=o.attachment,a=new i.DisplayObjectContainer;if(this.slotContainers.push(a),this.addChild(a),s instanceof n.RegionAttachment){var h=s.rendererObject.name,c=this.createSprite(o,s);o.currentSprite=c,o.currentSpriteName=h,a.addChild(c)}else{if(!(s instanceof n.MeshAttachment))continue;var u=this.createMesh(o,s);o.currentMesh=u,o.currentMeshName=s.name,a.addChild(u)}}this.autoUpdate=!0},i.Spine.prototype=Object.create(i.DisplayObjectContainer.prototype),i.Spine.prototype.constructor=i.Spine,Object.defineProperty(i.Spine.prototype,"autoUpdate",{get:function(){return this.updateTransform===i.Spine.prototype.autoUpdateTransform},set:function(e){this.updateTransform=e?i.Spine.prototype.autoUpdateTransform:i.DisplayObjectContainer.prototype.updateTransform}}),i.Spine.prototype.update=function(e){this.state.update(e),this.state.apply(this.skeleton),this.skeleton.updateWorldTransform();for(var t=this.skeleton.drawOrder,r=0,o=t.length;o>r;r++){var s=t[r],a=s.attachment,h=this.slotContainers[r];if(a){var c=a.type;if(c===n.AttachmentType.region){if(a.rendererObject&&(!s.currentSpriteName||s.currentSpriteName!==a.name)){var u=a.rendererObject.name;if(void 0!==s.currentSprite&&(s.currentSprite.visible=!1),s.sprites=s.sprites||{},void 0!==s.sprites[u])s.sprites[u].visible=!0;else{var f=this.createSprite(s,a);h.addChild(f)}s.currentSprite=s.sprites[u],s.currentSpriteName=u}var d=s.bone;h.position.x=d.worldX+a.x*d.m00+a.y*d.m01,h.position.y=d.worldY+a.x*d.m10+a.y*d.m11,h.scale.x=d.worldScaleX,h.scale.y=d.worldScaleY,h.rotation=-(s.bone.worldRotation*n.degRad),s.currentSprite.tint=i.rgb2hex([s.r,s.g,s.b])}else{if(c!==n.AttachmentType.skinnedmesh){h.visible=!1;continue}if(!s.currentMeshName||s.currentMeshName!==a.name){var l=a.name;if(void 0!==s.currentMesh&&(s.currentMesh.visible=!1),s.meshes=s.meshes||{},void 0!==s.meshes[l])s.meshes[l].visible=!0;else{var p=this.createMesh(s,a);h.addChild(p)}s.currentMesh=s.meshes[l],s.currentMeshName=l}a.computeWorldVertices(s.bone.skeleton.x,s.bone.skeleton.y,s,s.currentMesh.vertices)}h.visible=!0,h.alpha=s.a}else h.visible=!1}},i.Spine.prototype.autoUpdateTransform=function(){this.lastTime=this.lastTime||Date.now();var e=.001*(Date.now()-this.lastTime);this.lastTime=Date.now(),this.update(e),i.DisplayObjectContainer.prototype.updateTransform.call(this)},i.Spine.prototype.createSprite=function(e,t){var r=t.rendererObject,o=r.page.rendererObject,s=new i.Rectangle(r.x,r.y,r.rotate?r.height:r.width,r.rotate?r.width:r.height),a=new i.Texture(o,s),h=new i.Sprite(a),c=r.rotate?.5*Math.PI:0;return h.scale.set(r.width/r.originalWidth,r.height/r.originalHeight),h.rotation=c-t.rotation*n.degRad,h.anchor.x=h.anchor.y=.5,e.sprites=e.sprites||{},e.sprites[r.name]=h,h},i.Spine.prototype.createMesh=function(e,t){var r=t.rendererObject,n=r.page.rendererObject,o=new i.Texture(n),s=new i.Strip(o);return s.drawMode=i.Strip.DrawModes.TRIANGLES,s.canvasPadding=1.5,s.vertices=new i.Float32Array(t.uvs.length),s.uvs=t.uvs,s.indices=t.triangles,e.meshes=e.meshes||{},e.meshes[t.name]=s,s},i.BaseTextureCache={},i.BaseTextureCacheIdGenerator=0,i.BaseTexture=function(e,t){if(this.resolution=1,this.width=100,this.height=100,this.scaleMode=t||i.scaleModes.DEFAULT,this.hasLoaded=!1,this.source=e,this._UID=i._UID++,this.premultipliedAlpha=!0,this._glTextures=[],this.mipmap=!1,this._dirty=[!0,!0,!0,!0],e){if((this.source.complete||this.source.getContext)&&this.source.width&&this.source.height)this.hasLoaded=!0,this.width=this.source.naturalWidth||this.source.width,this.height=this.source.naturalHeight||this.source.height,this.dirty();else{var r=this;this.source.onload=function(){r.hasLoaded=!0,r.width=r.source.naturalWidth||r.source.width,r.height=r.source.naturalHeight||r.source.height,r.dirty(),r.dispatchEvent({type:"loaded",content:r})},this.source.onerror=function(){r.dispatchEvent({type:"error",content:r})}}this.imageUrl=null,this._powerOf2=!1}},i.BaseTexture.prototype.constructor=i.BaseTexture,i.EventTarget.mixin(i.BaseTexture.prototype),i.BaseTexture.prototype.destroy=function(){this.imageUrl?(delete i.BaseTextureCache[this.imageUrl],delete i.TextureCache[this.imageUrl],this.imageUrl=null,navigator.isCocoonJS||(this.source.src="")):this.source&&this.source._pixiId&&delete i.BaseTextureCache[this.source._pixiId],this.source=null,this.unloadFromGPU()},i.BaseTexture.prototype.updateSourceImage=function(e){this.hasLoaded=!1,this.source.src=null,this.source.src=e},i.BaseTexture.prototype.dirty=function(){for(var e=0;e<this._glTextures.length;e++)this._dirty[e]=!0},i.BaseTexture.prototype.unloadFromGPU=function(){this.dirty();for(var e=this._glTextures.length-1;e>=0;e--){var t=this._glTextures[e],r=i.glContexts[e];r&&t&&r.deleteTexture(t)}this._glTextures.length=0,this.dirty()},i.BaseTexture.fromImage=function(e,t,r){var n=i.BaseTextureCache[e];if(void 0===t&&-1===e.indexOf("data:")&&(t=!0),!n){var o=new Image;t&&(o.crossOrigin=""),o.src=e,n=new i.BaseTexture(o,r),n.imageUrl=e,i.BaseTextureCache[e]=n,-1!==e.indexOf(i.RETINA_PREFIX+".")&&(n.resolution=2)}return n},i.BaseTexture.fromCanvas=function(e,t){e._pixiId||(e._pixiId="canvas_"+i.TextureCacheIdGenerator++);var r=i.BaseTextureCache[e._pixiId];return r||(r=new i.BaseTexture(e,t),i.BaseTextureCache[e._pixiId]=r),r},i.TextureCache={},i.FrameCache={},i.TextureCacheIdGenerator=0,i.Texture=function(e,t,r,n){this.noFrame=!1,t||(this.noFrame=!0,t=new i.Rectangle(0,0,1,1)),e instanceof i.Texture&&(e=e.baseTexture),this.baseTexture=e,this.frame=t,this.trim=n,this.valid=!1,this.requiresUpdate=!1,this._uvs=null,this.width=0,this.height=0,this.crop=r||new i.Rectangle(0,0,1,1),e.hasLoaded?(this.noFrame&&(t=new i.Rectangle(0,0,e.width,e.height)),this.setFrame(t)):e.addEventListener("loaded",this.onBaseTextureLoaded.bind(this))},i.Texture.prototype.constructor=i.Texture,i.EventTarget.mixin(i.Texture.prototype),i.Texture.prototype.onBaseTextureLoaded=function(){var e=this.baseTexture;e.removeEventListener("loaded",this.onLoaded),this.noFrame&&(this.frame=new i.Rectangle(0,0,e.width,e.height)),this.setFrame(this.frame),this.dispatchEvent({type:"update",content:this})},i.Texture.prototype.destroy=function(e){e&&this.baseTexture.destroy(),this.valid=!1},i.Texture.prototype.setFrame=function(e){if(this.noFrame=!1,this.frame=e,this.width=e.width,this.height=e.height,this.crop.x=e.x,this.crop.y=e.y,this.crop.width=e.width,this.crop.height=e.height,!this.trim&&(e.x+e.width>this.baseTexture.width||e.y+e.height>this.baseTexture.height))throw new Error("Texture Error: frame does not fit inside the base Texture dimensions "+this);this.valid=e&&e.width&&e.height&&this.baseTexture.source&&this.baseTexture.hasLoaded,this.trim&&(this.width=this.trim.width,this.height=this.trim.height,this.frame.width=this.trim.width,this.frame.height=this.trim.height),this.valid&&this._updateUvs()},i.Texture.prototype._updateUvs=function(){this._uvs||(this._uvs=new i.TextureUvs);var e=this.crop,t=this.baseTexture.width,r=this.baseTexture.height;this._uvs.x0=e.x/t,this._uvs.y0=e.y/r,this._uvs.x1=(e.x+e.width)/t,this._uvs.y1=e.y/r,this._uvs.x2=(e.x+e.width)/t,this._uvs.y2=(e.y+e.height)/r,this._uvs.x3=e.x/t,this._uvs.y3=(e.y+e.height)/r},i.Texture.fromImage=function(e,t,r){var n=i.TextureCache[e];return n||(n=new i.Texture(i.BaseTexture.fromImage(e,t,r)),i.TextureCache[e]=n),n},i.Texture.fromFrame=function(e){var t=i.TextureCache[e];if(!t)throw new Error('The frameId "'+e+'" does not exist in the texture cache ');return t},i.Texture.fromCanvas=function(e,t){var r=i.BaseTexture.fromCanvas(e,t);return new i.Texture(r)},i.Texture.addTextureToCache=function(e,t){i.TextureCache[t]=e},i.Texture.removeTextureFromCache=function(e){var t=i.TextureCache[e];return delete i.TextureCache[e],delete i.BaseTextureCache[e],t},i.TextureUvs=function(){this.x0=0,this.y0=0,this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.x3=0,this.y3=0},i.Texture.emptyTexture=new i.Texture(new i.BaseTexture),i.RenderTexture=function(e,t,r,n,o){if(this.width=e||100,this.height=t||100,this.resolution=o||1,this.frame=new i.Rectangle(0,0,this.width*this.resolution,this.height*this.resolution),this.crop=new i.Rectangle(0,0,this.width*this.resolution,this.height*this.resolution),this.baseTexture=new i.BaseTexture,this.baseTexture.width=this.width*this.resolution,this.baseTexture.height=this.height*this.resolution,this.baseTexture._glTextures=[],this.baseTexture.resolution=this.resolution,this.baseTexture.scaleMode=n||i.scaleModes.DEFAULT,this.baseTexture.hasLoaded=!0,i.Texture.call(this,this.baseTexture,new i.Rectangle(0,0,this.width,this.height)),this.renderer=r||i.defaultRenderer,this.renderer.type===i.WEBGL_RENDERER){var s=this.renderer.gl;this.baseTexture._dirty[s.id]=!1,this.textureBuffer=new i.FilterTexture(s,this.width*this.resolution,this.height*this.resolution,this.baseTexture.scaleMode),this.baseTexture._glTextures[s.id]=this.textureBuffer.texture,this.render=this.renderWebGL,this.projection=new i.Point(.5*this.width,.5*-this.height)}else this.render=this.renderCanvas,this.textureBuffer=new i.CanvasBuffer(this.width*this.resolution,this.height*this.resolution),this.baseTexture.source=this.textureBuffer.canvas;this.valid=!0,this._updateUvs()},i.RenderTexture.prototype=Object.create(i.Texture.prototype),i.RenderTexture.prototype.constructor=i.RenderTexture,i.RenderTexture.prototype.resize=function(e,t,r){(e!==this.width||t!==this.height)&&(this.valid=e>0&&t>0,this.width=this.frame.width=this.crop.width=e,this.height=this.frame.height=this.crop.height=t,r&&(this.baseTexture.width=this.width,this.baseTexture.height=this.height),this.renderer.type===i.WEBGL_RENDERER&&(this.projection.x=this.width/2,this.projection.y=-this.height/2),this.valid&&this.textureBuffer.resize(this.width*this.resolution,this.height*this.resolution))},i.RenderTexture.prototype.clear=function(){this.valid&&(this.renderer.type===i.WEBGL_RENDERER&&this.renderer.gl.bindFramebuffer(this.renderer.gl.FRAMEBUFFER,this.textureBuffer.frameBuffer),this.textureBuffer.clear())},i.RenderTexture.prototype.renderWebGL=function(e,t,r){if(this.valid){var i=e.worldTransform;i.identity(),i.translate(0,2*this.projection.y),t&&i.append(t),i.scale(1,-1),e.worldAlpha=1;for(var n=e.children,o=0,s=n.length;s>o;o++)n[o].updateTransform();var a=this.renderer.gl;a.viewport(0,0,this.width*this.resolution,this.height*this.resolution),a.bindFramebuffer(a.FRAMEBUFFER,this.textureBuffer.frameBuffer),r&&this.textureBuffer.clear(),this.renderer.spriteBatch.dirty=!0,this.renderer.renderDisplayObject(e,this.projection,this.textureBuffer.frameBuffer),this.renderer.spriteBatch.dirty=!0}},i.RenderTexture.prototype.renderCanvas=function(e,t,r){if(this.valid){var i=e.worldTransform;i.identity(),t&&i.append(t),e.worldAlpha=1;for(var n=e.children,o=0,s=n.length;s>o;o++)n[o].updateTransform();r&&this.textureBuffer.clear();var a=this.textureBuffer.context,h=this.renderer.resolution;this.renderer.resolution=this.resolution,this.renderer.renderDisplayObject(e,a),this.renderer.resolution=h}},i.RenderTexture.prototype.getImage=function(){var e=new Image;return e.src=this.getBase64(),e},i.RenderTexture.prototype.getBase64=function(){return this.getCanvas().toDataURL()},i.RenderTexture.prototype.getCanvas=function(){if(this.renderer.type===i.WEBGL_RENDERER){var e=this.renderer.gl,t=this.textureBuffer.width,r=this.textureBuffer.height,n=new Uint8Array(4*t*r);e.bindFramebuffer(e.FRAMEBUFFER,this.textureBuffer.frameBuffer),e.readPixels(0,0,t,r,e.RGBA,e.UNSIGNED_BYTE,n),e.bindFramebuffer(e.FRAMEBUFFER,null);var o=new i.CanvasBuffer(t,r),s=o.context.getImageData(0,0,t,r);return s.data.set(n),o.context.putImageData(s,0,0),o.canvas}return this.textureBuffer.canvas},i.RenderTexture.tempMatrix=new i.Matrix,i.VideoTexture=function(e,t){if(!e)throw new Error("No video source element specified.");(e.readyState===e.HAVE_ENOUGH_DATA||e.readyState===e.HAVE_FUTURE_DATA)&&e.width&&e.height&&(e.complete=!0),i.BaseTexture.call(this,e,t),this.autoUpdate=!1,this.updateBound=this._onUpdate.bind(this),e.complete||(this._onCanPlay=this.onCanPlay.bind(this),e.addEventListener("canplay",this._onCanPlay),e.addEventListener("canplaythrough",this._onCanPlay),e.addEventListener("play",this.onPlayStart.bind(this)),e.addEventListener("pause",this.onPlayStop.bind(this)))},i.VideoTexture.prototype=Object.create(i.BaseTexture.prototype),i.VideoTexture.constructor=i.VideoTexture,i.VideoTexture.prototype._onUpdate=function(){this.autoUpdate&&(window.requestAnimationFrame(this.updateBound),this.dirty())},i.VideoTexture.prototype.onPlayStart=function(){this.autoUpdate||(window.requestAnimationFrame(this.updateBound),this.autoUpdate=!0)},i.VideoTexture.prototype.onPlayStop=function(){this.autoUpdate=!1},i.VideoTexture.prototype.onCanPlay=function(){"canplaythrough"===event.type&&(this.hasLoaded=!0,this.source&&(this.source.removeEventListener("canplay",this._onCanPlay),this.source.removeEventListener("canplaythrough",this._onCanPlay),this.width=this.source.videoWidth,this.height=this.source.videoHeight,this.__loaded||(this.__loaded=!0,this.dispatchEvent({type:"loaded",content:this}))))},i.VideoTexture.prototype.destroy=function(){this.source&&this.source._pixiId&&(i.BaseTextureCache[this.source._pixiId]=null,delete i.BaseTextureCache[this.source._pixiId],this.source._pixiId=null,delete this.source._pixiId),i.BaseTexture.prototype.destroy.call(this)},i.VideoTexture.baseTextureFromVideo=function(e,t){e._pixiId||(e._pixiId="video_"+i.TextureCacheIdGenerator++);var r=i.BaseTextureCache[e._pixiId];return r||(r=new i.VideoTexture(e,t),i.BaseTextureCache[e._pixiId]=r),r},i.VideoTexture.textureFromVideo=function(e,t){var r=i.VideoTexture.baseTextureFromVideo(e,t);return new i.Texture(r)},i.VideoTexture.fromUrl=function(e,t){var r=document.createElement("video");return r.src=e,r.autoPlay=!0,r.play(),i.VideoTexture.textureFromVideo(r,t)},i.AssetLoader=function(e,t){this.assetURLs=e,this.crossorigin=t,this.loadersByType={jpg:i.ImageLoader,jpeg:i.ImageLoader,png:i.ImageLoader,gif:i.ImageLoader,webp:i.ImageLoader,json:i.JsonLoader,atlas:i.AtlasLoader,anim:i.SpineLoader,xml:i.BitmapFontLoader,fnt:i.BitmapFontLoader}},i.EventTarget.mixin(i.AssetLoader.prototype),i.AssetLoader.prototype.constructor=i.AssetLoader,i.AssetLoader.prototype._getDataType=function(e){var t="data:",r=e.slice(0,t.length).toLowerCase();if(r===t){var i=e.slice(t.length),n=i.indexOf(",");if(-1===n)return null;var o=i.slice(0,n).split(";")[0];return o&&"text/plain"!==o.toLowerCase()?o.split("/").pop().toLowerCase():"txt"}return null},i.AssetLoader.prototype.load=function(){function e(e){t.onAssetLoaded(e.data.content)}var t=this;this.loadCount=this.assetURLs.length;for(var r=0;r<this.assetURLs.length;r++){var i=this.assetURLs[r],n=this._getDataType(i);n||(n=i.split("?").shift().split(".").pop().toLowerCase());var o=this.loadersByType[n];if(!o)throw new Error(n+" is an unsupported file type");var s=new o(i,this.crossorigin);s.on("loaded",e),s.load()}},i.AssetLoader.prototype.onAssetLoaded=function(e){this.loadCount--,this.emit("onProgress",{content:this,loader:e}),this.onProgress&&this.onProgress(e),this.loadCount||(this.emit("onComplete",{content:this}),this.onComplete&&this.onComplete())},i.JsonLoader=function(e,t){this.url=e,this.crossorigin=t,this.baseUrl=e.replace(/[^\/]*$/,""),this.loaded=!1},i.JsonLoader.prototype.constructor=i.JsonLoader,i.EventTarget.mixin(i.JsonLoader.prototype),i.JsonLoader.prototype.load=function(){window.XDomainRequest&&this.crossorigin?(this.ajaxRequest=new window.XDomainRequest,this.ajaxRequest.timeout=3e3,this.ajaxRequest.onerror=this.onError.bind(this),this.ajaxRequest.ontimeout=this.onError.bind(this),this.ajaxRequest.onprogress=function(){},this.ajaxRequest.onload=this.onJSONLoaded.bind(this)):(this.ajaxRequest=window.XMLHttpRequest?new window.XMLHttpRequest:new window.ActiveXObject("Microsoft.XMLHTTP"),this.ajaxRequest.onreadystatechange=this.onReadyStateChanged.bind(this)),this.ajaxRequest.open("GET",this.url,!0),this.ajaxRequest.send()},i.JsonLoader.prototype.onReadyStateChanged=function(){4!==this.ajaxRequest.readyState||200!==this.ajaxRequest.status&&-1!==window.location.href.indexOf("http")||this.onJSONLoaded()},i.JsonLoader.prototype.onJSONLoaded=function(){if(!this.ajaxRequest.responseText)return void this.onError();if(this.json=JSON.parse(this.ajaxRequest.responseText),this.json.frames){var e=this.baseUrl+this.json.meta.image,t=new i.ImageLoader(e,this.crossorigin),r=this.json.frames;this.texture=t.texture.baseTexture,t.addEventListener("loaded",this.onLoaded.bind(this));for(var o in r){var s=r[o].frame;if(s){var a=new i.Rectangle(s.x,s.y,s.w,s.h),h=a.clone(),c=null;if(r[o].trimmed){var u=r[o].sourceSize,f=r[o].spriteSourceSize;c=new i.Rectangle(f.x,f.y,u.w,u.h)}i.TextureCache[o]=new i.Texture(this.texture,a,h,c)}}t.load()}else if(this.json.bones)if(i.AnimCache[this.url])this.onLoaded();else{var d=this.url.substr(0,this.url.lastIndexOf("."))+".atlas",l=new i.JsonLoader(d,this.crossorigin),p=this;l.onJSONLoaded=function(){if(!this.ajaxRequest.responseText)return void this.onError();var e=new i.SpineTextureLoader(this.url.substring(0,this.url.lastIndexOf("/"))),t=new n.Atlas(this.ajaxRequest.responseText,e),r=new n.AtlasAttachmentLoader(t),o=new n.SkeletonJson(r),s=o.readSkeletonData(p.json);i.AnimCache[p.url]=s,p.spine=s,p.spineAtlas=t,p.spineAtlasLoader=l,e.loadingCount>0?e.addEventListener("loadedBaseTexture",function(e){e.content.content.loadingCount<=0&&p.onLoaded()}):p.onLoaded()},l.load()}else this.onLoaded()},i.JsonLoader.prototype.onLoaded=function(){this.loaded=!0,this.dispatchEvent({type:"loaded",content:this})},i.JsonLoader.prototype.onError=function(){this.dispatchEvent({type:"error",content:this})},i.AtlasLoader=function(e,t){this.url=e,this.baseUrl=e.replace(/[^\/]*$/,""),this.crossorigin=t,this.loaded=!1},i.AtlasLoader.constructor=i.AtlasLoader,i.EventTarget.mixin(i.AtlasLoader.prototype),i.AtlasLoader.prototype.load=function(){this.ajaxRequest=new i.AjaxRequest,this.ajaxRequest.onreadystatechange=this.onAtlasLoaded.bind(this),this.ajaxRequest.open("GET",this.url,!0),this.ajaxRequest.overrideMimeType&&this.ajaxRequest.overrideMimeType("application/json"),this.ajaxRequest.send(null)},i.AtlasLoader.prototype.onAtlasLoaded=function(){if(4===this.ajaxRequest.readyState)if(200===this.ajaxRequest.status||-1===window.location.href.indexOf("http")){this.atlas={meta:{image:[]},frames:[]};var e=this.ajaxRequest.responseText.split(/\r?\n/),t=-3,r=0,n=null,o=!1,s=0,a=0,h=this.onLoaded.bind(this);for(s=0;s<e.length;s++)if(e[s]=e[s].replace(/^\s+|\s+$/g,""),""===e[s]&&(o=s+1),e[s].length>0){if(o===s)this.atlas.meta.image.push(e[s]),r=this.atlas.meta.image.length-1,this.atlas.frames.push({}),t=-3;else if(t>0)if(t%7===1)null!=n&&(this.atlas.frames[r][n.name]=n),n={name:e[s],frame:{}};else{var c=e[s].split(" ");if(t%7===3)n.frame.x=Number(c[1].replace(",","")),n.frame.y=Number(c[2]);else if(t%7===4)n.frame.w=Number(c[1].replace(",","")),n.frame.h=Number(c[2]);else if(t%7===5){var u={x:0,y:0,w:Number(c[1].replace(",","")),h:Number(c[2])};u.w>n.frame.w||u.h>n.frame.h?(n.trimmed=!0,n.realSize=u):n.trimmed=!1}}t++}if(null!=n&&(this.atlas.frames[r][n.name]=n),this.atlas.meta.image.length>0){for(this.images=[],a=0;a<this.atlas.meta.image.length;a++){var f=this.baseUrl+this.atlas.meta.image[a],d=this.atlas.frames[a];this.images.push(new i.ImageLoader(f,this.crossorigin));for(s in d){var l=d[s].frame;l&&(i.TextureCache[s]=new i.Texture(this.images[a].texture.baseTexture,{x:l.x,y:l.y,width:l.w,height:l.h}),d[s].trimmed&&(i.TextureCache[s].realSize=d[s].realSize,i.TextureCache[s].trim.x=0,i.TextureCache[s].trim.y=0))}}for(this.currentImageId=0,a=0;a<this.images.length;a++)this.images[a].on("loaded",h);this.images[this.currentImageId].load()}else this.onLoaded()}else this.onError()},i.AtlasLoader.prototype.onLoaded=function(){this.images.length-1>this.currentImageId?(this.currentImageId++,this.images[this.currentImageId].load()):(this.loaded=!0,this.emit("loaded",{content:this}))},i.AtlasLoader.prototype.onError=function(){this.emit("error",{content:this})},i.SpriteSheetLoader=function(e,t){this.url=e,this.crossorigin=t,this.baseUrl=e.replace(/[^\/]*$/,""),this.texture=null,this.frames={}},i.SpriteSheetLoader.prototype.constructor=i.SpriteSheetLoader,i.EventTarget.mixin(i.SpriteSheetLoader.prototype),i.SpriteSheetLoader.prototype.load=function(){var e=this,t=new i.JsonLoader(this.url,this.crossorigin);t.on("loaded",function(t){e.json=t.data.content.json,e.onLoaded()}),t.load()},i.SpriteSheetLoader.prototype.onLoaded=function(){this.emit("loaded",{content:this})},i.ImageLoader=function(e,t){this.texture=i.Texture.fromImage(e,t),this.frames=[]},i.ImageLoader.prototype.constructor=i.ImageLoader,i.EventTarget.mixin(i.ImageLoader.prototype),i.ImageLoader.prototype.load=function(){this.texture.baseTexture.hasLoaded?this.onLoaded():this.texture.baseTexture.on("loaded",this.onLoaded.bind(this))},i.ImageLoader.prototype.onLoaded=function(){this.emit("loaded",{content:this})},i.ImageLoader.prototype.loadFramedSpriteSheet=function(e,t,r){this.frames=[];for(var n=Math.floor(this.texture.width/e),o=Math.floor(this.texture.height/t),s=0,a=0;o>a;a++)for(var h=0;n>h;h++,s++){var c=new i.Texture(this.texture.baseTexture,{x:h*e,y:a*t,width:e,height:t});this.frames.push(c),r&&(i.TextureCache[r+"-"+s]=c)}this.load()},i.BitmapFontLoader=function(e,t){this.url=e,this.crossorigin=t,this.baseUrl=e.replace(/[^\/]*$/,""),this.texture=null},i.BitmapFontLoader.prototype.constructor=i.BitmapFontLoader,i.EventTarget.mixin(i.BitmapFontLoader.prototype),i.BitmapFontLoader.prototype.load=function(){this.ajaxRequest=new i.AjaxRequest,this.ajaxRequest.onreadystatechange=this.onXMLLoaded.bind(this),this.ajaxRequest.open("GET",this.url,!0),this.ajaxRequest.overrideMimeType&&this.ajaxRequest.overrideMimeType("application/xml"),this.ajaxRequest.send(null)},i.BitmapFontLoader.prototype.onXMLLoaded=function(){if(4===this.ajaxRequest.readyState&&(200===this.ajaxRequest.status||-1===window.location.protocol.indexOf("http"))){var e=this.ajaxRequest.responseXML;if(!e||/MSIE 9/i.test(navigator.userAgent)||navigator.isCocoonJS)if("function"==typeof window.DOMParser){var t=new DOMParser;e=t.parseFromString(this.ajaxRequest.responseText,"text/xml")}else{var r=document.createElement("div");r.innerHTML=this.ajaxRequest.responseText,e=r}var n=this.baseUrl+e.getElementsByTagName("page")[0].getAttribute("file"),o=new i.ImageLoader(n,this.crossorigin);this.texture=o.texture.baseTexture;var s={},a=e.getElementsByTagName("info")[0],h=e.getElementsByTagName("common")[0];s.font=a.getAttribute("face"),s.size=parseInt(a.getAttribute("size"),10),s.lineHeight=parseInt(h.getAttribute("lineHeight"),10),s.chars={};for(var c=e.getElementsByTagName("char"),u=0;u<c.length;u++){var f=parseInt(c[u].getAttribute("id"),10),d=new i.Rectangle(parseInt(c[u].getAttribute("x"),10),parseInt(c[u].getAttribute("y"),10),parseInt(c[u].getAttribute("width"),10),parseInt(c[u].getAttribute("height"),10));s.chars[f]={xOffset:parseInt(c[u].getAttribute("xoffset"),10),yOffset:parseInt(c[u].getAttribute("yoffset"),10),xAdvance:parseInt(c[u].getAttribute("xadvance"),10),kerning:{},texture:i.TextureCache[f]=new i.Texture(this.texture,d)}}var l=e.getElementsByTagName("kerning");for(u=0;u<l.length;u++){var p=parseInt(l[u].getAttribute("first"),10),b=parseInt(l[u].getAttribute("second"),10),m=parseInt(l[u].getAttribute("amount"),10);s.chars[b].kerning[p]=m}i.BitmapText.fonts[s.font]=s,o.addEventListener("loaded",this.onLoaded.bind(this)),o.load()}},i.BitmapFontLoader.prototype.onLoaded=function(){this.emit("loaded",{content:this})},i.SpineLoader=function(e,t){this.url=e,this.crossorigin=t,this.loaded=!1},i.SpineLoader.prototype.constructor=i.SpineLoader,i.EventTarget.mixin(i.SpineLoader.prototype),i.SpineLoader.prototype.load=function(){var e=this,t=new i.JsonLoader(this.url,this.crossorigin);t.on("loaded",function(t){e.json=t.data.content.json,e.onLoaded()}),t.load()},i.SpineLoader.prototype.onLoaded=function(){this.loaded=!0,this.emit("loaded",{content:this})},i.AbstractFilter=function(e,t){this.passes=[this],this.shaders=[],this.dirty=!0,this.padding=0,this.uniforms=t||{},this.fragmentSrc=e||[]},i.AbstractFilter.prototype.constructor=i.AbstractFilter,i.AbstractFilter.prototype.syncUniforms=function(){for(var e=0,t=this.shaders.length;t>e;e++)this.shaders[e].dirty=!0},i.AlphaMaskFilter=function(e){i.AbstractFilter.call(this),this.passes=[this],e.baseTexture._powerOf2=!0,this.uniforms={mask:{type:"sampler2D",value:e},mapDimensions:{type:"2f",value:{x:1,y:5112}},dimensions:{type:"4fv",value:[0,0,0,0]}},e.baseTexture.hasLoaded?(this.uniforms.mask.value.x=e.width,this.uniforms.mask.value.y=e.height):(this.boundLoadedFunction=this.onTextureLoaded.bind(this),e.baseTexture.on("loaded",this.boundLoadedFunction)),this.fragmentSrc=["precision mediump float;","varying vec2 vTextureCoord;","varying vec4 vColor;","uniform sampler2D mask;","uniform sampler2D uSampler;","uniform vec2 offset;","uniform vec4 dimensions;","uniform vec2 mapDimensions;","void main(void) {","   vec2 mapCords = vTextureCoord.xy;","   mapCords += (dimensions.zw + offset)/ dimensions.xy ;","   mapCords.y *= -1.0;","   mapCords.y += 1.0;","   mapCords *= dimensions.xy / mapDimensions;","   vec4 original =  texture2D(uSampler, vTextureCoord);","   float maskAlpha =  texture2D(mask, mapCords).r;","   original *= maskAlpha;","   gl_FragColor =  original;","}"]},i.AlphaMaskFilter.prototype=Object.create(i.AbstractFilter.prototype),i.AlphaMaskFilter.prototype.constructor=i.AlphaMaskFilter,i.AlphaMaskFilter.prototype.onTextureLoaded=function(){this.uniforms.mapDimensions.value.x=this.uniforms.mask.value.width,this.uniforms.mapDimensions.value.y=this.uniforms.mask.value.height,this.uniforms.mask.value.baseTexture.off("loaded",this.boundLoadedFunction)},Object.defineProperty(i.AlphaMaskFilter.prototype,"map",{get:function(){return this.uniforms.mask.value},set:function(e){this.uniforms.mask.value=e}}),i.ColorMatrixFilter=function(){i.AbstractFilter.call(this),this.passes=[this],this.uniforms={matrix:{type:"mat4",value:[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}},this.fragmentSrc=["precision mediump float;","varying vec2 vTextureCoord;","varying vec4 vColor;","uniform float invert;","uniform mat4 matrix;","uniform sampler2D uSampler;","void main(void) {","   gl_FragColor = texture2D(uSampler, vTextureCoord) * matrix;","}"]},i.ColorMatrixFilter.prototype=Object.create(i.AbstractFilter.prototype),i.ColorMatrixFilter.prototype.constructor=i.ColorMatrixFilter,Object.defineProperty(i.ColorMatrixFilter.prototype,"matrix",{get:function(){return this.uniforms.matrix.value},set:function(e){this.uniforms.matrix.value=e}}),i.GrayFilter=function(){i.AbstractFilter.call(this),this.passes=[this],this.uniforms={gray:{type:"1f",value:1}},this.fragmentSrc=["precision mediump float;","varying vec2 vTextureCoord;","varying vec4 vColor;","uniform sampler2D uSampler;","uniform float gray;","void main(void) {","   gl_FragColor = texture2D(uSampler, vTextureCoord);","   gl_FragColor.rgb = mix(gl_FragColor.rgb, vec3(0.2126*gl_FragColor.r + 0.7152*gl_FragColor.g + 0.0722*gl_FragColor.b), gray);","}"]},i.GrayFilter.prototype=Object.create(i.AbstractFilter.prototype),i.GrayFilter.prototype.constructor=i.GrayFilter,Object.defineProperty(i.GrayFilter.prototype,"gray",{get:function(){return this.uniforms.gray.value
},set:function(e){this.uniforms.gray.value=e}}),i.DisplacementFilter=function(e){i.AbstractFilter.call(this),this.passes=[this],e.baseTexture._powerOf2=!0,this.uniforms={displacementMap:{type:"sampler2D",value:e},scale:{type:"2f",value:{x:30,y:30}},offset:{type:"2f",value:{x:0,y:0}},mapDimensions:{type:"2f",value:{x:1,y:5112}},dimensions:{type:"4fv",value:[0,0,0,0]}},e.baseTexture.hasLoaded?(this.uniforms.mapDimensions.value.x=e.width,this.uniforms.mapDimensions.value.y=e.height):(this.boundLoadedFunction=this.onTextureLoaded.bind(this),e.baseTexture.on("loaded",this.boundLoadedFunction)),this.fragmentSrc=["precision mediump float;","varying vec2 vTextureCoord;","varying vec4 vColor;","uniform sampler2D displacementMap;","uniform sampler2D uSampler;","uniform vec2 scale;","uniform vec2 offset;","uniform vec4 dimensions;","uniform vec2 mapDimensions;","void main(void) {","   vec2 mapCords = vTextureCoord.xy;","   mapCords += (dimensions.zw + offset)/ dimensions.xy ;","   mapCords.y *= -1.0;","   mapCords.y += 1.0;","   vec2 matSample = texture2D(displacementMap, mapCords).xy;","   matSample -= 0.5;","   matSample *= scale;","   matSample /= mapDimensions;","   gl_FragColor = texture2D(uSampler, vec2(vTextureCoord.x + matSample.x, vTextureCoord.y + matSample.y));","   gl_FragColor.rgb = mix( gl_FragColor.rgb, gl_FragColor.rgb, 1.0);","   vec2 cord = vTextureCoord;","}"]},i.DisplacementFilter.prototype=Object.create(i.AbstractFilter.prototype),i.DisplacementFilter.prototype.constructor=i.DisplacementFilter,i.DisplacementFilter.prototype.onTextureLoaded=function(){this.uniforms.mapDimensions.value.x=this.uniforms.displacementMap.value.width,this.uniforms.mapDimensions.value.y=this.uniforms.displacementMap.value.height,this.uniforms.displacementMap.value.baseTexture.off("loaded",this.boundLoadedFunction)},Object.defineProperty(i.DisplacementFilter.prototype,"map",{get:function(){return this.uniforms.displacementMap.value},set:function(e){this.uniforms.displacementMap.value=e}}),Object.defineProperty(i.DisplacementFilter.prototype,"scale",{get:function(){return this.uniforms.scale.value},set:function(e){this.uniforms.scale.value=e}}),Object.defineProperty(i.DisplacementFilter.prototype,"offset",{get:function(){return this.uniforms.offset.value},set:function(e){this.uniforms.offset.value=e}}),i.PixelateFilter=function(){i.AbstractFilter.call(this),this.passes=[this],this.uniforms={invert:{type:"1f",value:0},dimensions:{type:"4fv",value:new i.Float32Array([1e4,100,10,10])},pixelSize:{type:"2f",value:{x:10,y:10}}},this.fragmentSrc=["precision mediump float;","varying vec2 vTextureCoord;","varying vec4 vColor;","uniform vec2 testDim;","uniform vec4 dimensions;","uniform vec2 pixelSize;","uniform sampler2D uSampler;","void main(void) {","   vec2 coord = vTextureCoord;","   vec2 size = dimensions.xy/pixelSize;","   vec2 color = floor( ( vTextureCoord * size ) ) / size + pixelSize/dimensions.xy * 0.5;","   gl_FragColor = texture2D(uSampler, color);","}"]},i.PixelateFilter.prototype=Object.create(i.AbstractFilter.prototype),i.PixelateFilter.prototype.constructor=i.PixelateFilter,Object.defineProperty(i.PixelateFilter.prototype,"size",{get:function(){return this.uniforms.pixelSize.value},set:function(e){this.dirty=!0,this.uniforms.pixelSize.value=e}}),i.BlurXFilter=function(){i.AbstractFilter.call(this),this.passes=[this],this.uniforms={blur:{type:"1f",value:1/512}},this.fragmentSrc=["precision mediump float;","varying vec2 vTextureCoord;","varying vec4 vColor;","uniform float blur;","uniform sampler2D uSampler;","void main(void) {","   vec4 sum = vec4(0.0);","   sum += texture2D(uSampler, vec2(vTextureCoord.x - 4.0*blur, vTextureCoord.y)) * 0.05;","   sum += texture2D(uSampler, vec2(vTextureCoord.x - 3.0*blur, vTextureCoord.y)) * 0.09;","   sum += texture2D(uSampler, vec2(vTextureCoord.x - 2.0*blur, vTextureCoord.y)) * 0.12;","   sum += texture2D(uSampler, vec2(vTextureCoord.x - blur, vTextureCoord.y)) * 0.15;","   sum += texture2D(uSampler, vec2(vTextureCoord.x, vTextureCoord.y)) * 0.16;","   sum += texture2D(uSampler, vec2(vTextureCoord.x + blur, vTextureCoord.y)) * 0.15;","   sum += texture2D(uSampler, vec2(vTextureCoord.x + 2.0*blur, vTextureCoord.y)) * 0.12;","   sum += texture2D(uSampler, vec2(vTextureCoord.x + 3.0*blur, vTextureCoord.y)) * 0.09;","   sum += texture2D(uSampler, vec2(vTextureCoord.x + 4.0*blur, vTextureCoord.y)) * 0.05;","   gl_FragColor = sum;","}"]},i.BlurXFilter.prototype=Object.create(i.AbstractFilter.prototype),i.BlurXFilter.prototype.constructor=i.BlurXFilter,Object.defineProperty(i.BlurXFilter.prototype,"blur",{get:function(){return this.uniforms.blur.value/(1/7e3)},set:function(e){this.dirty=!0,this.uniforms.blur.value=1/7e3*e}}),i.BlurYFilter=function(){i.AbstractFilter.call(this),this.passes=[this],this.uniforms={blur:{type:"1f",value:1/512}},this.fragmentSrc=["precision mediump float;","varying vec2 vTextureCoord;","varying vec4 vColor;","uniform float blur;","uniform sampler2D uSampler;","void main(void) {","   vec4 sum = vec4(0.0);","   sum += texture2D(uSampler, vec2(vTextureCoord.x, vTextureCoord.y - 4.0*blur)) * 0.05;","   sum += texture2D(uSampler, vec2(vTextureCoord.x, vTextureCoord.y - 3.0*blur)) * 0.09;","   sum += texture2D(uSampler, vec2(vTextureCoord.x, vTextureCoord.y - 2.0*blur)) * 0.12;","   sum += texture2D(uSampler, vec2(vTextureCoord.x, vTextureCoord.y - blur)) * 0.15;","   sum += texture2D(uSampler, vec2(vTextureCoord.x, vTextureCoord.y)) * 0.16;","   sum += texture2D(uSampler, vec2(vTextureCoord.x, vTextureCoord.y + blur)) * 0.15;","   sum += texture2D(uSampler, vec2(vTextureCoord.x, vTextureCoord.y + 2.0*blur)) * 0.12;","   sum += texture2D(uSampler, vec2(vTextureCoord.x, vTextureCoord.y + 3.0*blur)) * 0.09;","   sum += texture2D(uSampler, vec2(vTextureCoord.x, vTextureCoord.y + 4.0*blur)) * 0.05;","   gl_FragColor = sum;","}"]},i.BlurYFilter.prototype=Object.create(i.AbstractFilter.prototype),i.BlurYFilter.prototype.constructor=i.BlurYFilter,Object.defineProperty(i.BlurYFilter.prototype,"blur",{get:function(){return this.uniforms.blur.value/(1/7e3)},set:function(e){this.uniforms.blur.value=1/7e3*e}}),i.BlurFilter=function(){this.blurXFilter=new i.BlurXFilter,this.blurYFilter=new i.BlurYFilter,this.passes=[this.blurXFilter,this.blurYFilter]},i.BlurFilter.prototype=Object.create(i.AbstractFilter.prototype),i.BlurFilter.prototype.constructor=i.BlurFilter,Object.defineProperty(i.BlurFilter.prototype,"blur",{get:function(){return this.blurXFilter.blur},set:function(e){this.blurXFilter.blur=this.blurYFilter.blur=e}}),Object.defineProperty(i.BlurFilter.prototype,"blurX",{get:function(){return this.blurXFilter.blur},set:function(e){this.blurXFilter.blur=e}}),Object.defineProperty(i.BlurFilter.prototype,"blurY",{get:function(){return this.blurYFilter.blur},set:function(e){this.blurYFilter.blur=e}}),i.InvertFilter=function(){i.AbstractFilter.call(this),this.passes=[this],this.uniforms={invert:{type:"1f",value:1}},this.fragmentSrc=["precision mediump float;","varying vec2 vTextureCoord;","varying vec4 vColor;","uniform float invert;","uniform sampler2D uSampler;","void main(void) {","   gl_FragColor = texture2D(uSampler, vTextureCoord);","   gl_FragColor.rgb = mix( (vec3(1)-gl_FragColor.rgb) * gl_FragColor.a, gl_FragColor.rgb, 1.0 - invert);","}"]},i.InvertFilter.prototype=Object.create(i.AbstractFilter.prototype),i.InvertFilter.prototype.constructor=i.InvertFilter,Object.defineProperty(i.InvertFilter.prototype,"invert",{get:function(){return this.uniforms.invert.value},set:function(e){this.uniforms.invert.value=e}}),i.SepiaFilter=function(){i.AbstractFilter.call(this),this.passes=[this],this.uniforms={sepia:{type:"1f",value:1}},this.fragmentSrc=["precision mediump float;","varying vec2 vTextureCoord;","varying vec4 vColor;","uniform float sepia;","uniform sampler2D uSampler;","const mat3 sepiaMatrix = mat3(0.3588, 0.7044, 0.1368, 0.2990, 0.5870, 0.1140, 0.2392, 0.4696, 0.0912);","void main(void) {","   gl_FragColor = texture2D(uSampler, vTextureCoord);","   gl_FragColor.rgb = mix( gl_FragColor.rgb, gl_FragColor.rgb * sepiaMatrix, sepia);","}"]},i.SepiaFilter.prototype=Object.create(i.AbstractFilter.prototype),i.SepiaFilter.prototype.constructor=i.SepiaFilter,Object.defineProperty(i.SepiaFilter.prototype,"sepia",{get:function(){return this.uniforms.sepia.value},set:function(e){this.uniforms.sepia.value=e}}),i.TwistFilter=function(){i.AbstractFilter.call(this),this.passes=[this],this.uniforms={radius:{type:"1f",value:.5},angle:{type:"1f",value:5},offset:{type:"2f",value:{x:.5,y:.5}}},this.fragmentSrc=["precision mediump float;","varying vec2 vTextureCoord;","varying vec4 vColor;","uniform vec4 dimensions;","uniform sampler2D uSampler;","uniform float radius;","uniform float angle;","uniform vec2 offset;","void main(void) {","   vec2 coord = vTextureCoord - offset;","   float distance = length(coord);","   if (distance < radius) {","       float ratio = (radius - distance) / radius;","       float angleMod = ratio * ratio * angle;","       float s = sin(angleMod);","       float c = cos(angleMod);","       coord = vec2(coord.x * c - coord.y * s, coord.x * s + coord.y * c);","   }","   gl_FragColor = texture2D(uSampler, coord+offset);","}"]},i.TwistFilter.prototype=Object.create(i.AbstractFilter.prototype),i.TwistFilter.prototype.constructor=i.TwistFilter,Object.defineProperty(i.TwistFilter.prototype,"offset",{get:function(){return this.uniforms.offset.value},set:function(e){this.dirty=!0,this.uniforms.offset.value=e}}),Object.defineProperty(i.TwistFilter.prototype,"radius",{get:function(){return this.uniforms.radius.value},set:function(e){this.dirty=!0,this.uniforms.radius.value=e}}),Object.defineProperty(i.TwistFilter.prototype,"angle",{get:function(){return this.uniforms.angle.value},set:function(e){this.dirty=!0,this.uniforms.angle.value=e}}),i.ColorStepFilter=function(){i.AbstractFilter.call(this),this.passes=[this],this.uniforms={step:{type:"1f",value:5}},this.fragmentSrc=["precision mediump float;","varying vec2 vTextureCoord;","varying vec4 vColor;","uniform sampler2D uSampler;","uniform float step;","void main(void) {","   vec4 color = texture2D(uSampler, vTextureCoord);","   color = floor(color * step) / step;","   gl_FragColor = color;","}"]},i.ColorStepFilter.prototype=Object.create(i.AbstractFilter.prototype),i.ColorStepFilter.prototype.constructor=i.ColorStepFilter,Object.defineProperty(i.ColorStepFilter.prototype,"step",{get:function(){return this.uniforms.step.value},set:function(e){this.uniforms.step.value=e}}),i.DotScreenFilter=function(){i.AbstractFilter.call(this),this.passes=[this],this.uniforms={scale:{type:"1f",value:1},angle:{type:"1f",value:5},dimensions:{type:"4fv",value:[0,0,0,0]}},this.fragmentSrc=["precision mediump float;","varying vec2 vTextureCoord;","varying vec4 vColor;","uniform vec4 dimensions;","uniform sampler2D uSampler;","uniform float angle;","uniform float scale;","float pattern() {","   float s = sin(angle), c = cos(angle);","   vec2 tex = vTextureCoord * dimensions.xy;","   vec2 point = vec2(","       c * tex.x - s * tex.y,","       s * tex.x + c * tex.y","   ) * scale;","   return (sin(point.x) * sin(point.y)) * 4.0;","}","void main() {","   vec4 color = texture2D(uSampler, vTextureCoord);","   float average = (color.r + color.g + color.b) / 3.0;","   gl_FragColor = vec4(vec3(average * 10.0 - 5.0 + pattern()), color.a);","}"]},i.DotScreenFilter.prototype=Object.create(i.AbstractFilter.prototype),i.DotScreenFilter.prototype.constructor=i.DotScreenFilter,Object.defineProperty(i.DotScreenFilter.prototype,"scale",{get:function(){return this.uniforms.scale.value},set:function(e){this.dirty=!0,this.uniforms.scale.value=e}}),Object.defineProperty(i.DotScreenFilter.prototype,"angle",{get:function(){return this.uniforms.angle.value},set:function(e){this.dirty=!0,this.uniforms.angle.value=e}}),i.CrossHatchFilter=function(){i.AbstractFilter.call(this),this.passes=[this],this.uniforms={blur:{type:"1f",value:1/512}},this.fragmentSrc=["precision mediump float;","varying vec2 vTextureCoord;","varying vec4 vColor;","uniform float blur;","uniform sampler2D uSampler;","void main(void) {","    float lum = length(texture2D(uSampler, vTextureCoord.xy).rgb);","    gl_FragColor = vec4(1.0, 1.0, 1.0, 1.0);","    if (lum < 1.00) {","        if (mod(gl_FragCoord.x + gl_FragCoord.y, 10.0) == 0.0) {","            gl_FragColor = vec4(0.0, 0.0, 0.0, 1.0);","        }","    }","    if (lum < 0.75) {","        if (mod(gl_FragCoord.x - gl_FragCoord.y, 10.0) == 0.0) {","            gl_FragColor = vec4(0.0, 0.0, 0.0, 1.0);","        }","    }","    if (lum < 0.50) {","        if (mod(gl_FragCoord.x + gl_FragCoord.y - 5.0, 10.0) == 0.0) {","            gl_FragColor = vec4(0.0, 0.0, 0.0, 1.0);","        }","    }","    if (lum < 0.3) {","        if (mod(gl_FragCoord.x - gl_FragCoord.y - 5.0, 10.0) == 0.0) {","            gl_FragColor = vec4(0.0, 0.0, 0.0, 1.0);","        }","    }","}"]},i.CrossHatchFilter.prototype=Object.create(i.AbstractFilter.prototype),i.CrossHatchFilter.prototype.constructor=i.CrossHatchFilter,Object.defineProperty(i.CrossHatchFilter.prototype,"blur",{get:function(){return this.uniforms.blur.value/(1/7e3)},set:function(e){this.uniforms.blur.value=1/7e3*e}}),i.RGBSplitFilter=function(){i.AbstractFilter.call(this),this.passes=[this],this.uniforms={red:{type:"2f",value:{x:20,y:20}},green:{type:"2f",value:{x:-20,y:20}},blue:{type:"2f",value:{x:20,y:-20}},dimensions:{type:"4fv",value:[0,0,0,0]}},this.fragmentSrc=["precision mediump float;","varying vec2 vTextureCoord;","varying vec4 vColor;","uniform vec2 red;","uniform vec2 green;","uniform vec2 blue;","uniform vec4 dimensions;","uniform sampler2D uSampler;","void main(void) {","   gl_FragColor.r = texture2D(uSampler, vTextureCoord + red/dimensions.xy).r;","   gl_FragColor.g = texture2D(uSampler, vTextureCoord + green/dimensions.xy).g;","   gl_FragColor.b = texture2D(uSampler, vTextureCoord + blue/dimensions.xy).b;","   gl_FragColor.a = texture2D(uSampler, vTextureCoord).a;","}"]},i.RGBSplitFilter.prototype=Object.create(i.AbstractFilter.prototype),i.RGBSplitFilter.prototype.constructor=i.RGBSplitFilter,Object.defineProperty(i.RGBSplitFilter.prototype,"red",{get:function(){return this.uniforms.red.value},set:function(e){this.uniforms.red.value=e}}),Object.defineProperty(i.RGBSplitFilter.prototype,"green",{get:function(){return this.uniforms.green.value},set:function(e){this.uniforms.green.value=e}}),Object.defineProperty(i.RGBSplitFilter.prototype,"blue",{get:function(){return this.uniforms.blue.value},set:function(e){this.uniforms.blue.value=e}}),"undefined"!=typeof r?("undefined"!=typeof t&&t.exports&&(r=t.exports=i),r.PIXI=i):"undefined"!=typeof define&&define.amd?define(i):e.PIXI=i}).call(this)},{}],225:[function(e,t,r){(function(e){!function(e){"use strict";if("function"==typeof bootstrap)bootstrap("promise",e);else if("object"==typeof r&&"object"==typeof t)t.exports=e();else if("function"==typeof define&&define.amd)define(e);else if("undefined"!=typeof ses){if(!ses.ok())return;ses.makeQ=e}else{if("undefined"==typeof self)throw new Error("This environment was not anticiapted by Q. Please file a bug.");self.Q=e()}}(function(){"use strict";function t(e){return function(){return X.apply(e,arguments)}}function r(e){return e===Object(e)}function i(e){return"[object StopIteration]"===tt(e)||e instanceof W}function n(e,t){if(G&&t.stack&&"object"==typeof e&&null!==e&&e.stack&&-1===e.stack.indexOf(rt)){for(var r=[],i=t;i;i=i.source)i.stack&&r.unshift(i.stack);r.unshift(e.stack);var n=r.join("\n"+rt+"\n");e.stack=o(n)}}function o(e){for(var t=e.split("\n"),r=[],i=0;i<t.length;++i){var n=t[i];h(n)||s(n)||!n||r.push(n)}return r.join("\n")}function s(e){return-1!==e.indexOf("(module.js:")||-1!==e.indexOf("(node.js:")}function a(e){var t=/at .+ \((.+):(\d+):(?:\d+)\)$/.exec(e);if(t)return[t[1],Number(t[2])];var r=/at ([^ ]+):(\d+):(?:\d+)$/.exec(e);if(r)return[r[1],Number(r[2])];var i=/.*@(.+):(\d+)$/.exec(e);return i?[i[1],Number(i[2])]:void 0}function h(e){var t=a(e);if(!t)return!1;var r=t[0],i=t[1];return r===q&&i>=V&&st>=i}function c(){if(G)try{throw new Error}catch(i){var e=i.stack.split("\n"),t=e[0].indexOf("@")>0?e[1]:e[2],r=a(t);if(!r)return;return q=r[0],r[1]}}function u(e,t,r){return function(){return"undefined"!=typeof console&&"function"==typeof console.warn&&console.warn(t+" is deprecated, use "+r+" instead.",new Error("").stack),e.apply(e,arguments)}}function f(e){return e instanceof b?e:y(e)?k(e):C(e)}function d(){function e(e){t=e,o.source=e,K(r,function(t,r){f.nextTick(function(){e.promiseDispatch.apply(e,r)})},void 0),r=void 0,i=void 0}var t,r=[],i=[],n=Q(d.prototype),o=Q(b.prototype);if(o.promiseDispatch=function(e,n,o){var s=H(arguments);r?(r.push(s),"when"===n&&o[1]&&i.push(o[1])):f.nextTick(function(){t.promiseDispatch.apply(t,s)})},o.valueOf=function(){if(r)return o;var e=v(t);return g(e)&&(t=e),e},o.inspect=function(){return t?t.inspect():{state:"pending"}},f.longStackSupport&&G)try{throw new Error}catch(e){o.stack=e.stack.substring(e.stack.indexOf("\n")+1)}return n.promise=o,n.resolve=function(r){t||e(f(r))},n.fulfill=function(r){t||e(C(r))},n.reject=function(r){t||e(E(r))},n.notify=function(e){t||K(i,function(t,r){f.nextTick(function(){r(e)})},void 0)},n}function l(e){if("function"!=typeof e)throw new TypeError("resolver must be a function.");var t=d();try{e(t.resolve,t.reject,t.notify)}catch(e){t.reject(e)}return t.promise}function p(e){return l(function(t,r){for(var i=0,n=e.length;n>i;i++)f(e[i]).then(t,r)})}function b(e,t,r){void 0===t&&(t=function(e){return E(new Error("Promise does not support operation: "+e))}),void 0===r&&(r=function(){return{state:"unknown"}});var i=Q(b.prototype);if(i.promiseDispatch=function(r,n,o){var s;try{s=e[n]?e[n].apply(i,o):t.call(i,n,o)}catch(e){s=E(e)}r&&r(s)},i.inspect=r,r){var n=r();"rejected"===n.state&&(i.exception=n.reason),i.valueOf=function(){var e=r();return"pending"===e.state||"rejected"===e.state?i:e.value}}return i}function m(e,t,r,i){return f(e).then(t,r,i)}function v(e){if(g(e)){var t=e.inspect();if("fulfilled"===t.state)return t.value}return e}function g(e){return e instanceof b}function y(e){return r(e)&&"function"==typeof e.then}function w(e){return g(e)&&"pending"===e.inspect().state}function _(e){return!g(e)||"fulfilled"===e.inspect().state}function x(e){return g(e)&&"rejected"===e.inspect().state}function S(){it.length=0,nt.length=0,ot||(ot=!0)}function T(e,t){ot&&(nt.push(e),it.push(t&&"undefined"!=typeof t.stack?t.stack:"(no stack) "+t))}function A(e){if(ot){var t=J(nt,e);-1!==t&&(nt.splice(t,1),it.splice(t,1))}}function E(e){var t=b({when:function(t){return t&&A(this),t?t(e):this}},function(){return this},function(){return{state:"rejected",reason:e}});return T(t,e),t}function C(e){return b({when:function(){return e},get:function(t){return e[t]},set:function(t,r){e[t]=r},delete:function(t){delete e[t]},post:function(t,r){return null===t||void 0===t?e.apply(void 0,r):e[t].apply(e,r)},apply:function(t,r){return e.apply(t,r)},keys:function(){return et(e)}},void 0,function(){return{state:"fulfilled",value:e}})}function k(e){var t=d();return f.nextTick(function(){try{e.then(t.resolve,t.reject,t.notify)}catch(e){t.reject(e)}}),t.promise}function R(e){return b({isDef:function(){}},function(t,r){return O(e,t,r)},function(){return f(e).inspect()})}function M(e,t,r){return f(e).spread(t,r)}function B(e){return function(){function t(e,t){var s;if("undefined"==typeof StopIteration){try{s=r[e](t)}catch(e){return E(e)}return s.done?f(s.value):m(s.value,n,o)}try{s=r[e](t)}catch(e){return i(e)?f(e.value):E(e)}return m(s,n,o)}var r=e.apply(this,arguments),n=t.bind(t,"next"),o=t.bind(t,"throw");return n()}}function I(e){f.done(f.async(e)())}function j(e){throw new W(e)}function P(e){return function(){return M([this,L(arguments)],function(t,r){return e.apply(t,r)})}}function O(e,t,r){return f(e).dispatch(t,r)}function L(e){return m(e,function(e){var t=0,r=d();return K(e,function(i,n,o){var s;g(n)&&"fulfilled"===(s=n.inspect()).state?e[o]=s.value:(++t,m(n,function(i){e[o]=i,0===--t&&r.resolve(e)},r.reject,function(e){r.notify({index:o,value:e})}))},void 0),0===t&&r.resolve(e),r.promise})}function D(e){return m(e,function(e){return e=$(e,f),m(L($(e,function(e){return m(e,z,z)})),function(){return e})})}function F(e){return f(e).allSettled()}function U(e,t){return f(e).then(void 0,void 0,t)}function N(e,t){return f(e).nodeify(t)}var G=!1;try{throw new Error}catch(e){G=!!e.stack}var q,W,V=c(),z=function(){},Y=function(){function t(){for(;r.next;){r=r.next;var e=r.task;r.task=void 0;var i=r.domain;i&&(r.domain=void 0,i.enter());try{e()}catch(e){if(s)throw i&&i.exit(),setTimeout(t,0),i&&i.enter(),e;setTimeout(function(){throw e},0)}i&&i.exit()}n=!1}var r={task:void 0,next:null},i=r,n=!1,o=void 0,s=!1;if(Y=function(t){i=i.next={task:t,domain:s&&e.domain,next:null},n||(n=!0,o())},"undefined"!=typeof e&&e.nextTick)s=!0,o=function(){e.nextTick(t)};else if("function"==typeof setImmediate)o="undefined"!=typeof window?setImmediate.bind(window,t):function(){setImmediate(t)};else if("undefined"!=typeof MessageChannel){var a=new MessageChannel;a.port1.onmessage=function(){o=h,a.port1.onmessage=t,t()};var h=function(){a.port2.postMessage(0)};o=function(){setTimeout(t,0),h()}}else o=function(){setTimeout(t,0)};return Y}(),X=Function.call,H=t(Array.prototype.slice),K=t(Array.prototype.reduce||function(e,t){var r=0,i=this.length;if(1===arguments.length)for(;;){if(r in this){t=this[r++];break}if(++r>=i)throw new TypeError}for(;i>r;r++)r in this&&(t=e(t,this[r],r));return t}),J=t(Array.prototype.indexOf||function(e){for(var t=0;t<this.length;t++)if(this[t]===e)return t;return-1}),$=t(Array.prototype.map||function(e,t){var r=this,i=[];return K(r,function(n,o,s){i.push(e.call(t,o,s,r))},void 0),i}),Q=Object.create||function(e){function t(){}return t.prototype=e,new t},Z=t(Object.prototype.hasOwnProperty),et=Object.keys||function(e){var t=[];for(var r in e)Z(e,r)&&t.push(r);return t},tt=t(Object.prototype.toString);W="undefined"!=typeof ReturnValue?ReturnValue:function(e){this.value=e};var rt="From previous event:";f.resolve=f,f.nextTick=Y,f.longStackSupport=!1,"object"==typeof e&&e&&e.env&&e.env.Q_DEBUG&&(f.longStackSupport=!0),f.defer=d,d.prototype.makeNodeResolver=function(){var e=this;return function(t,r){t?e.reject(t):e.resolve(arguments.length>2?H(arguments,1):r)}},f.Promise=l,f.promise=l,l.race=p,l.all=L,l.reject=E,l.resolve=f,f.passByCopy=function(e){return e},b.prototype.passByCopy=function(){return this},f.join=function(e,t){return f(e).join(t)},b.prototype.join=function(e){return f([this,e]).spread(function(e,t){if(e===t)return e;throw new Error("Can't join: not the same: "+e+" "+t)})},f.race=p,b.prototype.race=function(){return this.then(f.race)},f.makePromise=b,b.prototype.toString=function(){return"[object Promise]"},b.prototype.then=function(e,t,r){function i(t){try{return"function"==typeof e?e(t):t}catch(e){return E(e)}}function o(e){if("function"==typeof t){n(e,a);try{return t(e)}catch(e){return E(e)}}return E(e)}function s(e){return"function"==typeof r?r(e):e}var a=this,h=d(),c=!1;return f.nextTick(function(){a.promiseDispatch(function(e){c||(c=!0,h.resolve(i(e)))},"when",[function(e){c||(c=!0,h.resolve(o(e)))}])}),a.promiseDispatch(void 0,"when",[void 0,function(e){var t,r=!1;try{t=s(e)}catch(e){if(r=!0,!f.onerror)throw e;f.onerror(e)}r||h.notify(t)}]),h.promise},f.tap=function(e,t){return f(e).tap(t)},b.prototype.tap=function(e){return e=f(e),this.then(function(t){return e.fcall(t).thenResolve(t)})},f.when=m,b.prototype.thenResolve=function(e){return this.then(function(){return e})},f.thenResolve=function(e,t){return f(e).thenResolve(t)},b.prototype.thenReject=function(e){return this.then(function(){throw e})},f.thenReject=function(e,t){return f(e).thenReject(t)},f.nearer=v,f.isPromise=g,f.isPromiseAlike=y,f.isPending=w,b.prototype.isPending=function(){return"pending"===this.inspect().state},f.isFulfilled=_,b.prototype.isFulfilled=function(){return"fulfilled"===this.inspect().state},f.isRejected=x,b.prototype.isRejected=function(){return"rejected"===this.inspect().state};var it=[],nt=[],ot=!0;f.resetUnhandledRejections=S,f.getUnhandledReasons=function(){return it.slice()},f.stopUnhandledRejectionTracking=function(){S(),ot=!1},S(),f.reject=E,f.fulfill=C,f.master=R,f.spread=M,b.prototype.spread=function(e,t){return this.all().then(function(t){return e.apply(void 0,t)},t)},f.async=B,f.spawn=I,f.return=j,f.promised=P,f.dispatch=O,b.prototype.dispatch=function(e,t){var r=this,i=d();return f.nextTick(function(){r.promiseDispatch(i.resolve,e,t)}),i.promise},f.get=function(e,t){return f(e).dispatch("get",[t])},b.prototype.get=function(e){return this.dispatch("get",[e])},f.set=function(e,t,r){return f(e).dispatch("set",[t,r])},b.prototype.set=function(e,t){return this.dispatch("set",[e,t])},f.del=f.delete=function(e,t){return f(e).dispatch("delete",[t])},b.prototype.del=b.prototype.delete=function(e){return this.dispatch("delete",[e])},f.mapply=f.post=function(e,t,r){return f(e).dispatch("post",[t,r])},b.prototype.mapply=b.prototype.post=function(e,t){return this.dispatch("post",[e,t])},f.send=f.mcall=f.invoke=function(e,t){return f(e).dispatch("post",[t,H(arguments,2)])},b.prototype.send=b.prototype.mcall=b.prototype.invoke=function(e){return this.dispatch("post",[e,H(arguments,1)])},f.fapply=function(e,t){return f(e).dispatch("apply",[void 0,t])},b.prototype.fapply=function(e){return this.dispatch("apply",[void 0,e])},f.try=f.fcall=function(e){return f(e).dispatch("apply",[void 0,H(arguments,1)])},b.prototype.fcall=function(){return this.dispatch("apply",[void 0,H(arguments)])},f.fbind=function(e){var t=f(e),r=H(arguments,1);return function(){return t.dispatch("apply",[this,r.concat(H(arguments))])}},b.prototype.fbind=function(){var e=this,t=H(arguments);return function(){return e.dispatch("apply",[this,t.concat(H(arguments))])}},f.keys=function(e){return f(e).dispatch("keys",[])},b.prototype.keys=function(){return this.dispatch("keys",[])},f.all=L,b.prototype.all=function(){return L(this)},f.allResolved=u(D,"allResolved","allSettled"),b.prototype.allResolved=function(){return D(this)},f.allSettled=F,b.prototype.allSettled=function(){return this.then(function(e){return L($(e,function(e){function t(){return e.inspect()}return e=f(e),e.then(t,t)}))})},f.fail=f.catch=function(e,t){return f(e).then(void 0,t)},b.prototype.fail=b.prototype.catch=function(e){return this.then(void 0,e)},f.progress=U,b.prototype.progress=function(e){return this.then(void 0,void 0,e)},f.fin=f.finally=function(e,t){return f(e).finally(t)},b.prototype.fin=b.prototype.finally=function(e){return e=f(e),this.then(function(t){return e.fcall().then(function(){return t})},function(t){return e.fcall().then(function(){throw t})})},f.done=function(e,t,r,i){return f(e).done(t,r,i)},b.prototype.done=function(t,r,i){var o=function(e){f.nextTick(function(){if(n(e,s),!f.onerror)throw e;f.onerror(e)})},s=t||r||i?this.then(t,r,i):this;"object"==typeof e&&e&&e.domain&&(o=e.domain.bind(o)),s.then(void 0,o)},f.timeout=function(e,t,r){return f(e).timeout(t,r)},b.prototype.timeout=function(e,t){var r=d(),i=setTimeout(function(){t&&"string"!=typeof t||(t=new Error(t||"Timed out after "+e+" ms"),t.code="ETIMEDOUT"),r.reject(t)},e);return this.then(function(e){clearTimeout(i),r.resolve(e)},function(e){clearTimeout(i),r.reject(e)},r.notify),r.promise},f.delay=function(e,t){return void 0===t&&(t=e,e=void 0),f(e).delay(t)},b.prototype.delay=function(e){return this.then(function(t){var r=d();return setTimeout(function(){r.resolve(t)},e),r.promise})},f.nfapply=function(e,t){return f(e).nfapply(t)},b.prototype.nfapply=function(e){var t=d(),r=H(e);return r.push(t.makeNodeResolver()),this.fapply(r).fail(t.reject),t.promise},f.nfcall=function(e){var t=H(arguments,1);return f(e).nfapply(t)},b.prototype.nfcall=function(){var e=H(arguments),t=d();return e.push(t.makeNodeResolver()),this.fapply(e).fail(t.reject),t.promise},f.nfbind=f.denodeify=function(e){var t=H(arguments,1);return function(){var r=t.concat(H(arguments)),i=d();return r.push(i.makeNodeResolver()),f(e).fapply(r).fail(i.reject),i.promise}},b.prototype.nfbind=b.prototype.denodeify=function(){var e=H(arguments);return e.unshift(this),f.denodeify.apply(void 0,e)},f.nbind=function(e,t){var r=H(arguments,2);return function(){function i(){return e.apply(t,arguments)}var n=r.concat(H(arguments)),o=d();return n.push(o.makeNodeResolver()),f(i).fapply(n).fail(o.reject),o.promise}},b.prototype.nbind=function(){var e=H(arguments,0);return e.unshift(this),f.nbind.apply(void 0,e)},f.nmapply=f.npost=function(e,t,r){return f(e).npost(t,r)},b.prototype.nmapply=b.prototype.npost=function(e,t){var r=H(t||[]),i=d();return r.push(i.makeNodeResolver()),this.dispatch("post",[e,r]).fail(i.reject),i.promise},f.nsend=f.nmcall=f.ninvoke=function(e,t){var r=H(arguments,2),i=d();return r.push(i.makeNodeResolver()),f(e).dispatch("post",[t,r]).fail(i.reject),i.promise},b.prototype.nsend=b.prototype.nmcall=b.prototype.ninvoke=function(e){var t=H(arguments,1),r=d();return t.push(r.makeNodeResolver()),this.dispatch("post",[e,t]).fail(r.reject),r.promise},f.nodeify=N,b.prototype.nodeify=function(e){return e?void this.then(function(t){f.nextTick(function(){e(null,t)})},function(t){f.nextTick(function(){e(t)})}):this};var st=c();return f})}).call(this,e("_process"))},{_process:202}],226:[function(e,t,r){(function(e){!function(e){if("function"==typeof bootstrap)bootstrap("promise",e);else if("object"==typeof r)t.exports=e();else if("function"==typeof define&&define.amd)define(e);else if("undefined"!=typeof ses){if(!ses.ok())return;ses.makeQ=e}else Q=e()}(function(){"use strict";function t(e){return function(){return X.apply(e,arguments)}}function r(e){return e===Object(e)}function i(e){return"[object StopIteration]"===tt(e)||e instanceof W}function n(e,t){if(G&&t.stack&&"object"==typeof e&&null!==e&&e.stack&&-1===e.stack.indexOf(rt)){for(var r=[],i=t;i;i=i.source)i.stack&&r.unshift(i.stack);r.unshift(e.stack);var n=r.join("\n"+rt+"\n");e.stack=o(n)}}function o(e){for(var t=e.split("\n"),r=[],i=0;i<t.length;++i){var n=t[i];h(n)||s(n)||!n||r.push(n)}return r.join("\n")}function s(e){return-1!==e.indexOf("(module.js:")||-1!==e.indexOf("(node.js:")}function a(e){var t=/at .+ \((.+):(\d+):(?:\d+)\)$/.exec(e);if(t)return[t[1],Number(t[2])];var r=/at ([^ ]+):(\d+):(?:\d+)$/.exec(e);if(r)return[r[1],Number(r[2])];var i=/.*@(.+):(\d+)$/.exec(e);return i?[i[1],Number(i[2])]:void 0}function h(e){var t=a(e);if(!t)return!1;var r=t[0],i=t[1];return r===q&&i>=V&&st>=i}function c(){if(G)try{throw new Error}catch(i){var e=i.stack.split("\n"),t=e[0].indexOf("@")>0?e[1]:e[2],r=a(t);if(!r)return;return q=r[0],r[1]}}function u(e,t,r){return function(){return"undefined"!=typeof console&&"function"==typeof console.warn&&console.warn(t+" is deprecated, use "+r+" instead.",new Error("").stack),e.apply(e,arguments)}}function f(e){return g(e)?e:y(e)?k(e):C(e)}function d(){function e(e){t=e,o.source=e,K(r,function(t,r){Y(function(){e.promiseDispatch.apply(e,r)})},void 0),r=void 0,i=void 0}var t,r=[],i=[],n=Q(d.prototype),o=Q(b.prototype);if(o.promiseDispatch=function(e,n,o){var s=H(arguments);r?(r.push(s),"when"===n&&o[1]&&i.push(o[1])):Y(function(){t.promiseDispatch.apply(t,s)})},o.valueOf=function(){if(r)return o;var e=v(t);return g(e)&&(t=e),e},o.inspect=function(){return t?t.inspect():{state:"pending"}},f.longStackSupport&&G)try{throw new Error}catch(e){o.stack=e.stack.substring(e.stack.indexOf("\n")+1)}return n.promise=o,n.resolve=function(r){t||e(f(r))},n.fulfill=function(r){t||e(C(r))},n.reject=function(r){t||e(E(r))},n.notify=function(e){t||K(i,function(t,r){Y(function(){r(e)})},void 0)},n}function l(e){if("function"!=typeof e)throw new TypeError("resolver must be a function.");var t=d();try{e(t.resolve,t.reject,t.notify)}catch(e){t.reject(e)}return t.promise}function p(e){return l(function(t,r){for(var i=0,n=e.length;n>i;i++)f(e[i]).then(t,r)
})}function b(e,t,r){void 0===t&&(t=function(e){return E(new Error("Promise does not support operation: "+e))}),void 0===r&&(r=function(){return{state:"unknown"}});var i=Q(b.prototype);if(i.promiseDispatch=function(r,n,o){var s;try{s=e[n]?e[n].apply(i,o):t.call(i,n,o)}catch(e){s=E(e)}r&&r(s)},i.inspect=r,r){var n=r();"rejected"===n.state&&(i.exception=n.reason),i.valueOf=function(){var e=r();return"pending"===e.state||"rejected"===e.state?i:e.value}}return i}function m(e,t,r,i){return f(e).then(t,r,i)}function v(e){if(g(e)){var t=e.inspect();if("fulfilled"===t.state)return t.value}return e}function g(e){return r(e)&&"function"==typeof e.promiseDispatch&&"function"==typeof e.inspect}function y(e){return r(e)&&"function"==typeof e.then}function w(e){return g(e)&&"pending"===e.inspect().state}function _(e){return!g(e)||"fulfilled"===e.inspect().state}function x(e){return g(e)&&"rejected"===e.inspect().state}function S(){it.length=0,nt.length=0,ot||(ot=!0)}function T(e,t){ot&&(nt.push(e),it.push(t&&"undefined"!=typeof t.stack?t.stack:"(no stack) "+t))}function A(e){if(ot){var t=J(nt,e);-1!==t&&(nt.splice(t,1),it.splice(t,1))}}function E(e){var t=b({when:function(t){return t&&A(this),t?t(e):this}},function(){return this},function(){return{state:"rejected",reason:e}});return T(t,e),t}function C(e){return b({when:function(){return e},get:function(t){return e[t]},set:function(t,r){e[t]=r},delete:function(t){delete e[t]},post:function(t,r){return null===t||void 0===t?e.apply(void 0,r):e[t].apply(e,r)},apply:function(t,r){return e.apply(t,r)},keys:function(){return et(e)}},void 0,function(){return{state:"fulfilled",value:e}})}function k(e){var t=d();return Y(function(){try{e.then(t.resolve,t.reject,t.notify)}catch(e){t.reject(e)}}),t.promise}function R(e){return b({isDef:function(){}},function(t,r){return O(e,t,r)},function(){return f(e).inspect()})}function M(e,t,r){return f(e).spread(t,r)}function B(e){return function(){function t(e,t){var s;if("undefined"==typeof StopIteration){try{s=r[e](t)}catch(e){return E(e)}return s.done?s.value:m(s.value,n,o)}try{s=r[e](t)}catch(e){return i(e)?e.value:E(e)}return m(s,n,o)}var r=e.apply(this,arguments),n=t.bind(t,"next"),o=t.bind(t,"throw");return n()}}function I(e){f.done(f.async(e)())}function j(e){throw new W(e)}function P(e){return function(){return M([this,L(arguments)],function(t,r){return e.apply(t,r)})}}function O(e,t,r){return f(e).dispatch(t,r)}function L(e){return m(e,function(e){var t=0,r=d();return K(e,function(i,n,o){var s;g(n)&&"fulfilled"===(s=n.inspect()).state?e[o]=s.value:(++t,m(n,function(i){e[o]=i,0===--t&&r.resolve(e)},r.reject,function(e){r.notify({index:o,value:e})}))},void 0),0===t&&r.resolve(e),r.promise})}function D(e){return m(e,function(e){return e=$(e,f),m(L($(e,function(e){return m(e,z,z)})),function(){return e})})}function F(e){return f(e).allSettled()}function U(e,t){return f(e).then(void 0,void 0,t)}function N(e,t){return f(e).nodeify(t)}var G=!1;try{throw new Error}catch(e){G=!!e.stack}var q,W,V=c(),z=function(){},Y=function(){function t(){for(;r.next;){r=r.next;var e=r.task;r.task=void 0;var i=r.domain;i&&(r.domain=void 0,i.enter());try{e()}catch(e){if(s)throw i&&i.exit(),setTimeout(t,0),i&&i.enter(),e;setTimeout(function(){throw e},0)}i&&i.exit()}n=!1}var r={task:void 0,next:null},i=r,n=!1,o=void 0,s=!1;if(Y=function(t){i=i.next={task:t,domain:s&&e.domain,next:null},n||(n=!0,o())},"undefined"!=typeof e&&e.nextTick)s=!0,o=function(){e.nextTick(t)};else if("function"==typeof setImmediate)o="undefined"!=typeof window?setImmediate.bind(window,t):function(){setImmediate(t)};else if("undefined"!=typeof MessageChannel){var a=new MessageChannel;a.port1.onmessage=function(){o=h,a.port1.onmessage=t,t()};var h=function(){a.port2.postMessage(0)};o=function(){setTimeout(t,0),h()}}else o=function(){setTimeout(t,0)};return Y}(),X=Function.call,H=t(Array.prototype.slice),K=t(Array.prototype.reduce||function(e,t){var r=0,i=this.length;if(1===arguments.length)for(;;){if(r in this){t=this[r++];break}if(++r>=i)throw new TypeError}for(;i>r;r++)r in this&&(t=e(t,this[r],r));return t}),J=t(Array.prototype.indexOf||function(e){for(var t=0;t<this.length;t++)if(this[t]===e)return t;return-1}),$=t(Array.prototype.map||function(e,t){var r=this,i=[];return K(r,function(n,o,s){i.push(e.call(t,o,s,r))},void 0),i}),Q=Object.create||function(e){function t(){}return t.prototype=e,new t},Z=t(Object.prototype.hasOwnProperty),et=Object.keys||function(e){var t=[];for(var r in e)Z(e,r)&&t.push(r);return t},tt=t(Object.prototype.toString);W="undefined"!=typeof ReturnValue?ReturnValue:function(e){this.value=e};var rt="From previous event:";f.resolve=f,f.nextTick=Y,f.longStackSupport=!1,f.defer=d,d.prototype.makeNodeResolver=function(){var e=this;return function(t,r){t?e.reject(t):e.resolve(arguments.length>2?H(arguments,1):r)}},f.Promise=l,f.promise=l,l.race=p,l.all=L,l.reject=E,l.resolve=f,f.passByCopy=function(e){return e},b.prototype.passByCopy=function(){return this},f.join=function(e,t){return f(e).join(t)},b.prototype.join=function(e){return f([this,e]).spread(function(e,t){if(e===t)return e;throw new Error("Can't join: not the same: "+e+" "+t)})},f.race=p,b.prototype.race=function(){return this.then(f.race)},f.makePromise=b,b.prototype.toString=function(){return"[object Promise]"},b.prototype.then=function(e,t,r){function i(t){try{return"function"==typeof e?e(t):t}catch(e){return E(e)}}function o(e){if("function"==typeof t){n(e,a);try{return t(e)}catch(e){return E(e)}}return E(e)}function s(e){return"function"==typeof r?r(e):e}var a=this,h=d(),c=!1;return Y(function(){a.promiseDispatch(function(e){c||(c=!0,h.resolve(i(e)))},"when",[function(e){c||(c=!0,h.resolve(o(e)))}])}),a.promiseDispatch(void 0,"when",[void 0,function(e){var t,r=!1;try{t=s(e)}catch(e){if(r=!0,!f.onerror)throw e;f.onerror(e)}r||h.notify(t)}]),h.promise},f.when=m,b.prototype.thenResolve=function(e){return this.then(function(){return e})},f.thenResolve=function(e,t){return f(e).thenResolve(t)},b.prototype.thenReject=function(e){return this.then(function(){throw e})},f.thenReject=function(e,t){return f(e).thenReject(t)},f.nearer=v,f.isPromise=g,f.isPromiseAlike=y,f.isPending=w,b.prototype.isPending=function(){return"pending"===this.inspect().state},f.isFulfilled=_,b.prototype.isFulfilled=function(){return"fulfilled"===this.inspect().state},f.isRejected=x,b.prototype.isRejected=function(){return"rejected"===this.inspect().state};var it=[],nt=[],ot=!0;f.resetUnhandledRejections=S,f.getUnhandledReasons=function(){return it.slice()},f.stopUnhandledRejectionTracking=function(){S(),ot=!1},S(),f.reject=E,f.fulfill=C,f.master=R,f.spread=M,b.prototype.spread=function(e,t){return this.all().then(function(t){return e.apply(void 0,t)},t)},f.async=B,f.spawn=I,f.return=j,f.promised=P,f.dispatch=O,b.prototype.dispatch=function(e,t){var r=this,i=d();return Y(function(){r.promiseDispatch(i.resolve,e,t)}),i.promise},f.get=function(e,t){return f(e).dispatch("get",[t])},b.prototype.get=function(e){return this.dispatch("get",[e])},f.set=function(e,t,r){return f(e).dispatch("set",[t,r])},b.prototype.set=function(e,t){return this.dispatch("set",[e,t])},f.del=f.delete=function(e,t){return f(e).dispatch("delete",[t])},b.prototype.del=b.prototype.delete=function(e){return this.dispatch("delete",[e])},f.mapply=f.post=function(e,t,r){return f(e).dispatch("post",[t,r])},b.prototype.mapply=b.prototype.post=function(e,t){return this.dispatch("post",[e,t])},f.send=f.mcall=f.invoke=function(e,t){return f(e).dispatch("post",[t,H(arguments,2)])},b.prototype.send=b.prototype.mcall=b.prototype.invoke=function(e){return this.dispatch("post",[e,H(arguments,1)])},f.fapply=function(e,t){return f(e).dispatch("apply",[void 0,t])},b.prototype.fapply=function(e){return this.dispatch("apply",[void 0,e])},f.try=f.fcall=function(e){return f(e).dispatch("apply",[void 0,H(arguments,1)])},b.prototype.fcall=function(){return this.dispatch("apply",[void 0,H(arguments)])},f.fbind=function(e){var t=f(e),r=H(arguments,1);return function(){return t.dispatch("apply",[this,r.concat(H(arguments))])}},b.prototype.fbind=function(){var e=this,t=H(arguments);return function(){return e.dispatch("apply",[this,t.concat(H(arguments))])}},f.keys=function(e){return f(e).dispatch("keys",[])},b.prototype.keys=function(){return this.dispatch("keys",[])},f.all=L,b.prototype.all=function(){return L(this)},f.allResolved=u(D,"allResolved","allSettled"),b.prototype.allResolved=function(){return D(this)},f.allSettled=F,b.prototype.allSettled=function(){return this.then(function(e){return L($(e,function(e){function t(){return e.inspect()}return e=f(e),e.then(t,t)}))})},f.fail=f.catch=function(e,t){return f(e).then(void 0,t)},b.prototype.fail=b.prototype.catch=function(e){return this.then(void 0,e)},f.progress=U,b.prototype.progress=function(e){return this.then(void 0,void 0,e)},f.fin=f.finally=function(e,t){return f(e).finally(t)},b.prototype.fin=b.prototype.finally=function(e){return e=f(e),this.then(function(t){return e.fcall().then(function(){return t})},function(t){return e.fcall().then(function(){throw t})})},f.done=function(e,t,r,i){return f(e).done(t,r,i)},b.prototype.done=function(t,r,i){var o=function(e){Y(function(){if(n(e,s),!f.onerror)throw e;f.onerror(e)})},s=t||r||i?this.then(t,r,i):this;"object"==typeof e&&e&&e.domain&&(o=e.domain.bind(o)),s.then(void 0,o)},f.timeout=function(e,t,r){return f(e).timeout(t,r)},b.prototype.timeout=function(e,t){var r=d(),i=setTimeout(function(){r.reject(new Error(t||"Timed out after "+e+" ms"))},e);return this.then(function(e){clearTimeout(i),r.resolve(e)},function(e){clearTimeout(i),r.reject(e)},r.notify),r.promise},f.delay=function(e,t){return void 0===t&&(t=e,e=void 0),f(e).delay(t)},b.prototype.delay=function(e){return this.then(function(t){var r=d();return setTimeout(function(){r.resolve(t)},e),r.promise})},f.nfapply=function(e,t){return f(e).nfapply(t)},b.prototype.nfapply=function(e){var t=d(),r=H(e);return r.push(t.makeNodeResolver()),this.fapply(r).fail(t.reject),t.promise},f.nfcall=function(e){var t=H(arguments,1);return f(e).nfapply(t)},b.prototype.nfcall=function(){var e=H(arguments),t=d();return e.push(t.makeNodeResolver()),this.fapply(e).fail(t.reject),t.promise},f.nfbind=f.denodeify=function(e){var t=H(arguments,1);return function(){var r=t.concat(H(arguments)),i=d();return r.push(i.makeNodeResolver()),f(e).fapply(r).fail(i.reject),i.promise}},b.prototype.nfbind=b.prototype.denodeify=function(){var e=H(arguments);return e.unshift(this),f.denodeify.apply(void 0,e)},f.nbind=function(e,t){var r=H(arguments,2);return function(){function i(){return e.apply(t,arguments)}var n=r.concat(H(arguments)),o=d();return n.push(o.makeNodeResolver()),f(i).fapply(n).fail(o.reject),o.promise}},b.prototype.nbind=function(){var e=H(arguments,0);return e.unshift(this),f.nbind.apply(void 0,e)},f.nmapply=f.npost=function(e,t,r){return f(e).npost(t,r)},b.prototype.nmapply=b.prototype.npost=function(e,t){var r=H(t||[]),i=d();return r.push(i.makeNodeResolver()),this.dispatch("post",[e,r]).fail(i.reject),i.promise},f.nsend=f.nmcall=f.ninvoke=function(e,t){var r=H(arguments,2),i=d();return r.push(i.makeNodeResolver()),f(e).dispatch("post",[t,r]).fail(i.reject),i.promise},b.prototype.nsend=b.prototype.nmcall=b.prototype.ninvoke=function(e){var t=H(arguments,1),r=d();return t.push(r.makeNodeResolver()),this.dispatch("post",[e,t]).fail(r.reject),r.promise},f.nodeify=N,b.prototype.nodeify=function(e){return e?void this.then(function(t){Y(function(){e(null,t)})},function(t){Y(function(){e(t)})}):this};var st=c();return f})}).call(this,e("_process"))},{_process:202}],227:[function(e,t,r){!function(i){"object"==typeof r?t.exports=i(e("q")):"function"==typeof define&&define.amd?define(["q"],i):Qajax=i(Q)}(function(e){"use strict";function t(e,t){return e in t?t[e]:s.defaults[e]}function r(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);return e}function i(e){var t,r=[];for(t in e)e.hasOwnProperty(t)&&r.push(encodeURIComponent(t)+"="+encodeURIComponent(e[t]));return r.join("&")}function n(e){return-1===e.indexOf("?")}function o(e){s.defaults.logs&&window.console&&console.log(e)}var s=function(){var s,h=arguments;if(!h.length)throw new Error("Qajax: settings are required");if("string"==typeof h[0])s="object"==typeof h[1]&&h[1]||{},s.url=h[0];else{if("object"!=typeof h[0])throw new Error("Qajax: settings must be an object");s=h[0]}if(!s.url)throw new Error("Qajax: settings.url is required");if("cancellation"in s&&!e.isPromiseAlike(s.cancellation))throw new Error("cancellation must be a Promise.");var c=new XMLHttpRequest,u=s.cancellation||e.defer().promise,f=t("method",s),d=t("base",s),l=s.url,p=s.data,b=s.responseType,m=s.params||{},v=e.defer(),g=t("timeout",s),y=r({},t("headers",s)),w=t("cache",s),_=t("withCredentials",s);w&&(m[w===!0?"_":w]=(new Date).getTime()),d&&(l=d+l);var x=i(m);return x&&(l=l+(n(l)?"?":"&")+x),null!==p&&"object"==typeof p&&(a in y||(y[a]="application/json"),p=JSON.stringify(p)),e.fcall(function(){c.onreadystatechange=function(){if(4===c.readyState)try{o(f+" "+l+" => "+c.status),c.status?v.resolve(c):v.reject(c)}catch(e){v.reject(c)}},c.onprogress=function(e){v.notify(e)},c.open(f,l,!0),b&&(c.responseType=b);for(var e in y)y.hasOwnProperty(e)&&c.setRequestHeader(e,y[e]);return _&&(c.withCredentials=!0),void 0!==p&&null!==p?c.send(p):c.send(),u.fin(function(){v.promise.isFulfilled()||(o("Qajax cancellation reached."),c.abort())}),g?v.promise.timeout(g).fail(function(e){throw e instanceof Error&&(o("Qajax request delay reach in "+f+" "+l),c.abort()),c}):v.promise})};s.TIMEOUT=void 0,s.defaults={logs:!1,timeout:6e4,cache:!!(window.ActiveXObject||"ActiveXObject"in window),method:"GET",headers:{},base:""},s.filterStatus=function(t){var r,i;if(i=typeof t,"function"===i)r=t;else{if("number"!==i)throw"validStatus type "+i+" unsupported";r=function(e){return e===t}}return function(t){var i=0;try{i=t.status}catch(e){o("Qajax: failed to read xhr.status")}return 1223===i&&(i=204),r(i)?e.resolve(t):e.reject(t)}},s.filterSuccess=s.filterStatus(function(e){return e>=200&&300>e||304===e}),s.toJSON=function(t){return e.fcall(function(){return JSON.parse(t.responseText)})},s.getJSON=function(e){return s({url:e,method:"GET"}).then(s.filterSuccess).then(s.toJSON)},s.serialize=i;var a="Content-Type";return s})},{q:226}],228:[function(e,t){function r(e,t){var r,o,s=i(),a=!1;return function(){return r=this,o=arguments,s.isPending()?a=!0:s=i.delay(t).then(function t(){return a=!1,i.fapply(n.bind(e,r),o).then(function(e){return a?t():e},function(e){if(a)return t();throw e})}),s}}var i=e("q"),n=e("lodash");t.exports=r},{lodash:222,q:229}],229:[function(e,t){t.exports=e(226)},{"/Volumes/Case Sensitive/perso/bonhomme/node_modules/qajax/node_modules/q/q.js":226,_process:202}],230:[function(e,t){t.exports=e(226)},{"/Volumes/Case Sensitive/perso/bonhomme/node_modules/qajax/node_modules/q/q.js":226,_process:202}],231:[function(e,t,r){!function(e){"object"==typeof r?t.exports=e():Qstart=e()}(function(){var t=window.Q||e("q"),r=t.defer(),i=function(){window.removeEventListener("error",n),r.resolve(window.document)},n=function(e){r.reject(e)};return window.addEventListener("error",n,!1),window.cordova?window.document.addEventListener("deviceready",i,!1):window.document.addEventListener("readystatechange",function(){"complete"==document.readyState&&i()},!1),r.promise})},{q:230}],232:[function(e,t){for(var r=e("performance-now"),i="undefined"==typeof window?{}:window,n=["moz","webkit"],o="AnimationFrame",s=i["request"+o],a=i["cancel"+o]||i["cancelRequest"+o],h=!0,c=0;c<n.length&&!s;c++)s=i[n[c]+"Request"+o],a=i[n[c]+"Cancel"+o]||i[n[c]+"CancelRequest"+o];if(!s||!a){h=!1;var u=0,f=0,d=[],l=1e3/60;s=function(e){if(0===d.length){var t=r(),i=Math.max(0,l-(t-u));u=i+t,setTimeout(function(){var e=d.slice(0);d.length=0;for(var t=0;t<e.length;t++)if(!e[t].cancelled)try{e[t].callback(u)}catch(e){setTimeout(function(){throw e},0)}},Math.round(i))}return d.push({handle:++f,callback:e,cancelled:!1}),f},a=function(e){for(var t=0;t<d.length;t++)d[t].handle===e&&(d[t].cancelled=!0)}}t.exports=function(e){return h?s.call(i,function(){try{e.apply(this,arguments)}catch(e){setTimeout(function(){throw e},0)}}):s.call(i,e)},t.exports.cancel=function(){a.apply(i,arguments)}},{"performance-now":223}],233:[function(e,t){!function(t,r,i,n,o,s,a,h,c){function u(e){var t,r=e.length,i=this,o=0,s=i.i=i.j=0,a=i.S=[];for(r||(e=[r++]);n>o;)a[o]=o++;for(o=0;n>o;o++)a[o]=a[s=w&s+e[o%r]+(t=a[o])],a[s]=t;(i.g=function(e){for(var t,r=0,o=i.i,s=i.j,a=i.S;e--;)t=a[o=w&o+1],r=r*n+a[w&(a[o]=a[s=w&s+t])+(a[s]=t)];return i.i=o,i.j=s,r})(n)}function f(e,t){return t.i=e.i,t.j=e.j,t.S=e.S.slice(),t}function d(e,t){var r,i=[],n=typeof e;if(t&&"object"==n)for(r in e)try{i.push(d(e[r],t-1))}catch(e){}return i.length?i:"string"==n?e:e+"\x00"}function l(e,t){for(var r,i=e+"",n=0;n<i.length;)t[w&n]=w&(r^=19*t[w&n])+i.charCodeAt(n++);return b(t)}function p(e){try{return m?b(m.randomBytes(n)):(t.crypto.getRandomValues(e=new Uint8Array(n)),b(e))}catch(i){return[+new Date,t,(e=t.navigator)&&e.plugins,t.screen,b(r)]}}function b(e){return String.fromCharCode.apply(0,e)}var m,v=i.pow(n,o),g=i.pow(2,s),y=2*g,w=n-1,_=i["seed"+c]=function(e,t,s){var a=[];t=1==t?{entropy:!0}:t||{};var h=l(d(t.entropy?[e,b(r)]:null==e?p():e,3),a),m=new u(a);return l(b(m.S),r),(t.pass||s||function(e,t,r,n){return n&&(n.S&&f(n,m),e.state=function(){return f(m,{})}),r?(i[c]=e,t):e})(function(){for(var e=m.g(o),t=v,r=0;g>e;)e=(e+r)*n,t*=n,r=m.g(1);for(;e>=y;)e/=2,t/=2,r>>>=1;return(e+r)/t},h,"global"in t?t.global:this==i,t.state)};if(l(i[c](),r),a&&a.exports){a.exports=_;try{m=e("crypto")}catch(e){}}else h&&h.amd&&h(function(){return _})}(this,[],Math,256,6,52,"object"==typeof t&&t,"function"==typeof define&&define,"random")},{crypto:64}],234:[function(e,t){function r(e,t,r,i,n){function o(e){return e?"number"!=typeof e.x||"number"!=typeof e.y||"number"!=typeof e.w||"number"!=typeof e.h?!1:isNaN(e.x)||isNaN(e.y)||isNaN(e.w)||isNaN(e.h)?!1:!0:!1}function s(e,t){return e.x==t.x&&e.y==t.y&&e.w==t.w&&e.h==t.h?!0:!1}function a(e,t,r,i){return{x:e,y:t,w:r,h:i,c:[],l:[],n:[]}}function h(e,t,r,i){return Math.sqrt((r-e)*(r-e)+(i-t)*(i-t))}function c(e,t,r,i,n,o,s){s||(s=-1);var a=n*n+o*o;if(0==a)return null;if(a=(e*o-t*n-r*o+i*n)/a,Math.abs(n)>Math.abs(o))var c=(e-r-a*o)/n;else var c=(t-i+a*n)/o;if(c>=0&&s>=c||0>s)return{s:c,t:a,x:r+c*n,y:i+c*o,dist:Math.abs(a)};if(0>c){var u=h(e,t,r,i);return{s:c,dist:u}}var u=h(e,t,r+s*n,i+s*o);return{s:c,dist:u}}function u(e,t,r){if(!e||!t)return!0;var i=c(t.x+.5*t.w,t.y+.5*t.h,e.x,e.y,e.dx,e.dy,e.dist);if(i){if(i.dist-=r,i.dist<0)return!0;if(i.dist*i.dist<=t.w*t.w+t.h*t.h)return!0}return!1}function f(e,t,r){return e&&t&&(e.x+e.w<t.x-r||e.y+e.h<t.y-r||e.x-r>t.x+t.w||e.y-r>t.y+t.h)?!1:!0}function d(e,t){var r=!1;t.w*t.h>e.w*e.h*_&&(r=!0),(t.x<e.x||t.y<e.y||t.x+t.w>e.x+e.w||t.y+t.h>e.y+e.h)&&(r=!0);for(var i=null,n=0;n<e.n.length;n++)if(f(t,e.n[n],0)){if(i){r=!0;break}i=e.n[n]}return{leaf:r,childnode:i}}function l(e,t){var r=d(e,t);if(r)e.l.push(t);else{if(!r.childnode)return;b(r.childnode,t)}}function p(e,t,r){if(!o(t))return 0;r?"string"!=typeof r&&(r="id"):r=!1;for(var i=0,n=0;n<e.c.length;n++)(r&&e.c[n][r]==t[r]||!r&&s(e.c[n],t))&&(i++,e.c.splice(n,1),n--);for(var n=0;n<e.l.length;n++)(r&&e.l[n][r]==t[r]||!r&&s(e.l[n],t))&&(i++,e.l.splice(n,1),n--);var a=d(e,t);return!a.leaf&&a.childnode?i+p(a.childnode,t,r):i}function b(e,t){if(o(t))if(0==e.n.length){if(e.c.push(t),e.c.length>w){var r=e.w/2,i=e.h/2;e.n.push(a(e.x,e.y,r,i),a(e.x+r,e.y,r,i),a(e.x,e.y+i,r,i),a(e.x+r,e.y+i,r,i));for(var n=0;n<e.c.length;n++)l(e,e.c[n]);e.c=[]}}else l(e,t)}function m(e,t,r,i,n,o){for(var s=0;s<t.l.length;s++)if((!n||e(r,t.l[s],i))&&!o(t.l[s]))return!1;for(var s=0;s<t.c.length;s++)if((!n||e(r,t.c[s],i))&&!o(t.c[s]))return!1;for(var a=0;a<t.n.length;a++)if(e(r,t.n[a],i)&&!m(e,t.n[a],r,i,n,o))return!1;return!0}function v(e,t,r,i){return m(f,e,t,r,!0,i)}function g(e,t,r,i){return m(u,e,t,r,!1,i)}function y(e,t,r,i){"function"==typeof r&&"undefined"==typeof i&&(i=r,r=0),null==t?v(e,t,r,i):"number"!=typeof t.x||"number"!=typeof t.y||isNaN(t.x)||isNaN(t.y)||("number"!=typeof t.dx||"number"!=typeof t.dy||isNaN(t.dx)||isNaN(t.dy)?"number"!=typeof t.w||"number"!=typeof t.h||isNaN(t.w)||isNaN(t.h)||v(e,t,r,i):g(e,t,r,i))}("number"!=typeof e||isNaN(e))&&(e=0),("number"!=typeof t||isNaN(t))&&(t=0),("number"!=typeof r||isNaN(r))&&(r=10),("number"!=typeof i||isNaN(i))&&(i=10);var w=25,_=.5;n&&("number"==typeof n.maxchildren&&n.maxchildren>0&&(w=n.maxchildren),"number"==typeof n.leafratio&&n.leafratio>=0&&(_=n.leafratio));var x=a(e,t,r,i);return{get:function(e,t,r){y(x,e,t,r)},put:function(e){b(x,e)},remove:function(e,t){return p(x,e,t)},stringify:function(){var n={x:e,y:t,w:r,h:i,maxc:w,leafratio:_,root:x};try{return JSON.stringify(n)}catch(e){return null}},parse:function(n){"string"==typeof n&&(n=JSON.parse(n)),e=n.x,t=n.y,r=n.w,i=n.h,w=n.maxc,_=n.leafratio,x=n.root}}}"undefined"!=typeof t&&(t.exports=r)},{}],235:[function(e,t){function r(e,t,i){if(!(this instanceof r))return new r(e,t,i);if("function"!=typeof e)throw new Error("SlidingWindow(alloc, free, options): alloc function is mandatory");if("function"!=typeof t)throw new Error("SlidingWindow(alloc, free, options): free function is mandatory");if(i)for(var n in i)this[n]=i[n];this.alloc=e,this.free=t,this._chunks={},this._right=null,this._left=null}r.prototype={chunkSize:1,right:0,left:0,bounds:[-1/0,+1/0],reverseIndex:function(e){return e*this.chunkSize},chunkIndex:function(e){return Math.floor(e/this.chunkSize)},getChunk:function(e){return this._chunks[this.chunkIndex(e)]},getChunkByIndex:function(e){return this._chunks[e]},destroy:function(e){for(var t=this._left;t<=this._right;++t)this.free(t,this._chunks[t],e),delete this._chunks[t];this._chunks=null,this.alloc=null,this.free=null},move:function(e,t){var r,i;if("number"!=typeof e||isNaN(e)){if(r=e[0],i=e[1],"number"!=typeof r||isNaN(r)||!isFinite(r))throw new Error("tail is not a finite number: "+[r,i]);if("number"!=typeof i||isNaN(i)||!isFinite(i))throw new Error("head is not a finite number: "+[r,i]);if(r>i)throw new Error("tail shouldn't be greater than head")}else r=i=e;var n,o,s=Math.min(this.chunkIndex(i+this.right*this.chunkSize),this.bounds[1]),a=Math.max(this.chunkIndex(r-this.left*this.chunkSize),this.bounds[0]),h=this._chunks,c=[],u=[];for(null===this._right&&(this._left=a,this._right=a-1),n=this._right+1;s>=n;n++)c.push(n);for(n=this._left-1;n>=a;n--)c.push(n);for(n=this._left;a>n;n++)u.push(n);for(n=this._right;n>s;n--)u.push(n);for(this._right=s,this._left=a,n=0;n<u.length;++n)o=u[n],-1===c.indexOf(o)&&(this.free(o,h[o],t),delete h[o]);for(n=0;n<c.length;++n)o=c[n],-1===u.indexOf(o)&&(h[o]=this.alloc(o,t))}},t.exports=r},{}],236:[function(e,t){t.exports=function(e,t,r){var i=Math.max(0,Math.min(1,(r-e)/(t-e)));return i*i*(3-2*i)}},{}],237:[function(){!function(e){var t,r={},i=[];r.init=function(e,r){r=r||{},t=e,t.on("ntp:server_sync",n),setInterval(o,r.interval||1e3)};var n=function(e){var t=Date.now()-e.t1+(Date.now()-e.t0)/2;i.unshift(t),i.length>10&&i.pop()};r.offset=function(){for(var e=0,t=0;t<i.length;t++)e+=i[t];return e/=i.length};var o=function(){t.emit("ntp:client_sync",{t0:Date.now()})};"function"==typeof define&&define.amd?define("ntp",[],function(){return r}):e.ntp=r}(window)},{}],238:[function(e,t){t.exports=e("./lib/")},{"./lib/":239}],239:[function(e,t,r){function i(e,t){"object"==typeof e&&(t=e,e=void 0),t=t||{};var r,i=n(e),o=i.source,c=i.id;return t.forceNew||t["force new connection"]||!1===t.multiplex?(a("ignoring socket cache for %s",o),r=s(o,t)):(h[c]||(a("new io instance for %s",o),h[c]=s(o,t)),r=h[c]),r.socket(i.path)}var n=e("./url"),o=e("socket.io-parser"),s=e("./manager"),a=e("debug")("socket.io-client");t.exports=r=i;var h=r.managers={};r.protocol=o.protocol,r.connect=i,r.Manager=e("./manager"),r.Socket=e("./socket")},{"./manager":240,"./socket":242,"./url":243,debug:246,"socket.io-parser":280}],240:[function(e,t){function r(e,t){return this instanceof r?(e&&"object"==typeof e&&(t=e,e=void 0),t=t||{},t.path=t.path||"/socket.io",this.nsps={},this.subs=[],this.opts=t,this.reconnection(t.reconnection!==!1),this.reconnectionAttempts(t.reconnectionAttempts||1/0),this.reconnectionDelay(t.reconnectionDelay||1e3),this.reconnectionDelayMax(t.reconnectionDelayMax||5e3),this.timeout(null==t.timeout?2e4:t.timeout),this.readyState="closed",this.uri=e,this.connected=[],this.attempts=0,this.encoding=!1,this.packetBuffer=[],this.encoder=new s.Encoder,this.decoder=new s.Decoder,this.autoConnect=t.autoConnect!==!1,void(this.autoConnect&&this.open())):new r(e,t)}var i=(e("./url"),e("engine.io-client")),n=e("./socket"),o=e("component-emitter"),s=e("socket.io-parser"),a=e("./on"),h=e("component-bind"),c=(e("object-component"),e("debug")("socket.io-client:manager")),u=e("indexof");t.exports=r,r.prototype.emitAll=function(){this.emit.apply(this,arguments);for(var e in this.nsps)this.nsps[e].emit.apply(this.nsps[e],arguments)},o(r.prototype),r.prototype.reconnection=function(e){return arguments.length?(this._reconnection=!!e,this):this._reconnection},r.prototype.reconnectionAttempts=function(e){return arguments.length?(this._reconnectionAttempts=e,this):this._reconnectionAttempts},r.prototype.reconnectionDelay=function(e){return arguments.length?(this._reconnectionDelay=e,this):this._reconnectionDelay},r.prototype.reconnectionDelayMax=function(e){return arguments.length?(this._reconnectionDelayMax=e,this):this._reconnectionDelayMax},r.prototype.timeout=function(e){return arguments.length?(this._timeout=e,this):this._timeout},r.prototype.maybeReconnectOnOpen=function(){this.openReconnect||this.reconnecting||!this._reconnection||0!==this.attempts||(this.openReconnect=!0,this.reconnect())},r.prototype.open=r.prototype.connect=function(e){if(c("readyState %s",this.readyState),~this.readyState.indexOf("open"))return this;c("opening %s",this.uri),this.engine=i(this.uri,this.opts);var t=this.engine,r=this;this.readyState="opening",this.skipReconnect=!1;var n=a(t,"open",function(){r.onopen(),e&&e()}),o=a(t,"error",function(t){if(c("connect_error"),r.cleanup(),r.readyState="closed",r.emitAll("connect_error",t),e){var i=new Error("Connection error");i.data=t,e(i)}r.maybeReconnectOnOpen()});if(!1!==this._timeout){var s=this._timeout;c("connect attempt will timeout after %d",s);var h=setTimeout(function(){c("connect attempt timed out after %d",s),n.destroy(),t.close(),t.emit("error","timeout"),r.emitAll("connect_timeout",s)},s);this.subs.push({destroy:function(){clearTimeout(h)}})}return this.subs.push(n),this.subs.push(o),this},r.prototype.onopen=function(){c("open"),this.cleanup(),this.readyState="open",this.emit("open");var e=this.engine;this.subs.push(a(e,"data",h(this,"ondata"))),this.subs.push(a(this.decoder,"decoded",h(this,"ondecoded"))),this.subs.push(a(e,"error",h(this,"onerror"))),this.subs.push(a(e,"close",h(this,"onclose")))},r.prototype.ondata=function(e){this.decoder.add(e)},r.prototype.ondecoded=function(e){this.emit("packet",e)},r.prototype.onerror=function(e){c("error",e),this.emitAll("error",e)},r.prototype.socket=function(e){var t=this.nsps[e];if(!t){t=new n(this,e),this.nsps[e]=t;var r=this;t.on("connect",function(){~u(r.connected,t)||r.connected.push(t)})}return t},r.prototype.destroy=function(e){var t=u(this.connected,e);~t&&this.connected.splice(t,1),this.connected.length||this.close()},r.prototype.packet=function(e){c("writing packet %j",e);var t=this;t.encoding?t.packetBuffer.push(e):(t.encoding=!0,this.encoder.encode(e,function(e){for(var r=0;r<e.length;r++)t.engine.write(e[r]);t.encoding=!1,t.processPacketQueue()}))},r.prototype.processPacketQueue=function(){if(this.packetBuffer.length>0&&!this.encoding){var e=this.packetBuffer.shift();this.packet(e)}},r.prototype.cleanup=function(){for(var e;e=this.subs.shift();)e.destroy();this.packetBuffer=[],this.encoding=!1,this.decoder.destroy()},r.prototype.close=r.prototype.disconnect=function(){this.skipReconnect=!0,this.readyState="closed",this.engine&&this.engine.close()},r.prototype.onclose=function(e){c("close"),this.cleanup(),this.readyState="closed",this.emit("close",e),this._reconnection&&!this.skipReconnect&&this.reconnect()},r.prototype.reconnect=function(){if(this.reconnecting||this.skipReconnect)return this;var e=this;if(this.attempts++,this.attempts>this._reconnectionAttempts)c("reconnect failed"),this.emitAll("reconnect_failed"),this.reconnecting=!1;else{var t=this.attempts*this.reconnectionDelay();t=Math.min(t,this.reconnectionDelayMax()),c("will wait %dms before reconnect attempt",t),this.reconnecting=!0;var r=setTimeout(function(){e.skipReconnect||(c("attempting reconnect"),e.emitAll("reconnect_attempt",e.attempts),e.emitAll("reconnecting",e.attempts),e.skipReconnect||e.open(function(t){t?(c("reconnect attempt error"),e.reconnecting=!1,e.reconnect(),e.emitAll("reconnect_error",t.data)):(c("reconnect success"),e.onreconnect())}))},t);this.subs.push({destroy:function(){clearTimeout(r)}})}},r.prototype.onreconnect=function(){var e=this.attempts;this.attempts=0,this.reconnecting=!1,this.emitAll("reconnect",e)}},{"./on":241,"./socket":242,"./url":243,"component-bind":244,"component-emitter":245,debug:246,"engine.io-client":247,indexof:276,"object-component":277,"socket.io-parser":280}],241:[function(e,t){function r(e,t,r){return e.on(t,r),{destroy:function(){e.removeListener(t,r)}}}t.exports=r},{}],242:[function(e,t,r){function i(e,t){this.io=e,this.nsp=t,this.json=this,this.ids=0,this.acks={},this.io.autoConnect&&this.open(),this.receiveBuffer=[],this.sendBuffer=[],this.connected=!1,this.disconnected=!0}var n=e("socket.io-parser"),o=e("component-emitter"),s=e("to-array"),a=e("./on"),h=e("component-bind"),c=e("debug")("socket.io-client:socket"),u=e("has-binary");t.exports=r=i;var f={connect:1,connect_error:1,connect_timeout:1,disconnect:1,error:1,reconnect:1,reconnect_attempt:1,reconnect_failed:1,reconnect_error:1,reconnecting:1},d=o.prototype.emit;o(i.prototype),i.prototype.subEvents=function(){if(!this.subs){var e=this.io;this.subs=[a(e,"open",h(this,"onopen")),a(e,"packet",h(this,"onpacket")),a(e,"close",h(this,"onclose"))]}},i.prototype.open=i.prototype.connect=function(){return this.connected?this:(this.subEvents(),this.io.open(),"open"==this.io.readyState&&this.onopen(),this)},i.prototype.send=function(){var e=s(arguments);return e.unshift("message"),this.emit.apply(this,e),this},i.prototype.emit=function(e){if(f.hasOwnProperty(e))return d.apply(this,arguments),this;var t=s(arguments),r=n.EVENT;u(t)&&(r=n.BINARY_EVENT);var i={type:r,data:t};return"function"==typeof t[t.length-1]&&(c("emitting packet with ack id %d",this.ids),this.acks[this.ids]=t.pop(),i.id=this.ids++),this.connected?this.packet(i):this.sendBuffer.push(i),this},i.prototype.packet=function(e){e.nsp=this.nsp,this.io.packet(e)},i.prototype.onopen=function(){c("transport is open - connecting"),"/"!=this.nsp&&this.packet({type:n.CONNECT})},i.prototype.onclose=function(e){c("close (%s)",e),this.connected=!1,this.disconnected=!0,this.emit("disconnect",e)},i.prototype.onpacket=function(e){if(e.nsp==this.nsp)switch(e.type){case n.CONNECT:this.onconnect();break;case n.EVENT:this.onevent(e);break;case n.BINARY_EVENT:this.onevent(e);break;case n.ACK:this.onack(e);break;case n.BINARY_ACK:this.onack(e);break;case n.DISCONNECT:this.ondisconnect();break;case n.ERROR:this.emit("error",e.data)}},i.prototype.onevent=function(e){var t=e.data||[];c("emitting event %j",t),null!=e.id&&(c("attaching ack callback to event"),t.push(this.ack(e.id))),this.connected?d.apply(this,t):this.receiveBuffer.push(t)},i.prototype.ack=function(e){var t=this,r=!1;return function(){if(!r){r=!0;var i=s(arguments);c("sending ack %j",i);var o=u(i)?n.BINARY_ACK:n.ACK;t.packet({type:o,id:e,data:i})}}},i.prototype.onack=function(e){c("calling ack %s with %j",e.id,e.data);var t=this.acks[e.id];t.apply(this,e.data),delete this.acks[e.id]
},i.prototype.onconnect=function(){this.connected=!0,this.disconnected=!1,this.emit("connect"),this.emitBuffered()},i.prototype.emitBuffered=function(){var e;for(e=0;e<this.receiveBuffer.length;e++)d.apply(this,this.receiveBuffer[e]);for(this.receiveBuffer=[],e=0;e<this.sendBuffer.length;e++)this.packet(this.sendBuffer[e]);this.sendBuffer=[]},i.prototype.ondisconnect=function(){c("server disconnect (%s)",this.nsp),this.destroy(),this.onclose("io server disconnect")},i.prototype.destroy=function(){if(this.subs){for(var e=0;e<this.subs.length;e++)this.subs[e].destroy();this.subs=null}this.io.destroy(this)},i.prototype.close=i.prototype.disconnect=function(){return this.connected&&(c("performing disconnect (%s)",this.nsp),this.packet({type:n.DISCONNECT})),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}},{"./on":241,"component-bind":244,"component-emitter":245,debug:246,"has-binary":274,"socket.io-parser":280,"to-array":284}],243:[function(e,t){(function(r){function i(e,t){var i=e,t=t||r.location;return null==e&&(e=t.protocol+"//"+t.hostname),"string"==typeof e&&("/"==e.charAt(0)&&(e="/"==e.charAt(1)?t.protocol+e:t.hostname+e),/^(https?|wss?):\/\//.test(e)||(o("protocol-less url %s",e),e="undefined"!=typeof t?t.protocol+"//"+e:"https://"+e),o("parse %s",e),i=n(e)),i.port||(/^(http|ws)$/.test(i.protocol)?i.port="80":/^(http|ws)s$/.test(i.protocol)&&(i.port="443")),i.path=i.path||"/",i.id=i.protocol+"://"+i.host+":"+i.port,i.href=i.protocol+"://"+i.host+(t&&t.port==i.port?"":":"+i.port),i}var n=e("parseuri"),o=e("debug")("socket.io-client:url");t.exports=i}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{debug:246,parseuri:278}],244:[function(e,t){var r=[].slice;t.exports=function(e,t){if("string"==typeof t&&(t=e[t]),"function"!=typeof t)throw new Error("bind() requires a function");var i=r.call(arguments,2);return function(){return t.apply(e,i.concat(r.call(arguments)))}}},{}],245:[function(e,t){function r(e){return e?i(e):void 0}function i(e){for(var t in r.prototype)e[t]=r.prototype[t];return e}t.exports=r,r.prototype.on=r.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks[e]=this._callbacks[e]||[]).push(t),this},r.prototype.once=function(e,t){function r(){i.off(e,r),t.apply(this,arguments)}var i=this;return this._callbacks=this._callbacks||{},r.fn=t,this.on(e,r),this},r.prototype.off=r.prototype.removeListener=r.prototype.removeAllListeners=r.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var r=this._callbacks[e];if(!r)return this;if(1==arguments.length)return delete this._callbacks[e],this;for(var i,n=0;n<r.length;n++)if(i=r[n],i===t||i.fn===t){r.splice(n,1);break}return this},r.prototype.emit=function(e){this._callbacks=this._callbacks||{};var t=[].slice.call(arguments,1),r=this._callbacks[e];if(r){r=r.slice(0);for(var i=0,n=r.length;n>i;++i)r[i].apply(this,t)}return this},r.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks[e]||[]},r.prototype.hasListeners=function(e){return!!this.listeners(e).length}},{}],246:[function(e,t){function r(e){return r.enabled(e)?function(t){t=i(t);var n=new Date,o=n-(r[e]||n);r[e]=n,t=e+" "+t+" +"+r.humanize(o),window.console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)}:function(){}}function i(e){return e instanceof Error?e.stack||e.message:e}t.exports=r,r.names=[],r.skips=[],r.enable=function(e){try{localStorage.debug=e}catch(e){}for(var t=(e||"").split(/[\s,]+/),i=t.length,n=0;i>n;n++)e=t[n].replace("*",".*?"),"-"===e[0]?r.skips.push(new RegExp("^"+e.substr(1)+"$")):r.names.push(new RegExp("^"+e+"$"))},r.disable=function(){r.enable("")},r.humanize=function(e){var t=1e3,r=6e4,i=60*r;return e>=i?(e/i).toFixed(1)+"h":e>=r?(e/r).toFixed(1)+"m":e>=t?(e/t|0)+"s":e+"ms"},r.enabled=function(e){for(var t=0,i=r.skips.length;i>t;t++)if(r.skips[t].test(e))return!1;for(var t=0,i=r.names.length;i>t;t++)if(r.names[t].test(e))return!0;return!1};try{window.localStorage&&r.enable(localStorage.debug)}catch(e){}},{}],247:[function(e,t){t.exports=e("./lib/")},{"./lib/":248}],248:[function(e,t){t.exports=e("./socket"),t.exports.parser=e("engine.io-parser")},{"./socket":249,"engine.io-parser":261}],249:[function(e,t){(function(r){function i(e,t){if(!(this instanceof i))return new i(e,t);if(t=t||{},e&&"object"==typeof e&&(t=e,e=null),e&&(e=u(e),t.host=e.host,t.secure="https"==e.protocol||"wss"==e.protocol,t.port=e.port,e.query&&(t.query=e.query)),this.secure=null!=t.secure?t.secure:r.location&&"https:"==location.protocol,t.host){var n=t.host.split(":");t.hostname=n.shift(),n.length&&(t.port=n.pop())}this.agent=t.agent||!1,this.hostname=t.hostname||(r.location?location.hostname:"localhost"),this.port=t.port||(r.location&&location.port?location.port:this.secure?443:80),this.query=t.query||{},"string"==typeof this.query&&(this.query=d.decode(this.query)),this.upgrade=!1!==t.upgrade,this.path=(t.path||"/engine.io").replace(/\/$/,"")+"/",this.forceJSONP=!!t.forceJSONP,this.jsonp=!1!==t.jsonp,this.forceBase64=!!t.forceBase64,this.enablesXDR=!!t.enablesXDR,this.timestampParam=t.timestampParam||"t",this.timestampRequests=t.timestampRequests,this.transports=t.transports||["polling","websocket"],this.readyState="",this.writeBuffer=[],this.callbackBuffer=[],this.policyPort=t.policyPort||843,this.rememberUpgrade=t.rememberUpgrade||!1,this.open(),this.binaryType=null,this.onlyBinaryUpgrades=t.onlyBinaryUpgrades}function n(e){var t={};for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);return t}var o=e("./transports"),s=e("component-emitter"),a=e("debug")("engine.io-client:socket"),h=e("indexof"),c=e("engine.io-parser"),u=e("parseuri"),f=e("parsejson"),d=e("parseqs");t.exports=i,i.priorWebsocketSuccess=!1,s(i.prototype),i.protocol=c.protocol,i.Socket=i,i.Transport=e("./transport"),i.transports=e("./transports"),i.parser=e("engine.io-parser"),i.prototype.createTransport=function(e){a('creating transport "%s"',e);var t=n(this.query);t.EIO=c.protocol,t.transport=e,this.id&&(t.sid=this.id);var r=new o[e]({agent:this.agent,hostname:this.hostname,port:this.port,secure:this.secure,path:this.path,query:t,forceJSONP:this.forceJSONP,jsonp:this.jsonp,forceBase64:this.forceBase64,enablesXDR:this.enablesXDR,timestampRequests:this.timestampRequests,timestampParam:this.timestampParam,policyPort:this.policyPort,socket:this});return r},i.prototype.open=function(){var e;if(this.rememberUpgrade&&i.priorWebsocketSuccess&&-1!=this.transports.indexOf("websocket"))e="websocket";else{if(0==this.transports.length){var t=this;return void setTimeout(function(){t.emit("error","No transports available")},0)}e=this.transports[0]}this.readyState="opening";var e;try{e=this.createTransport(e)}catch(e){return this.transports.shift(),void this.open()}e.open(),this.setTransport(e)},i.prototype.setTransport=function(e){a("setting transport %s",e.name);var t=this;this.transport&&(a("clearing existing transport %s",this.transport.name),this.transport.removeAllListeners()),this.transport=e,e.on("drain",function(){t.onDrain()}).on("packet",function(e){t.onPacket(e)}).on("error",function(e){t.onError(e)}).on("close",function(){t.onClose("transport close")})},i.prototype.probe=function(e){function t(){if(d.onlyBinaryUpgrades){var t=!this.supportsBinary&&d.transport.supportsBinary;f=f||t}f||(a('probe transport "%s" opened',e),u.send([{type:"ping",data:"probe"}]),u.once("packet",function(t){if(!f)if("pong"==t.type&&"probe"==t.data){if(a('probe transport "%s" pong',e),d.upgrading=!0,d.emit("upgrading",u),!u)return;i.priorWebsocketSuccess="websocket"==u.name,a('pausing current transport "%s"',d.transport.name),d.transport.pause(function(){f||"closed"!=d.readyState&&(a("changing transport and sending upgrade packet"),c(),d.setTransport(u),u.send([{type:"upgrade"}]),d.emit("upgrade",u),u=null,d.upgrading=!1,d.flush())})}else{a('probe transport "%s" failed',e);var r=new Error("probe error");r.transport=u.name,d.emit("upgradeError",r)}}))}function r(){f||(f=!0,c(),u.close(),u=null)}function n(t){var i=new Error("probe error: "+t);i.transport=u.name,r(),a('probe transport "%s" failed because of error: %s',e,t),d.emit("upgradeError",i)}function o(){n("transport closed")}function s(){n("socket closed")}function h(e){u&&e.name!=u.name&&(a('"%s" works - aborting "%s"',e.name,u.name),r())}function c(){u.removeListener("open",t),u.removeListener("error",n),u.removeListener("close",o),d.removeListener("close",s),d.removeListener("upgrading",h)}a('probing transport "%s"',e);var u=this.createTransport(e,{probe:1}),f=!1,d=this;i.priorWebsocketSuccess=!1,u.once("open",t),u.once("error",n),u.once("close",o),this.once("close",s),this.once("upgrading",h),u.open()},i.prototype.onOpen=function(){if(a("socket open"),this.readyState="open",i.priorWebsocketSuccess="websocket"==this.transport.name,this.emit("open"),this.flush(),"open"==this.readyState&&this.upgrade&&this.transport.pause){a("starting upgrade probes");for(var e=0,t=this.upgrades.length;t>e;e++)this.probe(this.upgrades[e])}},i.prototype.onPacket=function(e){if("opening"==this.readyState||"open"==this.readyState)switch(a('socket receive: type "%s", data "%s"',e.type,e.data),this.emit("packet",e),this.emit("heartbeat"),e.type){case"open":this.onHandshake(f(e.data));break;case"pong":this.setPing();break;case"error":var t=new Error("server error");t.code=e.data,this.emit("error",t);break;case"message":this.emit("data",e.data),this.emit("message",e.data)}else a('packet received with socket readyState "%s"',this.readyState)},i.prototype.onHandshake=function(e){this.emit("handshake",e),this.id=e.sid,this.transport.query.sid=e.sid,this.upgrades=this.filterUpgrades(e.upgrades),this.pingInterval=e.pingInterval,this.pingTimeout=e.pingTimeout,this.onOpen(),"closed"!=this.readyState&&(this.setPing(),this.removeListener("heartbeat",this.onHeartbeat),this.on("heartbeat",this.onHeartbeat))},i.prototype.onHeartbeat=function(e){clearTimeout(this.pingTimeoutTimer);var t=this;t.pingTimeoutTimer=setTimeout(function(){"closed"!=t.readyState&&t.onClose("ping timeout")},e||t.pingInterval+t.pingTimeout)},i.prototype.setPing=function(){var e=this;clearTimeout(e.pingIntervalTimer),e.pingIntervalTimer=setTimeout(function(){a("writing ping packet - expecting pong within %sms",e.pingTimeout),e.ping(),e.onHeartbeat(e.pingTimeout)},e.pingInterval)},i.prototype.ping=function(){this.sendPacket("ping")},i.prototype.onDrain=function(){for(var e=0;e<this.prevBufferLen;e++)this.callbackBuffer[e]&&this.callbackBuffer[e]();this.writeBuffer.splice(0,this.prevBufferLen),this.callbackBuffer.splice(0,this.prevBufferLen),this.prevBufferLen=0,0==this.writeBuffer.length?this.emit("drain"):this.flush()},i.prototype.flush=function(){"closed"!=this.readyState&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length&&(a("flushing %d packets in socket",this.writeBuffer.length),this.transport.send(this.writeBuffer),this.prevBufferLen=this.writeBuffer.length,this.emit("flush"))},i.prototype.write=i.prototype.send=function(e,t){return this.sendPacket("message",e,t),this},i.prototype.sendPacket=function(e,t,r){if("closing"!=this.readyState&&"closed"!=this.readyState){var i={type:e,data:t};this.emit("packetCreate",i),this.writeBuffer.push(i),this.callbackBuffer.push(r),this.flush()}},i.prototype.close=function(){function e(){i.onClose("forced close"),a("socket closing - telling transport to close"),i.transport.close()}function t(){i.removeListener("upgrade",t),i.removeListener("upgradeError",t),e()}function r(){i.once("upgrade",t),i.once("upgradeError",t)}if("opening"==this.readyState||"open"==this.readyState){this.readyState="closing";var i=this;this.writeBuffer.length?this.once("drain",function(){this.upgrading?r():e()}):this.upgrading?r():e()}return this},i.prototype.onError=function(e){a("socket error %j",e),i.priorWebsocketSuccess=!1,this.emit("error",e),this.onClose("transport error",e)},i.prototype.onClose=function(e,t){if("opening"==this.readyState||"open"==this.readyState||"closing"==this.readyState){a('socket close with reason: "%s"',e);var r=this;clearTimeout(this.pingIntervalTimer),clearTimeout(this.pingTimeoutTimer),setTimeout(function(){r.writeBuffer=[],r.callbackBuffer=[],r.prevBufferLen=0},0),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),this.readyState="closed",this.id=null,this.emit("close",e,t)}},i.prototype.filterUpgrades=function(e){for(var t=[],r=0,i=e.length;i>r;r++)~h(this.transports,e[r])&&t.push(e[r]);return t}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./transport":250,"./transports":251,"component-emitter":245,debug:258,"engine.io-parser":261,indexof:276,parsejson:270,parseqs:271,parseuri:272}],250:[function(e,t){function r(e){this.path=e.path,this.hostname=e.hostname,this.port=e.port,this.secure=e.secure,this.query=e.query,this.timestampParam=e.timestampParam,this.timestampRequests=e.timestampRequests,this.readyState="",this.agent=e.agent||!1,this.socket=e.socket,this.enablesXDR=e.enablesXDR}var i=e("engine.io-parser"),n=e("component-emitter");t.exports=r,n(r.prototype),r.timestamps=0,r.prototype.onError=function(e,t){var r=new Error(e);return r.type="TransportError",r.description=t,this.emit("error",r),this},r.prototype.open=function(){return("closed"==this.readyState||""==this.readyState)&&(this.readyState="opening",this.doOpen()),this},r.prototype.close=function(){return("opening"==this.readyState||"open"==this.readyState)&&(this.doClose(),this.onClose()),this},r.prototype.send=function(e){if("open"!=this.readyState)throw new Error("Transport not open");this.write(e)},r.prototype.onOpen=function(){this.readyState="open",this.writable=!0,this.emit("open")},r.prototype.onData=function(e){var t=i.decodePacket(e,this.socket.binaryType);this.onPacket(t)},r.prototype.onPacket=function(e){this.emit("packet",e)},r.prototype.onClose=function(){this.readyState="closed",this.emit("close")}},{"component-emitter":245,"engine.io-parser":261}],251:[function(e,t,r){(function(t){function i(e){var r,i=!1,a=!1,h=!1!==e.jsonp;if(t.location){var c="https:"==location.protocol,u=location.port;u||(u=c?443:80),i=e.hostname!=location.hostname||u!=e.port,a=e.secure!=c}if(e.xdomain=i,e.xscheme=a,r=new n(e),"open"in r&&!e.forceJSONP)return new o(e);if(!h)throw new Error("JSONP disabled");return new s(e)}var n=e("xmlhttprequest"),o=e("./polling-xhr"),s=e("./polling-jsonp"),a=e("./websocket");r.polling=i,r.websocket=a}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./polling-jsonp":252,"./polling-xhr":253,"./websocket":255,xmlhttprequest:256}],252:[function(e,t){(function(r){function i(){}function n(e){o.call(this,e),this.query=this.query||{},a||(r.___eio||(r.___eio=[]),a=r.___eio),this.index=a.length;var t=this;a.push(function(e){t.onData(e)}),this.query.j=this.index,r.document&&r.addEventListener&&r.addEventListener("beforeunload",function(){t.script&&(t.script.onerror=i)},!1)}var o=e("./polling"),s=e("component-inherit");t.exports=n;var a,h=/\n/g,c=/\\n/g;s(n,o),n.prototype.supportsBinary=!1,n.prototype.doClose=function(){this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),this.form&&(this.form.parentNode.removeChild(this.form),this.form=null,this.iframe=null),o.prototype.doClose.call(this)},n.prototype.doPoll=function(){var e=this,t=document.createElement("script");this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),t.async=!0,t.src=this.uri(),t.onerror=function(t){e.onError("jsonp poll error",t)};var r=document.getElementsByTagName("script")[0];r.parentNode.insertBefore(t,r),this.script=t;var i="undefined"!=typeof navigator&&/gecko/i.test(navigator.userAgent);i&&setTimeout(function(){var e=document.createElement("iframe");document.body.appendChild(e),document.body.removeChild(e)},100)},n.prototype.doWrite=function(e,t){function r(){i(),t()}function i(){if(n.iframe)try{n.form.removeChild(n.iframe)}catch(e){n.onError("jsonp polling iframe removal error",e)}try{var e='<iframe src="javascript:0" name="'+n.iframeId+'">';o=document.createElement(e)}catch(e){o=document.createElement("iframe"),o.name=n.iframeId,o.src="javascript:0"}o.id=n.iframeId,n.form.appendChild(o),n.iframe=o}var n=this;if(!this.form){var o,s=document.createElement("form"),a=document.createElement("textarea"),u=this.iframeId="eio_iframe_"+this.index;s.className="socketio",s.style.position="absolute",s.style.top="-1000px",s.style.left="-1000px",s.target=u,s.method="POST",s.setAttribute("accept-charset","utf-8"),a.name="d",s.appendChild(a),document.body.appendChild(s),this.form=s,this.area=a}this.form.action=this.uri(),i(),e=e.replace(c,"\\\n"),this.area.value=e.replace(h,"\\n");try{this.form.submit()}catch(e){}this.iframe.attachEvent?this.iframe.onreadystatechange=function(){"complete"==n.iframe.readyState&&r()}:this.iframe.onload=r}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./polling":254,"component-inherit":257}],253:[function(e,t){(function(r){function i(){}function n(e){if(h.call(this,e),r.location){var t="https:"==location.protocol,i=location.port;i||(i=t?443:80),this.xd=e.hostname!=r.location.hostname||i!=e.port,this.xs=e.secure!=t}}function o(e){this.method=e.method||"GET",this.uri=e.uri,this.xd=!!e.xd,this.xs=!!e.xs,this.async=!1!==e.async,this.data=void 0!=e.data?e.data:null,this.agent=e.agent,this.isBinary=e.isBinary,this.supportsBinary=e.supportsBinary,this.enablesXDR=e.enablesXDR,this.create()}function s(){for(var e in o.requests)o.requests.hasOwnProperty(e)&&o.requests[e].abort()}var a=e("xmlhttprequest"),h=e("./polling"),c=e("component-emitter"),u=e("component-inherit"),f=e("debug")("engine.io-client:polling-xhr");t.exports=n,t.exports.Request=o,u(n,h),n.prototype.supportsBinary=!0,n.prototype.request=function(e){return e=e||{},e.uri=this.uri(),e.xd=this.xd,e.xs=this.xs,e.agent=this.agent||!1,e.supportsBinary=this.supportsBinary,e.enablesXDR=this.enablesXDR,new o(e)},n.prototype.doWrite=function(e,t){var r="string"!=typeof e&&void 0!==e,i=this.request({method:"POST",data:e,isBinary:r}),n=this;i.on("success",t),i.on("error",function(e){n.onError("xhr post error",e)}),this.sendXhr=i},n.prototype.doPoll=function(){f("xhr poll");var e=this.request(),t=this;e.on("data",function(e){t.onData(e)}),e.on("error",function(e){t.onError("xhr poll error",e)}),this.pollXhr=e},c(o.prototype),o.prototype.create=function(){var e=this.xhr=new a({agent:this.agent,xdomain:this.xd,xscheme:this.xs,enablesXDR:this.enablesXDR}),t=this;try{if(f("xhr open %s: %s",this.method,this.uri),e.open(this.method,this.uri,this.async),this.supportsBinary&&(e.responseType="arraybuffer"),"POST"==this.method)try{this.isBinary?e.setRequestHeader("Content-type","application/octet-stream"):e.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch(e){}"withCredentials"in e&&(e.withCredentials=!0),this.hasXDR()?(e.onload=function(){t.onLoad()},e.onerror=function(){t.onError(e.responseText)}):e.onreadystatechange=function(){4==e.readyState&&(200==e.status||1223==e.status?t.onLoad():setTimeout(function(){t.onError(e.status)},0))},f("xhr data %s",this.data),e.send(this.data)}catch(e){return void setTimeout(function(){t.onError(e)},0)}r.document&&(this.index=o.requestsCount++,o.requests[this.index]=this)},o.prototype.onSuccess=function(){this.emit("success"),this.cleanup()},o.prototype.onData=function(e){this.emit("data",e),this.onSuccess()},o.prototype.onError=function(e){this.emit("error",e),this.cleanup()},o.prototype.cleanup=function(){if("undefined"!=typeof this.xhr&&null!==this.xhr){this.hasXDR()?this.xhr.onload=this.xhr.onerror=i:this.xhr.onreadystatechange=i;try{this.xhr.abort()}catch(e){}r.document&&delete o.requests[this.index],this.xhr=null}},o.prototype.onLoad=function(){var e;try{var t;try{t=this.xhr.getResponseHeader("Content-Type").split(";")[0]}catch(e){}e="application/octet-stream"===t?this.xhr.response:this.supportsBinary?"ok":this.xhr.responseText}catch(e){this.onError(e)}null!=e&&this.onData(e)},o.prototype.hasXDR=function(){return"undefined"!=typeof r.XDomainRequest&&!this.xs&&this.enablesXDR},o.prototype.abort=function(){this.cleanup()},r.document&&(o.requestsCount=0,o.requests={},r.attachEvent?r.attachEvent("onunload",s):r.addEventListener&&r.addEventListener("beforeunload",s,!1))}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./polling":254,"component-emitter":245,"component-inherit":257,debug:258,xmlhttprequest:256}],254:[function(e,t){function r(e){var t=e&&e.forceBase64;(!h||t)&&(this.supportsBinary=!1),i.call(this,e)}var i=e("../transport"),n=e("parseqs"),o=e("engine.io-parser"),s=e("component-inherit"),a=e("debug")("engine.io-client:polling");t.exports=r;var h=function(){var t=e("xmlhttprequest"),r=new t({xdomain:!1});return null!=r.responseType}();s(r,i),r.prototype.name="polling",r.prototype.doOpen=function(){this.poll()},r.prototype.pause=function(e){function t(){a("paused"),r.readyState="paused",e()}var r=this;if(this.readyState="pausing",this.polling||!this.writable){var i=0;this.polling&&(a("we are currently polling - waiting to pause"),i++,this.once("pollComplete",function(){a("pre-pause polling complete"),--i||t()})),this.writable||(a("we are currently writing - waiting to pause"),i++,this.once("drain",function(){a("pre-pause writing complete"),--i||t()}))}else t()},r.prototype.poll=function(){a("polling"),this.polling=!0,this.doPoll(),this.emit("poll")},r.prototype.onData=function(e){var t=this;a("polling got data %s",e);var r=function(e){return"opening"==t.readyState&&t.onOpen(),"close"==e.type?(t.onClose(),!1):void t.onPacket(e)};o.decodePayload(e,this.socket.binaryType,r),"closed"!=this.readyState&&(this.polling=!1,this.emit("pollComplete"),"open"==this.readyState?this.poll():a('ignoring poll - transport state "%s"',this.readyState))},r.prototype.doClose=function(){function e(){a("writing close packet"),t.write([{type:"close"}])}var t=this;"open"==this.readyState?(a("transport open - closing"),e()):(a("transport not open - deferring close"),this.once("open",e))},r.prototype.write=function(e){var t=this;this.writable=!1;var r=function(){t.writable=!0,t.emit("drain")},t=this;o.encodePayload(e,this.supportsBinary,function(e){t.doWrite(e,r)})},r.prototype.uri=function(){var e=this.query||{},t=this.secure?"https":"http",r="";return!1!==this.timestampRequests&&(e[this.timestampParam]=+new Date+"-"+i.timestamps++),this.supportsBinary||e.sid||(e.b64=1),e=n.encode(e),this.port&&("https"==t&&443!=this.port||"http"==t&&80!=this.port)&&(r=":"+this.port),e.length&&(e="?"+e),t+"://"+this.hostname+r+this.path+e}},{"../transport":250,"component-inherit":257,debug:258,"engine.io-parser":261,parseqs:271,xmlhttprequest:256}],255:[function(e,t){function r(e){var t=e&&e.forceBase64;t&&(this.supportsBinary=!1),i.call(this,e)}var i=e("../transport"),n=e("engine.io-parser"),o=e("parseqs"),s=e("component-inherit"),a=e("debug")("engine.io-client:websocket"),h=e("ws");t.exports=r,s(r,i),r.prototype.name="websocket",r.prototype.supportsBinary=!0,r.prototype.doOpen=function(){if(this.check()){var e=this.uri(),t=void 0,r={agent:this.agent};this.ws=new h(e,t,r),void 0===this.ws.binaryType&&(this.supportsBinary=!1),this.ws.binaryType="arraybuffer",this.addEventListeners()}},r.prototype.addEventListeners=function(){var e=this;this.ws.onopen=function(){e.onOpen()},this.ws.onclose=function(){e.onClose()},this.ws.onmessage=function(t){e.onData(t.data)},this.ws.onerror=function(t){e.onError("websocket error",t)}},"undefined"!=typeof navigator&&/iPad|iPhone|iPod/i.test(navigator.userAgent)&&(r.prototype.onData=function(e){var t=this;setTimeout(function(){i.prototype.onData.call(t,e)},0)}),r.prototype.write=function(e){function t(){r.writable=!0,r.emit("drain")}var r=this;this.writable=!1;for(var i=0,o=e.length;o>i;i++)n.encodePacket(e[i],this.supportsBinary,function(e){try{r.ws.send(e)}catch(e){a("websocket closed before onclose event")}});setTimeout(t,0)},r.prototype.onClose=function(){i.prototype.onClose.call(this)},r.prototype.doClose=function(){"undefined"!=typeof this.ws&&this.ws.close()},r.prototype.uri=function(){var e=this.query||{},t=this.secure?"wss":"ws",r="";return this.port&&("wss"==t&&443!=this.port||"ws"==t&&80!=this.port)&&(r=":"+this.port),this.timestampRequests&&(e[this.timestampParam]=+new Date),this.supportsBinary||(e.b64=1),e=o.encode(e),e.length&&(e="?"+e),t+"://"+this.hostname+r+this.path+e},r.prototype.check=function(){return!(!h||"__initialize"in h&&this.name===r.prototype.name)}},{"../transport":250,"component-inherit":257,debug:258,"engine.io-parser":261,parseqs:271,ws:273}],256:[function(e,t){var r=e("has-cors");t.exports=function(e){var t=e.xdomain,i=e.xscheme,n=e.enablesXDR;try{if("undefined"!=typeof XMLHttpRequest&&(!t||r))return new XMLHttpRequest}catch(e){}try{if("undefined"!=typeof XDomainRequest&&!i&&n)return new XDomainRequest}catch(e){}if(!t)try{return new ActiveXObject("Microsoft.XMLHTTP")}catch(e){}}},{"has-cors":268}],257:[function(e,t){t.exports=function(e,t){var r=function(){};r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e}},{}],258:[function(e,t,r){function i(){return"WebkitAppearance"in document.documentElement.style||window.console&&(console.firebug||console.exception&&console.table)||navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31}function n(){var e=arguments,t=this.useColors;if(e[0]=(t?"%c":"")+this.namespace+(t?" %c":" ")+e[0]+(t?"%c ":" ")+"+"+r.humanize(this.diff),!t)return e;var i="color: "+this.color;e=[e[0],i,"color: inherit"].concat(Array.prototype.slice.call(e,1));var n=0,o=0;return e[0].replace(/%[a-z%]/g,function(e){"%%"!==e&&(n++,"%c"===e&&(o=n))}),e.splice(o,0,i),e}function o(){return"object"==typeof console&&"function"==typeof console.log&&Function.prototype.apply.call(console.log,console,arguments)}function s(e){try{null==e?localStorage.removeItem("debug"):localStorage.debug=e}catch(e){}}function a(){var e;try{e=localStorage.debug}catch(e){}return e}r=t.exports=e("./debug"),r.log=o,r.formatArgs=n,r.save=s,r.load=a,r.useColors=i,r.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"],r.formatters.j=function(e){return JSON.stringify(e)},r.enable(a())},{"./debug":259}],259:[function(e,t,r){function i(){return r.colors[u++%r.colors.length]}function n(e){function t(){}function n(){var e=n,t=+new Date,o=t-(c||t);e.diff=o,e.prev=c,e.curr=t,c=t,null==e.useColors&&(e.useColors=r.useColors()),null==e.color&&e.useColors&&(e.color=i());var s=Array.prototype.slice.call(arguments);s[0]=r.coerce(s[0]),"string"!=typeof s[0]&&(s=["%o"].concat(s));var a=0;s[0]=s[0].replace(/%([a-z%])/g,function(t,i){if("%%"===t)return t;a++;var n=r.formatters[i];if("function"==typeof n){var o=s[a];t=n.call(e,o),s.splice(a,1),a--}return t}),"function"==typeof r.formatArgs&&(s=r.formatArgs.apply(e,s));var h=n.log||r.log||console.log.bind(console);h.apply(e,s)}t.enabled=!1,n.enabled=!0;var o=r.enabled(e)?n:t;return o.namespace=e,o}function o(e){r.save(e);for(var t=(e||"").split(/[\s,]+/),i=t.length,n=0;i>n;n++)t[n]&&(e=t[n].replace(/\*/g,".*?"),"-"===e[0]?r.skips.push(new RegExp("^"+e.substr(1)+"$")):r.names.push(new RegExp("^"+e+"$")))}function s(){r.enable("")}function a(e){var t,i;for(t=0,i=r.skips.length;i>t;t++)if(r.skips[t].test(e))return!1;for(t=0,i=r.names.length;i>t;t++)if(r.names[t].test(e))return!0;return!1}function h(e){return e instanceof Error?e.stack||e.message:e}r=t.exports=n,r.coerce=h,r.disable=s,r.enable=o,r.enabled=a,r.humanize=e("ms"),r.names=[],r.skips=[],r.formatters={};var c,u=0},{ms:260}],260:[function(e,t){function r(e){var t=/^((?:\d+)?\.?\d+) *(ms|seconds?|s|minutes?|m|hours?|h|days?|d|years?|y)?$/i.exec(e);if(t){var r=parseFloat(t[1]),i=(t[2]||"ms").toLowerCase();switch(i){case"years":case"year":case"y":return r*u;case"days":case"day":case"d":return r*c;case"hours":case"hour":case"h":return r*h;case"minutes":case"minute":case"m":return r*a;case"seconds":case"second":case"s":return r*s;case"ms":return r}}}function i(e){return e>=c?Math.round(e/c)+"d":e>=h?Math.round(e/h)+"h":e>=a?Math.round(e/a)+"m":e>=s?Math.round(e/s)+"s":e+"ms"}function n(e){return o(e,c,"day")||o(e,h,"hour")||o(e,a,"minute")||o(e,s,"second")||e+" ms"}function o(e,t,r){return t>e?void 0:1.5*t>e?Math.floor(e/t)+" "+r:Math.ceil(e/t)+" "+r+"s"}var s=1e3,a=60*s,h=60*a,c=24*h,u=365.25*c;t.exports=function(e,t){return t=t||{},"string"==typeof e?r(e):t.long?n(e):i(e)}},{}],261:[function(e,t,r){(function(t){function i(e,t,i){if(!t)return r.encodeBase64Packet(e,i);var n=e.data,o=new Uint8Array(n),s=new Uint8Array(1+n.byteLength);s[0]=l[e.type];for(var a=0;a<o.length;a++)s[a+1]=o[a];return i(s.buffer)}function n(e,t,i){if(!t)return r.encodeBase64Packet(e,i);var n=new FileReader;return n.onload=function(){e.data=n.result,r.encodePacket(e,t,!0,i)},n.readAsArrayBuffer(e.data)}function o(e,t,i){if(!t)return r.encodeBase64Packet(e,i);if(d)return n(e,t,i);var o=new Uint8Array(1);o[0]=l[e.type];var s=new m([o.buffer,e.data]);return i(s)}function s(e,t,r){for(var i=new Array(e.length),n=u(e.length,r),o=function(e,r,n){t(r,function(t,r){i[e]=r,n(t,i)})},s=0;s<e.length;s++)o(s,e[s],n)}var a=e("./keys"),h=e("arraybuffer.slice"),c=e("base64-arraybuffer"),u=e("after"),f=e("utf8"),d=navigator.userAgent.match(/Android/i);r.protocol=3;var l=r.packets={open:0,close:1,ping:2,pong:3,message:4,upgrade:5,noop:6},p=a(l),b={type:"error",data:"parser error"},m=e("blob");r.encodePacket=function(e,r,n,s){"function"==typeof r&&(s=r,r=!1),"function"==typeof n&&(s=n,n=null);var a=void 0===e.data?void 0:e.data.buffer||e.data;if(t.ArrayBuffer&&a instanceof ArrayBuffer)return i(e,r,s);if(m&&a instanceof t.Blob)return o(e,r,s);var h=l[e.type];return void 0!==e.data&&(h+=n?f.encode(String(e.data)):String(e.data)),s(""+h)},r.encodeBase64Packet=function(e,i){var n="b"+r.packets[e.type];if(m&&e.data instanceof m){var o=new FileReader;return o.onload=function(){var e=o.result.split(",")[1];i(n+e)},o.readAsDataURL(e.data)}var s;try{s=String.fromCharCode.apply(null,new Uint8Array(e.data))}catch(t){for(var a=new Uint8Array(e.data),h=new Array(a.length),c=0;c<a.length;c++)h[c]=a[c];s=String.fromCharCode.apply(null,h)}return n+=t.btoa(s),i(n)},r.decodePacket=function(e,t,i){if("string"==typeof e||void 0===e){if("b"==e.charAt(0))return r.decodeBase64Packet(e.substr(1),t);if(i)try{e=f.decode(e)}catch(e){return b}var n=e.charAt(0);return Number(n)==n&&p[n]?e.length>1?{type:p[n],data:e.substring(1)}:{type:p[n]}:b}var o=new Uint8Array(e),n=o[0],s=h(e,1);return m&&"blob"===t&&(s=new m([s])),{type:p[n],data:s}},r.decodeBase64Packet=function(e,r){var i=p[e.charAt(0)];if(!t.ArrayBuffer)return{type:i,data:{base64:!0,data:e.substr(1)}};var n=c.decode(e.substr(1));return"blob"===r&&m&&(n=new m([n])),{type:i,data:n}},r.encodePayload=function(e,t,i){function n(e){return e.length+":"+e}function o(e,i){r.encodePacket(e,t,!0,function(e){i(null,n(e))})}return"function"==typeof t&&(i=t,t=null),t?m&&!d?r.encodePayloadAsBlob(e,i):r.encodePayloadAsArrayBuffer(e,i):e.length?void s(e,o,function(e,t){return i(t.join(""))}):i("0:")},r.decodePayload=function(e,t,i){if("string"!=typeof e)return r.decodePayloadAsBinary(e,t,i);"function"==typeof t&&(i=t,t=null);var n;if(""==e)return i(b,0,1);for(var o,s,a="",h=0,c=e.length;c>h;h++){var u=e.charAt(h);if(":"!=u)a+=u;else{if(""==a||a!=(o=Number(a)))return i(b,0,1);if(s=e.substr(h+1,o),a!=s.length)return i(b,0,1);if(s.length){if(n=r.decodePacket(s,t,!0),b.type==n.type&&b.data==n.data)return i(b,0,1);var f=i(n,h+o,c);if(!1===f)return}h+=o,a=""}}return""!=a?i(b,0,1):void 0},r.encodePayloadAsArrayBuffer=function(e,t){function i(e,t){r.encodePacket(e,!0,!0,function(e){return t(null,e)
})}return e.length?void s(e,i,function(e,r){var i=r.reduce(function(e,t){var r;return r="string"==typeof t?t.length:t.byteLength,e+r.toString().length+r+2},0),n=new Uint8Array(i),o=0;return r.forEach(function(e){var t="string"==typeof e,r=e;if(t){for(var i=new Uint8Array(e.length),s=0;s<e.length;s++)i[s]=e.charCodeAt(s);r=i.buffer}n[o++]=t?0:1;for(var a=r.byteLength.toString(),s=0;s<a.length;s++)n[o++]=parseInt(a[s]);n[o++]=255;for(var i=new Uint8Array(r),s=0;s<i.length;s++)n[o++]=i[s]}),t(n.buffer)}):t(new ArrayBuffer(0))},r.encodePayloadAsBlob=function(e,t){function i(e,t){r.encodePacket(e,!0,!0,function(e){var r=new Uint8Array(1);if(r[0]=1,"string"==typeof e){for(var i=new Uint8Array(e.length),n=0;n<e.length;n++)i[n]=e.charCodeAt(n);e=i.buffer,r[0]=0}for(var o=e instanceof ArrayBuffer?e.byteLength:e.size,s=o.toString(),a=new Uint8Array(s.length+1),n=0;n<s.length;n++)a[n]=parseInt(s[n]);if(a[s.length]=255,m){var h=new m([r.buffer,a.buffer,e]);t(null,h)}})}s(e,i,function(e,r){return t(new m(r))})},r.decodePayloadAsBinary=function(e,t,i){"function"==typeof t&&(i=t,t=null);for(var n=e,o=[],s=!1;n.byteLength>0;){for(var a=new Uint8Array(n),c=0===a[0],u="",f=1;255!=a[f];f++){if(u.length>310){s=!0;break}u+=a[f]}if(s)return i(b,0,1);n=h(n,2+u.length),u=parseInt(u);var d=h(n,0,u);if(c)try{d=String.fromCharCode.apply(null,new Uint8Array(d))}catch(e){var l=new Uint8Array(d);d="";for(var f=0;f<l.length;f++)d+=String.fromCharCode(l[f])}o.push(d),n=h(n,u)}var p=o.length;o.forEach(function(e,n){i(r.decodePacket(e,t,!0),n,p)})}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./keys":262,after:263,"arraybuffer.slice":264,"base64-arraybuffer":265,blob:266,utf8:267}],262:[function(e,t){t.exports=Object.keys||function(e){var t=[],r=Object.prototype.hasOwnProperty;for(var i in e)r.call(e,i)&&t.push(i);return t}},{}],263:[function(e,t){function r(e,t,r){function n(e,i){if(n.count<=0)throw new Error("after called too many times");--n.count,e?(o=!0,t(e),t=r):0!==n.count||o||t(null,i)}var o=!1;return r=r||i,n.count=e,0===e?t():n}function i(){}t.exports=r},{}],264:[function(e,t){t.exports=function(e,t,r){var i=e.byteLength;if(t=t||0,r=r||i,e.slice)return e.slice(t,r);if(0>t&&(t+=i),0>r&&(r+=i),r>i&&(r=i),t>=i||t>=r||0===i)return new ArrayBuffer(0);for(var n=new Uint8Array(e),o=new Uint8Array(r-t),s=t,a=0;r>s;s++,a++)o[a]=n[s];return o.buffer}},{}],265:[function(e,t,r){!function(e){"use strict";r.encode=function(t){var r,i=new Uint8Array(t),n=i.length,o="";for(r=0;n>r;r+=3)o+=e[i[r]>>2],o+=e[(3&i[r])<<4|i[r+1]>>4],o+=e[(15&i[r+1])<<2|i[r+2]>>6],o+=e[63&i[r+2]];return n%3===2?o=o.substring(0,o.length-1)+"=":n%3===1&&(o=o.substring(0,o.length-2)+"=="),o},r.decode=function(t){var r,i,n,o,s,a=.75*t.length,h=t.length,c=0;"="===t[t.length-1]&&(a--,"="===t[t.length-2]&&a--);var u=new ArrayBuffer(a),f=new Uint8Array(u);for(r=0;h>r;r+=4)i=e.indexOf(t[r]),n=e.indexOf(t[r+1]),o=e.indexOf(t[r+2]),s=e.indexOf(t[r+3]),f[c++]=i<<2|n>>4,f[c++]=(15&n)<<4|o>>2,f[c++]=(3&o)<<6|63&s;return u}}("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/")},{}],266:[function(e,t){(function(e){function r(e,t){t=t||{};for(var r=new i,n=0;n<e.length;n++)r.append(e[n]);return t.type?r.getBlob(t.type):r.getBlob()}var i=e.BlobBuilder||e.WebKitBlobBuilder||e.MSBlobBuilder||e.MozBlobBuilder,n=function(){try{var e=new Blob(["hi"]);return 2==e.size}catch(e){return!1}}(),o=i&&i.prototype.append&&i.prototype.getBlob;t.exports=function(){return n?e.Blob:o?r:void 0}()}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],267:[function(e,t,r){(function(e){!function(i){function n(e){for(var t,r,i=[],n=0,o=e.length;o>n;)t=e.charCodeAt(n++),t>=55296&&56319>=t&&o>n?(r=e.charCodeAt(n++),56320==(64512&r)?i.push(((1023&t)<<10)+(1023&r)+65536):(i.push(t),n--)):i.push(t);return i}function o(e){for(var t,r=e.length,i=-1,n="";++i<r;)t=e[i],t>65535&&(t-=65536,n+=g(t>>>10&1023|55296),t=56320|1023&t),n+=g(t);return n}function s(e,t){return g(e>>t&63|128)}function a(e){if(0==(4294967168&e))return g(e);var t="";return 0==(4294965248&e)?t=g(e>>6&31|192):0==(4294901760&e)?(t=g(e>>12&15|224),t+=s(e,6)):0==(4292870144&e)&&(t=g(e>>18&7|240),t+=s(e,12),t+=s(e,6)),t+=g(63&e|128)}function h(e){for(var t,r=n(e),i=r.length,o=-1,s="";++o<i;)t=r[o],s+=a(t);return s}function c(){if(v>=m)throw Error("Invalid byte index");var e=255&b[v];if(v++,128==(192&e))return 63&e;throw Error("Invalid continuation byte")}function u(){var e,t,r,i,n;if(v>m)throw Error("Invalid byte index");if(v==m)return!1;if(e=255&b[v],v++,0==(128&e))return e;if(192==(224&e)){var t=c();if(n=(31&e)<<6|t,n>=128)return n;throw Error("Invalid continuation byte")}if(224==(240&e)){if(t=c(),r=c(),n=(15&e)<<12|t<<6|r,n>=2048)return n;throw Error("Invalid continuation byte")}if(240==(248&e)&&(t=c(),r=c(),i=c(),n=(15&e)<<18|t<<12|r<<6|i,n>=65536&&1114111>=n))return n;throw Error("Invalid UTF-8 detected")}function f(e){b=n(e),m=b.length,v=0;for(var t,r=[];(t=u())!==!1;)r.push(t);return o(r)}var d="object"==typeof r&&r,l="object"==typeof t&&t&&t.exports==d&&t,p="object"==typeof e&&e;(p.global===p||p.window===p)&&(i=p);var b,m,v,g=String.fromCharCode,y={version:"2.0.0",encode:h,decode:f};if("function"==typeof define&&"object"==typeof define.amd&&define.amd)define(function(){return y});else if(d&&!d.nodeType)if(l)l.exports=y;else{var w={},_=w.hasOwnProperty;for(var x in y)_.call(y,x)&&(d[x]=y[x])}else i.utf8=y}(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],268:[function(e,t){var r=e("global");try{t.exports="XMLHttpRequest"in r&&"withCredentials"in new r.XMLHttpRequest}catch(e){t.exports=!1}},{global:269}],269:[function(e,t){t.exports=function(){return this}()},{}],270:[function(e,t){(function(e){var r=/^[\],:{}\s]*$/,i=/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,n=/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,o=/(?:^|:|,)(?:\s*\[)+/g,s=/^\s+/,a=/\s+$/;t.exports=function(t){return"string"==typeof t&&t?(t=t.replace(s,"").replace(a,""),e.JSON&&JSON.parse?JSON.parse(t):r.test(t.replace(i,"@").replace(n,"]").replace(o,""))?new Function("return "+t)():void 0):null}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],271:[function(e,t,r){r.encode=function(e){var t="";for(var r in e)e.hasOwnProperty(r)&&(t.length&&(t+="&"),t+=encodeURIComponent(r)+"="+encodeURIComponent(e[r]));return t},r.decode=function(e){for(var t={},r=e.split("&"),i=0,n=r.length;n>i;i++){var o=r[i].split("=");t[decodeURIComponent(o[0])]=decodeURIComponent(o[1])}return t}},{}],272:[function(e,t){var r=/^(?:(?![^:@]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,i=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];t.exports=function(e){var t=e,n=e.indexOf("["),o=e.indexOf("]");-1!=n&&-1!=o&&(e=e.substring(0,n)+e.substring(n,o).replace(/:/g,";")+e.substring(o,e.length));for(var s=r.exec(e||""),a={},h=14;h--;)a[i[h]]=s[h]||"";return-1!=n&&-1!=o&&(a.source=t,a.host=a.host.substring(1,a.host.length-1).replace(/;/g,":"),a.authority=a.authority.replace("[","").replace("]","").replace(/;/g,":"),a.ipv6uri=!0),a}},{}],273:[function(e,t){function r(e,t){var r;return r=t?new n(e,t):new n(e)}var i=function(){return this}(),n=i.WebSocket||i.MozWebSocket;t.exports=n?r:null,n&&(r.prototype=n.prototype)},{}],274:[function(e,t){(function(r){function i(e){function t(e){if(!e)return!1;if(r.Buffer&&r.Buffer.isBuffer(e)||r.ArrayBuffer&&e instanceof ArrayBuffer||r.Blob&&e instanceof Blob||r.File&&e instanceof File)return!0;if(n(e)){for(var i=0;i<e.length;i++)if(t(e[i]))return!0}else if(e&&"object"==typeof e){e.toJSON&&(e=e.toJSON());for(var o in e)if(e.hasOwnProperty(o)&&t(e[o]))return!0}return!1}return t(e)}var n=e("isarray");t.exports=i}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{isarray:275}],275:[function(e,t){t.exports=e(201)},{"/Volumes/Case Sensitive/perso/bonhomme/node_modules/browserify/node_modules/isarray/index.js":201}],276:[function(e,t){t.exports=e(219)},{"/Volumes/Case Sensitive/perso/bonhomme/node_modules/browserify/node_modules/vm-browserify/node_modules/indexof/index.js":219}],277:[function(e,t,r){var i=Object.prototype.hasOwnProperty;r.keys=Object.keys||function(e){var t=[];for(var r in e)i.call(e,r)&&t.push(r);return t},r.values=function(e){var t=[];for(var r in e)i.call(e,r)&&t.push(e[r]);return t},r.merge=function(e,t){for(var r in t)i.call(t,r)&&(e[r]=t[r]);return e},r.length=function(e){return r.keys(e).length},r.isEmpty=function(e){return 0==r.length(e)}},{}],278:[function(e,t){var r=/^(?:(?![^:@]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,i=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];t.exports=function(e){for(var t=r.exec(e||""),n={},o=14;o--;)n[i[o]]=t[o]||"";return n}},{}],279:[function(e,t,r){(function(t){var i=e("isarray"),n=e("./is-buffer");r.deconstructPacket=function(e){function t(e){if(!e)return e;if(n(e)){var o={_placeholder:!0,num:r.length};return r.push(e),o}if(i(e)){for(var s=new Array(e.length),a=0;a<e.length;a++)s[a]=t(e[a]);return s}if("object"==typeof e&&!(e instanceof Date)){var s={};for(var h in e)s[h]=t(e[h]);return s}return e}var r=[],o=e.data,s=e;return s.data=t(o),s.attachments=r.length,{packet:s,buffers:r}},r.reconstructPacket=function(e,t){function r(e){if(e&&e._placeholder){var n=t[e.num];return n}if(i(e)){for(var o=0;o<e.length;o++)e[o]=r(e[o]);return e}if(e&&"object"==typeof e){for(var s in e)e[s]=r(e[s]);return e}return e}return e.data=r(e.data),e.attachments=void 0,e},r.removeBlobs=function(e,r){function o(e,h,c){if(!e)return e;if(t.Blob&&e instanceof Blob||t.File&&e instanceof File){s++;var u=new FileReader;u.onload=function(){c?c[h]=this.result:a=this.result,--s||r(a)},u.readAsArrayBuffer(e)}else if(i(e))for(var f=0;f<e.length;f++)o(e[f],f,e);else if(e&&"object"==typeof e&&!n(e))for(var d in e)o(e[d],d,e)}var s=0,a=e;o(a),s||r(a)}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./is-buffer":281,isarray:282}],280:[function(e,t,r){function i(){}function n(e){var t="",i=!1;return t+=e.type,(r.BINARY_EVENT==e.type||r.BINARY_ACK==e.type)&&(t+=e.attachments,t+="-"),e.nsp&&"/"!=e.nsp&&(i=!0,t+=e.nsp),null!=e.id&&(i&&(t+=",",i=!1),t+=e.id),null!=e.data&&(i&&(t+=","),t+=f.stringify(e.data)),u("encoded %j as %s",e,t),t}function o(e,t){function r(e){var r=l.deconstructPacket(e),i=n(r.packet),o=r.buffers;o.unshift(i),t(o)}l.removeBlobs(e,r)}function s(){this.reconstructor=null}function a(e){var t={},i=0;if(t.type=Number(e.charAt(0)),null==r.types[t.type])return c();if(r.BINARY_EVENT==t.type||r.BINARY_ACK==t.type){for(t.attachments="";"-"!=e.charAt(++i);)t.attachments+=e.charAt(i);t.attachments=Number(t.attachments)}if("/"==e.charAt(i+1))for(t.nsp="";++i;){var n=e.charAt(i);if(","==n)break;if(t.nsp+=n,i+1==e.length)break}else t.nsp="/";var o=e.charAt(i+1);if(""!=o&&Number(o)==o){for(t.id="";++i;){var n=e.charAt(i);if(null==n||Number(n)!=n){--i;break}if(t.id+=e.charAt(i),i+1==e.length)break}t.id=Number(t.id)}if(e.charAt(++i))try{t.data=f.parse(e.substr(i))}catch(e){return c()}return u("decoded %s as %j",e,t),t}function h(e){this.reconPack=e,this.buffers=[]}function c(){return{type:r.ERROR,data:"parser error"}}var u=e("debug")("socket.io-parser"),f=e("json3"),d=(e("isarray"),e("component-emitter")),l=e("./binary"),p=e("./is-buffer");r.protocol=4,r.types=["CONNECT","DISCONNECT","EVENT","BINARY_EVENT","ACK","BINARY_ACK","ERROR"],r.CONNECT=0,r.DISCONNECT=1,r.EVENT=2,r.ACK=3,r.ERROR=4,r.BINARY_EVENT=5,r.BINARY_ACK=6,r.Encoder=i,r.Decoder=s,i.prototype.encode=function(e,t){if(u("encoding packet %j",e),r.BINARY_EVENT==e.type||r.BINARY_ACK==e.type)o(e,t);else{var i=n(e);t([i])}},d(s.prototype),s.prototype.add=function(e){var t;if("string"==typeof e)t=a(e),r.BINARY_EVENT==t.type||r.BINARY_ACK==t.type?(this.reconstructor=new h(t),0==this.reconstructor.reconPack.attachments&&this.emit("decoded",t)):this.emit("decoded",t);else{if(!p(e)&&!e.base64)throw new Error("Unknown type: "+e);if(!this.reconstructor)throw new Error("got binary data when not reconstructing a packet");t=this.reconstructor.takeBinaryData(e),t&&(this.reconstructor=null,this.emit("decoded",t))}},s.prototype.destroy=function(){this.reconstructor&&this.reconstructor.finishedReconstruction()},h.prototype.takeBinaryData=function(e){if(this.buffers.push(e),this.buffers.length==this.reconPack.attachments){var t=l.reconstructPacket(this.reconPack,this.buffers);return this.finishedReconstruction(),t}return null},h.prototype.finishedReconstruction=function(){this.reconPack=null,this.buffers=[]}},{"./binary":279,"./is-buffer":281,"component-emitter":245,debug:246,isarray:282,json3:283}],281:[function(e,t){(function(e){function r(t){return e.Buffer&&e.Buffer.isBuffer(t)||e.ArrayBuffer&&t instanceof ArrayBuffer}t.exports=r}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],282:[function(e,t){t.exports=e(201)},{"/Volumes/Case Sensitive/perso/bonhomme/node_modules/browserify/node_modules/isarray/index.js":201}],283:[function(e,t,r){!function(e){function t(e){if(t[e]!==o)return t[e];var r;if("bug-string-char-index"==e)r="a"!="a"[0];else if("json"==e)r=t("json-stringify")&&t("json-parse");else{var i,n='{"a":[1,true,false,null,"\\u0000\\b\\n\\f\\r\\t"]}';if("json-stringify"==e){var a=c.stringify,h="function"==typeof a&&u;if(h){(i=function(){return 1}).toJSON=i;try{h="0"===a(0)&&"0"===a(new Number)&&'""'==a(new String)&&a(s)===o&&a(o)===o&&a()===o&&"1"===a(i)&&"[1]"==a([i])&&"[null]"==a([o])&&"null"==a(null)&&"[null,null,null]"==a([o,s,null])&&a({a:[i,!0,!1,null,"\x00\b\n\f\r	"]})==n&&"1"===a(null,i)&&"[\n 1,\n 2\n]"==a([1,2],null,1)&&'"-271821-04-20T00:00:00.000Z"'==a(new Date(-864e13))&&'"+275760-09-13T00:00:00.000Z"'==a(new Date(864e13))&&'"-000001-01-01T00:00:00.000Z"'==a(new Date(-621987552e5))&&'"1969-12-31T23:59:59.999Z"'==a(new Date(-1))}catch(e){h=!1}}r=h}if("json-parse"==e){var f=c.parse;if("function"==typeof f)try{if(0===f("0")&&!f(!1)){i=f(n);var d=5==i.a.length&&1===i.a[0];if(d){try{d=!f('"	"')}catch(e){}if(d)try{d=1!==f("01")}catch(e){}if(d)try{d=1!==f("1.")}catch(e){}}}}catch(e){d=!1}r=d}}return t[e]=!!r}var i,n,o,s={}.toString,a="function"==typeof define&&define.amd,h="object"==typeof JSON&&JSON,c="object"==typeof r&&r&&!r.nodeType&&r;c&&h?(c.stringify=h.stringify,c.parse=h.parse):c=e.JSON=h||{};var u=new Date(-0xc782b5b800cec);try{u=-109252==u.getUTCFullYear()&&0===u.getUTCMonth()&&1===u.getUTCDate()&&10==u.getUTCHours()&&37==u.getUTCMinutes()&&6==u.getUTCSeconds()&&708==u.getUTCMilliseconds()}catch(e){}if(!t("json")){var f="[object Function]",d="[object Date]",l="[object Number]",p="[object String]",b="[object Array]",m="[object Boolean]",v=t("bug-string-char-index");if(!u)var g=Math.floor,y=[0,31,59,90,120,151,181,212,243,273,304,334],w=function(e,t){return y[t]+365*(e-1970)+g((e-1969+(t=+(t>1)))/4)-g((e-1901+t)/100)+g((e-1601+t)/400)};(i={}.hasOwnProperty)||(i=function(e){var t,r={};return(r.__proto__=null,r.__proto__={toString:1},r).toString!=s?i=function(e){var t=this.__proto__,r=e in(this.__proto__=null,this);return this.__proto__=t,r}:(t=r.constructor,i=function(e){var r=(this.constructor||t).prototype;return e in this&&!(e in r&&this[e]===r[e])}),r=null,i.call(this,e)});var _={boolean:1,number:1,string:1,undefined:1},x=function(e,t){var r=typeof e[t];return"object"==r?!!e[t]:!_[r]};if(n=function(e,t){var r,o,a,h=0;(r=function(){this.valueOf=0}).prototype.valueOf=0,o=new r;for(a in o)i.call(o,a)&&h++;return r=o=null,h?n=2==h?function(e,t){var r,n={},o=s.call(e)==f;for(r in e)o&&"prototype"==r||i.call(n,r)||!(n[r]=1)||!i.call(e,r)||t(r)}:function(e,t){var r,n,o=s.call(e)==f;for(r in e)o&&"prototype"==r||!i.call(e,r)||(n="constructor"===r)||t(r);(n||i.call(e,r="constructor"))&&t(r)}:(o=["valueOf","toString","toLocaleString","propertyIsEnumerable","isPrototypeOf","hasOwnProperty","constructor"],n=function(e,t){var r,n,a=s.call(e)==f,h=!a&&"function"!=typeof e.constructor&&x(e,"hasOwnProperty")?e.hasOwnProperty:i;for(r in e)a&&"prototype"==r||!h.call(e,r)||t(r);for(n=o.length;r=o[--n];h.call(e,r)&&t(r));}),n(e,t)},!t("json-stringify")){var S={92:"\\\\",34:'\\"',8:"\\b",12:"\\f",10:"\\n",13:"\\r",9:"\\t"},T="000000",A=function(e,t){return(T+(t||0)).slice(-e)},E="\\u00",C=function(e){var t,r='"',i=0,n=e.length,o=n>10&&v;for(o&&(t=e.split(""));n>i;i++){var s=e.charCodeAt(i);switch(s){case 8:case 9:case 10:case 12:case 13:case 34:case 92:r+=S[s];break;default:if(32>s){r+=E+A(2,s.toString(16));break}r+=o?t[i]:v?e.charAt(i):e[i]}}return r+'"'},k=function(e,t,r,a,h,c,u){var f,v,y,_,x,S,T,E,R,M,B,I,j,P,O,L;try{f=t[e]}catch(e){}if("object"==typeof f&&f)if(v=s.call(f),v!=d||i.call(f,"toJSON"))"function"==typeof f.toJSON&&(v!=l&&v!=p&&v!=b||i.call(f,"toJSON"))&&(f=f.toJSON(e));else if(f>-1/0&&1/0>f){if(w){for(x=g(f/864e5),y=g(x/365.2425)+1970-1;w(y+1,0)<=x;y++);for(_=g((x-w(y,0))/30.42);w(y,_+1)<=x;_++);x=1+x-w(y,_),S=(f%864e5+864e5)%864e5,T=g(S/36e5)%24,E=g(S/6e4)%60,R=g(S/1e3)%60,M=S%1e3}else y=f.getUTCFullYear(),_=f.getUTCMonth(),x=f.getUTCDate(),T=f.getUTCHours(),E=f.getUTCMinutes(),R=f.getUTCSeconds(),M=f.getUTCMilliseconds();f=(0>=y||y>=1e4?(0>y?"-":"+")+A(6,0>y?-y:y):A(4,y))+"-"+A(2,_+1)+"-"+A(2,x)+"T"+A(2,T)+":"+A(2,E)+":"+A(2,R)+"."+A(3,M)+"Z"}else f=null;if(r&&(f=r.call(t,e,f)),null===f)return"null";if(v=s.call(f),v==m)return""+f;if(v==l)return f>-1/0&&1/0>f?""+f:"null";if(v==p)return C(""+f);if("object"==typeof f){for(P=u.length;P--;)if(u[P]===f)throw TypeError();if(u.push(f),B=[],O=c,c+=h,v==b){for(j=0,P=f.length;P>j;j++)I=k(j,f,r,a,h,c,u),B.push(I===o?"null":I);L=B.length?h?"[\n"+c+B.join(",\n"+c)+"\n"+O+"]":"["+B.join(",")+"]":"[]"}else n(a||f,function(e){var t=k(e,f,r,a,h,c,u);t!==o&&B.push(C(e)+":"+(h?" ":"")+t)}),L=B.length?h?"{\n"+c+B.join(",\n"+c)+"\n"+O+"}":"{"+B.join(",")+"}":"{}";return u.pop(),L}};c.stringify=function(e,t,r){var i,n,o,a;if("function"==typeof t||"object"==typeof t&&t)if((a=s.call(t))==f)n=t;else if(a==b){o={};for(var h,c=0,u=t.length;u>c;h=t[c++],a=s.call(h),(a==p||a==l)&&(o[h]=1));}if(r)if((a=s.call(r))==l){if((r-=r%1)>0)for(i="",r>10&&(r=10);i.length<r;i+=" ");}else a==p&&(i=r.length<=10?r:r.slice(0,10));return k("",(h={},h[""]=e,h),n,o,i,"",[])}}if(!t("json-parse")){var R,M,B=String.fromCharCode,I={92:"\\",34:'"',47:"/",98:"\b",116:"	",110:"\n",102:"\f",114:"\r"},j=function(){throw R=M=null,SyntaxError()},P=function(){for(var e,t,r,i,n,o=M,s=o.length;s>R;)switch(n=o.charCodeAt(R)){case 9:case 10:case 13:case 32:R++;break;case 123:case 125:case 91:case 93:case 58:case 44:return e=v?o.charAt(R):o[R],R++,e;case 34:for(e="@",R++;s>R;)if(n=o.charCodeAt(R),32>n)j();else if(92==n)switch(n=o.charCodeAt(++R)){case 92:case 34:case 47:case 98:case 116:case 110:case 102:case 114:e+=I[n],R++;break;case 117:for(t=++R,r=R+4;r>R;R++)n=o.charCodeAt(R),n>=48&&57>=n||n>=97&&102>=n||n>=65&&70>=n||j();e+=B("0x"+o.slice(t,R));break;default:j()}else{if(34==n)break;for(n=o.charCodeAt(R),t=R;n>=32&&92!=n&&34!=n;)n=o.charCodeAt(++R);e+=o.slice(t,R)}if(34==o.charCodeAt(R))return R++,e;j();default:if(t=R,45==n&&(i=!0,n=o.charCodeAt(++R)),n>=48&&57>=n){for(48==n&&(n=o.charCodeAt(R+1),n>=48&&57>=n)&&j(),i=!1;s>R&&(n=o.charCodeAt(R),n>=48&&57>=n);R++);if(46==o.charCodeAt(R)){for(r=++R;s>r&&(n=o.charCodeAt(r),n>=48&&57>=n);r++);r==R&&j(),R=r}if(n=o.charCodeAt(R),101==n||69==n){for(n=o.charCodeAt(++R),(43==n||45==n)&&R++,r=R;s>r&&(n=o.charCodeAt(r),n>=48&&57>=n);r++);r==R&&j(),R=r}return+o.slice(t,R)}if(i&&j(),"true"==o.slice(R,R+4))return R+=4,!0;if("false"==o.slice(R,R+5))return R+=5,!1;if("null"==o.slice(R,R+4))return R+=4,null;j()}return"$"},O=function(e){var t,r;if("$"==e&&j(),"string"==typeof e){if("@"==(v?e.charAt(0):e[0]))return e.slice(1);if("["==e){for(t=[];e=P(),"]"!=e;r||(r=!0))r&&(","==e?(e=P(),"]"==e&&j()):j()),","==e&&j(),t.push(O(e));return t}if("{"==e){for(t={};e=P(),"}"!=e;r||(r=!0))r&&(","==e?(e=P(),"}"==e&&j()):j()),(","==e||"string"!=typeof e||"@"!=(v?e.charAt(0):e[0])||":"!=P())&&j(),t[e.slice(1)]=O(P());return t}j()}return e},L=function(e,t,r){var i=D(e,t,r);i===o?delete e[t]:e[t]=i},D=function(e,t,r){var i,o=e[t];if("object"==typeof o&&o)if(s.call(o)==b)for(i=o.length;i--;)L(o,i,r);else n(o,function(e){L(o,e,r)});return r.call(e,t,o)};c.parse=function(e,t){var r,i;return R=0,M=""+e,r=O(P()),"$"!=P()&&j(),R=M=null,t&&s.call(t)==f?D((i={},i[""]=r,i),"",t):r}}}a&&define(function(){return c})}(this)},{}],284:[function(e,t){function r(e,t){var r=[];t=t||0;for(var i=t||0;i<e.length;i++)r[i-t]=e[i];return r}t.exports=r},{}],285:[function(e,t){"use strict";function r(e){return e in c?c[e]:c[e]=i(e)}function i(e){var t,r=e.replace(/-([a-z])/g,function(e,t){return t.toUpperCase()}),i=a.length;if(void 0!==s[r])return r;for(r=n(e);i--;)if(t=a[i]+r,void 0!==s[t])return t;throw new Error("unable to prefix "+e)}function n(e){return e.charAt(0).toUpperCase()+e.slice(1)}function o(e){var t=r(e),i=/([A-Z])/g;return i.test(t)&&(t=(h.test(t)?"-":"")+t.replace(i,"-$1")),t.toLowerCase()}var s=document.createElement("p").style,a="O ms Moz webkit".split(" "),h=/^(o|ms|moz|webkit)/,c={};t.exports=r,t.exports.dash=o},{}]},{},[47]);